function TV(t,e){for(var r=0;r<e.length;r++){const o=e[r];if(typeof o!="string"&&!Array.isArray(o)){for(const u in o)if(u!=="default"&&!(u in t)){const f=Object.getOwnPropertyDescriptor(o,u);f&&Object.defineProperty(t,u,f.get?f:{enumerable:!0,get:()=>o[u]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const f of u)if(f.type==="childList")for(const p of f.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&o(p)}).observe(document,{childList:!0,subtree:!0});function r(u){const f={};return u.integrity&&(f.integrity=u.integrity),u.referrerPolicy&&(f.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?f.credentials="include":u.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function o(u){if(u.ep)return;u.ep=!0;const f=r(u);fetch(u.href,f)}})();var cg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function wi(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function AV(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function o(){return this instanceof o?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(o){var u=Object.getOwnPropertyDescriptor(t,o);Object.defineProperty(r,o,u.get?u:{enumerable:!0,get:function(){return t[o]}})}),r}var EV={exports:{}},yw={},DV={exports:{}},Hn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mB=Symbol.for("react.element"),MJ=Symbol.for("react.portal"),IJ=Symbol.for("react.fragment"),OJ=Symbol.for("react.strict_mode"),kJ=Symbol.for("react.profiler"),LJ=Symbol.for("react.provider"),RJ=Symbol.for("react.context"),zJ=Symbol.for("react.forward_ref"),NJ=Symbol.for("react.suspense"),FJ=Symbol.for("react.memo"),jJ=Symbol.for("react.lazy"),eN=Symbol.iterator;function $J(t){return t===null||typeof t!="object"?null:(t=eN&&t[eN]||t["@@iterator"],typeof t=="function"?t:null)}var PV={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},MV=Object.assign,IV={};function g_(t,e,r){this.props=t,this.context=e,this.refs=IV,this.updater=r||PV}g_.prototype.isReactComponent={};g_.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};g_.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function OV(){}OV.prototype=g_.prototype;function mO(t,e,r){this.props=t,this.context=e,this.refs=IV,this.updater=r||PV}var gO=mO.prototype=new OV;gO.constructor=mO;MV(gO,g_.prototype);gO.isPureReactComponent=!0;var tN=Array.isArray,kV=Object.prototype.hasOwnProperty,_O={current:null},LV={key:!0,ref:!0,__self:!0,__source:!0};function RV(t,e,r){var o,u={},f=null,p=null;if(e!=null)for(o in e.ref!==void 0&&(p=e.ref),e.key!==void 0&&(f=""+e.key),e)kV.call(e,o)&&!LV.hasOwnProperty(o)&&(u[o]=e[o]);var x=arguments.length-2;if(x===1)u.children=r;else if(1<x){for(var s=Array(x),w=0;w<x;w++)s[w]=arguments[w+2];u.children=s}if(t&&t.defaultProps)for(o in x=t.defaultProps,x)u[o]===void 0&&(u[o]=x[o]);return{$$typeof:mB,type:t,key:f,ref:p,props:u,_owner:_O.current}}function UJ(t,e){return{$$typeof:mB,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function yO(t){return typeof t=="object"&&t!==null&&t.$$typeof===mB}function VJ(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var rN=/\/+/g;function dA(t,e){return typeof t=="object"&&t!==null&&t.key!=null?VJ(""+t.key):e.toString(36)}function xb(t,e,r,o,u){var f=typeof t;(f==="undefined"||f==="boolean")&&(t=null);var p=!1;if(t===null)p=!0;else switch(f){case"string":case"number":p=!0;break;case"object":switch(t.$$typeof){case mB:case MJ:p=!0}}if(p)return p=t,u=u(p),t=o===""?"."+dA(p,0):o,tN(u)?(r="",t!=null&&(r=t.replace(rN,"$&/")+"/"),xb(u,e,r,"",function(w){return w})):u!=null&&(yO(u)&&(u=UJ(u,r+(!u.key||p&&p.key===u.key?"":(""+u.key).replace(rN,"$&/")+"/")+t)),e.push(u)),1;if(p=0,o=o===""?".":o+":",tN(t))for(var x=0;x<t.length;x++){f=t[x];var s=o+dA(f,x);p+=xb(f,e,r,s,u)}else if(s=$J(t),typeof s=="function")for(t=s.call(t),x=0;!(f=t.next()).done;)f=f.value,s=o+dA(f,x++),p+=xb(f,e,r,s,u);else if(f==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return p}function gx(t,e,r){if(t==null)return t;var o=[],u=0;return xb(t,o,"","",function(f){return e.call(r,f,u++)}),o}function GJ(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var as={current:null},bb={transition:null},HJ={ReactCurrentDispatcher:as,ReactCurrentBatchConfig:bb,ReactCurrentOwner:_O};function zV(){throw Error("act(...) is not supported in production builds of React.")}Hn.Children={map:gx,forEach:function(t,e,r){gx(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return gx(t,function(){e++}),e},toArray:function(t){return gx(t,function(e){return e})||[]},only:function(t){if(!yO(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Hn.Component=g_;Hn.Fragment=IJ;Hn.Profiler=kJ;Hn.PureComponent=mO;Hn.StrictMode=OJ;Hn.Suspense=NJ;Hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HJ;Hn.act=zV;Hn.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var o=MV({},t.props),u=t.key,f=t.ref,p=t._owner;if(e!=null){if(e.ref!==void 0&&(f=e.ref,p=_O.current),e.key!==void 0&&(u=""+e.key),t.type&&t.type.defaultProps)var x=t.type.defaultProps;for(s in e)kV.call(e,s)&&!LV.hasOwnProperty(s)&&(o[s]=e[s]===void 0&&x!==void 0?x[s]:e[s])}var s=arguments.length-2;if(s===1)o.children=r;else if(1<s){x=Array(s);for(var w=0;w<s;w++)x[w]=arguments[w+2];o.children=x}return{$$typeof:mB,type:t.type,key:u,ref:f,props:o,_owner:p}};Hn.createContext=function(t){return t={$$typeof:RJ,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:LJ,_context:t},t.Consumer=t};Hn.createElement=RV;Hn.createFactory=function(t){var e=RV.bind(null,t);return e.type=t,e};Hn.createRef=function(){return{current:null}};Hn.forwardRef=function(t){return{$$typeof:zJ,render:t}};Hn.isValidElement=yO;Hn.lazy=function(t){return{$$typeof:jJ,_payload:{_status:-1,_result:t},_init:GJ}};Hn.memo=function(t,e){return{$$typeof:FJ,type:t,compare:e===void 0?null:e}};Hn.startTransition=function(t){var e=bb.transition;bb.transition={};try{t()}finally{bb.transition=e}};Hn.unstable_act=zV;Hn.useCallback=function(t,e){return as.current.useCallback(t,e)};Hn.useContext=function(t){return as.current.useContext(t)};Hn.useDebugValue=function(){};Hn.useDeferredValue=function(t){return as.current.useDeferredValue(t)};Hn.useEffect=function(t,e){return as.current.useEffect(t,e)};Hn.useId=function(){return as.current.useId()};Hn.useImperativeHandle=function(t,e,r){return as.current.useImperativeHandle(t,e,r)};Hn.useInsertionEffect=function(t,e){return as.current.useInsertionEffect(t,e)};Hn.useLayoutEffect=function(t,e){return as.current.useLayoutEffect(t,e)};Hn.useMemo=function(t,e){return as.current.useMemo(t,e)};Hn.useReducer=function(t,e,r){return as.current.useReducer(t,e,r)};Hn.useRef=function(t){return as.current.useRef(t)};Hn.useState=function(t){return as.current.useState(t)};Hn.useSyncExternalStore=function(t,e,r){return as.current.useSyncExternalStore(t,e,r)};Hn.useTransition=function(){return as.current.useTransition()};Hn.version="18.3.1";DV.exports=Hn;var Te=DV.exports;const Ue=wi(Te),WJ=TV({__proto__:null,default:Ue},[Te]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZJ=Te,qJ=Symbol.for("react.element"),KJ=Symbol.for("react.fragment"),XJ=Object.prototype.hasOwnProperty,YJ=ZJ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,JJ={key:!0,ref:!0,__self:!0,__source:!0};function NV(t,e,r){var o,u={},f=null,p=null;r!==void 0&&(f=""+r),e.key!==void 0&&(f=""+e.key),e.ref!==void 0&&(p=e.ref);for(o in e)XJ.call(e,o)&&!JJ.hasOwnProperty(o)&&(u[o]=e[o]);if(t&&t.defaultProps)for(o in e=t.defaultProps,e)u[o]===void 0&&(u[o]=e[o]);return{$$typeof:qJ,type:t,key:f,ref:p,props:u,_owner:YJ.current}}yw.Fragment=KJ;yw.jsx=NV;yw.jsxs=NV;EV.exports=yw;var Ie=EV.exports,bP={},FV={exports:{}},il={},jV={exports:{}},$V={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Le,Nt){var xt=Le.length;Le.push(Nt);e:for(;0<xt;){var $t=xt-1>>>1,Wt=Le[$t];if(0<u(Wt,Nt))Le[$t]=Nt,Le[xt]=Wt,xt=$t;else break e}}function r(Le){return Le.length===0?null:Le[0]}function o(Le){if(Le.length===0)return null;var Nt=Le[0],xt=Le.pop();if(xt!==Nt){Le[0]=xt;e:for(var $t=0,Wt=Le.length,Tr=Wt>>>1;$t<Tr;){var Hr=2*($t+1)-1,Wr=Le[Hr],zr=Hr+1,jn=Le[zr];if(0>u(Wr,xt))zr<Wt&&0>u(jn,Wr)?(Le[$t]=jn,Le[zr]=xt,$t=zr):(Le[$t]=Wr,Le[Hr]=xt,$t=Hr);else if(zr<Wt&&0>u(jn,xt))Le[$t]=jn,Le[zr]=xt,$t=zr;else break e}}return Nt}function u(Le,Nt){var xt=Le.sortIndex-Nt.sortIndex;return xt!==0?xt:Le.id-Nt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var f=performance;t.unstable_now=function(){return f.now()}}else{var p=Date,x=p.now();t.unstable_now=function(){return p.now()-x}}var s=[],w=[],I=1,P=null,N=3,U=!1,X=!1,Q=!1,J=typeof setTimeout=="function"?setTimeout:null,Z=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function K(Le){for(var Nt=r(w);Nt!==null;){if(Nt.callback===null)o(w);else if(Nt.startTime<=Le)o(w),Nt.sortIndex=Nt.expirationTime,e(s,Nt);else break;Nt=r(w)}}function ee(Le){if(Q=!1,K(Le),!X)if(r(s)!==null)X=!0,Je(se);else{var Nt=r(w);Nt!==null&&St(ee,Nt.startTime-Le)}}function se(Le,Nt){X=!1,Q&&(Q=!1,Z(Ae),Ae=-1),U=!0;var xt=N;try{for(K(Nt),P=r(s);P!==null&&(!(P.expirationTime>Nt)||Le&&!je());){var $t=P.callback;if(typeof $t=="function"){P.callback=null,N=P.priorityLevel;var Wt=$t(P.expirationTime<=Nt);Nt=t.unstable_now(),typeof Wt=="function"?P.callback=Wt:P===r(s)&&o(s),K(Nt)}else o(s);P=r(s)}if(P!==null)var Tr=!0;else{var Hr=r(w);Hr!==null&&St(ee,Hr.startTime-Nt),Tr=!1}return Tr}finally{P=null,N=xt,U=!1}}var me=!1,Ce=null,Ae=-1,De=5,qe=-1;function je(){return!(t.unstable_now()-qe<De)}function Oe(){if(Ce!==null){var Le=t.unstable_now();qe=Le;var Nt=!0;try{Nt=Ce(!0,Le)}finally{Nt?ct():(me=!1,Ce=null)}}else me=!1}var ct;if(typeof H=="function")ct=function(){H(Oe)};else if(typeof MessageChannel<"u"){var ht=new MessageChannel,We=ht.port2;ht.port1.onmessage=Oe,ct=function(){We.postMessage(null)}}else ct=function(){J(Oe,0)};function Je(Le){Ce=Le,me||(me=!0,ct())}function St(Le,Nt){Ae=J(function(){Le(t.unstable_now())},Nt)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Le){Le.callback=null},t.unstable_continueExecution=function(){X||U||(X=!0,Je(se))},t.unstable_forceFrameRate=function(Le){0>Le||125<Le?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):De=0<Le?Math.floor(1e3/Le):5},t.unstable_getCurrentPriorityLevel=function(){return N},t.unstable_getFirstCallbackNode=function(){return r(s)},t.unstable_next=function(Le){switch(N){case 1:case 2:case 3:var Nt=3;break;default:Nt=N}var xt=N;N=Nt;try{return Le()}finally{N=xt}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Le,Nt){switch(Le){case 1:case 2:case 3:case 4:case 5:break;default:Le=3}var xt=N;N=Le;try{return Nt()}finally{N=xt}},t.unstable_scheduleCallback=function(Le,Nt,xt){var $t=t.unstable_now();switch(typeof xt=="object"&&xt!==null?(xt=xt.delay,xt=typeof xt=="number"&&0<xt?$t+xt:$t):xt=$t,Le){case 1:var Wt=-1;break;case 2:Wt=250;break;case 5:Wt=1073741823;break;case 4:Wt=1e4;break;default:Wt=5e3}return Wt=xt+Wt,Le={id:I++,callback:Nt,priorityLevel:Le,startTime:xt,expirationTime:Wt,sortIndex:-1},xt>$t?(Le.sortIndex=xt,e(w,Le),r(s)===null&&Le===r(w)&&(Q?(Z(Ae),Ae=-1):Q=!0,St(ee,xt-$t))):(Le.sortIndex=Wt,e(s,Le),X||U||(X=!0,Je(se))),Le},t.unstable_shouldYield=je,t.unstable_wrapCallback=function(Le){var Nt=N;return function(){var xt=N;N=Nt;try{return Le.apply(this,arguments)}finally{N=xt}}}})($V);jV.exports=$V;var QJ=jV.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eQ=Te,nl=QJ;function rr(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var UV=new Set,rv={};function Gp(t,e){Rg(t,e),Rg(t+"Capture",e)}function Rg(t,e){for(rv[t]=e,t=0;t<e.length;t++)UV.add(e[t])}var _h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),CP=Object.prototype.hasOwnProperty,tQ=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,nN={},iN={};function rQ(t){return CP.call(iN,t)?!0:CP.call(nN,t)?!1:tQ.test(t)?iN[t]=!0:(nN[t]=!0,!1)}function nQ(t,e,r,o){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return o?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function iQ(t,e,r,o){if(e===null||typeof e>"u"||nQ(t,e,r,o))return!0;if(o)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ss(t,e,r,o,u,f,p){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=o,this.attributeNamespace=u,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=f,this.removeEmptyString=p}var wa={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){wa[t]=new ss(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];wa[e]=new ss(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){wa[t]=new ss(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){wa[t]=new ss(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){wa[t]=new ss(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){wa[t]=new ss(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){wa[t]=new ss(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){wa[t]=new ss(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){wa[t]=new ss(t,5,!1,t.toLowerCase(),null,!1,!1)});var vO=/[\-:]([a-z])/g;function BO(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(vO,BO);wa[e]=new ss(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(vO,BO);wa[e]=new ss(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(vO,BO);wa[e]=new ss(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){wa[t]=new ss(t,1,!1,t.toLowerCase(),null,!1,!1)});wa.xlinkHref=new ss("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){wa[t]=new ss(t,1,!1,t.toLowerCase(),null,!0,!0)});function xO(t,e,r,o){var u=wa.hasOwnProperty(e)?wa[e]:null;(u!==null?u.type!==0:o||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(iQ(e,r,u,o)&&(r=null),o||u===null?rQ(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):u.mustUseProperty?t[u.propertyName]=r===null?u.type===3?!1:"":r:(e=u.attributeName,o=u.attributeNamespace,r===null?t.removeAttribute(e):(u=u.type,r=u===3||u===4&&r===!0?"":""+r,o?t.setAttributeNS(o,e,r):t.setAttribute(e,r))))}var Sh=eQ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_x=Symbol.for("react.element"),hg=Symbol.for("react.portal"),fg=Symbol.for("react.fragment"),bO=Symbol.for("react.strict_mode"),wP=Symbol.for("react.profiler"),VV=Symbol.for("react.provider"),GV=Symbol.for("react.context"),CO=Symbol.for("react.forward_ref"),SP=Symbol.for("react.suspense"),TP=Symbol.for("react.suspense_list"),wO=Symbol.for("react.memo"),wf=Symbol.for("react.lazy"),HV=Symbol.for("react.offscreen"),oN=Symbol.iterator;function qy(t){return t===null||typeof t!="object"?null:(t=oN&&t[oN]||t["@@iterator"],typeof t=="function"?t:null)}var uo=Object.assign,pA;function T0(t){if(pA===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);pA=e&&e[1]||""}return`
`+pA+t}var mA=!1;function gA(t,e){if(!t||mA)return"";mA=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(w){var o=w}Reflect.construct(t,[],e)}else{try{e.call()}catch(w){o=w}t.call(e.prototype)}else{try{throw Error()}catch(w){o=w}t()}}catch(w){if(w&&o&&typeof w.stack=="string"){for(var u=w.stack.split(`
`),f=o.stack.split(`
`),p=u.length-1,x=f.length-1;1<=p&&0<=x&&u[p]!==f[x];)x--;for(;1<=p&&0<=x;p--,x--)if(u[p]!==f[x]){if(p!==1||x!==1)do if(p--,x--,0>x||u[p]!==f[x]){var s=`
`+u[p].replace(" at new "," at ");return t.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",t.displayName)),s}while(1<=p&&0<=x);break}}}finally{mA=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?T0(t):""}function oQ(t){switch(t.tag){case 5:return T0(t.type);case 16:return T0("Lazy");case 13:return T0("Suspense");case 19:return T0("SuspenseList");case 0:case 2:case 15:return t=gA(t.type,!1),t;case 11:return t=gA(t.type.render,!1),t;case 1:return t=gA(t.type,!0),t;default:return""}}function AP(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case fg:return"Fragment";case hg:return"Portal";case wP:return"Profiler";case bO:return"StrictMode";case SP:return"Suspense";case TP:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case GV:return(t.displayName||"Context")+".Consumer";case VV:return(t._context.displayName||"Context")+".Provider";case CO:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case wO:return e=t.displayName||null,e!==null?e:AP(t.type)||"Memo";case wf:e=t._payload,t=t._init;try{return AP(t(e))}catch{}}return null}function aQ(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return AP(e);case 8:return e===bO?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Yf(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function WV(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function sQ(t){var e=WV(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),o=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var u=r.get,f=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return u.call(this)},set:function(p){o=""+p,f.call(this,p)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return o},setValue:function(p){o=""+p},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function yx(t){t._valueTracker||(t._valueTracker=sQ(t))}function ZV(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),o="";return t&&(o=WV(t)?t.checked?"true":"false":t.value),t=o,t!==r?(e.setValue(t),!0):!1}function jb(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function EP(t,e){var r=e.checked;return uo({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function aN(t,e){var r=e.defaultValue==null?"":e.defaultValue,o=e.checked!=null?e.checked:e.defaultChecked;r=Yf(e.value!=null?e.value:r),t._wrapperState={initialChecked:o,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function qV(t,e){e=e.checked,e!=null&&xO(t,"checked",e,!1)}function DP(t,e){qV(t,e);var r=Yf(e.value),o=e.type;if(r!=null)o==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(o==="submit"||o==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?PP(t,e.type,r):e.hasOwnProperty("defaultValue")&&PP(t,e.type,Yf(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function sN(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var o=e.type;if(!(o!=="submit"&&o!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function PP(t,e,r){(e!=="number"||jb(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var A0=Array.isArray;function Tg(t,e,r,o){if(t=t.options,e){e={};for(var u=0;u<r.length;u++)e["$"+r[u]]=!0;for(r=0;r<t.length;r++)u=e.hasOwnProperty("$"+t[r].value),t[r].selected!==u&&(t[r].selected=u),u&&o&&(t[r].defaultSelected=!0)}else{for(r=""+Yf(r),e=null,u=0;u<t.length;u++){if(t[u].value===r){t[u].selected=!0,o&&(t[u].defaultSelected=!0);return}e!==null||t[u].disabled||(e=t[u])}e!==null&&(e.selected=!0)}}function MP(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(rr(91));return uo({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function lN(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(rr(92));if(A0(r)){if(1<r.length)throw Error(rr(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Yf(r)}}function KV(t,e){var r=Yf(e.value),o=Yf(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),o!=null&&(t.defaultValue=""+o)}function uN(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function XV(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function IP(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?XV(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var vx,YV=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,o,u){MSApp.execUnsafeLocalFunction(function(){return t(e,r,o,u)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(vx=vx||document.createElement("div"),vx.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=vx.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function nv(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var z0={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lQ=["Webkit","ms","Moz","O"];Object.keys(z0).forEach(function(t){lQ.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),z0[e]=z0[t]})});function JV(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||z0.hasOwnProperty(t)&&z0[t]?(""+e).trim():e+"px"}function QV(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var o=r.indexOf("--")===0,u=JV(r,e[r],o);r==="float"&&(r="cssFloat"),o?t.setProperty(r,u):t[r]=u}}var uQ=uo({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function OP(t,e){if(e){if(uQ[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(rr(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(rr(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(rr(61))}if(e.style!=null&&typeof e.style!="object")throw Error(rr(62))}}function kP(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var LP=null;function SO(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var RP=null,Ag=null,Eg=null;function cN(t){if(t=yB(t)){if(typeof RP!="function")throw Error(rr(280));var e=t.stateNode;e&&(e=Cw(e),RP(t.stateNode,t.type,e))}}function e2(t){Ag?Eg?Eg.push(t):Eg=[t]:Ag=t}function t2(){if(Ag){var t=Ag,e=Eg;if(Eg=Ag=null,cN(t),e)for(t=0;t<e.length;t++)cN(e[t])}}function r2(t,e){return t(e)}function n2(){}var _A=!1;function i2(t,e,r){if(_A)return t(e,r);_A=!0;try{return r2(t,e,r)}finally{_A=!1,(Ag!==null||Eg!==null)&&(n2(),t2())}}function iv(t,e){var r=t.stateNode;if(r===null)return null;var o=Cw(r);if(o===null)return null;r=o[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(rr(231,e,typeof r));return r}var zP=!1;if(_h)try{var Ky={};Object.defineProperty(Ky,"passive",{get:function(){zP=!0}}),window.addEventListener("test",Ky,Ky),window.removeEventListener("test",Ky,Ky)}catch{zP=!1}function cQ(t,e,r,o,u,f,p,x,s){var w=Array.prototype.slice.call(arguments,3);try{e.apply(r,w)}catch(I){this.onError(I)}}var N0=!1,$b=null,Ub=!1,NP=null,hQ={onError:function(t){N0=!0,$b=t}};function fQ(t,e,r,o,u,f,p,x,s){N0=!1,$b=null,cQ.apply(hQ,arguments)}function dQ(t,e,r,o,u,f,p,x,s){if(fQ.apply(this,arguments),N0){if(N0){var w=$b;N0=!1,$b=null}else throw Error(rr(198));Ub||(Ub=!0,NP=w)}}function Hp(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function o2(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function hN(t){if(Hp(t)!==t)throw Error(rr(188))}function pQ(t){var e=t.alternate;if(!e){if(e=Hp(t),e===null)throw Error(rr(188));return e!==t?null:t}for(var r=t,o=e;;){var u=r.return;if(u===null)break;var f=u.alternate;if(f===null){if(o=u.return,o!==null){r=o;continue}break}if(u.child===f.child){for(f=u.child;f;){if(f===r)return hN(u),t;if(f===o)return hN(u),e;f=f.sibling}throw Error(rr(188))}if(r.return!==o.return)r=u,o=f;else{for(var p=!1,x=u.child;x;){if(x===r){p=!0,r=u,o=f;break}if(x===o){p=!0,o=u,r=f;break}x=x.sibling}if(!p){for(x=f.child;x;){if(x===r){p=!0,r=f,o=u;break}if(x===o){p=!0,o=f,r=u;break}x=x.sibling}if(!p)throw Error(rr(189))}}if(r.alternate!==o)throw Error(rr(190))}if(r.tag!==3)throw Error(rr(188));return r.stateNode.current===r?t:e}function a2(t){return t=pQ(t),t!==null?s2(t):null}function s2(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=s2(t);if(e!==null)return e;t=t.sibling}return null}var l2=nl.unstable_scheduleCallback,fN=nl.unstable_cancelCallback,mQ=nl.unstable_shouldYield,gQ=nl.unstable_requestPaint,To=nl.unstable_now,_Q=nl.unstable_getCurrentPriorityLevel,TO=nl.unstable_ImmediatePriority,u2=nl.unstable_UserBlockingPriority,Vb=nl.unstable_NormalPriority,yQ=nl.unstable_LowPriority,c2=nl.unstable_IdlePriority,vw=null,_c=null;function vQ(t){if(_c&&typeof _c.onCommitFiberRoot=="function")try{_c.onCommitFiberRoot(vw,t,void 0,(t.current.flags&128)===128)}catch{}}var Au=Math.clz32?Math.clz32:bQ,BQ=Math.log,xQ=Math.LN2;function bQ(t){return t>>>=0,t===0?32:31-(BQ(t)/xQ|0)|0}var Bx=64,xx=4194304;function E0(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Gb(t,e){var r=t.pendingLanes;if(r===0)return 0;var o=0,u=t.suspendedLanes,f=t.pingedLanes,p=r&268435455;if(p!==0){var x=p&~u;x!==0?o=E0(x):(f&=p,f!==0&&(o=E0(f)))}else p=r&~u,p!==0?o=E0(p):f!==0&&(o=E0(f));if(o===0)return 0;if(e!==0&&e!==o&&!(e&u)&&(u=o&-o,f=e&-e,u>=f||u===16&&(f&4194240)!==0))return e;if(o&4&&(o|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=o;0<e;)r=31-Au(e),u=1<<r,o|=t[r],e&=~u;return o}function CQ(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wQ(t,e){for(var r=t.suspendedLanes,o=t.pingedLanes,u=t.expirationTimes,f=t.pendingLanes;0<f;){var p=31-Au(f),x=1<<p,s=u[p];s===-1?(!(x&r)||x&o)&&(u[p]=CQ(x,e)):s<=e&&(t.expiredLanes|=x),f&=~x}}function FP(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function h2(){var t=Bx;return Bx<<=1,!(Bx&4194240)&&(Bx=64),t}function yA(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function gB(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Au(e),t[e]=r}function SQ(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var o=t.eventTimes;for(t=t.expirationTimes;0<r;){var u=31-Au(r),f=1<<u;e[u]=0,o[u]=-1,t[u]=-1,r&=~f}}function AO(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var o=31-Au(r),u=1<<o;u&e|t[o]&e&&(t[o]|=e),r&=~u}}var bi=0;function f2(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var d2,EO,p2,m2,g2,jP=!1,bx=[],Ff=null,jf=null,$f=null,ov=new Map,av=new Map,Af=[],TQ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function dN(t,e){switch(t){case"focusin":case"focusout":Ff=null;break;case"dragenter":case"dragleave":jf=null;break;case"mouseover":case"mouseout":$f=null;break;case"pointerover":case"pointerout":ov.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":av.delete(e.pointerId)}}function Xy(t,e,r,o,u,f){return t===null||t.nativeEvent!==f?(t={blockedOn:e,domEventName:r,eventSystemFlags:o,nativeEvent:f,targetContainers:[u]},e!==null&&(e=yB(e),e!==null&&EO(e)),t):(t.eventSystemFlags|=o,e=t.targetContainers,u!==null&&e.indexOf(u)===-1&&e.push(u),t)}function AQ(t,e,r,o,u){switch(e){case"focusin":return Ff=Xy(Ff,t,e,r,o,u),!0;case"dragenter":return jf=Xy(jf,t,e,r,o,u),!0;case"mouseover":return $f=Xy($f,t,e,r,o,u),!0;case"pointerover":var f=u.pointerId;return ov.set(f,Xy(ov.get(f)||null,t,e,r,o,u)),!0;case"gotpointercapture":return f=u.pointerId,av.set(f,Xy(av.get(f)||null,t,e,r,o,u)),!0}return!1}function _2(t){var e=gp(t.target);if(e!==null){var r=Hp(e);if(r!==null){if(e=r.tag,e===13){if(e=o2(r),e!==null){t.blockedOn=e,g2(t.priority,function(){p2(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Cb(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=$P(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var o=new r.constructor(r.type,r);LP=o,r.target.dispatchEvent(o),LP=null}else return e=yB(r),e!==null&&EO(e),t.blockedOn=r,!1;e.shift()}return!0}function pN(t,e,r){Cb(t)&&r.delete(e)}function EQ(){jP=!1,Ff!==null&&Cb(Ff)&&(Ff=null),jf!==null&&Cb(jf)&&(jf=null),$f!==null&&Cb($f)&&($f=null),ov.forEach(pN),av.forEach(pN)}function Yy(t,e){t.blockedOn===e&&(t.blockedOn=null,jP||(jP=!0,nl.unstable_scheduleCallback(nl.unstable_NormalPriority,EQ)))}function sv(t){function e(u){return Yy(u,t)}if(0<bx.length){Yy(bx[0],t);for(var r=1;r<bx.length;r++){var o=bx[r];o.blockedOn===t&&(o.blockedOn=null)}}for(Ff!==null&&Yy(Ff,t),jf!==null&&Yy(jf,t),$f!==null&&Yy($f,t),ov.forEach(e),av.forEach(e),r=0;r<Af.length;r++)o=Af[r],o.blockedOn===t&&(o.blockedOn=null);for(;0<Af.length&&(r=Af[0],r.blockedOn===null);)_2(r),r.blockedOn===null&&Af.shift()}var Dg=Sh.ReactCurrentBatchConfig,Hb=!0;function DQ(t,e,r,o){var u=bi,f=Dg.transition;Dg.transition=null;try{bi=1,DO(t,e,r,o)}finally{bi=u,Dg.transition=f}}function PQ(t,e,r,o){var u=bi,f=Dg.transition;Dg.transition=null;try{bi=4,DO(t,e,r,o)}finally{bi=u,Dg.transition=f}}function DO(t,e,r,o){if(Hb){var u=$P(t,e,r,o);if(u===null)EA(t,e,o,Wb,r),dN(t,o);else if(AQ(u,t,e,r,o))o.stopPropagation();else if(dN(t,o),e&4&&-1<TQ.indexOf(t)){for(;u!==null;){var f=yB(u);if(f!==null&&d2(f),f=$P(t,e,r,o),f===null&&EA(t,e,o,Wb,r),f===u)break;u=f}u!==null&&o.stopPropagation()}else EA(t,e,o,null,r)}}var Wb=null;function $P(t,e,r,o){if(Wb=null,t=SO(o),t=gp(t),t!==null)if(e=Hp(t),e===null)t=null;else if(r=e.tag,r===13){if(t=o2(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Wb=t,null}function y2(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_Q()){case TO:return 1;case u2:return 4;case Vb:case yQ:return 16;case c2:return 536870912;default:return 16}default:return 16}}var Of=null,PO=null,wb=null;function v2(){if(wb)return wb;var t,e=PO,r=e.length,o,u="value"in Of?Of.value:Of.textContent,f=u.length;for(t=0;t<r&&e[t]===u[t];t++);var p=r-t;for(o=1;o<=p&&e[r-o]===u[f-o];o++);return wb=u.slice(t,1<o?1-o:void 0)}function Sb(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Cx(){return!0}function mN(){return!1}function ol(t){function e(r,o,u,f,p){this._reactName=r,this._targetInst=u,this.type=o,this.nativeEvent=f,this.target=p,this.currentTarget=null;for(var x in t)t.hasOwnProperty(x)&&(r=t[x],this[x]=r?r(f):f[x]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Cx:mN,this.isPropagationStopped=mN,this}return uo(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Cx)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Cx)},persist:function(){},isPersistent:Cx}),e}var __={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},MO=ol(__),_B=uo({},__,{view:0,detail:0}),MQ=ol(_B),vA,BA,Jy,Bw=uo({},_B,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:IO,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Jy&&(Jy&&t.type==="mousemove"?(vA=t.screenX-Jy.screenX,BA=t.screenY-Jy.screenY):BA=vA=0,Jy=t),vA)},movementY:function(t){return"movementY"in t?t.movementY:BA}}),gN=ol(Bw),IQ=uo({},Bw,{dataTransfer:0}),OQ=ol(IQ),kQ=uo({},_B,{relatedTarget:0}),xA=ol(kQ),LQ=uo({},__,{animationName:0,elapsedTime:0,pseudoElement:0}),RQ=ol(LQ),zQ=uo({},__,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),NQ=ol(zQ),FQ=uo({},__,{data:0}),_N=ol(FQ),jQ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$Q={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},UQ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function VQ(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=UQ[t])?!!e[t]:!1}function IO(){return VQ}var GQ=uo({},_B,{key:function(t){if(t.key){var e=jQ[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Sb(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?$Q[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:IO,charCode:function(t){return t.type==="keypress"?Sb(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Sb(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),HQ=ol(GQ),WQ=uo({},Bw,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yN=ol(WQ),ZQ=uo({},_B,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:IO}),qQ=ol(ZQ),KQ=uo({},__,{propertyName:0,elapsedTime:0,pseudoElement:0}),XQ=ol(KQ),YQ=uo({},Bw,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),JQ=ol(YQ),QQ=[9,13,27,32],OO=_h&&"CompositionEvent"in window,F0=null;_h&&"documentMode"in document&&(F0=document.documentMode);var eee=_h&&"TextEvent"in window&&!F0,B2=_h&&(!OO||F0&&8<F0&&11>=F0),vN=" ",BN=!1;function x2(t,e){switch(t){case"keyup":return QQ.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function b2(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var dg=!1;function tee(t,e){switch(t){case"compositionend":return b2(e);case"keypress":return e.which!==32?null:(BN=!0,vN);case"textInput":return t=e.data,t===vN&&BN?null:t;default:return null}}function ree(t,e){if(dg)return t==="compositionend"||!OO&&x2(t,e)?(t=v2(),wb=PO=Of=null,dg=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return B2&&e.locale!=="ko"?null:e.data;default:return null}}var nee={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xN(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!nee[t.type]:e==="textarea"}function C2(t,e,r,o){e2(o),e=Zb(e,"onChange"),0<e.length&&(r=new MO("onChange","change",null,r,o),t.push({event:r,listeners:e}))}var j0=null,lv=null;function iee(t){k2(t,0)}function xw(t){var e=gg(t);if(ZV(e))return t}function oee(t,e){if(t==="change")return e}var w2=!1;if(_h){var bA;if(_h){var CA="oninput"in document;if(!CA){var bN=document.createElement("div");bN.setAttribute("oninput","return;"),CA=typeof bN.oninput=="function"}bA=CA}else bA=!1;w2=bA&&(!document.documentMode||9<document.documentMode)}function CN(){j0&&(j0.detachEvent("onpropertychange",S2),lv=j0=null)}function S2(t){if(t.propertyName==="value"&&xw(lv)){var e=[];C2(e,lv,t,SO(t)),i2(iee,e)}}function aee(t,e,r){t==="focusin"?(CN(),j0=e,lv=r,j0.attachEvent("onpropertychange",S2)):t==="focusout"&&CN()}function see(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return xw(lv)}function lee(t,e){if(t==="click")return xw(e)}function uee(t,e){if(t==="input"||t==="change")return xw(e)}function cee(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Pu=typeof Object.is=="function"?Object.is:cee;function uv(t,e){if(Pu(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),o=Object.keys(e);if(r.length!==o.length)return!1;for(o=0;o<r.length;o++){var u=r[o];if(!CP.call(e,u)||!Pu(t[u],e[u]))return!1}return!0}function wN(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function SN(t,e){var r=wN(t);t=0;for(var o;r;){if(r.nodeType===3){if(o=t+r.textContent.length,t<=e&&o>=e)return{node:r,offset:e-t};t=o}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=wN(r)}}function T2(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?T2(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function A2(){for(var t=window,e=jb();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=jb(t.document)}return e}function kO(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function hee(t){var e=A2(),r=t.focusedElem,o=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&T2(r.ownerDocument.documentElement,r)){if(o!==null&&kO(r)){if(e=o.start,t=o.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var u=r.textContent.length,f=Math.min(o.start,u);o=o.end===void 0?f:Math.min(o.end,u),!t.extend&&f>o&&(u=o,o=f,f=u),u=SN(r,f);var p=SN(r,o);u&&p&&(t.rangeCount!==1||t.anchorNode!==u.node||t.anchorOffset!==u.offset||t.focusNode!==p.node||t.focusOffset!==p.offset)&&(e=e.createRange(),e.setStart(u.node,u.offset),t.removeAllRanges(),f>o?(t.addRange(e),t.extend(p.node,p.offset)):(e.setEnd(p.node,p.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var fee=_h&&"documentMode"in document&&11>=document.documentMode,pg=null,UP=null,$0=null,VP=!1;function TN(t,e,r){var o=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;VP||pg==null||pg!==jb(o)||(o=pg,"selectionStart"in o&&kO(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),$0&&uv($0,o)||($0=o,o=Zb(UP,"onSelect"),0<o.length&&(e=new MO("onSelect","select",null,e,r),t.push({event:e,listeners:o}),e.target=pg)))}function wx(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var mg={animationend:wx("Animation","AnimationEnd"),animationiteration:wx("Animation","AnimationIteration"),animationstart:wx("Animation","AnimationStart"),transitionend:wx("Transition","TransitionEnd")},wA={},E2={};_h&&(E2=document.createElement("div").style,"AnimationEvent"in window||(delete mg.animationend.animation,delete mg.animationiteration.animation,delete mg.animationstart.animation),"TransitionEvent"in window||delete mg.transitionend.transition);function bw(t){if(wA[t])return wA[t];if(!mg[t])return t;var e=mg[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in E2)return wA[t]=e[r];return t}var D2=bw("animationend"),P2=bw("animationiteration"),M2=bw("animationstart"),I2=bw("transitionend"),O2=new Map,AN="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ed(t,e){O2.set(t,e),Gp(e,[t])}for(var SA=0;SA<AN.length;SA++){var TA=AN[SA],dee=TA.toLowerCase(),pee=TA[0].toUpperCase()+TA.slice(1);ed(dee,"on"+pee)}ed(D2,"onAnimationEnd");ed(P2,"onAnimationIteration");ed(M2,"onAnimationStart");ed("dblclick","onDoubleClick");ed("focusin","onFocus");ed("focusout","onBlur");ed(I2,"onTransitionEnd");Rg("onMouseEnter",["mouseout","mouseover"]);Rg("onMouseLeave",["mouseout","mouseover"]);Rg("onPointerEnter",["pointerout","pointerover"]);Rg("onPointerLeave",["pointerout","pointerover"]);Gp("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Gp("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Gp("onBeforeInput",["compositionend","keypress","textInput","paste"]);Gp("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Gp("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Gp("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var D0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mee=new Set("cancel close invalid load scroll toggle".split(" ").concat(D0));function EN(t,e,r){var o=t.type||"unknown-event";t.currentTarget=r,dQ(o,e,void 0,t),t.currentTarget=null}function k2(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var o=t[r],u=o.event;o=o.listeners;e:{var f=void 0;if(e)for(var p=o.length-1;0<=p;p--){var x=o[p],s=x.instance,w=x.currentTarget;if(x=x.listener,s!==f&&u.isPropagationStopped())break e;EN(u,x,w),f=s}else for(p=0;p<o.length;p++){if(x=o[p],s=x.instance,w=x.currentTarget,x=x.listener,s!==f&&u.isPropagationStopped())break e;EN(u,x,w),f=s}}}if(Ub)throw t=NP,Ub=!1,NP=null,t}function qi(t,e){var r=e[qP];r===void 0&&(r=e[qP]=new Set);var o=t+"__bubble";r.has(o)||(L2(e,t,2,!1),r.add(o))}function AA(t,e,r){var o=0;e&&(o|=4),L2(r,t,o,e)}var Sx="_reactListening"+Math.random().toString(36).slice(2);function cv(t){if(!t[Sx]){t[Sx]=!0,UV.forEach(function(r){r!=="selectionchange"&&(mee.has(r)||AA(r,!1,t),AA(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Sx]||(e[Sx]=!0,AA("selectionchange",!1,e))}}function L2(t,e,r,o){switch(y2(e)){case 1:var u=DQ;break;case 4:u=PQ;break;default:u=DO}r=u.bind(null,e,r,t),u=void 0,!zP||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(u=!0),o?u!==void 0?t.addEventListener(e,r,{capture:!0,passive:u}):t.addEventListener(e,r,!0):u!==void 0?t.addEventListener(e,r,{passive:u}):t.addEventListener(e,r,!1)}function EA(t,e,r,o,u){var f=o;if(!(e&1)&&!(e&2)&&o!==null)e:for(;;){if(o===null)return;var p=o.tag;if(p===3||p===4){var x=o.stateNode.containerInfo;if(x===u||x.nodeType===8&&x.parentNode===u)break;if(p===4)for(p=o.return;p!==null;){var s=p.tag;if((s===3||s===4)&&(s=p.stateNode.containerInfo,s===u||s.nodeType===8&&s.parentNode===u))return;p=p.return}for(;x!==null;){if(p=gp(x),p===null)return;if(s=p.tag,s===5||s===6){o=f=p;continue e}x=x.parentNode}}o=o.return}i2(function(){var w=f,I=SO(r),P=[];e:{var N=O2.get(t);if(N!==void 0){var U=MO,X=t;switch(t){case"keypress":if(Sb(r)===0)break e;case"keydown":case"keyup":U=HQ;break;case"focusin":X="focus",U=xA;break;case"focusout":X="blur",U=xA;break;case"beforeblur":case"afterblur":U=xA;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":U=gN;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":U=OQ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":U=qQ;break;case D2:case P2:case M2:U=RQ;break;case I2:U=XQ;break;case"scroll":U=MQ;break;case"wheel":U=JQ;break;case"copy":case"cut":case"paste":U=NQ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":U=yN}var Q=(e&4)!==0,J=!Q&&t==="scroll",Z=Q?N!==null?N+"Capture":null:N;Q=[];for(var H=w,K;H!==null;){K=H;var ee=K.stateNode;if(K.tag===5&&ee!==null&&(K=ee,Z!==null&&(ee=iv(H,Z),ee!=null&&Q.push(hv(H,ee,K)))),J)break;H=H.return}0<Q.length&&(N=new U(N,X,null,r,I),P.push({event:N,listeners:Q}))}}if(!(e&7)){e:{if(N=t==="mouseover"||t==="pointerover",U=t==="mouseout"||t==="pointerout",N&&r!==LP&&(X=r.relatedTarget||r.fromElement)&&(gp(X)||X[yh]))break e;if((U||N)&&(N=I.window===I?I:(N=I.ownerDocument)?N.defaultView||N.parentWindow:window,U?(X=r.relatedTarget||r.toElement,U=w,X=X?gp(X):null,X!==null&&(J=Hp(X),X!==J||X.tag!==5&&X.tag!==6)&&(X=null)):(U=null,X=w),U!==X)){if(Q=gN,ee="onMouseLeave",Z="onMouseEnter",H="mouse",(t==="pointerout"||t==="pointerover")&&(Q=yN,ee="onPointerLeave",Z="onPointerEnter",H="pointer"),J=U==null?N:gg(U),K=X==null?N:gg(X),N=new Q(ee,H+"leave",U,r,I),N.target=J,N.relatedTarget=K,ee=null,gp(I)===w&&(Q=new Q(Z,H+"enter",X,r,I),Q.target=K,Q.relatedTarget=J,ee=Q),J=ee,U&&X)t:{for(Q=U,Z=X,H=0,K=Q;K;K=Wm(K))H++;for(K=0,ee=Z;ee;ee=Wm(ee))K++;for(;0<H-K;)Q=Wm(Q),H--;for(;0<K-H;)Z=Wm(Z),K--;for(;H--;){if(Q===Z||Z!==null&&Q===Z.alternate)break t;Q=Wm(Q),Z=Wm(Z)}Q=null}else Q=null;U!==null&&DN(P,N,U,Q,!1),X!==null&&J!==null&&DN(P,J,X,Q,!0)}}e:{if(N=w?gg(w):window,U=N.nodeName&&N.nodeName.toLowerCase(),U==="select"||U==="input"&&N.type==="file")var se=oee;else if(xN(N))if(w2)se=uee;else{se=see;var me=aee}else(U=N.nodeName)&&U.toLowerCase()==="input"&&(N.type==="checkbox"||N.type==="radio")&&(se=lee);if(se&&(se=se(t,w))){C2(P,se,r,I);break e}me&&me(t,N,w),t==="focusout"&&(me=N._wrapperState)&&me.controlled&&N.type==="number"&&PP(N,"number",N.value)}switch(me=w?gg(w):window,t){case"focusin":(xN(me)||me.contentEditable==="true")&&(pg=me,UP=w,$0=null);break;case"focusout":$0=UP=pg=null;break;case"mousedown":VP=!0;break;case"contextmenu":case"mouseup":case"dragend":VP=!1,TN(P,r,I);break;case"selectionchange":if(fee)break;case"keydown":case"keyup":TN(P,r,I)}var Ce;if(OO)e:{switch(t){case"compositionstart":var Ae="onCompositionStart";break e;case"compositionend":Ae="onCompositionEnd";break e;case"compositionupdate":Ae="onCompositionUpdate";break e}Ae=void 0}else dg?x2(t,r)&&(Ae="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(Ae="onCompositionStart");Ae&&(B2&&r.locale!=="ko"&&(dg||Ae!=="onCompositionStart"?Ae==="onCompositionEnd"&&dg&&(Ce=v2()):(Of=I,PO="value"in Of?Of.value:Of.textContent,dg=!0)),me=Zb(w,Ae),0<me.length&&(Ae=new _N(Ae,t,null,r,I),P.push({event:Ae,listeners:me}),Ce?Ae.data=Ce:(Ce=b2(r),Ce!==null&&(Ae.data=Ce)))),(Ce=eee?tee(t,r):ree(t,r))&&(w=Zb(w,"onBeforeInput"),0<w.length&&(I=new _N("onBeforeInput","beforeinput",null,r,I),P.push({event:I,listeners:w}),I.data=Ce))}k2(P,e)})}function hv(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Zb(t,e){for(var r=e+"Capture",o=[];t!==null;){var u=t,f=u.stateNode;u.tag===5&&f!==null&&(u=f,f=iv(t,r),f!=null&&o.unshift(hv(t,f,u)),f=iv(t,e),f!=null&&o.push(hv(t,f,u))),t=t.return}return o}function Wm(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function DN(t,e,r,o,u){for(var f=e._reactName,p=[];r!==null&&r!==o;){var x=r,s=x.alternate,w=x.stateNode;if(s!==null&&s===o)break;x.tag===5&&w!==null&&(x=w,u?(s=iv(r,f),s!=null&&p.unshift(hv(r,s,x))):u||(s=iv(r,f),s!=null&&p.push(hv(r,s,x)))),r=r.return}p.length!==0&&t.push({event:e,listeners:p})}var gee=/\r\n?/g,_ee=/\u0000|\uFFFD/g;function PN(t){return(typeof t=="string"?t:""+t).replace(gee,`
`).replace(_ee,"")}function Tx(t,e,r){if(e=PN(e),PN(t)!==e&&r)throw Error(rr(425))}function qb(){}var GP=null,HP=null;function WP(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ZP=typeof setTimeout=="function"?setTimeout:void 0,yee=typeof clearTimeout=="function"?clearTimeout:void 0,MN=typeof Promise=="function"?Promise:void 0,vee=typeof queueMicrotask=="function"?queueMicrotask:typeof MN<"u"?function(t){return MN.resolve(null).then(t).catch(Bee)}:ZP;function Bee(t){setTimeout(function(){throw t})}function DA(t,e){var r=e,o=0;do{var u=r.nextSibling;if(t.removeChild(r),u&&u.nodeType===8)if(r=u.data,r==="/$"){if(o===0){t.removeChild(u),sv(e);return}o--}else r!=="$"&&r!=="$?"&&r!=="$!"||o++;r=u}while(r);sv(e)}function Uf(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function IN(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var y_=Math.random().toString(36).slice(2),pc="__reactFiber$"+y_,fv="__reactProps$"+y_,yh="__reactContainer$"+y_,qP="__reactEvents$"+y_,xee="__reactListeners$"+y_,bee="__reactHandles$"+y_;function gp(t){var e=t[pc];if(e)return e;for(var r=t.parentNode;r;){if(e=r[yh]||r[pc]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=IN(t);t!==null;){if(r=t[pc])return r;t=IN(t)}return e}t=r,r=t.parentNode}return null}function yB(t){return t=t[pc]||t[yh],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function gg(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(rr(33))}function Cw(t){return t[fv]||null}var KP=[],_g=-1;function td(t){return{current:t}}function Yi(t){0>_g||(t.current=KP[_g],KP[_g]=null,_g--)}function Ui(t,e){_g++,KP[_g]=t.current,t.current=e}var Jf={},Ha=td(Jf),Ss=td(!1),Mp=Jf;function zg(t,e){var r=t.type.contextTypes;if(!r)return Jf;var o=t.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===e)return o.__reactInternalMemoizedMaskedChildContext;var u={},f;for(f in r)u[f]=e[f];return o&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=u),u}function Ts(t){return t=t.childContextTypes,t!=null}function Kb(){Yi(Ss),Yi(Ha)}function ON(t,e,r){if(Ha.current!==Jf)throw Error(rr(168));Ui(Ha,e),Ui(Ss,r)}function R2(t,e,r){var o=t.stateNode;if(e=e.childContextTypes,typeof o.getChildContext!="function")return r;o=o.getChildContext();for(var u in o)if(!(u in e))throw Error(rr(108,aQ(t)||"Unknown",u));return uo({},r,o)}function Xb(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Jf,Mp=Ha.current,Ui(Ha,t),Ui(Ss,Ss.current),!0}function kN(t,e,r){var o=t.stateNode;if(!o)throw Error(rr(169));r?(t=R2(t,e,Mp),o.__reactInternalMemoizedMergedChildContext=t,Yi(Ss),Yi(Ha),Ui(Ha,t)):Yi(Ss),Ui(Ss,r)}var oh=null,ww=!1,PA=!1;function z2(t){oh===null?oh=[t]:oh.push(t)}function Cee(t){ww=!0,z2(t)}function rd(){if(!PA&&oh!==null){PA=!0;var t=0,e=bi;try{var r=oh;for(bi=1;t<r.length;t++){var o=r[t];do o=o(!0);while(o!==null)}oh=null,ww=!1}catch(u){throw oh!==null&&(oh=oh.slice(t+1)),l2(TO,rd),u}finally{bi=e,PA=!1}}return null}var yg=[],vg=0,Yb=null,Jb=0,Ol=[],kl=0,Ip=null,sh=1,lh="";function hp(t,e){yg[vg++]=Jb,yg[vg++]=Yb,Yb=t,Jb=e}function N2(t,e,r){Ol[kl++]=sh,Ol[kl++]=lh,Ol[kl++]=Ip,Ip=t;var o=sh;t=lh;var u=32-Au(o)-1;o&=~(1<<u),r+=1;var f=32-Au(e)+u;if(30<f){var p=u-u%5;f=(o&(1<<p)-1).toString(32),o>>=p,u-=p,sh=1<<32-Au(e)+u|r<<u|o,lh=f+t}else sh=1<<f|r<<u|o,lh=t}function LO(t){t.return!==null&&(hp(t,1),N2(t,1,0))}function RO(t){for(;t===Yb;)Yb=yg[--vg],yg[vg]=null,Jb=yg[--vg],yg[vg]=null;for(;t===Ip;)Ip=Ol[--kl],Ol[kl]=null,lh=Ol[--kl],Ol[kl]=null,sh=Ol[--kl],Ol[kl]=null}var tl=null,el=null,ro=!1,Cu=null;function F2(t,e){var r=Rl(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function LN(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,tl=t,el=Uf(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,tl=t,el=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Ip!==null?{id:sh,overflow:lh}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Rl(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,tl=t,el=null,!0):!1;default:return!1}}function XP(t){return(t.mode&1)!==0&&(t.flags&128)===0}function YP(t){if(ro){var e=el;if(e){var r=e;if(!LN(t,e)){if(XP(t))throw Error(rr(418));e=Uf(r.nextSibling);var o=tl;e&&LN(t,e)?F2(o,r):(t.flags=t.flags&-4097|2,ro=!1,tl=t)}}else{if(XP(t))throw Error(rr(418));t.flags=t.flags&-4097|2,ro=!1,tl=t}}}function RN(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;tl=t}function Ax(t){if(t!==tl)return!1;if(!ro)return RN(t),ro=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!WP(t.type,t.memoizedProps)),e&&(e=el)){if(XP(t))throw j2(),Error(rr(418));for(;e;)F2(t,e),e=Uf(e.nextSibling)}if(RN(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(rr(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){el=Uf(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}el=null}}else el=tl?Uf(t.stateNode.nextSibling):null;return!0}function j2(){for(var t=el;t;)t=Uf(t.nextSibling)}function Ng(){el=tl=null,ro=!1}function zO(t){Cu===null?Cu=[t]:Cu.push(t)}var wee=Sh.ReactCurrentBatchConfig;function Qy(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(rr(309));var o=r.stateNode}if(!o)throw Error(rr(147,t));var u=o,f=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===f?e.ref:(e=function(p){var x=u.refs;p===null?delete x[f]:x[f]=p},e._stringRef=f,e)}if(typeof t!="string")throw Error(rr(284));if(!r._owner)throw Error(rr(290,t))}return t}function Ex(t,e){throw t=Object.prototype.toString.call(e),Error(rr(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function zN(t){var e=t._init;return e(t._payload)}function $2(t){function e(Z,H){if(t){var K=Z.deletions;K===null?(Z.deletions=[H],Z.flags|=16):K.push(H)}}function r(Z,H){if(!t)return null;for(;H!==null;)e(Z,H),H=H.sibling;return null}function o(Z,H){for(Z=new Map;H!==null;)H.key!==null?Z.set(H.key,H):Z.set(H.index,H),H=H.sibling;return Z}function u(Z,H){return Z=Wf(Z,H),Z.index=0,Z.sibling=null,Z}function f(Z,H,K){return Z.index=K,t?(K=Z.alternate,K!==null?(K=K.index,K<H?(Z.flags|=2,H):K):(Z.flags|=2,H)):(Z.flags|=1048576,H)}function p(Z){return t&&Z.alternate===null&&(Z.flags|=2),Z}function x(Z,H,K,ee){return H===null||H.tag!==6?(H=zA(K,Z.mode,ee),H.return=Z,H):(H=u(H,K),H.return=Z,H)}function s(Z,H,K,ee){var se=K.type;return se===fg?I(Z,H,K.props.children,ee,K.key):H!==null&&(H.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===wf&&zN(se)===H.type)?(ee=u(H,K.props),ee.ref=Qy(Z,H,K),ee.return=Z,ee):(ee=Ib(K.type,K.key,K.props,null,Z.mode,ee),ee.ref=Qy(Z,H,K),ee.return=Z,ee)}function w(Z,H,K,ee){return H===null||H.tag!==4||H.stateNode.containerInfo!==K.containerInfo||H.stateNode.implementation!==K.implementation?(H=NA(K,Z.mode,ee),H.return=Z,H):(H=u(H,K.children||[]),H.return=Z,H)}function I(Z,H,K,ee,se){return H===null||H.tag!==7?(H=Tp(K,Z.mode,ee,se),H.return=Z,H):(H=u(H,K),H.return=Z,H)}function P(Z,H,K){if(typeof H=="string"&&H!==""||typeof H=="number")return H=zA(""+H,Z.mode,K),H.return=Z,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case _x:return K=Ib(H.type,H.key,H.props,null,Z.mode,K),K.ref=Qy(Z,null,H),K.return=Z,K;case hg:return H=NA(H,Z.mode,K),H.return=Z,H;case wf:var ee=H._init;return P(Z,ee(H._payload),K)}if(A0(H)||qy(H))return H=Tp(H,Z.mode,K,null),H.return=Z,H;Ex(Z,H)}return null}function N(Z,H,K,ee){var se=H!==null?H.key:null;if(typeof K=="string"&&K!==""||typeof K=="number")return se!==null?null:x(Z,H,""+K,ee);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case _x:return K.key===se?s(Z,H,K,ee):null;case hg:return K.key===se?w(Z,H,K,ee):null;case wf:return se=K._init,N(Z,H,se(K._payload),ee)}if(A0(K)||qy(K))return se!==null?null:I(Z,H,K,ee,null);Ex(Z,K)}return null}function U(Z,H,K,ee,se){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return Z=Z.get(K)||null,x(H,Z,""+ee,se);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case _x:return Z=Z.get(ee.key===null?K:ee.key)||null,s(H,Z,ee,se);case hg:return Z=Z.get(ee.key===null?K:ee.key)||null,w(H,Z,ee,se);case wf:var me=ee._init;return U(Z,H,K,me(ee._payload),se)}if(A0(ee)||qy(ee))return Z=Z.get(K)||null,I(H,Z,ee,se,null);Ex(H,ee)}return null}function X(Z,H,K,ee){for(var se=null,me=null,Ce=H,Ae=H=0,De=null;Ce!==null&&Ae<K.length;Ae++){Ce.index>Ae?(De=Ce,Ce=null):De=Ce.sibling;var qe=N(Z,Ce,K[Ae],ee);if(qe===null){Ce===null&&(Ce=De);break}t&&Ce&&qe.alternate===null&&e(Z,Ce),H=f(qe,H,Ae),me===null?se=qe:me.sibling=qe,me=qe,Ce=De}if(Ae===K.length)return r(Z,Ce),ro&&hp(Z,Ae),se;if(Ce===null){for(;Ae<K.length;Ae++)Ce=P(Z,K[Ae],ee),Ce!==null&&(H=f(Ce,H,Ae),me===null?se=Ce:me.sibling=Ce,me=Ce);return ro&&hp(Z,Ae),se}for(Ce=o(Z,Ce);Ae<K.length;Ae++)De=U(Ce,Z,Ae,K[Ae],ee),De!==null&&(t&&De.alternate!==null&&Ce.delete(De.key===null?Ae:De.key),H=f(De,H,Ae),me===null?se=De:me.sibling=De,me=De);return t&&Ce.forEach(function(je){return e(Z,je)}),ro&&hp(Z,Ae),se}function Q(Z,H,K,ee){var se=qy(K);if(typeof se!="function")throw Error(rr(150));if(K=se.call(K),K==null)throw Error(rr(151));for(var me=se=null,Ce=H,Ae=H=0,De=null,qe=K.next();Ce!==null&&!qe.done;Ae++,qe=K.next()){Ce.index>Ae?(De=Ce,Ce=null):De=Ce.sibling;var je=N(Z,Ce,qe.value,ee);if(je===null){Ce===null&&(Ce=De);break}t&&Ce&&je.alternate===null&&e(Z,Ce),H=f(je,H,Ae),me===null?se=je:me.sibling=je,me=je,Ce=De}if(qe.done)return r(Z,Ce),ro&&hp(Z,Ae),se;if(Ce===null){for(;!qe.done;Ae++,qe=K.next())qe=P(Z,qe.value,ee),qe!==null&&(H=f(qe,H,Ae),me===null?se=qe:me.sibling=qe,me=qe);return ro&&hp(Z,Ae),se}for(Ce=o(Z,Ce);!qe.done;Ae++,qe=K.next())qe=U(Ce,Z,Ae,qe.value,ee),qe!==null&&(t&&qe.alternate!==null&&Ce.delete(qe.key===null?Ae:qe.key),H=f(qe,H,Ae),me===null?se=qe:me.sibling=qe,me=qe);return t&&Ce.forEach(function(Oe){return e(Z,Oe)}),ro&&hp(Z,Ae),se}function J(Z,H,K,ee){if(typeof K=="object"&&K!==null&&K.type===fg&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case _x:e:{for(var se=K.key,me=H;me!==null;){if(me.key===se){if(se=K.type,se===fg){if(me.tag===7){r(Z,me.sibling),H=u(me,K.props.children),H.return=Z,Z=H;break e}}else if(me.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===wf&&zN(se)===me.type){r(Z,me.sibling),H=u(me,K.props),H.ref=Qy(Z,me,K),H.return=Z,Z=H;break e}r(Z,me);break}else e(Z,me);me=me.sibling}K.type===fg?(H=Tp(K.props.children,Z.mode,ee,K.key),H.return=Z,Z=H):(ee=Ib(K.type,K.key,K.props,null,Z.mode,ee),ee.ref=Qy(Z,H,K),ee.return=Z,Z=ee)}return p(Z);case hg:e:{for(me=K.key;H!==null;){if(H.key===me)if(H.tag===4&&H.stateNode.containerInfo===K.containerInfo&&H.stateNode.implementation===K.implementation){r(Z,H.sibling),H=u(H,K.children||[]),H.return=Z,Z=H;break e}else{r(Z,H);break}else e(Z,H);H=H.sibling}H=NA(K,Z.mode,ee),H.return=Z,Z=H}return p(Z);case wf:return me=K._init,J(Z,H,me(K._payload),ee)}if(A0(K))return X(Z,H,K,ee);if(qy(K))return Q(Z,H,K,ee);Ex(Z,K)}return typeof K=="string"&&K!==""||typeof K=="number"?(K=""+K,H!==null&&H.tag===6?(r(Z,H.sibling),H=u(H,K),H.return=Z,Z=H):(r(Z,H),H=zA(K,Z.mode,ee),H.return=Z,Z=H),p(Z)):r(Z,H)}return J}var Fg=$2(!0),U2=$2(!1),Qb=td(null),eC=null,Bg=null,NO=null;function FO(){NO=Bg=eC=null}function jO(t){var e=Qb.current;Yi(Qb),t._currentValue=e}function JP(t,e,r){for(;t!==null;){var o=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,o!==null&&(o.childLanes|=e)):o!==null&&(o.childLanes&e)!==e&&(o.childLanes|=e),t===r)break;t=t.return}}function Pg(t,e){eC=t,NO=Bg=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Cs=!0),t.firstContext=null)}function jl(t){var e=t._currentValue;if(NO!==t)if(t={context:t,memoizedValue:e,next:null},Bg===null){if(eC===null)throw Error(rr(308));Bg=t,eC.dependencies={lanes:0,firstContext:t}}else Bg=Bg.next=t;return e}var _p=null;function $O(t){_p===null?_p=[t]:_p.push(t)}function V2(t,e,r,o){var u=e.interleaved;return u===null?(r.next=r,$O(e)):(r.next=u.next,u.next=r),e.interleaved=r,vh(t,o)}function vh(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Sf=!1;function UO(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function G2(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function fh(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Vf(t,e,r){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,ni&2){var u=o.pending;return u===null?e.next=e:(e.next=u.next,u.next=e),o.pending=e,vh(t,r)}return u=o.interleaved,u===null?(e.next=e,$O(o)):(e.next=u.next,u.next=e),o.interleaved=e,vh(t,r)}function Tb(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var o=e.lanes;o&=t.pendingLanes,r|=o,e.lanes=r,AO(t,r)}}function NN(t,e){var r=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,r===o)){var u=null,f=null;if(r=r.firstBaseUpdate,r!==null){do{var p={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};f===null?u=f=p:f=f.next=p,r=r.next}while(r!==null);f===null?u=f=e:f=f.next=e}else u=f=e;r={baseState:o.baseState,firstBaseUpdate:u,lastBaseUpdate:f,shared:o.shared,effects:o.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function tC(t,e,r,o){var u=t.updateQueue;Sf=!1;var f=u.firstBaseUpdate,p=u.lastBaseUpdate,x=u.shared.pending;if(x!==null){u.shared.pending=null;var s=x,w=s.next;s.next=null,p===null?f=w:p.next=w,p=s;var I=t.alternate;I!==null&&(I=I.updateQueue,x=I.lastBaseUpdate,x!==p&&(x===null?I.firstBaseUpdate=w:x.next=w,I.lastBaseUpdate=s))}if(f!==null){var P=u.baseState;p=0,I=w=s=null,x=f;do{var N=x.lane,U=x.eventTime;if((o&N)===N){I!==null&&(I=I.next={eventTime:U,lane:0,tag:x.tag,payload:x.payload,callback:x.callback,next:null});e:{var X=t,Q=x;switch(N=e,U=r,Q.tag){case 1:if(X=Q.payload,typeof X=="function"){P=X.call(U,P,N);break e}P=X;break e;case 3:X.flags=X.flags&-65537|128;case 0:if(X=Q.payload,N=typeof X=="function"?X.call(U,P,N):X,N==null)break e;P=uo({},P,N);break e;case 2:Sf=!0}}x.callback!==null&&x.lane!==0&&(t.flags|=64,N=u.effects,N===null?u.effects=[x]:N.push(x))}else U={eventTime:U,lane:N,tag:x.tag,payload:x.payload,callback:x.callback,next:null},I===null?(w=I=U,s=P):I=I.next=U,p|=N;if(x=x.next,x===null){if(x=u.shared.pending,x===null)break;N=x,x=N.next,N.next=null,u.lastBaseUpdate=N,u.shared.pending=null}}while(!0);if(I===null&&(s=P),u.baseState=s,u.firstBaseUpdate=w,u.lastBaseUpdate=I,e=u.shared.interleaved,e!==null){u=e;do p|=u.lane,u=u.next;while(u!==e)}else f===null&&(u.shared.lanes=0);kp|=p,t.lanes=p,t.memoizedState=P}}function FN(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var o=t[e],u=o.callback;if(u!==null){if(o.callback=null,o=r,typeof u!="function")throw Error(rr(191,u));u.call(o)}}}var vB={},yc=td(vB),dv=td(vB),pv=td(vB);function yp(t){if(t===vB)throw Error(rr(174));return t}function VO(t,e){switch(Ui(pv,e),Ui(dv,t),Ui(yc,vB),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:IP(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=IP(e,t)}Yi(yc),Ui(yc,e)}function jg(){Yi(yc),Yi(dv),Yi(pv)}function H2(t){yp(pv.current);var e=yp(yc.current),r=IP(e,t.type);e!==r&&(Ui(dv,t),Ui(yc,r))}function GO(t){dv.current===t&&(Yi(yc),Yi(dv))}var so=td(0);function rC(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var MA=[];function HO(){for(var t=0;t<MA.length;t++)MA[t]._workInProgressVersionPrimary=null;MA.length=0}var Ab=Sh.ReactCurrentDispatcher,IA=Sh.ReactCurrentBatchConfig,Op=0,lo=null,Ho=null,aa=null,nC=!1,U0=!1,mv=0,See=0;function Na(){throw Error(rr(321))}function WO(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Pu(t[r],e[r]))return!1;return!0}function ZO(t,e,r,o,u,f){if(Op=f,lo=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ab.current=t===null||t.memoizedState===null?Dee:Pee,t=r(o,u),U0){f=0;do{if(U0=!1,mv=0,25<=f)throw Error(rr(301));f+=1,aa=Ho=null,e.updateQueue=null,Ab.current=Mee,t=r(o,u)}while(U0)}if(Ab.current=iC,e=Ho!==null&&Ho.next!==null,Op=0,aa=Ho=lo=null,nC=!1,e)throw Error(rr(300));return t}function qO(){var t=mv!==0;return mv=0,t}function fc(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return aa===null?lo.memoizedState=aa=t:aa=aa.next=t,aa}function $l(){if(Ho===null){var t=lo.alternate;t=t!==null?t.memoizedState:null}else t=Ho.next;var e=aa===null?lo.memoizedState:aa.next;if(e!==null)aa=e,Ho=t;else{if(t===null)throw Error(rr(310));Ho=t,t={memoizedState:Ho.memoizedState,baseState:Ho.baseState,baseQueue:Ho.baseQueue,queue:Ho.queue,next:null},aa===null?lo.memoizedState=aa=t:aa=aa.next=t}return aa}function gv(t,e){return typeof e=="function"?e(t):e}function OA(t){var e=$l(),r=e.queue;if(r===null)throw Error(rr(311));r.lastRenderedReducer=t;var o=Ho,u=o.baseQueue,f=r.pending;if(f!==null){if(u!==null){var p=u.next;u.next=f.next,f.next=p}o.baseQueue=u=f,r.pending=null}if(u!==null){f=u.next,o=o.baseState;var x=p=null,s=null,w=f;do{var I=w.lane;if((Op&I)===I)s!==null&&(s=s.next={lane:0,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null}),o=w.hasEagerState?w.eagerState:t(o,w.action);else{var P={lane:I,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null};s===null?(x=s=P,p=o):s=s.next=P,lo.lanes|=I,kp|=I}w=w.next}while(w!==null&&w!==f);s===null?p=o:s.next=x,Pu(o,e.memoizedState)||(Cs=!0),e.memoizedState=o,e.baseState=p,e.baseQueue=s,r.lastRenderedState=o}if(t=r.interleaved,t!==null){u=t;do f=u.lane,lo.lanes|=f,kp|=f,u=u.next;while(u!==t)}else u===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function kA(t){var e=$l(),r=e.queue;if(r===null)throw Error(rr(311));r.lastRenderedReducer=t;var o=r.dispatch,u=r.pending,f=e.memoizedState;if(u!==null){r.pending=null;var p=u=u.next;do f=t(f,p.action),p=p.next;while(p!==u);Pu(f,e.memoizedState)||(Cs=!0),e.memoizedState=f,e.baseQueue===null&&(e.baseState=f),r.lastRenderedState=f}return[f,o]}function W2(){}function Z2(t,e){var r=lo,o=$l(),u=e(),f=!Pu(o.memoizedState,u);if(f&&(o.memoizedState=u,Cs=!0),o=o.queue,KO(X2.bind(null,r,o,t),[t]),o.getSnapshot!==e||f||aa!==null&&aa.memoizedState.tag&1){if(r.flags|=2048,_v(9,K2.bind(null,r,o,u,e),void 0,null),la===null)throw Error(rr(349));Op&30||q2(r,e,u)}return u}function q2(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=lo.updateQueue,e===null?(e={lastEffect:null,stores:null},lo.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function K2(t,e,r,o){e.value=r,e.getSnapshot=o,Y2(e)&&J2(t)}function X2(t,e,r){return r(function(){Y2(e)&&J2(t)})}function Y2(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Pu(t,r)}catch{return!0}}function J2(t){var e=vh(t,1);e!==null&&Eu(e,t,1,-1)}function jN(t){var e=fc();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gv,lastRenderedState:t},e.queue=t,t=t.dispatch=Eee.bind(null,lo,t),[e.memoizedState,t]}function _v(t,e,r,o){return t={tag:t,create:e,destroy:r,deps:o,next:null},e=lo.updateQueue,e===null?(e={lastEffect:null,stores:null},lo.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(o=r.next,r.next=t,t.next=o,e.lastEffect=t)),t}function Q2(){return $l().memoizedState}function Eb(t,e,r,o){var u=fc();lo.flags|=t,u.memoizedState=_v(1|e,r,void 0,o===void 0?null:o)}function Sw(t,e,r,o){var u=$l();o=o===void 0?null:o;var f=void 0;if(Ho!==null){var p=Ho.memoizedState;if(f=p.destroy,o!==null&&WO(o,p.deps)){u.memoizedState=_v(e,r,f,o);return}}lo.flags|=t,u.memoizedState=_v(1|e,r,f,o)}function $N(t,e){return Eb(8390656,8,t,e)}function KO(t,e){return Sw(2048,8,t,e)}function e7(t,e){return Sw(4,2,t,e)}function t7(t,e){return Sw(4,4,t,e)}function r7(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function n7(t,e,r){return r=r!=null?r.concat([t]):null,Sw(4,4,r7.bind(null,e,t),r)}function XO(){}function i7(t,e){var r=$l();e=e===void 0?null:e;var o=r.memoizedState;return o!==null&&e!==null&&WO(e,o[1])?o[0]:(r.memoizedState=[t,e],t)}function o7(t,e){var r=$l();e=e===void 0?null:e;var o=r.memoizedState;return o!==null&&e!==null&&WO(e,o[1])?o[0]:(t=t(),r.memoizedState=[t,e],t)}function a7(t,e,r){return Op&21?(Pu(r,e)||(r=h2(),lo.lanes|=r,kp|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Cs=!0),t.memoizedState=r)}function Tee(t,e){var r=bi;bi=r!==0&&4>r?r:4,t(!0);var o=IA.transition;IA.transition={};try{t(!1),e()}finally{bi=r,IA.transition=o}}function s7(){return $l().memoizedState}function Aee(t,e,r){var o=Hf(t);if(r={lane:o,action:r,hasEagerState:!1,eagerState:null,next:null},l7(t))u7(e,r);else if(r=V2(t,e,r,o),r!==null){var u=os();Eu(r,t,o,u),c7(r,e,o)}}function Eee(t,e,r){var o=Hf(t),u={lane:o,action:r,hasEagerState:!1,eagerState:null,next:null};if(l7(t))u7(e,u);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=e.lastRenderedReducer,f!==null))try{var p=e.lastRenderedState,x=f(p,r);if(u.hasEagerState=!0,u.eagerState=x,Pu(x,p)){var s=e.interleaved;s===null?(u.next=u,$O(e)):(u.next=s.next,s.next=u),e.interleaved=u;return}}catch{}finally{}r=V2(t,e,u,o),r!==null&&(u=os(),Eu(r,t,o,u),c7(r,e,o))}}function l7(t){var e=t.alternate;return t===lo||e!==null&&e===lo}function u7(t,e){U0=nC=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function c7(t,e,r){if(r&4194240){var o=e.lanes;o&=t.pendingLanes,r|=o,e.lanes=r,AO(t,r)}}var iC={readContext:jl,useCallback:Na,useContext:Na,useEffect:Na,useImperativeHandle:Na,useInsertionEffect:Na,useLayoutEffect:Na,useMemo:Na,useReducer:Na,useRef:Na,useState:Na,useDebugValue:Na,useDeferredValue:Na,useTransition:Na,useMutableSource:Na,useSyncExternalStore:Na,useId:Na,unstable_isNewReconciler:!1},Dee={readContext:jl,useCallback:function(t,e){return fc().memoizedState=[t,e===void 0?null:e],t},useContext:jl,useEffect:$N,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Eb(4194308,4,r7.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Eb(4194308,4,t,e)},useInsertionEffect:function(t,e){return Eb(4,2,t,e)},useMemo:function(t,e){var r=fc();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var o=fc();return e=r!==void 0?r(e):e,o.memoizedState=o.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},o.queue=t,t=t.dispatch=Aee.bind(null,lo,t),[o.memoizedState,t]},useRef:function(t){var e=fc();return t={current:t},e.memoizedState=t},useState:jN,useDebugValue:XO,useDeferredValue:function(t){return fc().memoizedState=t},useTransition:function(){var t=jN(!1),e=t[0];return t=Tee.bind(null,t[1]),fc().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var o=lo,u=fc();if(ro){if(r===void 0)throw Error(rr(407));r=r()}else{if(r=e(),la===null)throw Error(rr(349));Op&30||q2(o,e,r)}u.memoizedState=r;var f={value:r,getSnapshot:e};return u.queue=f,$N(X2.bind(null,o,f,t),[t]),o.flags|=2048,_v(9,K2.bind(null,o,f,r,e),void 0,null),r},useId:function(){var t=fc(),e=la.identifierPrefix;if(ro){var r=lh,o=sh;r=(o&~(1<<32-Au(o)-1)).toString(32)+r,e=":"+e+"R"+r,r=mv++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=See++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Pee={readContext:jl,useCallback:i7,useContext:jl,useEffect:KO,useImperativeHandle:n7,useInsertionEffect:e7,useLayoutEffect:t7,useMemo:o7,useReducer:OA,useRef:Q2,useState:function(){return OA(gv)},useDebugValue:XO,useDeferredValue:function(t){var e=$l();return a7(e,Ho.memoizedState,t)},useTransition:function(){var t=OA(gv)[0],e=$l().memoizedState;return[t,e]},useMutableSource:W2,useSyncExternalStore:Z2,useId:s7,unstable_isNewReconciler:!1},Mee={readContext:jl,useCallback:i7,useContext:jl,useEffect:KO,useImperativeHandle:n7,useInsertionEffect:e7,useLayoutEffect:t7,useMemo:o7,useReducer:kA,useRef:Q2,useState:function(){return kA(gv)},useDebugValue:XO,useDeferredValue:function(t){var e=$l();return Ho===null?e.memoizedState=t:a7(e,Ho.memoizedState,t)},useTransition:function(){var t=kA(gv)[0],e=$l().memoizedState;return[t,e]},useMutableSource:W2,useSyncExternalStore:Z2,useId:s7,unstable_isNewReconciler:!1};function vu(t,e){if(t&&t.defaultProps){e=uo({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function QP(t,e,r,o){e=t.memoizedState,r=r(o,e),r=r==null?e:uo({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Tw={isMounted:function(t){return(t=t._reactInternals)?Hp(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var o=os(),u=Hf(t),f=fh(o,u);f.payload=e,r!=null&&(f.callback=r),e=Vf(t,f,u),e!==null&&(Eu(e,t,u,o),Tb(e,t,u))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var o=os(),u=Hf(t),f=fh(o,u);f.tag=1,f.payload=e,r!=null&&(f.callback=r),e=Vf(t,f,u),e!==null&&(Eu(e,t,u,o),Tb(e,t,u))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=os(),o=Hf(t),u=fh(r,o);u.tag=2,e!=null&&(u.callback=e),e=Vf(t,u,o),e!==null&&(Eu(e,t,o,r),Tb(e,t,o))}};function UN(t,e,r,o,u,f,p){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,f,p):e.prototype&&e.prototype.isPureReactComponent?!uv(r,o)||!uv(u,f):!0}function h7(t,e,r){var o=!1,u=Jf,f=e.contextType;return typeof f=="object"&&f!==null?f=jl(f):(u=Ts(e)?Mp:Ha.current,o=e.contextTypes,f=(o=o!=null)?zg(t,u):Jf),e=new e(r,f),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Tw,t.stateNode=e,e._reactInternals=t,o&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=u,t.__reactInternalMemoizedMaskedChildContext=f),e}function VN(t,e,r,o){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,o),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,o),e.state!==t&&Tw.enqueueReplaceState(e,e.state,null)}function eM(t,e,r,o){var u=t.stateNode;u.props=r,u.state=t.memoizedState,u.refs={},UO(t);var f=e.contextType;typeof f=="object"&&f!==null?u.context=jl(f):(f=Ts(e)?Mp:Ha.current,u.context=zg(t,f)),u.state=t.memoizedState,f=e.getDerivedStateFromProps,typeof f=="function"&&(QP(t,e,f,r),u.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(e=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),e!==u.state&&Tw.enqueueReplaceState(u,u.state,null),tC(t,r,u,o),u.state=t.memoizedState),typeof u.componentDidMount=="function"&&(t.flags|=4194308)}function $g(t,e){try{var r="",o=e;do r+=oQ(o),o=o.return;while(o);var u=r}catch(f){u=`
Error generating stack: `+f.message+`
`+f.stack}return{value:t,source:e,stack:u,digest:null}}function LA(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function tM(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Iee=typeof WeakMap=="function"?WeakMap:Map;function f7(t,e,r){r=fh(-1,r),r.tag=3,r.payload={element:null};var o=e.value;return r.callback=function(){aC||(aC=!0,hM=o),tM(t,e)},r}function d7(t,e,r){r=fh(-1,r),r.tag=3;var o=t.type.getDerivedStateFromError;if(typeof o=="function"){var u=e.value;r.payload=function(){return o(u)},r.callback=function(){tM(t,e)}}var f=t.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(r.callback=function(){tM(t,e),typeof o!="function"&&(Gf===null?Gf=new Set([this]):Gf.add(this));var p=e.stack;this.componentDidCatch(e.value,{componentStack:p!==null?p:""})}),r}function GN(t,e,r){var o=t.pingCache;if(o===null){o=t.pingCache=new Iee;var u=new Set;o.set(e,u)}else u=o.get(e),u===void 0&&(u=new Set,o.set(e,u));u.has(r)||(u.add(r),t=Wee.bind(null,t,e,r),e.then(t,t))}function HN(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function WN(t,e,r,o,u){return t.mode&1?(t.flags|=65536,t.lanes=u,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=fh(-1,1),e.tag=2,Vf(r,e,1))),r.lanes|=1),t)}var Oee=Sh.ReactCurrentOwner,Cs=!1;function ns(t,e,r,o){e.child=t===null?U2(e,null,r,o):Fg(e,t.child,r,o)}function ZN(t,e,r,o,u){r=r.render;var f=e.ref;return Pg(e,u),o=ZO(t,e,r,o,f,u),r=qO(),t!==null&&!Cs?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~u,Bh(t,e,u)):(ro&&r&&LO(e),e.flags|=1,ns(t,e,o,u),e.child)}function qN(t,e,r,o,u){if(t===null){var f=r.type;return typeof f=="function"&&!i3(f)&&f.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=f,p7(t,e,f,o,u)):(t=Ib(r.type,null,o,e,e.mode,u),t.ref=e.ref,t.return=e,e.child=t)}if(f=t.child,!(t.lanes&u)){var p=f.memoizedProps;if(r=r.compare,r=r!==null?r:uv,r(p,o)&&t.ref===e.ref)return Bh(t,e,u)}return e.flags|=1,t=Wf(f,o),t.ref=e.ref,t.return=e,e.child=t}function p7(t,e,r,o,u){if(t!==null){var f=t.memoizedProps;if(uv(f,o)&&t.ref===e.ref)if(Cs=!1,e.pendingProps=o=f,(t.lanes&u)!==0)t.flags&131072&&(Cs=!0);else return e.lanes=t.lanes,Bh(t,e,u)}return rM(t,e,r,o,u)}function m7(t,e,r){var o=e.pendingProps,u=o.children,f=t!==null?t.memoizedState:null;if(o.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ui(bg,Xs),Xs|=r;else{if(!(r&1073741824))return t=f!==null?f.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ui(bg,Xs),Xs|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=f!==null?f.baseLanes:r,Ui(bg,Xs),Xs|=o}else f!==null?(o=f.baseLanes|r,e.memoizedState=null):o=r,Ui(bg,Xs),Xs|=o;return ns(t,e,u,r),e.child}function g7(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function rM(t,e,r,o,u){var f=Ts(r)?Mp:Ha.current;return f=zg(e,f),Pg(e,u),r=ZO(t,e,r,o,f,u),o=qO(),t!==null&&!Cs?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~u,Bh(t,e,u)):(ro&&o&&LO(e),e.flags|=1,ns(t,e,r,u),e.child)}function KN(t,e,r,o,u){if(Ts(r)){var f=!0;Xb(e)}else f=!1;if(Pg(e,u),e.stateNode===null)Db(t,e),h7(e,r,o),eM(e,r,o,u),o=!0;else if(t===null){var p=e.stateNode,x=e.memoizedProps;p.props=x;var s=p.context,w=r.contextType;typeof w=="object"&&w!==null?w=jl(w):(w=Ts(r)?Mp:Ha.current,w=zg(e,w));var I=r.getDerivedStateFromProps,P=typeof I=="function"||typeof p.getSnapshotBeforeUpdate=="function";P||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(x!==o||s!==w)&&VN(e,p,o,w),Sf=!1;var N=e.memoizedState;p.state=N,tC(e,o,p,u),s=e.memoizedState,x!==o||N!==s||Ss.current||Sf?(typeof I=="function"&&(QP(e,r,I,o),s=e.memoizedState),(x=Sf||UN(e,r,x,o,N,s,w))?(P||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(e.flags|=4194308)):(typeof p.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=o,e.memoizedState=s),p.props=o,p.state=s,p.context=w,o=x):(typeof p.componentDidMount=="function"&&(e.flags|=4194308),o=!1)}else{p=e.stateNode,G2(t,e),x=e.memoizedProps,w=e.type===e.elementType?x:vu(e.type,x),p.props=w,P=e.pendingProps,N=p.context,s=r.contextType,typeof s=="object"&&s!==null?s=jl(s):(s=Ts(r)?Mp:Ha.current,s=zg(e,s));var U=r.getDerivedStateFromProps;(I=typeof U=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(x!==P||N!==s)&&VN(e,p,o,s),Sf=!1,N=e.memoizedState,p.state=N,tC(e,o,p,u);var X=e.memoizedState;x!==P||N!==X||Ss.current||Sf?(typeof U=="function"&&(QP(e,r,U,o),X=e.memoizedState),(w=Sf||UN(e,r,w,o,N,X,s)||!1)?(I||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(o,X,s),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(o,X,s)),typeof p.componentDidUpdate=="function"&&(e.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof p.componentDidUpdate!="function"||x===t.memoizedProps&&N===t.memoizedState||(e.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&N===t.memoizedState||(e.flags|=1024),e.memoizedProps=o,e.memoizedState=X),p.props=o,p.state=X,p.context=s,o=w):(typeof p.componentDidUpdate!="function"||x===t.memoizedProps&&N===t.memoizedState||(e.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&N===t.memoizedState||(e.flags|=1024),o=!1)}return nM(t,e,r,o,f,u)}function nM(t,e,r,o,u,f){g7(t,e);var p=(e.flags&128)!==0;if(!o&&!p)return u&&kN(e,r,!1),Bh(t,e,f);o=e.stateNode,Oee.current=e;var x=p&&typeof r.getDerivedStateFromError!="function"?null:o.render();return e.flags|=1,t!==null&&p?(e.child=Fg(e,t.child,null,f),e.child=Fg(e,null,x,f)):ns(t,e,x,f),e.memoizedState=o.state,u&&kN(e,r,!0),e.child}function _7(t){var e=t.stateNode;e.pendingContext?ON(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ON(t,e.context,!1),VO(t,e.containerInfo)}function XN(t,e,r,o,u){return Ng(),zO(u),e.flags|=256,ns(t,e,r,o),e.child}var iM={dehydrated:null,treeContext:null,retryLane:0};function oM(t){return{baseLanes:t,cachePool:null,transitions:null}}function y7(t,e,r){var o=e.pendingProps,u=so.current,f=!1,p=(e.flags&128)!==0,x;if((x=p)||(x=t!==null&&t.memoizedState===null?!1:(u&2)!==0),x?(f=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(u|=1),Ui(so,u&1),t===null)return YP(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(p=o.children,t=o.fallback,f?(o=e.mode,f=e.child,p={mode:"hidden",children:p},!(o&1)&&f!==null?(f.childLanes=0,f.pendingProps=p):f=Dw(p,o,0,null),t=Tp(t,o,r,null),f.return=e,t.return=e,f.sibling=t,e.child=f,e.child.memoizedState=oM(r),e.memoizedState=iM,t):YO(e,p));if(u=t.memoizedState,u!==null&&(x=u.dehydrated,x!==null))return kee(t,e,p,o,x,u,r);if(f){f=o.fallback,p=e.mode,u=t.child,x=u.sibling;var s={mode:"hidden",children:o.children};return!(p&1)&&e.child!==u?(o=e.child,o.childLanes=0,o.pendingProps=s,e.deletions=null):(o=Wf(u,s),o.subtreeFlags=u.subtreeFlags&14680064),x!==null?f=Wf(x,f):(f=Tp(f,p,r,null),f.flags|=2),f.return=e,o.return=e,o.sibling=f,e.child=o,o=f,f=e.child,p=t.child.memoizedState,p=p===null?oM(r):{baseLanes:p.baseLanes|r,cachePool:null,transitions:p.transitions},f.memoizedState=p,f.childLanes=t.childLanes&~r,e.memoizedState=iM,o}return f=t.child,t=f.sibling,o=Wf(f,{mode:"visible",children:o.children}),!(e.mode&1)&&(o.lanes=r),o.return=e,o.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=o,e.memoizedState=null,o}function YO(t,e){return e=Dw({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Dx(t,e,r,o){return o!==null&&zO(o),Fg(e,t.child,null,r),t=YO(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function kee(t,e,r,o,u,f,p){if(r)return e.flags&256?(e.flags&=-257,o=LA(Error(rr(422))),Dx(t,e,p,o)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(f=o.fallback,u=e.mode,o=Dw({mode:"visible",children:o.children},u,0,null),f=Tp(f,u,p,null),f.flags|=2,o.return=e,f.return=e,o.sibling=f,e.child=o,e.mode&1&&Fg(e,t.child,null,p),e.child.memoizedState=oM(p),e.memoizedState=iM,f);if(!(e.mode&1))return Dx(t,e,p,null);if(u.data==="$!"){if(o=u.nextSibling&&u.nextSibling.dataset,o)var x=o.dgst;return o=x,f=Error(rr(419)),o=LA(f,o,void 0),Dx(t,e,p,o)}if(x=(p&t.childLanes)!==0,Cs||x){if(o=la,o!==null){switch(p&-p){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}u=u&(o.suspendedLanes|p)?0:u,u!==0&&u!==f.retryLane&&(f.retryLane=u,vh(t,u),Eu(o,t,u,-1))}return n3(),o=LA(Error(rr(421))),Dx(t,e,p,o)}return u.data==="$?"?(e.flags|=128,e.child=t.child,e=Zee.bind(null,t),u._reactRetry=e,null):(t=f.treeContext,el=Uf(u.nextSibling),tl=e,ro=!0,Cu=null,t!==null&&(Ol[kl++]=sh,Ol[kl++]=lh,Ol[kl++]=Ip,sh=t.id,lh=t.overflow,Ip=e),e=YO(e,o.children),e.flags|=4096,e)}function YN(t,e,r){t.lanes|=e;var o=t.alternate;o!==null&&(o.lanes|=e),JP(t.return,e,r)}function RA(t,e,r,o,u){var f=t.memoizedState;f===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:o,tail:r,tailMode:u}:(f.isBackwards=e,f.rendering=null,f.renderingStartTime=0,f.last=o,f.tail=r,f.tailMode=u)}function v7(t,e,r){var o=e.pendingProps,u=o.revealOrder,f=o.tail;if(ns(t,e,o.children,r),o=so.current,o&2)o=o&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&YN(t,r,e);else if(t.tag===19)YN(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}o&=1}if(Ui(so,o),!(e.mode&1))e.memoizedState=null;else switch(u){case"forwards":for(r=e.child,u=null;r!==null;)t=r.alternate,t!==null&&rC(t)===null&&(u=r),r=r.sibling;r=u,r===null?(u=e.child,e.child=null):(u=r.sibling,r.sibling=null),RA(e,!1,u,r,f);break;case"backwards":for(r=null,u=e.child,e.child=null;u!==null;){if(t=u.alternate,t!==null&&rC(t)===null){e.child=u;break}t=u.sibling,u.sibling=r,r=u,u=t}RA(e,!0,r,null,f);break;case"together":RA(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Db(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Bh(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),kp|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(rr(153));if(e.child!==null){for(t=e.child,r=Wf(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Wf(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Lee(t,e,r){switch(e.tag){case 3:_7(e),Ng();break;case 5:H2(e);break;case 1:Ts(e.type)&&Xb(e);break;case 4:VO(e,e.stateNode.containerInfo);break;case 10:var o=e.type._context,u=e.memoizedProps.value;Ui(Qb,o._currentValue),o._currentValue=u;break;case 13:if(o=e.memoizedState,o!==null)return o.dehydrated!==null?(Ui(so,so.current&1),e.flags|=128,null):r&e.child.childLanes?y7(t,e,r):(Ui(so,so.current&1),t=Bh(t,e,r),t!==null?t.sibling:null);Ui(so,so.current&1);break;case 19:if(o=(r&e.childLanes)!==0,t.flags&128){if(o)return v7(t,e,r);e.flags|=128}if(u=e.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),Ui(so,so.current),o)break;return null;case 22:case 23:return e.lanes=0,m7(t,e,r)}return Bh(t,e,r)}var B7,aM,x7,b7;B7=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};aM=function(){};x7=function(t,e,r,o){var u=t.memoizedProps;if(u!==o){t=e.stateNode,yp(yc.current);var f=null;switch(r){case"input":u=EP(t,u),o=EP(t,o),f=[];break;case"select":u=uo({},u,{value:void 0}),o=uo({},o,{value:void 0}),f=[];break;case"textarea":u=MP(t,u),o=MP(t,o),f=[];break;default:typeof u.onClick!="function"&&typeof o.onClick=="function"&&(t.onclick=qb)}OP(r,o);var p;r=null;for(w in u)if(!o.hasOwnProperty(w)&&u.hasOwnProperty(w)&&u[w]!=null)if(w==="style"){var x=u[w];for(p in x)x.hasOwnProperty(p)&&(r||(r={}),r[p]="")}else w!=="dangerouslySetInnerHTML"&&w!=="children"&&w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(rv.hasOwnProperty(w)?f||(f=[]):(f=f||[]).push(w,null));for(w in o){var s=o[w];if(x=u!=null?u[w]:void 0,o.hasOwnProperty(w)&&s!==x&&(s!=null||x!=null))if(w==="style")if(x){for(p in x)!x.hasOwnProperty(p)||s&&s.hasOwnProperty(p)||(r||(r={}),r[p]="");for(p in s)s.hasOwnProperty(p)&&x[p]!==s[p]&&(r||(r={}),r[p]=s[p])}else r||(f||(f=[]),f.push(w,r)),r=s;else w==="dangerouslySetInnerHTML"?(s=s?s.__html:void 0,x=x?x.__html:void 0,s!=null&&x!==s&&(f=f||[]).push(w,s)):w==="children"?typeof s!="string"&&typeof s!="number"||(f=f||[]).push(w,""+s):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&(rv.hasOwnProperty(w)?(s!=null&&w==="onScroll"&&qi("scroll",t),f||x===s||(f=[])):(f=f||[]).push(w,s))}r&&(f=f||[]).push("style",r);var w=f;(e.updateQueue=w)&&(e.flags|=4)}};b7=function(t,e,r,o){r!==o&&(e.flags|=4)};function e0(t,e){if(!ro)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function Fa(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,o=0;if(e)for(var u=t.child;u!==null;)r|=u.lanes|u.childLanes,o|=u.subtreeFlags&14680064,o|=u.flags&14680064,u.return=t,u=u.sibling;else for(u=t.child;u!==null;)r|=u.lanes|u.childLanes,o|=u.subtreeFlags,o|=u.flags,u.return=t,u=u.sibling;return t.subtreeFlags|=o,t.childLanes=r,e}function Ree(t,e,r){var o=e.pendingProps;switch(RO(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fa(e),null;case 1:return Ts(e.type)&&Kb(),Fa(e),null;case 3:return o=e.stateNode,jg(),Yi(Ss),Yi(Ha),HO(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(t===null||t.child===null)&&(Ax(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Cu!==null&&(pM(Cu),Cu=null))),aM(t,e),Fa(e),null;case 5:GO(e);var u=yp(pv.current);if(r=e.type,t!==null&&e.stateNode!=null)x7(t,e,r,o,u),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!o){if(e.stateNode===null)throw Error(rr(166));return Fa(e),null}if(t=yp(yc.current),Ax(e)){o=e.stateNode,r=e.type;var f=e.memoizedProps;switch(o[pc]=e,o[fv]=f,t=(e.mode&1)!==0,r){case"dialog":qi("cancel",o),qi("close",o);break;case"iframe":case"object":case"embed":qi("load",o);break;case"video":case"audio":for(u=0;u<D0.length;u++)qi(D0[u],o);break;case"source":qi("error",o);break;case"img":case"image":case"link":qi("error",o),qi("load",o);break;case"details":qi("toggle",o);break;case"input":aN(o,f),qi("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!f.multiple},qi("invalid",o);break;case"textarea":lN(o,f),qi("invalid",o)}OP(r,f),u=null;for(var p in f)if(f.hasOwnProperty(p)){var x=f[p];p==="children"?typeof x=="string"?o.textContent!==x&&(f.suppressHydrationWarning!==!0&&Tx(o.textContent,x,t),u=["children",x]):typeof x=="number"&&o.textContent!==""+x&&(f.suppressHydrationWarning!==!0&&Tx(o.textContent,x,t),u=["children",""+x]):rv.hasOwnProperty(p)&&x!=null&&p==="onScroll"&&qi("scroll",o)}switch(r){case"input":yx(o),sN(o,f,!0);break;case"textarea":yx(o),uN(o);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(o.onclick=qb)}o=u,e.updateQueue=o,o!==null&&(e.flags|=4)}else{p=u.nodeType===9?u:u.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=XV(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=p.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof o.is=="string"?t=p.createElement(r,{is:o.is}):(t=p.createElement(r),r==="select"&&(p=t,o.multiple?p.multiple=!0:o.size&&(p.size=o.size))):t=p.createElementNS(t,r),t[pc]=e,t[fv]=o,B7(t,e,!1,!1),e.stateNode=t;e:{switch(p=kP(r,o),r){case"dialog":qi("cancel",t),qi("close",t),u=o;break;case"iframe":case"object":case"embed":qi("load",t),u=o;break;case"video":case"audio":for(u=0;u<D0.length;u++)qi(D0[u],t);u=o;break;case"source":qi("error",t),u=o;break;case"img":case"image":case"link":qi("error",t),qi("load",t),u=o;break;case"details":qi("toggle",t),u=o;break;case"input":aN(t,o),u=EP(t,o),qi("invalid",t);break;case"option":u=o;break;case"select":t._wrapperState={wasMultiple:!!o.multiple},u=uo({},o,{value:void 0}),qi("invalid",t);break;case"textarea":lN(t,o),u=MP(t,o),qi("invalid",t);break;default:u=o}OP(r,u),x=u;for(f in x)if(x.hasOwnProperty(f)){var s=x[f];f==="style"?QV(t,s):f==="dangerouslySetInnerHTML"?(s=s?s.__html:void 0,s!=null&&YV(t,s)):f==="children"?typeof s=="string"?(r!=="textarea"||s!=="")&&nv(t,s):typeof s=="number"&&nv(t,""+s):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(rv.hasOwnProperty(f)?s!=null&&f==="onScroll"&&qi("scroll",t):s!=null&&xO(t,f,s,p))}switch(r){case"input":yx(t),sN(t,o,!1);break;case"textarea":yx(t),uN(t);break;case"option":o.value!=null&&t.setAttribute("value",""+Yf(o.value));break;case"select":t.multiple=!!o.multiple,f=o.value,f!=null?Tg(t,!!o.multiple,f,!1):o.defaultValue!=null&&Tg(t,!!o.multiple,o.defaultValue,!0);break;default:typeof u.onClick=="function"&&(t.onclick=qb)}switch(r){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Fa(e),null;case 6:if(t&&e.stateNode!=null)b7(t,e,t.memoizedProps,o);else{if(typeof o!="string"&&e.stateNode===null)throw Error(rr(166));if(r=yp(pv.current),yp(yc.current),Ax(e)){if(o=e.stateNode,r=e.memoizedProps,o[pc]=e,(f=o.nodeValue!==r)&&(t=tl,t!==null))switch(t.tag){case 3:Tx(o.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Tx(o.nodeValue,r,(t.mode&1)!==0)}f&&(e.flags|=4)}else o=(r.nodeType===9?r:r.ownerDocument).createTextNode(o),o[pc]=e,e.stateNode=o}return Fa(e),null;case 13:if(Yi(so),o=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ro&&el!==null&&e.mode&1&&!(e.flags&128))j2(),Ng(),e.flags|=98560,f=!1;else if(f=Ax(e),o!==null&&o.dehydrated!==null){if(t===null){if(!f)throw Error(rr(318));if(f=e.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(rr(317));f[pc]=e}else Ng(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Fa(e),f=!1}else Cu!==null&&(pM(Cu),Cu=null),f=!0;if(!f)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(o=o!==null,o!==(t!==null&&t.memoizedState!==null)&&o&&(e.child.flags|=8192,e.mode&1&&(t===null||so.current&1?Wo===0&&(Wo=3):n3())),e.updateQueue!==null&&(e.flags|=4),Fa(e),null);case 4:return jg(),aM(t,e),t===null&&cv(e.stateNode.containerInfo),Fa(e),null;case 10:return jO(e.type._context),Fa(e),null;case 17:return Ts(e.type)&&Kb(),Fa(e),null;case 19:if(Yi(so),f=e.memoizedState,f===null)return Fa(e),null;if(o=(e.flags&128)!==0,p=f.rendering,p===null)if(o)e0(f,!1);else{if(Wo!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(p=rC(t),p!==null){for(e.flags|=128,e0(f,!1),o=p.updateQueue,o!==null&&(e.updateQueue=o,e.flags|=4),e.subtreeFlags=0,o=r,r=e.child;r!==null;)f=r,t=o,f.flags&=14680066,p=f.alternate,p===null?(f.childLanes=0,f.lanes=t,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=p.childLanes,f.lanes=p.lanes,f.child=p.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=p.memoizedProps,f.memoizedState=p.memoizedState,f.updateQueue=p.updateQueue,f.type=p.type,t=p.dependencies,f.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Ui(so,so.current&1|2),e.child}t=t.sibling}f.tail!==null&&To()>Ug&&(e.flags|=128,o=!0,e0(f,!1),e.lanes=4194304)}else{if(!o)if(t=rC(p),t!==null){if(e.flags|=128,o=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e0(f,!0),f.tail===null&&f.tailMode==="hidden"&&!p.alternate&&!ro)return Fa(e),null}else 2*To()-f.renderingStartTime>Ug&&r!==1073741824&&(e.flags|=128,o=!0,e0(f,!1),e.lanes=4194304);f.isBackwards?(p.sibling=e.child,e.child=p):(r=f.last,r!==null?r.sibling=p:e.child=p,f.last=p)}return f.tail!==null?(e=f.tail,f.rendering=e,f.tail=e.sibling,f.renderingStartTime=To(),e.sibling=null,r=so.current,Ui(so,o?r&1|2:r&1),e):(Fa(e),null);case 22:case 23:return r3(),o=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==o&&(e.flags|=8192),o&&e.mode&1?Xs&1073741824&&(Fa(e),e.subtreeFlags&6&&(e.flags|=8192)):Fa(e),null;case 24:return null;case 25:return null}throw Error(rr(156,e.tag))}function zee(t,e){switch(RO(e),e.tag){case 1:return Ts(e.type)&&Kb(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return jg(),Yi(Ss),Yi(Ha),HO(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return GO(e),null;case 13:if(Yi(so),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(rr(340));Ng()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Yi(so),null;case 4:return jg(),null;case 10:return jO(e.type._context),null;case 22:case 23:return r3(),null;case 24:return null;default:return null}}var Px=!1,$a=!1,Nee=typeof WeakSet=="function"?WeakSet:Set,wr=null;function xg(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(o){_o(t,e,o)}else r.current=null}function sM(t,e,r){try{r()}catch(o){_o(t,e,o)}}var JN=!1;function Fee(t,e){if(GP=Hb,t=A2(),kO(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var o=r.getSelection&&r.getSelection();if(o&&o.rangeCount!==0){r=o.anchorNode;var u=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{r.nodeType,f.nodeType}catch{r=null;break e}var p=0,x=-1,s=-1,w=0,I=0,P=t,N=null;t:for(;;){for(var U;P!==r||u!==0&&P.nodeType!==3||(x=p+u),P!==f||o!==0&&P.nodeType!==3||(s=p+o),P.nodeType===3&&(p+=P.nodeValue.length),(U=P.firstChild)!==null;)N=P,P=U;for(;;){if(P===t)break t;if(N===r&&++w===u&&(x=p),N===f&&++I===o&&(s=p),(U=P.nextSibling)!==null)break;P=N,N=P.parentNode}P=U}r=x===-1||s===-1?null:{start:x,end:s}}else r=null}r=r||{start:0,end:0}}else r=null;for(HP={focusedElem:t,selectionRange:r},Hb=!1,wr=e;wr!==null;)if(e=wr,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,wr=t;else for(;wr!==null;){e=wr;try{var X=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(X!==null){var Q=X.memoizedProps,J=X.memoizedState,Z=e.stateNode,H=Z.getSnapshotBeforeUpdate(e.elementType===e.type?Q:vu(e.type,Q),J);Z.__reactInternalSnapshotBeforeUpdate=H}break;case 3:var K=e.stateNode.containerInfo;K.nodeType===1?K.textContent="":K.nodeType===9&&K.documentElement&&K.removeChild(K.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(rr(163))}}catch(ee){_o(e,e.return,ee)}if(t=e.sibling,t!==null){t.return=e.return,wr=t;break}wr=e.return}return X=JN,JN=!1,X}function V0(t,e,r){var o=e.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&t)===t){var f=u.destroy;u.destroy=void 0,f!==void 0&&sM(e,r,f)}u=u.next}while(u!==o)}}function Aw(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var o=r.create;r.destroy=o()}r=r.next}while(r!==e)}}function lM(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function C7(t){var e=t.alternate;e!==null&&(t.alternate=null,C7(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[pc],delete e[fv],delete e[qP],delete e[xee],delete e[bee])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function w7(t){return t.tag===5||t.tag===3||t.tag===4}function QN(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||w7(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function uM(t,e,r){var o=t.tag;if(o===5||o===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=qb));else if(o!==4&&(t=t.child,t!==null))for(uM(t,e,r),t=t.sibling;t!==null;)uM(t,e,r),t=t.sibling}function cM(t,e,r){var o=t.tag;if(o===5||o===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(o!==4&&(t=t.child,t!==null))for(cM(t,e,r),t=t.sibling;t!==null;)cM(t,e,r),t=t.sibling}var xa=null,Bu=!1;function vf(t,e,r){for(r=r.child;r!==null;)S7(t,e,r),r=r.sibling}function S7(t,e,r){if(_c&&typeof _c.onCommitFiberUnmount=="function")try{_c.onCommitFiberUnmount(vw,r)}catch{}switch(r.tag){case 5:$a||xg(r,e);case 6:var o=xa,u=Bu;xa=null,vf(t,e,r),xa=o,Bu=u,xa!==null&&(Bu?(t=xa,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):xa.removeChild(r.stateNode));break;case 18:xa!==null&&(Bu?(t=xa,r=r.stateNode,t.nodeType===8?DA(t.parentNode,r):t.nodeType===1&&DA(t,r),sv(t)):DA(xa,r.stateNode));break;case 4:o=xa,u=Bu,xa=r.stateNode.containerInfo,Bu=!0,vf(t,e,r),xa=o,Bu=u;break;case 0:case 11:case 14:case 15:if(!$a&&(o=r.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){u=o=o.next;do{var f=u,p=f.destroy;f=f.tag,p!==void 0&&(f&2||f&4)&&sM(r,e,p),u=u.next}while(u!==o)}vf(t,e,r);break;case 1:if(!$a&&(xg(r,e),o=r.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=r.memoizedProps,o.state=r.memoizedState,o.componentWillUnmount()}catch(x){_o(r,e,x)}vf(t,e,r);break;case 21:vf(t,e,r);break;case 22:r.mode&1?($a=(o=$a)||r.memoizedState!==null,vf(t,e,r),$a=o):vf(t,e,r);break;default:vf(t,e,r)}}function e5(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new Nee),e.forEach(function(o){var u=qee.bind(null,t,o);r.has(o)||(r.add(o),o.then(u,u))})}}function mu(t,e){var r=e.deletions;if(r!==null)for(var o=0;o<r.length;o++){var u=r[o];try{var f=t,p=e,x=p;e:for(;x!==null;){switch(x.tag){case 5:xa=x.stateNode,Bu=!1;break e;case 3:xa=x.stateNode.containerInfo,Bu=!0;break e;case 4:xa=x.stateNode.containerInfo,Bu=!0;break e}x=x.return}if(xa===null)throw Error(rr(160));S7(f,p,u),xa=null,Bu=!1;var s=u.alternate;s!==null&&(s.return=null),u.return=null}catch(w){_o(u,e,w)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)T7(e,t),e=e.sibling}function T7(t,e){var r=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(mu(e,t),sc(t),o&4){try{V0(3,t,t.return),Aw(3,t)}catch(Q){_o(t,t.return,Q)}try{V0(5,t,t.return)}catch(Q){_o(t,t.return,Q)}}break;case 1:mu(e,t),sc(t),o&512&&r!==null&&xg(r,r.return);break;case 5:if(mu(e,t),sc(t),o&512&&r!==null&&xg(r,r.return),t.flags&32){var u=t.stateNode;try{nv(u,"")}catch(Q){_o(t,t.return,Q)}}if(o&4&&(u=t.stateNode,u!=null)){var f=t.memoizedProps,p=r!==null?r.memoizedProps:f,x=t.type,s=t.updateQueue;if(t.updateQueue=null,s!==null)try{x==="input"&&f.type==="radio"&&f.name!=null&&qV(u,f),kP(x,p);var w=kP(x,f);for(p=0;p<s.length;p+=2){var I=s[p],P=s[p+1];I==="style"?QV(u,P):I==="dangerouslySetInnerHTML"?YV(u,P):I==="children"?nv(u,P):xO(u,I,P,w)}switch(x){case"input":DP(u,f);break;case"textarea":KV(u,f);break;case"select":var N=u._wrapperState.wasMultiple;u._wrapperState.wasMultiple=!!f.multiple;var U=f.value;U!=null?Tg(u,!!f.multiple,U,!1):N!==!!f.multiple&&(f.defaultValue!=null?Tg(u,!!f.multiple,f.defaultValue,!0):Tg(u,!!f.multiple,f.multiple?[]:"",!1))}u[fv]=f}catch(Q){_o(t,t.return,Q)}}break;case 6:if(mu(e,t),sc(t),o&4){if(t.stateNode===null)throw Error(rr(162));u=t.stateNode,f=t.memoizedProps;try{u.nodeValue=f}catch(Q){_o(t,t.return,Q)}}break;case 3:if(mu(e,t),sc(t),o&4&&r!==null&&r.memoizedState.isDehydrated)try{sv(e.containerInfo)}catch(Q){_o(t,t.return,Q)}break;case 4:mu(e,t),sc(t);break;case 13:mu(e,t),sc(t),u=t.child,u.flags&8192&&(f=u.memoizedState!==null,u.stateNode.isHidden=f,!f||u.alternate!==null&&u.alternate.memoizedState!==null||(e3=To())),o&4&&e5(t);break;case 22:if(I=r!==null&&r.memoizedState!==null,t.mode&1?($a=(w=$a)||I,mu(e,t),$a=w):mu(e,t),sc(t),o&8192){if(w=t.memoizedState!==null,(t.stateNode.isHidden=w)&&!I&&t.mode&1)for(wr=t,I=t.child;I!==null;){for(P=wr=I;wr!==null;){switch(N=wr,U=N.child,N.tag){case 0:case 11:case 14:case 15:V0(4,N,N.return);break;case 1:xg(N,N.return);var X=N.stateNode;if(typeof X.componentWillUnmount=="function"){o=N,r=N.return;try{e=o,X.props=e.memoizedProps,X.state=e.memoizedState,X.componentWillUnmount()}catch(Q){_o(o,r,Q)}}break;case 5:xg(N,N.return);break;case 22:if(N.memoizedState!==null){r5(P);continue}}U!==null?(U.return=N,wr=U):r5(P)}I=I.sibling}e:for(I=null,P=t;;){if(P.tag===5){if(I===null){I=P;try{u=P.stateNode,w?(f=u.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(x=P.stateNode,s=P.memoizedProps.style,p=s!=null&&s.hasOwnProperty("display")?s.display:null,x.style.display=JV("display",p))}catch(Q){_o(t,t.return,Q)}}}else if(P.tag===6){if(I===null)try{P.stateNode.nodeValue=w?"":P.memoizedProps}catch(Q){_o(t,t.return,Q)}}else if((P.tag!==22&&P.tag!==23||P.memoizedState===null||P===t)&&P.child!==null){P.child.return=P,P=P.child;continue}if(P===t)break e;for(;P.sibling===null;){if(P.return===null||P.return===t)break e;I===P&&(I=null),P=P.return}I===P&&(I=null),P.sibling.return=P.return,P=P.sibling}}break;case 19:mu(e,t),sc(t),o&4&&e5(t);break;case 21:break;default:mu(e,t),sc(t)}}function sc(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(w7(r)){var o=r;break e}r=r.return}throw Error(rr(160))}switch(o.tag){case 5:var u=o.stateNode;o.flags&32&&(nv(u,""),o.flags&=-33);var f=QN(t);cM(t,f,u);break;case 3:case 4:var p=o.stateNode.containerInfo,x=QN(t);uM(t,x,p);break;default:throw Error(rr(161))}}catch(s){_o(t,t.return,s)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function jee(t,e,r){wr=t,A7(t)}function A7(t,e,r){for(var o=(t.mode&1)!==0;wr!==null;){var u=wr,f=u.child;if(u.tag===22&&o){var p=u.memoizedState!==null||Px;if(!p){var x=u.alternate,s=x!==null&&x.memoizedState!==null||$a;x=Px;var w=$a;if(Px=p,($a=s)&&!w)for(wr=u;wr!==null;)p=wr,s=p.child,p.tag===22&&p.memoizedState!==null?n5(u):s!==null?(s.return=p,wr=s):n5(u);for(;f!==null;)wr=f,A7(f),f=f.sibling;wr=u,Px=x,$a=w}t5(t)}else u.subtreeFlags&8772&&f!==null?(f.return=u,wr=f):t5(t)}}function t5(t){for(;wr!==null;){var e=wr;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:$a||Aw(5,e);break;case 1:var o=e.stateNode;if(e.flags&4&&!$a)if(r===null)o.componentDidMount();else{var u=e.elementType===e.type?r.memoizedProps:vu(e.type,r.memoizedProps);o.componentDidUpdate(u,r.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var f=e.updateQueue;f!==null&&FN(e,f,o);break;case 3:var p=e.updateQueue;if(p!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}FN(e,p,r)}break;case 5:var x=e.stateNode;if(r===null&&e.flags&4){r=x;var s=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":s.autoFocus&&r.focus();break;case"img":s.src&&(r.src=s.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var w=e.alternate;if(w!==null){var I=w.memoizedState;if(I!==null){var P=I.dehydrated;P!==null&&sv(P)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(rr(163))}$a||e.flags&512&&lM(e)}catch(N){_o(e,e.return,N)}}if(e===t){wr=null;break}if(r=e.sibling,r!==null){r.return=e.return,wr=r;break}wr=e.return}}function r5(t){for(;wr!==null;){var e=wr;if(e===t){wr=null;break}var r=e.sibling;if(r!==null){r.return=e.return,wr=r;break}wr=e.return}}function n5(t){for(;wr!==null;){var e=wr;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Aw(4,e)}catch(s){_o(e,r,s)}break;case 1:var o=e.stateNode;if(typeof o.componentDidMount=="function"){var u=e.return;try{o.componentDidMount()}catch(s){_o(e,u,s)}}var f=e.return;try{lM(e)}catch(s){_o(e,f,s)}break;case 5:var p=e.return;try{lM(e)}catch(s){_o(e,p,s)}}}catch(s){_o(e,e.return,s)}if(e===t){wr=null;break}var x=e.sibling;if(x!==null){x.return=e.return,wr=x;break}wr=e.return}}var $ee=Math.ceil,oC=Sh.ReactCurrentDispatcher,JO=Sh.ReactCurrentOwner,Nl=Sh.ReactCurrentBatchConfig,ni=0,la=null,Lo=null,Ca=0,Xs=0,bg=td(0),Wo=0,yv=null,kp=0,Ew=0,QO=0,G0=null,bs=null,e3=0,Ug=1/0,ih=null,aC=!1,hM=null,Gf=null,Mx=!1,kf=null,sC=0,H0=0,fM=null,Pb=-1,Mb=0;function os(){return ni&6?To():Pb!==-1?Pb:Pb=To()}function Hf(t){return t.mode&1?ni&2&&Ca!==0?Ca&-Ca:wee.transition!==null?(Mb===0&&(Mb=h2()),Mb):(t=bi,t!==0||(t=window.event,t=t===void 0?16:y2(t.type)),t):1}function Eu(t,e,r,o){if(50<H0)throw H0=0,fM=null,Error(rr(185));gB(t,r,o),(!(ni&2)||t!==la)&&(t===la&&(!(ni&2)&&(Ew|=r),Wo===4&&Ef(t,Ca)),As(t,o),r===1&&ni===0&&!(e.mode&1)&&(Ug=To()+500,ww&&rd()))}function As(t,e){var r=t.callbackNode;wQ(t,e);var o=Gb(t,t===la?Ca:0);if(o===0)r!==null&&fN(r),t.callbackNode=null,t.callbackPriority=0;else if(e=o&-o,t.callbackPriority!==e){if(r!=null&&fN(r),e===1)t.tag===0?Cee(i5.bind(null,t)):z2(i5.bind(null,t)),vee(function(){!(ni&6)&&rd()}),r=null;else{switch(f2(o)){case 1:r=TO;break;case 4:r=u2;break;case 16:r=Vb;break;case 536870912:r=c2;break;default:r=Vb}r=L7(r,E7.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function E7(t,e){if(Pb=-1,Mb=0,ni&6)throw Error(rr(327));var r=t.callbackNode;if(Mg()&&t.callbackNode!==r)return null;var o=Gb(t,t===la?Ca:0);if(o===0)return null;if(o&30||o&t.expiredLanes||e)e=lC(t,o);else{e=o;var u=ni;ni|=2;var f=P7();(la!==t||Ca!==e)&&(ih=null,Ug=To()+500,Sp(t,e));do try{Gee();break}catch(x){D7(t,x)}while(!0);FO(),oC.current=f,ni=u,Lo!==null?e=0:(la=null,Ca=0,e=Wo)}if(e!==0){if(e===2&&(u=FP(t),u!==0&&(o=u,e=dM(t,u))),e===1)throw r=yv,Sp(t,0),Ef(t,o),As(t,To()),r;if(e===6)Ef(t,o);else{if(u=t.current.alternate,!(o&30)&&!Uee(u)&&(e=lC(t,o),e===2&&(f=FP(t),f!==0&&(o=f,e=dM(t,f))),e===1))throw r=yv,Sp(t,0),Ef(t,o),As(t,To()),r;switch(t.finishedWork=u,t.finishedLanes=o,e){case 0:case 1:throw Error(rr(345));case 2:fp(t,bs,ih);break;case 3:if(Ef(t,o),(o&130023424)===o&&(e=e3+500-To(),10<e)){if(Gb(t,0)!==0)break;if(u=t.suspendedLanes,(u&o)!==o){os(),t.pingedLanes|=t.suspendedLanes&u;break}t.timeoutHandle=ZP(fp.bind(null,t,bs,ih),e);break}fp(t,bs,ih);break;case 4:if(Ef(t,o),(o&4194240)===o)break;for(e=t.eventTimes,u=-1;0<o;){var p=31-Au(o);f=1<<p,p=e[p],p>u&&(u=p),o&=~f}if(o=u,o=To()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*$ee(o/1960))-o,10<o){t.timeoutHandle=ZP(fp.bind(null,t,bs,ih),o);break}fp(t,bs,ih);break;case 5:fp(t,bs,ih);break;default:throw Error(rr(329))}}}return As(t,To()),t.callbackNode===r?E7.bind(null,t):null}function dM(t,e){var r=G0;return t.current.memoizedState.isDehydrated&&(Sp(t,e).flags|=256),t=lC(t,e),t!==2&&(e=bs,bs=r,e!==null&&pM(e)),t}function pM(t){bs===null?bs=t:bs.push.apply(bs,t)}function Uee(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var o=0;o<r.length;o++){var u=r[o],f=u.getSnapshot;u=u.value;try{if(!Pu(f(),u))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ef(t,e){for(e&=~QO,e&=~Ew,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Au(e),o=1<<r;t[r]=-1,e&=~o}}function i5(t){if(ni&6)throw Error(rr(327));Mg();var e=Gb(t,0);if(!(e&1))return As(t,To()),null;var r=lC(t,e);if(t.tag!==0&&r===2){var o=FP(t);o!==0&&(e=o,r=dM(t,o))}if(r===1)throw r=yv,Sp(t,0),Ef(t,e),As(t,To()),r;if(r===6)throw Error(rr(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,fp(t,bs,ih),As(t,To()),null}function t3(t,e){var r=ni;ni|=1;try{return t(e)}finally{ni=r,ni===0&&(Ug=To()+500,ww&&rd())}}function Lp(t){kf!==null&&kf.tag===0&&!(ni&6)&&Mg();var e=ni;ni|=1;var r=Nl.transition,o=bi;try{if(Nl.transition=null,bi=1,t)return t()}finally{bi=o,Nl.transition=r,ni=e,!(ni&6)&&rd()}}function r3(){Xs=bg.current,Yi(bg)}function Sp(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,yee(r)),Lo!==null)for(r=Lo.return;r!==null;){var o=r;switch(RO(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&Kb();break;case 3:jg(),Yi(Ss),Yi(Ha),HO();break;case 5:GO(o);break;case 4:jg();break;case 13:Yi(so);break;case 19:Yi(so);break;case 10:jO(o.type._context);break;case 22:case 23:r3()}r=r.return}if(la=t,Lo=t=Wf(t.current,null),Ca=Xs=e,Wo=0,yv=null,QO=Ew=kp=0,bs=G0=null,_p!==null){for(e=0;e<_p.length;e++)if(r=_p[e],o=r.interleaved,o!==null){r.interleaved=null;var u=o.next,f=r.pending;if(f!==null){var p=f.next;f.next=u,o.next=p}r.pending=o}_p=null}return t}function D7(t,e){do{var r=Lo;try{if(FO(),Ab.current=iC,nC){for(var o=lo.memoizedState;o!==null;){var u=o.queue;u!==null&&(u.pending=null),o=o.next}nC=!1}if(Op=0,aa=Ho=lo=null,U0=!1,mv=0,JO.current=null,r===null||r.return===null){Wo=1,yv=e,Lo=null;break}e:{var f=t,p=r.return,x=r,s=e;if(e=Ca,x.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){var w=s,I=x,P=I.tag;if(!(I.mode&1)&&(P===0||P===11||P===15)){var N=I.alternate;N?(I.updateQueue=N.updateQueue,I.memoizedState=N.memoizedState,I.lanes=N.lanes):(I.updateQueue=null,I.memoizedState=null)}var U=HN(p);if(U!==null){U.flags&=-257,WN(U,p,x,f,e),U.mode&1&&GN(f,w,e),e=U,s=w;var X=e.updateQueue;if(X===null){var Q=new Set;Q.add(s),e.updateQueue=Q}else X.add(s);break e}else{if(!(e&1)){GN(f,w,e),n3();break e}s=Error(rr(426))}}else if(ro&&x.mode&1){var J=HN(p);if(J!==null){!(J.flags&65536)&&(J.flags|=256),WN(J,p,x,f,e),zO($g(s,x));break e}}f=s=$g(s,x),Wo!==4&&(Wo=2),G0===null?G0=[f]:G0.push(f),f=p;do{switch(f.tag){case 3:f.flags|=65536,e&=-e,f.lanes|=e;var Z=f7(f,s,e);NN(f,Z);break e;case 1:x=s;var H=f.type,K=f.stateNode;if(!(f.flags&128)&&(typeof H.getDerivedStateFromError=="function"||K!==null&&typeof K.componentDidCatch=="function"&&(Gf===null||!Gf.has(K)))){f.flags|=65536,e&=-e,f.lanes|=e;var ee=d7(f,x,e);NN(f,ee);break e}}f=f.return}while(f!==null)}I7(r)}catch(se){e=se,Lo===r&&r!==null&&(Lo=r=r.return);continue}break}while(!0)}function P7(){var t=oC.current;return oC.current=iC,t===null?iC:t}function n3(){(Wo===0||Wo===3||Wo===2)&&(Wo=4),la===null||!(kp&268435455)&&!(Ew&268435455)||Ef(la,Ca)}function lC(t,e){var r=ni;ni|=2;var o=P7();(la!==t||Ca!==e)&&(ih=null,Sp(t,e));do try{Vee();break}catch(u){D7(t,u)}while(!0);if(FO(),ni=r,oC.current=o,Lo!==null)throw Error(rr(261));return la=null,Ca=0,Wo}function Vee(){for(;Lo!==null;)M7(Lo)}function Gee(){for(;Lo!==null&&!mQ();)M7(Lo)}function M7(t){var e=k7(t.alternate,t,Xs);t.memoizedProps=t.pendingProps,e===null?I7(t):Lo=e,JO.current=null}function I7(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=zee(r,e),r!==null){r.flags&=32767,Lo=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Wo=6,Lo=null;return}}else if(r=Ree(r,e,Xs),r!==null){Lo=r;return}if(e=e.sibling,e!==null){Lo=e;return}Lo=e=t}while(e!==null);Wo===0&&(Wo=5)}function fp(t,e,r){var o=bi,u=Nl.transition;try{Nl.transition=null,bi=1,Hee(t,e,r,o)}finally{Nl.transition=u,bi=o}return null}function Hee(t,e,r,o){do Mg();while(kf!==null);if(ni&6)throw Error(rr(327));r=t.finishedWork;var u=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(rr(177));t.callbackNode=null,t.callbackPriority=0;var f=r.lanes|r.childLanes;if(SQ(t,f),t===la&&(Lo=la=null,Ca=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Mx||(Mx=!0,L7(Vb,function(){return Mg(),null})),f=(r.flags&15990)!==0,r.subtreeFlags&15990||f){f=Nl.transition,Nl.transition=null;var p=bi;bi=1;var x=ni;ni|=4,JO.current=null,Fee(t,r),T7(r,t),hee(HP),Hb=!!GP,HP=GP=null,t.current=r,jee(r),gQ(),ni=x,bi=p,Nl.transition=f}else t.current=r;if(Mx&&(Mx=!1,kf=t,sC=u),f=t.pendingLanes,f===0&&(Gf=null),vQ(r.stateNode),As(t,To()),e!==null)for(o=t.onRecoverableError,r=0;r<e.length;r++)u=e[r],o(u.value,{componentStack:u.stack,digest:u.digest});if(aC)throw aC=!1,t=hM,hM=null,t;return sC&1&&t.tag!==0&&Mg(),f=t.pendingLanes,f&1?t===fM?H0++:(H0=0,fM=t):H0=0,rd(),null}function Mg(){if(kf!==null){var t=f2(sC),e=Nl.transition,r=bi;try{if(Nl.transition=null,bi=16>t?16:t,kf===null)var o=!1;else{if(t=kf,kf=null,sC=0,ni&6)throw Error(rr(331));var u=ni;for(ni|=4,wr=t.current;wr!==null;){var f=wr,p=f.child;if(wr.flags&16){var x=f.deletions;if(x!==null){for(var s=0;s<x.length;s++){var w=x[s];for(wr=w;wr!==null;){var I=wr;switch(I.tag){case 0:case 11:case 15:V0(8,I,f)}var P=I.child;if(P!==null)P.return=I,wr=P;else for(;wr!==null;){I=wr;var N=I.sibling,U=I.return;if(C7(I),I===w){wr=null;break}if(N!==null){N.return=U,wr=N;break}wr=U}}}var X=f.alternate;if(X!==null){var Q=X.child;if(Q!==null){X.child=null;do{var J=Q.sibling;Q.sibling=null,Q=J}while(Q!==null)}}wr=f}}if(f.subtreeFlags&2064&&p!==null)p.return=f,wr=p;else e:for(;wr!==null;){if(f=wr,f.flags&2048)switch(f.tag){case 0:case 11:case 15:V0(9,f,f.return)}var Z=f.sibling;if(Z!==null){Z.return=f.return,wr=Z;break e}wr=f.return}}var H=t.current;for(wr=H;wr!==null;){p=wr;var K=p.child;if(p.subtreeFlags&2064&&K!==null)K.return=p,wr=K;else e:for(p=H;wr!==null;){if(x=wr,x.flags&2048)try{switch(x.tag){case 0:case 11:case 15:Aw(9,x)}}catch(se){_o(x,x.return,se)}if(x===p){wr=null;break e}var ee=x.sibling;if(ee!==null){ee.return=x.return,wr=ee;break e}wr=x.return}}if(ni=u,rd(),_c&&typeof _c.onPostCommitFiberRoot=="function")try{_c.onPostCommitFiberRoot(vw,t)}catch{}o=!0}return o}finally{bi=r,Nl.transition=e}}return!1}function o5(t,e,r){e=$g(r,e),e=f7(t,e,1),t=Vf(t,e,1),e=os(),t!==null&&(gB(t,1,e),As(t,e))}function _o(t,e,r){if(t.tag===3)o5(t,t,r);else for(;e!==null;){if(e.tag===3){o5(e,t,r);break}else if(e.tag===1){var o=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Gf===null||!Gf.has(o))){t=$g(r,t),t=d7(e,t,1),e=Vf(e,t,1),t=os(),e!==null&&(gB(e,1,t),As(e,t));break}}e=e.return}}function Wee(t,e,r){var o=t.pingCache;o!==null&&o.delete(e),e=os(),t.pingedLanes|=t.suspendedLanes&r,la===t&&(Ca&r)===r&&(Wo===4||Wo===3&&(Ca&130023424)===Ca&&500>To()-e3?Sp(t,0):QO|=r),As(t,e)}function O7(t,e){e===0&&(t.mode&1?(e=xx,xx<<=1,!(xx&130023424)&&(xx=4194304)):e=1);var r=os();t=vh(t,e),t!==null&&(gB(t,e,r),As(t,r))}function Zee(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),O7(t,r)}function qee(t,e){var r=0;switch(t.tag){case 13:var o=t.stateNode,u=t.memoizedState;u!==null&&(r=u.retryLane);break;case 19:o=t.stateNode;break;default:throw Error(rr(314))}o!==null&&o.delete(e),O7(t,r)}var k7;k7=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ss.current)Cs=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Cs=!1,Lee(t,e,r);Cs=!!(t.flags&131072)}else Cs=!1,ro&&e.flags&1048576&&N2(e,Jb,e.index);switch(e.lanes=0,e.tag){case 2:var o=e.type;Db(t,e),t=e.pendingProps;var u=zg(e,Ha.current);Pg(e,r),u=ZO(null,e,o,t,u,r);var f=qO();return e.flags|=1,typeof u=="object"&&u!==null&&typeof u.render=="function"&&u.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ts(o)?(f=!0,Xb(e)):f=!1,e.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,UO(e),u.updater=Tw,e.stateNode=u,u._reactInternals=e,eM(e,o,t,r),e=nM(null,e,o,!0,f,r)):(e.tag=0,ro&&f&&LO(e),ns(null,e,u,r),e=e.child),e;case 16:o=e.elementType;e:{switch(Db(t,e),t=e.pendingProps,u=o._init,o=u(o._payload),e.type=o,u=e.tag=Xee(o),t=vu(o,t),u){case 0:e=rM(null,e,o,t,r);break e;case 1:e=KN(null,e,o,t,r);break e;case 11:e=ZN(null,e,o,t,r);break e;case 14:e=qN(null,e,o,vu(o.type,t),r);break e}throw Error(rr(306,o,""))}return e;case 0:return o=e.type,u=e.pendingProps,u=e.elementType===o?u:vu(o,u),rM(t,e,o,u,r);case 1:return o=e.type,u=e.pendingProps,u=e.elementType===o?u:vu(o,u),KN(t,e,o,u,r);case 3:e:{if(_7(e),t===null)throw Error(rr(387));o=e.pendingProps,f=e.memoizedState,u=f.element,G2(t,e),tC(e,o,null,r);var p=e.memoizedState;if(o=p.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:p.cache,pendingSuspenseBoundaries:p.pendingSuspenseBoundaries,transitions:p.transitions},e.updateQueue.baseState=f,e.memoizedState=f,e.flags&256){u=$g(Error(rr(423)),e),e=XN(t,e,o,r,u);break e}else if(o!==u){u=$g(Error(rr(424)),e),e=XN(t,e,o,r,u);break e}else for(el=Uf(e.stateNode.containerInfo.firstChild),tl=e,ro=!0,Cu=null,r=U2(e,null,o,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ng(),o===u){e=Bh(t,e,r);break e}ns(t,e,o,r)}e=e.child}return e;case 5:return H2(e),t===null&&YP(e),o=e.type,u=e.pendingProps,f=t!==null?t.memoizedProps:null,p=u.children,WP(o,u)?p=null:f!==null&&WP(o,f)&&(e.flags|=32),g7(t,e),ns(t,e,p,r),e.child;case 6:return t===null&&YP(e),null;case 13:return y7(t,e,r);case 4:return VO(e,e.stateNode.containerInfo),o=e.pendingProps,t===null?e.child=Fg(e,null,o,r):ns(t,e,o,r),e.child;case 11:return o=e.type,u=e.pendingProps,u=e.elementType===o?u:vu(o,u),ZN(t,e,o,u,r);case 7:return ns(t,e,e.pendingProps,r),e.child;case 8:return ns(t,e,e.pendingProps.children,r),e.child;case 12:return ns(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(o=e.type._context,u=e.pendingProps,f=e.memoizedProps,p=u.value,Ui(Qb,o._currentValue),o._currentValue=p,f!==null)if(Pu(f.value,p)){if(f.children===u.children&&!Ss.current){e=Bh(t,e,r);break e}}else for(f=e.child,f!==null&&(f.return=e);f!==null;){var x=f.dependencies;if(x!==null){p=f.child;for(var s=x.firstContext;s!==null;){if(s.context===o){if(f.tag===1){s=fh(-1,r&-r),s.tag=2;var w=f.updateQueue;if(w!==null){w=w.shared;var I=w.pending;I===null?s.next=s:(s.next=I.next,I.next=s),w.pending=s}}f.lanes|=r,s=f.alternate,s!==null&&(s.lanes|=r),JP(f.return,r,e),x.lanes|=r;break}s=s.next}}else if(f.tag===10)p=f.type===e.type?null:f.child;else if(f.tag===18){if(p=f.return,p===null)throw Error(rr(341));p.lanes|=r,x=p.alternate,x!==null&&(x.lanes|=r),JP(p,r,e),p=f.sibling}else p=f.child;if(p!==null)p.return=f;else for(p=f;p!==null;){if(p===e){p=null;break}if(f=p.sibling,f!==null){f.return=p.return,p=f;break}p=p.return}f=p}ns(t,e,u.children,r),e=e.child}return e;case 9:return u=e.type,o=e.pendingProps.children,Pg(e,r),u=jl(u),o=o(u),e.flags|=1,ns(t,e,o,r),e.child;case 14:return o=e.type,u=vu(o,e.pendingProps),u=vu(o.type,u),qN(t,e,o,u,r);case 15:return p7(t,e,e.type,e.pendingProps,r);case 17:return o=e.type,u=e.pendingProps,u=e.elementType===o?u:vu(o,u),Db(t,e),e.tag=1,Ts(o)?(t=!0,Xb(e)):t=!1,Pg(e,r),h7(e,o,u),eM(e,o,u,r),nM(null,e,o,!0,t,r);case 19:return v7(t,e,r);case 22:return m7(t,e,r)}throw Error(rr(156,e.tag))};function L7(t,e){return l2(t,e)}function Kee(t,e,r,o){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rl(t,e,r,o){return new Kee(t,e,r,o)}function i3(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Xee(t){if(typeof t=="function")return i3(t)?1:0;if(t!=null){if(t=t.$$typeof,t===CO)return 11;if(t===wO)return 14}return 2}function Wf(t,e){var r=t.alternate;return r===null?(r=Rl(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Ib(t,e,r,o,u,f){var p=2;if(o=t,typeof t=="function")i3(t)&&(p=1);else if(typeof t=="string")p=5;else e:switch(t){case fg:return Tp(r.children,u,f,e);case bO:p=8,u|=8;break;case wP:return t=Rl(12,r,e,u|2),t.elementType=wP,t.lanes=f,t;case SP:return t=Rl(13,r,e,u),t.elementType=SP,t.lanes=f,t;case TP:return t=Rl(19,r,e,u),t.elementType=TP,t.lanes=f,t;case HV:return Dw(r,u,f,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case VV:p=10;break e;case GV:p=9;break e;case CO:p=11;break e;case wO:p=14;break e;case wf:p=16,o=null;break e}throw Error(rr(130,t==null?t:typeof t,""))}return e=Rl(p,r,e,u),e.elementType=t,e.type=o,e.lanes=f,e}function Tp(t,e,r,o){return t=Rl(7,t,o,e),t.lanes=r,t}function Dw(t,e,r,o){return t=Rl(22,t,o,e),t.elementType=HV,t.lanes=r,t.stateNode={isHidden:!1},t}function zA(t,e,r){return t=Rl(6,t,null,e),t.lanes=r,t}function NA(t,e,r){return e=Rl(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Yee(t,e,r,o,u){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yA(0),this.expirationTimes=yA(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yA(0),this.identifierPrefix=o,this.onRecoverableError=u,this.mutableSourceEagerHydrationData=null}function o3(t,e,r,o,u,f,p,x,s){return t=new Yee(t,e,r,x,s),e===1?(e=1,f===!0&&(e|=8)):e=0,f=Rl(3,null,null,e),t.current=f,f.stateNode=t,f.memoizedState={element:o,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},UO(f),t}function Jee(t,e,r){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:hg,key:o==null?null:""+o,children:t,containerInfo:e,implementation:r}}function R7(t){if(!t)return Jf;t=t._reactInternals;e:{if(Hp(t)!==t||t.tag!==1)throw Error(rr(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ts(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(rr(171))}if(t.tag===1){var r=t.type;if(Ts(r))return R2(t,r,e)}return e}function z7(t,e,r,o,u,f,p,x,s){return t=o3(r,o,!0,t,u,f,p,x,s),t.context=R7(null),r=t.current,o=os(),u=Hf(r),f=fh(o,u),f.callback=e??null,Vf(r,f,u),t.current.lanes=u,gB(t,u,o),As(t,o),t}function Pw(t,e,r,o){var u=e.current,f=os(),p=Hf(u);return r=R7(r),e.context===null?e.context=r:e.pendingContext=r,e=fh(f,p),e.payload={element:t},o=o===void 0?null:o,o!==null&&(e.callback=o),t=Vf(u,e,p),t!==null&&(Eu(t,u,p,f),Tb(t,u,p)),p}function uC(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function a5(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function a3(t,e){a5(t,e),(t=t.alternate)&&a5(t,e)}function Qee(){return null}var N7=typeof reportError=="function"?reportError:function(t){console.error(t)};function s3(t){this._internalRoot=t}Mw.prototype.render=s3.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(rr(409));Pw(t,e,null,null)};Mw.prototype.unmount=s3.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Lp(function(){Pw(null,t,null,null)}),e[yh]=null}};function Mw(t){this._internalRoot=t}Mw.prototype.unstable_scheduleHydration=function(t){if(t){var e=m2();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Af.length&&e!==0&&e<Af[r].priority;r++);Af.splice(r,0,t),r===0&&_2(t)}};function l3(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Iw(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function s5(){}function ete(t,e,r,o,u){if(u){if(typeof o=="function"){var f=o;o=function(){var w=uC(p);f.call(w)}}var p=z7(e,o,t,0,null,!1,!1,"",s5);return t._reactRootContainer=p,t[yh]=p.current,cv(t.nodeType===8?t.parentNode:t),Lp(),p}for(;u=t.lastChild;)t.removeChild(u);if(typeof o=="function"){var x=o;o=function(){var w=uC(s);x.call(w)}}var s=o3(t,0,!1,null,null,!1,!1,"",s5);return t._reactRootContainer=s,t[yh]=s.current,cv(t.nodeType===8?t.parentNode:t),Lp(function(){Pw(e,s,r,o)}),s}function Ow(t,e,r,o,u){var f=r._reactRootContainer;if(f){var p=f;if(typeof u=="function"){var x=u;u=function(){var s=uC(p);x.call(s)}}Pw(e,p,t,u)}else p=ete(r,e,t,u,o);return uC(p)}d2=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=E0(e.pendingLanes);r!==0&&(AO(e,r|1),As(e,To()),!(ni&6)&&(Ug=To()+500,rd()))}break;case 13:Lp(function(){var o=vh(t,1);if(o!==null){var u=os();Eu(o,t,1,u)}}),a3(t,1)}};EO=function(t){if(t.tag===13){var e=vh(t,134217728);if(e!==null){var r=os();Eu(e,t,134217728,r)}a3(t,134217728)}};p2=function(t){if(t.tag===13){var e=Hf(t),r=vh(t,e);if(r!==null){var o=os();Eu(r,t,e,o)}a3(t,e)}};m2=function(){return bi};g2=function(t,e){var r=bi;try{return bi=t,e()}finally{bi=r}};RP=function(t,e,r){switch(e){case"input":if(DP(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var o=r[e];if(o!==t&&o.form===t.form){var u=Cw(o);if(!u)throw Error(rr(90));ZV(o),DP(o,u)}}}break;case"textarea":KV(t,r);break;case"select":e=r.value,e!=null&&Tg(t,!!r.multiple,e,!1)}};r2=t3;n2=Lp;var tte={usingClientEntryPoint:!1,Events:[yB,gg,Cw,e2,t2,t3]},t0={findFiberByHostInstance:gp,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rte={bundleType:t0.bundleType,version:t0.version,rendererPackageName:t0.rendererPackageName,rendererConfig:t0.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Sh.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=a2(t),t===null?null:t.stateNode},findFiberByHostInstance:t0.findFiberByHostInstance||Qee,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ix=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ix.isDisabled&&Ix.supportsFiber)try{vw=Ix.inject(rte),_c=Ix}catch{}}il.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tte;il.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!l3(e))throw Error(rr(200));return Jee(t,e,null,r)};il.createRoot=function(t,e){if(!l3(t))throw Error(rr(299));var r=!1,o="",u=N7;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(o=e.identifierPrefix),e.onRecoverableError!==void 0&&(u=e.onRecoverableError)),e=o3(t,1,!1,null,null,r,!1,o,u),t[yh]=e.current,cv(t.nodeType===8?t.parentNode:t),new s3(e)};il.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(rr(188)):(t=Object.keys(t).join(","),Error(rr(268,t)));return t=a2(e),t=t===null?null:t.stateNode,t};il.flushSync=function(t){return Lp(t)};il.hydrate=function(t,e,r){if(!Iw(e))throw Error(rr(200));return Ow(null,t,e,!0,r)};il.hydrateRoot=function(t,e,r){if(!l3(t))throw Error(rr(405));var o=r!=null&&r.hydratedSources||null,u=!1,f="",p=N7;if(r!=null&&(r.unstable_strictMode===!0&&(u=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onRecoverableError!==void 0&&(p=r.onRecoverableError)),e=z7(e,null,t,1,r??null,u,!1,f,p),t[yh]=e.current,cv(t),o)for(t=0;t<o.length;t++)r=o[t],u=r._getVersion,u=u(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,u]:e.mutableSourceEagerHydrationData.push(r,u);return new Mw(e)};il.render=function(t,e,r){if(!Iw(e))throw Error(rr(200));return Ow(null,t,e,!1,r)};il.unmountComponentAtNode=function(t){if(!Iw(t))throw Error(rr(40));return t._reactRootContainer?(Lp(function(){Ow(null,null,t,!1,function(){t._reactRootContainer=null,t[yh]=null})}),!0):!1};il.unstable_batchedUpdates=t3;il.unstable_renderSubtreeIntoContainer=function(t,e,r,o){if(!Iw(r))throw Error(rr(200));if(t==null||t._reactInternals===void 0)throw Error(rr(38));return Ow(t,e,r,!1,o)};il.version="18.3.1-next-f1338f8080-20240426";function F7(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(F7)}catch(t){console.error(t)}}F7(),FV.exports=il;var u3=FV.exports,l5=u3;bP.createRoot=l5.createRoot,bP.hydrateRoot=l5.hydrateRoot;/**
 * @remix-run/router v1.16.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vv(){return vv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},vv.apply(this,arguments)}var Lf;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Lf||(Lf={}));const u5="popstate";function nte(t){t===void 0&&(t={});function e(o,u){let{pathname:f,search:p,hash:x}=o.location;return mM("",{pathname:f,search:p,hash:x},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function r(o,u){return typeof u=="string"?u:cC(u)}return ote(e,r,null,t)}function yo(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function j7(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ite(){return Math.random().toString(36).substr(2,8)}function c5(t,e){return{usr:t.state,key:t.key,idx:e}}function mM(t,e,r,o){return r===void 0&&(r=null),vv({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?v_(e):e,{state:r,key:e&&e.key||o||ite()})}function cC(t){let{pathname:e="/",search:r="",hash:o=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),o&&o!=="#"&&(e+=o.charAt(0)==="#"?o:"#"+o),e}function v_(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let o=t.indexOf("?");o>=0&&(e.search=t.substr(o),t=t.substr(0,o)),t&&(e.pathname=t)}return e}function ote(t,e,r,o){o===void 0&&(o={});let{window:u=document.defaultView,v5Compat:f=!1}=o,p=u.history,x=Lf.Pop,s=null,w=I();w==null&&(w=0,p.replaceState(vv({},p.state,{idx:w}),""));function I(){return(p.state||{idx:null}).idx}function P(){x=Lf.Pop;let J=I(),Z=J==null?null:J-w;w=J,s&&s({action:x,location:Q.location,delta:Z})}function N(J,Z){x=Lf.Push;let H=mM(Q.location,J,Z);r&&r(H,J),w=I()+1;let K=c5(H,w),ee=Q.createHref(H);try{p.pushState(K,"",ee)}catch(se){if(se instanceof DOMException&&se.name==="DataCloneError")throw se;u.location.assign(ee)}f&&s&&s({action:x,location:Q.location,delta:1})}function U(J,Z){x=Lf.Replace;let H=mM(Q.location,J,Z);r&&r(H,J),w=I();let K=c5(H,w),ee=Q.createHref(H);p.replaceState(K,"",ee),f&&s&&s({action:x,location:Q.location,delta:0})}function X(J){let Z=u.location.origin!=="null"?u.location.origin:u.location.href,H=typeof J=="string"?J:cC(J);return H=H.replace(/ $/,"%20"),yo(Z,"No window.location.(origin|href) available to create URL for href: "+H),new URL(H,Z)}let Q={get action(){return x},get location(){return t(u,p)},listen(J){if(s)throw new Error("A history only accepts one active listener");return u.addEventListener(u5,P),s=J,()=>{u.removeEventListener(u5,P),s=null}},createHref(J){return e(u,J)},createURL:X,encodeLocation(J){let Z=X(J);return{pathname:Z.pathname,search:Z.search,hash:Z.hash}},push:N,replace:U,go(J){return p.go(J)}};return Q}var h5;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(h5||(h5={}));function ate(t,e,r){r===void 0&&(r="/");let o=typeof e=="string"?v_(e):e,u=Vg(o.pathname||"/",r);if(u==null)return null;let f=$7(t);ste(f);let p=null;for(let x=0;p==null&&x<f.length;++x){let s=yte(u);p=gte(f[x],s)}return p}function $7(t,e,r,o){e===void 0&&(e=[]),r===void 0&&(r=[]),o===void 0&&(o="");let u=(f,p,x)=>{let s={relativePath:x===void 0?f.path||"":x,caseSensitive:f.caseSensitive===!0,childrenIndex:p,route:f};s.relativePath.startsWith("/")&&(yo(s.relativePath.startsWith(o),'Absolute route path "'+s.relativePath+'" nested under path '+('"'+o+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),s.relativePath=s.relativePath.slice(o.length));let w=Zf([o,s.relativePath]),I=r.concat(s);f.children&&f.children.length>0&&(yo(f.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+w+'".')),$7(f.children,e,I,w)),!(f.path==null&&!f.index)&&e.push({path:w,score:pte(w,f.index),routesMeta:I})};return t.forEach((f,p)=>{var x;if(f.path===""||!((x=f.path)!=null&&x.includes("?")))u(f,p);else for(let s of U7(f.path))u(f,p,s)}),e}function U7(t){let e=t.split("/");if(e.length===0)return[];let[r,...o]=e,u=r.endsWith("?"),f=r.replace(/\?$/,"");if(o.length===0)return u?[f,""]:[f];let p=U7(o.join("/")),x=[];return x.push(...p.map(s=>s===""?f:[f,s].join("/"))),u&&x.push(...p),x.map(s=>t.startsWith("/")&&s===""?"/":s)}function ste(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:mte(e.routesMeta.map(o=>o.childrenIndex),r.routesMeta.map(o=>o.childrenIndex)))}const lte=/^:[\w-]+$/,ute=3,cte=2,hte=1,fte=10,dte=-2,f5=t=>t==="*";function pte(t,e){let r=t.split("/"),o=r.length;return r.some(f5)&&(o+=dte),e&&(o+=cte),r.filter(u=>!f5(u)).reduce((u,f)=>u+(lte.test(f)?ute:f===""?hte:fte),o)}function mte(t,e){return t.length===e.length&&t.slice(0,-1).every((o,u)=>o===e[u])?t[t.length-1]-e[e.length-1]:0}function gte(t,e){let{routesMeta:r}=t,o={},u="/",f=[];for(let p=0;p<r.length;++p){let x=r[p],s=p===r.length-1,w=u==="/"?e:e.slice(u.length)||"/",I=gM({path:x.relativePath,caseSensitive:x.caseSensitive,end:s},w);if(!I)return null;Object.assign(o,I.params);let P=x.route;f.push({params:o,pathname:Zf([u,I.pathname]),pathnameBase:bte(Zf([u,I.pathnameBase])),route:P}),I.pathnameBase!=="/"&&(u=Zf([u,I.pathnameBase]))}return f}function gM(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,o]=_te(t.path,t.caseSensitive,t.end),u=e.match(r);if(!u)return null;let f=u[0],p=f.replace(/(.)\/+$/,"$1"),x=u.slice(1);return{params:o.reduce((w,I,P)=>{let{paramName:N,isOptional:U}=I;if(N==="*"){let Q=x[P]||"";p=f.slice(0,f.length-Q.length).replace(/(.)\/+$/,"$1")}const X=x[P];return U&&!X?w[N]=void 0:w[N]=(X||"").replace(/%2F/g,"/"),w},{}),pathname:f,pathnameBase:p,pattern:t}}function _te(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),j7(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let o=[],u="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(p,x,s)=>(o.push({paramName:x,isOptional:s!=null}),s?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(o.push({paramName:"*"}),u+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?u+="\\/*$":t!==""&&t!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,e?void 0:"i"),o]}function yte(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return j7(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Vg(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,o=t.charAt(r);return o&&o!=="/"?null:t.slice(r)||"/"}function vte(t,e){e===void 0&&(e="/");let{pathname:r,search:o="",hash:u=""}=typeof t=="string"?v_(t):t;return{pathname:r?r.startsWith("/")?r:Bte(r,e):e,search:Cte(o),hash:wte(u)}}function Bte(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(u=>{u===".."?r.length>1&&r.pop():u!=="."&&r.push(u)}),r.length>1?r.join("/"):"/"}function FA(t,e,r,o){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(o)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function xte(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function V7(t,e){let r=xte(t);return e?r.map((o,u)=>u===t.length-1?o.pathname:o.pathnameBase):r.map(o=>o.pathnameBase)}function G7(t,e,r,o){o===void 0&&(o=!1);let u;typeof t=="string"?u=v_(t):(u=vv({},t),yo(!u.pathname||!u.pathname.includes("?"),FA("?","pathname","search",u)),yo(!u.pathname||!u.pathname.includes("#"),FA("#","pathname","hash",u)),yo(!u.search||!u.search.includes("#"),FA("#","search","hash",u)));let f=t===""||u.pathname==="",p=f?"/":u.pathname,x;if(p==null)x=r;else{let P=e.length-1;if(!o&&p.startsWith("..")){let N=p.split("/");for(;N[0]==="..";)N.shift(),P-=1;u.pathname=N.join("/")}x=P>=0?e[P]:"/"}let s=vte(u,x),w=p&&p!=="/"&&p.endsWith("/"),I=(f||p===".")&&r.endsWith("/");return!s.pathname.endsWith("/")&&(w||I)&&(s.pathname+="/"),s}const Zf=t=>t.join("/").replace(/\/\/+/g,"/"),bte=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Cte=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,wte=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Ste(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const H7=["post","put","patch","delete"];new Set(H7);const Tte=["get",...H7];new Set(Tte);/**
 * React Router v6.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bv(){return Bv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},Bv.apply(this,arguments)}const kw=Te.createContext(null),W7=Te.createContext(null),nd=Te.createContext(null),Lw=Te.createContext(null),Wp=Te.createContext({outlet:null,matches:[],isDataRoute:!1}),Z7=Te.createContext(null);function Ate(t,e){let{relative:r}=e===void 0?{}:e;BB()||yo(!1);let{basename:o,navigator:u}=Te.useContext(nd),{hash:f,pathname:p,search:x}=Rw(t,{relative:r}),s=p;return o!=="/"&&(s=p==="/"?o:Zf([o,p])),u.createHref({pathname:s,search:x,hash:f})}function BB(){return Te.useContext(Lw)!=null}function Zp(){return BB()||yo(!1),Te.useContext(Lw).location}function q7(t){Te.useContext(nd).static||Te.useLayoutEffect(t)}function c3(){let{isDataRoute:t}=Te.useContext(Wp);return t?jte():Ete()}function Ete(){BB()||yo(!1);let t=Te.useContext(kw),{basename:e,future:r,navigator:o}=Te.useContext(nd),{matches:u}=Te.useContext(Wp),{pathname:f}=Zp(),p=JSON.stringify(V7(u,r.v7_relativeSplatPath)),x=Te.useRef(!1);return q7(()=>{x.current=!0}),Te.useCallback(function(w,I){if(I===void 0&&(I={}),!x.current)return;if(typeof w=="number"){o.go(w);return}let P=G7(w,JSON.parse(p),f,I.relative==="path");t==null&&e!=="/"&&(P.pathname=P.pathname==="/"?e:Zf([e,P.pathname])),(I.replace?o.replace:o.push)(P,I.state,I)},[e,o,p,f,t])}function Rw(t,e){let{relative:r}=e===void 0?{}:e,{future:o}=Te.useContext(nd),{matches:u}=Te.useContext(Wp),{pathname:f}=Zp(),p=JSON.stringify(V7(u,o.v7_relativeSplatPath));return Te.useMemo(()=>G7(t,JSON.parse(p),f,r==="path"),[t,p,f,r])}function Dte(t,e){return Pte(t,e)}function Pte(t,e,r,o){BB()||yo(!1);let{navigator:u}=Te.useContext(nd),{matches:f}=Te.useContext(Wp),p=f[f.length-1],x=p?p.params:{};p&&p.pathname;let s=p?p.pathnameBase:"/";p&&p.route;let w=Zp(),I;if(e){var P;let J=typeof e=="string"?v_(e):e;s==="/"||(P=J.pathname)!=null&&P.startsWith(s)||yo(!1),I=J}else I=w;let N=I.pathname||"/",U=N;if(s!=="/"){let J=s.replace(/^\//,"").split("/");U="/"+N.replace(/^\//,"").split("/").slice(J.length).join("/")}let X=ate(t,{pathname:U}),Q=Lte(X&&X.map(J=>Object.assign({},J,{params:Object.assign({},x,J.params),pathname:Zf([s,u.encodeLocation?u.encodeLocation(J.pathname).pathname:J.pathname]),pathnameBase:J.pathnameBase==="/"?s:Zf([s,u.encodeLocation?u.encodeLocation(J.pathnameBase).pathname:J.pathnameBase])})),f,r,o);return e&&Q?Te.createElement(Lw.Provider,{value:{location:Bv({pathname:"/",search:"",hash:"",state:null,key:"default"},I),navigationType:Lf.Pop}},Q):Q}function Mte(){let t=Fte(),e=Ste(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,u={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Te.createElement(Te.Fragment,null,Te.createElement("h2",null,"Unexpected Application Error!"),Te.createElement("h3",{style:{fontStyle:"italic"}},e),r?Te.createElement("pre",{style:u},r):null,null)}const Ite=Te.createElement(Mte,null);class Ote extends Te.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?Te.createElement(Wp.Provider,{value:this.props.routeContext},Te.createElement(Z7.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function kte(t){let{routeContext:e,match:r,children:o}=t,u=Te.useContext(kw);return u&&u.static&&u.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(u.staticContext._deepestRenderedBoundaryId=r.route.id),Te.createElement(Wp.Provider,{value:e},o)}function Lte(t,e,r,o){var u;if(e===void 0&&(e=[]),r===void 0&&(r=null),o===void 0&&(o=null),t==null){var f;if((f=r)!=null&&f.errors)t=r.matches;else return null}let p=t,x=(u=r)==null?void 0:u.errors;if(x!=null){let I=p.findIndex(P=>P.route.id&&(x==null?void 0:x[P.route.id])!==void 0);I>=0||yo(!1),p=p.slice(0,Math.min(p.length,I+1))}let s=!1,w=-1;if(r&&o&&o.v7_partialHydration)for(let I=0;I<p.length;I++){let P=p[I];if((P.route.HydrateFallback||P.route.hydrateFallbackElement)&&(w=I),P.route.id){let{loaderData:N,errors:U}=r,X=P.route.loader&&N[P.route.id]===void 0&&(!U||U[P.route.id]===void 0);if(P.route.lazy||X){s=!0,w>=0?p=p.slice(0,w+1):p=[p[0]];break}}}return p.reduceRight((I,P,N)=>{let U,X=!1,Q=null,J=null;r&&(U=x&&P.route.id?x[P.route.id]:void 0,Q=P.route.errorElement||Ite,s&&(w<0&&N===0?($te("route-fallback",!1),X=!0,J=null):w===N&&(X=!0,J=P.route.hydrateFallbackElement||null)));let Z=e.concat(p.slice(0,N+1)),H=()=>{let K;return U?K=Q:X?K=J:P.route.Component?K=Te.createElement(P.route.Component,null):P.route.element?K=P.route.element:K=I,Te.createElement(kte,{match:P,routeContext:{outlet:I,matches:Z,isDataRoute:r!=null},children:K})};return r&&(P.route.ErrorBoundary||P.route.errorElement||N===0)?Te.createElement(Ote,{location:r.location,revalidation:r.revalidation,component:Q,error:U,children:H(),routeContext:{outlet:null,matches:Z,isDataRoute:!0}}):H()},null)}var K7=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(K7||{}),hC=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(hC||{});function Rte(t){let e=Te.useContext(kw);return e||yo(!1),e}function zte(t){let e=Te.useContext(W7);return e||yo(!1),e}function Nte(t){let e=Te.useContext(Wp);return e||yo(!1),e}function X7(t){let e=Nte(),r=e.matches[e.matches.length-1];return r.route.id||yo(!1),r.route.id}function Fte(){var t;let e=Te.useContext(Z7),r=zte(hC.UseRouteError),o=X7(hC.UseRouteError);return e!==void 0?e:(t=r.errors)==null?void 0:t[o]}function jte(){let{router:t}=Rte(K7.UseNavigateStable),e=X7(hC.UseNavigateStable),r=Te.useRef(!1);return q7(()=>{r.current=!0}),Te.useCallback(function(u,f){f===void 0&&(f={}),r.current&&(typeof u=="number"?t.navigate(u):t.navigate(u,Bv({fromRouteId:e},f)))},[t,e])}const d5={};function $te(t,e,r){!e&&!d5[t]&&(d5[t]=!0)}function P0(t){yo(!1)}function Ute(t){let{basename:e="/",children:r=null,location:o,navigationType:u=Lf.Pop,navigator:f,static:p=!1,future:x}=t;BB()&&yo(!1);let s=e.replace(/^\/*/,"/"),w=Te.useMemo(()=>({basename:s,navigator:f,static:p,future:Bv({v7_relativeSplatPath:!1},x)}),[s,x,f,p]);typeof o=="string"&&(o=v_(o));let{pathname:I="/",search:P="",hash:N="",state:U=null,key:X="default"}=o,Q=Te.useMemo(()=>{let J=Vg(I,s);return J==null?null:{location:{pathname:J,search:P,hash:N,state:U,key:X},navigationType:u}},[s,I,P,N,U,X,u]);return Q==null?null:Te.createElement(nd.Provider,{value:w},Te.createElement(Lw.Provider,{children:r,value:Q}))}function Vte(t){let{children:e,location:r}=t;return Dte(_M(e),r)}new Promise(()=>{});function _M(t,e){e===void 0&&(e=[]);let r=[];return Te.Children.forEach(t,(o,u)=>{if(!Te.isValidElement(o))return;let f=[...e,u];if(o.type===Te.Fragment){r.push.apply(r,_M(o.props.children,f));return}o.type!==P0&&yo(!1),!o.props.index||!o.props.children||yo(!1);let p={id:o.props.id||f.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(p.children=_M(o.props.children,f)),r.push(p)}),r}/**
 * React Router DOM v6.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fC(){return fC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},fC.apply(this,arguments)}function Y7(t,e){if(t==null)return{};var r={},o=Object.keys(t),u,f;for(f=0;f<o.length;f++)u=o[f],!(e.indexOf(u)>=0)&&(r[u]=t[u]);return r}function Gte(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Hte(t,e){return t.button===0&&(!e||e==="_self")&&!Gte(t)}const Wte=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],Zte=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],qte="6";try{window.__reactRouterVersion=qte}catch{}const Kte=Te.createContext({isTransitioning:!1}),Xte="startTransition",p5=WJ[Xte];function Yte(t){let{basename:e,children:r,future:o,window:u}=t,f=Te.useRef();f.current==null&&(f.current=nte({window:u,v5Compat:!0}));let p=f.current,[x,s]=Te.useState({action:p.action,location:p.location}),{v7_startTransition:w}=o||{},I=Te.useCallback(P=>{w&&p5?p5(()=>s(P)):s(P)},[s,w]);return Te.useLayoutEffect(()=>p.listen(I),[p,I]),Te.createElement(Ute,{basename:e,children:r,location:x.location,navigationType:x.action,navigator:p,future:o})}const Jte=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Qte=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yM=Te.forwardRef(function(e,r){let{onClick:o,relative:u,reloadDocument:f,replace:p,state:x,target:s,to:w,preventScrollReset:I,unstable_viewTransition:P}=e,N=Y7(e,Wte),{basename:U}=Te.useContext(nd),X,Q=!1;if(typeof w=="string"&&Qte.test(w)&&(X=w,Jte))try{let K=new URL(window.location.href),ee=w.startsWith("//")?new URL(K.protocol+w):new URL(w),se=Vg(ee.pathname,U);ee.origin===K.origin&&se!=null?w=se+ee.search+ee.hash:Q=!0}catch{}let J=Ate(w,{relative:u}),Z=rre(w,{replace:p,state:x,target:s,preventScrollReset:I,relative:u,unstable_viewTransition:P});function H(K){o&&o(K),K.defaultPrevented||Z(K)}return Te.createElement("a",fC({},N,{href:X||J,onClick:Q||f?o:H,ref:r,target:s}))}),ere=Te.forwardRef(function(e,r){let{"aria-current":o="page",caseSensitive:u=!1,className:f="",end:p=!1,style:x,to:s,unstable_viewTransition:w,children:I}=e,P=Y7(e,Zte),N=Rw(s,{relative:P.relative}),U=Zp(),X=Te.useContext(W7),{navigator:Q,basename:J}=Te.useContext(nd),Z=X!=null&&nre(N)&&w===!0,H=Q.encodeLocation?Q.encodeLocation(N).pathname:N.pathname,K=U.pathname,ee=X&&X.navigation&&X.navigation.location?X.navigation.location.pathname:null;u||(K=K.toLowerCase(),ee=ee?ee.toLowerCase():null,H=H.toLowerCase()),ee&&J&&(ee=Vg(ee,J)||ee);const se=H!=="/"&&H.endsWith("/")?H.length-1:H.length;let me=K===H||!p&&K.startsWith(H)&&K.charAt(se)==="/",Ce=ee!=null&&(ee===H||!p&&ee.startsWith(H)&&ee.charAt(H.length)==="/"),Ae={isActive:me,isPending:Ce,isTransitioning:Z},De=me?o:void 0,qe;typeof f=="function"?qe=f(Ae):qe=[f,me?"active":null,Ce?"pending":null,Z?"transitioning":null].filter(Boolean).join(" ");let je=typeof x=="function"?x(Ae):x;return Te.createElement(yM,fC({},P,{"aria-current":De,className:qe,ref:r,style:je,to:s,unstable_viewTransition:w}),typeof I=="function"?I(Ae):I)});var vM;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(vM||(vM={}));var m5;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(m5||(m5={}));function tre(t){let e=Te.useContext(kw);return e||yo(!1),e}function rre(t,e){let{target:r,replace:o,state:u,preventScrollReset:f,relative:p,unstable_viewTransition:x}=e===void 0?{}:e,s=c3(),w=Zp(),I=Rw(t,{relative:p});return Te.useCallback(P=>{if(Hte(P,r)){P.preventDefault();let N=o!==void 0?o:cC(w)===cC(I);s(t,{replace:N,state:u,preventScrollReset:f,relative:p,unstable_viewTransition:x})}},[w,s,I,o,u,r,t,f,p,x])}function nre(t,e){e===void 0&&(e={});let r=Te.useContext(Kte);r==null&&yo(!1);let{basename:o}=tre(vM.useViewTransitionState),u=Rw(t,{relative:e.relative});if(!r.isTransitioning)return!1;let f=Vg(r.currentLocation.pathname,o)||r.currentLocation.pathname,p=Vg(r.nextLocation.pathname,o)||r.nextLocation.pathname;return gM(u.pathname,p)!=null||gM(u.pathname,f)!=null}function Th(t,e,r,o){var u=arguments.length,f=u<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,r):o,p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(t,e,r,o);else for(var x=t.length-1;x>=0;x--)(p=t[x])&&(f=(u<3?p(f):u>3?p(e,r,f):p(e,r))||f);return u>3&&f&&Object.defineProperty(e,r,f),f}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const J7=t=>(e,r)=>{r!==void 0?r.addInitializer(()=>{customElements.define(t,e)}):customElements.define(t,e)};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ob=globalThis,h3=Ob.ShadowRoot&&(Ob.ShadyCSS===void 0||Ob.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,f3=Symbol(),g5=new WeakMap;let Q7=class{constructor(e,r,o){if(this._$cssResult$=!0,o!==f3)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=r}get styleSheet(){let e=this.o;const r=this.t;if(h3&&e===void 0){const o=r!==void 0&&r.length===1;o&&(e=g5.get(r)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),o&&g5.set(r,e))}return e}toString(){return this.cssText}};const ire=t=>new Q7(typeof t=="string"?t:t+"",void 0,f3),eG=(t,...e)=>{const r=t.length===1?t[0]:e.reduce((o,u,f)=>o+(p=>{if(p._$cssResult$===!0)return p.cssText;if(typeof p=="number")return p;throw Error("Value passed to 'css' function must be a 'css' function result: "+p+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(u)+t[f+1],t[0]);return new Q7(r,t,f3)},ore=(t,e)=>{if(h3)t.adoptedStyleSheets=e.map(r=>r instanceof CSSStyleSheet?r:r.styleSheet);else for(const r of e){const o=document.createElement("style"),u=Ob.litNonce;u!==void 0&&o.setAttribute("nonce",u),o.textContent=r.cssText,t.appendChild(o)}},_5=h3?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let r="";for(const o of e.cssRules)r+=o.cssText;return ire(r)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:are,defineProperty:sre,getOwnPropertyDescriptor:lre,getOwnPropertyNames:ure,getOwnPropertySymbols:cre,getPrototypeOf:hre}=Object,qf=globalThis,y5=qf.trustedTypes,fre=y5?y5.emptyScript:"",jA=qf.reactiveElementPolyfillSupport,W0=(t,e)=>t,dC={toAttribute(t,e){switch(e){case Boolean:t=t?fre:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let r=t;switch(e){case Boolean:r=t!==null;break;case Number:r=t===null?null:Number(t);break;case Object:case Array:try{r=JSON.parse(t)}catch{r=null}}return r}},d3=(t,e)=>!are(t,e),v5={attribute:!0,type:String,converter:dC,reflect:!1,hasChanged:d3};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),qf.litPropertyMetadata??(qf.litPropertyMetadata=new WeakMap);let lg=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,r=v5){if(r.state&&(r.attribute=!1),this._$Ei(),this.elementProperties.set(e,r),!r.noAccessor){const o=Symbol(),u=this.getPropertyDescriptor(e,o,r);u!==void 0&&sre(this.prototype,e,u)}}static getPropertyDescriptor(e,r,o){const{get:u,set:f}=lre(this.prototype,e)??{get(){return this[r]},set(p){this[r]=p}};return{get(){return u==null?void 0:u.call(this)},set(p){const x=u==null?void 0:u.call(this);f.call(this,p),this.requestUpdate(e,x,o)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??v5}static _$Ei(){if(this.hasOwnProperty(W0("elementProperties")))return;const e=hre(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(W0("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(W0("properties"))){const r=this.properties,o=[...ure(r),...cre(r)];for(const u of o)this.createProperty(u,r[u])}const e=this[Symbol.metadata];if(e!==null){const r=litPropertyMetadata.get(e);if(r!==void 0)for(const[o,u]of r)this.elementProperties.set(o,u)}this._$Eh=new Map;for(const[r,o]of this.elementProperties){const u=this._$Eu(r,o);u!==void 0&&this._$Eh.set(u,r)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const r=[];if(Array.isArray(e)){const o=new Set(e.flat(1/0).reverse());for(const u of o)r.unshift(_5(u))}else e!==void 0&&r.push(_5(e));return r}static _$Eu(e,r){const o=r.attribute;return o===!1?void 0:typeof o=="string"?o:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(r=>this.enableUpdating=r),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(r=>r(this))}addController(e){var r;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((r=e.hostConnected)==null||r.call(e))}removeController(e){var r;(r=this._$EO)==null||r.delete(e)}_$E_(){const e=new Map,r=this.constructor.elementProperties;for(const o of r.keys())this.hasOwnProperty(o)&&(e.set(o,this[o]),delete this[o]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return ore(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(r=>{var o;return(o=r.hostConnected)==null?void 0:o.call(r)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(r=>{var o;return(o=r.hostDisconnected)==null?void 0:o.call(r)})}attributeChangedCallback(e,r,o){this._$AK(e,o)}_$EC(e,r){var f;const o=this.constructor.elementProperties.get(e),u=this.constructor._$Eu(e,o);if(u!==void 0&&o.reflect===!0){const p=(((f=o.converter)==null?void 0:f.toAttribute)!==void 0?o.converter:dC).toAttribute(r,o.type);this._$Em=e,p==null?this.removeAttribute(u):this.setAttribute(u,p),this._$Em=null}}_$AK(e,r){var f;const o=this.constructor,u=o._$Eh.get(e);if(u!==void 0&&this._$Em!==u){const p=o.getPropertyOptions(u),x=typeof p.converter=="function"?{fromAttribute:p.converter}:((f=p.converter)==null?void 0:f.fromAttribute)!==void 0?p.converter:dC;this._$Em=u,this[u]=x.fromAttribute(r,p.type),this._$Em=null}}requestUpdate(e,r,o){if(e!==void 0){if(o??(o=this.constructor.getPropertyOptions(e)),!(o.hasChanged??d3)(this[e],r))return;this.P(e,r,o)}this.isUpdatePending===!1&&(this._$ES=this._$ET())}P(e,r,o){this._$AL.has(e)||this._$AL.set(e,r),o.reflect===!0&&this._$Em!==e&&(this._$Ej??(this._$Ej=new Set)).add(e)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(r){Promise.reject(r)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var o;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[f,p]of this._$Ep)this[f]=p;this._$Ep=void 0}const u=this.constructor.elementProperties;if(u.size>0)for(const[f,p]of u)p.wrapped!==!0||this._$AL.has(f)||this[f]===void 0||this.P(f,this[f],p)}let e=!1;const r=this._$AL;try{e=this.shouldUpdate(r),e?(this.willUpdate(r),(o=this._$EO)==null||o.forEach(u=>{var f;return(f=u.hostUpdate)==null?void 0:f.call(u)}),this.update(r)):this._$EU()}catch(u){throw e=!1,this._$EU(),u}e&&this._$AE(r)}willUpdate(e){}_$AE(e){var r;(r=this._$EO)==null||r.forEach(o=>{var u;return(u=o.hostUpdated)==null?void 0:u.call(o)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Ej&&(this._$Ej=this._$Ej.forEach(r=>this._$EC(r,this[r]))),this._$EU()}updated(e){}firstUpdated(e){}};lg.elementStyles=[],lg.shadowRootOptions={mode:"open"},lg[W0("elementProperties")]=new Map,lg[W0("finalized")]=new Map,jA==null||jA({ReactiveElement:lg}),(qf.reactiveElementVersions??(qf.reactiveElementVersions=[])).push("2.0.4");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const dre={attribute:!0,type:String,converter:dC,reflect:!1,hasChanged:d3},pre=(t=dre,e,r)=>{const{kind:o,metadata:u}=r;let f=globalThis.litPropertyMetadata.get(u);if(f===void 0&&globalThis.litPropertyMetadata.set(u,f=new Map),f.set(r.name,t),o==="accessor"){const{name:p}=r;return{set(x){const s=e.get.call(this);e.set.call(this,x),this.requestUpdate(p,s,t)},init(x){return x!==void 0&&this.P(p,void 0,t),x}}}if(o==="setter"){const{name:p}=r;return function(x){const s=this[p];e.call(this,x),this.requestUpdate(p,s,t)}}throw Error("Unsupported decorator location: "+o)};function xB(t){return(e,r)=>typeof r=="object"?pre(t,e,r):((o,u,f)=>{const p=u.hasOwnProperty(f);return u.constructor.createProperty(f,p?{...o,wrapped:!0}:o),p?Object.getOwnPropertyDescriptor(u,f):void 0})(t,e,r)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function tG(t){return xB({...t,state:!0,attribute:!1})}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const B5=(t,e,r)=>(r.configurable=!0,r.enumerable=!0,Reflect.decorate&&typeof e!="object"&&Object.defineProperty(t,e,r),r);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function mre(t,e){return(r,o,u)=>{const f=p=>{var x;return((x=p.renderRoot)==null?void 0:x.querySelector(t))??null};if(e){const{get:p,set:x}=typeof o=="object"?r:u??(()=>{const s=Symbol();return{get(){return this[s]},set(w){this[s]=w}}})();return B5(r,o,{get(){let s=p.call(this);return s===void 0&&(s=f(this),(s!==null||this.hasUpdated)&&x.call(this,s)),s}})}return B5(r,o,{get(){return f(this)}})}}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Z0=globalThis,pC=Z0.trustedTypes,x5=pC?pC.createPolicy("lit-html",{createHTML:t=>t}):void 0,rG="$lit$",Df=`lit$${Math.random().toFixed(9).slice(2)}$`,nG="?"+Df,gre=`<${nG}>`,Rp=document,xv=()=>Rp.createComment(""),bv=t=>t===null||typeof t!="object"&&typeof t!="function",iG=Array.isArray,_re=t=>iG(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",$A=`[ 	
\f\r]`,r0=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,b5=/-->/g,C5=/>/g,lp=RegExp(`>|${$A}(?:([^\\s"'>=/]+)(${$A}*=${$A}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),w5=/'/g,S5=/"/g,oG=/^(?:script|style|textarea|title)$/i,yre=t=>(e,...r)=>({_$litType$:t,strings:e,values:r}),vre=yre(1),zp=Symbol.for("lit-noChange"),sa=Symbol.for("lit-nothing"),T5=new WeakMap,vp=Rp.createTreeWalker(Rp,129);function aG(t,e){if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return x5!==void 0?x5.createHTML(e):e}const Bre=(t,e)=>{const r=t.length-1,o=[];let u,f=e===2?"<svg>":"",p=r0;for(let x=0;x<r;x++){const s=t[x];let w,I,P=-1,N=0;for(;N<s.length&&(p.lastIndex=N,I=p.exec(s),I!==null);)N=p.lastIndex,p===r0?I[1]==="!--"?p=b5:I[1]!==void 0?p=C5:I[2]!==void 0?(oG.test(I[2])&&(u=RegExp("</"+I[2],"g")),p=lp):I[3]!==void 0&&(p=lp):p===lp?I[0]===">"?(p=u??r0,P=-1):I[1]===void 0?P=-2:(P=p.lastIndex-I[2].length,w=I[1],p=I[3]===void 0?lp:I[3]==='"'?S5:w5):p===S5||p===w5?p=lp:p===b5||p===C5?p=r0:(p=lp,u=void 0);const U=p===lp&&t[x+1].startsWith("/>")?" ":"";f+=p===r0?s+gre:P>=0?(o.push(w),s.slice(0,P)+rG+s.slice(P)+Df+U):s+Df+(P===-2?x:U)}return[aG(t,f+(t[r]||"<?>")+(e===2?"</svg>":"")),o]};class Cv{constructor({strings:e,_$litType$:r},o){let u;this.parts=[];let f=0,p=0;const x=e.length-1,s=this.parts,[w,I]=Bre(e,r);if(this.el=Cv.createElement(w,o),vp.currentNode=this.el.content,r===2){const P=this.el.content.firstChild;P.replaceWith(...P.childNodes)}for(;(u=vp.nextNode())!==null&&s.length<x;){if(u.nodeType===1){if(u.hasAttributes())for(const P of u.getAttributeNames())if(P.endsWith(rG)){const N=I[p++],U=u.getAttribute(P).split(Df),X=/([.?@])?(.*)/.exec(N);s.push({type:1,index:f,name:X[2],strings:U,ctor:X[1]==="."?bre:X[1]==="?"?Cre:X[1]==="@"?wre:zw}),u.removeAttribute(P)}else P.startsWith(Df)&&(s.push({type:6,index:f}),u.removeAttribute(P));if(oG.test(u.tagName)){const P=u.textContent.split(Df),N=P.length-1;if(N>0){u.textContent=pC?pC.emptyScript:"";for(let U=0;U<N;U++)u.append(P[U],xv()),vp.nextNode(),s.push({type:2,index:++f});u.append(P[N],xv())}}}else if(u.nodeType===8)if(u.data===nG)s.push({type:2,index:f});else{let P=-1;for(;(P=u.data.indexOf(Df,P+1))!==-1;)s.push({type:7,index:f}),P+=Df.length-1}f++}}static createElement(e,r){const o=Rp.createElement("template");return o.innerHTML=e,o}}function Gg(t,e,r=t,o){var p,x;if(e===zp)return e;let u=o!==void 0?(p=r._$Co)==null?void 0:p[o]:r._$Cl;const f=bv(e)?void 0:e._$litDirective$;return(u==null?void 0:u.constructor)!==f&&((x=u==null?void 0:u._$AO)==null||x.call(u,!1),f===void 0?u=void 0:(u=new f(t),u._$AT(t,r,o)),o!==void 0?(r._$Co??(r._$Co=[]))[o]=u:r._$Cl=u),u!==void 0&&(e=Gg(t,u._$AS(t,e.values),u,o)),e}class xre{constructor(e,r){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=r}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:r},parts:o}=this._$AD,u=((e==null?void 0:e.creationScope)??Rp).importNode(r,!0);vp.currentNode=u;let f=vp.nextNode(),p=0,x=0,s=o[0];for(;s!==void 0;){if(p===s.index){let w;s.type===2?w=new bB(f,f.nextSibling,this,e):s.type===1?w=new s.ctor(f,s.name,s.strings,this,e):s.type===6&&(w=new Sre(f,this,e)),this._$AV.push(w),s=o[++x]}p!==(s==null?void 0:s.index)&&(f=vp.nextNode(),p++)}return vp.currentNode=Rp,u}p(e){let r=0;for(const o of this._$AV)o!==void 0&&(o.strings!==void 0?(o._$AI(e,o,r),r+=o.strings.length-2):o._$AI(e[r])),r++}}class bB{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,r,o,u){this.type=2,this._$AH=sa,this._$AN=void 0,this._$AA=e,this._$AB=r,this._$AM=o,this.options=u,this._$Cv=(u==null?void 0:u.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const r=this._$AM;return r!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=r.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,r=this){e=Gg(this,e,r),bv(e)?e===sa||e==null||e===""?(this._$AH!==sa&&this._$AR(),this._$AH=sa):e!==this._$AH&&e!==zp&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):_re(e)?this.k(e):this._(e)}S(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.S(e))}_(e){this._$AH!==sa&&bv(this._$AH)?this._$AA.nextSibling.data=e:this.T(Rp.createTextNode(e)),this._$AH=e}$(e){var f;const{values:r,_$litType$:o}=e,u=typeof o=="number"?this._$AC(e):(o.el===void 0&&(o.el=Cv.createElement(aG(o.h,o.h[0]),this.options)),o);if(((f=this._$AH)==null?void 0:f._$AD)===u)this._$AH.p(r);else{const p=new xre(u,this),x=p.u(this.options);p.p(r),this.T(x),this._$AH=p}}_$AC(e){let r=T5.get(e.strings);return r===void 0&&T5.set(e.strings,r=new Cv(e)),r}k(e){iG(this._$AH)||(this._$AH=[],this._$AR());const r=this._$AH;let o,u=0;for(const f of e)u===r.length?r.push(o=new bB(this.S(xv()),this.S(xv()),this,this.options)):o=r[u],o._$AI(f),u++;u<r.length&&(this._$AR(o&&o._$AB.nextSibling,u),r.length=u)}_$AR(e=this._$AA.nextSibling,r){var o;for((o=this._$AP)==null?void 0:o.call(this,!1,!0,r);e&&e!==this._$AB;){const u=e.nextSibling;e.remove(),e=u}}setConnected(e){var r;this._$AM===void 0&&(this._$Cv=e,(r=this._$AP)==null||r.call(this,e))}}class zw{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,r,o,u,f){this.type=1,this._$AH=sa,this._$AN=void 0,this.element=e,this.name=r,this._$AM=u,this.options=f,o.length>2||o[0]!==""||o[1]!==""?(this._$AH=Array(o.length-1).fill(new String),this.strings=o):this._$AH=sa}_$AI(e,r=this,o,u){const f=this.strings;let p=!1;if(f===void 0)e=Gg(this,e,r,0),p=!bv(e)||e!==this._$AH&&e!==zp,p&&(this._$AH=e);else{const x=e;let s,w;for(e=f[0],s=0;s<f.length-1;s++)w=Gg(this,x[o+s],r,s),w===zp&&(w=this._$AH[s]),p||(p=!bv(w)||w!==this._$AH[s]),w===sa?e=sa:e!==sa&&(e+=(w??"")+f[s+1]),this._$AH[s]=w}p&&!u&&this.j(e)}j(e){e===sa?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}let bre=class extends zw{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===sa?void 0:e}};class Cre extends zw{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==sa)}}class wre extends zw{constructor(e,r,o,u,f){super(e,r,o,u,f),this.type=5}_$AI(e,r=this){if((e=Gg(this,e,r,0)??sa)===zp)return;const o=this._$AH,u=e===sa&&o!==sa||e.capture!==o.capture||e.once!==o.once||e.passive!==o.passive,f=e!==sa&&(o===sa||u);u&&this.element.removeEventListener(this.name,this,o),f&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var r;typeof this._$AH=="function"?this._$AH.call(((r=this.options)==null?void 0:r.host)??this.element,e):this._$AH.handleEvent(e)}}let Sre=class{constructor(e,r,o){this.element=e,this.type=6,this._$AN=void 0,this._$AM=r,this.options=o}get _$AU(){return this._$AM._$AU}_$AI(e){Gg(this,e)}};const UA=Z0.litHtmlPolyfillSupport;UA==null||UA(Cv,bB),(Z0.litHtmlVersions??(Z0.litHtmlVersions=[])).push("3.1.3");const Tre=(t,e,r)=>{const o=(r==null?void 0:r.renderBefore)??e;let u=o._$litPart$;if(u===void 0){const f=(r==null?void 0:r.renderBefore)??null;o._$litPart$=u=new bB(e.insertBefore(xv(),f),f,void 0,r??{})}return u._$AI(t),u};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let Ig=class extends lg{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var r;const e=super.createRenderRoot();return(r=this.renderOptions).renderBefore??(r.renderBefore=e.firstChild),e}update(e){const r=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=Tre(r,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return zp}};var SV;Ig._$litElement$=!0,Ig.finalized=!0,(SV=globalThis.litElementHydrateSupport)==null||SV.call(globalThis,{LitElement:Ig});const VA=globalThis.litElementPolyfillSupport;VA==null||VA({LitElement:Ig});(globalThis.litElementVersions??(globalThis.litElementVersions=[])).push("4.0.5");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Are={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},Ere=t=>(...e)=>({_$litDirective$:t,values:e});class Dre{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,r,o){this._$Ct=e,this._$AM=r,this._$Ci=o}_$AS(e,r){return this.update(e,r)}update(e,r){return this.render(...r)}}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Pre=Ere(class extends Dre{constructor(t){var e;if(super(t),t.type!==Are.ATTRIBUTE||t.name!=="class"||((e=t.strings)==null?void 0:e.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter(e=>t[e]).join(" ")+" "}update(t,[e]){var o,u;if(this.st===void 0){this.st=new Set,t.strings!==void 0&&(this.nt=new Set(t.strings.join(" ").split(/\s/).filter(f=>f!=="")));for(const f in e)e[f]&&!((o=this.nt)!=null&&o.has(f))&&this.st.add(f);return this.render(e)}const r=t.element.classList;for(const f of this.st)f in e||(r.remove(f),this.st.delete(f));for(const f in e){const p=!!e[f];p===this.st.has(f)||(u=this.nt)!=null&&u.has(f)||(p?(r.add(f),this.st.add(f)):(r.remove(f),this.st.delete(f)))}return zp}});/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sG=Symbol("attachableController");let kb;kb=new MutationObserver(t=>{var e;for(const r of t)(e=r.target[sG])==null||e.hostConnected()});class Mre{get htmlFor(){return this.host.getAttribute("for")}set htmlFor(e){e===null?this.host.removeAttribute("for"):this.host.setAttribute("for",e)}get control(){return this.host.hasAttribute("for")?!this.htmlFor||!this.host.isConnected?null:this.host.getRootNode().querySelector(`#${this.htmlFor}`):this.currentControl||this.host.parentElement}set control(e){e?this.attach(e):this.detach()}constructor(e,r){this.host=e,this.onControlChange=r,this.currentControl=null,e.addController(this),e[sG]=this,kb==null||kb.observe(e,{attributeFilter:["for"]})}attach(e){e!==this.currentControl&&(this.setCurrentControl(e),this.host.removeAttribute("for"))}detach(){this.setCurrentControl(null),this.host.setAttribute("for","")}hostConnected(){this.setCurrentControl(this.control)}hostDisconnected(){this.setCurrentControl(null)}setCurrentControl(e){this.onControlChange(this.currentControl,e),this.currentControl=e}}/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ire={STANDARD:"cubic-bezier(0.2, 0, 0, 1)",STANDARD_ACCELERATE:"cubic-bezier(.3,0,1,1)",STANDARD_DECELERATE:"cubic-bezier(0,0,0,1)",EMPHASIZED:"cubic-bezier(.3,0,0,1)",EMPHASIZED_ACCELERATE:"cubic-bezier(.3,0,.8,.15)",EMPHASIZED_DECELERATE:"cubic-bezier(.05,.7,.1,1)"};/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ore=450,A5=225,kre=.2,Lre=10,Rre=75,zre=.35,Nre="::after",Fre="forwards";var rs;(function(t){t[t.INACTIVE=0]="INACTIVE",t[t.TOUCH_DELAY=1]="TOUCH_DELAY",t[t.HOLDING=2]="HOLDING",t[t.WAITING_FOR_CLICK=3]="WAITING_FOR_CLICK"})(rs||(rs={}));const jre=["click","contextmenu","pointercancel","pointerdown","pointerenter","pointerleave","pointerup"],$re=150,GA=window.matchMedia("(forced-colors: active)");class CB extends Ig{constructor(){super(...arguments),this.disabled=!1,this.hovered=!1,this.pressed=!1,this.rippleSize="",this.rippleScale="",this.initialSize=0,this.state=rs.INACTIVE,this.checkBoundsAfterContextMenu=!1,this.attachableController=new Mre(this,this.onControlChange.bind(this))}get htmlFor(){return this.attachableController.htmlFor}set htmlFor(e){this.attachableController.htmlFor=e}get control(){return this.attachableController.control}set control(e){this.attachableController.control=e}attach(e){this.attachableController.attach(e)}detach(){this.attachableController.detach()}connectedCallback(){super.connectedCallback(),this.setAttribute("aria-hidden","true")}render(){const e={hovered:this.hovered,pressed:this.pressed};return vre`<div class="surface ${Pre(e)}"></div>`}update(e){e.has("disabled")&&this.disabled&&(this.hovered=!1,this.pressed=!1),super.update(e)}handlePointerenter(e){this.shouldReactToEvent(e)&&(this.hovered=!0)}handlePointerleave(e){this.shouldReactToEvent(e)&&(this.hovered=!1,this.state!==rs.INACTIVE&&this.endPressAnimation())}handlePointerup(e){if(this.shouldReactToEvent(e)){if(this.state===rs.HOLDING){this.state=rs.WAITING_FOR_CLICK;return}if(this.state===rs.TOUCH_DELAY){this.state=rs.WAITING_FOR_CLICK,this.startPressAnimation(this.rippleStartEvent);return}}}async handlePointerdown(e){if(this.shouldReactToEvent(e)){if(this.rippleStartEvent=e,!this.isTouch(e)){this.state=rs.WAITING_FOR_CLICK,this.startPressAnimation(e);return}this.checkBoundsAfterContextMenu&&!this.inBounds(e)||(this.checkBoundsAfterContextMenu=!1,this.state=rs.TOUCH_DELAY,await new Promise(r=>{setTimeout(r,$re)}),this.state===rs.TOUCH_DELAY&&(this.state=rs.HOLDING,this.startPressAnimation(e)))}}handleClick(){if(!this.disabled){if(this.state===rs.WAITING_FOR_CLICK){this.endPressAnimation();return}this.state===rs.INACTIVE&&(this.startPressAnimation(),this.endPressAnimation())}}handlePointercancel(e){this.shouldReactToEvent(e)&&this.endPressAnimation()}handleContextmenu(){this.disabled||(this.checkBoundsAfterContextMenu=!0,this.endPressAnimation())}determineRippleSize(){const{height:e,width:r}=this.getBoundingClientRect(),o=Math.max(e,r),u=Math.max(zre*o,Rre),f=Math.floor(o*kre),x=Math.sqrt(r**2+e**2)+Lre;this.initialSize=f,this.rippleScale=`${(x+u)/f}`,this.rippleSize=`${f}px`}getNormalizedPointerEventCoords(e){const{scrollX:r,scrollY:o}=window,{left:u,top:f}=this.getBoundingClientRect(),p=r+u,x=o+f,{pageX:s,pageY:w}=e;return{x:s-p,y:w-x}}getTranslationCoordinates(e){const{height:r,width:o}=this.getBoundingClientRect(),u={x:(o-this.initialSize)/2,y:(r-this.initialSize)/2};let f;return e instanceof PointerEvent?f=this.getNormalizedPointerEventCoords(e):f={x:o/2,y:r/2},f={x:f.x-this.initialSize/2,y:f.y-this.initialSize/2},{startPoint:f,endPoint:u}}startPressAnimation(e){var p;if(!this.mdRoot)return;this.pressed=!0,(p=this.growAnimation)==null||p.cancel(),this.determineRippleSize();const{startPoint:r,endPoint:o}=this.getTranslationCoordinates(e),u=`${r.x}px, ${r.y}px`,f=`${o.x}px, ${o.y}px`;this.growAnimation=this.mdRoot.animate({top:[0,0],left:[0,0],height:[this.rippleSize,this.rippleSize],width:[this.rippleSize,this.rippleSize],transform:[`translate(${u}) scale(1)`,`translate(${f}) scale(${this.rippleScale})`]},{pseudoElement:Nre,duration:Ore,easing:Ire.STANDARD,fill:Fre})}async endPressAnimation(){this.rippleStartEvent=void 0,this.state=rs.INACTIVE;const e=this.growAnimation;let r=1/0;if(typeof(e==null?void 0:e.currentTime)=="number"?r=e.currentTime:e!=null&&e.currentTime&&(r=e.currentTime.to("ms").value),r>=A5){this.pressed=!1;return}await new Promise(o=>{setTimeout(o,A5-r)}),this.growAnimation===e&&(this.pressed=!1)}shouldReactToEvent(e){if(this.disabled||!e.isPrimary||this.rippleStartEvent&&this.rippleStartEvent.pointerId!==e.pointerId)return!1;if(e.type==="pointerenter"||e.type==="pointerleave")return!this.isTouch(e);const r=e.buttons===1;return this.isTouch(e)||r}inBounds({x:e,y:r}){const{top:o,left:u,bottom:f,right:p}=this.getBoundingClientRect();return e>=u&&e<=p&&r>=o&&r<=f}isTouch({pointerType:e}){return e==="touch"}async handleEvent(e){if(!(GA!=null&&GA.matches))switch(e.type){case"click":this.handleClick();break;case"contextmenu":this.handleContextmenu();break;case"pointercancel":this.handlePointercancel(e);break;case"pointerdown":await this.handlePointerdown(e);break;case"pointerenter":this.handlePointerenter(e);break;case"pointerleave":this.handlePointerleave(e);break;case"pointerup":this.handlePointerup(e);break}}onControlChange(e,r){for(const o of jre)e==null||e.removeEventListener(o,this),r==null||r.addEventListener(o,this)}}Th([xB({type:Boolean,reflect:!0})],CB.prototype,"disabled",void 0);Th([tG()],CB.prototype,"hovered",void 0);Th([tG()],CB.prototype,"pressed",void 0);Th([mre(".surface")],CB.prototype,"mdRoot",void 0);/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ure=eG`:host{display:flex;margin:auto;pointer-events:none}:host([disabled]){display:none}@media(forced-colors: active){:host{display:none}}:host,.surface{border-radius:inherit;position:absolute;inset:0;overflow:hidden}.surface{-webkit-tap-highlight-color:rgba(0,0,0,0)}.surface::before,.surface::after{content:"";opacity:0;position:absolute}.surface::before{background-color:var(--md-ripple-hover-color, var(--md-sys-color-on-surface, #1d1b20));inset:0;transition:opacity 15ms linear,background-color 15ms linear}.surface::after{background:radial-gradient(closest-side, var(--md-ripple-pressed-color, var(--md-sys-color-on-surface, #1d1b20)) max(100% - 70px, 65%), transparent 100%);transform-origin:center center;transition:opacity 375ms linear}.hovered::before{background-color:var(--md-ripple-hover-color, var(--md-sys-color-on-surface, #1d1b20));opacity:var(--md-ripple-hover-opacity, 0.08)}.pressed::after{opacity:var(--md-ripple-pressed-opacity, 0.12);transition-duration:105ms}
`;/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let BM=class extends CB{};BM.styles=[Ure];BM=Th([J7("md-ripple")],BM);var Vre=Object.defineProperty,Gre=(t,e,r)=>e in t?Vre(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,gu=(t,e,r)=>(Gre(t,typeof e!="symbol"?e+"":e,r),r),lG=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},Vo=(t,e,r)=>(lG(t,e,"read from private field"),r?r.call(t):e.get(t)),Wi=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Xr=(t,e,r)=>(lG(t,e,"access private method"),r),HA,E5,Zm,n0,Ox,WA,ZA,D5,kx,qA,Lx,KA,Rx,XA,i0,zx,lc,rh,YA,P5,qm,o0,Km,a0,JA,M5,QA,eE,I5,tE,O5,Nx,rE,s0,Fx,Xm,l0,u0,jx,Bf,up,Ym,c0,Jm,h0,$x,nE,uc,nh,k5;const uG=t=>Array.isArray(t),cG=t=>uG(t)?t:[t];let Hre=function(t){let e=function(U){return cG(U).forEach(X=>{var Q;return N.set(Symbol((Q=X.char)==null?void 0:Q.innerText),u({...X}))}),this},r=()=>s().filter(U=>U.typeable),o=function(U,X){let Q=[...N.keys()];N.set(Q[U],u(X))},u=U=>(U.shouldPauseCursor=function(){return!!(this.typeable||this.cursorable||this.deletable)},U),f=function(){N.forEach(U=>delete U.done)},p=function(){N=new Map,e(t)},x=()=>N,s=()=>Array.from(N.values()),w=U=>N.delete(U),I=(U=!1)=>U?s():s().filter(X=>!X.done),P=(U,X=!1)=>X?N.delete(U):N.get(U).done=!0,N=new Map;return e(t),{add:e,set:o,wipe:p,done:P,reset:f,destroy:w,getItems:I,getQueue:x,getTypeable:r}};const hG="data-typeit-id",Ap="ti-cursor",Wre="END",Zre={started:!1,completed:!1,frozen:!1,destroyed:!1},Cg={breakLines:!0,cursor:{autoPause:!0,autoPauseDelay:500,animation:{frames:[0,0,1].map(t=>({opacity:t})),options:{iterations:1/0,easing:"steps(2, start)",fill:"forwards"}}},cursorChar:"|",cursorSpeed:1e3,deleteSpeed:null,html:!0,lifeLike:!0,loop:!1,loopDelay:750,nextStringDelay:750,speed:100,startDelay:250,startDelete:!1,strings:[],waitUntilVisible:!1,beforeString:()=>{},afterString:()=>{},beforeStep:()=>{},afterStep:()=>{},afterComplete:()=>{}},qre=`[${hG}]:before {content: '.'; display: inline-block; width: 0; visibility: hidden;}`,Lb=t=>document.createElement(t),p3=t=>document.createTextNode(t),fG=(t,e="")=>{let r=Lb("style");r.id=e,r.appendChild(p3(t)),document.head.appendChild(r)},L5=t=>(uG(t)||(t=[t/2,t/2]),t),R5=(t,e)=>Math.abs(Math.random()*(t+e-(t-e))+(t-e));let z5=t=>t/2;function Kre(t){let{speed:e,deleteSpeed:r,lifeLike:o}=t;return r=r!==null?r:e/3,o?[R5(e,z5(e)),R5(r,z5(r))]:[e,r]}const dG=t=>Array.from(t);let m3=t=>([...t.childNodes].forEach(e=>{if(e.nodeValue){[...e.nodeValue].forEach(r=>{e.parentNode.insertBefore(p3(r),e)}),e.remove();return}m3(e)}),t);const pG=t=>{let e=document.implementation.createHTMLDocument();return e.body.innerHTML=t,m3(e.body)};function mG(t,e=!1,r=!1){let o=t.querySelector(`.${Ap}`),u=document.createTreeWalker(t,NodeFilter.SHOW_ALL,{acceptNode:x=>{var s,w;if(o&&r){if((s=x.classList)!=null&&s.contains(Ap))return NodeFilter.FILTER_ACCEPT;if(o.contains(x))return NodeFilter.FILTER_REJECT}return(w=x.classList)!=null&&w.contains(Ap)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}}),f,p=[];for(;f=u.nextNode();)f.originalParent||(f.originalParent=f.parentNode),p.push(f);return e?p.reverse():p}function Xre(t){return mG(pG(t))}function Yre(t,e=!0){return e?Xre(t):dG(t).map(p3)}const gG=t=>Number.isInteger(t),N5=({queueItems:t,selector:e,cursorPosition:r,to:o})=>{if(gG(e))return e*-1;let u=new RegExp(Wre,"i").test(o),f=e?[...t].reverse().findIndex(({char:x})=>{let s=x.parentElement,w=s.matches(e);return u&&w?!0:w&&s.firstChild.isSameNode(x)}):-1;f<0&&(f=u?0:t.length-1);let p=u?0:1;return f-r+p},Jre=t=>(t.forEach(clearTimeout),[]),Ux=(t,e)=>new Array(e).fill(t);let mC=t=>new Promise(e=>{requestAnimationFrame(async()=>{e(await t())})}),_G=t=>t==null?void 0:t.getAnimations().find(e=>e.id===t.dataset.tiAnimationId),yG=({cursor:t,frames:e,options:r})=>{let o=t.animate(e,r);return o.pause(),o.id=t.dataset.tiAnimationId,mC(()=>{mC(()=>{o.play()})}),o},Qre=({cursor:t,options:e,cursorOptions:r})=>{if(!t||!r)return;let o=_G(t),u;o&&(e.delay=o.effect.getComputedTiming().delay,u=o.currentTime,o.cancel());let f=yG({cursor:t,frames:r.animation.frames,options:e});return u&&(f.currentTime=u),f},F5=t=>{var e;return(e=t.func)==null?void 0:e.call(null)},ene=async({index:t,queueItems:e,wait:r,cursor:o,cursorOptions:u})=>{let f=e[t][1],p=[],x=t,s=f,w=()=>s&&!s.delay,I=f.shouldPauseCursor()&&u.autoPause;for(;w();)p.push(s),w()&&x++,s=e[x]?e[x][1]:null;if(p.length)return await mC(async()=>{for(let U of p)await F5(U)}),x-1;let P=_G(o),N;return P&&(N={...P.effect.getComputedTiming(),delay:I?u.autoPauseDelay:0}),await r(async()=>{P&&I&&P.cancel(),await mC(()=>{F5(f)})},f.delay),await Qre({cursor:o,options:N,cursorOptions:u}),t};const tne=(t,e)=>{new IntersectionObserver((o,u)=>{o.forEach(f=>{f.isIntersecting&&(e(),u.unobserve(t))})},{threshold:1}).observe(t)},rne=()=>Math.random().toString().substring(2,9),gC=t=>"value"in t;let nne=t=>gC(t)?dG(t.value):mG(t,!0).filter(e=>!(e.childNodes.length>0)),Qm=t=>typeof t=="function"?t():t,g3=(t,e=document,r=!1)=>e[`querySelector${r?"All":""}`](t),ine=t=>/body/i.test(t==null?void 0:t.tagName),one=(t,e)=>{if(gC(t)){t.value=`${t.value}${e.textContent}`;return}e.innerHTML="";let r=ine(e.originalParent)?t:e.originalParent||t;r.insertBefore(e,g3("."+Ap,r)||null)};const ane=t=>/<(.+)>(.*?)<\/(.+)>/.test(t.outerHTML),M0=(t,e)=>Object.assign({},t,e);let sne=t=>{var e,r;if(typeof t=="object"){let o={},{frames:u,options:f}=Cg.cursor.animation;return o.animation=t.animation||{},o.animation.frames=((e=t.animation)==null?void 0:e.frames)||u,o.animation.options=M0(f,((r=t.animation)==null?void 0:r.options)||{}),o.autoPause=t.autoPause??Cg.cursor.autoPause,o.autoPauseDelay=t.autoPauseDelay||Cg.cursor.autoPauseDelay,o}return t===!0?Cg.cursor:t};const lne=(t,e)=>{if(!t)return;let r=t.parentNode;(r.childNodes.length>1||r.isSameNode(e)?t:r).remove()},une=(t,e,r)=>{let o=e[r-1],u=g3(`.${Ap}`,t);t=(o==null?void 0:o.parentNode)||t,t.insertBefore(u,o||null)};function cne(t){return typeof t=="string"?g3(t):t}let hne={"font-family":"","font-weight":"","font-size":"","font-style":"","line-height":"",color:"",transform:"translateX(-.125em)"},fne=(t,e)=>{let o=`${`[${hG}='${t}']`} .${Ap}`,u=getComputedStyle(e),f=Object.entries(hne).reduce((p,[x,s])=>`${p} ${x}: var(--ti-cursor-${x}, ${s||u[x]});`,"");fG(`${o} { display: inline-block; width: 0; ${f} }`,t)};function dne(t){return t.replace(/<!--(.+?)-->/g,"").trim().split(/<br(?:\s*?)(?:\/)?>/)}let pne=(t,e,r)=>Math.min(Math.max(e+t,0),r.length),mne=(t,e,r)=>new Promise(o=>{let u=async()=>{await t(),o()};r.push(setTimeout(u,e||0))}),gne=(k5=class{constructor(t,e={}){Wi(this,HA),Wi(this,Zm),Wi(this,Ox),Wi(this,ZA),Wi(this,kx),Wi(this,Lx),Wi(this,Rx),Wi(this,i0),Wi(this,lc),Wi(this,YA),Wi(this,qm),Wi(this,Km),Wi(this,JA),Wi(this,eE),Wi(this,tE),Wi(this,Nx),Wi(this,s0),Wi(this,Xm),Wi(this,u0),Wi(this,Bf),Wi(this,Ym),Wi(this,Jm),Wi(this,$x),Wi(this,uc),gu(this,"element"),gu(this,"timeouts"),gu(this,"cursorPosition"),gu(this,"predictedCursorPosition"),gu(this,"statuses",{started:!1,completed:!1,frozen:!1,destroyed:!1}),gu(this,"opts"),gu(this,"id"),gu(this,"queue"),gu(this,"cursor"),gu(this,"unfreeze",()=>{}),gu(this,"is",function(r){return this.statuses[r]}),Wi(this,QA,r=>{r.cursor=sne(r.cursor??Cg.cursor),this.opts.strings=Xr(this,eE,I5).call(this,cG(this.opts.strings)),this.opts=M0(this.opts,{html:!Vo(this,Jm,h0)&&this.opts.html,nextStringDelay:L5(this.opts.nextStringDelay),loopDelay:L5(this.opts.loopDelay)})}),this.opts=M0(Cg,e),this.element=cne(t),this.timeouts=[],this.cursorPosition=0,this.unfreeze=()=>{},this.predictedCursorPosition=null,this.statuses=M0({},Zre),this.id=rne(),this.queue=Hre([{delay:this.opts.startDelay}]),Vo(this,QA).call(this,e),this.cursor=Xr(this,tE,O5).call(this),this.element.dataset.typeitId=this.id,fG(qre),this.opts.strings.length&&Xr(this,JA,M5).call(this)}go(){return this.statuses.started?this:(Xr(this,Rx,XA).call(this),this.opts.waitUntilVisible?(tne(this.element,Xr(this,Zm,n0).bind(this)),this):(Xr(this,Zm,n0).call(this),this))}destroy(t=!0){this.timeouts=Jre(this.timeouts),Qm(t)&&this.cursor&&Xr(this,u0,jx).call(this,this.cursor),this.statuses.destroyed=!0}reset(t){!this.is("destroyed")&&this.destroy(),t?(this.queue.wipe(),t(this)):this.queue.reset(),this.cursorPosition=0;for(let e in this.statuses)this.statuses[e]=!1;return this.element[Xr(this,i0,zx).call(this)?"value":"innerHTML"]="",this}type(t,e={}){t=Qm(t);let{instant:r}=e,o=Xr(this,qm,o0).call(this,e),f=Yre(t,this.opts.html).map(x=>({func:()=>Xr(this,s0,Fx).call(this,x),char:x,delay:r||ane(x)?0:Xr(this,Bf,up).call(this),typeable:x.nodeType===Node.TEXT_NODE})),p=[o[0],{func:async()=>await this.opts.beforeString(t,this)},...f,{func:async()=>await this.opts.afterString(t,this)},o[1]];return Xr(this,lc,rh).call(this,p,e)}break(t={}){return Xr(this,lc,rh).call(this,{func:()=>Xr(this,s0,Fx).call(this,Lb("BR")),typeable:!0},t)}move(t,e={}){t=Qm(t);let r=Xr(this,qm,o0).call(this,e),{instant:o,to:u}=e,f=N5({queueItems:this.queue.getTypeable(),selector:t===null?"":t,to:u,cursorPosition:Vo(this,Ym,c0)}),p=f<0?-1:1;return this.predictedCursorPosition=Vo(this,Ym,c0)+f,Xr(this,lc,rh).call(this,[r[0],...Ux({func:()=>Xr(this,Ox,WA).call(this,p),delay:o?0:Xr(this,Bf,up).call(this),cursorable:!0},Math.abs(f)),r[1]],e)}exec(t,e={}){let r=Xr(this,qm,o0).call(this,e);return Xr(this,lc,rh).call(this,[r[0],{func:()=>t(this)},r[1]],e)}options(t,e={}){return t=Qm(t),Xr(this,Km,a0).call(this,t),Xr(this,lc,rh).call(this,{},e)}pause(t,e={}){return Xr(this,lc,rh).call(this,{delay:Qm(t)},e)}delete(t=null,e={}){t=Qm(t);let r=Xr(this,qm,o0).call(this,e),o=t,{instant:u,to:f}=e,p=this.queue.getTypeable(),x=o===null?p.length:gG(o)?o:N5({queueItems:p,selector:o,cursorPosition:Vo(this,Ym,c0),to:f});return Xr(this,lc,rh).call(this,[r[0],...Ux({func:Xr(this,Xm,l0).bind(this),delay:u?0:Xr(this,Bf,up).call(this,1),deletable:!0},x),r[1]],e)}freeze(){this.statuses.frozen=!0}flush(t=()=>{}){return Xr(this,Rx,XA).call(this),Xr(this,Zm,n0).call(this,!1).then(t),this}getQueue(){return this.queue}getOptions(){return this.opts}updateOptions(t){return Xr(this,Km,a0).call(this,t)}getElement(){return this.element}empty(t={}){return Xr(this,lc,rh).call(this,{func:Xr(this,HA,E5).bind(this)},t)}},HA=new WeakSet,E5=async function(){if(Xr(this,i0,zx).call(this)){this.element.value="";return}Vo(this,uc,nh).forEach(Xr(this,u0,jx).bind(this))},Zm=new WeakSet,n0=async function(t=!0){this.statuses.started=!0;let e=r=>{this.queue.done(r,!t)};try{let r=[...this.queue.getQueue()];for(let u=0;u<r.length;u++){let[f,p]=r[u];if(!p.done){if(!p.deletable||p.deletable&&Vo(this,uc,nh).length){let x=await Xr(this,kx,qA).call(this,u,r);Array(x-u).fill(u+1).map((s,w)=>s+w).forEach(s=>{let[w]=r[s];e(w)}),u=x}e(f)}}if(!t)return this;if(this.statuses.completed=!0,await this.opts.afterComplete(this),!this.opts.loop)throw"";let o=this.opts.loopDelay;Xr(this,Lx,KA).call(this,async()=>{await Xr(this,ZA,D5).call(this,o[0]),Xr(this,Zm,n0).call(this)},o[1])}catch{}return this},Ox=new WeakSet,WA=async function(t){this.cursorPosition=pne(t,this.cursorPosition,Vo(this,uc,nh)),une(this.element,Vo(this,uc,nh),this.cursorPosition)},ZA=new WeakSet,D5=async function(t){let e=Vo(this,Ym,c0);e&&await Xr(this,Ox,WA).call(this,{value:e});let r=Vo(this,uc,nh).map(o=>[Symbol(),{func:Xr(this,Xm,l0).bind(this),delay:Xr(this,Bf,up).call(this,1),deletable:!0,shouldPauseCursor:()=>!0}]);for(let o=0;o<r.length;o++)await Xr(this,kx,qA).call(this,o,r);this.queue.reset(),this.queue.set(0,{delay:t})},kx=new WeakSet,qA=function(t,e){return ene({index:t,queueItems:e,wait:Xr(this,Lx,KA).bind(this),cursor:this.cursor,cursorOptions:this.opts.cursor})},Lx=new WeakSet,KA=async function(t,e,r=!1){this.statuses.frozen&&await new Promise(o=>{this.unfreeze=()=>{this.statuses.frozen=!1,o()}}),r||await this.opts.beforeStep(this),await mne(t,e,this.timeouts),r||await this.opts.afterStep(this)},Rx=new WeakSet,XA=async function(){if(!Xr(this,i0,zx).call(this)&&this.cursor&&this.element.appendChild(this.cursor),Vo(this,$x,nE)){fne(this.id,this.element),this.cursor.dataset.tiAnimationId=this.id;let{animation:t}=this.opts.cursor,{frames:e,options:r}=t;yG({frames:e,cursor:this.cursor,options:{duration:this.opts.cursorSpeed,...r}})}},i0=new WeakSet,zx=function(){return gC(this.element)},lc=new WeakSet,rh=function(t,e){return this.queue.add(t),Xr(this,YA,P5).call(this,e),this},YA=new WeakSet,P5=function(t={}){let e=t.delay;e&&this.queue.add({delay:e})},qm=new WeakSet,o0=function(t={}){return[{func:()=>Xr(this,Km,a0).call(this,t)},{func:()=>Xr(this,Km,a0).call(this,this.opts)}]},Km=new WeakSet,a0=async function(t){this.opts=M0(this.opts,t)},JA=new WeakSet,M5=function(){let t=this.opts.strings.filter(e=>!!e);t.forEach((e,r)=>{if(this.type(e),r+1===t.length)return;let o=this.opts.breakLines?[{func:()=>Xr(this,s0,Fx).call(this,Lb("BR")),typeable:!0}]:Ux({func:Xr(this,Xm,l0).bind(this),delay:Xr(this,Bf,up).call(this,1)},this.queue.getTypeable().length);Xr(this,Nx,rE).call(this,o)})},QA=new WeakMap,eE=new WeakSet,I5=function(t){let e=this.element.innerHTML;return e?(this.element.innerHTML="",this.opts.startDelete?(this.element.innerHTML=e,m3(this.element),Xr(this,Nx,rE).call(this,Ux({func:Xr(this,Xm,l0).bind(this),delay:Xr(this,Bf,up).call(this,1),deletable:!0},Vo(this,uc,nh).length)),t):dne(e).concat(t)):t},tE=new WeakSet,O5=function(){if(Vo(this,Jm,h0))return null;let t=Lb("span");return t.className=Ap,Vo(this,$x,nE)?(t.innerHTML=pG(this.opts.cursorChar).innerHTML,t):(t.style.visibility="hidden",t)},Nx=new WeakSet,rE=function(t){let e=this.opts.nextStringDelay;this.queue.add([{delay:e[0]},...t,{delay:e[1]}])},s0=new WeakSet,Fx=function(t){one(this.element,t)},Xm=new WeakSet,l0=function(){Vo(this,uc,nh).length&&(Vo(this,Jm,h0)?this.element.value=this.element.value.slice(0,-1):Xr(this,u0,jx).call(this,Vo(this,uc,nh)[this.cursorPosition]))},u0=new WeakSet,jx=function(t){lne(t,this.element)},Bf=new WeakSet,up=function(t=0){return Kre(this.opts)[t]},Ym=new WeakSet,c0=function(){return this.predictedCursorPosition??this.cursorPosition},Jm=new WeakSet,h0=function(){return gC(this.element)},$x=new WeakSet,nE=function(){return!!this.opts.cursor&&!Vo(this,Jm,h0)},uc=new WeakSet,nh=function(){return nne(this.element)},k5);const _ne=Te.forwardRef((t,e)=>{const{as:r}=t;return Ue.createElement(r,{ref:e,...t})}),yne={},vne=({as:t="span",options:e=yne,children:r=null,getBeforeInit:o=p=>p,getAfterInit:u=p=>p,...f})=>{const p=Te.useRef(null),x=Te.useRef(null),[s,w]=Te.useState(!0),[I,P]=Te.useState(null);function N(){const X=Object.assign({},e);r&&p.current&&(X.strings=p.current.innerHTML),P(X)}function U(){x.current=new gne(p.current,I),x.current=o(x.current),x.current.go(),x.current=u(x.current)}return Te.useEffect(()=>{N(),w(!1)},[e]),Te.useEffect(()=>{var X;I&&((X=x.current)!=null&&X.updateOptions(I)||U())},[I]),Te.useEffect(()=>()=>{var X;return(X=x.current)==null?void 0:X.destroy()},[]),Ue.createElement(_ne,{ref:p,as:t,children:s?r:null,style:{opacity:s?0:1},...f})},Bne={},xne=Object.freeze(Object.defineProperty({__proto__:null,default:Bne},Symbol.toStringTag,{value:"Module"})),Vl=AV(xne),wB=Te.createContext({fullAddress:"",latitude:"",longitude:""}),_3=Te.createContext({latitude:"",longitude:"",active:!1}),y3=Te.createContext([]),v3=Te.createContext();function bne({item:t,handleSelectedLocation:e}){return Ie.jsxs("div",{className:"search-item title-medium row al-ctr gp-16",style:{fontWeight:400},onClick:()=>e(t.id),children:[Ie.jsx("span",{className:"material-symbols-rounded search-icon",children:"near_me"}),t.properties.full_address]})}function Cne(){const[t,e]=Te.useState(""),[r,o]=Te.useState(!1),[u,f]=Te.useState([]);Te.useState(!1);const[p,x]=Te.useContext(wB),[s,w]=Te.useContext(_3);function I(){navigator.geolocation?navigator.geolocation.getCurrentPosition(N):alert("Geolocation is not supported by this browser.")}const P={country:"nz",limit:2,accessToken:"pk.eyJ1IjoibnJhc3RvZ2kiLCJhIjoiY2xweHRkbHU4MGRnZTJpc3Vkd2g5Znp2ZSJ9.DXCXHf-XnGSGVhvjz0mpNg"};Te.useEffect(()=>{new AbortController,fetch(`https://api.mapbox.com/search/geocode/v6/forward?q=${t}&country=${P.country}&limit=${P.limit}&access_token=${P.accessToken}`,{method:"GET",mode:"cors"}).then(J=>J.json()).then(J=>{f(J.features)}).catch(J=>console.log(J))},[P.accessToken,P.country,P.limit,t]);function N(J){w({latitude:J.coords.latitude,longitude:J.coords.longitude})}function U(J){J.target.value===""?(f([]),o(!1)):o(!0),e(J.target.value)}function X(J){u.map(Z=>{Z.id===J&&(x({fullAddress:Z.properties.full_address,latitude:Z.geometry.coordinates[1],longitude:Z.geometry.coordinates[0]}),o(!1))})}Te.useEffect(()=>{p.fullAddress&&e(p.fullAddress)},[p.fullAddress]);const Q=c3();return Ie.jsx(Ie.Fragment,{children:Ie.jsxs("div",{className:"body-container home-page col al-ctr",children:[Ie.jsx("div",{className:"image-overlay"}),Ie.jsx("div",{className:"image-container"}),Ie.jsxs("div",{className:"content col al-ctr gp-16",children:[Ie.jsx("div",{className:"headline-container col al-ctr",children:Ie.jsx(vne,{as:"h1",options:{speed:100},children:"SHOULD I DRINK?"})}),Ie.jsxs("div",{className:"search-bar-container row jc-ctr",children:[Ie.jsxs("div",{className:"search-bar-div col al-str",children:[Ie.jsxs("div",{className:"elements row al-ctr",children:[Ie.jsx("span",{className:"material-symbols-rounded search-icon",children:"search"}),Ie.jsx("input",{type:"text",placeholder:"Search for a location",onChange:J=>{U(J)},value:t}),Ie.jsx("div",{className:"location-icon-container row al-ctr jc-ctr",onClick:I,children:Ie.jsx("span",{className:"material-symbols-rounded location-icon",children:"location_pin"})})]}),Ie.jsx("div",{className:"divider"}),Ie.jsx("div",{className:`home-page-srch-results col ${r?"open":""}`,children:u.map(J=>Ie.jsxs(Ie.Fragment,{children:[Ie.jsx(bne,{item:J,handleSelectedLocation:X},J.id),Ie.jsx("div",{className:"divider"})]}))})]}),Ie.jsxs("div",{className:"search-button-div row al-ctr jc-ctr gp-12",onClick:()=>Q("/map"),children:[Ie.jsx("md-ripple",{}),Ie.jsx("span",{className:"material-symbols-rounded arrow-icon",children:"arrow_forward"}),Ie.jsx("span",{className:"title-medium hide",children:"Search"})]})]})]})]})})}/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Nw extends Ig{constructor(){super(...arguments),this.inset=!1,this.insetStart=!1,this.insetEnd=!1}}Th([xB({type:Boolean,reflect:!0})],Nw.prototype,"inset",void 0);Th([xB({type:Boolean,reflect:!0,attribute:"inset-start"})],Nw.prototype,"insetStart",void 0);Th([xB({type:Boolean,reflect:!0,attribute:"inset-end"})],Nw.prototype,"insetEnd",void 0);/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wne=eG`:host{box-sizing:border-box;color:var(--md-divider-color, var(--md-sys-color-outline-variant, #cac4d0));display:flex;height:var(--md-divider-thickness, 1px);width:100%}:host([inset]),:host([inset-start]){padding-inline-start:16px}:host([inset]),:host([inset-end]){padding-inline-end:16px}:host::before{background:currentColor;content:"";height:100%;width:100%}@media(forced-colors: active){:host::before{background:CanvasText}}
`;/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let xM=class extends Nw{};xM.styles=[wne];xM=Th([J7("md-divider")],xM);const vG=Te.forwardRef(function(e,r){return Ie.jsx("div",{className:"mp-srch-container",style:{minWidth:e.width},children:Ie.jsxs("div",{className:"mp-srch-wrapper col",children:[Ie.jsxs("div",{className:"search-bar-elements row al-ctr",children:[Ie.jsx("input",{ref:r,type:"text",placeholder:e.placeholder,onChange:o=>{e.handleSearch(o)},value:e.value}),Ie.jsx("span",{className:"material-symbols-rounded clear-search",onClick:e.clearSearch,children:"close"})]}),Ie.jsx("div",{className:`search-results col ${e.isSearchResultsVisible?"open":""}`,children:e.children})]})})});var j5={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(r,o){o(e)})(cg,function(r){var o="1.9.4";function u(v){var A,R,W,oe;for(R=1,W=arguments.length;R<W;R++){oe=arguments[R];for(A in oe)v[A]=oe[A]}return v}var f=Object.create||function(){function v(){}return function(A){return v.prototype=A,new v}}();function p(v,A){var R=Array.prototype.slice;if(v.bind)return v.bind.apply(v,R.call(arguments,1));var W=R.call(arguments,2);return function(){return v.apply(A,W.length?W.concat(R.call(arguments)):arguments)}}var x=0;function s(v){return"_leaflet_id"in v||(v._leaflet_id=++x),v._leaflet_id}function w(v,A,R){var W,oe,Be,$e;return $e=function(){W=!1,oe&&(Be.apply(R,oe),oe=!1)},Be=function(){W?oe=arguments:(v.apply(R,arguments),setTimeout($e,A),W=!0)},Be}function I(v,A,R){var W=A[1],oe=A[0],Be=W-oe;return v===W&&R?v:((v-oe)%Be+Be)%Be+oe}function P(){return!1}function N(v,A){if(A===!1)return v;var R=Math.pow(10,A===void 0?6:A);return Math.round(v*R)/R}function U(v){return v.trim?v.trim():v.replace(/^\s+|\s+$/g,"")}function X(v){return U(v).split(/\s+/)}function Q(v,A){Object.prototype.hasOwnProperty.call(v,"options")||(v.options=v.options?f(v.options):{});for(var R in A)v.options[R]=A[R];return v.options}function J(v,A,R){var W=[];for(var oe in v)W.push(encodeURIComponent(R?oe.toUpperCase():oe)+"="+encodeURIComponent(v[oe]));return(!A||A.indexOf("?")===-1?"?":"&")+W.join("&")}var Z=/\{ *([\w_ -]+) *\}/g;function H(v,A){return v.replace(Z,function(R,W){var oe=A[W];if(oe===void 0)throw new Error("No value provided for variable "+R);return typeof oe=="function"&&(oe=oe(A)),oe})}var K=Array.isArray||function(v){return Object.prototype.toString.call(v)==="[object Array]"};function ee(v,A){for(var R=0;R<v.length;R++)if(v[R]===A)return R;return-1}var se="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function me(v){return window["webkit"+v]||window["moz"+v]||window["ms"+v]}var Ce=0;function Ae(v){var A=+new Date,R=Math.max(0,16-(A-Ce));return Ce=A+R,window.setTimeout(v,R)}var De=window.requestAnimationFrame||me("RequestAnimationFrame")||Ae,qe=window.cancelAnimationFrame||me("CancelAnimationFrame")||me("CancelRequestAnimationFrame")||function(v){window.clearTimeout(v)};function je(v,A,R){if(R&&De===Ae)v.call(A);else return De.call(window,p(v,A))}function Oe(v){v&&qe.call(window,v)}var ct={__proto__:null,extend:u,create:f,bind:p,get lastId(){return x},stamp:s,throttle:w,wrapNum:I,falseFn:P,formatNum:N,trim:U,splitWords:X,setOptions:Q,getParamString:J,template:H,isArray:K,indexOf:ee,emptyImageUrl:se,requestFn:De,cancelFn:qe,requestAnimFrame:je,cancelAnimFrame:Oe};function ht(){}ht.extend=function(v){var A=function(){Q(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},R=A.__super__=this.prototype,W=f(R);W.constructor=A,A.prototype=W;for(var oe in this)Object.prototype.hasOwnProperty.call(this,oe)&&oe!=="prototype"&&oe!=="__super__"&&(A[oe]=this[oe]);return v.statics&&u(A,v.statics),v.includes&&(We(v.includes),u.apply(null,[W].concat(v.includes))),u(W,v),delete W.statics,delete W.includes,W.options&&(W.options=R.options?f(R.options):{},u(W.options,v.options)),W._initHooks=[],W.callInitHooks=function(){if(!this._initHooksCalled){R.callInitHooks&&R.callInitHooks.call(this),this._initHooksCalled=!0;for(var Be=0,$e=W._initHooks.length;Be<$e;Be++)W._initHooks[Be].call(this)}},A},ht.include=function(v){var A=this.prototype.options;return u(this.prototype,v),v.options&&(this.prototype.options=A,this.mergeOptions(v.options)),this},ht.mergeOptions=function(v){return u(this.prototype.options,v),this},ht.addInitHook=function(v){var A=Array.prototype.slice.call(arguments,1),R=typeof v=="function"?v:function(){this[v].apply(this,A)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(R),this};function We(v){if(!(typeof L>"u"||!L||!L.Mixin)){v=K(v)?v:[v];for(var A=0;A<v.length;A++)v[A]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Je={on:function(v,A,R){if(typeof v=="object")for(var W in v)this._on(W,v[W],A);else{v=X(v);for(var oe=0,Be=v.length;oe<Be;oe++)this._on(v[oe],A,R)}return this},off:function(v,A,R){if(!arguments.length)delete this._events;else if(typeof v=="object")for(var W in v)this._off(W,v[W],A);else{v=X(v);for(var oe=arguments.length===1,Be=0,$e=v.length;Be<$e;Be++)oe?this._off(v[Be]):this._off(v[Be],A,R)}return this},_on:function(v,A,R,W){if(typeof A!="function"){console.warn("wrong listener type: "+typeof A);return}if(this._listens(v,A,R)===!1){R===this&&(R=void 0);var oe={fn:A,ctx:R};W&&(oe.once=!0),this._events=this._events||{},this._events[v]=this._events[v]||[],this._events[v].push(oe)}},_off:function(v,A,R){var W,oe,Be;if(this._events&&(W=this._events[v],!!W)){if(arguments.length===1){if(this._firingCount)for(oe=0,Be=W.length;oe<Be;oe++)W[oe].fn=P;delete this._events[v];return}if(typeof A!="function"){console.warn("wrong listener type: "+typeof A);return}var $e=this._listens(v,A,R);if($e!==!1){var ot=W[$e];this._firingCount&&(ot.fn=P,this._events[v]=W=W.slice()),W.splice($e,1)}}},fire:function(v,A,R){if(!this.listens(v,R))return this;var W=u({},A,{type:v,target:this,sourceTarget:A&&A.sourceTarget||this});if(this._events){var oe=this._events[v];if(oe){this._firingCount=this._firingCount+1||1;for(var Be=0,$e=oe.length;Be<$e;Be++){var ot=oe[Be],_t=ot.fn;ot.once&&this.off(v,_t,ot.ctx),_t.call(ot.ctx||this,W)}this._firingCount--}}return R&&this._propagateEvent(W),this},listens:function(v,A,R,W){typeof v!="string"&&console.warn('"string" type argument expected');var oe=A;typeof A!="function"&&(W=!!A,oe=void 0,R=void 0);var Be=this._events&&this._events[v];if(Be&&Be.length&&this._listens(v,oe,R)!==!1)return!0;if(W){for(var $e in this._eventParents)if(this._eventParents[$e].listens(v,A,R,W))return!0}return!1},_listens:function(v,A,R){if(!this._events)return!1;var W=this._events[v]||[];if(!A)return!!W.length;R===this&&(R=void 0);for(var oe=0,Be=W.length;oe<Be;oe++)if(W[oe].fn===A&&W[oe].ctx===R)return oe;return!1},once:function(v,A,R){if(typeof v=="object")for(var W in v)this._on(W,v[W],A,!0);else{v=X(v);for(var oe=0,Be=v.length;oe<Be;oe++)this._on(v[oe],A,R,!0)}return this},addEventParent:function(v){return this._eventParents=this._eventParents||{},this._eventParents[s(v)]=v,this},removeEventParent:function(v){return this._eventParents&&delete this._eventParents[s(v)],this},_propagateEvent:function(v){for(var A in this._eventParents)this._eventParents[A].fire(v.type,u({layer:v.target,propagatedFrom:v.target},v),!0)}};Je.addEventListener=Je.on,Je.removeEventListener=Je.clearAllEventListeners=Je.off,Je.addOneTimeEventListener=Je.once,Je.fireEvent=Je.fire,Je.hasEventListeners=Je.listens;var St=ht.extend(Je);function Le(v,A,R){this.x=R?Math.round(v):v,this.y=R?Math.round(A):A}var Nt=Math.trunc||function(v){return v>0?Math.floor(v):Math.ceil(v)};Le.prototype={clone:function(){return new Le(this.x,this.y)},add:function(v){return this.clone()._add(xt(v))},_add:function(v){return this.x+=v.x,this.y+=v.y,this},subtract:function(v){return this.clone()._subtract(xt(v))},_subtract:function(v){return this.x-=v.x,this.y-=v.y,this},divideBy:function(v){return this.clone()._divideBy(v)},_divideBy:function(v){return this.x/=v,this.y/=v,this},multiplyBy:function(v){return this.clone()._multiplyBy(v)},_multiplyBy:function(v){return this.x*=v,this.y*=v,this},scaleBy:function(v){return new Le(this.x*v.x,this.y*v.y)},unscaleBy:function(v){return new Le(this.x/v.x,this.y/v.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Nt(this.x),this.y=Nt(this.y),this},distanceTo:function(v){v=xt(v);var A=v.x-this.x,R=v.y-this.y;return Math.sqrt(A*A+R*R)},equals:function(v){return v=xt(v),v.x===this.x&&v.y===this.y},contains:function(v){return v=xt(v),Math.abs(v.x)<=Math.abs(this.x)&&Math.abs(v.y)<=Math.abs(this.y)},toString:function(){return"Point("+N(this.x)+", "+N(this.y)+")"}};function xt(v,A,R){return v instanceof Le?v:K(v)?new Le(v[0],v[1]):v==null?v:typeof v=="object"&&"x"in v&&"y"in v?new Le(v.x,v.y):new Le(v,A,R)}function $t(v,A){if(v)for(var R=A?[v,A]:v,W=0,oe=R.length;W<oe;W++)this.extend(R[W])}$t.prototype={extend:function(v){var A,R;if(!v)return this;if(v instanceof Le||typeof v[0]=="number"||"x"in v)A=R=xt(v);else if(v=Wt(v),A=v.min,R=v.max,!A||!R)return this;return!this.min&&!this.max?(this.min=A.clone(),this.max=R.clone()):(this.min.x=Math.min(A.x,this.min.x),this.max.x=Math.max(R.x,this.max.x),this.min.y=Math.min(A.y,this.min.y),this.max.y=Math.max(R.y,this.max.y)),this},getCenter:function(v){return xt((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,v)},getBottomLeft:function(){return xt(this.min.x,this.max.y)},getTopRight:function(){return xt(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(v){var A,R;return typeof v[0]=="number"||v instanceof Le?v=xt(v):v=Wt(v),v instanceof $t?(A=v.min,R=v.max):A=R=v,A.x>=this.min.x&&R.x<=this.max.x&&A.y>=this.min.y&&R.y<=this.max.y},intersects:function(v){v=Wt(v);var A=this.min,R=this.max,W=v.min,oe=v.max,Be=oe.x>=A.x&&W.x<=R.x,$e=oe.y>=A.y&&W.y<=R.y;return Be&&$e},overlaps:function(v){v=Wt(v);var A=this.min,R=this.max,W=v.min,oe=v.max,Be=oe.x>A.x&&W.x<R.x,$e=oe.y>A.y&&W.y<R.y;return Be&&$e},isValid:function(){return!!(this.min&&this.max)},pad:function(v){var A=this.min,R=this.max,W=Math.abs(A.x-R.x)*v,oe=Math.abs(A.y-R.y)*v;return Wt(xt(A.x-W,A.y-oe),xt(R.x+W,R.y+oe))},equals:function(v){return v?(v=Wt(v),this.min.equals(v.getTopLeft())&&this.max.equals(v.getBottomRight())):!1}};function Wt(v,A){return!v||v instanceof $t?v:new $t(v,A)}function Tr(v,A){if(v)for(var R=A?[v,A]:v,W=0,oe=R.length;W<oe;W++)this.extend(R[W])}Tr.prototype={extend:function(v){var A=this._southWest,R=this._northEast,W,oe;if(v instanceof Wr)W=v,oe=v;else if(v instanceof Tr){if(W=v._southWest,oe=v._northEast,!W||!oe)return this}else return v?this.extend(zr(v)||Hr(v)):this;return!A&&!R?(this._southWest=new Wr(W.lat,W.lng),this._northEast=new Wr(oe.lat,oe.lng)):(A.lat=Math.min(W.lat,A.lat),A.lng=Math.min(W.lng,A.lng),R.lat=Math.max(oe.lat,R.lat),R.lng=Math.max(oe.lng,R.lng)),this},pad:function(v){var A=this._southWest,R=this._northEast,W=Math.abs(A.lat-R.lat)*v,oe=Math.abs(A.lng-R.lng)*v;return new Tr(new Wr(A.lat-W,A.lng-oe),new Wr(R.lat+W,R.lng+oe))},getCenter:function(){return new Wr((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Wr(this.getNorth(),this.getWest())},getSouthEast:function(){return new Wr(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(v){typeof v[0]=="number"||v instanceof Wr||"lat"in v?v=zr(v):v=Hr(v);var A=this._southWest,R=this._northEast,W,oe;return v instanceof Tr?(W=v.getSouthWest(),oe=v.getNorthEast()):W=oe=v,W.lat>=A.lat&&oe.lat<=R.lat&&W.lng>=A.lng&&oe.lng<=R.lng},intersects:function(v){v=Hr(v);var A=this._southWest,R=this._northEast,W=v.getSouthWest(),oe=v.getNorthEast(),Be=oe.lat>=A.lat&&W.lat<=R.lat,$e=oe.lng>=A.lng&&W.lng<=R.lng;return Be&&$e},overlaps:function(v){v=Hr(v);var A=this._southWest,R=this._northEast,W=v.getSouthWest(),oe=v.getNorthEast(),Be=oe.lat>A.lat&&W.lat<R.lat,$e=oe.lng>A.lng&&W.lng<R.lng;return Be&&$e},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(v,A){return v?(v=Hr(v),this._southWest.equals(v.getSouthWest(),A)&&this._northEast.equals(v.getNorthEast(),A)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Hr(v,A){return v instanceof Tr?v:new Tr(v,A)}function Wr(v,A,R){if(isNaN(v)||isNaN(A))throw new Error("Invalid LatLng object: ("+v+", "+A+")");this.lat=+v,this.lng=+A,R!==void 0&&(this.alt=+R)}Wr.prototype={equals:function(v,A){if(!v)return!1;v=zr(v);var R=Math.max(Math.abs(this.lat-v.lat),Math.abs(this.lng-v.lng));return R<=(A===void 0?1e-9:A)},toString:function(v){return"LatLng("+N(this.lat,v)+", "+N(this.lng,v)+")"},distanceTo:function(v){return Ti.distance(this,zr(v))},wrap:function(){return Ti.wrapLatLng(this)},toBounds:function(v){var A=180*v/40075017,R=A/Math.cos(Math.PI/180*this.lat);return Hr([this.lat-A,this.lng-R],[this.lat+A,this.lng+R])},clone:function(){return new Wr(this.lat,this.lng,this.alt)}};function zr(v,A,R){return v instanceof Wr?v:K(v)&&typeof v[0]!="object"?v.length===3?new Wr(v[0],v[1],v[2]):v.length===2?new Wr(v[0],v[1]):null:v==null?v:typeof v=="object"&&"lat"in v?new Wr(v.lat,"lng"in v?v.lng:v.lon,v.alt):A===void 0?null:new Wr(v,A,R)}var jn={latLngToPoint:function(v,A){var R=this.projection.project(v),W=this.scale(A);return this.transformation._transform(R,W)},pointToLatLng:function(v,A){var R=this.scale(A),W=this.transformation.untransform(v,R);return this.projection.unproject(W)},project:function(v){return this.projection.project(v)},unproject:function(v){return this.projection.unproject(v)},scale:function(v){return 256*Math.pow(2,v)},zoom:function(v){return Math.log(v/256)/Math.LN2},getProjectedBounds:function(v){if(this.infinite)return null;var A=this.projection.bounds,R=this.scale(v),W=this.transformation.transform(A.min,R),oe=this.transformation.transform(A.max,R);return new $t(W,oe)},infinite:!1,wrapLatLng:function(v){var A=this.wrapLng?I(v.lng,this.wrapLng,!0):v.lng,R=this.wrapLat?I(v.lat,this.wrapLat,!0):v.lat,W=v.alt;return new Wr(R,A,W)},wrapLatLngBounds:function(v){var A=v.getCenter(),R=this.wrapLatLng(A),W=A.lat-R.lat,oe=A.lng-R.lng;if(W===0&&oe===0)return v;var Be=v.getSouthWest(),$e=v.getNorthEast(),ot=new Wr(Be.lat-W,Be.lng-oe),_t=new Wr($e.lat-W,$e.lng-oe);return new Tr(ot,_t)}},Ti=u({},jn,{wrapLng:[-180,180],R:6371e3,distance:function(v,A){var R=Math.PI/180,W=v.lat*R,oe=A.lat*R,Be=Math.sin((A.lat-v.lat)*R/2),$e=Math.sin((A.lng-v.lng)*R/2),ot=Be*Be+Math.cos(W)*Math.cos(oe)*$e*$e,_t=2*Math.atan2(Math.sqrt(ot),Math.sqrt(1-ot));return this.R*_t}}),ur=6378137,br={R:ur,MAX_LATITUDE:85.0511287798,project:function(v){var A=Math.PI/180,R=this.MAX_LATITUDE,W=Math.max(Math.min(R,v.lat),-R),oe=Math.sin(W*A);return new Le(this.R*v.lng*A,this.R*Math.log((1+oe)/(1-oe))/2)},unproject:function(v){var A=180/Math.PI;return new Wr((2*Math.atan(Math.exp(v.y/this.R))-Math.PI/2)*A,v.x*A/this.R)},bounds:function(){var v=ur*Math.PI;return new $t([-v,-v],[v,v])}()};function Ur(v,A,R,W){if(K(v)){this._a=v[0],this._b=v[1],this._c=v[2],this._d=v[3];return}this._a=v,this._b=A,this._c=R,this._d=W}Ur.prototype={transform:function(v,A){return this._transform(v.clone(),A)},_transform:function(v,A){return A=A||1,v.x=A*(this._a*v.x+this._b),v.y=A*(this._c*v.y+this._d),v},untransform:function(v,A){return A=A||1,new Le((v.x/A-this._b)/this._a,(v.y/A-this._d)/this._c)}};function kt(v,A,R,W){return new Ur(v,A,R,W)}var ii=u({},Ti,{code:"EPSG:3857",projection:br,transformation:function(){var v=.5/(Math.PI*br.R);return kt(v,.5,-v,.5)}()}),Er=u({},ii,{code:"EPSG:900913"});function $n(v){return document.createElementNS("http://www.w3.org/2000/svg",v)}function ei(v,A){var R="",W,oe,Be,$e,ot,_t;for(W=0,Be=v.length;W<Be;W++){for(ot=v[W],oe=0,$e=ot.length;oe<$e;oe++)_t=ot[oe],R+=(oe?"L":"M")+_t.x+" "+_t.y;R+=A?Qe.svg?"z":"x":""}return R||"M0 0"}var vi=document.documentElement.style,Mi="ActiveXObject"in window,Sa=Mi&&!document.addEventListener,Wn="msLaunchUri"in navigator&&!("documentMode"in document),Eo=at("webkit"),Wa=at("android"),Do=at("android 2")||at("android 3"),Ta=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ll=Wa&&at("Google")&&Ta<537&&!("AudioNode"in window),dt=!!window.opera,pe=!Wn&&at("chrome"),we=at("gecko")&&!Eo&&!dt&&!Mi,ze=!pe&&at("safari"),ut=at("phantom"),gt="OTransition"in vi,Tt=navigator.platform.indexOf("Win")===0,Xt=Mi&&"transition"in vi,ft="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Do,Qt="MozPerspective"in vi,qt=!window.L_DISABLE_3D&&(Xt||ft||Qt)&&!gt&&!ut,er=typeof orientation<"u"||at("mobile"),Vr=er&&Eo,Rn=er&&ft,Kn=!window.PointerEvent&&window.MSPointerEvent,In=!!(window.PointerEvent||Kn),vn="ontouchstart"in window||!!window.TouchEvent,Bn=!window.L_NO_TOUCH&&(vn||In),Pn=er&&dt,Zn=er&&we,Qi=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Xn=function(){var v=!1;try{var A=Object.defineProperty({},"passive",{get:function(){v=!0}});window.addEventListener("testPassiveEventSupport",P,A),window.removeEventListener("testPassiveEventSupport",P,A)}catch{}return v}(),zo=function(){return!!document.createElement("canvas").getContext}(),co=!!(document.createElementNS&&$n("svg").createSVGRect),Xo=!!co&&function(){var v=document.createElement("div");return v.innerHTML="<svg/>",(v.firstChild&&v.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),zi=!co&&function(){try{var v=document.createElement("div");v.innerHTML='<v:shape adj="1"/>';var A=v.firstChild;return A.style.behavior="url(#default#VML)",A&&typeof A.adj=="object"}catch{return!1}}(),Ii=navigator.platform.indexOf("Mac")===0,lt=navigator.platform.indexOf("Linux")===0;function at(v){return navigator.userAgent.toLowerCase().indexOf(v)>=0}var Qe={ie:Mi,ielt9:Sa,edge:Wn,webkit:Eo,android:Wa,android23:Do,androidStock:ll,opera:dt,chrome:pe,gecko:we,safari:ze,phantom:ut,opera12:gt,win:Tt,ie3d:Xt,webkit3d:ft,gecko3d:Qt,any3d:qt,mobile:er,mobileWebkit:Vr,mobileWebkit3d:Rn,msPointer:Kn,pointer:In,touch:Bn,touchNative:vn,mobileOpera:Pn,mobileGecko:Zn,retina:Qi,passiveEvents:Xn,canvas:zo,svg:co,vml:zi,inlineSvg:Xo,mac:Ii,linux:lt},It=Qe.msPointer?"MSPointerDown":"pointerdown",Et=Qe.msPointer?"MSPointerMove":"pointermove",Rt=Qe.msPointer?"MSPointerUp":"pointerup",zt=Qe.msPointer?"MSPointerCancel":"pointercancel",Dt={touchstart:It,touchmove:Et,touchend:Rt,touchcancel:zt},Ht={touchstart:pn,touchmove:Vi,touchend:Vi,touchcancel:Vi},Mt={},Br=!1;function en(v,A,R){return A==="touchstart"&&Ni(),Ht[A]?(R=Ht[A].bind(this,R),v.addEventListener(Dt[A],R,!1),R):(console.warn("wrong event specified:",A),P)}function or(v,A,R){if(!Dt[A]){console.warn("wrong event specified:",A);return}v.removeEventListener(Dt[A],R,!1)}function Nn(v){Mt[v.pointerId]=v}function ti(v){Mt[v.pointerId]&&(Mt[v.pointerId]=v)}function Fn(v){delete Mt[v.pointerId]}function Ni(){Br||(document.addEventListener(It,Nn,!0),document.addEventListener(Et,ti,!0),document.addEventListener(Rt,Fn,!0),document.addEventListener(zt,Fn,!0),Br=!0)}function Vi(v,A){if(A.pointerType!==(A.MSPOINTER_TYPE_MOUSE||"mouse")){A.touches=[];for(var R in Mt)A.touches.push(Mt[R]);A.changedTouches=[A],v(A)}}function pn(v,A){A.MSPOINTER_TYPE_TOUCH&&A.pointerType===A.MSPOINTER_TYPE_TOUCH&&oi(A),Vi(v,A)}function ha(v){var A={},R,W;for(W in v)R=v[W],A[W]=R&&R.bind?R.bind(v):R;return v=A,A.type="dblclick",A.detail=2,A.isTrusted=!1,A._simulated=!0,A}var Za=200;function ho(v,A){v.addEventListener("dblclick",A);var R=0,W;function oe(Be){if(Be.detail!==1){W=Be.detail;return}if(!(Be.pointerType==="mouse"||Be.sourceCapabilities&&!Be.sourceCapabilities.firesTouchEvents)){var $e=hs(Be);if(!($e.some(function(_t){return _t instanceof HTMLLabelElement&&_t.attributes.for})&&!$e.some(function(_t){return _t instanceof HTMLInputElement||_t instanceof HTMLSelectElement}))){var ot=Date.now();ot-R<=Za?(W++,W===2&&A(ha(Be))):W=1,R=ot}}}return v.addEventListener("click",oe),{dblclick:A,simDblclick:oe}}function Sc(v,A){v.removeEventListener("dblclick",A.dblclick),v.removeEventListener("click",A.simDblclick)}var ls=Mh(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),us=Mh(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ph=us==="webkitTransition"||us==="OTransition"?us+"End":"transitionend";function ul(v){return typeof v=="string"?document.getElementById(v):v}function Hl(v,A){var R=v.style[A]||v.currentStyle&&v.currentStyle[A];if((!R||R==="auto")&&document.defaultView){var W=document.defaultView.getComputedStyle(v,null);R=W?W[A]:null}return R==="auto"?null:R}function On(v,A,R){var W=document.createElement(v);return W.className=A||"",R&&R.appendChild(W),W}function Ai(v){var A=v.parentNode;A&&A.removeChild(v)}function Wl(v){for(;v.firstChild;)v.removeChild(v.firstChild)}function cl(v){var A=v.parentNode;A&&A.lastChild!==v&&A.appendChild(v)}function Ps(v){var A=v.parentNode;A&&A.firstChild!==v&&A.insertBefore(v,A.firstChild)}function Tc(v,A){if(v.classList!==void 0)return v.classList.contains(A);var R=Ac(v);return R.length>0&&new RegExp("(^|\\s)"+A+"(\\s|$)").test(R)}function Gr(v,A){if(v.classList!==void 0)for(var R=X(A),W=0,oe=R.length;W<oe;W++)v.classList.add(R[W]);else if(!Tc(v,A)){var Be=Ac(v);Zr(v,(Be?Be+" ":"")+A)}}function mn(v,A){v.classList!==void 0?v.classList.remove(A):Zr(v,U((" "+Ac(v)+" ").replace(" "+A+" "," ")))}function Zr(v,A){v.className.baseVal===void 0?v.className=A:v.className.baseVal=A}function Ac(v){return v.correspondingElement&&(v=v.correspondingElement),v.className.baseVal===void 0?v.className:v.className.baseVal}function No(v,A){"opacity"in v.style?v.style.opacity=A:"filter"in v.style&&cd(v,A)}function cd(v,A){var R=!1,W="DXImageTransform.Microsoft.Alpha";try{R=v.filters.item(W)}catch{if(A===1)return}A=Math.round(A*100),R?(R.Enabled=A!==100,R.Opacity=A):v.style.filter+=" progid:"+W+"(opacity="+A+")"}function Mh(v){for(var A=document.documentElement.style,R=0;R<v.length;R++)if(v[R]in A)return v[R];return!1}function Po(v,A,R){var W=A||new Le(0,0);v.style[ls]=(Qe.ie3d?"translate("+W.x+"px,"+W.y+"px)":"translate3d("+W.x+"px,"+W.y+"px,0)")+(R?" scale("+R+")":"")}function Fi(v,A){v._leaflet_pos=A,Qe.any3d?Po(v,A):(v.style.left=A.x+"px",v.style.top=A.y+"px")}function Zl(v){return v._leaflet_pos||new Le(0,0)}var cs,Gt,hn;if("onselectstart"in document)cs=function(){nn(window,"selectstart",oi)},Gt=function(){Un(window,"selectstart",oi)};else{var ln=Mh(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);cs=function(){if(ln){var v=document.documentElement.style;hn=v[ln],v[ln]="none"}},Gt=function(){ln&&(document.documentElement.style[ln]=hn,hn=void 0)}}function Yo(){nn(window,"dragstart",oi)}function hl(){Un(window,"dragstart",oi)}var tn,ku;function fl(v){for(;v.tabIndex===-1;)v=v.parentNode;v.style&&(dl(),tn=v,ku=v.style.outlineStyle,v.style.outlineStyle="none",nn(window,"keydown",dl))}function dl(){tn&&(tn.style.outlineStyle=ku,tn=void 0,ku=void 0,Un(window,"keydown",dl))}function Fo(v){do v=v.parentNode;while((!v.offsetWidth||!v.offsetHeight)&&v!==document.body);return v}function fi(v){var A=v.getBoundingClientRect();return{x:A.width/v.offsetWidth||1,y:A.height/v.offsetHeight||1,boundingClientRect:A}}var dr={__proto__:null,TRANSFORM:ls,TRANSITION:us,TRANSITION_END:Ph,get:ul,getStyle:Hl,create:On,remove:Ai,empty:Wl,toFront:cl,toBack:Ps,hasClass:Tc,addClass:Gr,removeClass:mn,setClass:Zr,getClass:Ac,setOpacity:No,testProp:Mh,setTransform:Po,setPosition:Fi,getPosition:Zl,get disableTextSelection(){return cs},get enableTextSelection(){return Gt},disableImageDrag:Yo,enableImageDrag:hl,preventOutline:fl,restoreOutline:dl,getSizedParentNode:Fo,getScale:fi};function nn(v,A,R,W){if(A&&typeof A=="object")for(var oe in A)eo(v,oe,A[oe],R);else{A=X(A);for(var Be=0,$e=A.length;Be<$e;Be++)eo(v,A[Be],R,W)}return this}var yr="_leaflet_events";function Un(v,A,R,W){if(arguments.length===1)Nr(v),delete v[yr];else if(A&&typeof A=="object")for(var oe in A)cr(v,oe,A[oe],R);else if(A=X(A),arguments.length===2)Nr(v,function(ot){return ee(A,ot)!==-1});else for(var Be=0,$e=A.length;Be<$e;Be++)cr(v,A[Be],R,W);return this}function Nr(v,A){for(var R in v[yr]){var W=R.split(/\d/)[0];(!A||A(W))&&cr(v,W,null,null,R)}}var pl={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function eo(v,A,R,W){var oe=A+s(R)+(W?"_"+s(W):"");if(v[yr]&&v[yr][oe])return this;var Be=function(ot){return R.call(W||v,ot||window.event)},$e=Be;!Qe.touchNative&&Qe.pointer&&A.indexOf("touch")===0?Be=en(v,A,Be):Qe.touch&&A==="dblclick"?Be=ho(v,Be):"addEventListener"in v?A==="touchstart"||A==="touchmove"||A==="wheel"||A==="mousewheel"?v.addEventListener(pl[A]||A,Be,Qe.passiveEvents?{passive:!1}:!1):A==="mouseenter"||A==="mouseleave"?(Be=function(ot){ot=ot||window.event,qa(v,ot)&&$e(ot)},v.addEventListener(pl[A],Be,!1)):v.addEventListener(A,$e,!1):v.attachEvent("on"+A,Be),v[yr]=v[yr]||{},v[yr][oe]=Be}function cr(v,A,R,W,oe){oe=oe||A+s(R)+(W?"_"+s(W):"");var Be=v[yr]&&v[yr][oe];if(!Be)return this;!Qe.touchNative&&Qe.pointer&&A.indexOf("touch")===0?or(v,A,Be):Qe.touch&&A==="dblclick"?Sc(v,Be):"removeEventListener"in v?v.removeEventListener(pl[A]||A,Be,!1):v.detachEvent("on"+A,Be),v[yr][oe]=null}function ml(v){return v.stopPropagation?v.stopPropagation():v.originalEvent?v.originalEvent._stopped=!0:v.cancelBubble=!0,this}function Ms(v){return eo(v,"wheel",ml),this}function di(v){return nn(v,"mousedown touchstart dblclick contextmenu",ml),v._leaflet_disable_click=!0,this}function oi(v){return v.preventDefault?v.preventDefault():v.returnValue=!1,this}function Jo(v){return oi(v),ml(v),this}function hs(v){if(v.composedPath)return v.composedPath();for(var A=[],R=v.target;R;)A.push(R),R=R.parentNode;return A}function Oi(v,A){if(!A)return new Le(v.clientX,v.clientY);var R=fi(A),W=R.boundingClientRect;return new Le((v.clientX-W.left)/R.x-A.clientLeft,(v.clientY-W.top)/R.y-A.clientTop)}var hd=Qe.linux&&Qe.chrome?window.devicePixelRatio:Qe.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Ih(v){return Qe.edge?v.wheelDeltaY/2:v.deltaY&&v.deltaMode===0?-v.deltaY/hd:v.deltaY&&v.deltaMode===1?-v.deltaY*20:v.deltaY&&v.deltaMode===2?-v.deltaY*60:v.deltaX||v.deltaZ?0:v.wheelDelta?(v.wheelDeltaY||v.wheelDelta)/2:v.detail&&Math.abs(v.detail)<32765?-v.detail*20:v.detail?v.detail/-32765*60:0}function qa(v,A){var R=A.relatedTarget;if(!R)return!0;try{for(;R&&R!==v;)R=R.parentNode}catch{return!1}return R!==v}var Lu={__proto__:null,on:nn,off:Un,stopPropagation:ml,disableScrollPropagation:Ms,disableClickPropagation:di,preventDefault:oi,stop:Jo,getPropagationPath:hs,getMousePosition:Oi,getWheelDelta:Ih,isExternalTarget:qa,addListener:nn,removeListener:Un},gl=St.extend({run:function(v,A,R,W){this.stop(),this._el=v,this._inProgress=!0,this._duration=R||.25,this._easeOutPower=1/Math.max(W||.5,.2),this._startPos=Zl(v),this._offset=A.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=je(this._animate,this),this._step()},_step:function(v){var A=+new Date-this._startTime,R=this._duration*1e3;A<R?this._runFrame(this._easeOut(A/R),v):(this._runFrame(1),this._complete())},_runFrame:function(v,A){var R=this._startPos.add(this._offset.multiplyBy(v));A&&R._round(),Fi(this._el,R),this.fire("step")},_complete:function(){Oe(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(v){return 1-Math.pow(1-v,this._easeOutPower)}}),Dn=St.extend({options:{crs:ii,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(v,A){A=Q(this,A),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(v),this._initLayout(),this._onResize=p(this._onResize,this),this._initEvents(),A.maxBounds&&this.setMaxBounds(A.maxBounds),A.zoom!==void 0&&(this._zoom=this._limitZoom(A.zoom)),A.center&&A.zoom!==void 0&&this.setView(zr(A.center),A.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=us&&Qe.any3d&&!Qe.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),nn(this._proxy,Ph,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(v,A,R){if(A=A===void 0?this._zoom:this._limitZoom(A),v=this._limitCenter(zr(v),A,this.options.maxBounds),R=R||{},this._stop(),this._loaded&&!R.reset&&R!==!0){R.animate!==void 0&&(R.zoom=u({animate:R.animate},R.zoom),R.pan=u({animate:R.animate,duration:R.duration},R.pan));var W=this._zoom!==A?this._tryAnimatedZoom&&this._tryAnimatedZoom(v,A,R.zoom):this._tryAnimatedPan(v,R.pan);if(W)return clearTimeout(this._sizeTimer),this}return this._resetView(v,A,R.pan&&R.pan.noMoveStart),this},setZoom:function(v,A){return this._loaded?this.setView(this.getCenter(),v,{zoom:A}):(this._zoom=v,this)},zoomIn:function(v,A){return v=v||(Qe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+v,A)},zoomOut:function(v,A){return v=v||(Qe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-v,A)},setZoomAround:function(v,A,R){var W=this.getZoomScale(A),oe=this.getSize().divideBy(2),Be=v instanceof Le?v:this.latLngToContainerPoint(v),$e=Be.subtract(oe).multiplyBy(1-1/W),ot=this.containerPointToLatLng(oe.add($e));return this.setView(ot,A,{zoom:R})},_getBoundsCenterZoom:function(v,A){A=A||{},v=v.getBounds?v.getBounds():Hr(v);var R=xt(A.paddingTopLeft||A.padding||[0,0]),W=xt(A.paddingBottomRight||A.padding||[0,0]),oe=this.getBoundsZoom(v,!1,R.add(W));if(oe=typeof A.maxZoom=="number"?Math.min(A.maxZoom,oe):oe,oe===1/0)return{center:v.getCenter(),zoom:oe};var Be=W.subtract(R).divideBy(2),$e=this.project(v.getSouthWest(),oe),ot=this.project(v.getNorthEast(),oe),_t=this.unproject($e.add(ot).divideBy(2).add(Be),oe);return{center:_t,zoom:oe}},fitBounds:function(v,A){if(v=Hr(v),!v.isValid())throw new Error("Bounds are not valid.");var R=this._getBoundsCenterZoom(v,A);return this.setView(R.center,R.zoom,A)},fitWorld:function(v){return this.fitBounds([[-90,-180],[90,180]],v)},panTo:function(v,A){return this.setView(v,this._zoom,{pan:A})},panBy:function(v,A){if(v=xt(v).round(),A=A||{},!v.x&&!v.y)return this.fire("moveend");if(A.animate!==!0&&!this.getSize().contains(v))return this._resetView(this.unproject(this.project(this.getCenter()).add(v)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new gl,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),A.noMoveStart||this.fire("movestart"),A.animate!==!1){Gr(this._mapPane,"leaflet-pan-anim");var R=this._getMapPanePos().subtract(v).round();this._panAnim.run(this._mapPane,R,A.duration||.25,A.easeLinearity)}else this._rawPanBy(v),this.fire("move").fire("moveend");return this},flyTo:function(v,A,R){if(R=R||{},R.animate===!1||!Qe.any3d)return this.setView(v,A,R);this._stop();var W=this.project(this.getCenter()),oe=this.project(v),Be=this.getSize(),$e=this._zoom;v=zr(v),A=A===void 0?$e:A;var ot=Math.max(Be.x,Be.y),_t=ot*this.getZoomScale($e,A),Vt=oe.distanceTo(W)||1,mr=1.42,qr=mr*mr;function Sn(ji){var gs=ji?-1:1,Zu=ji?_t:ot,Sd=_t*_t-ot*ot+gs*qr*qr*Vt*Vt,tu=2*Zu*qr*Vt,Qh=Sd/tu,Vc=Math.sqrt(Qh*Qh+1)-Qh,Td=Vc<1e-9?-18:Math.log(Vc);return Td}function $o(ji){return(Math.exp(ji)-Math.exp(-ji))/2}function fo(ji){return(Math.exp(ji)+Math.exp(-ji))/2}function ga(ji){return $o(ji)/fo(ji)}var ta=Sn(0);function wl(ji){return ot*(fo(ta)/fo(ta+mr*ji))}function Cd(ji){return ot*(fo(ta)*ga(ta+mr*ji)-$o(ta))/qr}function lm(ji){return 1-Math.pow(1-ji,1.5)}var wd=Date.now(),Yh=(Sn(1)-ta)/mr,um=R.duration?1e3*R.duration:1e3*Yh*.8;function Jh(){var ji=(Date.now()-wd)/um,gs=lm(ji)*Yh;ji<=1?(this._flyToFrame=je(Jh,this),this._move(this.unproject(W.add(oe.subtract(W).multiplyBy(Cd(gs)/Vt)),$e),this.getScaleZoom(ot/wl(gs),$e),{flyTo:!0})):this._move(v,A)._moveEnd(!0)}return this._moveStart(!0,R.noMoveStart),Jh.call(this),this},flyToBounds:function(v,A){var R=this._getBoundsCenterZoom(v,A);return this.flyTo(R.center,R.zoom,A)},setMaxBounds:function(v){return v=Hr(v),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),v.isValid()?(this.options.maxBounds=v,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(v){var A=this.options.minZoom;return this.options.minZoom=v,this._loaded&&A!==v&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(v):this},setMaxZoom:function(v){var A=this.options.maxZoom;return this.options.maxZoom=v,this._loaded&&A!==v&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(v):this},panInsideBounds:function(v,A){this._enforcingBounds=!0;var R=this.getCenter(),W=this._limitCenter(R,this._zoom,Hr(v));return R.equals(W)||this.panTo(W,A),this._enforcingBounds=!1,this},panInside:function(v,A){A=A||{};var R=xt(A.paddingTopLeft||A.padding||[0,0]),W=xt(A.paddingBottomRight||A.padding||[0,0]),oe=this.project(this.getCenter()),Be=this.project(v),$e=this.getPixelBounds(),ot=Wt([$e.min.add(R),$e.max.subtract(W)]),_t=ot.getSize();if(!ot.contains(Be)){this._enforcingBounds=!0;var Vt=Be.subtract(ot.getCenter()),mr=ot.extend(Be).getSize().subtract(_t);oe.x+=Vt.x<0?-mr.x:mr.x,oe.y+=Vt.y<0?-mr.y:mr.y,this.panTo(this.unproject(oe),A),this._enforcingBounds=!1}return this},invalidateSize:function(v){if(!this._loaded)return this;v=u({animate:!1,pan:!0},v===!0?{animate:!0}:v);var A=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var R=this.getSize(),W=A.divideBy(2).round(),oe=R.divideBy(2).round(),Be=W.subtract(oe);return!Be.x&&!Be.y?this:(v.animate&&v.pan?this.panBy(Be):(v.pan&&this._rawPanBy(Be),this.fire("move"),v.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(p(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:A,newSize:R}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(v){if(v=this._locateOptions=u({timeout:1e4,watch:!1},v),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var A=p(this._handleGeolocationResponse,this),R=p(this._handleGeolocationError,this);return v.watch?this._locationWatchId=navigator.geolocation.watchPosition(A,R,v):navigator.geolocation.getCurrentPosition(A,R,v),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(v){if(this._container._leaflet_id){var A=v.code,R=v.message||(A===1?"permission denied":A===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:A,message:"Geolocation error: "+R+"."})}},_handleGeolocationResponse:function(v){if(this._container._leaflet_id){var A=v.coords.latitude,R=v.coords.longitude,W=new Wr(A,R),oe=W.toBounds(v.coords.accuracy*2),Be=this._locateOptions;if(Be.setView){var $e=this.getBoundsZoom(oe);this.setView(W,Be.maxZoom?Math.min($e,Be.maxZoom):$e)}var ot={latlng:W,bounds:oe,timestamp:v.timestamp};for(var _t in v.coords)typeof v.coords[_t]=="number"&&(ot[_t]=v.coords[_t]);this.fire("locationfound",ot)}},addHandler:function(v,A){if(!A)return this;var R=this[v]=new A(this);return this._handlers.push(R),this.options[v]&&R.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ai(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Oe(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var v;for(v in this._layers)this._layers[v].remove();for(v in this._panes)Ai(this._panes[v]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(v,A){var R="leaflet-pane"+(v?" leaflet-"+v.replace("Pane","")+"-pane":""),W=On("div",R,A||this._mapPane);return v&&(this._panes[v]=W),W},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var v=this.getPixelBounds(),A=this.unproject(v.getBottomLeft()),R=this.unproject(v.getTopRight());return new Tr(A,R)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(v,A,R){v=Hr(v),R=xt(R||[0,0]);var W=this.getZoom()||0,oe=this.getMinZoom(),Be=this.getMaxZoom(),$e=v.getNorthWest(),ot=v.getSouthEast(),_t=this.getSize().subtract(R),Vt=Wt(this.project(ot,W),this.project($e,W)).getSize(),mr=Qe.any3d?this.options.zoomSnap:1,qr=_t.x/Vt.x,Sn=_t.y/Vt.y,$o=A?Math.max(qr,Sn):Math.min(qr,Sn);return W=this.getScaleZoom($o,W),mr&&(W=Math.round(W/(mr/100))*(mr/100),W=A?Math.ceil(W/mr)*mr:Math.floor(W/mr)*mr),Math.max(oe,Math.min(Be,W))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Le(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(v,A){var R=this._getTopLeftPoint(v,A);return new $t(R,R.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(v){return this.options.crs.getProjectedBounds(v===void 0?this.getZoom():v)},getPane:function(v){return typeof v=="string"?this._panes[v]:v},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(v,A){var R=this.options.crs;return A=A===void 0?this._zoom:A,R.scale(v)/R.scale(A)},getScaleZoom:function(v,A){var R=this.options.crs;A=A===void 0?this._zoom:A;var W=R.zoom(v*R.scale(A));return isNaN(W)?1/0:W},project:function(v,A){return A=A===void 0?this._zoom:A,this.options.crs.latLngToPoint(zr(v),A)},unproject:function(v,A){return A=A===void 0?this._zoom:A,this.options.crs.pointToLatLng(xt(v),A)},layerPointToLatLng:function(v){var A=xt(v).add(this.getPixelOrigin());return this.unproject(A)},latLngToLayerPoint:function(v){var A=this.project(zr(v))._round();return A._subtract(this.getPixelOrigin())},wrapLatLng:function(v){return this.options.crs.wrapLatLng(zr(v))},wrapLatLngBounds:function(v){return this.options.crs.wrapLatLngBounds(Hr(v))},distance:function(v,A){return this.options.crs.distance(zr(v),zr(A))},containerPointToLayerPoint:function(v){return xt(v).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(v){return xt(v).add(this._getMapPanePos())},containerPointToLatLng:function(v){var A=this.containerPointToLayerPoint(xt(v));return this.layerPointToLatLng(A)},latLngToContainerPoint:function(v){return this.layerPointToContainerPoint(this.latLngToLayerPoint(zr(v)))},mouseEventToContainerPoint:function(v){return Oi(v,this._container)},mouseEventToLayerPoint:function(v){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(v))},mouseEventToLatLng:function(v){return this.layerPointToLatLng(this.mouseEventToLayerPoint(v))},_initContainer:function(v){var A=this._container=ul(v);if(A){if(A._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");nn(A,"scroll",this._onScroll,this),this._containerId=s(A)},_initLayout:function(){var v=this._container;this._fadeAnimated=this.options.fadeAnimation&&Qe.any3d,Gr(v,"leaflet-container"+(Qe.touch?" leaflet-touch":"")+(Qe.retina?" leaflet-retina":"")+(Qe.ielt9?" leaflet-oldie":"")+(Qe.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var A=Hl(v,"position");A!=="absolute"&&A!=="relative"&&A!=="fixed"&&A!=="sticky"&&(v.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var v=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Fi(this._mapPane,new Le(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Gr(v.markerPane,"leaflet-zoom-hide"),Gr(v.shadowPane,"leaflet-zoom-hide"))},_resetView:function(v,A,R){Fi(this._mapPane,new Le(0,0));var W=!this._loaded;this._loaded=!0,A=this._limitZoom(A),this.fire("viewprereset");var oe=this._zoom!==A;this._moveStart(oe,R)._move(v,A)._moveEnd(oe),this.fire("viewreset"),W&&this.fire("load")},_moveStart:function(v,A){return v&&this.fire("zoomstart"),A||this.fire("movestart"),this},_move:function(v,A,R,W){A===void 0&&(A=this._zoom);var oe=this._zoom!==A;return this._zoom=A,this._lastCenter=v,this._pixelOrigin=this._getNewPixelOrigin(v),W?R&&R.pinch&&this.fire("zoom",R):((oe||R&&R.pinch)&&this.fire("zoom",R),this.fire("move",R)),this},_moveEnd:function(v){return v&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Oe(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(v){Fi(this._mapPane,this._getMapPanePos().subtract(v))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(v){this._targets={},this._targets[s(this._container)]=this;var A=v?Un:nn;A(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&A(window,"resize",this._onResize,this),Qe.any3d&&this.options.transform3DLimit&&(v?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Oe(this._resizeRequest),this._resizeRequest=je(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var v=this._getMapPanePos();Math.max(Math.abs(v.x),Math.abs(v.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(v,A){for(var R=[],W,oe=A==="mouseout"||A==="mouseover",Be=v.target||v.srcElement,$e=!1;Be;){if(W=this._targets[s(Be)],W&&(A==="click"||A==="preclick")&&this._draggableMoved(W)){$e=!0;break}if(W&&W.listens(A,!0)&&(oe&&!qa(Be,v)||(R.push(W),oe))||Be===this._container)break;Be=Be.parentNode}return!R.length&&!$e&&!oe&&this.listens(A,!0)&&(R=[this]),R},_isClickDisabled:function(v){for(;v&&v!==this._container;){if(v._leaflet_disable_click)return!0;v=v.parentNode}},_handleDOMEvent:function(v){var A=v.target||v.srcElement;if(!(!this._loaded||A._leaflet_disable_events||v.type==="click"&&this._isClickDisabled(A))){var R=v.type;R==="mousedown"&&fl(A),this._fireDOMEvent(v,R)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(v,A,R){if(v.type==="click"){var W=u({},v);W.type="preclick",this._fireDOMEvent(W,W.type,R)}var oe=this._findEventTargets(v,A);if(R){for(var Be=[],$e=0;$e<R.length;$e++)R[$e].listens(A,!0)&&Be.push(R[$e]);oe=Be.concat(oe)}if(oe.length){A==="contextmenu"&&oi(v);var ot=oe[0],_t={originalEvent:v};if(v.type!=="keypress"&&v.type!=="keydown"&&v.type!=="keyup"){var Vt=ot.getLatLng&&(!ot._radius||ot._radius<=10);_t.containerPoint=Vt?this.latLngToContainerPoint(ot.getLatLng()):this.mouseEventToContainerPoint(v),_t.layerPoint=this.containerPointToLayerPoint(_t.containerPoint),_t.latlng=Vt?ot.getLatLng():this.layerPointToLatLng(_t.layerPoint)}for($e=0;$e<oe.length;$e++)if(oe[$e].fire(A,_t,!0),_t.originalEvent._stopped||oe[$e].options.bubblingMouseEvents===!1&&ee(this._mouseEvents,A)!==-1)return}},_draggableMoved:function(v){return v=v.dragging&&v.dragging.enabled()?v:this,v.dragging&&v.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var v=0,A=this._handlers.length;v<A;v++)this._handlers[v].disable()},whenReady:function(v,A){return this._loaded?v.call(A||this,{target:this}):this.on("load",v,A),this},_getMapPanePos:function(){return Zl(this._mapPane)||new Le(0,0)},_moved:function(){var v=this._getMapPanePos();return v&&!v.equals([0,0])},_getTopLeftPoint:function(v,A){var R=v&&A!==void 0?this._getNewPixelOrigin(v,A):this.getPixelOrigin();return R.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(v,A){var R=this.getSize()._divideBy(2);return this.project(v,A)._subtract(R)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(v,A,R){var W=this._getNewPixelOrigin(R,A);return this.project(v,A)._subtract(W)},_latLngBoundsToNewLayerBounds:function(v,A,R){var W=this._getNewPixelOrigin(R,A);return Wt([this.project(v.getSouthWest(),A)._subtract(W),this.project(v.getNorthWest(),A)._subtract(W),this.project(v.getSouthEast(),A)._subtract(W),this.project(v.getNorthEast(),A)._subtract(W)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(v){return this.latLngToLayerPoint(v).subtract(this._getCenterLayerPoint())},_limitCenter:function(v,A,R){if(!R)return v;var W=this.project(v,A),oe=this.getSize().divideBy(2),Be=new $t(W.subtract(oe),W.add(oe)),$e=this._getBoundsOffset(Be,R,A);return Math.abs($e.x)<=1&&Math.abs($e.y)<=1?v:this.unproject(W.add($e),A)},_limitOffset:function(v,A){if(!A)return v;var R=this.getPixelBounds(),W=new $t(R.min.add(v),R.max.add(v));return v.add(this._getBoundsOffset(W,A))},_getBoundsOffset:function(v,A,R){var W=Wt(this.project(A.getNorthEast(),R),this.project(A.getSouthWest(),R)),oe=W.min.subtract(v.min),Be=W.max.subtract(v.max),$e=this._rebound(oe.x,-Be.x),ot=this._rebound(oe.y,-Be.y);return new Le($e,ot)},_rebound:function(v,A){return v+A>0?Math.round(v-A)/2:Math.max(0,Math.ceil(v))-Math.max(0,Math.floor(A))},_limitZoom:function(v){var A=this.getMinZoom(),R=this.getMaxZoom(),W=Qe.any3d?this.options.zoomSnap:1;return W&&(v=Math.round(v/W)*W),Math.max(A,Math.min(R,v))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){mn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(v,A){var R=this._getCenterOffset(v)._trunc();return(A&&A.animate)!==!0&&!this.getSize().contains(R)?!1:(this.panBy(R,A),!0)},_createAnimProxy:function(){var v=this._proxy=On("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(v),this.on("zoomanim",function(A){var R=ls,W=this._proxy.style[R];Po(this._proxy,this.project(A.center,A.zoom),this.getZoomScale(A.zoom,1)),W===this._proxy.style[R]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ai(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var v=this.getCenter(),A=this.getZoom();Po(this._proxy,this.project(v,A),this.getZoomScale(A,1))},_catchTransitionEnd:function(v){this._animatingZoom&&v.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(v,A,R){if(this._animatingZoom)return!0;if(R=R||{},!this._zoomAnimated||R.animate===!1||this._nothingToAnimate()||Math.abs(A-this._zoom)>this.options.zoomAnimationThreshold)return!1;var W=this.getZoomScale(A),oe=this._getCenterOffset(v)._divideBy(1-1/W);return R.animate!==!0&&!this.getSize().contains(oe)?!1:(je(function(){this._moveStart(!0,R.noMoveStart||!1)._animateZoom(v,A,!0)},this),!0)},_animateZoom:function(v,A,R,W){this._mapPane&&(R&&(this._animatingZoom=!0,this._animateToCenter=v,this._animateToZoom=A,Gr(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:v,zoom:A,noUpdate:W}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(p(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&mn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Ka(v,A){return new Dn(v,A)}var Qo=ht.extend({options:{position:"topright"},initialize:function(v){Q(this,v)},getPosition:function(){return this.options.position},setPosition:function(v){var A=this._map;return A&&A.removeControl(this),this.options.position=v,A&&A.addControl(this),this},getContainer:function(){return this._container},addTo:function(v){this.remove(),this._map=v;var A=this._container=this.onAdd(v),R=this.getPosition(),W=v._controlCorners[R];return Gr(A,"leaflet-control"),R.indexOf("bottom")!==-1?W.insertBefore(A,W.firstChild):W.appendChild(A),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ai(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(v){this._map&&v&&v.screenX>0&&v.screenY>0&&this._map.getContainer().focus()}}),fa=function(v){return new Qo(v)};Dn.include({addControl:function(v){return v.addTo(this),this},removeControl:function(v){return v.remove(),this},_initControlPos:function(){var v=this._controlCorners={},A="leaflet-",R=this._controlContainer=On("div",A+"control-container",this._container);function W(oe,Be){var $e=A+oe+" "+A+Be;v[oe+Be]=On("div",$e,R)}W("top","left"),W("top","right"),W("bottom","left"),W("bottom","right")},_clearControlPos:function(){for(var v in this._controlCorners)Ai(this._controlCorners[v]);Ai(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ru=Qo.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(v,A,R,W){return R<W?-1:W<R?1:0}},initialize:function(v,A,R){Q(this,R),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var W in v)this._addLayer(v[W],W);for(W in A)this._addLayer(A[W],W,!0)},onAdd:function(v){this._initLayout(),this._update(),this._map=v,v.on("zoomend",this._checkDisabledLayers,this);for(var A=0;A<this._layers.length;A++)this._layers[A].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(v){return Qo.prototype.addTo.call(this,v),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var v=0;v<this._layers.length;v++)this._layers[v].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(v,A){return this._addLayer(v,A),this._map?this._update():this},addOverlay:function(v,A){return this._addLayer(v,A,!0),this._map?this._update():this},removeLayer:function(v){v.off("add remove",this._onLayerChange,this);var A=this._getLayer(s(v));return A&&this._layers.splice(this._layers.indexOf(A),1),this._map?this._update():this},expand:function(){Gr(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var v=this._map.getSize().y-(this._container.offsetTop+50);return v<this._section.clientHeight?(Gr(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=v+"px"):mn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return mn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var v="leaflet-control-layers",A=this._container=On("div",v),R=this.options.collapsed;A.setAttribute("aria-haspopup",!0),di(A),Ms(A);var W=this._section=On("section",v+"-list");R&&(this._map.on("click",this.collapse,this),nn(A,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var oe=this._layersLink=On("a",v+"-toggle",A);oe.href="#",oe.title="Layers",oe.setAttribute("role","button"),nn(oe,{keydown:function(Be){Be.keyCode===13&&this._expandSafely()},click:function(Be){oi(Be),this._expandSafely()}},this),R||this.expand(),this._baseLayersList=On("div",v+"-base",W),this._separator=On("div",v+"-separator",W),this._overlaysList=On("div",v+"-overlays",W),A.appendChild(W)},_getLayer:function(v){for(var A=0;A<this._layers.length;A++)if(this._layers[A]&&s(this._layers[A].layer)===v)return this._layers[A]},_addLayer:function(v,A,R){this._map&&v.on("add remove",this._onLayerChange,this),this._layers.push({layer:v,name:A,overlay:R}),this.options.sortLayers&&this._layers.sort(p(function(W,oe){return this.options.sortFunction(W.layer,oe.layer,W.name,oe.name)},this)),this.options.autoZIndex&&v.setZIndex&&(this._lastZIndex++,v.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Wl(this._baseLayersList),Wl(this._overlaysList),this._layerControlInputs=[];var v,A,R,W,oe=0;for(R=0;R<this._layers.length;R++)W=this._layers[R],this._addItem(W),A=A||W.overlay,v=v||!W.overlay,oe+=W.overlay?0:1;return this.options.hideSingleBase&&(v=v&&oe>1,this._baseLayersList.style.display=v?"":"none"),this._separator.style.display=A&&v?"":"none",this},_onLayerChange:function(v){this._handlingClick||this._update();var A=this._getLayer(s(v.target)),R=A.overlay?v.type==="add"?"overlayadd":"overlayremove":v.type==="add"?"baselayerchange":null;R&&this._map.fire(R,A)},_createRadioElement:function(v,A){var R='<input type="radio" class="leaflet-control-layers-selector" name="'+v+'"'+(A?' checked="checked"':"")+"/>",W=document.createElement("div");return W.innerHTML=R,W.firstChild},_addItem:function(v){var A=document.createElement("label"),R=this._map.hasLayer(v.layer),W;v.overlay?(W=document.createElement("input"),W.type="checkbox",W.className="leaflet-control-layers-selector",W.defaultChecked=R):W=this._createRadioElement("leaflet-base-layers_"+s(this),R),this._layerControlInputs.push(W),W.layerId=s(v.layer),nn(W,"click",this._onInputClick,this);var oe=document.createElement("span");oe.innerHTML=" "+v.name;var Be=document.createElement("span");A.appendChild(Be),Be.appendChild(W),Be.appendChild(oe);var $e=v.overlay?this._overlaysList:this._baseLayersList;return $e.appendChild(A),this._checkDisabledLayers(),A},_onInputClick:function(){if(!this._preventClick){var v=this._layerControlInputs,A,R,W=[],oe=[];this._handlingClick=!0;for(var Be=v.length-1;Be>=0;Be--)A=v[Be],R=this._getLayer(A.layerId).layer,A.checked?W.push(R):A.checked||oe.push(R);for(Be=0;Be<oe.length;Be++)this._map.hasLayer(oe[Be])&&this._map.removeLayer(oe[Be]);for(Be=0;Be<W.length;Be++)this._map.hasLayer(W[Be])||this._map.addLayer(W[Be]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var v=this._layerControlInputs,A,R,W=this._map.getZoom(),oe=v.length-1;oe>=0;oe--)A=v[oe],R=this._getLayer(A.layerId).layer,A.disabled=R.options.minZoom!==void 0&&W<R.options.minZoom||R.options.maxZoom!==void 0&&W>R.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var v=this._section;this._preventClick=!0,nn(v,"click",oi),this.expand();var A=this;setTimeout(function(){Un(v,"click",oi),A._preventClick=!1})}}),rm=function(v,A,R){return new Ru(v,A,R)},Is=Qo.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(v){var A="leaflet-control-zoom",R=On("div",A+" leaflet-bar"),W=this.options;return this._zoomInButton=this._createButton(W.zoomInText,W.zoomInTitle,A+"-in",R,this._zoomIn),this._zoomOutButton=this._createButton(W.zoomOutText,W.zoomOutTitle,A+"-out",R,this._zoomOut),this._updateDisabled(),v.on("zoomend zoomlevelschange",this._updateDisabled,this),R},onRemove:function(v){v.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(v){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(v.shiftKey?3:1))},_zoomOut:function(v){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(v.shiftKey?3:1))},_createButton:function(v,A,R,W,oe){var Be=On("a",R,W);return Be.innerHTML=v,Be.href="#",Be.title=A,Be.setAttribute("role","button"),Be.setAttribute("aria-label",A),di(Be),nn(Be,"click",Jo),nn(Be,"click",oe,this),nn(Be,"click",this._refocusOnMap,this),Be},_updateDisabled:function(){var v=this._map,A="leaflet-disabled";mn(this._zoomInButton,A),mn(this._zoomOutButton,A),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||v._zoom===v.getMinZoom())&&(Gr(this._zoomOutButton,A),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||v._zoom===v.getMaxZoom())&&(Gr(this._zoomInButton,A),this._zoomInButton.setAttribute("aria-disabled","true"))}});Dn.mergeOptions({zoomControl:!0}),Dn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Is,this.addControl(this.zoomControl))});var nm=function(v){return new Is(v)},rn=Qo.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(v){var A="leaflet-control-scale",R=On("div",A),W=this.options;return this._addScales(W,A+"-line",R),v.on(W.updateWhenIdle?"moveend":"move",this._update,this),v.whenReady(this._update,this),R},onRemove:function(v){v.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(v,A,R){v.metric&&(this._mScale=On("div",A,R)),v.imperial&&(this._iScale=On("div",A,R))},_update:function(){var v=this._map,A=v.getSize().y/2,R=v.distance(v.containerPointToLatLng([0,A]),v.containerPointToLatLng([this.options.maxWidth,A]));this._updateScales(R)},_updateScales:function(v){this.options.metric&&v&&this._updateMetric(v),this.options.imperial&&v&&this._updateImperial(v)},_updateMetric:function(v){var A=this._getRoundNum(v),R=A<1e3?A+" m":A/1e3+" km";this._updateScale(this._mScale,R,A/v)},_updateImperial:function(v){var A=v*3.2808399,R,W,oe;A>5280?(R=A/5280,W=this._getRoundNum(R),this._updateScale(this._iScale,W+" mi",W/R)):(oe=this._getRoundNum(A),this._updateScale(this._iScale,oe+" ft",oe/A))},_updateScale:function(v,A,R){v.style.width=Math.round(this.options.maxWidth*R)+"px",v.innerHTML=A},_getRoundNum:function(v){var A=Math.pow(10,(Math.floor(v)+"").length-1),R=v/A;return R=R>=10?10:R>=5?5:R>=3?3:R>=2?2:1,A*R}}),Ec=function(v){return new rn(v)},fd='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',dd=Qo.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Qe.inlineSvg?fd+" ":"")+"Leaflet</a>"},initialize:function(v){Q(this,v),this._attributions={}},onAdd:function(v){v.attributionControl=this,this._container=On("div","leaflet-control-attribution"),di(this._container);for(var A in v._layers)v._layers[A].getAttribution&&this.addAttribution(v._layers[A].getAttribution());return this._update(),v.on("layeradd",this._addAttribution,this),this._container},onRemove:function(v){v.off("layeradd",this._addAttribution,this)},_addAttribution:function(v){v.layer.getAttribution&&(this.addAttribution(v.layer.getAttribution()),v.layer.once("remove",function(){this.removeAttribution(v.layer.getAttribution())},this))},setPrefix:function(v){return this.options.prefix=v,this._update(),this},addAttribution:function(v){return v?(this._attributions[v]||(this._attributions[v]=0),this._attributions[v]++,this._update(),this):this},removeAttribution:function(v){return v?(this._attributions[v]&&(this._attributions[v]--,this._update()),this):this},_update:function(){if(this._map){var v=[];for(var A in this._attributions)this._attributions[A]&&v.push(A);var R=[];this.options.prefix&&R.push(this.options.prefix),v.length&&R.push(v.join(", ")),this._container.innerHTML=R.join(' <span aria-hidden="true">|</span> ')}}});Dn.mergeOptions({attributionControl:!0}),Dn.addInitHook(function(){this.options.attributionControl&&new dd().addTo(this)});var N_=function(v){return new dd(v)};Qo.Layers=Ru,Qo.Zoom=Is,Qo.Scale=rn,Qo.Attribution=dd,fa.layers=rm,fa.zoom=nm,fa.scale=Ec,fa.attribution=N_;var Bo=ht.extend({initialize:function(v){this._map=v},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Bo.addTo=function(v,A){return v.addHandler(A,this),this};var _l={Events:Je},Dc=Qe.touch?"touchstart mousedown":"mousedown",da=St.extend({options:{clickTolerance:3},initialize:function(v,A,R,W){Q(this,W),this._element=v,this._dragStartTarget=A||v,this._preventOutline=R},enable:function(){this._enabled||(nn(this._dragStartTarget,Dc,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(da._dragging===this&&this.finishDrag(!0),Un(this._dragStartTarget,Dc,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(v){if(this._enabled&&(this._moved=!1,!Tc(this._element,"leaflet-zoom-anim"))){if(v.touches&&v.touches.length!==1){da._dragging===this&&this.finishDrag();return}if(!(da._dragging||v.shiftKey||v.which!==1&&v.button!==1&&!v.touches)&&(da._dragging=this,this._preventOutline&&fl(this._element),Yo(),cs(),!this._moving)){this.fire("down");var A=v.touches?v.touches[0]:v,R=Fo(this._element);this._startPoint=new Le(A.clientX,A.clientY),this._startPos=Zl(this._element),this._parentScale=fi(R);var W=v.type==="mousedown";nn(document,W?"mousemove":"touchmove",this._onMove,this),nn(document,W?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(v){if(this._enabled){if(v.touches&&v.touches.length>1){this._moved=!0;return}var A=v.touches&&v.touches.length===1?v.touches[0]:v,R=new Le(A.clientX,A.clientY)._subtract(this._startPoint);!R.x&&!R.y||Math.abs(R.x)+Math.abs(R.y)<this.options.clickTolerance||(R.x/=this._parentScale.x,R.y/=this._parentScale.y,oi(v),this._moved||(this.fire("dragstart"),this._moved=!0,Gr(document.body,"leaflet-dragging"),this._lastTarget=v.target||v.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Gr(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(R),this._moving=!0,this._lastEvent=v,this._updatePosition())}},_updatePosition:function(){var v={originalEvent:this._lastEvent};this.fire("predrag",v),Fi(this._element,this._newPos),this.fire("drag",v)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(v){mn(document.body,"leaflet-dragging"),this._lastTarget&&(mn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Un(document,"mousemove touchmove",this._onMove,this),Un(document,"mouseup touchend touchcancel",this._onUp,this),hl(),Gt();var A=this._moved&&this._moving;this._moving=!1,da._dragging=!1,A&&this.fire("dragend",{noInertia:v,distance:this._newPos.distanceTo(this._startPos)})}});function Oh(v,A,R){var W,oe=[1,4,2,8],Be,$e,ot,_t,Vt,mr,qr,Sn;for(Be=0,mr=v.length;Be<mr;Be++)v[Be]._code=Ea(v[Be],A);for(ot=0;ot<4;ot++){for(qr=oe[ot],W=[],Be=0,mr=v.length,$e=mr-1;Be<mr;$e=Be++)_t=v[Be],Vt=v[$e],_t._code&qr?Vt._code&qr||(Sn=zu(Vt,_t,qr,A,R),Sn._code=Ea(Sn,A),W.push(Sn)):(Vt._code&qr&&(Sn=zu(Vt,_t,qr,A,R),Sn._code=Ea(Sn,A),W.push(Sn)),W.push(_t));v=W}return v}function fs(v,A){var R,W,oe,Be,$e,ot,_t,Vt,mr;if(!v||v.length===0)throw new Error("latlngs not passed");io(v)||(console.warn("latlngs are not flat! Only the first ring will be used"),v=v[0]);var qr=zr([0,0]),Sn=Hr(v),$o=Sn.getNorthWest().distanceTo(Sn.getSouthWest())*Sn.getNorthEast().distanceTo(Sn.getNorthWest());$o<1700&&(qr=ds(v));var fo=v.length,ga=[];for(R=0;R<fo;R++){var ta=zr(v[R]);ga.push(A.project(zr([ta.lat-qr.lat,ta.lng-qr.lng])))}for(ot=_t=Vt=0,R=0,W=fo-1;R<fo;W=R++)oe=ga[R],Be=ga[W],$e=oe.y*Be.x-Be.y*oe.x,_t+=(oe.x+Be.x)*$e,Vt+=(oe.y+Be.y)*$e,ot+=$e*3;ot===0?mr=ga[0]:mr=[_t/ot,Vt/ot];var wl=A.unproject(xt(mr));return zr([wl.lat+qr.lat,wl.lng+qr.lng])}function ds(v){for(var A=0,R=0,W=0,oe=0;oe<v.length;oe++){var Be=zr(v[oe]);A+=Be.lat,R+=Be.lng,W++}return zr([A/W,R/W])}var Pc={__proto__:null,clipPolygon:Oh,polygonCenter:fs,centroid:ds};function kh(v,A){if(!A||!v.length)return v.slice();var R=A*A;return v=pd(v,R),v=im(v,R),v}function Lh(v,A,R){return Math.sqrt(Os(v,A,R,!0))}function Aa(v,A,R){return Os(v,A,R)}function im(v,A){var R=v.length,W=typeof Uint8Array<"u"?Uint8Array:Array,oe=new W(R);oe[0]=oe[R-1]=1,Mc(v,oe,A,0,R-1);var Be,$e=[];for(Be=0;Be<R;Be++)oe[Be]&&$e.push(v[Be]);return $e}function Mc(v,A,R,W,oe){var Be=0,$e,ot,_t;for(ot=W+1;ot<=oe-1;ot++)_t=Os(v[ot],v[W],v[oe],!0),_t>Be&&($e=ot,Be=_t);Be>R&&(A[$e]=1,Mc(v,A,R,W,$e),Mc(v,A,R,$e,oe))}function pd(v,A){for(var R=[v[0]],W=1,oe=0,Be=v.length;W<Be;W++)Nh(v[W],v[oe])>A&&(R.push(v[W]),oe=W);return oe<Be-1&&R.push(v[Be-1]),R}var Rh;function zh(v,A,R,W,oe){var Be=W?Rh:Ea(v,R),$e=Ea(A,R),ot,_t,Vt;for(Rh=$e;;){if(!(Be|$e))return[v,A];if(Be&$e)return!1;ot=Be||$e,_t=zu(v,A,ot,R,oe),Vt=Ea(_t,R),ot===Be?(v=_t,Be=Vt):(A=_t,$e=Vt)}}function zu(v,A,R,W,oe){var Be=A.x-v.x,$e=A.y-v.y,ot=W.min,_t=W.max,Vt,mr;return R&8?(Vt=v.x+Be*(_t.y-v.y)/$e,mr=_t.y):R&4?(Vt=v.x+Be*(ot.y-v.y)/$e,mr=ot.y):R&2?(Vt=_t.x,mr=v.y+$e*(_t.x-v.x)/Be):R&1&&(Vt=ot.x,mr=v.y+$e*(ot.x-v.x)/Be),new Le(Vt,mr,oe)}function Ea(v,A){var R=0;return v.x<A.min.x?R|=1:v.x>A.max.x&&(R|=2),v.y<A.min.y?R|=4:v.y>A.max.y&&(R|=8),R}function Nh(v,A){var R=A.x-v.x,W=A.y-v.y;return R*R+W*W}function Os(v,A,R,W){var oe=A.x,Be=A.y,$e=R.x-oe,ot=R.y-Be,_t=$e*$e+ot*ot,Vt;return _t>0&&(Vt=((v.x-oe)*$e+(v.y-Be)*ot)/_t,Vt>1?(oe=R.x,Be=R.y):Vt>0&&(oe+=$e*Vt,Be+=ot*Vt)),$e=v.x-oe,ot=v.y-Be,W?$e*$e+ot*ot:new Le(oe,Be)}function io(v){return!K(v[0])||typeof v[0][0]!="object"&&typeof v[0][0]<"u"}function Fh(v){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),io(v)}function pa(v,A){var R,W,oe,Be,$e,ot,_t,Vt;if(!v||v.length===0)throw new Error("latlngs not passed");io(v)||(console.warn("latlngs are not flat! Only the first ring will be used"),v=v[0]);var mr=zr([0,0]),qr=Hr(v),Sn=qr.getNorthWest().distanceTo(qr.getSouthWest())*qr.getNorthEast().distanceTo(qr.getNorthWest());Sn<1700&&(mr=ds(v));var $o=v.length,fo=[];for(R=0;R<$o;R++){var ga=zr(v[R]);fo.push(A.project(zr([ga.lat-mr.lat,ga.lng-mr.lng])))}for(R=0,W=0;R<$o-1;R++)W+=fo[R].distanceTo(fo[R+1])/2;if(W===0)Vt=fo[0];else for(R=0,Be=0;R<$o-1;R++)if($e=fo[R],ot=fo[R+1],oe=$e.distanceTo(ot),Be+=oe,Be>W){_t=(Be-W)/oe,Vt=[ot.x-_t*(ot.x-$e.x),ot.y-_t*(ot.y-$e.y)];break}var ta=A.unproject(xt(Vt));return zr([ta.lat+mr.lat,ta.lng+mr.lng])}var Ut={__proto__:null,simplify:kh,pointToSegmentDistance:Lh,closestPointOnSegment:Aa,clipSegment:zh,_getEdgeIntersection:zu,_getBitCode:Ea,_sqClosestPointOnSegment:Os,isFlat:io,_flat:Fh,polylineCenter:pa},Nu={project:function(v){return new Le(v.lng,v.lat)},unproject:function(v){return new Wr(v.y,v.x)},bounds:new $t([-180,-90],[180,90])},Ic={R:6378137,R_MINOR:6356752314245179e-9,bounds:new $t([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(v){var A=Math.PI/180,R=this.R,W=v.lat*A,oe=this.R_MINOR/R,Be=Math.sqrt(1-oe*oe),$e=Be*Math.sin(W),ot=Math.tan(Math.PI/4-W/2)/Math.pow((1-$e)/(1+$e),Be/2);return W=-R*Math.log(Math.max(ot,1e-10)),new Le(v.lng*A*R,W)},unproject:function(v){for(var A=180/Math.PI,R=this.R,W=this.R_MINOR/R,oe=Math.sqrt(1-W*W),Be=Math.exp(-v.y/R),$e=Math.PI/2-2*Math.atan(Be),ot=0,_t=.1,Vt;ot<15&&Math.abs(_t)>1e-7;ot++)Vt=oe*Math.sin($e),Vt=Math.pow((1-Vt)/(1+Vt),oe/2),_t=Math.PI/2-2*Math.atan(Be*Vt)-$e,$e+=_t;return new Wr($e*A,v.x*A/R)}},Oc={__proto__:null,LonLat:Nu,Mercator:Ic,SphericalMercator:br},md=u({},Ti,{code:"EPSG:3395",projection:Ic,transformation:function(){var v=.5/(Math.PI*Ic.R);return kt(v,.5,-v,.5)}()}),ks=u({},Ti,{code:"EPSG:4326",projection:Nu,transformation:kt(1/180,1,-1/180,.5)}),Xa=u({},jn,{projection:Nu,transformation:kt(1,0,-1,0),scale:function(v){return Math.pow(2,v)},zoom:function(v){return Math.log(v)/Math.LN2},distance:function(v,A){var R=A.lng-v.lng,W=A.lat-v.lat;return Math.sqrt(R*R+W*W)},infinite:!0});jn.Earth=Ti,jn.EPSG3395=md,jn.EPSG3857=ii,jn.EPSG900913=Er,jn.EPSG4326=ks,jn.Simple=Xa;var ma=St.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(v){return v.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(v){return v&&v.removeLayer(this),this},getPane:function(v){return this._map.getPane(v?this.options[v]||v:this.options.pane)},addInteractiveTarget:function(v){return this._map._targets[s(v)]=this,this},removeInteractiveTarget:function(v){return delete this._map._targets[s(v)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(v){var A=v.target;if(A.hasLayer(this)){if(this._map=A,this._zoomAnimated=A._zoomAnimated,this.getEvents){var R=this.getEvents();A.on(R,this),this.once("remove",function(){A.off(R,this)},this)}this.onAdd(A),this.fire("add"),A.fire("layeradd",{layer:this})}}});Dn.include({addLayer:function(v){if(!v._layerAdd)throw new Error("The provided object is not a Layer.");var A=s(v);return this._layers[A]?this:(this._layers[A]=v,v._mapToAdd=this,v.beforeAdd&&v.beforeAdd(this),this.whenReady(v._layerAdd,v),this)},removeLayer:function(v){var A=s(v);return this._layers[A]?(this._loaded&&v.onRemove(this),delete this._layers[A],this._loaded&&(this.fire("layerremove",{layer:v}),v.fire("remove")),v._map=v._mapToAdd=null,this):this},hasLayer:function(v){return s(v)in this._layers},eachLayer:function(v,A){for(var R in this._layers)v.call(A,this._layers[R]);return this},_addLayers:function(v){v=v?K(v)?v:[v]:[];for(var A=0,R=v.length;A<R;A++)this.addLayer(v[A])},_addZoomLimit:function(v){(!isNaN(v.options.maxZoom)||!isNaN(v.options.minZoom))&&(this._zoomBoundLayers[s(v)]=v,this._updateZoomLevels())},_removeZoomLimit:function(v){var A=s(v);this._zoomBoundLayers[A]&&(delete this._zoomBoundLayers[A],this._updateZoomLevels())},_updateZoomLevels:function(){var v=1/0,A=-1/0,R=this._getZoomSpan();for(var W in this._zoomBoundLayers){var oe=this._zoomBoundLayers[W].options;v=oe.minZoom===void 0?v:Math.min(v,oe.minZoom),A=oe.maxZoom===void 0?A:Math.max(A,oe.maxZoom)}this._layersMaxZoom=A===-1/0?void 0:A,this._layersMinZoom=v===1/0?void 0:v,R!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Da=ma.extend({initialize:function(v,A){Q(this,A),this._layers={};var R,W;if(v)for(R=0,W=v.length;R<W;R++)this.addLayer(v[R])},addLayer:function(v){var A=this.getLayerId(v);return this._layers[A]=v,this._map&&this._map.addLayer(v),this},removeLayer:function(v){var A=v in this._layers?v:this.getLayerId(v);return this._map&&this._layers[A]&&this._map.removeLayer(this._layers[A]),delete this._layers[A],this},hasLayer:function(v){var A=typeof v=="number"?v:this.getLayerId(v);return A in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(v){var A=Array.prototype.slice.call(arguments,1),R,W;for(R in this._layers)W=this._layers[R],W[v]&&W[v].apply(W,A);return this},onAdd:function(v){this.eachLayer(v.addLayer,v)},onRemove:function(v){this.eachLayer(v.removeLayer,v)},eachLayer:function(v,A){for(var R in this._layers)v.call(A,this._layers[R]);return this},getLayer:function(v){return this._layers[v]},getLayers:function(){var v=[];return this.eachLayer(v.push,v),v},setZIndex:function(v){return this.invoke("setZIndex",v)},getLayerId:function(v){return s(v)}}),jh=function(v,A){return new Da(v,A)},jo=Da.extend({addLayer:function(v){return this.hasLayer(v)?this:(v.addEventParent(this),Da.prototype.addLayer.call(this,v),this.fire("layeradd",{layer:v}))},removeLayer:function(v){return this.hasLayer(v)?(v in this._layers&&(v=this._layers[v]),v.removeEventParent(this),Da.prototype.removeLayer.call(this,v),this.fire("layerremove",{layer:v})):this},setStyle:function(v){return this.invoke("setStyle",v)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var v=new Tr;for(var A in this._layers){var R=this._layers[A];v.extend(R.getBounds?R.getBounds():R.getLatLng())}return v}}),gd=function(v,A){return new jo(v,A)},Fu=ht.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(v){Q(this,v)},createIcon:function(v){return this._createIcon("icon",v)},createShadow:function(v){return this._createIcon("shadow",v)},_createIcon:function(v,A){var R=this._getIconUrl(v);if(!R){if(v==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var W=this._createImg(R,A&&A.tagName==="IMG"?A:null);return this._setIconStyles(W,v),(this.options.crossOrigin||this.options.crossOrigin==="")&&(W.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),W},_setIconStyles:function(v,A){var R=this.options,W=R[A+"Size"];typeof W=="number"&&(W=[W,W]);var oe=xt(W),Be=xt(A==="shadow"&&R.shadowAnchor||R.iconAnchor||oe&&oe.divideBy(2,!0));v.className="leaflet-marker-"+A+" "+(R.className||""),Be&&(v.style.marginLeft=-Be.x+"px",v.style.marginTop=-Be.y+"px"),oe&&(v.style.width=oe.x+"px",v.style.height=oe.y+"px")},_createImg:function(v,A){return A=A||document.createElement("img"),A.src=v,A},_getIconUrl:function(v){return Qe.retina&&this.options[v+"RetinaUrl"]||this.options[v+"Url"]}});function ju(v){return new Fu(v)}var kc=Fu.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(v){return typeof kc.imagePath!="string"&&(kc.imagePath=this._detectIconPath()),(this.options.imagePath||kc.imagePath)+Fu.prototype._getIconUrl.call(this,v)},_stripUrl:function(v){var A=function(R,W,oe){var Be=W.exec(R);return Be&&Be[oe]};return v=A(v,/^url\((['"])?(.+)\1\)$/,2),v&&A(v,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var v=On("div","leaflet-default-icon-path",document.body),A=Hl(v,"background-image")||Hl(v,"backgroundImage");if(document.body.removeChild(v),A=this._stripUrl(A),A)return A;var R=document.querySelector('link[href$="leaflet.css"]');return R?R.href.substring(0,R.href.length-11-1):""}}),_d=Bo.extend({initialize:function(v){this._marker=v},addHooks:function(){var v=this._marker._icon;this._draggable||(this._draggable=new da(v,v,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Gr(v,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&mn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(v){var A=this._marker,R=A._map,W=this._marker.options.autoPanSpeed,oe=this._marker.options.autoPanPadding,Be=Zl(A._icon),$e=R.getPixelBounds(),ot=R.getPixelOrigin(),_t=Wt($e.min._subtract(ot).add(oe),$e.max._subtract(ot).subtract(oe));if(!_t.contains(Be)){var Vt=xt((Math.max(_t.max.x,Be.x)-_t.max.x)/($e.max.x-_t.max.x)-(Math.min(_t.min.x,Be.x)-_t.min.x)/($e.min.x-_t.min.x),(Math.max(_t.max.y,Be.y)-_t.max.y)/($e.max.y-_t.max.y)-(Math.min(_t.min.y,Be.y)-_t.min.y)/($e.min.y-_t.min.y)).multiplyBy(W);R.panBy(Vt,{animate:!1}),this._draggable._newPos._add(Vt),this._draggable._startPos._add(Vt),Fi(A._icon,this._draggable._newPos),this._onDrag(v),this._panRequest=je(this._adjustPan.bind(this,v))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(v){this._marker.options.autoPan&&(Oe(this._panRequest),this._panRequest=je(this._adjustPan.bind(this,v)))},_onDrag:function(v){var A=this._marker,R=A._shadow,W=Zl(A._icon),oe=A._map.layerPointToLatLng(W);R&&Fi(R,W),A._latlng=oe,v.latlng=oe,v.oldLatLng=this._oldLatLng,A.fire("move",v).fire("drag",v)},_onDragEnd:function(v){Oe(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",v)}}),Lc=ma.extend({options:{icon:new kc,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(v,A){Q(this,A),this._latlng=zr(v)},onAdd:function(v){this._zoomAnimated=this._zoomAnimated&&v.options.markerZoomAnimation,this._zoomAnimated&&v.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(v){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&v.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(v){var A=this._latlng;return this._latlng=zr(v),this.update(),this.fire("move",{oldLatLng:A,latlng:this._latlng})},setZIndexOffset:function(v){return this.options.zIndexOffset=v,this.update()},getIcon:function(){return this.options.icon},setIcon:function(v){return this.options.icon=v,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var v=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(v)}return this},_initIcon:function(){var v=this.options,A="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),R=v.icon.createIcon(this._icon),W=!1;R!==this._icon&&(this._icon&&this._removeIcon(),W=!0,v.title&&(R.title=v.title),R.tagName==="IMG"&&(R.alt=v.alt||"")),Gr(R,A),v.keyboard&&(R.tabIndex="0",R.setAttribute("role","button")),this._icon=R,v.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&nn(R,"focus",this._panOnFocus,this);var oe=v.icon.createShadow(this._shadow),Be=!1;oe!==this._shadow&&(this._removeShadow(),Be=!0),oe&&(Gr(oe,A),oe.alt=""),this._shadow=oe,v.opacity<1&&this._updateOpacity(),W&&this.getPane().appendChild(this._icon),this._initInteraction(),oe&&Be&&this.getPane(v.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Un(this._icon,"focus",this._panOnFocus,this),Ai(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ai(this._shadow),this._shadow=null},_setPos:function(v){this._icon&&Fi(this._icon,v),this._shadow&&Fi(this._shadow,v),this._zIndex=v.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(v){this._icon&&(this._icon.style.zIndex=this._zIndex+v)},_animateZoom:function(v){var A=this._map._latLngToNewLayerPoint(this._latlng,v.zoom,v.center).round();this._setPos(A)},_initInteraction:function(){if(this.options.interactive&&(Gr(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),_d)){var v=this.options.draggable;this.dragging&&(v=this.dragging.enabled(),this.dragging.disable()),this.dragging=new _d(this),v&&this.dragging.enable()}},setOpacity:function(v){return this.options.opacity=v,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var v=this.options.opacity;this._icon&&No(this._icon,v),this._shadow&&No(this._shadow,v)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var v=this._map;if(v){var A=this.options.icon.options,R=A.iconSize?xt(A.iconSize):xt(0,0),W=A.iconAnchor?xt(A.iconAnchor):xt(0,0);v.panInside(this._latlng,{paddingTopLeft:W,paddingBottomRight:R.subtract(W)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function yd(v,A){return new Lc(v,A)}var yl=ma.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(v){this._renderer=v.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(v){return Q(this,v),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&v&&Object.prototype.hasOwnProperty.call(v,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),$h=yl.extend({options:{fill:!0,radius:10},initialize:function(v,A){Q(this,A),this._latlng=zr(v),this._radius=this.options.radius},setLatLng:function(v){var A=this._latlng;return this._latlng=zr(v),this.redraw(),this.fire("move",{oldLatLng:A,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(v){return this.options.radius=this._radius=v,this.redraw()},getRadius:function(){return this._radius},setStyle:function(v){var A=v&&v.radius||this._radius;return yl.prototype.setStyle.call(this,v),this.setRadius(A),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var v=this._radius,A=this._radiusY||v,R=this._clickTolerance(),W=[v+R,A+R];this._pxBounds=new $t(this._point.subtract(W),this._point.add(W))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(v){return v.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function F_(v,A){return new $h(v,A)}var Uh=$h.extend({initialize:function(v,A,R){if(typeof A=="number"&&(A=u({},R,{radius:A})),Q(this,A),this._latlng=zr(v),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(v){return this._mRadius=v,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var v=[this._radius,this._radiusY||this._radius];return new Tr(this._map.layerPointToLatLng(this._point.subtract(v)),this._map.layerPointToLatLng(this._point.add(v)))},setStyle:yl.prototype.setStyle,_project:function(){var v=this._latlng.lng,A=this._latlng.lat,R=this._map,W=R.options.crs;if(W.distance===Ti.distance){var oe=Math.PI/180,Be=this._mRadius/Ti.R/oe,$e=R.project([A+Be,v]),ot=R.project([A-Be,v]),_t=$e.add(ot).divideBy(2),Vt=R.unproject(_t).lat,mr=Math.acos((Math.cos(Be*oe)-Math.sin(A*oe)*Math.sin(Vt*oe))/(Math.cos(A*oe)*Math.cos(Vt*oe)))/oe;(isNaN(mr)||mr===0)&&(mr=Be/Math.cos(Math.PI/180*A)),this._point=_t.subtract(R.getPixelOrigin()),this._radius=isNaN(mr)?0:_t.x-R.project([Vt,v-mr]).x,this._radiusY=_t.y-$e.y}else{var qr=W.unproject(W.project(this._latlng).subtract([this._mRadius,0]));this._point=R.latLngToLayerPoint(this._latlng),this._radius=this._point.x-R.latLngToLayerPoint(qr).x}this._updateBounds()}});function Rc(v,A,R){return new Uh(v,A,R)}var Ls=yl.extend({options:{smoothFactor:1,noClip:!1},initialize:function(v,A){Q(this,A),this._setLatLngs(v)},getLatLngs:function(){return this._latlngs},setLatLngs:function(v){return this._setLatLngs(v),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(v){for(var A=1/0,R=null,W=Os,oe,Be,$e=0,ot=this._parts.length;$e<ot;$e++)for(var _t=this._parts[$e],Vt=1,mr=_t.length;Vt<mr;Vt++){oe=_t[Vt-1],Be=_t[Vt];var qr=W(v,oe,Be,!0);qr<A&&(A=qr,R=W(v,oe,Be))}return R&&(R.distance=Math.sqrt(A)),R},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return pa(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(v,A){return A=A||this._defaultShape(),v=zr(v),A.push(v),this._bounds.extend(v),this.redraw()},_setLatLngs:function(v){this._bounds=new Tr,this._latlngs=this._convertLatLngs(v)},_defaultShape:function(){return io(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(v){for(var A=[],R=io(v),W=0,oe=v.length;W<oe;W++)R?(A[W]=zr(v[W]),this._bounds.extend(A[W])):A[W]=this._convertLatLngs(v[W]);return A},_project:function(){var v=new $t;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,v),this._bounds.isValid()&&v.isValid()&&(this._rawPxBounds=v,this._updateBounds())},_updateBounds:function(){var v=this._clickTolerance(),A=new Le(v,v);this._rawPxBounds&&(this._pxBounds=new $t([this._rawPxBounds.min.subtract(A),this._rawPxBounds.max.add(A)]))},_projectLatlngs:function(v,A,R){var W=v[0]instanceof Wr,oe=v.length,Be,$e;if(W){for($e=[],Be=0;Be<oe;Be++)$e[Be]=this._map.latLngToLayerPoint(v[Be]),R.extend($e[Be]);A.push($e)}else for(Be=0;Be<oe;Be++)this._projectLatlngs(v[Be],A,R)},_clipPoints:function(){var v=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(v))){if(this.options.noClip){this._parts=this._rings;return}var A=this._parts,R,W,oe,Be,$e,ot,_t;for(R=0,oe=0,Be=this._rings.length;R<Be;R++)for(_t=this._rings[R],W=0,$e=_t.length;W<$e-1;W++)ot=zh(_t[W],_t[W+1],v,W,!0),ot&&(A[oe]=A[oe]||[],A[oe].push(ot[0]),(ot[1]!==_t[W+1]||W===$e-2)&&(A[oe].push(ot[1]),oe++))}},_simplifyPoints:function(){for(var v=this._parts,A=this.options.smoothFactor,R=0,W=v.length;R<W;R++)v[R]=kh(v[R],A)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(v,A){var R,W,oe,Be,$e,ot,_t=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(v))return!1;for(R=0,Be=this._parts.length;R<Be;R++)for(ot=this._parts[R],W=0,$e=ot.length,oe=$e-1;W<$e;oe=W++)if(!(!A&&W===0)&&Lh(v,ot[oe],ot[W])<=_t)return!0;return!1}});function Vh(v,A){return new Ls(v,A)}Ls._flat=Fh;var vl=Ls.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return fs(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(v){var A=Ls.prototype._convertLatLngs.call(this,v),R=A.length;return R>=2&&A[0]instanceof Wr&&A[0].equals(A[R-1])&&A.pop(),A},_setLatLngs:function(v){Ls.prototype._setLatLngs.call(this,v),io(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return io(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var v=this._renderer._bounds,A=this.options.weight,R=new Le(A,A);if(v=new $t(v.min.subtract(R),v.max.add(R)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(v))){if(this.options.noClip){this._parts=this._rings;return}for(var W=0,oe=this._rings.length,Be;W<oe;W++)Be=Oh(this._rings[W],v,!0),Be.length&&this._parts.push(Be)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(v){var A=!1,R,W,oe,Be,$e,ot,_t,Vt;if(!this._pxBounds||!this._pxBounds.contains(v))return!1;for(Be=0,_t=this._parts.length;Be<_t;Be++)for(R=this._parts[Be],$e=0,Vt=R.length,ot=Vt-1;$e<Vt;ot=$e++)W=R[$e],oe=R[ot],W.y>v.y!=oe.y>v.y&&v.x<(oe.x-W.x)*(v.y-W.y)/(oe.y-W.y)+W.x&&(A=!A);return A||Ls.prototype._containsPoint.call(this,v,!0)}});function om(v,A){return new vl(v,A)}var Ya=jo.extend({initialize:function(v,A){Q(this,A),this._layers={},v&&this.addData(v)},addData:function(v){var A=K(v)?v:v.features,R,W,oe;if(A){for(R=0,W=A.length;R<W;R++)oe=A[R],(oe.geometries||oe.geometry||oe.features||oe.coordinates)&&this.addData(oe);return this}var Be=this.options;if(Be.filter&&!Be.filter(v))return this;var $e=ql(v,Be);return $e?($e.feature=zs(v),$e.defaultOptions=$e.options,this.resetStyle($e),Be.onEachFeature&&Be.onEachFeature(v,$e),this.addLayer($e)):this},resetStyle:function(v){return v===void 0?this.eachLayer(this.resetStyle,this):(v.options=u({},v.defaultOptions),this._setLayerStyle(v,this.options.style),this)},setStyle:function(v){return this.eachLayer(function(A){this._setLayerStyle(A,v)},this)},_setLayerStyle:function(v,A){v.setStyle&&(typeof A=="function"&&(A=A(v.feature)),v.setStyle(A))}});function ql(v,A){var R=v.type==="Feature"?v.geometry:v,W=R?R.coordinates:null,oe=[],Be=A&&A.pointToLayer,$e=A&&A.coordsToLatLng||Rs,ot,_t,Vt,mr;if(!W&&!R)return null;switch(R.type){case"Point":return ot=$e(W),Gh(Be,v,ot,A);case"MultiPoint":for(Vt=0,mr=W.length;Vt<mr;Vt++)ot=$e(W[Vt]),oe.push(Gh(Be,v,ot,A));return new jo(oe);case"LineString":case"MultiLineString":return _t=Kl(W,R.type==="LineString"?0:1,$e),new Ls(_t,A);case"Polygon":case"MultiPolygon":return _t=Kl(W,R.type==="Polygon"?1:2,$e),new vl(_t,A);case"GeometryCollection":for(Vt=0,mr=R.geometries.length;Vt<mr;Vt++){var qr=ql({geometry:R.geometries[Vt],type:"Feature",properties:v.properties},A);qr&&oe.push(qr)}return new jo(oe);case"FeatureCollection":for(Vt=0,mr=R.features.length;Vt<mr;Vt++){var Sn=ql(R.features[Vt],A);Sn&&oe.push(Sn)}return new jo(oe);default:throw new Error("Invalid GeoJSON object.")}}function Gh(v,A,R,W){return v?v(A,R):new Lc(R,W&&W.markersInheritOptions&&W)}function Rs(v){return new Wr(v[1],v[0],v[2])}function Kl(v,A,R){for(var W=[],oe=0,Be=v.length,$e;oe<Be;oe++)$e=A?Kl(v[oe],A-1,R):(R||Rs)(v[oe]),W.push($e);return W}function Xl(v,A){return v=zr(v),v.alt!==void 0?[N(v.lng,A),N(v.lat,A),N(v.alt,A)]:[N(v.lng,A),N(v.lat,A)]}function $u(v,A,R,W){for(var oe=[],Be=0,$e=v.length;Be<$e;Be++)oe.push(A?$u(v[Be],io(v[Be])?0:A-1,R,W):Xl(v[Be],W));return!A&&R&&oe.length>0&&oe.push(oe[0].slice()),oe}function ps(v,A){return v.feature?u({},v.feature,{geometry:A}):zs(A)}function zs(v){return v.type==="Feature"||v.type==="FeatureCollection"?v:{type:"Feature",properties:{},geometry:v}}var Bl={toGeoJSON:function(v){return ps(this,{type:"Point",coordinates:Xl(this.getLatLng(),v)})}};Lc.include(Bl),Uh.include(Bl),$h.include(Bl),Ls.include({toGeoJSON:function(v){var A=!io(this._latlngs),R=$u(this._latlngs,A?1:0,!1,v);return ps(this,{type:(A?"Multi":"")+"LineString",coordinates:R})}}),vl.include({toGeoJSON:function(v){var A=!io(this._latlngs),R=A&&!io(this._latlngs[0]),W=$u(this._latlngs,R?2:A?1:0,!0,v);return A||(W=[W]),ps(this,{type:(R?"Multi":"")+"Polygon",coordinates:W})}}),Da.include({toMultiPoint:function(v){var A=[];return this.eachLayer(function(R){A.push(R.toGeoJSON(v).geometry.coordinates)}),ps(this,{type:"MultiPoint",coordinates:A})},toGeoJSON:function(v){var A=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(A==="MultiPoint")return this.toMultiPoint(v);var R=A==="GeometryCollection",W=[];return this.eachLayer(function(oe){if(oe.toGeoJSON){var Be=oe.toGeoJSON(v);if(R)W.push(Be.geometry);else{var $e=zs(Be);$e.type==="FeatureCollection"?W.push.apply(W,$e.features):W.push($e)}}}),R?ps(this,{geometries:W,type:"GeometryCollection"}):{type:"FeatureCollection",features:W}}});function Uu(v,A){return new Ya(v,A)}var zc=Uu,Gi=ma.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(v,A,R){this._url=v,this._bounds=Hr(A),Q(this,R)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Gr(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ai(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(v){return this.options.opacity=v,this._image&&this._updateOpacity(),this},setStyle:function(v){return v.opacity&&this.setOpacity(v.opacity),this},bringToFront:function(){return this._map&&cl(this._image),this},bringToBack:function(){return this._map&&Ps(this._image),this},setUrl:function(v){return this._url=v,this._image&&(this._image.src=v),this},setBounds:function(v){return this._bounds=Hr(v),this._map&&this._reset(),this},getEvents:function(){var v={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(v.zoomanim=this._animateZoom),v},setZIndex:function(v){return this.options.zIndex=v,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var v=this._url.tagName==="IMG",A=this._image=v?this._url:On("img");if(Gr(A,"leaflet-image-layer"),this._zoomAnimated&&Gr(A,"leaflet-zoom-animated"),this.options.className&&Gr(A,this.options.className),A.onselectstart=P,A.onmousemove=P,A.onload=p(this.fire,this,"load"),A.onerror=p(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(A.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),v){this._url=A.src;return}A.src=this._url,A.alt=this.options.alt},_animateZoom:function(v){var A=this._map.getZoomScale(v.zoom),R=this._map._latLngBoundsToNewLayerBounds(this._bounds,v.zoom,v.center).min;Po(this._image,R,A)},_reset:function(){var v=this._image,A=new $t(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),R=A.getSize();Fi(v,A.min),v.style.width=R.x+"px",v.style.height=R.y+"px"},_updateOpacity:function(){No(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var v=this.options.errorOverlayUrl;v&&this._url!==v&&(this._url=v,this._image.src=v)},getCenter:function(){return this._bounds.getCenter()}}),xl=function(v,A,R){return new Gi(v,A,R)},Mo=Gi.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var v=this._url.tagName==="VIDEO",A=this._image=v?this._url:On("video");if(Gr(A,"leaflet-image-layer"),this._zoomAnimated&&Gr(A,"leaflet-zoom-animated"),this.options.className&&Gr(A,this.options.className),A.onselectstart=P,A.onmousemove=P,A.onloadeddata=p(this.fire,this,"load"),v){for(var R=A.getElementsByTagName("source"),W=[],oe=0;oe<R.length;oe++)W.push(R[oe].src);this._url=R.length>0?W:[A.src];return}K(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(A.style,"objectFit")&&(A.style.objectFit="fill"),A.autoplay=!!this.options.autoplay,A.loop=!!this.options.loop,A.muted=!!this.options.muted,A.playsInline=!!this.options.playsInline;for(var Be=0;Be<this._url.length;Be++){var $e=On("source");$e.src=this._url[Be],A.appendChild($e)}}});function vd(v,A,R){return new Mo(v,A,R)}var Bd=Gi.extend({_initImage:function(){var v=this._image=this._url;Gr(v,"leaflet-image-layer"),this._zoomAnimated&&Gr(v,"leaflet-zoom-animated"),this.options.className&&Gr(v,this.options.className),v.onselectstart=P,v.onmousemove=P}});function xd(v,A,R){return new Bd(v,A,R)}var Io=ma.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(v,A){v&&(v instanceof Wr||K(v))?(this._latlng=zr(v),Q(this,A)):(Q(this,v),this._source=A),this.options.content&&(this._content=this.options.content)},openOn:function(v){return v=arguments.length?v:this._source._map,v.hasLayer(this)||v.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(v){return this._map?this.close():(arguments.length?this._source=v:v=this._source,this._prepareOpen(),this.openOn(v._map)),this},onAdd:function(v){this._zoomAnimated=v._zoomAnimated,this._container||this._initLayout(),v._fadeAnimated&&No(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),v._fadeAnimated&&No(this._container,1),this.bringToFront(),this.options.interactive&&(Gr(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(v){v._fadeAnimated?(No(this._container,0),this._removeTimeout=setTimeout(p(Ai,void 0,this._container),200)):Ai(this._container),this.options.interactive&&(mn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(v){return this._latlng=zr(v),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(v){return this._content=v,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var v={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(v.zoomanim=this._animateZoom),v},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&cl(this._container),this},bringToBack:function(){return this._map&&Ps(this._container),this},_prepareOpen:function(v){var A=this._source;if(!A._map)return!1;if(A instanceof jo){A=null;var R=this._source._layers;for(var W in R)if(R[W]._map){A=R[W];break}if(!A)return!1;this._source=A}if(!v)if(A.getCenter)v=A.getCenter();else if(A.getLatLng)v=A.getLatLng();else if(A.getBounds)v=A.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(v),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var v=this._contentNode,A=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof A=="string")v.innerHTML=A;else{for(;v.hasChildNodes();)v.removeChild(v.firstChild);v.appendChild(A)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var v=this._map.latLngToLayerPoint(this._latlng),A=xt(this.options.offset),R=this._getAnchor();this._zoomAnimated?Fi(this._container,v.add(R)):A=A.add(v).add(R);var W=this._containerBottom=-A.y,oe=this._containerLeft=-Math.round(this._containerWidth/2)+A.x;this._container.style.bottom=W+"px",this._container.style.left=oe+"px"}},_getAnchor:function(){return[0,0]}});Dn.include({_initOverlay:function(v,A,R,W){var oe=A;return oe instanceof v||(oe=new v(W).setContent(A)),R&&oe.setLatLng(R),oe}}),ma.include({_initOverlay:function(v,A,R,W){var oe=R;return oe instanceof v?(Q(oe,W),oe._source=this):(oe=A&&!W?A:new v(W,this),oe.setContent(R)),oe}});var Yl=Io.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(v){return v=arguments.length?v:this._source._map,!v.hasLayer(this)&&v._popup&&v._popup.options.autoClose&&v.removeLayer(v._popup),v._popup=this,Io.prototype.openOn.call(this,v)},onAdd:function(v){Io.prototype.onAdd.call(this,v),v.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof yl||this._source.on("preclick",ml))},onRemove:function(v){Io.prototype.onRemove.call(this,v),v.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof yl||this._source.off("preclick",ml))},getEvents:function(){var v=Io.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(v.preclick=this.close),this.options.keepInView&&(v.moveend=this._adjustPan),v},_initLayout:function(){var v="leaflet-popup",A=this._container=On("div",v+" "+(this.options.className||"")+" leaflet-zoom-animated"),R=this._wrapper=On("div",v+"-content-wrapper",A);if(this._contentNode=On("div",v+"-content",R),di(A),Ms(this._contentNode),nn(A,"contextmenu",ml),this._tipContainer=On("div",v+"-tip-container",A),this._tip=On("div",v+"-tip",this._tipContainer),this.options.closeButton){var W=this._closeButton=On("a",v+"-close-button",A);W.setAttribute("role","button"),W.setAttribute("aria-label","Close popup"),W.href="#close",W.innerHTML='<span aria-hidden="true">&#215;</span>',nn(W,"click",function(oe){oi(oe),this.close()},this)}},_updateLayout:function(){var v=this._contentNode,A=v.style;A.width="",A.whiteSpace="nowrap";var R=v.offsetWidth;R=Math.min(R,this.options.maxWidth),R=Math.max(R,this.options.minWidth),A.width=R+1+"px",A.whiteSpace="",A.height="";var W=v.offsetHeight,oe=this.options.maxHeight,Be="leaflet-popup-scrolled";oe&&W>oe?(A.height=oe+"px",Gr(v,Be)):mn(v,Be),this._containerWidth=this._container.offsetWidth},_animateZoom:function(v){var A=this._map._latLngToNewLayerPoint(this._latlng,v.zoom,v.center),R=this._getAnchor();Fi(this._container,A.add(R))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var v=this._map,A=parseInt(Hl(this._container,"marginBottom"),10)||0,R=this._container.offsetHeight+A,W=this._containerWidth,oe=new Le(this._containerLeft,-R-this._containerBottom);oe._add(Zl(this._container));var Be=v.layerPointToContainerPoint(oe),$e=xt(this.options.autoPanPadding),ot=xt(this.options.autoPanPaddingTopLeft||$e),_t=xt(this.options.autoPanPaddingBottomRight||$e),Vt=v.getSize(),mr=0,qr=0;Be.x+W+_t.x>Vt.x&&(mr=Be.x+W-Vt.x+_t.x),Be.x-mr-ot.x<0&&(mr=Be.x-ot.x),Be.y+R+_t.y>Vt.y&&(qr=Be.y+R-Vt.y+_t.y),Be.y-qr-ot.y<0&&(qr=Be.y-ot.y),(mr||qr)&&(this.options.keepInView&&(this._autopanning=!0),v.fire("autopanstart").panBy([mr,qr]))}},_getAnchor:function(){return xt(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Nc=function(v,A){return new Yl(v,A)};Dn.mergeOptions({closePopupOnClick:!0}),Dn.include({openPopup:function(v,A,R){return this._initOverlay(Yl,v,A,R).openOn(this),this},closePopup:function(v){return v=arguments.length?v:this._popup,v&&v.close(),this}}),ma.include({bindPopup:function(v,A){return this._popup=this._initOverlay(Yl,this._popup,v,A),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(v){return this._popup&&(this instanceof jo||(this._popup._source=this),this._popup._prepareOpen(v||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(v){return this._popup&&this._popup.setContent(v),this},getPopup:function(){return this._popup},_openPopup:function(v){if(!(!this._popup||!this._map)){Jo(v);var A=v.layer||v.target;if(this._popup._source===A&&!(A instanceof yl)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(v.latlng);return}this._popup._source=A,this.openPopup(v.latlng)}},_movePopup:function(v){this._popup.setLatLng(v.latlng)},_onKeyPress:function(v){v.originalEvent.keyCode===13&&this._openPopup(v)}});var Fc=Io.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(v){Io.prototype.onAdd.call(this,v),this.setOpacity(this.options.opacity),v.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(v){Io.prototype.onRemove.call(this,v),v.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var v=Io.prototype.getEvents.call(this);return this.options.permanent||(v.preclick=this.close),v},_initLayout:function(){var v="leaflet-tooltip",A=v+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=On("div",A),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+s(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(v){var A,R,W=this._map,oe=this._container,Be=W.latLngToContainerPoint(W.getCenter()),$e=W.layerPointToContainerPoint(v),ot=this.options.direction,_t=oe.offsetWidth,Vt=oe.offsetHeight,mr=xt(this.options.offset),qr=this._getAnchor();ot==="top"?(A=_t/2,R=Vt):ot==="bottom"?(A=_t/2,R=0):ot==="center"?(A=_t/2,R=Vt/2):ot==="right"?(A=0,R=Vt/2):ot==="left"?(A=_t,R=Vt/2):$e.x<Be.x?(ot="right",A=0,R=Vt/2):(ot="left",A=_t+(mr.x+qr.x)*2,R=Vt/2),v=v.subtract(xt(A,R,!0)).add(mr).add(qr),mn(oe,"leaflet-tooltip-right"),mn(oe,"leaflet-tooltip-left"),mn(oe,"leaflet-tooltip-top"),mn(oe,"leaflet-tooltip-bottom"),Gr(oe,"leaflet-tooltip-"+ot),Fi(oe,v)},_updatePosition:function(){var v=this._map.latLngToLayerPoint(this._latlng);this._setPosition(v)},setOpacity:function(v){this.options.opacity=v,this._container&&No(this._container,v)},_animateZoom:function(v){var A=this._map._latLngToNewLayerPoint(this._latlng,v.zoom,v.center);this._setPosition(A)},_getAnchor:function(){return xt(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),bl=function(v,A){return new Fc(v,A)};Dn.include({openTooltip:function(v,A,R){return this._initOverlay(Fc,v,A,R).openOn(this),this},closeTooltip:function(v){return v.close(),this}}),ma.include({bindTooltip:function(v,A){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Fc,this._tooltip,v,A),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(v){if(!(!v&&this._tooltipHandlersAdded)){var A=v?"off":"on",R={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?R.add=this._openTooltip:(R.mouseover=this._openTooltip,R.mouseout=this.closeTooltip,R.click=this._openTooltip,this._map?this._addFocusListeners():R.add=this._addFocusListeners),this._tooltip.options.sticky&&(R.mousemove=this._moveTooltip),this[A](R),this._tooltipHandlersAdded=!v}},openTooltip:function(v){return this._tooltip&&(this instanceof jo||(this._tooltip._source=this),this._tooltip._prepareOpen(v)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(v){return this._tooltip&&this._tooltip.setContent(v),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(v){var A=typeof v.getElement=="function"&&v.getElement();A&&(nn(A,"focus",function(){this._tooltip._source=v,this.openTooltip()},this),nn(A,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(v){var A=typeof v.getElement=="function"&&v.getElement();A&&A.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(v){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var A=this;this._map.once("moveend",function(){A._openOnceFlag=!1,A._openTooltip(v)});return}this._tooltip._source=v.layer||v.target,this.openTooltip(this._tooltip.options.sticky?v.latlng:void 0)}},_moveTooltip:function(v){var A=v.latlng,R,W;this._tooltip.options.sticky&&v.originalEvent&&(R=this._map.mouseEventToContainerPoint(v.originalEvent),W=this._map.containerPointToLayerPoint(R),A=this._map.layerPointToLatLng(W)),this._tooltip.setLatLng(A)}});var bd=Fu.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(v){var A=v&&v.tagName==="DIV"?v:document.createElement("div"),R=this.options;if(R.html instanceof Element?(Wl(A),A.appendChild(R.html)):A.innerHTML=R.html!==!1?R.html:"",R.bgPos){var W=xt(R.bgPos);A.style.backgroundPosition=-W.x+"px "+-W.y+"px"}return this._setIconStyles(A,"icon"),A},createShadow:function(){return null}});function Vu(v){return new bd(v)}Fu.Default=kc;var Jl=ma.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Qe.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(v){Q(this,v)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(v){v._addZoomLimit(this)},onRemove:function(v){this._removeAllTiles(),Ai(this._container),v._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(cl(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Ps(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(v){return this.options.opacity=v,this._updateOpacity(),this},setZIndex:function(v){return this.options.zIndex=v,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var v=this._clampZoom(this._map.getZoom());v!==this._tileZoom&&(this._tileZoom=v,this._updateLevels()),this._update()}return this},getEvents:function(){var v={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=w(this._onMoveEnd,this.options.updateInterval,this)),v.move=this._onMove),this._zoomAnimated&&(v.zoomanim=this._animateZoom),v},createTile:function(){return document.createElement("div")},getTileSize:function(){var v=this.options.tileSize;return v instanceof Le?v:new Le(v,v)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(v){for(var A=this.getPane().children,R=-v(-1/0,1/0),W=0,oe=A.length,Be;W<oe;W++)Be=A[W].style.zIndex,A[W]!==this._container&&Be&&(R=v(R,+Be));isFinite(R)&&(this.options.zIndex=R+v(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Qe.ielt9){No(this._container,this.options.opacity);var v=+new Date,A=!1,R=!1;for(var W in this._tiles){var oe=this._tiles[W];if(!(!oe.current||!oe.loaded)){var Be=Math.min(1,(v-oe.loaded)/200);No(oe.el,Be),Be<1?A=!0:(oe.active?R=!0:this._onOpaqueTile(oe),oe.active=!0)}}R&&!this._noPrune&&this._pruneTiles(),A&&(Oe(this._fadeFrame),this._fadeFrame=je(this._updateOpacity,this))}},_onOpaqueTile:P,_initContainer:function(){this._container||(this._container=On("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var v=this._tileZoom,A=this.options.maxZoom;if(v!==void 0){for(var R in this._levels)R=Number(R),this._levels[R].el.children.length||R===v?(this._levels[R].el.style.zIndex=A-Math.abs(v-R),this._onUpdateLevel(R)):(Ai(this._levels[R].el),this._removeTilesAtZoom(R),this._onRemoveLevel(R),delete this._levels[R]);var W=this._levels[v],oe=this._map;return W||(W=this._levels[v]={},W.el=On("div","leaflet-tile-container leaflet-zoom-animated",this._container),W.el.style.zIndex=A,W.origin=oe.project(oe.unproject(oe.getPixelOrigin()),v).round(),W.zoom=v,this._setZoomTransform(W,oe.getCenter(),oe.getZoom()),P(W.el.offsetWidth),this._onCreateLevel(W)),this._level=W,W}},_onUpdateLevel:P,_onRemoveLevel:P,_onCreateLevel:P,_pruneTiles:function(){if(this._map){var v,A,R=this._map.getZoom();if(R>this.options.maxZoom||R<this.options.minZoom){this._removeAllTiles();return}for(v in this._tiles)A=this._tiles[v],A.retain=A.current;for(v in this._tiles)if(A=this._tiles[v],A.current&&!A.active){var W=A.coords;this._retainParent(W.x,W.y,W.z,W.z-5)||this._retainChildren(W.x,W.y,W.z,W.z+2)}for(v in this._tiles)this._tiles[v].retain||this._removeTile(v)}},_removeTilesAtZoom:function(v){for(var A in this._tiles)this._tiles[A].coords.z===v&&this._removeTile(A)},_removeAllTiles:function(){for(var v in this._tiles)this._removeTile(v)},_invalidateAll:function(){for(var v in this._levels)Ai(this._levels[v].el),this._onRemoveLevel(Number(v)),delete this._levels[v];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(v,A,R,W){var oe=Math.floor(v/2),Be=Math.floor(A/2),$e=R-1,ot=new Le(+oe,+Be);ot.z=+$e;var _t=this._tileCoordsToKey(ot),Vt=this._tiles[_t];return Vt&&Vt.active?(Vt.retain=!0,!0):(Vt&&Vt.loaded&&(Vt.retain=!0),$e>W?this._retainParent(oe,Be,$e,W):!1)},_retainChildren:function(v,A,R,W){for(var oe=2*v;oe<2*v+2;oe++)for(var Be=2*A;Be<2*A+2;Be++){var $e=new Le(oe,Be);$e.z=R+1;var ot=this._tileCoordsToKey($e),_t=this._tiles[ot];if(_t&&_t.active){_t.retain=!0;continue}else _t&&_t.loaded&&(_t.retain=!0);R+1<W&&this._retainChildren(oe,Be,R+1,W)}},_resetView:function(v){var A=v&&(v.pinch||v.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),A,A)},_animateZoom:function(v){this._setView(v.center,v.zoom,!0,v.noUpdate)},_clampZoom:function(v){var A=this.options;return A.minNativeZoom!==void 0&&v<A.minNativeZoom?A.minNativeZoom:A.maxNativeZoom!==void 0&&A.maxNativeZoom<v?A.maxNativeZoom:v},_setView:function(v,A,R,W){var oe=Math.round(A);this.options.maxZoom!==void 0&&oe>this.options.maxZoom||this.options.minZoom!==void 0&&oe<this.options.minZoom?oe=void 0:oe=this._clampZoom(oe);var Be=this.options.updateWhenZooming&&oe!==this._tileZoom;(!W||Be)&&(this._tileZoom=oe,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),oe!==void 0&&this._update(v),R||this._pruneTiles(),this._noPrune=!!R),this._setZoomTransforms(v,A)},_setZoomTransforms:function(v,A){for(var R in this._levels)this._setZoomTransform(this._levels[R],v,A)},_setZoomTransform:function(v,A,R){var W=this._map.getZoomScale(R,v.zoom),oe=v.origin.multiplyBy(W).subtract(this._map._getNewPixelOrigin(A,R)).round();Qe.any3d?Po(v.el,oe,W):Fi(v.el,oe)},_resetGrid:function(){var v=this._map,A=v.options.crs,R=this._tileSize=this.getTileSize(),W=this._tileZoom,oe=this._map.getPixelWorldBounds(this._tileZoom);oe&&(this._globalTileRange=this._pxBoundsToTileRange(oe)),this._wrapX=A.wrapLng&&!this.options.noWrap&&[Math.floor(v.project([0,A.wrapLng[0]],W).x/R.x),Math.ceil(v.project([0,A.wrapLng[1]],W).x/R.y)],this._wrapY=A.wrapLat&&!this.options.noWrap&&[Math.floor(v.project([A.wrapLat[0],0],W).y/R.x),Math.ceil(v.project([A.wrapLat[1],0],W).y/R.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(v){var A=this._map,R=A._animatingZoom?Math.max(A._animateToZoom,A.getZoom()):A.getZoom(),W=A.getZoomScale(R,this._tileZoom),oe=A.project(v,this._tileZoom).floor(),Be=A.getSize().divideBy(W*2);return new $t(oe.subtract(Be),oe.add(Be))},_update:function(v){var A=this._map;if(A){var R=this._clampZoom(A.getZoom());if(v===void 0&&(v=A.getCenter()),this._tileZoom!==void 0){var W=this._getTiledPixelBounds(v),oe=this._pxBoundsToTileRange(W),Be=oe.getCenter(),$e=[],ot=this.options.keepBuffer,_t=new $t(oe.getBottomLeft().subtract([ot,-ot]),oe.getTopRight().add([ot,-ot]));if(!(isFinite(oe.min.x)&&isFinite(oe.min.y)&&isFinite(oe.max.x)&&isFinite(oe.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Vt in this._tiles){var mr=this._tiles[Vt].coords;(mr.z!==this._tileZoom||!_t.contains(new Le(mr.x,mr.y)))&&(this._tiles[Vt].current=!1)}if(Math.abs(R-this._tileZoom)>1){this._setView(v,R);return}for(var qr=oe.min.y;qr<=oe.max.y;qr++)for(var Sn=oe.min.x;Sn<=oe.max.x;Sn++){var $o=new Le(Sn,qr);if($o.z=this._tileZoom,!!this._isValidTile($o)){var fo=this._tiles[this._tileCoordsToKey($o)];fo?fo.current=!0:$e.push($o)}}if($e.sort(function(ta,wl){return ta.distanceTo(Be)-wl.distanceTo(Be)}),$e.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var ga=document.createDocumentFragment();for(Sn=0;Sn<$e.length;Sn++)this._addTile($e[Sn],ga);this._level.el.appendChild(ga)}}}},_isValidTile:function(v){var A=this._map.options.crs;if(!A.infinite){var R=this._globalTileRange;if(!A.wrapLng&&(v.x<R.min.x||v.x>R.max.x)||!A.wrapLat&&(v.y<R.min.y||v.y>R.max.y))return!1}if(!this.options.bounds)return!0;var W=this._tileCoordsToBounds(v);return Hr(this.options.bounds).overlaps(W)},_keyToBounds:function(v){return this._tileCoordsToBounds(this._keyToTileCoords(v))},_tileCoordsToNwSe:function(v){var A=this._map,R=this.getTileSize(),W=v.scaleBy(R),oe=W.add(R),Be=A.unproject(W,v.z),$e=A.unproject(oe,v.z);return[Be,$e]},_tileCoordsToBounds:function(v){var A=this._tileCoordsToNwSe(v),R=new Tr(A[0],A[1]);return this.options.noWrap||(R=this._map.wrapLatLngBounds(R)),R},_tileCoordsToKey:function(v){return v.x+":"+v.y+":"+v.z},_keyToTileCoords:function(v){var A=v.split(":"),R=new Le(+A[0],+A[1]);return R.z=+A[2],R},_removeTile:function(v){var A=this._tiles[v];A&&(Ai(A.el),delete this._tiles[v],this.fire("tileunload",{tile:A.el,coords:this._keyToTileCoords(v)}))},_initTile:function(v){Gr(v,"leaflet-tile");var A=this.getTileSize();v.style.width=A.x+"px",v.style.height=A.y+"px",v.onselectstart=P,v.onmousemove=P,Qe.ielt9&&this.options.opacity<1&&No(v,this.options.opacity)},_addTile:function(v,A){var R=this._getTilePos(v),W=this._tileCoordsToKey(v),oe=this.createTile(this._wrapCoords(v),p(this._tileReady,this,v));this._initTile(oe),this.createTile.length<2&&je(p(this._tileReady,this,v,null,oe)),Fi(oe,R),this._tiles[W]={el:oe,coords:v,current:!0},A.appendChild(oe),this.fire("tileloadstart",{tile:oe,coords:v})},_tileReady:function(v,A,R){A&&this.fire("tileerror",{error:A,tile:R,coords:v});var W=this._tileCoordsToKey(v);R=this._tiles[W],R&&(R.loaded=+new Date,this._map._fadeAnimated?(No(R.el,0),Oe(this._fadeFrame),this._fadeFrame=je(this._updateOpacity,this)):(R.active=!0,this._pruneTiles()),A||(Gr(R.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:R.el,coords:v})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Qe.ielt9||!this._map._fadeAnimated?je(this._pruneTiles,this):setTimeout(p(this._pruneTiles,this),250)))},_getTilePos:function(v){return v.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(v){var A=new Le(this._wrapX?I(v.x,this._wrapX):v.x,this._wrapY?I(v.y,this._wrapY):v.y);return A.z=v.z,A},_pxBoundsToTileRange:function(v){var A=this.getTileSize();return new $t(v.min.unscaleBy(A).floor(),v.max.unscaleBy(A).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var v in this._tiles)if(!this._tiles[v].loaded)return!1;return!0}});function am(v){return new Jl(v)}var Gu=Jl.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(v,A){this._url=v,A=Q(this,A),A.detectRetina&&Qe.retina&&A.maxZoom>0?(A.tileSize=Math.floor(A.tileSize/2),A.zoomReverse?(A.zoomOffset--,A.minZoom=Math.min(A.maxZoom,A.minZoom+1)):(A.zoomOffset++,A.maxZoom=Math.max(A.minZoom,A.maxZoom-1)),A.minZoom=Math.max(0,A.minZoom)):A.zoomReverse?A.minZoom=Math.min(A.maxZoom,A.minZoom):A.maxZoom=Math.max(A.minZoom,A.maxZoom),typeof A.subdomains=="string"&&(A.subdomains=A.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(v,A){return this._url===v&&A===void 0&&(A=!0),this._url=v,A||this.redraw(),this},createTile:function(v,A){var R=document.createElement("img");return nn(R,"load",p(this._tileOnLoad,this,A,R)),nn(R,"error",p(this._tileOnError,this,A,R)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(R.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(R.referrerPolicy=this.options.referrerPolicy),R.alt="",R.src=this.getTileUrl(v),R},getTileUrl:function(v){var A={r:Qe.retina?"@2x":"",s:this._getSubdomain(v),x:v.x,y:v.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var R=this._globalTileRange.max.y-v.y;this.options.tms&&(A.y=R),A["-y"]=R}return H(this._url,u(A,this.options))},_tileOnLoad:function(v,A){Qe.ielt9?setTimeout(p(v,this,null,A),0):v(null,A)},_tileOnError:function(v,A,R){var W=this.options.errorTileUrl;W&&A.getAttribute("src")!==W&&(A.src=W),v(R,A)},_onTileRemove:function(v){v.tile.onload=null},_getZoomForUrl:function(){var v=this._tileZoom,A=this.options.maxZoom,R=this.options.zoomReverse,W=this.options.zoomOffset;return R&&(v=A-v),v+W},_getSubdomain:function(v){var A=Math.abs(v.x+v.y)%this.options.subdomains.length;return this.options.subdomains[A]},_abortLoading:function(){var v,A;for(v in this._tiles)if(this._tiles[v].coords.z!==this._tileZoom&&(A=this._tiles[v].el,A.onload=P,A.onerror=P,!A.complete)){A.src=se;var R=this._tiles[v].coords;Ai(A),delete this._tiles[v],this.fire("tileabort",{tile:A,coords:R})}},_removeTile:function(v){var A=this._tiles[v];if(A)return A.el.setAttribute("src",se),Jl.prototype._removeTile.call(this,v)},_tileReady:function(v,A,R){if(!(!this._map||R&&R.getAttribute("src")===se))return Jl.prototype._tileReady.call(this,v,A,R)}});function Pa(v,A){return new Gu(v,A)}var jc=Gu.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(v,A){this._url=v;var R=u({},this.defaultWmsParams);for(var W in A)W in this.options||(R[W]=A[W]);A=Q(this,A);var oe=A.detectRetina&&Qe.retina?2:1,Be=this.getTileSize();R.width=Be.x*oe,R.height=Be.y*oe,this.wmsParams=R},onAdd:function(v){this._crs=this.options.crs||v.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var A=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[A]=this._crs.code,Gu.prototype.onAdd.call(this,v)},getTileUrl:function(v){var A=this._tileCoordsToNwSe(v),R=this._crs,W=Wt(R.project(A[0]),R.project(A[1])),oe=W.min,Be=W.max,$e=(this._wmsVersion>=1.3&&this._crs===ks?[oe.y,oe.x,Be.y,Be.x]:[oe.x,oe.y,Be.x,Be.y]).join(","),ot=Gu.prototype.getTileUrl.call(this,v);return ot+J(this.wmsParams,ot,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+$e},setParams:function(v,A){return u(this.wmsParams,v),A||this.redraw(),this}});function Hh(v,A){return new jc(v,A)}Gu.WMS=jc,Pa.wms=Hh;var Ma=ma.extend({options:{padding:.1},initialize:function(v){Q(this,v),s(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Gr(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var v={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(v.zoomanim=this._onAnimZoom),v},_onAnimZoom:function(v){this._updateTransform(v.center,v.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(v,A){var R=this._map.getZoomScale(A,this._zoom),W=this._map.getSize().multiplyBy(.5+this.options.padding),oe=this._map.project(this._center,A),Be=W.multiplyBy(-R).add(oe).subtract(this._map._getNewPixelOrigin(v,A));Qe.any3d?Po(this._container,Be,R):Fi(this._container,Be)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var v in this._layers)this._layers[v]._reset()},_onZoomEnd:function(){for(var v in this._layers)this._layers[v]._project()},_updatePaths:function(){for(var v in this._layers)this._layers[v]._update()},_update:function(){var v=this.options.padding,A=this._map.getSize(),R=this._map.containerPointToLayerPoint(A.multiplyBy(-v)).round();this._bounds=new $t(R,R.add(A.multiplyBy(1+v*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),$c=Ma.extend({options:{tolerance:0},getEvents:function(){var v=Ma.prototype.getEvents.call(this);return v.viewprereset=this._onViewPreReset,v},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ma.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var v=this._container=document.createElement("canvas");nn(v,"mousemove",this._onMouseMove,this),nn(v,"click dblclick mousedown mouseup contextmenu",this._onClick,this),nn(v,"mouseout",this._handleMouseOut,this),v._leaflet_disable_events=!0,this._ctx=v.getContext("2d")},_destroyContainer:function(){Oe(this._redrawRequest),delete this._ctx,Ai(this._container),Un(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var v;this._redrawBounds=null;for(var A in this._layers)v=this._layers[A],v._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ma.prototype._update.call(this);var v=this._bounds,A=this._container,R=v.getSize(),W=Qe.retina?2:1;Fi(A,v.min),A.width=W*R.x,A.height=W*R.y,A.style.width=R.x+"px",A.style.height=R.y+"px",Qe.retina&&this._ctx.scale(2,2),this._ctx.translate(-v.min.x,-v.min.y),this.fire("update")}},_reset:function(){Ma.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(v){this._updateDashArray(v),this._layers[s(v)]=v;var A=v._order={layer:v,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=A),this._drawLast=A,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(v){this._requestRedraw(v)},_removePath:function(v){var A=v._order,R=A.next,W=A.prev;R?R.prev=W:this._drawLast=W,W?W.next=R:this._drawFirst=R,delete v._order,delete this._layers[s(v)],this._requestRedraw(v)},_updatePath:function(v){this._extendRedrawBounds(v),v._project(),v._update(),this._requestRedraw(v)},_updateStyle:function(v){this._updateDashArray(v),this._requestRedraw(v)},_updateDashArray:function(v){if(typeof v.options.dashArray=="string"){var A=v.options.dashArray.split(/[, ]+/),R=[],W,oe;for(oe=0;oe<A.length;oe++){if(W=Number(A[oe]),isNaN(W))return;R.push(W)}v.options._dashArray=R}else v.options._dashArray=v.options.dashArray},_requestRedraw:function(v){this._map&&(this._extendRedrawBounds(v),this._redrawRequest=this._redrawRequest||je(this._redraw,this))},_extendRedrawBounds:function(v){if(v._pxBounds){var A=(v.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new $t,this._redrawBounds.extend(v._pxBounds.min.subtract([A,A])),this._redrawBounds.extend(v._pxBounds.max.add([A,A]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var v=this._redrawBounds;if(v){var A=v.getSize();this._ctx.clearRect(v.min.x,v.min.y,A.x,A.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var v,A=this._redrawBounds;if(this._ctx.save(),A){var R=A.getSize();this._ctx.beginPath(),this._ctx.rect(A.min.x,A.min.y,R.x,R.y),this._ctx.clip()}this._drawing=!0;for(var W=this._drawFirst;W;W=W.next)v=W.layer,(!A||v._pxBounds&&v._pxBounds.intersects(A))&&v._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(v,A){if(this._drawing){var R,W,oe,Be,$e=v._parts,ot=$e.length,_t=this._ctx;if(ot){for(_t.beginPath(),R=0;R<ot;R++){for(W=0,oe=$e[R].length;W<oe;W++)Be=$e[R][W],_t[W?"lineTo":"moveTo"](Be.x,Be.y);A&&_t.closePath()}this._fillStroke(_t,v)}}},_updateCircle:function(v){if(!(!this._drawing||v._empty())){var A=v._point,R=this._ctx,W=Math.max(Math.round(v._radius),1),oe=(Math.max(Math.round(v._radiusY),1)||W)/W;oe!==1&&(R.save(),R.scale(1,oe)),R.beginPath(),R.arc(A.x,A.y/oe,W,0,Math.PI*2,!1),oe!==1&&R.restore(),this._fillStroke(R,v)}},_fillStroke:function(v,A){var R=A.options;R.fill&&(v.globalAlpha=R.fillOpacity,v.fillStyle=R.fillColor||R.color,v.fill(R.fillRule||"evenodd")),R.stroke&&R.weight!==0&&(v.setLineDash&&v.setLineDash(A.options&&A.options._dashArray||[]),v.globalAlpha=R.opacity,v.lineWidth=R.weight,v.strokeStyle=R.color,v.lineCap=R.lineCap,v.lineJoin=R.lineJoin,v.stroke())},_onClick:function(v){for(var A=this._map.mouseEventToLayerPoint(v),R,W,oe=this._drawFirst;oe;oe=oe.next)R=oe.layer,R.options.interactive&&R._containsPoint(A)&&(!(v.type==="click"||v.type==="preclick")||!this._map._draggableMoved(R))&&(W=R);this._fireEvent(W?[W]:!1,v)},_onMouseMove:function(v){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var A=this._map.mouseEventToLayerPoint(v);this._handleMouseHover(v,A)}},_handleMouseOut:function(v){var A=this._hoveredLayer;A&&(mn(this._container,"leaflet-interactive"),this._fireEvent([A],v,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(v,A){if(!this._mouseHoverThrottled){for(var R,W,oe=this._drawFirst;oe;oe=oe.next)R=oe.layer,R.options.interactive&&R._containsPoint(A)&&(W=R);W!==this._hoveredLayer&&(this._handleMouseOut(v),W&&(Gr(this._container,"leaflet-interactive"),this._fireEvent([W],v,"mouseover"),this._hoveredLayer=W)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,v),this._mouseHoverThrottled=!0,setTimeout(p(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(v,A,R){this._map._fireDOMEvent(A,R||A.type,v)},_bringToFront:function(v){var A=v._order;if(A){var R=A.next,W=A.prev;if(R)R.prev=W;else return;W?W.next=R:R&&(this._drawFirst=R),A.prev=this._drawLast,this._drawLast.next=A,A.next=null,this._drawLast=A,this._requestRedraw(v)}},_bringToBack:function(v){var A=v._order;if(A){var R=A.next,W=A.prev;if(W)W.next=R;else return;R?R.prev=W:W&&(this._drawLast=W),A.prev=null,A.next=this._drawFirst,this._drawFirst.prev=A,this._drawFirst=A,this._requestRedraw(v)}}});function Wh(v){return Qe.canvas?new $c(v):null}var Ql=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(v){return document.createElement("<lvml:"+v+' class="lvml">')}}catch{}return function(v){return document.createElement("<"+v+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),sm={_initContainer:function(){this._container=On("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ma.prototype._update.call(this),this.fire("update"))},_initPath:function(v){var A=v._container=Ql("shape");Gr(A,"leaflet-vml-shape "+(this.options.className||"")),A.coordsize="1 1",v._path=Ql("path"),A.appendChild(v._path),this._updateStyle(v),this._layers[s(v)]=v},_addPath:function(v){var A=v._container;this._container.appendChild(A),v.options.interactive&&v.addInteractiveTarget(A)},_removePath:function(v){var A=v._container;Ai(A),v.removeInteractiveTarget(A),delete this._layers[s(v)]},_updateStyle:function(v){var A=v._stroke,R=v._fill,W=v.options,oe=v._container;oe.stroked=!!W.stroke,oe.filled=!!W.fill,W.stroke?(A||(A=v._stroke=Ql("stroke")),oe.appendChild(A),A.weight=W.weight+"px",A.color=W.color,A.opacity=W.opacity,W.dashArray?A.dashStyle=K(W.dashArray)?W.dashArray.join(" "):W.dashArray.replace(/( *, *)/g," "):A.dashStyle="",A.endcap=W.lineCap.replace("butt","flat"),A.joinstyle=W.lineJoin):A&&(oe.removeChild(A),v._stroke=null),W.fill?(R||(R=v._fill=Ql("fill")),oe.appendChild(R),R.color=W.fillColor||W.color,R.opacity=W.fillOpacity):R&&(oe.removeChild(R),v._fill=null)},_updateCircle:function(v){var A=v._point.round(),R=Math.round(v._radius),W=Math.round(v._radiusY||R);this._setPath(v,v._empty()?"M0 0":"AL "+A.x+","+A.y+" "+R+","+W+" 0,"+65535*360)},_setPath:function(v,A){v._path.v=A},_bringToFront:function(v){cl(v._container)},_bringToBack:function(v){Ps(v._container)}},Ns=Qe.vml?Ql:$n,ms=Ma.extend({_initContainer:function(){this._container=Ns("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ns("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ai(this._container),Un(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ma.prototype._update.call(this);var v=this._bounds,A=v.getSize(),R=this._container;(!this._svgSize||!this._svgSize.equals(A))&&(this._svgSize=A,R.setAttribute("width",A.x),R.setAttribute("height",A.y)),Fi(R,v.min),R.setAttribute("viewBox",[v.min.x,v.min.y,A.x,A.y].join(" ")),this.fire("update")}},_initPath:function(v){var A=v._path=Ns("path");v.options.className&&Gr(A,v.options.className),v.options.interactive&&Gr(A,"leaflet-interactive"),this._updateStyle(v),this._layers[s(v)]=v},_addPath:function(v){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(v._path),v.addInteractiveTarget(v._path)},_removePath:function(v){Ai(v._path),v.removeInteractiveTarget(v._path),delete this._layers[s(v)]},_updatePath:function(v){v._project(),v._update()},_updateStyle:function(v){var A=v._path,R=v.options;A&&(R.stroke?(A.setAttribute("stroke",R.color),A.setAttribute("stroke-opacity",R.opacity),A.setAttribute("stroke-width",R.weight),A.setAttribute("stroke-linecap",R.lineCap),A.setAttribute("stroke-linejoin",R.lineJoin),R.dashArray?A.setAttribute("stroke-dasharray",R.dashArray):A.removeAttribute("stroke-dasharray"),R.dashOffset?A.setAttribute("stroke-dashoffset",R.dashOffset):A.removeAttribute("stroke-dashoffset")):A.setAttribute("stroke","none"),R.fill?(A.setAttribute("fill",R.fillColor||R.color),A.setAttribute("fill-opacity",R.fillOpacity),A.setAttribute("fill-rule",R.fillRule||"evenodd")):A.setAttribute("fill","none"))},_updatePoly:function(v,A){this._setPath(v,ei(v._parts,A))},_updateCircle:function(v){var A=v._point,R=Math.max(Math.round(v._radius),1),W=Math.max(Math.round(v._radiusY),1)||R,oe="a"+R+","+W+" 0 1,0 ",Be=v._empty()?"M0 0":"M"+(A.x-R)+","+A.y+oe+R*2+",0 "+oe+-R*2+",0 ";this._setPath(v,Be)},_setPath:function(v,A){v._path.setAttribute("d",A)},_bringToFront:function(v){cl(v._path)},_bringToBack:function(v){Ps(v._path)}});Qe.vml&&ms.include(sm);function Zh(v){return Qe.svg||Qe.vml?new ms(v):null}Dn.include({getRenderer:function(v){var A=v.options.renderer||this._getPaneRenderer(v.options.pane)||this.options.renderer||this._renderer;return A||(A=this._renderer=this._createRenderer()),this.hasLayer(A)||this.addLayer(A),A},_getPaneRenderer:function(v){if(v==="overlayPane"||v===void 0)return!1;var A=this._paneRenderers[v];return A===void 0&&(A=this._createRenderer({pane:v}),this._paneRenderers[v]=A),A},_createRenderer:function(v){return this.options.preferCanvas&&Wh(v)||Zh(v)}});var Hu=vl.extend({initialize:function(v,A){vl.prototype.initialize.call(this,this._boundsToLatLngs(v),A)},setBounds:function(v){return this.setLatLngs(this._boundsToLatLngs(v))},_boundsToLatLngs:function(v){return v=Hr(v),[v.getSouthWest(),v.getNorthWest(),v.getNorthEast(),v.getSouthEast()]}});function Wu(v,A){return new Hu(v,A)}ms.create=Ns,ms.pointsToPath=ei,Ya.geometryToLayer=ql,Ya.coordsToLatLng=Rs,Ya.coordsToLatLngs=Kl,Ya.latLngToCoords=Xl,Ya.latLngsToCoords=$u,Ya.getFeature=ps,Ya.asFeature=zs,Dn.mergeOptions({boxZoom:!0});var ea=Bo.extend({initialize:function(v){this._map=v,this._container=v._container,this._pane=v._panes.overlayPane,this._resetStateTimeout=0,v.on("unload",this._destroy,this)},addHooks:function(){nn(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Un(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ai(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(v){if(!v.shiftKey||v.which!==1&&v.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),cs(),Yo(),this._startPoint=this._map.mouseEventToContainerPoint(v),nn(document,{contextmenu:Jo,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(v){this._moved||(this._moved=!0,this._box=On("div","leaflet-zoom-box",this._container),Gr(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(v);var A=new $t(this._point,this._startPoint),R=A.getSize();Fi(this._box,A.min),this._box.style.width=R.x+"px",this._box.style.height=R.y+"px"},_finish:function(){this._moved&&(Ai(this._box),mn(this._container,"leaflet-crosshair")),Gt(),hl(),Un(document,{contextmenu:Jo,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(v){if(!(v.which!==1&&v.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(p(this._resetState,this),0);var A=new Tr(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(A).fire("boxzoomend",{boxZoomBounds:A})}},_onKeyDown:function(v){v.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Dn.addInitHook("addHandler","boxZoom",ea),Dn.mergeOptions({doubleClickZoom:!0});var eu=Bo.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(v){var A=this._map,R=A.getZoom(),W=A.options.zoomDelta,oe=v.originalEvent.shiftKey?R-W:R+W;A.options.doubleClickZoom==="center"?A.setZoom(oe):A.setZoomAround(v.containerPoint,oe)}});Dn.addInitHook("addHandler","doubleClickZoom",eu),Dn.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var qh=Bo.extend({addHooks:function(){if(!this._draggable){var v=this._map;this._draggable=new da(v._mapPane,v._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),v.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),v.on("zoomend",this._onZoomEnd,this),v.whenReady(this._onZoomEnd,this))}Gr(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){mn(this._map._container,"leaflet-grab"),mn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var v=this._map;if(v._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var A=Hr(this._map.options.maxBounds);this._offsetLimit=Wt(this._map.latLngToContainerPoint(A.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(A.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;v.fire("movestart").fire("dragstart"),v.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(v){if(this._map.options.inertia){var A=this._lastTime=+new Date,R=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(R),this._times.push(A),this._prunePositions(A)}this._map.fire("move",v).fire("drag",v)},_prunePositions:function(v){for(;this._positions.length>1&&v-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var v=this._map.getSize().divideBy(2),A=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=A.subtract(v).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(v,A){return v-(v-A)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var v=this._draggable._newPos.subtract(this._draggable._startPos),A=this._offsetLimit;v.x<A.min.x&&(v.x=this._viscousLimit(v.x,A.min.x)),v.y<A.min.y&&(v.y=this._viscousLimit(v.y,A.min.y)),v.x>A.max.x&&(v.x=this._viscousLimit(v.x,A.max.x)),v.y>A.max.y&&(v.y=this._viscousLimit(v.y,A.max.y)),this._draggable._newPos=this._draggable._startPos.add(v)}},_onPreDragWrap:function(){var v=this._worldWidth,A=Math.round(v/2),R=this._initialWorldOffset,W=this._draggable._newPos.x,oe=(W-A+R)%v+A-R,Be=(W+A+R)%v-A-R,$e=Math.abs(oe+R)<Math.abs(Be+R)?oe:Be;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=$e},_onDragEnd:function(v){var A=this._map,R=A.options,W=!R.inertia||v.noInertia||this._times.length<2;if(A.fire("dragend",v),W)A.fire("moveend");else{this._prunePositions(+new Date);var oe=this._lastPos.subtract(this._positions[0]),Be=(this._lastTime-this._times[0])/1e3,$e=R.easeLinearity,ot=oe.multiplyBy($e/Be),_t=ot.distanceTo([0,0]),Vt=Math.min(R.inertiaMaxSpeed,_t),mr=ot.multiplyBy(Vt/_t),qr=Vt/(R.inertiaDeceleration*$e),Sn=mr.multiplyBy(-qr/2).round();!Sn.x&&!Sn.y?A.fire("moveend"):(Sn=A._limitOffset(Sn,A.options.maxBounds),je(function(){A.panBy(Sn,{duration:qr,easeLinearity:$e,noMoveStart:!0,animate:!0})}))}}});Dn.addInitHook("addHandler","dragging",qh),Dn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Uc=Bo.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(v){this._map=v,this._setPanDelta(v.options.keyboardPanDelta),this._setZoomDelta(v.options.zoomDelta)},addHooks:function(){var v=this._map._container;v.tabIndex<=0&&(v.tabIndex="0"),nn(v,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Un(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var v=document.body,A=document.documentElement,R=v.scrollTop||A.scrollTop,W=v.scrollLeft||A.scrollLeft;this._map._container.focus(),window.scrollTo(W,R)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(v){var A=this._panKeys={},R=this.keyCodes,W,oe;for(W=0,oe=R.left.length;W<oe;W++)A[R.left[W]]=[-1*v,0];for(W=0,oe=R.right.length;W<oe;W++)A[R.right[W]]=[v,0];for(W=0,oe=R.down.length;W<oe;W++)A[R.down[W]]=[0,v];for(W=0,oe=R.up.length;W<oe;W++)A[R.up[W]]=[0,-1*v]},_setZoomDelta:function(v){var A=this._zoomKeys={},R=this.keyCodes,W,oe;for(W=0,oe=R.zoomIn.length;W<oe;W++)A[R.zoomIn[W]]=v;for(W=0,oe=R.zoomOut.length;W<oe;W++)A[R.zoomOut[W]]=-v},_addHooks:function(){nn(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Un(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(v){if(!(v.altKey||v.ctrlKey||v.metaKey)){var A=v.keyCode,R=this._map,W;if(A in this._panKeys){if(!R._panAnim||!R._panAnim._inProgress)if(W=this._panKeys[A],v.shiftKey&&(W=xt(W).multiplyBy(3)),R.options.maxBounds&&(W=R._limitOffset(xt(W),R.options.maxBounds)),R.options.worldCopyJump){var oe=R.wrapLatLng(R.unproject(R.project(R.getCenter()).add(W)));R.panTo(oe)}else R.panBy(W)}else if(A in this._zoomKeys)R.setZoom(R.getZoom()+(v.shiftKey?3:1)*this._zoomKeys[A]);else if(A===27&&R._popup&&R._popup.options.closeOnEscapeKey)R.closePopup();else return;Jo(v)}}});Dn.addInitHook("addHandler","keyboard",Uc),Dn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Kh=Bo.extend({addHooks:function(){nn(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Un(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(v){var A=Ih(v),R=this._map.options.wheelDebounceTime;this._delta+=A,this._lastMousePos=this._map.mouseEventToContainerPoint(v),this._startTime||(this._startTime=+new Date);var W=Math.max(R-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(p(this._performZoom,this),W),Jo(v)},_performZoom:function(){var v=this._map,A=v.getZoom(),R=this._map.options.zoomSnap||0;v._stop();var W=this._delta/(this._map.options.wheelPxPerZoomLevel*4),oe=4*Math.log(2/(1+Math.exp(-Math.abs(W))))/Math.LN2,Be=R?Math.ceil(oe/R)*R:oe,$e=v._limitZoom(A+(this._delta>0?Be:-Be))-A;this._delta=0,this._startTime=null,$e&&(v.options.scrollWheelZoom==="center"?v.setZoom(A+$e):v.setZoomAround(this._lastMousePos,A+$e))}});Dn.addInitHook("addHandler","scrollWheelZoom",Kh);var Cl=600;Dn.mergeOptions({tapHold:Qe.touchNative&&Qe.safari&&Qe.mobile,tapTolerance:15});var an=Bo.extend({addHooks:function(){nn(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Un(this._map._container,"touchstart",this._onDown,this)},_onDown:function(v){if(clearTimeout(this._holdTimeout),v.touches.length===1){var A=v.touches[0];this._startPos=this._newPos=new Le(A.clientX,A.clientY),this._holdTimeout=setTimeout(p(function(){this._cancel(),this._isTapValid()&&(nn(document,"touchend",oi),nn(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",A))},this),Cl),nn(document,"touchend touchcancel contextmenu",this._cancel,this),nn(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function v(){Un(document,"touchend",oi),Un(document,"touchend touchcancel",v)},_cancel:function(){clearTimeout(this._holdTimeout),Un(document,"touchend touchcancel contextmenu",this._cancel,this),Un(document,"touchmove",this._onMove,this)},_onMove:function(v){var A=v.touches[0];this._newPos=new Le(A.clientX,A.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(v,A){var R=new MouseEvent(v,{bubbles:!0,cancelable:!0,view:window,screenX:A.screenX,screenY:A.screenY,clientX:A.clientX,clientY:A.clientY});R._simulated=!0,A.target.dispatchEvent(R)}});Dn.addInitHook("addHandler","tapHold",an),Dn.mergeOptions({touchZoom:Qe.touch,bounceAtZoomLimits:!0});var Xh=Bo.extend({addHooks:function(){Gr(this._map._container,"leaflet-touch-zoom"),nn(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){mn(this._map._container,"leaflet-touch-zoom"),Un(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(v){var A=this._map;if(!(!v.touches||v.touches.length!==2||A._animatingZoom||this._zooming)){var R=A.mouseEventToContainerPoint(v.touches[0]),W=A.mouseEventToContainerPoint(v.touches[1]);this._centerPoint=A.getSize()._divideBy(2),this._startLatLng=A.containerPointToLatLng(this._centerPoint),A.options.touchZoom!=="center"&&(this._pinchStartLatLng=A.containerPointToLatLng(R.add(W)._divideBy(2))),this._startDist=R.distanceTo(W),this._startZoom=A.getZoom(),this._moved=!1,this._zooming=!0,A._stop(),nn(document,"touchmove",this._onTouchMove,this),nn(document,"touchend touchcancel",this._onTouchEnd,this),oi(v)}},_onTouchMove:function(v){if(!(!v.touches||v.touches.length!==2||!this._zooming)){var A=this._map,R=A.mouseEventToContainerPoint(v.touches[0]),W=A.mouseEventToContainerPoint(v.touches[1]),oe=R.distanceTo(W)/this._startDist;if(this._zoom=A.getScaleZoom(oe,this._startZoom),!A.options.bounceAtZoomLimits&&(this._zoom<A.getMinZoom()&&oe<1||this._zoom>A.getMaxZoom()&&oe>1)&&(this._zoom=A._limitZoom(this._zoom)),A.options.touchZoom==="center"){if(this._center=this._startLatLng,oe===1)return}else{var Be=R._add(W)._divideBy(2)._subtract(this._centerPoint);if(oe===1&&Be.x===0&&Be.y===0)return;this._center=A.unproject(A.project(this._pinchStartLatLng,this._zoom).subtract(Be),this._zoom)}this._moved||(A._moveStart(!0,!1),this._moved=!0),Oe(this._animRequest);var $e=p(A._move,A,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=je($e,this,!0),oi(v)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Oe(this._animRequest),Un(document,"touchmove",this._onTouchMove,this),Un(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Dn.addInitHook("addHandler","touchZoom",Xh),Dn.BoxZoom=ea,Dn.DoubleClickZoom=eu,Dn.Drag=qh,Dn.Keyboard=Uc,Dn.ScrollWheelZoom=Kh,Dn.TapHold=an,Dn.TouchZoom=Xh,r.Bounds=$t,r.Browser=Qe,r.CRS=jn,r.Canvas=$c,r.Circle=Uh,r.CircleMarker=$h,r.Class=ht,r.Control=Qo,r.DivIcon=bd,r.DivOverlay=Io,r.DomEvent=Lu,r.DomUtil=dr,r.Draggable=da,r.Evented=St,r.FeatureGroup=jo,r.GeoJSON=Ya,r.GridLayer=Jl,r.Handler=Bo,r.Icon=Fu,r.ImageOverlay=Gi,r.LatLng=Wr,r.LatLngBounds=Tr,r.Layer=ma,r.LayerGroup=Da,r.LineUtil=Ut,r.Map=Dn,r.Marker=Lc,r.Mixin=_l,r.Path=yl,r.Point=Le,r.PolyUtil=Pc,r.Polygon=vl,r.Polyline=Ls,r.Popup=Yl,r.PosAnimation=gl,r.Projection=Oc,r.Rectangle=Hu,r.Renderer=Ma,r.SVG=ms,r.SVGOverlay=Bd,r.TileLayer=Gu,r.Tooltip=Fc,r.Transformation=Ur,r.Util=ct,r.VideoOverlay=Mo,r.bind=p,r.bounds=Wt,r.canvas=Wh,r.circle=Rc,r.circleMarker=F_,r.control=fa,r.divIcon=Vu,r.extend=u,r.featureGroup=gd,r.geoJSON=Uu,r.geoJson=zc,r.gridLayer=am,r.icon=ju,r.imageOverlay=xl,r.latLng=zr,r.latLngBounds=Hr,r.layerGroup=jh,r.map=Ka,r.marker=yd,r.point=xt,r.polygon=om,r.polyline=Vh,r.popup=Nc,r.rectangle=Wu,r.setOptions=Q,r.stamp=s,r.svg=Zh,r.svgOverlay=xd,r.tileLayer=Pa,r.tooltip=bl,r.transformation=kt,r.version=o,r.videoOverlay=vd;var j_=window.L;r.noConflict=function(){return window.L=j_,this},window.L=r})})(j5,j5.exports);const Sne="modulepreload",Tne=function(t){return"/should-i-drink/"+t},$5={},Ane=function(e,r,o){let u=Promise.resolve();if(r&&r.length>0){const f=document.getElementsByTagName("link"),p=document.querySelector("meta[property=csp-nonce]"),x=(p==null?void 0:p.nonce)||(p==null?void 0:p.getAttribute("nonce"));u=Promise.all(r.map(s=>{if(s=Tne(s),s in $5)return;$5[s]=!0;const w=s.endsWith(".css"),I=w?'[rel="stylesheet"]':"";if(!!o)for(let U=f.length-1;U>=0;U--){const X=f[U];if(X.href===s&&(!w||X.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${I}`))return;const N=document.createElement("link");if(N.rel=w?"stylesheet":Sne,w||(N.as="script",N.crossOrigin=""),N.href=s,x&&N.setAttribute("nonce",x),document.head.appendChild(N),w)return new Promise((U,X)=>{N.addEventListener("load",U),N.addEventListener("error",()=>X(new Error(`Unable to preload CSS for ${s}`)))})}))}return u.then(()=>e()).catch(f=>{const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=f,window.dispatchEvent(p),!p.defaultPrevented)throw f})},Ene=Te.createContext(null);function Dne(t,e){const r=Array.isArray(t)?t[0]:t?t.x:0,o=Array.isArray(t)?t[1]:t?t.y:0,u=Array.isArray(e)?e[0]:e?e.x:0,f=Array.isArray(e)?e[1]:e?e.y:0;return r===u&&o===f}function Js(t,e){if(t===e)return!0;if(!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!Js(t[r],e[r]))return!1;return!0}else if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const r=Object.keys(t),o=Object.keys(e);if(r.length!==o.length)return!1;for(const u of r)if(!e.hasOwnProperty(u)||!Js(t[u],e[u]))return!1;return!0}return!1}function Pne(t){const e=t.clone();return e.pixelsToGLUnits=t.pixelsToGLUnits,e}function U5(t,e){if(!t.getProjection)return;const r=t.getProjection(),o=e.getProjection();Js(r,o)||e.setProjection(r)}function V5(t){return{longitude:t.center.lng,latitude:t.center.lat,zoom:t.zoom,pitch:t.pitch,bearing:t.bearing,padding:t.padding}}function G5(t,e){const r=e.viewState||e;let o=!1;if("longitude"in r&&"latitude"in r){const u=t.center;t.center=new u.constructor(r.longitude,r.latitude),o=o||u!==t.center}if("zoom"in r){const u=t.zoom;t.zoom=r.zoom,o=o||u!==t.zoom}if("bearing"in r){const u=t.bearing;t.bearing=r.bearing,o=o||u!==t.bearing}if("pitch"in r){const u=t.pitch;t.pitch=r.pitch,o=o||u!==t.pitch}return r.padding&&!t.isPaddingEqual(r.padding)&&(o=!0,t.padding=r.padding),o}const Mne=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function H5(t){if(!t)return null;if(typeof t=="string"||("toJS"in t&&(t=t.toJS()),!t.layers))return t;const e={};for(const o of t.layers)e[o.id]=o;const r=t.layers.map(o=>{let u=null;"interactive"in o&&(u=Object.assign({},o),delete u.interactive);const f=e[o.ref];if(f){u=u||Object.assign({},o),delete u.ref;for(const p of Mne)p in f&&(u[p]=f[p])}return u||o});return{...t,layers:r}}var W5={};const Z5={version:8,sources:{},layers:[]},q5={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},iE={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},K5={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},Ine=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],One=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class Hg{constructor(e,r,o){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=u=>{const f=this.props[K5[u.type]];f?f(u):u.type==="error"&&console.error(u.error)},this._onPointerEvent=u=>{(u.type==="mousemove"||u.type==="mouseout")&&this._updateHover(u);const f=this.props[q5[u.type]];f&&(this.props.interactiveLayerIds&&u.type!=="mouseover"&&u.type!=="mouseout"&&(u.features=this._hoveredFeatures||this._queryRenderedFeatures(u.point)),f(u),delete u.features)},this._onCameraEvent=u=>{if(!this._internalUpdate){const f=this.props[iE[u.type]];f&&f(u)}u.type in this._deferredEvents&&(this._deferredEvents[u.type]=!1)},this._MapClass=e,this.props=r,this._initialize(o)}get map(){return this._map}get transform(){return this._renderTransform}setProps(e){const r=this.props;this.props=e;const o=this._updateSettings(e,r);o&&this._createShadowTransform(this._map);const u=this._updateSize(e),f=this._updateViewState(e,!0);this._updateStyle(e,r),this._updateStyleComponents(e,r),this._updateHandlers(e,r),(o||u||f&&!this._map.isMoving())&&this.redraw()}static reuse(e,r){const o=Hg.savedMaps.pop();if(!o)return null;const u=o.map,f=u.getContainer();for(r.className=f.className;f.childNodes.length>0;)r.appendChild(f.childNodes[0]);u._container=r;const p=u._resizeObserver;p&&(p.disconnect(),p.observe(r)),o.setProps({...e,styleDiffing:!1}),u.resize();const{initialViewState:x}=e;return x&&(x.bounds?u.fitBounds(x.bounds,{...x.fitBoundsOptions,duration:0}):o._updateViewState(x,!1)),u.isStyleLoaded()?u.fire("load"):u.once("styledata",()=>u.fire("load")),u._update(),o}_initialize(e){const{props:r}=this,{mapStyle:o=Z5}=r,u={...r,...r.initialViewState,accessToken:r.mapboxAccessToken||kne()||null,container:e,style:H5(o)},f=u.initialViewState||u.viewState||u;if(Object.assign(u,{center:[f.longitude||0,f.latitude||0],zoom:f.zoom||0,pitch:f.pitch||0,bearing:f.bearing||0}),r.gl){const I=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=I,r.gl)}const p=new this._MapClass(u);f.padding&&p.setPadding(f.padding),r.cursor&&(p.getCanvas().style.cursor=r.cursor),this._createShadowTransform(p);const x=p._render;p._render=I=>{this._inRender=!0,x.call(p,I),this._inRender=!1};const s=p._renderTaskQueue.run;p._renderTaskQueue.run=I=>{s.call(p._renderTaskQueue,I),this._onBeforeRepaint()},p.on("render",()=>this._onAfterRepaint());const w=p.fire;p.fire=this._fireEvent.bind(this,w),p.on("resize",()=>{this._renderTransform.resize(p.transform.width,p.transform.height)}),p.on("styledata",()=>{this._updateStyleComponents(this.props,{}),U5(p.transform,this._renderTransform)}),p.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const I in q5)p.on(I,this._onPointerEvent);for(const I in iE)p.on(I,this._onCameraEvent);for(const I in K5)p.on(I,this._onEvent);this._map=p}recycle(){const r=this.map.getContainer().querySelector("[mapboxgl-children]");r==null||r.remove(),Hg.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const e=this._map;!this._inRender&&e.style&&(e._frame&&(e._frame.cancel(),e._frame=null),e._render())}_createShadowTransform(e){const r=Pne(e.transform);e.painter.transform=r,this._renderTransform=r}_updateSize(e){const{viewState:r}=e;if(r){const o=this._map;if(r.width!==o.transform.width||r.height!==o.transform.height)return o.resize(),!0}return!1}_updateViewState(e,r){if(this._internalUpdate)return!1;const o=this._map,u=this._renderTransform,{zoom:f,pitch:p,bearing:x}=u,s=o.isMoving();s&&(u.cameraElevationReference="sea");const w=G5(u,{...V5(o.transform),...e});if(s&&(u.cameraElevationReference="ground"),w&&r){const I=this._deferredEvents;I.move=!0,I.zoom||(I.zoom=f!==u.zoom),I.rotate||(I.rotate=x!==u.bearing),I.pitch||(I.pitch=p!==u.pitch)}return s||G5(o.transform,e),w}_updateSettings(e,r){const o=this._map;let u=!1;for(const f of Ine)if(f in e&&!Js(e[f],r[f])){u=!0;const p=o[`set${f[0].toUpperCase()}${f.slice(1)}`];p==null||p.call(o,e[f])}return u}_updateStyle(e,r){if(e.cursor!==r.cursor&&(this._map.getCanvas().style.cursor=e.cursor||""),e.mapStyle!==r.mapStyle){const{mapStyle:o=Z5,styleDiffing:u=!0}=e,f={diff:u};return"localIdeographFontFamily"in e&&(f.localIdeographFontFamily=e.localIdeographFontFamily),this._map.setStyle(H5(o),f),!0}return!1}_updateStyleComponents(e,r){const o=this._map;let u=!1;return o.isStyleLoaded()&&("light"in e&&o.setLight&&!Js(e.light,r.light)&&(u=!0,o.setLight(e.light)),"fog"in e&&o.setFog&&!Js(e.fog,r.fog)&&(u=!0,o.setFog(e.fog)),"terrain"in e&&o.setTerrain&&!Js(e.terrain,r.terrain)&&(!e.terrain||o.getSource(e.terrain.source))&&(u=!0,o.setTerrain(e.terrain))),u}_updateHandlers(e,r){var o,u;const f=this._map;let p=!1;for(const x of One){const s=(o=e[x])!==null&&o!==void 0?o:!0,w=(u=r[x])!==null&&u!==void 0?u:!0;Js(s,w)||(p=!0,s?f[x].enable(s):f[x].disable())}return p}_queryRenderedFeatures(e){const r=this._map,o=r.transform,{interactiveLayerIds:u=[]}=this.props;try{return r.transform=this._renderTransform,r.queryRenderedFeatures(e,{layers:u.filter(r.getLayer.bind(r))})}catch{return[]}finally{r.transform=o}}_updateHover(e){var r;const{props:o}=this;if(o.interactiveLayerIds&&(o.onMouseMove||o.onMouseEnter||o.onMouseLeave)){const f=e.type,p=((r=this._hoveredFeatures)===null||r===void 0?void 0:r.length)>0,x=this._queryRenderedFeatures(e.point),s=x.length>0;!s&&p&&(e.type="mouseleave",this._onPointerEvent(e)),this._hoveredFeatures=x,s&&!p&&(e.type="mouseenter",this._onPointerEvent(e)),e.type=f}else this._hoveredFeatures=null}_fireEvent(e,r,o){const u=this._map,f=u.transform,p=typeof r=="string"?r:r.type;return p==="move"&&this._updateViewState(this.props,!1),p in iE&&(typeof r=="object"&&(r.viewState=V5(f)),this._map.isMoving())?(u.transform=this._renderTransform,e.call(u,r,o),u.transform=f,u):(e.call(u,r,o),u)}_onBeforeRepaint(){const e=this._map;this._internalUpdate=!0;for(const o in this._deferredEvents)this._deferredEvents[o]&&e.fire(o);this._internalUpdate=!1;const r=this._map.transform;e.transform=this._renderTransform,this._onAfterRepaint=()=>{U5(this._renderTransform,r),e.transform=r}}}Hg.savedMaps=[];function kne(){let t=null;if(typeof location<"u"){const e=/access_token=([^&\/]*)/.exec(location.search);t=e&&e[1]}try{t=t||W5.MapboxAccessToken}catch{}try{t=t||W5.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return t}const Lne=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function Rne(t){if(!t)return null;const e=t.map,r={getMap:()=>e,getCenter:()=>t.transform.center,getZoom:()=>t.transform.zoom,getBearing:()=>t.transform.bearing,getPitch:()=>t.transform.pitch,getPadding:()=>t.transform.padding,getBounds:()=>t.transform.getBounds(),project:o=>{const u=e.transform;e.transform=t.transform;const f=e.project(o);return e.transform=u,f},unproject:o=>{const u=e.transform;e.transform=t.transform;const f=e.unproject(o);return e.transform=u,f},queryTerrainElevation:(o,u)=>{const f=e.transform;e.transform=t.transform;const p=e.queryTerrainElevation(o,u);return e.transform=f,p},queryRenderedFeatures:(o,u)=>{const f=e.transform;e.transform=t.transform;const p=e.queryRenderedFeatures(o,u);return e.transform=f,p}};for(const o of zne(e))!(o in r)&&!Lne.includes(o)&&(r[o]=e[o].bind(e));return r}function zne(t){const e=new Set;let r=t;for(;r;){for(const o of Object.getOwnPropertyNames(r))o[0]!=="_"&&typeof t[o]=="function"&&o!=="fire"&&o!=="setEventedParent"&&e.add(o);r=Object.getPrototypeOf(r)}return Array.from(e)}const Nne=typeof document<"u"?Te.useLayoutEffect:Te.useEffect,Fne=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function jne(t,e){for(const o of Fne)o in e&&(t[o]=e[o]);const{RTLTextPlugin:r="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=e;r&&t.getRTLTextPluginStatus&&t.getRTLTextPluginStatus()==="unavailable"&&t.setRTLTextPlugin(r,o=>{o&&console.error(o)},!0)}const B_=Te.createContext(null);function $ne(t,e,r){const o=Te.useContext(Ene),[u,f]=Te.useState(null),p=Te.useRef(),{current:x}=Te.useRef({mapLib:null,map:null});Te.useEffect(()=>{const I=t.mapLib;let P=!0,N;return Promise.resolve(I||r).then(U=>{if(!P)return;if(!U)throw new Error("Invalid mapLib");const X="Map"in U?U:U.default;if(!X.Map)throw new Error("Invalid mapLib");if(jne(X,t),!X.supported||X.supported(t))t.reuseMaps&&(N=Hg.reuse(t,p.current)),N||(N=new Hg(X.Map,t,p.current)),x.map=Rne(N),x.mapLib=X,f(N),o==null||o.onMapMount(x.map,t.id);else throw new Error("Map is not supported by this browser")}).catch(U=>{const{onError:X}=t;X?X({type:"error",target:null,originalEvent:null,error:U}):console.error(U)}),()=>{P=!1,N&&(o==null||o.onMapUnmount(t.id),t.reuseMaps?N.recycle():N.destroy())}},[]),Nne(()=>{u&&u.setProps(t)}),Te.useImperativeHandle(e,()=>x.map,[u]);const s=Te.useMemo(()=>({position:"relative",width:"100%",height:"100%",...t.style}),[t.style]),w={height:"100%"};return Te.createElement("div",{id:t.id,ref:p,style:s},u&&Te.createElement(B_.Provider,{value:x},Te.createElement("div",{"mapboxgl-children":"",style:w},t.children)))}const Une=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function qp(t,e){if(!t||!e)return;const r=t.style;for(const o in e){const u=e[o];Number.isFinite(u)&&!Une.test(o)?r[o]=`${u}px`:r[o]=u}}function Vne(t,e){const{map:r,mapLib:o}=Te.useContext(B_),u=Te.useRef({props:t});u.current.props=t;const f=Te.useMemo(()=>{let Q=!1;Te.Children.forEach(t.children,H=>{H&&(Q=!0)});const J={...t,element:Q?document.createElement("div"):null},Z=new o.Marker(J);return Z.setLngLat([t.longitude,t.latitude]),Z.getElement().addEventListener("click",H=>{var K,ee;(ee=(K=u.current.props).onClick)===null||ee===void 0||ee.call(K,{type:"click",target:Z,originalEvent:H})}),Z.on("dragstart",H=>{var K,ee;const se=H;se.lngLat=f.getLngLat(),(ee=(K=u.current.props).onDragStart)===null||ee===void 0||ee.call(K,se)}),Z.on("drag",H=>{var K,ee;const se=H;se.lngLat=f.getLngLat(),(ee=(K=u.current.props).onDrag)===null||ee===void 0||ee.call(K,se)}),Z.on("dragend",H=>{var K,ee;const se=H;se.lngLat=f.getLngLat(),(ee=(K=u.current.props).onDragEnd)===null||ee===void 0||ee.call(K,se)}),Z},[]);Te.useEffect(()=>(f.addTo(r.getMap()),()=>{f.remove()}),[]);const{longitude:p,latitude:x,offset:s,style:w,draggable:I=!1,popup:P=null,rotation:N=0,rotationAlignment:U="auto",pitchAlignment:X="auto"}=t;return Te.useEffect(()=>{qp(f.getElement(),w)},[w]),Te.useImperativeHandle(e,()=>f,[]),(f.getLngLat().lng!==p||f.getLngLat().lat!==x)&&f.setLngLat([p,x]),s&&!Dne(f.getOffset(),s)&&f.setOffset(s),f.isDraggable()!==I&&f.setDraggable(I),f.getRotation()!==N&&f.setRotation(N),f.getRotationAlignment()!==U&&f.setRotationAlignment(U),f.getPitchAlignment()!==X&&f.setPitchAlignment(X),f.getPopup()!==P&&f.setPopup(P),u3.createPortal(t.children,f.getElement())}const Gne=Te.memo(Te.forwardRef(Vne));function X5(t){return new Set(t?t.trim().split(/\s+/):[])}function Hne(t,e){const{map:r,mapLib:o}=Te.useContext(B_),u=Te.useMemo(()=>document.createElement("div"),[]),f=Te.useRef({props:t});f.current.props=t;const p=Te.useMemo(()=>{const x={...t},s=new o.Popup(x);return s.setLngLat([t.longitude,t.latitude]),s.once("open",w=>{var I,P;(P=(I=f.current.props).onOpen)===null||P===void 0||P.call(I,w)}),s},[]);if(Te.useEffect(()=>{const x=s=>{var w,I;(I=(w=f.current.props).onClose)===null||I===void 0||I.call(w,s)};return p.on("close",x),p.setDOMContent(u).addTo(r.getMap()),()=>{p.off("close",x),p.isOpen()&&p.remove()}},[]),Te.useEffect(()=>{qp(p.getElement(),t.style)},[t.style]),Te.useImperativeHandle(e,()=>p,[]),p.isOpen()&&((p.getLngLat().lng!==t.longitude||p.getLngLat().lat!==t.latitude)&&p.setLngLat([t.longitude,t.latitude]),t.offset&&!Js(p.options.offset,t.offset)&&p.setOffset(t.offset),(p.options.anchor!==t.anchor||p.options.maxWidth!==t.maxWidth)&&(p.options.anchor=t.anchor,p.setMaxWidth(t.maxWidth)),p.options.className!==t.className)){const x=X5(p.options.className),s=X5(t.className);for(const w of x)s.has(w)||p.removeClassName(w);for(const w of s)x.has(w)||p.addClassName(w);p.options.className=t.className}return u3.createPortal(t.children,u)}const Wne=Te.memo(Te.forwardRef(Hne));function SB(t,e,r,o){const u=Te.useContext(B_),f=Te.useMemo(()=>t(u),[]);return Te.useEffect(()=>{const p=o||r||e,x=typeof e=="function"&&typeof r=="function"?e:null,s=typeof r=="function"?r:typeof e=="function"?e:null,{map:w}=u;return w.hasControl(f)||(w.addControl(f,p==null?void 0:p.position),x&&x(u)),()=>{s&&s(u),w.hasControl(f)&&w.removeControl(f)}},[]),f}function Zne(t){const e=SB(({mapLib:r})=>new r.AttributionControl(t),{position:t.position});return Te.useEffect(()=>{qp(e._container,t.style)},[t.style]),null}Te.memo(Zne);function qne(t){const e=SB(({mapLib:r})=>new r.FullscreenControl({container:t.containerId&&document.getElementById(t.containerId)}),{position:t.position});return Te.useEffect(()=>{qp(e._controlContainer,t.style)},[t.style]),null}Te.memo(qne);function Kne(t,e){const r=Te.useRef({props:t}),o=SB(({mapLib:u})=>{const f=new u.GeolocateControl(t),p=f._setupUI;return f._setupUI=x=>{f._container.hasChildNodes()||p(x)},f.on("geolocate",x=>{var s,w;(w=(s=r.current.props).onGeolocate)===null||w===void 0||w.call(s,x)}),f.on("error",x=>{var s,w;(w=(s=r.current.props).onError)===null||w===void 0||w.call(s,x)}),f.on("outofmaxbounds",x=>{var s,w;(w=(s=r.current.props).onOutOfMaxBounds)===null||w===void 0||w.call(s,x)}),f.on("trackuserlocationstart",x=>{var s,w;(w=(s=r.current.props).onTrackUserLocationStart)===null||w===void 0||w.call(s,x)}),f.on("trackuserlocationend",x=>{var s,w;(w=(s=r.current.props).onTrackUserLocationEnd)===null||w===void 0||w.call(s,x)}),f},{position:t.position});return r.current.props=t,Te.useImperativeHandle(e,()=>o,[]),Te.useEffect(()=>{qp(o._container,t.style)},[t.style]),null}Te.memo(Te.forwardRef(Kne));function Xne(t){const e=SB(({mapLib:r})=>new r.NavigationControl(t),{position:t.position});return Te.useEffect(()=>{qp(e._container,t.style)},[t.style]),null}Te.memo(Xne);function Yne(t){const e=SB(({mapLib:f})=>new f.ScaleControl(t),{position:t.position}),r=Te.useRef(t),o=r.current;r.current=t;const{style:u}=t;return t.maxWidth!==void 0&&t.maxWidth!==o.maxWidth&&(e.options.maxWidth=t.maxWidth),t.unit!==void 0&&t.unit!==o.unit&&e.setUnit(t.unit),Te.useEffect(()=>{qp(e._container,u)},[u]),null}Te.memo(Yne);function _C(t,e){if(!t)throw new Error(e)}function Jne(t,e,r,o){if(_C(r.id===o.id,"layer id changed"),_C(r.type===o.type,"layer type changed"),r.type==="custom"||o.type==="custom")return;const{layout:u={},paint:f={},filter:p,minzoom:x,maxzoom:s,beforeId:w}=r;if(w!==o.beforeId&&t.moveLayer(e,w),u!==o.layout){const I=o.layout||{};for(const P in u)Js(u[P],I[P])||t.setLayoutProperty(e,P,u[P]);for(const P in I)u.hasOwnProperty(P)||t.setLayoutProperty(e,P,void 0)}if(f!==o.paint){const I=o.paint||{};for(const P in f)Js(f[P],I[P])||t.setPaintProperty(e,P,f[P]);for(const P in I)f.hasOwnProperty(P)||t.setPaintProperty(e,P,void 0)}Js(p,o.filter)||t.setFilter(e,p),(x!==o.minzoom||s!==o.maxzoom)&&t.setLayerZoomRange(e,x,s)}function Qne(t,e,r){if(t.style&&t.style._loaded&&(!("source"in r)||t.getSource(r.source))){const o={...r,id:e};delete o.beforeId,t.addLayer(o,r.beforeId)}}let eie=0;function tie(t){const e=Te.useContext(B_).map.getMap(),r=Te.useRef(t),[,o]=Te.useState(0),u=Te.useMemo(()=>t.id||`jsx-layer-${eie++}`,[]);if(Te.useEffect(()=>{if(e){const p=()=>o(x=>x+1);return e.on("styledata",p),p(),()=>{e.off("styledata",p),e.style&&e.style._loaded&&e.getLayer(u)&&e.removeLayer(u)}}},[e]),e&&e.style&&e.getLayer(u))try{Jne(e,u,t,r.current)}catch(p){console.warn(p)}else Qne(e,u,t);return r.current=t,null}let rie=0;function nie(t,e,r){if(t.style&&t.style._loaded){const o={...r};return delete o.id,delete o.children,t.addSource(e,o),t.getSource(e)}return null}function iie(t,e,r){_C(e.id===r.id,"source id changed"),_C(e.type===r.type,"source type changed");let o="",u=0;for(const p in e)p!=="children"&&p!=="id"&&!Js(r[p],e[p])&&(o=p,u++);if(!u)return;const f=e.type;if(f==="geojson")t.setData(e.data);else if(f==="image")t.updateImage({url:e.url,coordinates:e.coordinates});else if("setCoordinates"in t&&u===1&&o==="coordinates")t.setCoordinates(e.coordinates);else if("setUrl"in t)switch(o){case"url":t.setUrl(e.url);break;case"tiles":t.setTiles(e.tiles);break}else console.warn(`Unable to update <Source> prop: ${o}`)}function oie(t){const e=Te.useContext(B_).map.getMap(),r=Te.useRef(t),[,o]=Te.useState(0),u=Te.useMemo(()=>t.id||`jsx-source-${rie++}`,[]);Te.useEffect(()=>{if(e){const p=()=>setTimeout(()=>o(x=>x+1),0);return e.on("styledata",p),p(),()=>{var x;if(e.off("styledata",p),e.style&&e.style._loaded&&e.getSource(u)){const s=(x=e.getStyle())===null||x===void 0?void 0:x.layers;if(s)for(const w of s)w.source===u&&e.removeLayer(w.id);e.removeSource(u)}}}},[e]);let f=e&&e.style&&e.getSource(u);return f?iie(f,t,r.current):f=nie(e,u,t),r.current=t,f&&Te.Children.map(t.children,p=>p&&Te.cloneElement(p,{source:u}))||null}const aie=Ane(()=>Promise.resolve().then(()=>_ie),void 0),sie=Te.forwardRef(function(e,r){return $ne(e,r,aie)}),BG=Gne,xG=Wne,lie=tie,uie=oie,bG=Te.createContext([]),cie=({children:t})=>{const[e,r]=Te.useState(()=>{const o=localStorage.getItem("wellMetadata");return o?JSON.parse(o):[]});return Te.useEffect(()=>{if(e.length===0){const o=new AbortController,u=o.signal;return fetch("http://54.206.117.183:8888/chchWater/well_metadata",{method:"GET",mode:"cors",signal:u}).then(f=>f.json()).then(f=>{r(f)}).catch(f=>console.log(f)),()=>{o.abort()}}},[e]),Ie.jsx(bG.Provider,{value:[e,r],children:t})};Number.prototype.toRad=function(){return this*Math.PI/180};function hie(t,e,r,o){var u=6371,f=r-t,p=f.toRad(),x=o-e,s=x.toRad(),w=Math.sin(p/2)*Math.sin(p/2)+Math.cos(t.toRad())*Math.cos(r.toRad())*Math.sin(s/2)*Math.sin(s/2),I=2*Math.atan2(Math.sqrt(w),Math.sqrt(1-w)),P=u*I;return P}function fie({item:t,handleSelectedLocation:e}){return Ie.jsx("div",{className:"map-search-item row",onClick:()=>{e(t.id)},children:Ie.jsx("p",{className:"body-large",children:t.properties.full_address})})}function die({item:t,handleSegmentedActiveItem:e}){return Ie.jsxs("div",{className:`re-segmented-item row al-ctr gp-8 body-large ${t.active?"active":""}`,onClick:()=>e(t.id),children:[t.active?Ie.jsx("span",{className:"material-symbols-rounded",children:"check"}):null,t.text]})}function pie({item:t}){const e=c3(),r=()=>{const o=new URLSearchParams({well_code:t.well_id.replace("/","_")});e(`/metrics?${o.toString()}`,{state:{well_code:t.well_id}})};return Ie.jsx(Ie.Fragment,{children:Ie.jsxs("div",{className:"re-item col gp-4",onClick:r,children:[Ie.jsxs("div",{className:"search-item-header row jc-sb al-str",children:[Ie.jsxs("div",{className:"col gp-4",children:[Ie.jsx("p",{className:"title-small",style:{fontWeight:600},children:t.well_id}),Ie.jsx("p",{className:"body-large",children:t.actualAddress})]}),Ie.jsx("div",{className:"favorite-button row al-ctr jc-ctr",style:{paddingTop:"4px"},children:Ie.jsx("span",{className:"material-symbols-rounded",children:"star"})})]}),Ie.jsxs("div",{className:"item-content col ",children:[Ie.jsxs("p",{className:"body-large success",children:["Status : ",t.well_status]}),Ie.jsxs("p",{className:"body-large",children:["Primary Use : ",t.primary_use]}),Ie.jsxs("p",{className:"body-large",children:["Type : ",t.well_type]})]})]})})}function mie(){const[t,e]=Te.useState(!1),[r,o]=Te.useState([]),[u,f]=Te.useContext(wB),[p,x]=Te.useState(null),[s,w]=Te.useState([{id:1,icon:"location_pin",text:"Near Me",active:!1},{id:2,icon:"home",text:"All Locations",active:!1},{id:3,icon:"saved",text:"Saved",active:!1}]),[I,P]=Te.useContext(bG),[N,U]=Te.useContext(_3),[X,Q]=Te.useContext(y3);let J=s.some(Je=>Je.active);function Z(){navigator.geolocation?navigator.geolocation.getCurrentPosition(H):alert("Geolocation is not supported by this browser.")}function H(Je){U({latitude:Je.coords.latitude,longitude:Je.coords.longitude}),f({fullAddress:"Your Location",latitude:Je.coords.latitude,longitude:Je.coords.longitude})}Te.useEffect(()=>{J=s.some(Je=>Je.active)},[s]);const K={country:"nz",limit:3,accessToken:"pk.eyJ1IjoibnJhc3RvZ2kiLCJhIjoiY2xweHRkbHU4MGRnZTJpc3Vkd2g5Znp2ZSJ9.DXCXHf-XnGSGVhvjz0mpNg"};async function ee(Je,St){try{return(await(await fetch(`https://api.mapbox.com/search/geocode/v6/reverse?longitude=${St}&latitude=${Je}&access_token=${K.accessToken}`,{method:"GET",mode:"cors"})).json()).features[0].properties.full_address}catch(Le){return console.log(Le),"No address found."}}async function se(Je,St){let Le=I.map($t=>({...$t,distance:hie(Je,St,$t.latitude,$t.longitude)}));Le.sort(($t,Wt)=>$t.distance-Wt.distance);let Nt=Le.slice(0,4),xt=await Promise.all(Nt.map(async $t=>({...$t,actualAddress:await ee($t.latitude,$t.longitude)})));Q(xt),console.log(xt)}function me(Je){r.map(St=>{St.id===Je&&(f({fullAddress:St.properties.full_address,latitude:St.geometry.coordinates[1],longitude:St.geometry.coordinates[0]}),e(!1))})}Te.useEffect(()=>{se(u.latitude,u.longitude)},[u,N]);function Ce(Je){const St=s.map(Le=>(Le.id===Je?(Le.id==1&&Z(),Le.active=!0):Le.active=!1,Le));w(St)}function Ae(){s[0].active&&(f({fullAddress:null,latitude:null,longitude:null}),Q([]));const Je=s.map(St=>(St.active=!1,St));w(Je)}function De(Je){Je.target.value===""?(o([]),e(!1)):e(!0),x(Je.target.value)}function qe(){f({fullAddress:null,latitude:null,longitude:null}),Q([]);const Je=s.map(St=>(St.active=!1,St));w(Je),je.current.value="",x("")}Te.useEffect(()=>{const Je=new AbortController,St=Je.signal;return fetch(`https://api.mapbox.com/search/geocode/v6/forward?q=${p}&country=${K.country}&limit=${K.limit}&access_token=${K.accessToken}`,{method:"GET",mode:"cors",signal:St}).then(Le=>Le.json()).then(Le=>{o(Le.features)}).catch(Le=>console.log(Le)),()=>{Je.abort()}},[p]);const je=Te.useRef(null),[Oe,ct]=Te.useState(!1),[ht,We]=Te.useState(window.innerWidth);return Te.useEffect(()=>{window.addEventListener("resize",()=>{We(window.innerWidth)})},[ht]),Te.useEffect(()=>{u.fullAddress&&x(u.fullAddress)},[u.fullAddress]),Ie.jsxs(Ie.Fragment,{children:[ht<=900?Ie.jsx("span",{className:"material-symbols-rounded open-sidebar al-ctr row",onClick:()=>ct(!0),children:"menu"}):null,Ie.jsxs("div",{className:`re-filter-container col gp-16 ${ht<=900&&Oe?"expanded":""}`,children:[Ie.jsxs("div",{className:"search-header-filter col gp-16",children:[ht<=900?Ie.jsxs(Ie.Fragment,{children:[Ie.jsx("span",{className:"material-symbols-rounded toggle-sidebar",onClick:()=>ct(!Oe),children:"menu_open"}),Ie.jsx("p",{className:"title-large",children:"Water"})]}):null,Ie.jsx(vG,{handleSearch:De,placeholder:"Search for your location",value:p,isSearchResultsVisible:t,ref:je,clearSearch:()=>{je.current.value=""},children:r.map(Je=>Ie.jsxs(Ie.Fragment,{children:[Ie.jsx(fie,{item:Je,handleSelectedLocation:me},Je.id),Ie.jsx("div",{className:"divider"})]}))},1)]}),Ie.jsxs("div",{className:"re-segmented-container row gp-16",children:[Ie.jsx("div",{className:"re-segmented-actions row gp-16",children:s.map(Je=>Ie.jsx(die,{item:Je,handleSegmentedActiveItem:Ce},Je.id))}),Ie.jsxs("div",{className:`re-segmented-item row al-ctr clear-button ${J?"":"inactive"}`,onClick:Ae,children:[Ie.jsx("md-ripple",{}),Ie.jsx("span",{className:"material-symbols-rounded",children:"close"})]})]}),u.fullAddress?Ie.jsxs("div",{className:"selected-location-container row al-ctr gp-16",children:[Ie.jsx("span",{className:"material-symbols-rounded",children:"nearby"}),Ie.jsxs("div",{className:"wrapper col gp-4",children:[Ie.jsx("p",{className:"body-medium",style:{color:"var(--color-neutral-color-9)"},children:"Showing results near"}),Ie.jsx("p",{className:"title-small",children:u.fullAddress?u.fullAddress:"No location selected"})]})]}):null,Ie.jsx("div",{className:"re-items-container col jc-sb",style:{marginTop:u.fullAddress?"0":"-12px"},children:Ie.jsx("div",{className:"re-items-wrapper col",children:X.map((Je,St)=>Ie.jsxs(Ue.Fragment,{children:[Ie.jsx(pie,{item:Je}),St<X.length-1&&Ie.jsx("div",{className:"divider"})]},Je.well_id))})}),X.length!=0?Ie.jsxs("div",{className:"master-clear-button row al-ctr jc-ctr",onClick:()=>qe(),children:[Ie.jsx("md-ripple",{}),Ie.jsx("span",{className:"material-symbols-rounded",children:"clear"}),Ie.jsx("p",{className:"body-large",children:"Reset Results"})]}):null]})]})}var CG={exports:{}};(function(t,e){var r={};(function(o,u){t.exports=u()})(cg,function(){var o,u,f;function p(s,w){if(!o)o=w;else if(!u)u=w;else{var I="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+o+")(sharedChunk); ("+u+")(sharedChunk); self.onerror = null;",P={};o(P),f=w(P),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(f.workerUrl=window.URL.createObjectURL(new Blob([I],{type:"text/javascript"})))}}p(["exports"],function(s){var w="3.3.0";let I;const P={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(I==null){const i=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{I=r.API_URL_REGEX!=null?new RegExp(r.API_URL_REGEX):i}catch{I=i}}return I},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!P.API_URL)return null;try{const i=new URL(P.API_URL);return i.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":i.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",RASTERARRAYS_URL_PREFIX:"rasterarrays/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,DEFAULT_STYLE:"mapbox://styles/mapbox/standard",MAX_PARALLEL_IMAGE_REQUESTS:16,DRACO_URL:"https://api.mapbox.com/mapbox-gl-js/draco_decoder_gltf_v1.5.6.wasm",MESHOPT_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_base_v0.20.wasm",MESHOPT_SIMD_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_simd_v0.20.wasm",GLYPHS_URL:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"};function N(i){return P.API_URL_REGEX.test(i)}function U(i){return i.indexOf("mapbox:")===0}function X(i){return P.API_CDN_URL_REGEX.test(i)}function Q(i){return P.API_SPRITE_REGEX.test(i)}function J(i){return P.API_STYLE_REGEX.test(i)&&!Q(i)}const Z={create:"create",load:"load",fullLoad:"fullLoad"};function H(i){const n=i.name.split("?")[0];return X(n)&&n.includes("mapbox-gl.js")?"javascript":X(n)&&n.includes("mapbox-gl.css")?"css":function(a){return P.API_FONTS_REGEX.test(a)}(n)?"fontRange":Q(n)?"sprite":J(n)?"style":function(a){return P.API_TILEJSON_REGEX.test(a)}(n)?"tilejson":"other"}function K(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var ee=se;function se(i,n,a,c){this.cx=3*i,this.bx=3*(a-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(c-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=n,this.p2x=a,this.p2y=c}se.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,n){if(n===void 0&&(n=1e-6),i<0)return 0;if(i>1)return 1;for(var a=i,c=0;c<8;c++){var d=this.sampleCurveX(a)-i;if(Math.abs(d)<n)return a;var m=this.sampleCurveDerivativeX(a);if(Math.abs(m)<1e-6)break;a-=d/m}var y=0,b=1;for(a=i,c=0;c<20&&(d=this.sampleCurveX(a),!(Math.abs(d-i)<n));c++)i>d?y=a:b=a,a=.5*(b-y)+y;return a},solve:function(i,n){return this.sampleCurveY(this.solveCurveX(i,n))}};var me=K(ee),Ce=Ae;function Ae(i,n){this.x=i,this.y=n}Ae.prototype={clone:function(){return new Ae(this.x,this.y)},add:function(i){return this.clone()._add(i)},sub:function(i){return this.clone()._sub(i)},multByPoint:function(i){return this.clone()._multByPoint(i)},divByPoint:function(i){return this.clone()._divByPoint(i)},mult:function(i){return this.clone()._mult(i)},div:function(i){return this.clone()._div(i)},rotate:function(i){return this.clone()._rotate(i)},rotateAround:function(i,n){return this.clone()._rotateAround(i,n)},matMult:function(i){return this.clone()._matMult(i)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(i){return this.x===i.x&&this.y===i.y},dist:function(i){return Math.sqrt(this.distSqr(i))},distSqr:function(i){var n=i.x-this.x,a=i.y-this.y;return n*n+a*a},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(i){return Math.atan2(this.y-i.y,this.x-i.x)},angleWith:function(i){return this.angleWithSep(i.x,i.y)},angleWithSep:function(i,n){return Math.atan2(this.x*n-this.y*i,this.x*i+this.y*n)},_matMult:function(i){var n=i[2]*this.x+i[3]*this.y;return this.x=i[0]*this.x+i[1]*this.y,this.y=n,this},_add:function(i){return this.x+=i.x,this.y+=i.y,this},_sub:function(i){return this.x-=i.x,this.y-=i.y,this},_mult:function(i){return this.x*=i,this.y*=i,this},_div:function(i){return this.x/=i,this.y/=i,this},_multByPoint:function(i){return this.x*=i.x,this.y*=i.y,this},_divByPoint:function(i){return this.x/=i.x,this.y/=i.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var i=this.y;return this.y=this.x,this.x=-i,this},_rotate:function(i){var n=Math.cos(i),a=Math.sin(i),c=a*this.x+n*this.y;return this.x=n*this.x-a*this.y,this.y=c,this},_rotateAround:function(i,n){var a=Math.cos(i),c=Math.sin(i),d=n.y+c*(this.x-n.x)+a*(this.y-n.y);return this.x=n.x+a*(this.x-n.x)-c*(this.y-n.y),this.y=d,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Ae.convert=function(i){return i instanceof Ae?i:Array.isArray(i)?new Ae(i[0],i[1]):i};var De=K(Ce);const qe=Math.PI/180,je=180/Math.PI;function Oe(i){return i*qe}function ct(i){return i*je}const ht=[[0,0],[1,0],[1,1],[0,1]];function We(i){if(i<=0)return 0;if(i>=1)return 1;const n=i*i,a=n*i;return 4*(i<.5?a:3*(i-n)+a-.75)}function Je(i,n,a,c){const d=new me(i,n,a,c);return function(m){return d.solve(m)}}const St=Je(.25,.1,.25,1);function Le(i,n,a){return Math.min(a,Math.max(n,i))}function Nt(i,n,a){return(a=Le((a-i)/(n-i),0,1))*a*(3-2*a)}function xt(i,n,a){const c=a-n,d=((i-n)%c+c)%c+n;return d===n?a:d}function $t(i,n,a){if(!i.length)return a(null,[]);let c=i.length;const d=new Array(i.length);let m=null;i.forEach((y,b)=>{n(y,(S,T)=>{S&&(m=S),d[b]=T,--c==0&&a(m,d)})})}function Wt(i,...n){for(const a of n)for(const c in a)i[c]=a[c];return i}let Tr=1;function Hr(){return Tr++}function Wr(){return function i(n){return n?(n^Math.random()*(16>>n/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,i)}()}function zr(i){return i<=1?1:Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function jn(i){return!!i&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(i)}function Ti(i,n){i.forEach(a=>{n[a]&&(n[a]=n[a].bind(n))})}function ur(i,n){return i.indexOf(n,i.length-n.length)!==-1}function br(i,n,a){const c={};for(const d in i)c[d]=n.call(a||this,i[d],d,i);return c}function Ur(i,n,a){const c={};for(const d in i)n.call(a||this,i[d],d,i)&&(c[d]=i[d]);return c}function kt(i){return Array.isArray(i)?i.map(kt):typeof i=="object"&&i?br(i,kt):i}const ii={};function Er(i){ii[i]||(typeof console<"u"&&console.warn(i),ii[i]=!0)}function $n(i,n,a){return(a.y-i.y)*(n.x-i.x)>(n.y-i.y)*(a.x-i.x)}function ei(i){let n=0;for(let a,c,d=0,m=i.length,y=m-1;d<m;y=d++)a=i[d],c=i[y],n+=(c.x-a.x)*(a.y+c.y);return n}function vi([i,n,a]){const c=Oe(n+90),d=Oe(a);return{x:i*Math.cos(c)*Math.sin(d),y:i*Math.sin(c)*Math.sin(d),z:i*Math.cos(d),azimuthal:n,polar:a}}function Mi(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Sa(i){const n={};if(i.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(a,c,d,m)=>{const y=d||m;return n[c]=!y||y.toLowerCase(),""}),n["max-age"]){const a=parseInt(n["max-age"],10);isNaN(a)?delete n["max-age"]:n["max-age"]=a}return n}let Wn,Eo,Wa,Do,Ta,ll,dt=null;function pe(i){try{const n=self[i];return n.setItem("_mapbox_test_",1),n.removeItem("_mapbox_test_"),!0}catch{return!1}}function we(i,n){return[i[4*n],i[4*n+1],i[4*n+2],i[4*n+3]]}function ze(i,n,a,c){for(;n<a;){const d=n+a>>1;i[d]<c?n=d+1:a=d}return n}function ut(i,n,a,c){for(;n<a;){const d=n+a>>1;i[d]<=c?n=d+1:a=d}return n}function gt(){return Wn==null&&(Wn=self.OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),Wn}const Tt={now:()=>Do!==void 0?Do:performance.now(),setNow(i){Do=i},restoreNow(){Do=void 0},frame(i){const n=requestAnimationFrame(i);return{cancel:()=>cancelAnimationFrame(n)}},getImageData(i,n=0){const{width:a,height:c}=i;Ta||(Ta=document.createElement("canvas"));const d=Ta.getContext("2d",{willReadFrequently:!0});if(!d)throw new Error("failed to create canvas 2d context");return(a>Ta.width||c>Ta.height)&&(Ta.width=a,Ta.height=c),d.clearRect(-n,-n,a+2*n,c+2*n),d.drawImage(i,0,0,a,c),d.getImageData(-n,-n,a+2*n,c+2*n)},resolveURL:i=>(Eo||(Eo=document.createElement("a")),Eo.href=i,Eo.href),get devicePixelRatio(){return window.devicePixelRatio},get prefersReducedMotion(){return!!window.matchMedia&&(Wa==null&&(Wa=window.matchMedia("(prefers-reduced-motion: reduce)")),Wa.matches)},hasCanvasFingerprintNoise(){if(ll!==void 0)return ll;if(!gt())return ll=!1,!1;const i=new OffscreenCanvas(85,1),n=i.getContext("2d",{willReadFrequently:!0});let a=0;for(let d=0;d<i.width;++d)n.fillStyle=`rgba(${a++},${a++},${a++}, 255)`,n.fillRect(d,0,1,1);const c=n.getImageData(0,0,i.width,i.height);a=0;for(let d=0;d<c.data.length;++d)if(d%4!=3&&a++!==c.data[d])return ll=!0,!0;return ll=!1,!1}},Xt="mapbox-tiles";let ft=500,Qt=50,qt,er;function Vr(){try{return caches}catch{}}function Rn(){const i=Vr();i&&!qt&&(qt=i.open(Xt))}function Kn(i){const n=i.indexOf("?");if(n<0)return i;const a=["language","worldview"],c=new URLSearchParams,d=new URLSearchParams(i.slice(n));for(const m of a){const y=d.get(m);y&&c.set(m,y)}return`${i.slice(0,n)}?${c.toString()}`}function In(i,n){const a=i.indexOf("?");if(a<0)return`${i}?${new URLSearchParams(n).toString()}`;const c=new URLSearchParams(i.slice(a));for(const d in n)c.set(d,n[d]);return`${i.slice(0,a)}?${c.toString()}`}let vn=1/0;const Bn={supported:!1,testSupport:function(i){!Qi&&Zn&&(Xn?co(i):Pn=i)}};let Pn,Zn,Qi=!1,Xn=!1;const zo=typeof self<"u"?self:{};function co(i){const n=i.createTexture();i.bindTexture(i.TEXTURE_2D,n);try{if(i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,Zn),i.isContextLost())return;Bn.supported=!0}catch{}i.deleteTexture(n),Qi=!0}zo.document&&(Zn=zo.document.createElement("img"),Zn.onload=function(){Pn&&co(Pn),Pn=null,Xn=!0},Zn.onerror=function(){Qi=!0,Pn=null},Zn.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Xo={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image",Model:"Model"};typeof Object.freeze=="function"&&Object.freeze(Xo);class zi extends Error{constructor(n,a,c){a===401&&N(c)&&(n+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(n),this.status=a,this.url=c}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const Ii=Mi()?()=>self.worker&&self.worker.referrer:()=>(location.protocol==="blob:"?parent:self).location.href,lt=function(i,n){if(!(/^file:/.test(a=i.url)||/^file:/.test(Ii())&&!/^\w+:/.test(a))){if(self.fetch&&self.Request&&self.AbortController&&Request.prototype.hasOwnProperty("signal"))return function(c,d){const m=new AbortController,y=new Request(c.url,{method:c.method||"GET",body:c.body,credentials:c.credentials,headers:c.headers,referrer:Ii(),referrerPolicy:c.referrerPolicy,signal:m.signal});let b=!1,S=!1;const T=(D=y.url).indexOf("sku=")>0&&N(D);var D;c.type==="json"&&y.headers.set("Accept","application/json");const O=($,G,q)=>{if(S)return;if($&&$.message!=="SecurityError"&&Er($.toString()),G&&q)return z(G);const re=Date.now();fetch(y).then(ie=>{if(ie.ok){const fe=T?ie.clone():null;return z(ie,fe,re)}return d(new zi(ie.statusText,ie.status,c.url))}).catch(ie=>{ie.name!=="AbortError"&&d(new Error(`${ie.message} ${c.url}`))})},z=($,G,q)=>{(c.type==="arrayBuffer"?$.arrayBuffer():c.type==="json"?$.json():$.text()).then(re=>{S||(G&&q&&function(ie,fe,_e){if(Rn(),!qt)return;const ge=Sa(fe.headers.get("Cache-Control")||"");if(ge["no-store"])return;const Se={status:fe.status,statusText:fe.statusText,headers:new Headers};fe.headers.forEach((Ne,Ge)=>Se.headers.set(Ge,Ne)),ge["max-age"]&&Se.headers.set("Expires",new Date(_e+1e3*ge["max-age"]).toUTCString());const be=Se.headers.get("Expires");if(!be||new Date(be).getTime()-_e<42e4)return;let Me=Kn(ie.url);if(fe.status===206){const Ne=ie.headers.get("Range");if(!Ne)return;Se.status=200,Me=In(Me,{range:Ne})}(function(Ne,Ge){if(er===void 0)try{new Response(new ReadableStream),er=!0}catch{er=!1}er?Ge(Ne.body):Ne.blob().then(Ge)})(fe,Ne=>{const Ge=new Response(Ne,Se);Rn(),qt&&qt.then(Ye=>Ye.put(Me,Ge)).catch(Ye=>Er(Ye.message))})}(y,G,q),b=!0,d(null,re,$.headers.get("Cache-Control"),$.headers.get("Expires")))}).catch(re=>{S||d(new Error(re.message))})};return T?function($,G){if(Rn(),!qt)return G(null);qt.then(q=>{let re=Kn($.url);const ie=$.headers.get("Range");ie&&(re=In(re,{range:ie})),q.match(re).then(fe=>{const _e=function(ge){if(!ge)return!1;const Se=new Date(ge.headers.get("Expires")||0),be=Sa(ge.headers.get("Cache-Control")||"");return Se>Date.now()&&!be["no-cache"]}(fe);q.delete(re),_e&&q.put(re,fe.clone()),G(null,fe,_e)}).catch(G)}).catch(G)}(y,O):O(null,null),{cancel:()=>{S=!0,b||m.abort()}}}(i,n);if(Mi()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",i,n,void 0,!0)}var a;return function(c,d){const m=new XMLHttpRequest;m.open(c.method||"GET",c.url,!0),c.type==="arrayBuffer"&&(m.responseType="arraybuffer");for(const y in c.headers)m.setRequestHeader(y,c.headers[y]);return c.type==="json"&&(m.responseType="text",m.setRequestHeader("Accept","application/json")),m.withCredentials=c.credentials==="include",m.onerror=()=>{d(new Error(m.statusText))},m.onload=()=>{if((m.status>=200&&m.status<300||m.status===0)&&m.response!==null){let y=m.response;if(c.type==="json")try{y=JSON.parse(m.response)}catch(b){return d(b)}d(null,y,m.getResponseHeader("Cache-Control"),m.getResponseHeader("Expires"))}else d(new zi(m.statusText,m.status,c.url))},m.send(c.body),{cancel:()=>m.abort()}}(i,n)},at=function(i,n){return lt(Wt(i,{type:"arrayBuffer"}),n)};function Qe(i){const n=document.createElement("a");return n.href=i,n.protocol===location.protocol&&n.host===location.host}const It="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Et,Rt;Et=[],Rt=0;const zt=function(i,n){if(Bn.supported&&(i.headers||(i.headers={}),i.headers.accept="image/webp,*/*"),Rt>=P.MAX_PARALLEL_IMAGE_REQUESTS){const m={requestParameters:i,callback:n,cancelled:!1,cancel(){this.cancelled=!0}};return Et.push(m),m}Rt++;let a=!1;const c=()=>{if(!a)for(a=!0,Rt--;Et.length&&Rt<P.MAX_PARALLEL_IMAGE_REQUESTS;){const m=Et.shift(),{requestParameters:y,callback:b,cancelled:S}=m;S||(m.cancel=zt(y,b).cancel)}},d=at(i,(m,y,b,S)=>{c(),m?n(m):y&&(self.createImageBitmap?function(T,D){const O=new Blob([new Uint8Array(T)],{type:"image/png"});createImageBitmap(O).then(z=>{D(null,z)}).catch(z=>{D(new Error(`Could not load image because of ${z.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(y,(T,D)=>n(T,D,b,S)):function(T,D){const O=new Image;O.onload=()=>{D(null,O),URL.revokeObjectURL(O.src),O.onload=null,requestAnimationFrame(()=>{O.src=It})},O.onerror=()=>D(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const z=new Blob([new Uint8Array(T)],{type:"image/png"});O.src=T.byteLength?URL.createObjectURL(z):It}(y,(T,D)=>n(T,D,b,S)))});return{cancel:()=>{d.cancel(),c()}}},Dt="01",Ht="NO_ACCESS_TOKEN",Mt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Br(i){const n=i.match(Mt);if(!n)throw new Error("Unable to parse URL object");return{protocol:n[1],authority:n[2],path:n[3]||"/",params:n[4]?n[4].split("&"):[]}}function en(i){const n=i.params.length?`?${i.params.join("&")}`:"";return`${i.protocol}://${i.authority}${i.path}${n}`}const or="mapbox.eventData";function Nn(i){if(!i)return null;const n=i.split(".");if(!n||n.length!==3)return null;try{return JSON.parse(decodeURIComponent(atob(n[1]).split("").map(a=>"%"+("00"+a.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class ti{constructor(n){this.type=n,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(n){const a=Nn(P.ACCESS_TOKEN);let c="";return c=a&&a.u?btoa(encodeURIComponent(a.u).replace(/%([0-9A-F]{2})/g,(d,m)=>String.fromCharCode(+("0x"+m)))):P.ACCESS_TOKEN||"",n?`${or}.${n}:${c}`:`${or}:${c}`}fetchEventData(){const n=pe("localStorage"),a=this.getStorageKey(),c=this.getStorageKey("uuid");if(n)try{const d=localStorage.getItem(a);d&&(this.eventData=JSON.parse(d));const m=localStorage.getItem(c);m&&(this.anonId=m)}catch{Er("Unable to read from LocalStorage")}}saveEventData(){const n=pe("localStorage"),a=this.getStorageKey(),c=this.getStorageKey("uuid"),d=this.anonId;if(n&&d)try{localStorage.setItem(c,d),Object.keys(this.eventData).length>=1&&localStorage.setItem(a,JSON.stringify(this.eventData))}catch{Er("Unable to write to LocalStorage")}}processRequests(n){}postEvent(n,a,c,d){if(!P.EVENTS_URL)return;const m=Br(P.EVENTS_URL);m.params.push(`access_token=${d||P.ACCESS_TOKEN||""}`);const y={event:this.type,created:new Date(n).toISOString()},b=a?Wt(y,a):y,S={url:en(m),headers:{"Content-Type":"text/plain"},body:JSON.stringify([b])};this.pendingRequest=function(T,D){return lt(Wt(T,{method:"POST"}),D)}(S,T=>{this.pendingRequest=null,c(T),this.saveEventData(),this.processRequests(d)})}queueRequest(n,a){this.queue.push(n),this.processRequests(a)}}const Fn=new class extends ti{constructor(i){super("appUserTurnstile"),this._customAccessToken=i}postTurnstileEvent(i,n){P.EVENTS_URL&&P.ACCESS_TOKEN&&Array.isArray(i)&&i.some(a=>U(a)||N(a))&&this.queueRequest(Date.now(),n)}processRequests(i){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const n=Nn(P.ACCESS_TOKEN),a=n?n.u:P.ACCESS_TOKEN;let c=a!==this.eventData.tokenU;jn(this.anonId)||(this.anonId=Wr(),c=!0);const d=this.queue.shift();if(this.eventData.lastSuccess){const m=new Date(this.eventData.lastSuccess),y=new Date(d),b=(d-this.eventData.lastSuccess)/864e5;c=c||b>=1||b<-1||m.getDate()!==y.getDate()}else c=!0;c?this.postEvent(d,{sdkIdentifier:"mapbox-gl-js",sdkVersion:w,skuId:Dt,"enabled.telemetry":!1,userId:this.anonId},m=>{m||(this.eventData.lastSuccess=d,this.eventData.tokenU=a)},i):this.processRequests()}},Ni=Fn.postTurnstileEvent.bind(Fn),Vi=new class extends ti{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(i,n,a,c){this.skuToken=n,this.errorCb=c,P.EVENTS_URL&&(a||P.ACCESS_TOKEN?this.queueRequest({id:i,timestamp:Date.now()},a):this.errorCb(new Error(Ht)))}processRequests(i){if(this.pendingRequest||this.queue.length===0)return;const{id:n,timestamp:a}=this.queue.shift();n&&this.success[n]||(this.anonId||this.fetchEventData(),jn(this.anonId)||(this.anonId=Wr()),this.postEvent(a,{sdkIdentifier:"mapbox-gl-js",sdkVersion:w,skuId:Dt,skuToken:this.skuToken,userId:this.anonId},c=>{c?this.errorCb(c):n&&(this.success[n]=!0)},i))}remove(){this.errorCb=null}},pn=Vi.postMapLoadEvent.bind(Vi),ha=new class extends ti{constructor(){super("gljs.performance")}postPerformanceEvent(i,n){P.EVENTS_URL&&(i||P.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:n},i)}processRequests(i){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:n,performanceData:a}=this.queue.shift(),c=function(d){const m=performance.getEntriesByType("resource"),y=performance.getEntriesByType("mark"),b=function($){const G={};if($){for(const q in $)if(q!=="other")for(const re of $[q]){const ie=`${q}ResolveRangeMin`,fe=`${q}ResolveRangeMax`,_e=`${q}RequestCount`,ge=`${q}RequestCachedCount`;G[ie]=Math.min(G[ie]||1/0,re.startTime),G[fe]=Math.max(G[fe]||-1/0,re.responseEnd);const Se=be=>{G[be]===void 0&&(G[be]=0),++G[be]};re.transferSize!==void 0&&re.transferSize===0&&Se(ge),Se(_e)}}return G}(function($,G){const q={};if($)for(const re of $){const ie=G(re);q[ie]===void 0&&(q[ie]=[]),q[ie].push(re)}return q}(m,H)),S=window.devicePixelRatio,T=navigator.connection||navigator.mozConnection||navigator.webkitConnection,D=T?T.effectiveType:void 0,O={counters:[],metadata:[],attributes:[]},z=($,G,q)=>{q!=null&&$.push({name:G,value:q.toString()})};for(const $ in b)z(O.counters,$,b[$]);if(d.interactionRange[0]!==1/0&&d.interactionRange[1]!==-1/0&&(z(O.counters,"interactionRangeMin",d.interactionRange[0]),z(O.counters,"interactionRangeMax",d.interactionRange[1])),y)for(const $ of Object.keys(Z)){const G=Z[$],q=y.find(re=>re.name===G);q&&z(O.counters,G,q.startTime)}return z(O.counters,"visibilityHidden",d.visibilityHidden),z(O.attributes,"style",function($){if($)for(const G of $){const q=G.name.split("?")[0];if(J(q)){const re=q.split("/").slice(-2);if(re.length===2)return`mapbox://styles/${re[0]}/${re[1]}`}}}(m)),z(O.attributes,"terrainEnabled",d.terrainEnabled?"true":"false"),z(O.attributes,"fogEnabled",d.fogEnabled?"true":"false"),z(O.attributes,"projection",d.projection),z(O.attributes,"zoom",d.zoom),z(O.metadata,"devicePixelRatio",S),z(O.metadata,"connectionEffectiveType",D),z(O.metadata,"navigatorUserAgent",navigator.userAgent),z(O.metadata,"screenWidth",window.screen.width),z(O.metadata,"screenHeight",window.screen.height),z(O.metadata,"windowWidth",window.innerWidth),z(O.metadata,"windowHeight",window.innerHeight),z(O.metadata,"mapWidth",d.width/S),z(O.metadata,"mapHeight",d.height/S),z(O.metadata,"webglRenderer",d.renderer),z(O.metadata,"webglVendor",d.vendor),z(O.metadata,"sdkVersion",w),z(O.metadata,"sdkIdentifier","mapbox-gl-js"),O}(a);for(const d of c.metadata);for(const d of c.counters);for(const d of c.attributes);this.postEvent(n,c,()=>{},i)}},Za=ha.postPerformanceEvent.bind(ha),ho=new class extends ti{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(i,n,a,c){if(!P.API_URL||!P.SESSION_PATH)return;const d=Br(P.API_URL+P.SESSION_PATH);d.params.push(`sku=${n||""}`),d.params.push(`access_token=${c||P.ACCESS_TOKEN||""}`);const m={url:en(d),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(y,b){return lt(Wt(y,{method:"GET"}),b)}(m,y=>{this.pendingRequest=null,a(y),this.saveEventData(),this.processRequests(c)})}getSessionAPI(i,n,a,c){this.skuToken=n,this.errorCb=c,P.SESSION_PATH&&P.API_URL&&(a||P.ACCESS_TOKEN?this.queueRequest({id:i,timestamp:Date.now()},a):this.errorCb(new Error(Ht)))}processRequests(i){if(this.pendingRequest||this.queue.length===0)return;const{id:n,timestamp:a}=this.queue.shift();n&&this.success[n]||this.getSession(a,this.skuToken,c=>{c?this.errorCb(c):n&&(this.success[n]=!0)},i)}remove(){this.errorCb=null}},Sc=ho.getSessionAPI.bind(ho),ls=new Set;function us(i,n,a){a[i]&&a[i].indexOf(n)!==-1||(a[i]=a[i]||[],a[i].push(n))}function Ph(i,n,a){if(a&&a[i]){const c=a[i].indexOf(n);c!==-1&&a[i].splice(c,1)}}class ul{constructor(n,a={}){Wt(this,a),this.type=n}}class Hl extends ul{constructor(n,a={}){super("error",Wt({error:n},a))}}class On{on(n,a){return this._listeners=this._listeners||{},us(n,a,this._listeners),this}off(n,a){return Ph(n,a,this._listeners),Ph(n,a,this._oneTimeListeners),this}once(n,a){return a?(this._oneTimeListeners=this._oneTimeListeners||{},us(n,a,this._oneTimeListeners),this):new Promise(c=>this.once(n,c))}fire(n,a){typeof n=="string"&&(n=new ul(n,a||{}));const c=n.type;if(this.listens(c)){n.target=this;const d=this._listeners&&this._listeners[c]?this._listeners[c].slice():[];for(const b of d)b.call(this,n);const m=this._oneTimeListeners&&this._oneTimeListeners[c]?this._oneTimeListeners[c].slice():[];for(const b of m)Ph(c,b,this._oneTimeListeners),b.call(this,n);const y=this._eventedParent;y&&(Wt(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),y.fire(n))}else n instanceof Hl&&console.error(n.error);return this}listens(n){return!!(this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n))}setEventedParent(n,a){return this._eventedParent=n,this._eventedParentData=a,this}}s.y=void 0;var Ai={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Wl(i){return(i=Math.round(i))<0?0:i>255?255:i}function cl(i){return Wl(i[i.length-1]==="%"?parseFloat(i)/100*255:parseInt(i))}function Ps(i){return(n=i[i.length-1]==="%"?parseFloat(i)/100:parseFloat(i))<0?0:n>1?1:n;var n}function Tc(i,n,a){return a<0?a+=1:a>1&&(a-=1),6*a<1?i+(n-i)*a*6:2*a<1?n:3*a<2?i+(n-i)*(2/3-a)*6:i}try{s.y={}.parseCSSColor=function(i){var n,a=i.replace(/ /g,"").toLowerCase();if(a in Ai)return Ai[a].slice();if(a[0]==="#")return a.length===4?(n=parseInt(a.substr(1),16))>=0&&n<=4095?[(3840&n)>>4|(3840&n)>>8,240&n|(240&n)>>4,15&n|(15&n)<<4,1]:null:a.length===7&&(n=parseInt(a.substr(1),16))>=0&&n<=16777215?[(16711680&n)>>16,(65280&n)>>8,255&n,1]:null;var c=a.indexOf("("),d=a.indexOf(")");if(c!==-1&&d+1===a.length){var m=a.substr(0,c),y=a.substr(c+1,d-(c+1)).split(","),b=1;switch(m){case"rgba":if(y.length!==4)return null;b=Ps(y.pop());case"rgb":return y.length!==3?null:[cl(y[0]),cl(y[1]),cl(y[2]),b];case"hsla":if(y.length!==4)return null;b=Ps(y.pop());case"hsl":if(y.length!==3)return null;var S=(parseFloat(y[0])%360+360)%360/360,T=Ps(y[1]),D=Ps(y[2]),O=D<=.5?D*(T+1):D+T-D*T,z=2*D-O;return[Wl(255*Tc(z,O,S+1/3)),Wl(255*Tc(z,O,S)),Wl(255*Tc(z,O,S-1/3)),b];default:return null}}return null}}catch{}class Gr{constructor(n,a,c,d=1){this.r=n,this.g=a,this.b=c,this.a=d}static parse(n){if(!n)return;if(n instanceof Gr)return n;if(typeof n!="string")return;const a=s.y(n);return a?new Gr(a[0]/255*a[3],a[1]/255*a[3],a[2]/255*a[3],a[3]):void 0}toString(){const[n,a,c,d]=this.toArray();return`rgba(${Math.round(n)},${Math.round(a)},${Math.round(c)},${d})`}toArray(){const{r:n,g:a,b:c,a:d}=this;return d===0?[0,0,0,0]:[255*n/d,255*a/d,255*c/d,d]}toArray01(){const{r:n,g:a,b:c,a:d}=this;return d===0?[0,0,0,0]:[n/d,a/d,c/d,d]}toArray01Scaled(n){const{r:a,g:c,b:d,a:m}=this;return m===0?[0,0,0]:[a/m*n,c/m*n,d/m*n]}toArray01PremultipliedAlpha(){const{r:n,g:a,b:c,a:d}=this;return[n,a,c,d]}toArray01Linear(){const{r:n,g:a,b:c,a:d}=this;return d===0?[0,0,0,0]:[Math.pow(n/d,2.2),Math.pow(a/d,2.2),Math.pow(c/d,2.2),d]}}Gr.black=new Gr(0,0,0,1),Gr.white=new Gr(1,1,1,1),Gr.transparent=new Gr(0,0,0,0),Gr.red=new Gr(1,0,0,1),Gr.blue=new Gr(0,0,1,1);var mn=Gr;function Zr(i,n,a){return i*(1-a)+n*a}function Ac(i,n,a){return i.map((c,d)=>Zr(c,n[d],a))}var No=Object.freeze({__proto__:null,array:Ac,color:function(i,n,a){return new mn(Zr(i.r,n.r,a),Zr(i.g,n.g,a),Zr(i.b,n.b,a),Zr(i.a,n.a,a))},number:Zr});function cd(i,...n){for(const a of n)for(const c in a)i[c]=a[c];return i}class Mh extends Error{constructor(n,a){super(a),this.message=a,this.key=n}}var Po=Mh;class Fi{constructor(n,a=[]){this.parent=n,this.bindings={};for(const[c,d]of a)this.bindings[c]=d}concat(n){return new Fi(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}var Zl=Fi;const cs={kind:"null"},Gt={kind:"number"},hn={kind:"string"},ln={kind:"boolean"},Yo={kind:"color"},hl={kind:"object"},tn={kind:"value"},ku={kind:"collator"},fl={kind:"formatted"},dl={kind:"resolvedImage"};function Fo(i,n){return{kind:"array",itemType:i,N:n}}function fi(i){if(i.kind==="array"){const n=fi(i.itemType);return typeof i.N=="number"?`array<${n}, ${i.N}>`:i.itemType.kind==="value"?"array":`array<${n}>`}return i.kind}const dr=[cs,Gt,hn,ln,Yo,fl,hl,Fo(tn),dl];function nn(i,n){if(n.kind==="error")return null;if(i.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!nn(i.itemType,n.itemType))&&(typeof i.N!="number"||i.N===n.N))return null}else{if(i.kind===n.kind)return null;if(i.kind==="value"){for(const a of dr)if(!nn(a,n))return null}}return`Expected ${fi(i)} but found ${fi(n)} instead.`}function yr(i,n){return n.some(a=>a.kind===i.kind)}function Un(i,n){return n.some(a=>a==="null"?i===null:a==="array"?Array.isArray(i):a==="object"?i&&!Array.isArray(i)&&typeof i=="object":a===typeof i)}class Nr{constructor(n,a,c){this.sensitivity=n?a?"variant":"case":a?"accent":"base",this.locale=c,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,a){return this.collator.compare(n,a)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class pl{constructor(n,a,c,d,m){this.text=n.normalize?n.normalize():n,this.image=a,this.scale=c,this.fontStack=d,this.textColor=m}}class eo{constructor(n){this.sections=n}static fromString(n){return new eo([new pl(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.namePrimary.length!==0)}static factory(n){return n instanceof eo?n:eo.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}serialize(){const n=["format"];for(const a of this.sections){if(a.image){n.push(["image",a.image.namePrimary]);continue}n.push(a.text);const c={};a.fontStack&&(c["text-font"]=["literal",a.fontStack.split(",")]),a.scale&&(c["font-scale"]=a.scale),a.textColor&&(c["text-color"]=["rgba"].concat(a.textColor.toArray())),n.push(c)}return n}}class cr{constructor(n){this.namePrimary=n.namePrimary,n.nameSecondary&&(this.nameSecondary=n.nameSecondary),this.available=n.available}toString(){return this.nameSecondary?`[${this.namePrimary},${this.nameSecondary}]`:this.namePrimary}static fromString(n,a){return n?new cr({namePrimary:n,nameSecondary:a,available:!1}):null}serialize(){return this.nameSecondary?["image",this.namePrimary,this.nameSecondary]:["image",this.namePrimary]}}function ml(i,n,a,c){return typeof i=="number"&&i>=0&&i<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof a=="number"&&a>=0&&a<=255?c===void 0||typeof c=="number"&&c>=0&&c<=1?null:`Invalid rgba value [${[i,n,a,c].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof c=="number"?[i,n,a,c]:[i,n,a]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ms(i){if(i===null||typeof i=="string"||typeof i=="boolean"||typeof i=="number"||i instanceof mn||i instanceof Nr||i instanceof eo||i instanceof cr)return!0;if(Array.isArray(i)){for(const n of i)if(!Ms(n))return!1;return!0}if(typeof i=="object"){for(const n in i)if(!Ms(i[n]))return!1;return!0}return!1}function di(i){if(i===null)return cs;if(typeof i=="string")return hn;if(typeof i=="boolean")return ln;if(typeof i=="number")return Gt;if(i instanceof mn)return Yo;if(i instanceof Nr)return ku;if(i instanceof eo)return fl;if(i instanceof cr)return dl;if(Array.isArray(i)){const n=i.length;let a;for(const c of i){const d=di(c);if(a){if(a===d)continue;a=tn;break}a=d}return Fo(a||tn,n)}return hl}function oi(i){const n=typeof i;return i===null?"":n==="string"||n==="number"||n==="boolean"?String(i):i instanceof mn||i instanceof eo||i instanceof cr?i.toString():JSON.stringify(i)}class Jo{constructor(n,a){this.type=n,this.value=a}static parse(n,a){if(n.length!==2)return a.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!Ms(n[1]))return a.error("invalid value");const c=n[1];let d=di(c);const m=a.expectedType;return d.kind!=="array"||d.N!==0||!m||m.kind!=="array"||typeof m.N=="number"&&m.N!==0||(d=m),new Jo(d,c)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof mn?["rgba"].concat(this.value.toArray()):this.value instanceof eo?this.value.serialize():this.value}}var hs=Jo,Oi=class{constructor(i){this.name="ExpressionEvaluationError",this.message=i}toJSON(){return this.message}};const hd={string:hn,number:Gt,boolean:ln,object:hl};class Ih{constructor(n,a){this.type=n,this.args=a}static parse(n,a){if(n.length<2)return a.error("Expected at least one argument.");let c,d=1;const m=n[0];if(m==="array"){let b,S;if(n.length>2){const T=n[1];if(typeof T!="string"||!(T in hd)||T==="object")return a.error('The item type argument of "array" must be one of string, number, boolean',1);b=hd[T],d++}else b=tn;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return a.error('The length argument to "array" must be a positive integer literal',2);S=n[2],d++}c=Fo(b,S)}else c=hd[m];const y=[];for(;d<n.length;d++){const b=a.parse(n[d],d,tn);if(!b)return null;y.push(b)}return new Ih(c,y)}evaluate(n){for(let a=0;a<this.args.length;a++){const c=this.args[a].evaluate(n);if(!nn(this.type,di(c)))return c;if(a===this.args.length-1)throw new Oi(`Expected value to be of type ${fi(this.type)}, but found ${fi(di(c))} instead.`)}return null}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}serialize(){const n=this.type,a=[n.kind];if(n.kind==="array"){const c=n.itemType;if(c.kind==="string"||c.kind==="number"||c.kind==="boolean"){a.push(c.kind);const d=n.N;(typeof d=="number"||this.args.length>1)&&a.push(d)}}return a.concat(this.args.map(c=>c.serialize()))}}var qa=Ih;class Lu{constructor(n){this.type=fl,this.sections=n}static parse(n,a){if(n.length<2)return a.error("Expected at least one argument.");const c=n[1];if(!Array.isArray(c)&&typeof c=="object")return a.error("First argument must be an image or text section.");const d=[];let m=!1;for(let y=1;y<=n.length-1;++y){const b=n[y];if(m&&typeof b=="object"&&!Array.isArray(b)){m=!1;let S=null;if(b["font-scale"]&&(S=a.parse(b["font-scale"],1,Gt),!S))return null;let T=null;if(b["text-font"]&&(T=a.parse(b["text-font"],1,Fo(hn)),!T))return null;let D=null;if(b["text-color"]&&(D=a.parse(b["text-color"],1,Yo),!D))return null;const O=d[d.length-1];O.scale=S,O.font=T,O.textColor=D}else{const S=a.parse(n[y],1,tn);if(!S)return null;const T=S.type.kind;if(T!=="string"&&T!=="value"&&T!=="null"&&T!=="resolvedImage")return a.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");m=!0,d.push({content:S,scale:null,font:null,textColor:null})}}return new Lu(d)}evaluate(n){return new eo(this.sections.map(a=>{const c=a.content.evaluate(n);return di(c)===dl?new pl("",c,null,null,null):new pl(oi(c),null,a.scale?a.scale.evaluate(n):null,a.font?a.font.evaluate(n).join(","):null,a.textColor?a.textColor.evaluate(n):null)}))}eachChild(n){for(const a of this.sections)n(a.content),a.scale&&n(a.scale),a.font&&n(a.font),a.textColor&&n(a.textColor)}outputDefined(){return!1}serialize(){const n=["format"];for(const a of this.sections){n.push(a.content.serialize());const c={};a.scale&&(c["font-scale"]=a.scale.serialize()),a.font&&(c["text-font"]=a.font.serialize()),a.textColor&&(c["text-color"]=a.textColor.serialize()),n.push(c)}return n}}class gl{constructor(n,a){this.type=dl,this.inputPrimary=n,this.inputSecondary=a}static parse(n,a){if(n.length<2)return a.error("Expected two or more arguments.");const c=a.parse(n[1],1,hn);if(!c)return a.error("No image name provided.");if(n.length===2)return new gl(c);const d=a.parse(n[2],1,hn);return d?new gl(c,d):a.error("Secondary image variant is not a string.")}evaluate(n){const a=cr.fromString(this.inputPrimary.evaluate(n),this.inputSecondary?this.inputSecondary.evaluate(n):void 0);return a&&n.availableImages&&(a.available=n.availableImages.indexOf(a.namePrimary)>-1,a.nameSecondary&&a.available&&n.availableImages&&(a.available=n.availableImages.indexOf(a.nameSecondary)>-1)),a}eachChild(n){n(this.inputPrimary),this.inputSecondary&&n(this.inputSecondary)}outputDefined(){return!1}serialize(){return this.inputSecondary?["image",this.inputPrimary.serialize(),this.inputSecondary.serialize()]:["image",this.inputPrimary.serialize()]}}function Dn(i){return i instanceof Number?"number":i instanceof String?"string":i instanceof Boolean?"boolean":Array.isArray(i)?"array":i===null?"null":typeof i}const Ka={"to-boolean":ln,"to-color":Yo,"to-number":Gt,"to-string":hn};class Qo{constructor(n,a){this.type=n,this.args=a}static parse(n,a){if(n.length<2)return a.error("Expected at least one argument.");const c=n[0],d=[];let m=cs;if(c==="to-array"){if(!Array.isArray(n[1]))return null;const y=n[1].length;if(a.expectedType){if(a.expectedType.kind!=="array")return a.error(`Expected ${a.expectedType.kind} but found array.`);m=Fo(a.expectedType.itemType,y)}else{if(!(y>0&&Ms(n[1][0])))return null;m=Fo(di(n[1][0]),y)}for(let b=0;b<y;b++){const S=n[1][b];let T;if(Dn(S)==="array")T=a.parse(S,void 0,m.itemType);else{const D=Dn(S);if(D!==m.itemType.kind)return a.error(`Expected ${m.itemType.kind} but found ${D}.`);T=a.registry.literal.parse(["literal",S===void 0?null:S],a)}if(!T)return null;d.push(T)}}else{if((c==="to-boolean"||c==="to-string")&&n.length!==2)return a.error("Expected one argument.");m=Ka[c];for(let y=1;y<n.length;y++){const b=a.parse(n[y],y,tn);if(!b)return null;d.push(b)}}return new Qo(m,d)}evaluate(n){if(this.type.kind==="boolean")return!!this.args[0].evaluate(n);if(this.type.kind==="color"){let a,c;for(const d of this.args){if(a=d.evaluate(n),c=null,a instanceof mn)return a;if(typeof a=="string"){const m=n.parseColor(a);if(m)return m}else if(Array.isArray(a)&&(c=a.length<3||a.length>4?`Invalid rbga value ${JSON.stringify(a)}: expected an array containing either three or four numeric values.`:ml(a[0],a[1],a[2],a[3]),!c))return new mn(a[0]/255,a[1]/255,a[2]/255,a[3])}throw new Oi(c||`Could not parse color from value '${typeof a=="string"?a:String(JSON.stringify(a))}'`)}if(this.type.kind==="number"){let a=null;for(const c of this.args){if(a=c.evaluate(n),a===null)return 0;const d=Number(a);if(!isNaN(d))return d}throw new Oi(`Could not convert ${JSON.stringify(a)} to number.`)}return this.type.kind==="formatted"?eo.fromString(oi(this.args[0].evaluate(n))):this.type.kind==="resolvedImage"?cr.fromString(oi(this.args[0].evaluate(n))):this.type.kind==="array"?this.args.map(a=>a.evaluate(n)):oi(this.args[0].evaluate(n))}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}serialize(){if(this.type.kind==="formatted")return new Lu([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new gl(this.args[0]).serialize();const n=this.type.kind==="array"?[]:[`to-${this.type.kind}`];return this.eachChild(a=>{n.push(a.serialize())}),n}}var fa=Qo;const Ru=["Unknown","Point","LineString","Polygon"];var rm=class{constructor(i,n){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null,this.scope=i,this.options=n}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Ru[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}measureLight(i){return this.globals.brightness||0}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const i=this.featureDistanceData.center,n=this.featureDistanceData.scale,{x:a,y:c}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(a*n-i[0])+this.featureDistanceData.bearing[1]*(c*n-i[1])}return 0}parseColor(i){let n=this._parseColorCache[i];return n||(n=this._parseColorCache[i]=mn.parse(i)),n}getConfig(i){return this.options?this.options.get(i):null}};class Is{constructor(n,a,c,d,m){this.name=n,this.type=a,this._evaluate=c,this.args=d,this._overloadIndex=m}evaluate(n){if(!this._evaluate){const a=Is.definitions[this.name];this._evaluate=Array.isArray(a)?a[2]:a.overloads[this._overloadIndex][1]}return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(n=>n.serialize()))}static parse(n,a){const c=n[0],d=Is.definitions[c];if(!d)return a.error(`Unknown expression "${c}". If you wanted a literal array, use ["literal", [...]].`,0);const m=Array.isArray(d)?d[0]:d.type,y=Array.isArray(d)?[[d[1],d[2]]]:d.overloads,b=[];let S=null,T=-1;for(const[D,O]of y){if(Array.isArray(D)&&D.length!==n.length-1)continue;b.push(D),T++,S=new Bd(a.registry,a.path,null,a.scope,void 0,a._scope,a.options);const z=[];let $=!1;for(let G=1;G<n.length;G++){const q=n[G],re=Array.isArray(D)?D[G-1]:D.type,ie=S.parse(q,1+z.length,re);if(!ie){$=!0;break}z.push(ie)}if(!$)if(Array.isArray(D)&&D.length!==z.length)S.error(`Expected ${D.length} arguments, but found ${z.length} instead.`);else{for(let G=0;G<z.length;G++){const q=Array.isArray(D)?D[G]:D.type,re=z[G];S.concat(G+1).checkSubtype(q,re.type)}if(S.errors.length===0)return new Is(c,m,O,z,T)}}if(b.length===1)a.errors.push(...S.errors);else{const D=(b.length?b:y.map(([z])=>z)).map(nm).join(" | "),O=[];for(let z=1;z<n.length;z++){const $=a.parse(n[z],1+O.length);if(!$)return null;O.push(fi($.type))}a.error(`Expected arguments of type ${D}, but found (${O.join(", ")}) instead.`)}return null}static register(n,a){Is.definitions=a;for(const c in a)n[c]=Is}}function nm(i){return Array.isArray(i)?`(${i.map(fi).join(", ")})`:`(${fi(i.type)}...)`}var rn=Is;class Ec{constructor(n,a,c){this.type=ku,this.locale=c,this.caseSensitive=n,this.diacriticSensitive=a}static parse(n,a){if(n.length!==2)return a.error("Expected one argument.");const c=n[1];if(typeof c!="object"||Array.isArray(c))return a.error("Collator options argument must be an object.");const d=a.parse(c["case-sensitive"]!==void 0&&c["case-sensitive"],1,ln);if(!d)return null;const m=a.parse(c["diacritic-sensitive"]!==void 0&&c["diacritic-sensitive"],1,ln);if(!m)return null;let y=null;return c.locale&&(y=a.parse(c.locale,1,hn),!y)?null:new Ec(d,m,y)}evaluate(n){return new Nr(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}serialize(){const n={};return n["case-sensitive"]=this.caseSensitive.serialize(),n["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(n.locale=this.locale.serialize()),["collator",n]}}var fd={exports:{}};fd.exports=function(){function i(c,d,m,y,b){for(;y>m;){if(y-m>600){var S=y-m+1,T=d-m+1,D=Math.log(S),O=.5*Math.exp(2*D/3),z=.5*Math.sqrt(D*O*(S-O)/S)*(T-S/2<0?-1:1);i(c,d,Math.max(m,Math.floor(d-T*O/S+z)),Math.min(y,Math.floor(d+(S-T)*O/S+z)),b)}var $=c[d],G=m,q=y;for(n(c,m,d),b(c[y],$)>0&&n(c,m,y);G<q;){for(n(c,G,q),G++,q--;b(c[G],$)<0;)G++;for(;b(c[q],$)>0;)q--}b(c[m],$)===0?n(c,m,q):n(c,++q,y),q<=d&&(m=q+1),d<=q&&(y=q-1)}}function n(c,d,m){var y=c[d];c[d]=c[m],c[m]=y}function a(c,d){return c<d?-1:c>d?1:0}return function(c,d,m,y,b){i(c,d,m||0,y||c.length-1,b||a)}}();var dd=K(fd.exports);function N_(i){let n=0;for(let a,c,d=0,m=i.length,y=m-1;d<m;y=d++)a=i[d],c=i[y],n+=(c.x-a.x)*(a.y+c.y);return n}function Bo(i,n){i[0]=Math.min(i[0],n[0]),i[1]=Math.min(i[1],n[1]),i[2]=Math.max(i[2],n[0]),i[3]=Math.max(i[3],n[1])}function _l(i,n){return!(i[0]<=n[0]||i[2]>=n[2]||i[1]<=n[1]||i[3]>=n[3])}function Dc(i,n,a){const c=i[0]-n[0],d=i[1]-n[1],m=i[0]-a[0],y=i[1]-a[1];return c*y-m*d==0&&c*m<=0&&d*y<=0}function da(i,n,a=!1){let c=!1;for(let b=0,S=n.length;b<S;b++){const T=n[b];for(let D=0,O=T.length,z=O-1;D<O;z=D++){const $=T[z],G=T[D];if(Dc(i,$,G))return a;(m=$)[1]>(d=i)[1]!=(y=G)[1]>d[1]&&d[0]<(y[0]-m[0])*(d[1]-m[1])/(y[1]-m[1])+m[0]&&(c=!c)}}var d,m,y;return c}function Oh(i,n,a,c){const d=c[0]-a[0],m=c[1]-a[1],y=(i[0]-a[0])*m-d*(i[1]-a[1]),b=(n[0]-a[0])*m-d*(n[1]-a[1]);return y>0&&b<0||y<0&&b>0}function fs(i,n,a,c){return(d=[c[0]-a[0],c[1]-a[1]])[0]*(m=[n[0]-i[0],n[1]-i[1]])[1]-d[1]*m[0]!=0&&!(!Oh(i,n,a,c)||!Oh(a,c,i,n));var d,m}const ds=8192;function Pc(i,n){const a=(180+i[0])/360,c=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i[1]*Math.PI/360)))/360,d=Math.pow(2,n.z);return[Math.round(a*d*ds),Math.round(c*d*ds)]}function kh(i,n){for(let a=0;a<n.length;a++)if(da(i,n[a]))return!0;return!1}function Lh(i,n,a){for(const c of a)for(let d=0,m=c.length,y=m-1;d<m;y=d++)if(fs(i,n,c[y],c[d]))return!0;return!1}function Aa(i,n){for(let a=0;a<i.length;++a)if(!da(i[a],n))return!1;for(let a=0;a<i.length-1;++a)if(Lh(i[a],i[a+1],n))return!1;return!0}function im(i,n){for(let a=0;a<n.length;a++)if(Aa(i,n[a]))return!0;return!1}function Mc(i,n,a){const c=[];for(let d=0;d<i.length;d++){const m=[];for(let y=0;y<i[d].length;y++){const b=Pc(i[d][y],a);Bo(n,b),m.push(b)}c.push(m)}return c}function pd(i,n,a){const c=[];for(let d=0;d<i.length;d++){const m=Mc(i[d],n,a);c.push(m)}return c}function Rh(i,n,a,c){if(i[0]<a[0]||i[0]>a[2]){const d=.5*c;let m=i[0]-a[0]>d?-c:a[0]-i[0]>d?c:0;m===0&&(m=i[0]-a[2]>d?-c:a[2]-i[0]>d?c:0),i[0]+=m}Bo(n,i)}function zh(i,n,a,c){const d=Math.pow(2,c.z)*ds,m=[c.x*ds,c.y*ds],y=[];if(!i)return y;for(const b of i)for(const S of b){const T=[S.x+m[0],S.y+m[1]];Rh(T,n,a,d),y.push(T)}return y}function zu(i,n,a,c){const d=Math.pow(2,c.z)*ds,m=[c.x*ds,c.y*ds],y=[];if(!i)return y;for(const S of i){const T=[];for(const D of S){const O=[D.x+m[0],D.y+m[1]];Bo(n,O),T.push(O)}y.push(T)}if(n[2]-n[0]<=d/2){(b=n)[0]=b[1]=1/0,b[2]=b[3]=-1/0;for(const S of y)for(const T of S)Rh(T,n,a,d)}var b;return y}class Ea{constructor(n,a){this.type=ln,this.geojson=n,this.geometries=a}static parse(n,a){if(n.length!==2)return a.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(Ms(n[1])){const c=n[1];if(c.type==="FeatureCollection")for(let d=0;d<c.features.length;++d){const m=c.features[d].geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new Ea(c,c.features[d].geometry)}else if(c.type==="Feature"){const d=c.geometry.type;if(d==="Polygon"||d==="MultiPolygon")return new Ea(c,c.geometry)}else if(c.type==="Polygon"||c.type==="MultiPolygon")return new Ea(c,c)}return a.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(a,c){const d=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],y=a.canonicalID();if(!y)return!1;if(c.type==="Polygon"){const b=Mc(c.coordinates,m,y),S=zh(a.geometry(),d,m,y);if(!_l(d,m))return!1;for(const T of S)if(!da(T,b))return!1}if(c.type==="MultiPolygon"){const b=pd(c.coordinates,m,y),S=zh(a.geometry(),d,m,y);if(!_l(d,m))return!1;for(const T of S)if(!kh(T,b))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(a,c){const d=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],y=a.canonicalID();if(!y)return!1;if(c.type==="Polygon"){const b=Mc(c.coordinates,m,y),S=zu(a.geometry(),d,m,y);if(!_l(d,m))return!1;for(const T of S)if(!Aa(T,b))return!1}if(c.type==="MultiPolygon"){const b=pd(c.coordinates,m,y),S=zu(a.geometry(),d,m,y);if(!_l(d,m))return!1;for(const T of S)if(!im(T,b))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var Nh=Ea,Os={exports:{}};Os.exports=function(){var i={kilometers:1,miles:.621371192237334,nauticalmiles:.5399568034557235,meters:1e3,metres:1e3,yards:1093.6132983377079,feet:3280.839895013123,inches:39370.078740157485},n=1/298.257223563,a=n*(2-n),c=Math.PI/180,d=function(T,D){if(T===void 0)throw new Error("No latitude given.");if(D&&!i[D])throw new Error("Unknown unit "+D+". Use one of: "+Object.keys(i).join(", "));var O=6378.137*c*(D?i[D]:1),z=Math.cos(T*c),$=1/(1-a*(1-z*z)),G=Math.sqrt($);this.kx=O*G*z,this.ky=O*G*$*(1-a)},m={units:{configurable:!0}};function y(T,D){return T[0]===D[0]&&T[1]===D[1]}function b(T,D,O){var z=S(D[0]-T[0]);return[T[0]+z*O,T[1]+(D[1]-T[1])*O]}function S(T){for(;T<-180;)T+=360;for(;T>180;)T-=360;return T}return d.fromTile=function(T,D,O){var z=Math.PI*(1-2*(T+.5)/Math.pow(2,D)),$=Math.atan(.5*(Math.exp(z)-Math.exp(-z)))/c;return new d($,O)},m.units.get=function(){return i},d.prototype.distance=function(T,D){var O=S(T[0]-D[0])*this.kx,z=(T[1]-D[1])*this.ky;return Math.sqrt(O*O+z*z)},d.prototype.bearing=function(T,D){var O=S(D[0]-T[0])*this.kx;return Math.atan2(O,(D[1]-T[1])*this.ky)/c},d.prototype.destination=function(T,D,O){var z=O*c;return this.offset(T,Math.sin(z)*D,Math.cos(z)*D)},d.prototype.offset=function(T,D,O){return[T[0]+D/this.kx,T[1]+O/this.ky]},d.prototype.lineDistance=function(T){for(var D=0,O=0;O<T.length-1;O++)D+=this.distance(T[O],T[O+1]);return D},d.prototype.area=function(T){for(var D=0,O=0;O<T.length;O++)for(var z=T[O],$=0,G=z.length,q=G-1;$<G;q=$++)D+=S(z[$][0]-z[q][0])*(z[$][1]+z[q][1])*(O?-1:1);return Math.abs(D)/2*this.kx*this.ky},d.prototype.along=function(T,D){var O=0;if(D<=0)return T[0];for(var z=0;z<T.length-1;z++){var $=T[z],G=T[z+1],q=this.distance($,G);if((O+=q)>D)return b($,G,(D-(O-q))/q)}return T[T.length-1]},d.prototype.pointToSegmentDistance=function(T,D,O){var z=D[0],$=D[1],G=S(O[0]-z)*this.kx,q=(O[1]-$)*this.ky,re=0;return G===0&&q===0||((re=(S(T[0]-z)*this.kx*G+(T[1]-$)*this.ky*q)/(G*G+q*q))>1?(z=O[0],$=O[1]):re>0&&(z+=G/this.kx*re,$+=q/this.ky*re)),G=S(T[0]-z)*this.kx,q=(T[1]-$)*this.ky,Math.sqrt(G*G+q*q)},d.prototype.pointOnLine=function(T,D){for(var O,z,$,G,q=1/0,re=0;re<T.length-1;re++){var ie=T[re][0],fe=T[re][1],_e=S(T[re+1][0]-ie)*this.kx,ge=(T[re+1][1]-fe)*this.ky,Se=0;_e===0&&ge===0||((Se=(S(D[0]-ie)*this.kx*_e+(D[1]-fe)*this.ky*ge)/(_e*_e+ge*ge))>1?(ie=T[re+1][0],fe=T[re+1][1]):Se>0&&(ie+=_e/this.kx*Se,fe+=ge/this.ky*Se));var be=(_e=S(D[0]-ie)*this.kx)*_e+(ge=(D[1]-fe)*this.ky)*ge;be<q&&(q=be,O=ie,z=fe,$=re,G=Se)}return{point:[O,z],index:$,t:Math.max(0,Math.min(1,G))}},d.prototype.lineSlice=function(T,D,O){var z=this.pointOnLine(O,T),$=this.pointOnLine(O,D);if(z.index>$.index||z.index===$.index&&z.t>$.t){var G=z;z=$,$=G}var q=[z.point],re=z.index+1,ie=$.index;!y(O[re],q[0])&&re<=ie&&q.push(O[re]);for(var fe=re+1;fe<=ie;fe++)q.push(O[fe]);return y(O[ie],$.point)||q.push($.point),q},d.prototype.lineSliceAlong=function(T,D,O){for(var z=0,$=[],G=0;G<O.length-1;G++){var q=O[G],re=O[G+1],ie=this.distance(q,re);if((z+=ie)>T&&$.length===0&&$.push(b(q,re,(T-(z-ie))/ie)),z>=D)return $.push(b(q,re,(D-(z-ie))/ie)),$;z>T&&$.push(re)}return $},d.prototype.bufferPoint=function(T,D){var O=D/this.ky,z=D/this.kx;return[T[0]-z,T[1]-O,T[0]+z,T[1]+O]},d.prototype.bufferBBox=function(T,D){var O=D/this.ky,z=D/this.kx;return[T[0]-z,T[1]-O,T[2]+z,T[3]+O]},d.prototype.insideBBox=function(T,D){return S(T[0]-D[0])>=0&&S(T[0]-D[2])<=0&&T[1]>=D[1]&&T[1]<=D[3]},Object.defineProperties(d,m),d}();var io=K(Os.exports),Fh={exports:{}};Fh.exports=function(){var i=function(a,c){if(a===void 0&&(a=[]),c===void 0&&(c=n),this.data=a,this.length=this.data.length,this.compare=c,this.length>0)for(var d=(this.length>>1)-1;d>=0;d--)this._down(d)};function n(a,c){return a<c?-1:a>c?1:0}return i.prototype.push=function(a){this.data.push(a),this.length++,this._up(this.length-1)},i.prototype.pop=function(){if(this.length!==0){var a=this.data[0],c=this.data.pop();return this.length--,this.length>0&&(this.data[0]=c,this._down(0)),a}},i.prototype.peek=function(){return this.data[0]},i.prototype._up=function(a){for(var c=this.data,d=this.compare,m=c[a];a>0;){var y=a-1>>1,b=c[y];if(d(m,b)>=0)break;c[a]=b,a=y}c[a]=m},i.prototype._down=function(a){for(var c=this.data,d=this.compare,m=this.length>>1,y=c[a];a<m;){var b=1+(a<<1),S=c[b],T=b+1;if(T<this.length&&d(c[T],S)<0&&(b=T,S=c[T]),d(S,y)>=0)break;c[a]=S,a=b}c[a]=y},i}();var pa=K(Fh.exports),Ut=8192;function Nu(i,n){return n.dist-i.dist}const Ic=100,Oc=50;function md(i){const n=[1/0,1/0,-1/0,-1/0];if(n.length!==i.length)return!1;for(let a=0;a<n.length;a++)if(n[a]!==i[a])return!1;return!0}function ks(i){return i[1]-i[0]+1}function Xa(i,n){const a=i[1]>=i[0]&&i[1]<n;return a||console.warn("Distance Expression: Index is out of range"),a}function ma(i,n){if(i[0]>i[1])return[null,null];const a=ks(i);if(n){if(a===2)return[i,null];const c=Math.floor(a/2);return[[i[0],i[0]+c],[i[0]+c,i[1]]]}{if(a===1)return[i,null];const c=Math.floor(a/2)-1;return[[i[0],i[0]+c],[i[0]+c+1,i[1]]]}}function Da(i,n){const a=[1/0,1/0,-1/0,-1/0];if(!Xa(n,i.length))return a;for(let c=n[0];c<=n[1];++c)Bo(a,i[c]);return a}function jh(i){const n=[1/0,1/0,-1/0,-1/0];for(let a=0;a<i.length;++a)for(let c=0;c<i[a].length;++c)Bo(n,i[a][c]);return n}function jo(i,n,a){if(md(i)||md(n))return NaN;let c=0,d=0;return i[2]<n[0]&&(c=n[0]-i[2]),i[0]>n[2]&&(c=i[0]-n[2]),i[1]>n[3]&&(d=i[1]-n[3]),i[3]<n[1]&&(d=n[1]-i[3]),a.distance([0,0],[c,d])}function gd(i){return 360*i-180}function Fu(i){return 360/Math.PI*Math.atan(Math.exp((180-360*i)*Math.PI/180))-90}function ju(i,n){const a=Math.pow(2,n.z),c=(i.y/Ut+n.y)/a;return[gd((i.x/Ut+n.x)/a),Fu(c)]}function kc(i,n){const a=[];for(let c=0;c<i.length;++c)a.push(ju(i[c],n));return a}function _d(i,n,a){const c=a.pointOnLine(n,i).point;return a.distance(i,c)}function Lc(i,n,a,c,d){const m=a.slice(c[0],c[1]+1);let y=1/0;for(let b=n[0];b<=n[1];++b)if((y=Math.min(y,_d(i[b],m,d)))===0)return 0;return y}function yd(i,n,a,c,d){const m=Math.min(d.pointToSegmentDistance(i,a,c),d.pointToSegmentDistance(n,a,c)),y=Math.min(d.pointToSegmentDistance(a,i,n),d.pointToSegmentDistance(c,i,n));return Math.min(m,y)}function yl(i,n,a,c,d){if(!Xa(n,i.length)||!Xa(c,a.length))return NaN;let m=1/0;for(let y=n[0];y<n[1];++y)for(let b=c[0];b<c[1];++b){if(fs(i[y],i[y+1],a[b],a[b+1]))return 0;m=Math.min(m,yd(i[y],i[y+1],a[b],a[b+1],d))}return m}function $h(i,n,a,c,d){if(!Xa(n,i.length)||!Xa(c,a.length))return NaN;let m=1/0;for(let y=n[0];y<=n[1];++y)for(let b=c[0];b<=c[1];++b)if((m=Math.min(m,d.distance(i[y],a[b])))===0)return m;return m}function F_(i,n,a){if(da(i,n,!0))return 0;let c=1/0;for(const d of n){const m=d.length;if(m<2)return console.warn("Distance Expression: Invalid polygon!"),NaN;if(d[0]!==d[m-1]&&(c=Math.min(c,a.pointToSegmentDistance(i,d[m-1],d[0])))===0||(c=Math.min(c,_d(i,d,a)))===0)return c}return c}function Uh(i,n,a,c){if(!Xa(n,i.length))return NaN;for(let m=n[0];m<=n[1];++m)if(da(i[m],a,!0))return 0;let d=1/0;for(let m=n[0];m<n[1];++m)for(const y of a)for(let b=0,S=y.length,T=S-1;b<S;T=b++){if(fs(i[m],i[m+1],y[T],y[b]))return 0;d=Math.min(d,yd(i[m],i[m+1],y[T],y[b],c))}return d}function Rc(i,n){for(const a of i)for(let c=0;c<=a.length-1;++c)if(da(a[c],n,!0))return!0;return!1}function Ls(i,n,a,c=1/0){const d=jh(i),m=jh(n);if(c!==1/0&&jo(d,m,a)>=c)return c;if(_l(d,m)){if(Rc(i,n))return 0}else if(Rc(n,i))return 0;let y=c;for(const b of i)for(let S=0,T=b.length,D=T-1;S<T;D=S++)for(const O of n)for(let z=0,$=O.length,G=$-1;z<$;G=z++){if(fs(b[D],b[S],O[G],O[z]))return 0;y=Math.min(y,yd(b[D],b[S],O[G],O[z],a))}return y}function Vh(i,n,a,c,d,m,y){if(m===null||y===null)return;const b=jo(Da(c,m),Da(d,y),a);b<n&&i.push({dist:b,range1:m,range2:y})}function vl(i,n,a,c,d=1/0){let m=Math.min(c.distance(i[0],a[0][0]),d);if(m===0)return m;const y=new pa([{dist:0,range1:[0,i.length-1],range2:[0,0]}],Nu),b=n?Oc:Ic,S=jh(a);for(;y.length;){const T=y.pop();if(T.dist>=m)continue;const D=T.range1;if(ks(D)<=b){if(!Xa(D,i.length))return NaN;if(n){const O=Uh(i,D,a,c);if((m=Math.min(m,O))===0)return m}else for(let O=D[0];O<=D[1];++O){const z=F_(i[O],a,c);if((m=Math.min(m,z))===0)return m}}else{const O=ma(D,n);if(O[0]!==null){const z=jo(Da(i,O[0]),S,c);z<m&&y.push({dist:z,range1:O[0],range2:[0,0]})}if(O[1]!==null){const z=jo(Da(i,O[1]),S,c);z<m&&y.push({dist:z,range1:O[1],range2:[0,0]})}}}return m}function om(i,n,a,c,d,m=1/0){let y=Math.min(m,d.distance(i[0],a[0]));if(y===0)return y;const b=new pa([{dist:0,range1:[0,i.length-1],range2:[0,a.length-1]}],Nu),S=n?Oc:Ic,T=c?Oc:Ic;for(;b.length;){const D=b.pop();if(D.dist>=y)continue;const O=D.range1,z=D.range2;if(ks(O)<=S&&ks(z)<=T){if(!Xa(O,i.length)||!Xa(z,a.length))return NaN;if(n&&c?y=Math.min(y,yl(i,O,a,z,d)):n||c?n&&!c?y=Math.min(y,Lc(a,z,i,O,d)):!n&&c&&(y=Math.min(y,Lc(i,O,a,z,d))):y=Math.min(y,$h(i,O,a,z,d)),y===0)return y}else{const $=ma(O,n),G=ma(z,c);Vh(b,y,d,i,a,$[0],G[0]),Vh(b,y,d,i,a,$[0],G[1]),Vh(b,y,d,i,a,$[1],G[0]),Vh(b,y,d,i,a,$[1],G[1])}}return y}function Ya(i,n,a,c,d=1/0){let m=d;const y=Da(i,[0,i.length-1]);for(const b of a)if(!(m!==1/0&&jo(y,Da(b,[0,b.length-1]),c)>=m)&&(m=Math.min(m,om(i,n,b,!0,c,m)),m===0))return m;return m}function ql(i,n,a,c,d=1/0){let m=d;const y=Da(i,[0,i.length-1]);for(const b of a){if(m!==1/0&&jo(y,jh(b),c)>=m)continue;const S=vl(i,n,b,c,m);if(isNaN(S))return S;if((m=Math.min(m,S))===0)return m}return m}function Gh(i){return i==="Point"||i==="MultiPoint"||i==="LineString"||i==="MultiLineString"||i==="Polygon"||i==="MultiPolygon"}class Rs{constructor(n,a){this.type=Gt,this.geojson=n,this.geometries=a}static parse(n,a){if(n.length!==2)return a.error(`'distance' expression requires either one argument, but found ' ${n.length-1} instead.`);if(Ms(n[1])){const c=n[1];if(c.type==="FeatureCollection"){for(let d=0;d<c.features.length;++d)if(Gh(c.features[d].geometry.type))return new Rs(c,c.features[d].geometry)}else if(c.type==="Feature"){if(Gh(c.geometry.type))return new Rs(c,c.geometry)}else if(Gh(c.type))return new Rs(c,c)}return a.error("'distance' expression needs to be an array with format ['Distance', GeoJSONObj].")}evaluate(n){const a=n.geometry(),c=n.canonicalID();if(a!=null&&c!=null){if(n.geometryType()==="Point")return function(d,m,y){const b=[];for(const T of d)for(const D of T)b.push(ju(D,m));const S=new io(b[0][1],"meters");return y.type==="Point"||y.type==="MultiPoint"||y.type==="LineString"?om(b,!1,y.type==="Point"?[y.coordinates]:y.coordinates,y.type==="LineString",S):y.type==="MultiLineString"?Ya(b,!1,y.coordinates,S):y.type==="Polygon"||y.type==="MultiPolygon"?ql(b,!1,y.type==="Polygon"?[y.coordinates]:y.coordinates,S):null}(a,c,this.geometries);if(n.geometryType()==="LineString")return function(d,m,y){const b=[];for(const T of d){const D=[];for(const O of T)D.push(ju(O,m));b.push(D)}const S=new io(b[0][0][1],"meters");if(y.type==="Point"||y.type==="MultiPoint"||y.type==="LineString")return Ya(y.type==="Point"?[y.coordinates]:y.coordinates,y.type==="LineString",b,S);if(y.type==="MultiLineString"){let T=1/0;for(let D=0;D<y.coordinates.length;D++){const O=Ya(y.coordinates[D],!0,b,S,T);if(isNaN(O))return O;if((T=Math.min(T,O))===0)return T}return T}if(y.type==="Polygon"||y.type==="MultiPolygon"){let T=1/0;for(let D=0;D<b.length;D++){const O=ql(b[D],!0,y.type==="Polygon"?[y.coordinates]:y.coordinates,S,T);if(isNaN(O))return O;if((T=Math.min(T,O))===0)return T}return T}return null}(a,c,this.geometries);if(n.geometryType()==="Polygon")return function(d,m,y){const b=[];for(const T of function(D,O){const z=D.length;if(z<=1)return[D];const $=[];let G,q;for(let re=0;re<z;re++){const ie=N_(D[re]);ie!==0&&(D[re].area=Math.abs(ie),q===void 0&&(q=ie<0),q===ie<0?(G&&$.push(G),G=[D[re]]):G.push(D[re]))}return G&&$.push(G),$}(d)){const D=[];for(let O=0;O<T.length;++O)D.push(kc(T[O],m));b.push(D)}const S=new io(b[0][0][0][1],"meters");if(y.type==="Point"||y.type==="MultiPoint"||y.type==="LineString")return ql(y.type==="Point"?[y.coordinates]:y.coordinates,y.type==="LineString",b,S);if(y.type==="MultiLineString"){let T=1/0;for(let D=0;D<y.coordinates.length;D++){const O=ql(y.coordinates[D],!0,b,S,T);if(isNaN(O))return O;if((T=Math.min(T,O))===0)return T}return T}return y.type==="Polygon"||y.type==="MultiPolygon"?function(T,D,O){let z=1/0;for(const $ of T)for(const G of D){const q=Ls($,G,O,z);if(isNaN(q))return q;if((z=Math.min(z,q))===0)return z}return z}(y.type==="Polygon"?[y.coordinates]:y.coordinates,b,S):null}(a,c,this.geometries);console.warn("Distance Expression: currently only evaluates valid Point/LineString/Polygon geometries.")}else console.warn("Distance Expression: requirs valid feature and canonical information.");return null}eachChild(){}outputDefined(){return!0}serialize(){return["distance",this.geojson]}}var Kl=Rs;function Xl(i,n){switch(i){case"string":return oi(n);case"number":return+n;case"boolean":return!!n;case"color":return mn.parse(n);case"formatted":return eo.fromString(oi(n));case"resolvedImage":return cr.fromString(oi(n))}return n}function $u(i,n,a,c){return c!==void 0&&(i=c*Math.round(i/c)),n!==void 0&&i<n&&(i=n),a!==void 0&&i>a&&(i=a),i}class ps{constructor(n,a,c){this.type=n,this.key=a,this.scope=c}static parse(n,a){let c=a.expectedType;if(c==null&&(c=tn),n.length<2||n.length>3)return a.error("Invalid number of arguments for 'config' expression.");const d=a.parse(n[1],1);if(!(d instanceof hs))return a.error("Key name of 'config' expression must be a string literal.");if(n.length>=3){const m=a.parse(n[2],2);return m instanceof hs?new ps(c,oi(d.value),oi(m.value)):a.error("Scope of 'config' expression must be a string literal.")}return new ps(c,oi(d.value))}evaluate(n){const a=[this.key,this.scope,n.scope].filter(Boolean).join(""),c=n.getConfig(a);if(!c)return null;const{type:d,value:m,values:y,minValue:b,maxValue:S,stepValue:T}=c,D=c.default.evaluate(n);let O=D;if(m){const z=n.scope;n.scope=(z||"").split("").slice(1).join(""),O=m.evaluate(n),n.scope=z}return d&&(O=Xl(d,O)),O===void 0||b===void 0&&S===void 0&&T===void 0||(typeof O=="number"?O=$u(O,b,S,T):Array.isArray(O)&&(O=O.map(z=>typeof z=="number"?$u(z,b,S,T):z))),m!==void 0&&O!==void 0&&y&&!y.includes(O)&&(O=D,d&&(O=Xl(d,O))),(d&&d!==this.type||O!==void 0&&di(O)!==this.type)&&(O=Xl(this.type.kind,O)),O}eachChild(){}outputDefined(){return!1}serialize(){const n=["config",this.key];return this.scope&&n.concat(this.key),n}}var zs=ps;function Bl(i){if(i instanceof rn&&(i.name==="get"&&i.args.length===1||i.name==="feature-state"||i.name==="has"&&i.args.length===1||i.name==="properties"||i.name==="geometry-type"||i.name==="id"||/^filter-/.test(i.name))||i instanceof Nh||i instanceof Kl)return!1;let n=!0;return i.eachChild(a=>{n&&!Bl(a)&&(n=!1)}),n}function Uu(i){if(i instanceof rn&&i.name==="feature-state")return!1;let n=!0;return i.eachChild(a=>{n&&!Uu(a)&&(n=!1)}),n}function zc(i){if(i instanceof zs)return!1;let n=!0;return i.eachChild(a=>{n&&!zc(a)&&(n=!1)}),n}function Gi(i,n){if(i instanceof rn&&n.indexOf(i.name)>=0)return!1;let a=!0;return i.eachChild(c=>{a&&!Gi(c,n)&&(a=!1)}),a}class xl{constructor(n,a){this.type=a.type,this.name=n,this.boundExpression=a}static parse(n,a){if(n.length!==2||typeof n[1]!="string")return a.error("'var' expression requires exactly one string literal argument.");const c=n[1];return a.scope.has(c)?new xl(c,a.scope.get(c)):a.error(`Unknown variable "${c}". Make sure "${c}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var Mo=xl;class vd{constructor(n,a=[],c,d=new Zl,m=[],y,b){this.registry=n,this.path=a,this.key=a.map(S=>`[${S}]`).join(""),this.scope=d,this.errors=m,this.expectedType=c,this._scope=y,this.options=b}parse(n,a,c,d,m={}){return a||c?this.concat(a,c,d)._parse(n,m):this._parse(n,m)}_parse(n,a){function c(d,m,y){return y==="assert"?new qa(m,[d]):y==="coerce"?new fa(m,[d]):d}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const d=typeof n[0]=="string"?this.registry[n[0]]:void 0;if(d){let m=d.parse(n,this);if(!m)return null;if(this.expectedType){const y=this.expectedType,b=m.type;if(y.kind!=="string"&&y.kind!=="number"&&y.kind!=="boolean"&&y.kind!=="object"&&y.kind!=="array"||b.kind!=="value")if(y.kind!=="color"&&y.kind!=="formatted"&&y.kind!=="resolvedImage"||b.kind!=="value"&&b.kind!=="string"){if(this.checkSubtype(y,b))return null}else m=c(m,y,a.typeAnnotation||"coerce");else m=c(m,y,a.typeAnnotation||"assert")}if(!(m instanceof hs)&&m.type.kind!=="resolvedImage"&&xd(m)){const y=new rm(this._scope,this.options);try{m=new hs(m.type,m.evaluate(y))}catch(b){return this.error(b.message),null}}return m}return fa.parse(["to-array",n],this)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,a,c){const d=typeof n=="number"?this.path.concat(n):this.path,m=c?this.scope.concat(c):this.scope;return new vd(this.registry,d,a||null,m,this.errors,this._scope,this.options)}error(n,...a){const c=`${this.key}${a.map(d=>`[${d}]`).join("")}`;this.errors.push(new Po(c,n))}checkSubtype(n,a){const c=nn(n,a);return c&&this.error(c),c}}var Bd=vd;function xd(i){if(i instanceof Mo)return xd(i.boundExpression);if(i instanceof rn&&i.name==="error"||i instanceof Ec||i instanceof Nh||i instanceof Kl||i instanceof zs)return!1;const n=i instanceof fa||i instanceof qa;let a=!0;return i.eachChild(c=>{a=n?a&&xd(c):a&&c instanceof hs}),!!a&&Bl(i)&&Gi(i,["zoom","heatmap-density","line-progress","raster-value","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center","measure-light","raster-particle-speed"])}function Io(i,n){const a=i.length-1;let c,d,m=0,y=a,b=0;for(;m<=y;)if(b=Math.floor((m+y)/2),c=i[b],d=i[b+1],c<=n){if(b===a||n<d)return b;m=b+1}else{if(!(c>n))throw new Oi("Input is not a number.");y=b-1}return 0}class Yl{constructor(n,a,c){this.type=n,this.input=a,this.labels=[],this.outputs=[];for(const[d,m]of c)this.labels.push(d),this.outputs.push(m)}static parse(n,a){if(n.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return a.error("Expected an even number of arguments.");const c=a.parse(n[1],1,Gt);if(!c)return null;const d=[];let m=null;a.expectedType&&a.expectedType.kind!=="value"&&(m=a.expectedType);for(let y=1;y<n.length;y+=2){const b=y===1?-1/0:n[y],S=n[y+1],T=y,D=y+1;if(typeof b!="number")return a.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',T);if(d.length&&d[d.length-1][0]>=b)return a.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',T);const O=a.parse(S,D,m);if(!O)return null;m=m||O.type,d.push([b,O])}return new Yl(m,c,d)}evaluate(n){const a=this.labels,c=this.outputs;if(a.length===1)return c[0].evaluate(n);const d=this.input.evaluate(n);if(d<=a[0])return c[0].evaluate(n);const m=a.length;return d>=a[m-1]?c[m-1].evaluate(n):c[Io(a,d)].evaluate(n)}eachChild(n){n(this.input);for(const a of this.outputs)n(a)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}serialize(){const n=["step",this.input.serialize()];for(let a=0;a<this.labels.length;a++)a>0&&n.push(this.labels[a]),n.push(this.outputs[a].serialize());return n}}var Nc=Yl;const Fc=.95047,bl=1.08883,bd=4/29,Vu=6/29,Jl=3*Vu*Vu,am=Vu*Vu*Vu,Gu=Math.PI/180,Pa=180/Math.PI;function jc(i){return i>am?Math.pow(i,1/3):i/Jl+bd}function Hh(i){return i>Vu?i*i*i:Jl*(i-bd)}function Ma(i){return 255*(i<=.0031308?12.92*i:1.055*Math.pow(i,1/2.4)-.055)}function $c(i){return(i/=255)<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4)}function Wh(i){const n=$c(i.r),a=$c(i.g),c=$c(i.b),d=jc((.4124564*n+.3575761*a+.1804375*c)/Fc),m=jc((.2126729*n+.7151522*a+.072175*c)/1);return{l:116*m-16,a:500*(d-m),b:200*(m-jc((.0193339*n+.119192*a+.9503041*c)/bl)),alpha:i.a}}function Ql(i){let n=(i.l+16)/116,a=isNaN(i.a)?n:n+i.a/500,c=isNaN(i.b)?n:n-i.b/200;return n=1*Hh(n),a=Fc*Hh(a),c=bl*Hh(c),new mn(Ma(3.2404542*a-1.5371385*n-.4985314*c),Ma(-.969266*a+1.8760108*n+.041556*c),Ma(.0556434*a-.2040259*n+1.0572252*c),i.alpha)}function sm(i,n,a){const c=n-i;return i+a*(c>180||c<-180?c-360*Math.round(c/360):c)}const Ns={forward:Wh,reverse:Ql,interpolate:function(i,n,a){return{l:Zr(i.l,n.l,a),a:Zr(i.a,n.a,a),b:Zr(i.b,n.b,a),alpha:Zr(i.alpha,n.alpha,a)}}},ms={forward:function(i){const{l:n,a,b:c}=Wh(i),d=Math.atan2(c,a)*Pa;return{h:d<0?d+360:d,c:Math.sqrt(a*a+c*c),l:n,alpha:i.a}},reverse:function(i){const n=i.h*Gu,a=i.c;return Ql({l:i.l,a:Math.cos(n)*a,b:Math.sin(n)*a,alpha:i.alpha})},interpolate:function(i,n,a){return{h:sm(i.h,n.h,a),c:Zr(i.c,n.c,a),l:Zr(i.l,n.l,a),alpha:Zr(i.alpha,n.alpha,a)}}};var Zh=Object.freeze({__proto__:null,hcl:ms,lab:Ns});class Hu{constructor(n,a,c,d,m){this.type=n,this.operator=a,this.interpolation=c,this.input=d,this.labels=[],this.outputs=[];for(const[y,b]of m)this.labels.push(y),this.outputs.push(b)}static interpolationFactor(n,a,c,d){let m=0;if(n.name==="exponential")m=Wu(a,n.base,c,d);else if(n.name==="linear")m=Wu(a,1,c,d);else if(n.name==="cubic-bezier"){const y=n.controlPoints;m=new me(y[0],y[1],y[2],y[3]).solve(Wu(a,1,c,d))}return m}static parse(n,a){let[c,d,m,...y]=n;if(!Array.isArray(d)||d.length===0)return a.error("Expected an interpolation type expression.",1);if(d[0]==="linear")d={name:"linear"};else if(d[0]==="exponential"){const T=d[1];if(typeof T!="number")return a.error("Exponential interpolation requires a numeric base.",1,1);d={name:"exponential",base:T}}else{if(d[0]!=="cubic-bezier")return a.error(`Unknown interpolation type ${String(d[0])}`,1,0);{const T=d.slice(1);if(T.length!==4||T.some(D=>typeof D!="number"||D<0||D>1))return a.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);d={name:"cubic-bezier",controlPoints:T}}}if(n.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return a.error("Expected an even number of arguments.");if(m=a.parse(m,2,Gt),!m)return null;const b=[];let S=null;c==="interpolate-hcl"||c==="interpolate-lab"?S=Yo:a.expectedType&&a.expectedType.kind!=="value"&&(S=a.expectedType);for(let T=0;T<y.length;T+=2){const D=y[T],O=y[T+1],z=T+3,$=T+4;if(typeof D!="number")return a.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',z);if(b.length&&b[b.length-1][0]>=D)return a.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',z);const G=a.parse(O,$,S);if(!G)return null;S=S||G.type,b.push([D,G])}return S.kind==="number"||S.kind==="color"||S.kind==="array"&&S.itemType.kind==="number"&&typeof S.N=="number"?new Hu(S,c,d,m,b):a.error(`Type ${fi(S)} is not interpolatable.`)}evaluate(n){const a=this.labels,c=this.outputs;if(a.length===1)return c[0].evaluate(n);const d=this.input.evaluate(n);if(d<=a[0])return c[0].evaluate(n);const m=a.length;if(d>=a[m-1])return c[m-1].evaluate(n);const y=Io(a,d),b=Hu.interpolationFactor(this.interpolation,d,a[y],a[y+1]),S=c[y].evaluate(n),T=c[y+1].evaluate(n);return this.operator==="interpolate"?No[this.type.kind.toLowerCase()](S,T,b):this.operator==="interpolate-hcl"?ms.reverse(ms.interpolate(ms.forward(S),ms.forward(T),b)):Ns.reverse(Ns.interpolate(Ns.forward(S),Ns.forward(T),b))}eachChild(n){n(this.input);for(const a of this.outputs)n(a)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}serialize(){let n;n=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const a=[this.operator,n,this.input.serialize()];for(let c=0;c<this.labels.length;c++)a.push(this.labels[c],this.outputs[c].serialize());return a}}function Wu(i,n,a,c){const d=c-a,m=i-a;return d===0?0:n===1?m/d:(Math.pow(n,m)-1)/(Math.pow(n,d)-1)}var ea=Hu;class eu{constructor(n,a){this.type=n,this.args=a}static parse(n,a){if(n.length<2)return a.error("Expectected at least one argument.");let c=null;const d=a.expectedType;d&&d.kind!=="value"&&(c=d);const m=[];for(const b of n.slice(1)){const S=a.parse(b,1+m.length,c,void 0,{typeAnnotation:"omit"});if(!S)return null;c=c||S.type,m.push(S)}const y=d&&m.some(b=>nn(d,b.type));return new eu(y?tn:c,m)}evaluate(n){let a,c=null,d=0;for(const m of this.args){if(d++,c=m.evaluate(n),c&&c instanceof cr&&!c.available&&(a||(a=c),c=null,d===this.args.length))return a;if(c!==null)break}return c}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}serialize(){const n=["coalesce"];return this.eachChild(a=>{n.push(a.serialize())}),n}}var qh=eu;class Uc{constructor(n,a){this.type=a.type,this.bindings=[].concat(n),this.result=a}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const a of this.bindings)n(a[1]);n(this.result)}static parse(n,a){if(n.length<4)return a.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const c=[];for(let m=1;m<n.length-1;m+=2){const y=n[m];if(typeof y!="string")return a.error(`Expected string, but found ${typeof y} instead.`,m);if(/[^a-zA-Z0-9_]/.test(y))return a.error("Variable names must contain only alphanumeric characters or '_'.",m);const b=a.parse(n[m+1],m+1);if(!b)return null;c.push([y,b])}const d=a.parse(n[n.length-1],n.length-1,a.expectedType,c);return d?new Uc(c,d):null}outputDefined(){return this.result.outputDefined()}serialize(){const n=["let"];for(const[a,c]of this.bindings)n.push(a,c.serialize());return n.push(this.result.serialize()),n}}var Kh=Uc;class Cl{constructor(n,a,c){this.type=n,this.index=a,this.input=c}static parse(n,a){if(n.length!==3)return a.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const c=a.parse(n[1],1,Gt),d=a.parse(n[2],2,Fo(a.expectedType||tn));return c&&d?new Cl(d.type.itemType,c,d):null}evaluate(n){const a=this.index.evaluate(n),c=this.input.evaluate(n);if(a<0)throw new Oi(`Array index out of bounds: ${a} < 0.`);if(a>=c.length)throw new Oi(`Array index out of bounds: ${a} > ${c.length-1}.`);if(a!==Math.floor(a))throw new Oi(`Array index must be an integer, but found ${a} instead.`);return c[a]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var an=Cl;class Xh{constructor(n,a){this.type=ln,this.needle=n,this.haystack=a}static parse(n,a){if(n.length!==3)return a.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const c=a.parse(n[1],1,tn),d=a.parse(n[2],2,tn);return c&&d?yr(c.type,[ln,hn,Gt,cs,tn])?new Xh(c,d):a.error(`Expected first argument to be of type boolean, string, number or null, but found ${fi(c.type)} instead`):null}evaluate(n){const a=this.needle.evaluate(n),c=this.haystack.evaluate(n);if(c==null)return!1;if(!Un(a,["boolean","string","number","null"]))throw new Oi(`Expected first argument to be of type boolean, string, number or null, but found ${fi(di(a))} instead.`);if(!Un(c,["string","array"]))throw new Oi(`Expected second argument to be of type array or string, but found ${fi(di(c))} instead.`);return c.indexOf(a)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var j_=Xh;class v{constructor(n,a,c){this.type=Gt,this.needle=n,this.haystack=a,this.fromIndex=c}static parse(n,a){if(n.length<=2||n.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const c=a.parse(n[1],1,tn),d=a.parse(n[2],2,tn);if(!c||!d)return null;if(!yr(c.type,[ln,hn,Gt,cs,tn]))return a.error(`Expected first argument to be of type boolean, string, number or null, but found ${fi(c.type)} instead`);if(n.length===4){const m=a.parse(n[3],3,Gt);return m?new v(c,d,m):null}return new v(c,d)}evaluate(n){const a=this.needle.evaluate(n),c=this.haystack.evaluate(n);if(!Un(a,["boolean","string","number","null"]))throw new Oi(`Expected first argument to be of type boolean, string, number or null, but found ${fi(di(a))} instead.`);if(!Un(c,["string","array"]))throw new Oi(`Expected second argument to be of type array or string, but found ${fi(di(c))} instead.`);if(this.fromIndex){const d=this.fromIndex.evaluate(n);return c.indexOf(a,d)}return c.indexOf(a)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const n=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),n]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var A=v;class R{constructor(n,a,c,d,m,y){this.inputType=n,this.type=a,this.input=c,this.cases=d,this.outputs=m,this.otherwise=y}static parse(n,a){if(n.length<5)return a.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return a.error("Expected an even number of arguments.");let c,d;a.expectedType&&a.expectedType.kind!=="value"&&(d=a.expectedType);const m={},y=[];for(let T=2;T<n.length-1;T+=2){let D=n[T];const O=n[T+1];Array.isArray(D)||(D=[D]);const z=a.concat(T);if(D.length===0)return z.error("Expected at least one branch label.");for(const G of D){if(typeof G!="number"&&typeof G!="string")return z.error("Branch labels must be numbers or strings.");if(typeof G=="number"&&Math.abs(G)>Number.MAX_SAFE_INTEGER)return z.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof G=="number"&&Math.floor(G)!==G)return z.error("Numeric branch labels must be integer values.");if(c){if(z.checkSubtype(c,di(G)))return null}else c=di(G);if(m[String(G)]!==void 0)return z.error("Branch labels must be unique.");m[String(G)]=y.length}const $=a.parse(O,T,d);if(!$)return null;d=d||$.type,y.push($)}const b=a.parse(n[1],1,tn);if(!b)return null;const S=a.parse(n[n.length-1],n.length-1,d);return S?b.type.kind!=="value"&&a.concat(1).checkSubtype(c,b.type)?null:new R(c,d,b,m,y,S):null}evaluate(n){const a=this.input.evaluate(n);return(di(a)===this.inputType&&this.outputs[this.cases[a]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}serialize(){const n=["match",this.input.serialize()],a=Object.keys(this.cases).sort(),c=[],d={};for(const y of a){const b=d[this.cases[y]];b===void 0?(d[this.cases[y]]=c.length,c.push([this.cases[y],[y]])):c[b][1].push(y)}const m=y=>this.inputType.kind==="number"?Number(y):y;for(const[y,b]of c)n.push(b.length===1?m(b[0]):b.map(m)),n.push(this.outputs[y].serialize());return n.push(this.otherwise.serialize()),n}}var W=R;class oe{constructor(n,a,c){this.type=n,this.branches=a,this.otherwise=c}static parse(n,a){if(n.length<4)return a.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return a.error("Expected an odd number of arguments.");let c;a.expectedType&&a.expectedType.kind!=="value"&&(c=a.expectedType);const d=[];for(let y=1;y<n.length-1;y+=2){const b=a.parse(n[y],y,ln);if(!b)return null;const S=a.parse(n[y+1],y+1,c);if(!S)return null;d.push([b,S]),c=c||S.type}const m=a.parse(n[n.length-1],n.length-1,c);return m?new oe(c,d,m):null}evaluate(n){for(const[a,c]of this.branches)if(a.evaluate(n))return c.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[a,c]of this.branches)n(a),n(c);n(this.otherwise)}outputDefined(){return this.branches.every(([n,a])=>a.outputDefined())&&this.otherwise.outputDefined()}serialize(){const n=["case"];return this.eachChild(a=>{n.push(a.serialize())}),n}}var Be=oe;class $e{constructor(n,a,c,d){this.type=n,this.input=a,this.beginIndex=c,this.endIndex=d}static parse(n,a){if(n.length<=2||n.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const c=a.parse(n[1],1,tn),d=a.parse(n[2],2,Gt);if(!c||!d)return null;if(!yr(c.type,[Fo(tn),hn,tn]))return a.error(`Expected first argument to be of type array or string, but found ${fi(c.type)} instead`);if(n.length===4){const m=a.parse(n[3],3,Gt);return m?new $e(c.type,c,d,m):null}return new $e(c.type,c,d)}evaluate(n){const a=this.input.evaluate(n),c=this.beginIndex.evaluate(n);if(!Un(a,["string","array"]))throw new Oi(`Expected first argument to be of type array or string, but found ${fi(di(a))} instead.`);if(this.endIndex){const d=this.endIndex.evaluate(n);return a.slice(c,d)}return a.slice(c)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const n=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),n]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var ot=$e;function _t(i,n){return i==="=="||i==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function Vt(i,n,a,c){return c.compare(n,a)===0}function mr(i,n,a){const c=i!=="=="&&i!=="!=";return class wG{constructor(m,y,b){this.type=ln,this.lhs=m,this.rhs=y,this.collator=b,this.hasUntypedArgument=m.type.kind==="value"||y.type.kind==="value"}static parse(m,y){if(m.length!==3&&m.length!==4)return y.error("Expected two or three arguments.");const b=m[0];let S=y.parse(m[1],1,tn);if(!S)return null;if(!_t(b,S.type))return y.concat(1).error(`"${b}" comparisons are not supported for type '${fi(S.type)}'.`);let T=y.parse(m[2],2,tn);if(!T)return null;if(!_t(b,T.type))return y.concat(2).error(`"${b}" comparisons are not supported for type '${fi(T.type)}'.`);if(S.type.kind!==T.type.kind&&S.type.kind!=="value"&&T.type.kind!=="value")return y.error(`Cannot compare types '${fi(S.type)}' and '${fi(T.type)}'.`);c&&(S.type.kind==="value"&&T.type.kind!=="value"?S=new qa(T.type,[S]):S.type.kind!=="value"&&T.type.kind==="value"&&(T=new qa(S.type,[T])));let D=null;if(m.length===4){if(S.type.kind!=="string"&&T.type.kind!=="string"&&S.type.kind!=="value"&&T.type.kind!=="value")return y.error("Cannot use collator to compare non-string types.");if(D=y.parse(m[3],3,ku),!D)return null}return new wG(S,T,D)}evaluate(m){const y=this.lhs.evaluate(m),b=this.rhs.evaluate(m);if(c&&this.hasUntypedArgument){const S=di(y),T=di(b);if(S.kind!==T.kind||S.kind!=="string"&&S.kind!=="number")throw new Oi(`Expected arguments for "${i}" to be (string, string) or (number, number), but found (${S.kind}, ${T.kind}) instead.`)}if(this.collator&&!c&&this.hasUntypedArgument){const S=di(y),T=di(b);if(S.kind!=="string"||T.kind!=="string")return n(m,y,b)}return this.collator?a(m,y,b,this.collator.evaluate(m)):n(m,y,b)}eachChild(m){m(this.lhs),m(this.rhs),this.collator&&m(this.collator)}outputDefined(){return!0}serialize(){const m=[i];return this.eachChild(y=>{m.push(y.serialize())}),m}}}const qr=mr("==",function(i,n,a){return n===a},Vt),Sn=mr("!=",function(i,n,a){return n!==a},function(i,n,a,c){return!Vt(0,n,a,c)}),$o=mr("<",function(i,n,a){return n<a},function(i,n,a,c){return c.compare(n,a)<0}),fo=mr(">",function(i,n,a){return n>a},function(i,n,a,c){return c.compare(n,a)>0}),ga=mr("<=",function(i,n,a){return n<=a},function(i,n,a,c){return c.compare(n,a)<=0}),ta=mr(">=",function(i,n,a){return n>=a},function(i,n,a,c){return c.compare(n,a)>=0});class wl{constructor(n,a,c,d,m,y){this.type=hn,this.number=n,this.locale=a,this.currency=c,this.unit=d,this.minFractionDigits=m,this.maxFractionDigits=y}static parse(n,a){if(n.length!==3)return a.error("Expected two arguments.");const c=a.parse(n[1],1,Gt);if(!c)return null;const d=n[2];if(typeof d!="object"||Array.isArray(d))return a.error("NumberFormat options argument must be an object.");let m=null;if(d.locale&&(m=a.parse(d.locale,1,hn),!m))return null;let y=null;if(d.currency&&(y=a.parse(d.currency,1,hn),!y))return null;let b=null;if(d.unit&&(b=a.parse(d.unit,1,hn),!b))return null;let S=null;if(d["min-fraction-digits"]&&(S=a.parse(d["min-fraction-digits"],1,Gt),!S))return null;let T=null;return d["max-fraction-digits"]&&(T=a.parse(d["max-fraction-digits"],1,Gt),!T)?null:new wl(c,m,y,b,S,T)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(n):void 0,unit:this.unit?this.unit.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.unit&&n(this.unit),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const n={};return this.locale&&(n.locale=this.locale.serialize()),this.currency&&(n.currency=this.currency.serialize()),this.unit&&(n.unit=this.unit.serialize()),this.minFractionDigits&&(n["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(n["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),n]}}class Cd{constructor(n){this.type=Gt,this.input=n}static parse(n,a){if(n.length!==2)return a.error(`Expected 1 argument, but found ${n.length-1} instead.`);const c=a.parse(n[1],1);return c?c.type.kind!=="array"&&c.type.kind!=="string"&&c.type.kind!=="value"?a.error(`Expected argument of type string or array, but found ${fi(c.type)} instead.`):new Cd(c):null}evaluate(n){const a=this.input.evaluate(n);if(typeof a=="string"||Array.isArray(a))return a.length;throw new Oi(`Expected value to be of type string or array, but found ${fi(di(a))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}serialize(){const n=["length"];return this.eachChild(a=>{n.push(a.serialize())}),n}}function lm(i){return function(){i=1831565813+(i|=0)|0;let n=Math.imul(i^i>>>15,1|i);return n=n+Math.imul(n^n>>>7,61|n)^n,((n^n>>>14)>>>0)/4294967296}}const wd={"==":qr,"!=":Sn,">":fo,"<":$o,">=":ta,"<=":ga,array:qa,at:an,boolean:qa,case:Be,coalesce:qh,collator:Ec,format:Lu,image:gl,in:j_,"index-of":A,interpolate:ea,"interpolate-hcl":ea,"interpolate-lab":ea,length:Cd,let:Kh,literal:hs,match:W,number:qa,"number-format":wl,object:qa,slice:ot,step:Nc,string:qa,"to-boolean":fa,"to-color":fa,"to-number":fa,"to-string":fa,var:Mo,within:Nh,distance:Kl,config:zs};function Yh(i,[n,a,c,d]){n=n.evaluate(i),a=a.evaluate(i),c=c.evaluate(i);const m=d?d.evaluate(i):1,y=ml(n,a,c,m);if(y)throw new Oi(y);return new mn(n/255*m,a/255*m,c/255*m,m)}function um(i,[n,a,c,d]){n=n.evaluate(i),a=a.evaluate(i),c=c.evaluate(i);const m=d?d.evaluate(i):1,y=function(T,D,O,z){return typeof T=="number"&&T>=0&&T<=360?typeof D=="number"&&D>=0&&D<=100&&typeof O=="number"&&O>=0&&O<=100?z===void 0||typeof z=="number"&&z>=0&&z<=1?null:`Invalid hsla value [${[T,D,O,z].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid hsla value [${(typeof z=="number"?[T,D,O,z]:[T,D,O]).join(", ")}]: 's', and 'l' must be between 0 and 100.`:`Invalid hsla value [${(typeof z=="number"?[T,D,O,z]:[T,D,O]).join(", ")}]: 'h' must be between 0 and 360.`}(n,a,c,m);if(y)throw new Oi(y);const b=`hsla(${n}, ${a}%, ${c}%, ${m})`,S=mn.parse(b);if(!S)throw new Oi(`Failed to parse HSLA color: ${b}`);return S}function Jh(i,n){return i in n}function ji(i,n){const a=n[i];return a===void 0?null:a}function gs(i){return{type:i}}rn.register(wd,{error:[{kind:"error"},[hn],(i,[n])=>{throw new Oi(n.evaluate(i))}],typeof:[hn,[tn],(i,[n])=>fi(di(n.evaluate(i)))],"to-rgba":[Fo(Gt,4),[Yo],(i,[n])=>n.evaluate(i).toArray()],rgb:[Yo,[Gt,Gt,Gt],Yh],rgba:[Yo,[Gt,Gt,Gt,Gt],Yh],hsl:[Yo,[Gt,Gt,Gt],um],hsla:[Yo,[Gt,Gt,Gt,Gt],um],has:{type:ln,overloads:[[[hn],(i,[n])=>Jh(n.evaluate(i),i.properties())],[[hn,hl],(i,[n,a])=>Jh(n.evaluate(i),a.evaluate(i))]]},get:{type:tn,overloads:[[[hn],(i,[n])=>ji(n.evaluate(i),i.properties())],[[hn,hl],(i,[n,a])=>ji(n.evaluate(i),a.evaluate(i))]]},"feature-state":[tn,[hn],(i,[n])=>ji(n.evaluate(i),i.featureState||{})],properties:[hl,[],i=>i.properties()],"geometry-type":[hn,[],i=>i.geometryType()],id:[tn,[],i=>i.id()],zoom:[Gt,[],i=>i.globals.zoom],pitch:[Gt,[],i=>i.globals.pitch||0],"distance-from-center":[Gt,[],i=>i.distanceFromCenter()],"measure-light":[Gt,[hn],(i,[n])=>i.measureLight(n.evaluate(i))],"heatmap-density":[Gt,[],i=>i.globals.heatmapDensity||0],"line-progress":[Gt,[],i=>i.globals.lineProgress||0],"raster-value":[Gt,[],i=>i.globals.rasterValue||0],"raster-particle-speed":[Gt,[],i=>i.globals.rasterParticleSpeed||0],"sky-radial-progress":[Gt,[],i=>i.globals.skyRadialProgress||0],accumulated:[tn,[],i=>i.globals.accumulated===void 0?null:i.globals.accumulated],"+":[Gt,gs(Gt),(i,n)=>{let a=0;for(const c of n)a+=c.evaluate(i);return a}],"*":[Gt,gs(Gt),(i,n)=>{let a=1;for(const c of n)a*=c.evaluate(i);return a}],"-":{type:Gt,overloads:[[[Gt,Gt],(i,[n,a])=>n.evaluate(i)-a.evaluate(i)],[[Gt],(i,[n])=>-n.evaluate(i)]]},"/":[Gt,[Gt,Gt],(i,[n,a])=>n.evaluate(i)/a.evaluate(i)],"%":[Gt,[Gt,Gt],(i,[n,a])=>n.evaluate(i)%a.evaluate(i)],ln2:[Gt,[],()=>Math.LN2],pi:[Gt,[],()=>Math.PI],e:[Gt,[],()=>Math.E],"^":[Gt,[Gt,Gt],(i,[n,a])=>Math.pow(n.evaluate(i),a.evaluate(i))],sqrt:[Gt,[Gt],(i,[n])=>Math.sqrt(n.evaluate(i))],log10:[Gt,[Gt],(i,[n])=>Math.log(n.evaluate(i))/Math.LN10],ln:[Gt,[Gt],(i,[n])=>Math.log(n.evaluate(i))],log2:[Gt,[Gt],(i,[n])=>Math.log(n.evaluate(i))/Math.LN2],sin:[Gt,[Gt],(i,[n])=>Math.sin(n.evaluate(i))],cos:[Gt,[Gt],(i,[n])=>Math.cos(n.evaluate(i))],tan:[Gt,[Gt],(i,[n])=>Math.tan(n.evaluate(i))],asin:[Gt,[Gt],(i,[n])=>Math.asin(n.evaluate(i))],acos:[Gt,[Gt],(i,[n])=>Math.acos(n.evaluate(i))],atan:[Gt,[Gt],(i,[n])=>Math.atan(n.evaluate(i))],min:[Gt,gs(Gt),(i,n)=>Math.min(...n.map(a=>a.evaluate(i)))],max:[Gt,gs(Gt),(i,n)=>Math.max(...n.map(a=>a.evaluate(i)))],abs:[Gt,[Gt],(i,[n])=>Math.abs(n.evaluate(i))],round:[Gt,[Gt],(i,[n])=>{const a=n.evaluate(i);return a<0?-Math.round(-a):Math.round(a)}],floor:[Gt,[Gt],(i,[n])=>Math.floor(n.evaluate(i))],ceil:[Gt,[Gt],(i,[n])=>Math.ceil(n.evaluate(i))],"filter-==":[ln,[hn,tn],(i,[n,a])=>i.properties()[n.value]===a.value],"filter-id-==":[ln,[tn],(i,[n])=>i.id()===n.value],"filter-type-==":[ln,[hn],(i,[n])=>i.geometryType()===n.value],"filter-<":[ln,[hn,tn],(i,[n,a])=>{const c=i.properties()[n.value],d=a.value;return typeof c==typeof d&&c<d}],"filter-id-<":[ln,[tn],(i,[n])=>{const a=i.id(),c=n.value;return typeof a==typeof c&&a<c}],"filter->":[ln,[hn,tn],(i,[n,a])=>{const c=i.properties()[n.value],d=a.value;return typeof c==typeof d&&c>d}],"filter-id->":[ln,[tn],(i,[n])=>{const a=i.id(),c=n.value;return typeof a==typeof c&&a>c}],"filter-<=":[ln,[hn,tn],(i,[n,a])=>{const c=i.properties()[n.value],d=a.value;return typeof c==typeof d&&c<=d}],"filter-id-<=":[ln,[tn],(i,[n])=>{const a=i.id(),c=n.value;return typeof a==typeof c&&a<=c}],"filter->=":[ln,[hn,tn],(i,[n,a])=>{const c=i.properties()[n.value],d=a.value;return typeof c==typeof d&&c>=d}],"filter-id->=":[ln,[tn],(i,[n])=>{const a=i.id(),c=n.value;return typeof a==typeof c&&a>=c}],"filter-has":[ln,[tn],(i,[n])=>n.value in i.properties()],"filter-has-id":[ln,[],i=>i.id()!==null&&i.id()!==void 0],"filter-type-in":[ln,[Fo(hn)],(i,[n])=>n.value.indexOf(i.geometryType())>=0],"filter-id-in":[ln,[Fo(tn)],(i,[n])=>n.value.indexOf(i.id())>=0],"filter-in-small":[ln,[hn,Fo(tn)],(i,[n,a])=>a.value.indexOf(i.properties()[n.value])>=0],"filter-in-large":[ln,[hn,Fo(tn)],(i,[n,a])=>function(c,d,m,y){for(;m<=y;){const b=m+y>>1;if(d[b]===c)return!0;d[b]>c?y=b-1:m=b+1}return!1}(i.properties()[n.value],a.value,0,a.value.length-1)],all:{type:ln,overloads:[[[ln,ln],(i,[n,a])=>n.evaluate(i)&&a.evaluate(i)],[gs(ln),(i,n)=>{for(const a of n)if(!a.evaluate(i))return!1;return!0}]]},any:{type:ln,overloads:[[[ln,ln],(i,[n,a])=>n.evaluate(i)||a.evaluate(i)],[gs(ln),(i,n)=>{for(const a of n)if(a.evaluate(i))return!0;return!1}]]},"!":[ln,[ln],(i,[n])=>!n.evaluate(i)],"is-supported-script":[ln,[hn],(i,[n])=>{const a=i.globals&&i.globals.isSupportedScript;return!a||a(n.evaluate(i))}],upcase:[hn,[hn],(i,[n])=>n.evaluate(i).toUpperCase()],downcase:[hn,[hn],(i,[n])=>n.evaluate(i).toLowerCase()],concat:[hn,gs(tn),(i,n)=>n.map(a=>oi(a.evaluate(i))).join("")],"resolved-locale":[hn,[ku],(i,[n])=>n.evaluate(i).resolvedLocale()],random:[Gt,[Gt,Gt,tn],(i,n)=>{const[a,c,d]=n.map(y=>y.evaluate(i));if(a>c||a===c)return a;let m;if(typeof d=="string")m=function(y){let b=0;if(y.length===0)return b;for(let S=0;S<y.length;S++)b=(b<<5)-b+y.charCodeAt(S),b|=0;return b}(d);else{if(typeof d!="number")throw new Oi(`Invalid seed input: ${d}`);m=d}return a+lm(m)()*(c-a)}]});var Zu=wd;function Sd(i){return{result:"success",value:i}}function tu(i){return{result:"error",value:i}}function Qh(i,n){return!!i&&!!i.parameters&&i.parameters.indexOf(n)>-1}function Vc(i){return i["property-type"]==="data-driven"}function Td(i){return Qh(i.expression,"measure-light")}function WB(i){return Qh(i.expression,"zoom")}function $_(i){return!!i.expression&&i.expression.interpolated}function cm(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)}function ZB(i){return i}function U_(i,n){const a=n.type==="color",c=i.stops&&typeof i.stops[0][0]=="object",d=c||!(c||i.property!==void 0),m=i.type||($_(n)?"exponential":"interval");if(a&&((i=cd({},i)).stops&&(i.stops=i.stops.map(T=>[T[0],mn.parse(T[1])])),i.default=mn.parse(i.default?i.default:n.default)),i.colorSpace&&i.colorSpace!=="rgb"&&!Zh[i.colorSpace])throw new Error(`Unknown color space: ${i.colorSpace}`);let y,b,S;if(m==="exponential")y=qB;else if(m==="interval")y=NS;else if(m==="categorical"){y=zS,b=Object.create(null);for(const T of i.stops)b[T[0]]=T[1];S=typeof i.stops[0][0]}else{if(m!=="identity")throw new Error(`Unknown function type "${m}"`);y=KB}if(c){const T={},D=[];for(let $=0;$<i.stops.length;$++){const G=i.stops[$],q=G[0].zoom;T[q]===void 0&&(T[q]={zoom:q,type:i.type,property:i.property,default:i.default,stops:[]},D.push(q)),T[q].stops.push([G[0].value,G[1]])}const O=[];for(const $ of D)O.push([T[$].zoom,U_(T[$],n)]);const z={name:"linear"};return{kind:"composite",interpolationType:z,interpolationFactor:ea.interpolationFactor.bind(void 0,z),zoomStops:O.map($=>$[0]),evaluate:({zoom:$},G)=>qB({stops:O,base:i.base},n,$).evaluate($,G)}}if(d){const T=m==="exponential"?{name:"exponential",base:i.base!==void 0?i.base:1}:null;return{kind:"camera",interpolationType:T,interpolationFactor:ea.interpolationFactor.bind(void 0,T),zoomStops:i.stops.map(D=>D[0]),evaluate:({zoom:D})=>y(i,n,D,b,S)}}return{kind:"source",evaluate(T,D){const O=D&&D.properties?D.properties[i.property]:void 0;return O===void 0?Ad(i.default,n.default):y(i,n,O,b,S)}}}function Ad(i,n,a){return i!==void 0?i:n!==void 0?n:a!==void 0?a:void 0}function zS(i,n,a,c,d){return Ad(typeof a===d?c[a]:void 0,i.default,n.default)}function NS(i,n,a){if(Dn(a)!=="number")return Ad(i.default,n.default);const c=i.stops.length;if(c===1||a<=i.stops[0][0])return i.stops[0][1];if(a>=i.stops[c-1][0])return i.stops[c-1][1];const d=Io(i.stops.map(m=>m[0]),a);return i.stops[d][1]}function qB(i,n,a){const c=i.base!==void 0?i.base:1;if(Dn(a)!=="number")return Ad(i.default,n.default);const d=i.stops.length;if(d===1||a<=i.stops[0][0])return i.stops[0][1];if(a>=i.stops[d-1][0])return i.stops[d-1][1];const m=Io(i.stops.map(D=>D[0]),a),y=function(D,O,z,$){const G=$-z,q=D-z;return G===0?0:O===1?q/G:(Math.pow(O,q)-1)/(Math.pow(O,G)-1)}(a,c,i.stops[m][0],i.stops[m+1][0]),b=i.stops[m][1],S=i.stops[m+1][1];let T=No[n.type]||ZB;if(i.colorSpace&&i.colorSpace!=="rgb"){const D=Zh[i.colorSpace];T=(O,z)=>D.reverse(D.interpolate(D.forward(O),D.forward(z),y))}return typeof b.evaluate=="function"?{evaluate(...D){const O=b.evaluate.apply(void 0,D),z=S.evaluate.apply(void 0,D);if(O!==void 0&&z!==void 0)return T(O,z,y)}}:T(b,S,y)}function KB(i,n,a){return n.type==="color"?a=mn.parse(a):n.type==="formatted"?a=eo.fromString(a.toString()):n.type==="resolvedImage"?a=cr.fromString(a.toString()):Dn(a)===n.type||n.type==="enum"&&n.values[a]||(a=void 0),Ad(a,i.default,n.default)}class hm{constructor(n,a,c,d){this.expression=n,this._warningHistory={},this._evaluator=new rm(c,d),this._defaultValue=a?function(m){return m.type==="color"&&(cm(m.default)||Array.isArray(m.default))?new mn(0,0,0,0):m.type==="color"?mn.parse(m.default)||null:m.default===void 0?null:m.default}(a):null,this._enumValues=a&&a.type==="enum"?a.values:null}evaluateWithoutErrorHandling(n,a,c,d,m,y,b,S){return this._evaluator.globals=n,this._evaluator.feature=a,this._evaluator.featureState=c,this._evaluator.canonical=d||null,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=y,this._evaluator.featureTileCoord=b||null,this._evaluator.featureDistanceData=S||null,this.expression.evaluate(this._evaluator)}evaluate(n,a,c,d,m,y,b,S){this._evaluator.globals=n,this._evaluator.feature=a||null,this._evaluator.featureState=c||null,this._evaluator.canonical=d||null,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=y||null,this._evaluator.featureTileCoord=b||null,this._evaluator.featureDistanceData=S||null;try{const T=this.expression.evaluate(this._evaluator);if(T==null||typeof T=="number"&&T!=T)return this._defaultValue;if(this._enumValues&&!(T in this._enumValues))throw new Oi(`Expected value to be one of ${Object.keys(this._enumValues).map(D=>JSON.stringify(D)).join(", ")}, but found ${JSON.stringify(T)} instead.`);return T}catch(T){return this._warningHistory[T.message]||(this._warningHistory[T.message]=!0,typeof console<"u"&&console.warn(T.message)),this._defaultValue}}}function Ed(i){return Array.isArray(i)&&i.length>0&&typeof i[0]=="string"&&i[0]in Zu}function fm(i,n,a,c){const d=new Bd(Zu,[],n?function(y){const b={color:Yo,string:hn,number:Gt,enum:hn,boolean:ln,formatted:fl,resolvedImage:dl};return y.type==="array"?Fo(b[y.value]||tn,y.length):b[y.type]}(n):void 0,void 0,void 0,a,c),m=d.parse(i,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return m?Sd(new hm(m,n,a,c)):tu(d.errors)}class V_{constructor(n,a,c){this.kind=n,this._styleExpression=a,this.isLightConstant=c,this.isStateDependent=n!=="constant"&&!Uu(a.expression),this.isConfigDependent=!zc(a.expression)}evaluateWithoutErrorHandling(n,a,c,d,m,y){return this._styleExpression.evaluateWithoutErrorHandling(n,a,c,d,m,y)}evaluate(n,a,c,d,m,y){return this._styleExpression.evaluate(n,a,c,d,m,y)}}class Dd{constructor(n,a,c,d,m){this.kind=n,this.zoomStops=c,this._styleExpression=a,this.isStateDependent=n!=="camera"&&!Uu(a.expression),this.isLightConstant=m,this.isConfigDependent=!zc(a.expression),this.interpolationType=d}evaluateWithoutErrorHandling(n,a,c,d,m,y){return this._styleExpression.evaluateWithoutErrorHandling(n,a,c,d,m,y)}evaluate(n,a,c,d,m,y){return this._styleExpression.evaluate(n,a,c,d,m,y)}interpolationFactor(n,a,c){return this.interpolationType?ea.interpolationFactor(this.interpolationType,n,a,c):0}}function dm(i,n,a,c){if((i=fm(i,n,a,c)).result==="error")return i;const d=i.value.expression,m=Bl(d);if(!m&&!Vc(n))return tu([new Po("","data expressions not supported")]);const y=Gi(d,["zoom","pitch","distance-from-center"]);if(!y&&!WB(n))return tu([new Po("","zoom expressions not supported")]);const b=Gi(d,["measure-light"]);if(!b&&!Td(n))return tu([new Po("","measure-light expression not supported")]);const S=n.expression&&n.expression.relaxZoomRestriction,T=Md(d);return T||y||S?T instanceof Po?tu([T]):T instanceof ea&&!$_(n)?tu([new Po("",'"interpolate" expressions cannot be used with this property')]):Sd(T?new Dd(m?"camera":"composite",i.value,T.labels,T instanceof ea?T.interpolation:void 0,b):new V_(m?"constant":"source",i.value,b)):tu([new Po("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression, or in the properties of atmosphere.')])}class Pd{constructor(n,a){this._parameters=n,this._specification=a,cd(this,U_(this._parameters,this._specification))}static deserialize(n){return new Pd(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function Md(i){let n=null;if(i instanceof Kh)n=Md(i.result);else if(i instanceof qh){for(const a of i.args)if(n=Md(a),n)break}else(i instanceof Nc||i instanceof ea)&&i.input instanceof rn&&i.input.name==="zoom"&&(n=i);return n instanceof Po||i.eachChild(a=>{const c=Md(a);c instanceof Po?n=c:n&&c&&n!==c&&(n=new Po("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}var FS=js,Fs=3;function js(i,n,a){var c=this.cells=[];if(i instanceof ArrayBuffer){this.arrayBuffer=i;var d=new Int32Array(this.arrayBuffer);i=d[0],this.d=(n=d[1])+2*(a=d[2]);for(var m=0;m<this.d*this.d;m++){var y=d[Fs+m],b=d[Fs+m+1];c.push(y===b?null:d.subarray(y,b))}var S=d[Fs+c.length+1];this.keys=d.subarray(d[Fs+c.length],S),this.bboxes=d.subarray(S),this.insert=this._insertReadonly}else{this.d=n+2*a;for(var T=0;T<this.d*this.d;T++)c.push([]);this.keys=[],this.bboxes=[]}this.n=n,this.extent=i,this.padding=a,this.scale=n/i,this.uid=0;var D=a/n*i;this.min=-D,this.max=i+D}js.prototype.insert=function(i,n,a,c,d){this._forEachCell(n,a,c,d,this._insertCell,this.uid++),this.keys.push(i),this.bboxes.push(n),this.bboxes.push(a),this.bboxes.push(c),this.bboxes.push(d)},js.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},js.prototype._insertCell=function(i,n,a,c,d,m){this.cells[d].push(m)},js.prototype.query=function(i,n,a,c,d){var m=this.min,y=this.max;if(i<=m&&n<=m&&y<=a&&y<=c&&!d)return Array.prototype.slice.call(this.keys);var b=[];return this._forEachCell(i,n,a,c,this._queryCell,b,{},d),b},js.prototype._queryCell=function(i,n,a,c,d,m,y,b){var S=this.cells[d];if(S!==null)for(var T=this.keys,D=this.bboxes,O=0;O<S.length;O++){var z=S[O];if(y[z]===void 0){var $=4*z;(b?b(D[$+0],D[$+1],D[$+2],D[$+3]):i<=D[$+2]&&n<=D[$+3]&&a>=D[$+0]&&c>=D[$+1])?(y[z]=!0,m.push(T[z])):y[z]=!1}}},js.prototype._forEachCell=function(i,n,a,c,d,m,y,b){for(var S=this._convertToCellCoord(i),T=this._convertToCellCoord(n),D=this._convertToCellCoord(a),O=this._convertToCellCoord(c),z=S;z<=D;z++)for(var $=T;$<=O;$++){var G=this.d*$+z;if((!b||b(this._convertFromCellCoord(z),this._convertFromCellCoord($),this._convertFromCellCoord(z+1),this._convertFromCellCoord($+1)))&&d.call(this,i,n,a,c,G,m,y,b))return}},js.prototype._convertFromCellCoord=function(i){return(i-this.padding)/this.scale},js.prototype._convertToCellCoord=function(i){return Math.max(0,Math.min(this.d-1,Math.floor(i*this.scale)+this.padding))},js.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var i=this.cells,n=Fs+this.cells.length+1+1,a=0,c=0;c<this.cells.length;c++)a+=this.cells[c].length;var d=new Int32Array(n+a+this.keys.length+this.bboxes.length);d[0]=this.extent,d[1]=this.n,d[2]=this.padding;for(var m=n,y=0;y<i.length;y++){var b=i[y];d[Fs+y]=m,d.set(b,m),m+=b.length}return d[Fs+i.length]=m,d.set(this.keys,m),d[Fs+i.length+1]=m+=this.keys.length,d.set(this.bboxes,m),m+=this.bboxes.length,d.buffer};var ru=K(FS);const Id={};function Kt(i,n,a={}){Object.defineProperty(i,"_classRegistryKey",{value:n,writeable:!1}),Id[n]={klass:i,omit:a.omit||[]}}Kt(Object,"Object"),ru.serialize=function(i,n){const a=i.toArrayBuffer();return n&&n.add(a),{buffer:a}},ru.deserialize=function(i){return new ru(i.buffer)},Object.defineProperty(ru,"name",{value:"Grid"}),Kt(ru,"Grid"),Kt(mn,"Color"),Kt(Error,"Error"),Kt(eo,"Formatted"),Kt(pl,"FormattedSection"),Kt(zi,"AJAXError"),Kt(cr,"ResolvedImage"),Kt(Pd,"StylePropertyFunction"),Kt(hm,"StyleExpression",{omit:["_evaluator"]}),Kt(Dd,"ZoomDependentExpression"),Kt(V_,"ZoomConstantExpression"),Kt(rn,"CompoundExpression",{omit:["_evaluate"]});for(const i in Zu)Id[Zu[i]._classRegistryKey]||Kt(Zu[i],`Expression${i}`);function XB(i){return i&&typeof ArrayBuffer<"u"&&(i instanceof ArrayBuffer||i.constructor&&i.constructor.name==="ArrayBuffer")}function pm(i){return self.ImageBitmap&&i instanceof ImageBitmap}function qu(i,n){if(i==null||typeof i=="boolean"||typeof i=="number"||typeof i=="string"||i instanceof Boolean||i instanceof Number||i instanceof String||i instanceof Date||i instanceof RegExp)return i;if(XB(i)||pm(i))return n&&n.add(i),i;if(ArrayBuffer.isView(i)){const a=i;return n&&n.add(a.buffer),a}if(i instanceof ImageData)return n&&n.add(i.data.buffer),i;if(Array.isArray(i)){const a=[];for(const c of i)a.push(qu(c,n));return a}if(i instanceof Map){const a={$name:"Map"};for(const[c,d]of i.entries())a[c]=qu(d);return a}if(typeof i=="object"){const a=i.constructor,c=a._classRegistryKey;if(!c)throw new Error(`can't serialize object of unregistered class ${c}`);const d=a.serialize?a.serialize(i,n):{};if(!a.serialize){for(const m in i)i.hasOwnProperty(m)&&(Id[c].omit.indexOf(m)>=0||(d[m]=qu(i[m],n)));i instanceof Error&&(d.message=i.message)}if(d.$name)throw new Error("$name property is reserved for worker serialization logic.");return c!=="Object"&&(d.$name=c),d}throw new Error("can't serialize object of type "+typeof i)}function Gc(i){if(i==null||typeof i=="boolean"||typeof i=="number"||typeof i=="string"||i instanceof Boolean||i instanceof Number||i instanceof String||i instanceof Date||i instanceof RegExp||XB(i)||pm(i)||ArrayBuffer.isView(i)||i instanceof ImageData)return i;if(Array.isArray(i))return i.map(Gc);if(typeof i=="object"){const n=i.$name||"Object";if(n==="Map"){const d=new Map;for(const m of Object.keys(i))m!=="$name"&&d.set(m,Gc(i[m]));return d}const{klass:a}=Id[n];if(!a)throw new Error(`can't deserialize unregistered class ${n}`);if(a.deserialize)return a.deserialize(i);const c=Object.create(a.prototype);for(const d of Object.keys(i))d!=="$name"&&(c[d]=Gc(i[d]));return c}throw new Error("can't deserialize object of type "+typeof i)}const nr={"Latin-1 Supplement":i=>i>=128&&i<=255,Arabic:i=>i>=1536&&i<=1791,"Arabic Supplement":i=>i>=1872&&i<=1919,"Arabic Extended-A":i=>i>=2208&&i<=2303,"Hangul Jamo":i=>i>=4352&&i<=4607,"Unified Canadian Aboriginal Syllabics":i=>i>=5120&&i<=5759,Khmer:i=>i>=6016&&i<=6143,"Unified Canadian Aboriginal Syllabics Extended":i=>i>=6320&&i<=6399,"General Punctuation":i=>i>=8192&&i<=8303,"Letterlike Symbols":i=>i>=8448&&i<=8527,"Number Forms":i=>i>=8528&&i<=8591,"Miscellaneous Technical":i=>i>=8960&&i<=9215,"Control Pictures":i=>i>=9216&&i<=9279,"Optical Character Recognition":i=>i>=9280&&i<=9311,"Enclosed Alphanumerics":i=>i>=9312&&i<=9471,"Geometric Shapes":i=>i>=9632&&i<=9727,"Miscellaneous Symbols":i=>i>=9728&&i<=9983,"Miscellaneous Symbols and Arrows":i=>i>=11008&&i<=11263,"CJK Radicals Supplement":i=>i>=11904&&i<=12031,"Kangxi Radicals":i=>i>=12032&&i<=12255,"Ideographic Description Characters":i=>i>=12272&&i<=12287,"CJK Symbols and Punctuation":i=>i>=12288&&i<=12351,Hiragana:i=>i>=12352&&i<=12447,Katakana:i=>i>=12448&&i<=12543,Bopomofo:i=>i>=12544&&i<=12591,"Hangul Compatibility Jamo":i=>i>=12592&&i<=12687,Kanbun:i=>i>=12688&&i<=12703,"Bopomofo Extended":i=>i>=12704&&i<=12735,"CJK Strokes":i=>i>=12736&&i<=12783,"Katakana Phonetic Extensions":i=>i>=12784&&i<=12799,"Enclosed CJK Letters and Months":i=>i>=12800&&i<=13055,"CJK Compatibility":i=>i>=13056&&i<=13311,"CJK Unified Ideographs Extension A":i=>i>=13312&&i<=19903,"Yijing Hexagram Symbols":i=>i>=19904&&i<=19967,"CJK Unified Ideographs":i=>i>=19968&&i<=40959,"Yi Syllables":i=>i>=40960&&i<=42127,"Yi Radicals":i=>i>=42128&&i<=42191,"Hangul Jamo Extended-A":i=>i>=43360&&i<=43391,"Hangul Syllables":i=>i>=44032&&i<=55215,"Hangul Jamo Extended-B":i=>i>=55216&&i<=55295,"Private Use Area":i=>i>=57344&&i<=63743,"CJK Compatibility Ideographs":i=>i>=63744&&i<=64255,"Arabic Presentation Forms-A":i=>i>=64336&&i<=65023,"Vertical Forms":i=>i>=65040&&i<=65055,"CJK Compatibility Forms":i=>i>=65072&&i<=65103,"Small Form Variants":i=>i>=65104&&i<=65135,"Arabic Presentation Forms-B":i=>i>=65136&&i<=65279,"Halfwidth and Fullwidth Forms":i=>i>=65280&&i<=65519,"CJK Unified Ideographs Extension B":i=>i>=131072&&i<=173791};function Ku(i){for(const n of i)if(G_(n.charCodeAt(0)))return!0;return!1}function jS(i){for(const n of i)if(!$S(n.charCodeAt(0)))return!1;return!0}function $S(i){return!(nr.Arabic(i)||nr["Arabic Supplement"](i)||nr["Arabic Extended-A"](i)||nr["Arabic Presentation Forms-A"](i)||nr["Arabic Presentation Forms-B"](i))}function G_(i){return!(i!==746&&i!==747&&(i<4352||!(nr["Bopomofo Extended"](i)||nr.Bopomofo(i)||nr["CJK Compatibility Forms"](i)&&!(i>=65097&&i<=65103)||nr["CJK Compatibility Ideographs"](i)||nr["CJK Compatibility"](i)||nr["CJK Radicals Supplement"](i)||nr["CJK Strokes"](i)||!(!nr["CJK Symbols and Punctuation"](i)||i>=12296&&i<=12305||i>=12308&&i<=12319||i===12336)||nr["CJK Unified Ideographs Extension A"](i)||nr["CJK Unified Ideographs"](i)||nr["Enclosed CJK Letters and Months"](i)||nr["Hangul Compatibility Jamo"](i)||nr["Hangul Jamo Extended-A"](i)||nr["Hangul Jamo Extended-B"](i)||nr["Hangul Jamo"](i)||nr["Hangul Syllables"](i)||nr.Hiragana(i)||nr["Ideographic Description Characters"](i)||nr.Kanbun(i)||nr["Kangxi Radicals"](i)||nr["Katakana Phonetic Extensions"](i)||nr.Katakana(i)&&i!==12540||!(!nr["Halfwidth and Fullwidth Forms"](i)||i===65288||i===65289||i===65293||i>=65306&&i<=65310||i===65339||i===65341||i===65343||i>=65371&&i<=65503||i===65507||i>=65512&&i<=65519)||!(!nr["Small Form Variants"](i)||i>=65112&&i<=65118||i>=65123&&i<=65126)||nr["Unified Canadian Aboriginal Syllabics"](i)||nr["Unified Canadian Aboriginal Syllabics Extended"](i)||nr["Vertical Forms"](i)||nr["Yijing Hexagram Symbols"](i)||nr["Yi Syllables"](i)||nr["Yi Radicals"](i))))}function YB(i){return!(G_(i)||function(n){return!!(nr["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||nr["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||nr["Letterlike Symbols"](n)||nr["Number Forms"](n)||nr["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||nr["Control Pictures"](n)&&n!==9251||nr["Optical Character Recognition"](n)||nr["Enclosed Alphanumerics"](n)||nr["Geometric Shapes"](n)||nr["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||nr["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||nr["CJK Symbols and Punctuation"](n)||nr.Katakana(n)||nr["Private Use Area"](n)||nr["CJK Compatibility Forms"](n)||nr["Small Form Variants"](n)||nr["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(i))}function JB(i){return i>=1424&&i<=2303||nr["Arabic Presentation Forms-A"](i)||nr["Arabic Presentation Forms-B"](i)}function QB(i,n){return!(!n&&JB(i)||i>=2304&&i<=3583||i>=3840&&i<=4255||nr.Khmer(i))}function H_(i){for(const n of i)if(JB(n.charCodeAt(0)))return!0;return!1}const W_="deferred",Z_="loading",q_="loaded";let K_=null,Ia="unavailable",Xu=null;const e1=function(i){i&&typeof i=="string"&&i.indexOf("NetworkError")>-1&&(Ia="error"),K_&&K_(i)};function X_(){Y_.fire(new ul("pluginStateChange",{pluginStatus:Ia,pluginURL:Xu}))}const Y_=new On,Yu=function(){return Ia},J_=function(){if(Ia!==W_||!Xu)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Ia=Z_,X_(),Xu&&at({url:Xu},i=>{i?e1(i):(Ia=q_,X_())})},Ja={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Ia===q_||Ja.applyArabicShaping!=null,isLoading:()=>Ia===Z_,setState(i){Ia=i.pluginStatus,Xu=i.pluginURL},isParsed:()=>Ja.applyArabicShaping!=null&&Ja.processBidirectionalText!=null&&Ja.processStyledBidirectionalText!=null,getPluginURL:()=>Xu};class pi{constructor(n,a){this.zoom=n,a?(this.now=a.now,this.fadeDuration=a.fadeDuration,this.transition=a.transition,this.pitch=a.pitch,this.brightness=a.brightness):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0,this.brightness=0)}isSupportedScript(n){return function(a,c){for(const d of a)if(!QB(d.charCodeAt(0),c))return!1;return!0}(n,Ja.isLoaded())}}class mm{constructor(n,a,c,d){this.property=n,this.value=a,this.expression=function(m,y,b,S){if(cm(m))return new Pd(m,y);if(Ed(m)||Array.isArray(m)&&m.length>0){const T=dm(m,y,b,S);if(T.result==="error")throw new Error(T.value.map(D=>`${D.key}: ${D.message}`).join(", "));return T.value}{let T=m;return typeof m=="string"&&y.type==="color"&&(T=mn.parse(m)),{kind:"constant",isConfigDependent:!1,evaluate:()=>T}}}(a===void 0?n.specification.default:a,n.specification,c,d)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,a,c){return this.property.possiblyEvaluate(this,n,a,c)}}class Q_{constructor(n,a,c){this.property=n,this.value=new mm(n,void 0,a,c)}transitioned(n,a){return new ey(this.property,this.value,a,Wt({},n.transition,this.transition),n.now)}untransitioned(){return new ey(this.property,this.value,null,{},0)}}class nu{constructor(n,a,c){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues),this._scope=a,this._options=c,this.isConfigDependent=!1}getValue(n){return kt(this._values[n].value.value)}setValue(n,a){this._values.hasOwnProperty(n)||(this._values[n]=new Q_(this._values[n].property,this._scope,this._options)),this._values[n].value=new mm(this._values[n].property,a===null?void 0:kt(a),this._scope,this._options),this.isConfigDependent=this.isConfigDependent||this._values[n].value.expression.isConfigDependent}setTransitionOrValue(n,a){a&&(this._options=a);const c=this._properties.properties;if(n)for(const d in n){const m=n[d];if(ur(d,"-transition")){const y=d.slice(0,-11);c[y]&&this.setTransition(y,m)}else c[d]&&this.setValue(d,m)}}getTransition(n){return kt(this._values[n].transition)}setTransition(n,a){this._values.hasOwnProperty(n)||(this._values[n]=new Q_(this._values[n].property)),this._values[n].transition=kt(a)||void 0}serialize(){const n={};for(const a of Object.keys(this._values)){const c=this.getValue(a);c!==void 0&&(n[a]=c);const d=this.getTransition(a);d!==void 0&&(n[`${a}-transition`]=d)}return n}transitioned(n,a){const c=new Hc(this._properties);for(const d of Object.keys(this._values))c._values[d]=this._values[d].transitioned(n,a._values[d]);return c}untransitioned(){const n=new Hc(this._properties);for(const a of Object.keys(this._values))n._values[a]=this._values[a].untransitioned();return n}}class ey{constructor(n,a,c,d,m){const y=d.delay||0,b=d.duration||0;m=m||0,this.property=n,this.value=a,this.begin=m+y,this.end=this.begin+b,n.specification.transition&&(d.delay||d.duration)&&(this.prior=c)}possiblyEvaluate(n,a,c){const d=n.now||0,m=this.value.possiblyEvaluate(n,a,c),y=this.prior;if(y){if(d>this.end)return this.prior=null,m;if(this.value.isDataDriven())return this.prior=null,m;if(d<this.begin)return y.possiblyEvaluate(n,a,c);{const b=(d-this.begin)/(this.end-this.begin);return this.property.interpolate(y.possiblyEvaluate(n,a,c),m,We(b))}}return m}}class Hc{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,a,c){const d=new Od(this._properties);for(const m of Object.keys(this._values))d._values[m]=this._values[m].possiblyEvaluate(n,a,c);return d}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class US{constructor(n,a,c){this._properties=n,this._values=Object.create(n.defaultPropertyValues),this._scope=a,this._options=c,this.isConfigDependent=!1}getValue(n){return kt(this._values[n].value)}setValue(n,a){this._values[n]=new mm(this._values[n].property,a===null?void 0:kt(a),this._scope,this._options),this.isConfigDependent=this.isConfigDependent||this._values[n].expression.isConfigDependent}serialize(){const n={};for(const a of Object.keys(this._values)){const c=this.getValue(a);c!==void 0&&(n[a]=c)}return n}possiblyEvaluate(n,a,c){const d=new Od(this._properties);for(const m of Object.keys(this._values))d._values[m]=this._values[m].possiblyEvaluate(n,a,c);return d}}class ef{constructor(n,a,c){this.property=n,this.value=a,this.parameters=c}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,a,c,d){return this.property.evaluate(this.value,this.parameters,n,a,c,d)}}class Od{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class Ot{constructor(n){this.specification=n}possiblyEvaluate(n,a){return n.expression.evaluate(a)}interpolate(n,a,c){const d=No[this.specification.type];return d?d(n,a,c):n}}class pr{constructor(n,a){this.specification=n,this.overrides=a}possiblyEvaluate(n,a,c,d){return new ef(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(a,null,{},c,d)}:n.expression,a)}interpolate(n,a,c){if(n.value.kind!=="constant"||a.value.kind!=="constant")return n;if(n.value.value===void 0||a.value.value===void 0)return new ef(this,{kind:"constant",value:void 0},n.parameters);const d=No[this.specification.type];return d?new ef(this,{kind:"constant",value:d(n.value.value,a.value.value,c)},n.parameters):n}evaluate(n,a,c,d,m,y){return n.kind==="constant"?n.value:n.evaluate(a,c,d,m,y)}}class Wc{constructor(n){this.specification=n}possiblyEvaluate(n,a,c,d){return!!n.expression.evaluate(a,null,{},c,d)}interpolate(){return!1}}class mi{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const a=new pi(0,{});for(const c in n){const d=n[c];d.specification.overridable&&this.overridableProperties.push(c);const m=this.defaultPropertyValues[c]=new mm(d,void 0),y=this.defaultTransitionablePropertyValues[c]=new Q_(d);this.defaultTransitioningPropertyValues[c]=y.untransitioned(),this.defaultPossiblyEvaluatedValues[c]=m.possiblyEvaluate(a)}}}function kd(i){return i instanceof Number||i instanceof String||i instanceof Boolean?i.valueOf():i}function Ld(i){if(Array.isArray(i))return i.map(Ld);if(i instanceof Object&&!(i instanceof Number||i instanceof String||i instanceof Boolean)){const n={};for(const a in i)n[a]=Ld(i[a]);return n}return kd(i)}Kt(pr,"DataDrivenProperty"),Kt(Ot,"DataConstantProperty"),Kt(Wc,"ColorRampProperty");var Ke=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"fragment":{"type":"boolean"},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360},"pitch":{"type":"number","default":0},"light":{"type":"light"},"lights":{"required":false,"type":"array","value":"light-3d"},"terrain":{"type":"terrain","optional":true},"fog":{"type":"fog"},"camera":{"type":"camera"},"imports":{"type":"array","value":"import"},"schema":{"type":"schema"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string","default":"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"},"models":{"type":"models"}},"model":{"type":"string","required":true},"import":{"id":{"type":"string","required":true},"url":{"type":"string","required":true},"config":{"type":"config"},"data":{"type":"$root"}},"config":{"*":{"type":"*"}},"schema":{"*":{"type":"option"}},"option":{"default":{"type":"*","required":true},"type":{"type":"enum","values":{"string":1,"number":1,"boolean":1,"color":1}},"array":{"type":"boolean"},"minValue":{"type":"number"},"maxValue":{"type":"number"},"stepValue":{"type":"number"},"values":{"type":"array","value":"*"},"metadata":{"type":"*"}},"models":{"*":{"type":"model"}},"light-3d":{"id":{"type":"string","required":true},"properties":{"type":"properties"},"type":{"type":"enum","values":{"ambient":{},"directional":{},"flat":{}}}},"properties":["properties_light_directional","properties_light_ambient","properties_light_flat"],"properties_light_directional":{"direction":{"type":"array","default":[210,30],"minimum":[0,0],"maximum":[360,90],"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"cast-shadows":{"type":"boolean","default":false,"expression":{},"property-type":"data-constant"},"shadow-intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_ambient":{"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_flat":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_raster_array","source_geojson","source_video","source_image","source_model"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":1,"mapbox":1},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_array":{"type":{"required":true,"type":"enum","values":{"raster-array":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"rasterLayers":{"type":"*"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":1}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":1}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":1}},"url":{"required":false,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_model":{"type":{"required":true,"type":"enum","values":{"model":1,"batched-model":1}},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"tiles":{"type":"array","value":"string"}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"raster-particle":{},"hillshade":{},"model":{},"background":{},"sky":{},"slot":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"slot":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_raster-particle","layout_hillshade","layout_background","layout_sky","layout_model"],"layout_background":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_model":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"model-id":{"type":"string","default":"","property-type":"data-driven","expression":{"parameters":["zoom","feature"]}}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":1,"round":1,"square":1},"default":"butt","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":1,"round":1,"miter":1},"default":"miter","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":1,"line":1,"line-center":1},"default":"point","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":1,"viewport-y":1,"source":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-z-elevate":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":1,"width":1,"height":1,"both":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":1,"left":1,"center":1,"right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","default":0,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":1,"vertical":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":1,"uppercase":1,"lowercase":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_raster-particle":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":1,"!=":1,">":1,">=":1,"<":1,"<=":1,"in":1,"!in":1,"all":1,"any":1,"none":1,"has":1,"!has":1}},"geometry_type":{"type":"enum","values":{"Point":1,"LineString":1,"Polygon":1}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":1,"exponential":1,"interval":1,"categorical":1},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":1,"lab":1,"hcl":1},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vertical-range":{"type":"array","default":[0,0],"minimum":0,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}}},"camera":{"camera-projection":{"type":"enum","values":{"perspective":1,"orthographic":1},"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"default":"perspective","property-type":"data-constant"}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":1,"equalEarth":1,"equirectangular":1,"lambertConformalConic":1,"mercator":1,"naturalEarth":1,"winkelTripel":1,"globe":1},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky","paint_model"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-wall-radius":{"property-type":"data-constant","type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-radius":{"property-type":"data-constant","type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-attenuation":{"property-type":"data-constant","type":"number","default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-flood-light-color":{"property-type":"data-constant","type":"color","default":"#ffffff","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-intensity":{"property-type":"data-constant","type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-wall-radius":{"property-type":"data-driven","type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-radius":{"property-type":"data-driven","type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-attenuation":{"property-type":"data-constant","type":"number","default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-vertical-scale":{"property-type":"data-constant","type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-rounded-roof":{"property-type":"data-constant","type":"boolean","default":true,"expression":{"parameters":["zoom"]}},"fill-extrusion-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"fill-extrusion-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"property-type":"constant"},"line-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-border-width":{"type":"number","private":true,"default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-border-color":{"type":"color","private":true,"default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-driven"},"text-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-image-cross-fade":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"transition":true},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-color-saturation":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-value"]},"property-type":"color-ramp"},"raster-color-mix":{"type":"array","default":[0.2126,0.7152,0.0722,0],"length":4,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-color-range":{"type":"array","length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":1,"nearest":1},"default":"linear","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"raster-array-band":{"type":"string","required":false,"property-type":"data-constant"},"raster-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster-particle":{"raster-particle-array-band":{"type":"string","required":false,"property-type":"data-constant"},"raster-particle-count":{"type":"number","default":512,"minimum":1,"property-type":"data-constant"},"raster-particle-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-particle-speed"]},"property-type":"color-ramp"},"raster-particle-max-speed":{"type":"number","default":1,"minimum":1,"property-type":"data-constant"},"raster-particle-speed-factor":{"type":"number","default":0.2,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-particle-fade-opacity-factor":{"type":"number","default":0.98,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-particle-reset-rate-factor":{"type":"number","default":0.8,"minimum":0,"maximum":1,"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":1,"atmosphere":1},"default":"atmosphere","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","default":10,"minimum":0,"maximum":100,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","value":"number","default":[0,0],"length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","default":90,"minimum":0,"maximum":180,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_model":{"model-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"model-rotation":{"type":"array","value":"number","length":3,"default":[0,0,0],"period":360,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-scale":{"type":"array","value":"number","length":3,"default":[1,1,1],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-translation":{"type":"array","value":"number","length":3,"default":[0,0,0],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-color":{"type":"color","default":"#ffffff","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light","zoom"]},"transition":true},"model-color-mix-intensity":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-type":{"type":"enum","values":{"common-3d":1,"location-indicator":1},"default":"common-3d","property-type":"data-constant"},"model-cast-shadows":{"type":"boolean","default":true,"expression":{},"property-type":"data-constant"},"model-receive-shadows":{"type":"boolean","default":true,"expression":{},"property-type":"data-constant"},"model-ambient-occlusion-intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant","transition":true},"model-emissive-strength":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":5,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-roughness":{"type":"number","default":1,"minimum":0,"maximum":1,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state"]},"transition":true},"model-height-based-emissive-strength-multiplier":{"type":"array","default":[1,1,1,1,0],"length":5,"value":"number","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0},"delay":{"type":"number","default":0,"minimum":0}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function ty(i){if(i===!0||i===!1)return!0;if(!Array.isArray(i)||i.length===0)return!1;switch(i[0]){case"has":return i.length>=2&&i[1]!=="$id"&&i[1]!=="$type";case"in":return i.length>=3&&(typeof i[1]!="string"||Array.isArray(i[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return i.length!==3||Array.isArray(i[1])||Array.isArray(i[2]);case"any":case"all":for(const n of i.slice(1))if(!ty(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}function Qa(i,n="fill"){if(i==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};ty(i)||(i=Rd(i));const a=i;let c=!0;try{c=function(T){if(!tf(T))return T;let D=Ld(T);return ry(D),D=t1(D),D}(a)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(a,null,2)}
        `)}const d=Ke[`filter_${n}`],m=fm(c,d);let y=null;if(m.result==="error")throw new Error(m.value.map(T=>`${T.key}: ${T.message}`).join(", "));y=(T,D,O)=>m.value.evaluate(T,D,{},O);let b=null,S=null;if(c!==a){const T=fm(a,d);if(T.result==="error")throw new Error(T.value.map(D=>`${D.key}: ${D.message}`).join(", "));b=(D,O,z,$,G)=>T.value.evaluate(D,O,{},z,void 0,void 0,$,G),S=!Bl(T.value.expression)}return{filter:y,dynamicFilter:b||void 0,needGeometry:r1(c),needFeature:!!S}}function t1(i){if(!Array.isArray(i))return i;const n=function(a){if(VS.has(a[0])){for(let c=1;c<a.length;c++)if(tf(a[c]))return!0}return a}(i);return n===!0?n:n.map(a=>t1(a))}function ry(i){let n=!1;const a=[];if(i[0]==="case"){for(let c=1;c<i.length-1;c+=2)n=n||tf(i[c]),a.push(i[c+1]);a.push(i[i.length-1])}else if(i[0]==="match"){n=n||tf(i[1]);for(let c=2;c<i.length-1;c+=2)a.push(i[c+1]);a.push(i[i.length-1])}else if(i[0]==="step"){n=n||tf(i[1]);for(let c=1;c<i.length-1;c+=2)a.push(i[c+1])}n&&(i.length=0,i.push("any",...a));for(let c=1;c<i.length;c++)ry(i[c])}function tf(i){if(!Array.isArray(i))return!1;if((n=i[0])==="pitch"||n==="distance-from-center")return!0;var n;for(let a=1;a<i.length;a++)if(tf(i[a]))return!0;return!1}const VS=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function GS(i,n){return i<n?-1:i>n?1:0}function r1(i){if(!Array.isArray(i))return!1;if(i[0]==="within"||i[0]==="distance")return!0;for(let n=1;n<i.length;n++)if(r1(i[n]))return!0;return!1}function Rd(i){if(!i)return!0;const n=i[0];return i.length<=1?n!=="any":n==="=="?zd(i[1],i[2],"=="):n==="!="?Nd(zd(i[1],i[2],"==")):n==="<"||n===">"||n==="<="||n===">="?zd(i[1],i[2],n):n==="any"?(a=i.slice(1),["any"].concat(a.map(Rd))):n==="all"?["all"].concat(i.slice(1).map(Rd)):n==="none"?["all"].concat(i.slice(1).map(Rd).map(Nd)):n==="in"?ny(i[1],i.slice(2)):n==="!in"?Nd(ny(i[1],i.slice(2))):n==="has"?n1(i[1]):n!=="!has"||Nd(n1(i[1]));var a}function zd(i,n,a){switch(i){case"$type":return[`filter-type-${a}`,n];case"$id":return[`filter-id-${a}`,n];default:return[`filter-${a}`,i,n]}}function ny(i,n){if(n.length===0)return!1;switch(i){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(a=>typeof a!=typeof n[0])?["filter-in-large",i,["literal",n.sort(GS)]]:["filter-in-small",i,["literal",n]]}}function n1(i){switch(i){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",i]}}function Nd(i){return["!",i]}const gm="";function iy(i,n){return n?`${i}${gm}${n}`:i}const Fd="-transition";class Oa extends On{constructor(n,a,c,d){if(super(),this.id=n.id,this.fqid=iy(this.id,c),this.type=n.type,this.scope=c,this.options=d,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,this.isConfigDependent=!1,n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&n.type!=="sky"&&n.type!=="slot"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),n.slot&&(this.slot=n.slot),a.layout&&(this._unevaluatedLayout=new US(a.layout,this.scope,d),this.isConfigDependent=this.isConfigDependent||this._unevaluatedLayout.isConfigDependent),a.paint)){this._transitionablePaint=new nu(a.paint,this.scope,d);for(const m in n.paint)this.setPaintProperty(m,n.paint[m]);for(const m in n.layout)this.setLayoutProperty(m,n.layout[m]);this.isConfigDependent=this.isConfigDependent||this._transitionablePaint.isConfigDependent,this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Od(a.paint)}}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,a){if(this.type==="custom"&&n==="visibility")return void(this.visibility=a);const c=this._unevaluatedLayout;c._properties.properties[n]&&(c.setValue(n,a),this.isConfigDependent=this.isConfigDependent||c.isConfigDependent,n==="visibility"&&this.possiblyEvaluateVisibility())}possiblyEvaluateVisibility(){this.visibility=this._unevaluatedLayout._values.visibility.possiblyEvaluate({zoom:0})}getPaintProperty(n){return ur(n,Fd)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,a){const c=this._transitionablePaint,d=c._properties.properties;if(ur(n,Fd)){const O=n.slice(0,-11);return d[O]&&c.setTransition(O,a||void 0),!1}if(!d[n])return!1;const m=c._values[n],y=m.value.isDataDriven(),b=m.value;c.setValue(n,a),this.isConfigDependent=this.isConfigDependent||c.isConfigDependent,this._handleSpecialPaintPropertyUpdate(n);const S=c._values[n].value,T=S.isDataDriven(),D=ur(n,"pattern")||n==="line-dasharray";return T||y||D||this._handleOverridablePaintPropertyUpdate(n,b,S)}_handleSpecialPaintPropertyUpdate(n){}getProgramIds(){return null}getDefaultProgramParams(n,a){return null}_handleOverridablePaintPropertyUpdate(n,a,c){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,a){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,a)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,a)}serialize(){return Ur({id:this.id,type:this.type,slot:this.slot,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()},(n,a)=>!(n===void 0||a==="layout"&&!Object.keys(n).length||a==="paint"&&!Object.keys(n).length))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}hasShadowPass(){return!1}canCastShadows(){return!1}hasLightBeamPass(){return!1}cutoffRange(){return 0}tileCoverLift(){return 0}resize(){}isStateDependent(){for(const n in this.paint._values){const a=this.paint.get(n);if(a instanceof ef&&Vc(a.property.specification)&&(a.value.kind==="source"||a.value.kind==="composite")&&a.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=Qa(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}getLayerRenderingStats(){return this._stats}resetLayerRenderingStats(n){this._stats&&(n.renderPass==="shadow"?this._stats.numRenderedVerticesInShadowPass=0:this._stats.numRenderedVerticesInTransparentPass=0)}}const HS={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class _m{constructor(n,a){this._structArray=n,this._pos1=a*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ai{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,a){return n._trim(),a&&(n.isTransferred=!0,a.add(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const a=Object.create(this.prototype);return a.arrayBuffer=n.arrayBuffer,a.length=n.length,a.capacity=n.arrayBuffer.byteLength/a.bytesPerElement,a._refreshViews(),a}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const a=this.uint8;this._refreshViews(),a&&this.uint8.set(a)}}_refreshViews(){throw new Error("StructArray#_refreshViews() must be implemented by each concrete StructArray layout")}emplace(...n){throw new Error("StructArray#emplace() must be implemented by each concrete StructArray layout")}emplaceBack(...n){throw new Error("StructArray#emplaceBack() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Mn(i,n=1){let a=0,c=0;return{members:i.map(d=>{const m=HS[d.type].BYTES_PER_ELEMENT,y=a=jd(a,Math.max(n,m)),b=d.components||1;return c=Math.max(c,m),a+=m*b,{name:d.name,type:d.type,components:b,offset:y}}),size:jd(a,Math.max(c,n)),alignment:n}}function jd(i,n){return Math.ceil(i/n)*n}class $s extends ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a){const c=this.length;return this.resize(c+1),this.emplace(c,n,a)}emplace(n,a,c){const d=2*n;return this.int16[d+0]=a,this.int16[d+1]=c,n}}$s.prototype.bytesPerElement=4,Kt($s,"StructArrayLayout2i4");class _a extends ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,c){const d=this.length;return this.resize(d+1),this.emplace(d,n,a,c)}emplace(n,a,c,d){const m=3*n;return this.int16[m+0]=a,this.int16[m+1]=c,this.int16[m+2]=d,n}}_a.prototype.bytesPerElement=6,Kt(_a,"StructArrayLayout3i6");class iu extends ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,c,d){const m=this.length;return this.resize(m+1),this.emplace(m,n,a,c,d)}emplace(n,a,c,d,m){const y=4*n;return this.int16[y+0]=a,this.int16[y+1]=c,this.int16[y+2]=d,this.int16[y+3]=m,n}}iu.prototype.bytesPerElement=8,Kt(iu,"StructArrayLayout4i8");class oy extends ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,c,d,m){const y=this.length;return this.resize(y+1),this.emplace(y,n,a,c,d,m)}emplace(n,a,c,d,m,y){const b=5*n;return this.int16[b+0]=a,this.int16[b+1]=c,this.int16[b+2]=d,this.int16[b+3]=m,this.int16[b+4]=y,n}}oy.prototype.bytesPerElement=10,Kt(oy,"StructArrayLayout5i10");class ay extends ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,c,d,m,y,b){const S=this.length;return this.resize(S+1),this.emplace(S,n,a,c,d,m,y,b)}emplace(n,a,c,d,m,y,b,S){const T=6*n,D=12*n,O=3*n;return this.int16[T+0]=a,this.int16[T+1]=c,this.uint8[D+4]=d,this.uint8[D+5]=m,this.uint8[D+6]=y,this.uint8[D+7]=b,this.float32[O+2]=S,n}}ay.prototype.bytesPerElement=12,Kt(ay,"StructArrayLayout2i4ub1f12");class Ju extends ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,c,d){const m=this.length;return this.resize(m+1),this.emplace(m,n,a,c,d)}emplace(n,a,c,d,m){const y=4*n;return this.float32[y+0]=a,this.float32[y+1]=c,this.float32[y+2]=d,this.float32[y+3]=m,n}}Ju.prototype.bytesPerElement=16,Kt(Ju,"StructArrayLayout4f16");class Qu extends ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,c,d,m){const y=this.length;return this.resize(y+1),this.emplace(y,n,a,c,d,m)}emplace(n,a,c,d,m,y){const b=6*n,S=3*n;return this.uint16[b+0]=a,this.uint16[b+1]=c,this.uint16[b+2]=d,this.uint16[b+3]=m,this.float32[S+2]=y,n}}Qu.prototype.bytesPerElement=12,Kt(Qu,"StructArrayLayout4ui1f12");class rf extends ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,c,d){const m=this.length;return this.resize(m+1),this.emplace(m,n,a,c,d)}emplace(n,a,c,d,m){const y=4*n;return this.uint16[y+0]=a,this.uint16[y+1]=c,this.uint16[y+2]=d,this.uint16[y+3]=m,n}}rf.prototype.bytesPerElement=8,Kt(rf,"StructArrayLayout4ui8");class ym extends ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,c,d,m,y){const b=this.length;return this.resize(b+1),this.emplace(b,n,a,c,d,m,y)}emplace(n,a,c,d,m,y,b){const S=6*n;return this.int16[S+0]=a,this.int16[S+1]=c,this.int16[S+2]=d,this.int16[S+3]=m,this.int16[S+4]=y,this.int16[S+5]=b,n}}ym.prototype.bytesPerElement=12,Kt(ym,"StructArrayLayout6i12");class $d extends ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,c,d,m,y,b,S,T,D,O,z){const $=this.length;return this.resize($+1),this.emplace($,n,a,c,d,m,y,b,S,T,D,O,z)}emplace(n,a,c,d,m,y,b,S,T,D,O,z,$){const G=12*n;return this.int16[G+0]=a,this.int16[G+1]=c,this.int16[G+2]=d,this.int16[G+3]=m,this.uint16[G+4]=y,this.uint16[G+5]=b,this.uint16[G+6]=S,this.uint16[G+7]=T,this.int16[G+8]=D,this.int16[G+9]=O,this.int16[G+10]=z,this.int16[G+11]=$,n}}$d.prototype.bytesPerElement=24,Kt($d,"StructArrayLayout4i4ui4i24");class sy extends ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,c,d,m,y){const b=this.length;return this.resize(b+1),this.emplace(b,n,a,c,d,m,y)}emplace(n,a,c,d,m,y,b){const S=10*n,T=5*n;return this.int16[S+0]=a,this.int16[S+1]=c,this.int16[S+2]=d,this.float32[T+2]=m,this.float32[T+3]=y,this.float32[T+4]=b,n}}sy.prototype.bytesPerElement=20,Kt(sy,"StructArrayLayout3i3f20");class ly extends ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const a=this.length;return this.resize(a+1),this.emplace(a,n)}emplace(n,a){return this.uint32[1*n+0]=a,n}}ly.prototype.bytesPerElement=4,Kt(ly,"StructArrayLayout1ul4");class Sl extends ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a){const c=this.length;return this.resize(c+1),this.emplace(c,n,a)}emplace(n,a,c){const d=2*n;return this.uint16[d+0]=a,this.uint16[d+1]=c,n}}Sl.prototype.bytesPerElement=4,Kt(Sl,"StructArrayLayout2ui4");class uy extends ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,c,d,m,y,b,S,T,D,O,z,$){const G=this.length;return this.resize(G+1),this.emplace(G,n,a,c,d,m,y,b,S,T,D,O,z,$)}emplace(n,a,c,d,m,y,b,S,T,D,O,z,$,G){const q=20*n,re=10*n;return this.int16[q+0]=a,this.int16[q+1]=c,this.int16[q+2]=d,this.int16[q+3]=m,this.int16[q+4]=y,this.float32[re+3]=b,this.float32[re+4]=S,this.float32[re+5]=T,this.float32[re+6]=D,this.int16[q+14]=O,this.uint32[re+8]=z,this.uint16[q+18]=$,this.uint16[q+19]=G,n}}uy.prototype.bytesPerElement=40,Kt(uy,"StructArrayLayout5i4f1i1ul2ui40");class Ud extends ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,c,d,m,y,b){const S=this.length;return this.resize(S+1),this.emplace(S,n,a,c,d,m,y,b)}emplace(n,a,c,d,m,y,b,S){const T=8*n;return this.int16[T+0]=a,this.int16[T+1]=c,this.int16[T+2]=d,this.int16[T+4]=m,this.int16[T+5]=y,this.int16[T+6]=b,this.int16[T+7]=S,n}}Ud.prototype.bytesPerElement=16,Kt(Ud,"StructArrayLayout3i2i2i16");class vm extends ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,c,d,m){const y=this.length;return this.resize(y+1),this.emplace(y,n,a,c,d,m)}emplace(n,a,c,d,m,y){const b=4*n,S=8*n;return this.float32[b+0]=a,this.float32[b+1]=c,this.float32[b+2]=d,this.int16[S+6]=m,this.int16[S+7]=y,n}}vm.prototype.bytesPerElement=16,Kt(vm,"StructArrayLayout2f1f2i16");class cy extends ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,c,d){const m=this.length;return this.resize(m+1),this.emplace(m,n,a,c,d)}emplace(n,a,c,d,m){const y=12*n,b=3*n;return this.uint8[y+0]=a,this.uint8[y+1]=c,this.float32[b+1]=d,this.float32[b+2]=m,n}}cy.prototype.bytesPerElement=12,Kt(cy,"StructArrayLayout2ub2f12");class po extends ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,c){const d=this.length;return this.resize(d+1),this.emplace(d,n,a,c)}emplace(n,a,c,d){const m=3*n;return this.uint16[m+0]=a,this.uint16[m+1]=c,this.uint16[m+2]=d,n}}po.prototype.bytesPerElement=6,Kt(po,"StructArrayLayout3ui6");class nf extends ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n,a,c,d,m,y,b,S,T,D,O,z,$,G,q,re,ie,fe,_e,ge,Se){const be=this.length;return this.resize(be+1),this.emplace(be,n,a,c,d,m,y,b,S,T,D,O,z,$,G,q,re,ie,fe,_e,ge,Se)}emplace(n,a,c,d,m,y,b,S,T,D,O,z,$,G,q,re,ie,fe,_e,ge,Se,be){const Me=30*n,Ne=15*n,Ge=60*n;return this.int16[Me+0]=a,this.int16[Me+1]=c,this.int16[Me+2]=d,this.float32[Ne+2]=m,this.float32[Ne+3]=y,this.uint16[Me+8]=b,this.uint16[Me+9]=S,this.uint32[Ne+5]=T,this.uint32[Ne+6]=D,this.uint32[Ne+7]=O,this.uint16[Me+16]=z,this.uint16[Me+17]=$,this.uint16[Me+18]=G,this.float32[Ne+10]=q,this.float32[Ne+11]=re,this.uint8[Ge+48]=ie,this.uint8[Ge+49]=fe,this.uint8[Ge+50]=_e,this.uint32[Ne+13]=ge,this.int16[Me+28]=Se,this.uint8[Ge+58]=be,n}}nf.prototype.bytesPerElement=60,Kt(nf,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class Bm extends ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n,a,c,d,m,y,b,S,T,D,O,z,$,G,q,re,ie,fe,_e,ge,Se,be,Me,Ne,Ge,Ye,He,st,yt,nt,mt,tt){const pt=this.length;return this.resize(pt+1),this.emplace(pt,n,a,c,d,m,y,b,S,T,D,O,z,$,G,q,re,ie,fe,_e,ge,Se,be,Me,Ne,Ge,Ye,He,st,yt,nt,mt,tt)}emplace(n,a,c,d,m,y,b,S,T,D,O,z,$,G,q,re,ie,fe,_e,ge,Se,be,Me,Ne,Ge,Ye,He,st,yt,nt,mt,tt,pt){const Lt=20*n,vt=40*n,Jt=80*n;return this.float32[Lt+0]=a,this.float32[Lt+1]=c,this.int16[vt+4]=d,this.int16[vt+5]=m,this.int16[vt+6]=y,this.int16[vt+7]=b,this.int16[vt+8]=S,this.int16[vt+9]=T,this.int16[vt+10]=D,this.int16[vt+11]=O,this.int16[vt+12]=z,this.uint16[vt+13]=$,this.uint16[vt+14]=G,this.uint16[vt+15]=q,this.uint16[vt+16]=re,this.uint16[vt+17]=ie,this.uint16[vt+18]=fe,this.uint16[vt+19]=_e,this.uint16[vt+20]=ge,this.uint16[vt+21]=Se,this.uint16[vt+22]=be,this.uint16[vt+23]=Me,this.uint16[vt+24]=Ne,this.uint16[vt+25]=Ge,this.uint16[vt+26]=Ye,this.uint16[vt+27]=He,this.uint32[Lt+14]=st,this.float32[Lt+15]=yt,this.float32[Lt+16]=nt,this.float32[Lt+17]=mt,this.float32[Lt+18]=tt,this.uint8[Jt+76]=pt,n}}Bm.prototype.bytesPerElement=80,Kt(Bm,"StructArrayLayout2f9i15ui1ul4f1ub80");class Vd extends ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const a=this.length;return this.resize(a+1),this.emplace(a,n)}emplace(n,a){return this.float32[1*n+0]=a,n}}Vd.prototype.bytesPerElement=4,Kt(Vd,"StructArrayLayout1f4");class ec extends ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,c,d,m){const y=this.length;return this.resize(y+1),this.emplace(y,n,a,c,d,m)}emplace(n,a,c,d,m,y){const b=5*n;return this.float32[b+0]=a,this.float32[b+1]=c,this.float32[b+2]=d,this.float32[b+3]=m,this.float32[b+4]=y,n}}ec.prototype.bytesPerElement=20,Kt(ec,"StructArrayLayout5f20");class hy extends ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,c,d,m,y,b){const S=this.length;return this.resize(S+1),this.emplace(S,n,a,c,d,m,y,b)}emplace(n,a,c,d,m,y,b,S){const T=7*n;return this.float32[T+0]=a,this.float32[T+1]=c,this.float32[T+2]=d,this.float32[T+3]=m,this.float32[T+4]=y,this.float32[T+5]=b,this.float32[T+6]=S,n}}hy.prototype.bytesPerElement=28,Kt(hy,"StructArrayLayout7f28");class Gd extends ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,c,d){const m=this.length;return this.resize(m+1),this.emplace(m,n,a,c,d)}emplace(n,a,c,d,m){const y=6*n;return this.uint32[3*n+0]=a,this.uint16[y+2]=c,this.uint16[y+3]=d,this.uint16[y+4]=m,n}}Gd.prototype.bytesPerElement=12,Kt(Gd,"StructArrayLayout1ul3ui12");class fy extends ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const a=this.length;return this.resize(a+1),this.emplace(a,n)}emplace(n,a){return this.uint16[1*n+0]=a,n}}fy.prototype.bytesPerElement=2,Kt(fy,"StructArrayLayout1ui2");class Zc extends ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,c){const d=this.length;return this.resize(d+1),this.emplace(d,n,a,c)}emplace(n,a,c,d){const m=3*n;return this.float32[m+0]=a,this.float32[m+1]=c,this.float32[m+2]=d,n}}Zc.prototype.bytesPerElement=12,Kt(Zc,"StructArrayLayout3f12");class Hd extends ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a){const c=this.length;return this.resize(c+1),this.emplace(c,n,a)}emplace(n,a,c){const d=2*n;return this.float32[d+0]=a,this.float32[d+1]=c,n}}Hd.prototype.bytesPerElement=8,Kt(Hd,"StructArrayLayout2f8");class dy extends ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,c,d,m,y,b,S,T,D,O,z,$,G,q,re){const ie=this.length;return this.resize(ie+1),this.emplace(ie,n,a,c,d,m,y,b,S,T,D,O,z,$,G,q,re)}emplace(n,a,c,d,m,y,b,S,T,D,O,z,$,G,q,re,ie){const fe=16*n;return this.float32[fe+0]=a,this.float32[fe+1]=c,this.float32[fe+2]=d,this.float32[fe+3]=m,this.float32[fe+4]=y,this.float32[fe+5]=b,this.float32[fe+6]=S,this.float32[fe+7]=T,this.float32[fe+8]=D,this.float32[fe+9]=O,this.float32[fe+10]=z,this.float32[fe+11]=$,this.float32[fe+12]=G,this.float32[fe+13]=q,this.float32[fe+14]=re,this.float32[fe+15]=ie,n}}dy.prototype.bytesPerElement=64,Kt(dy,"StructArrayLayout16f64");class Wd extends ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,c,d,m,y,b){const S=this.length;return this.resize(S+1),this.emplace(S,n,a,c,d,m,y,b)}emplace(n,a,c,d,m,y,b,S){const T=10*n,D=5*n;return this.uint16[T+0]=a,this.uint16[T+1]=c,this.uint16[T+2]=d,this.uint16[T+3]=m,this.float32[D+2]=y,this.float32[D+3]=b,this.float32[D+4]=S,n}}Wd.prototype.bytesPerElement=20,Kt(Wd,"StructArrayLayout4ui3f20");class py extends ai{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer)}emplaceBack(n){const a=this.length;return this.resize(a+1),this.emplace(a,n)}emplace(n,a){return this.uint8[1*n+0]=a,n}}py.prototype.bytesPerElement=1,Kt(py,"StructArrayLayout1ub1");class i1 extends _m{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}i1.prototype.size=40;class o1 extends uy{get(n){return new i1(this,n)}}Kt(o1,"CollisionBoxArray");class a1 extends _m{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(n){this._structArray.uint8[this._pos1+49]=n}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(n){this._structArray.uint8[this._pos1+50]=n}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(n){this._structArray.uint32[this._pos4+13]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(n){this._structArray.uint8[this._pos1+58]=n}}a1.prototype.size=60;class s1 extends nf{get(n){return new a1(this,n)}}Kt(s1,"PlacedSymbolArray");class l1 extends _m{get tileAnchorX(){return this._structArray.float32[this._pos4+0]}get tileAnchorY(){return this._structArray.float32[this._pos4+1]}get projectedAnchorX(){return this._structArray.int16[this._pos2+4]}get projectedAnchorY(){return this._structArray.int16[this._pos2+5]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+6]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+7]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+11]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get key(){return this._structArray.uint16[this._pos2+13]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+14]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+15]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+17]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+19]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+21]}get featureIndex(){return this._structArray.uint16[this._pos2+22]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+23]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numIconVertices(){return this._structArray.uint16[this._pos2+25]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+26]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+27]}get crossTileID(){return this._structArray.uint32[this._pos4+14]}set crossTileID(n){this._structArray.uint32[this._pos4+14]=n}get textOffset0(){return this._structArray.float32[this._pos4+15]}get textOffset1(){return this._structArray.float32[this._pos4+16]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+17]}get zOffset(){return this._structArray.float32[this._pos4+18]}set zOffset(n){this._structArray.float32[this._pos4+18]=n}get hasIconTextFit(){return this._structArray.uint8[this._pos1+76]}}l1.prototype.size=80;class u1 extends Bm{get(n){return new l1(this,n)}}Kt(u1,"SymbolInstanceArray");class c1 extends Vd{getoffsetX(n){return this.float32[1*n+0]}}Kt(c1,"GlyphOffsetArray");class Zd extends $s{getx(n){return this.int16[2*n+0]}gety(n){return this.int16[2*n+1]}}Kt(Zd,"SymbolLineVertexArray");class h1 extends _m{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}h1.prototype.size=12;class f1 extends Gd{get(n){return new h1(this,n)}}Kt(f1,"FeatureIndexArray");class qd extends Sl{geta_centroid_pos0(n){return this.uint16[2*n+0]}geta_centroid_pos1(n){return this.uint16[2*n+1]}}Kt(qd,"FillExtrusionCentroidArray");const WS=Mn([{name:"a_pos",components:2,type:"Int16"}],4),d1=Mn([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class Ei{constructor(n=[]){this.segments=n}_prepareSegment(n,a,c,d){let m=this.segments[this.segments.length-1];return n>Ei.MAX_VERTEX_ARRAY_LENGTH&&Er(`Max vertices per segment is ${Ei.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!m||m.vertexLength+n>Ei.MAX_VERTEX_ARRAY_LENGTH||m.sortKey!==d)&&(m={vertexOffset:a,primitiveOffset:c,vertexLength:0,primitiveLength:0},d!==void 0&&(m.sortKey=d),this.segments.push(m)),m}prepareSegment(n,a,c,d){return this._prepareSegment(n,a.length,c.length,d)}get(){return this.segments}destroy(){for(const n of this.segments)for(const a in n.vaos)n.vaos[a].destroy()}static simpleSegment(n,a,c,d){return new Ei([{vertexOffset:n,primitiveOffset:a,vertexLength:c,primitiveLength:d,vaos:{},sortKey:0}])}}function my(i,n){return 256*(i=Le(Math.floor(i),0,255))+Le(Math.floor(n),0,255)}Ei.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Kt(Ei,"SegmentVector");const p1=Mn([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),m1=Mn([{name:"a_dash",components:4,type:"Uint16"}]);var Kd={exports:{}},xm={exports:{}};(function(i){i.exports=function(n,a){var c,d,m,y,b,S,T,D;for(d=n.length-(c=3&n.length),m=a,b=3432918353,S=461845907,D=0;D<d;)T=255&n.charCodeAt(D)|(255&n.charCodeAt(++D))<<8|(255&n.charCodeAt(++D))<<16|(255&n.charCodeAt(++D))<<24,++D,m=27492+(65535&(y=5*(65535&(m=(m^=T=(65535&(T=(T=(65535&T)*b+(((T>>>16)*b&65535)<<16)&4294967295)<<15|T>>>17))*S+(((T>>>16)*S&65535)<<16)&4294967295)<<13|m>>>19))+((5*(m>>>16)&65535)<<16)&4294967295))+((58964+(y>>>16)&65535)<<16);switch(T=0,c){case 3:T^=(255&n.charCodeAt(D+2))<<16;case 2:T^=(255&n.charCodeAt(D+1))<<8;case 1:m^=T=(65535&(T=(T=(65535&(T^=255&n.charCodeAt(D)))*b+(((T>>>16)*b&65535)<<16)&4294967295)<<15|T>>>17))*S+(((T>>>16)*S&65535)<<16)&4294967295}return m^=n.length,m=2246822507*(65535&(m^=m>>>16))+((2246822507*(m>>>16)&65535)<<16)&4294967295,m=3266489909*(65535&(m^=m>>>13))+((3266489909*(m>>>16)&65535)<<16)&4294967295,(m^=m>>>16)>>>0}})(xm);var gy=xm.exports,g1={exports:{}};(function(i){i.exports=function(n,a){for(var c,d=n.length,m=a^d,y=0;d>=4;)c=1540483477*(65535&(c=255&n.charCodeAt(y)|(255&n.charCodeAt(++y))<<8|(255&n.charCodeAt(++y))<<16|(255&n.charCodeAt(++y))<<24))+((1540483477*(c>>>16)&65535)<<16),m=1540483477*(65535&m)+((1540483477*(m>>>16)&65535)<<16)^(c=1540483477*(65535&(c^=c>>>24))+((1540483477*(c>>>16)&65535)<<16)),d-=4,++y;switch(d){case 3:m^=(255&n.charCodeAt(y+2))<<16;case 2:m^=(255&n.charCodeAt(y+1))<<8;case 1:m=1540483477*(65535&(m^=255&n.charCodeAt(y)))+((1540483477*(m>>>16)&65535)<<16)}return m=1540483477*(65535&(m^=m>>>13))+((1540483477*(m>>>16)&65535)<<16),(m^=m>>>15)>>>0}})(g1);var _1=gy,y1=g1.exports;Kd.exports=_1,Kd.exports.murmur3=_1,Kd.exports.murmur2=y1;var _y=K(Kd.exports);class Xd{constructor(){this.ids=[],this.uniqueIds=[],this.positions=[],this.indexed=!1}add(n,a,c,d){this.ids.push(v1(n)),this.positions.push(a,c,d)}eachPosition(n,a){const c=v1(n);let d=0,m=this.ids.length-1;for(;d<m;){const y=d+m>>1;this.ids[y]>=c?m=y:d=y+1}for(;this.ids[d]===c;)a(this.positions[3*d],this.positions[3*d+1],this.positions[3*d+2]),d++}static serialize(n,a){const c=new Float64Array(n.ids),d=new Uint32Array(n.positions);return yy(c,d,0,c.length-1),a&&(a.add(c.buffer),a.add(d.buffer)),{ids:c,positions:d}}static deserialize(n){const a=new Xd;let c;a.ids=n.ids,a.positions=n.positions;for(const d of a.ids)d!==c&&a.uniqueIds.push(d),c=d;return a.indexed=!0,a}}function v1(i){const n=+i;return!isNaN(n)&&Number.MIN_SAFE_INTEGER<=n&&n<=Number.MAX_SAFE_INTEGER?n:_y(String(i))}function yy(i,n,a,c){for(;a<c;){const d=i[a+c>>1];let m=a-1,y=c+1;for(;;){do m++;while(i[m]<d);do y--;while(i[y]>d);if(m>=y)break;bm(i,m,y),bm(n,3*m,3*y),bm(n,3*m+1,3*y+1),bm(n,3*m+2,3*y+2)}y-a<c-y?(yy(i,n,a,y),a=y+1):(yy(i,n,y+1,c),c=y)}}function bm(i,n,a){const c=i[n];i[n]=i[a],i[a]=c}Kt(Xd,"FeaturePositionMap");class ou{constructor(n){this.gl=n.gl,this.initialized=!1}fetchUniformLocation(n,a){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(n,a),this.initialized=!0),!!this.location}}class Cm extends ou{constructor(n){super(n),this.current=0}set(n,a,c){this.fetchUniformLocation(n,a)&&this.current!==c&&(this.current=c,this.gl.uniform1i(this.location,c))}}class ra extends ou{constructor(n){super(n),this.current=0}set(n,a,c){this.fetchUniformLocation(n,a)&&this.current!==c&&(this.current=c,this.gl.uniform1f(this.location,c))}}class tc extends ou{constructor(n){super(n),this.current=[0,0]}set(n,a,c){this.fetchUniformLocation(n,a)&&(c[0]===this.current[0]&&c[1]===this.current[1]||(this.current=c,this.gl.uniform2f(this.location,c[0],c[1])))}}class B1 extends ou{constructor(n){super(n),this.current=[0,0,0]}set(n,a,c){this.fetchUniformLocation(n,a)&&(c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]||(this.current=c,this.gl.uniform3f(this.location,c[0],c[1],c[2])))}}class g extends ou{constructor(n){super(n),this.current=[0,0,0,0]}set(n,a,c){this.fetchUniformLocation(n,a)&&(c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]&&c[3]===this.current[3]||(this.current=c,this.gl.uniform4f(this.location,c[0],c[1],c[2],c[3])))}}class l extends ou{constructor(n){super(n),this.current=mn.transparent}set(n,a,c){this.fetchUniformLocation(n,a)&&(c.r===this.current.r&&c.g===this.current.g&&c.b===this.current.b&&c.a===this.current.a||(this.current=c,this.gl.uniform4f(this.location,c.r,c.g,c.b,c.a)))}}const h=new Float32Array(16);class _ extends ou{constructor(n){super(n),this.current=h}set(n,a,c){if(this.fetchUniformLocation(n,a)){if(c[12]!==this.current[12]||c[0]!==this.current[0])return this.current=c,void this.gl.uniformMatrix4fv(this.location,!1,c);for(let d=1;d<16;d++)if(c[d]!==this.current[d]){this.current=c,this.gl.uniformMatrix4fv(this.location,!1,c);break}}}}const B=new Float32Array(9),C=new Float32Array(4);class E extends ou{constructor(n){super(n),this.current=C}set(n,a,c){if(this.fetchUniformLocation(n,a)){for(let d=0;d<4;d++)if(c[d]!==this.current[d]){this.current=c,this.gl.uniformMatrix2fv(this.location,!1,c);break}}}}function M(i){return[my(255*i.r,255*i.g),my(255*i.b,255*i.a)]}class k{constructor(n,a,c){this.value=n,this.uniformNames=a.map(d=>`u_${d}`),this.type=c}setUniform(n,a,c,d,m){a.set(n,m,d.constantOr(this.value))}getBinding(n,a){return this.type==="color"?new l(n):new ra(n)}}class F{constructor(n,a){this.uniformNames=a.map(c=>`u_${c}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(n){this.pixelRatio=n.pixelRatio||1,this.pattern=n.tl.concat(n.br)}setUniform(n,a,c,d,m){const y=m==="u_pattern"||m==="u_dash"?this.pattern:m==="u_pixel_ratio"?this.pixelRatio:null;y&&a.set(n,m,y)}getBinding(n,a){return a==="u_pattern"||a==="u_dash"?new g(n):new ra(n)}}class j{constructor(n,a,c,d){this.expression=n,this.type=c,this.maxValue=0,this.paintVertexAttributes=a.map(m=>({name:`a_${m}`,type:"Float32",components:c==="color"?2:1,offset:0})),this.paintVertexArray=new d}populatePaintArray(n,a,c,d,m,y,b){const S=this.paintVertexArray.length,T=this.expression.evaluate(new pi(0,{brightness:y}),a,{},m,d,b);this.paintVertexArray.resize(n),this._setPaintValue(S,n,T)}updatePaintArray(n,a,c,d,m,y,b){const S=this.expression.evaluate({zoom:0,brightness:b},c,d,void 0,m);this._setPaintValue(n,a,S)}_setPaintValue(n,a,c){if(this.type==="color"){const d=M(c);for(let m=n;m<a;m++)this.paintVertexArray.emplace(m,d[0],d[1])}else{for(let d=n;d<a;d++)this.paintVertexArray.emplace(d,c);this.maxValue=Math.max(this.maxValue,Math.abs(c))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class V{constructor(n,a,c,d,m,y){this.expression=n,this.uniformNames=a.map(b=>`u_${b}_t`),this.type=c,this.useIntegerZoom=d,this.zoom=m,this.maxValue=0,this.paintVertexAttributes=a.map(b=>({name:`a_${b}`,type:"Float32",components:c==="color"?4:2,offset:0})),this.paintVertexArray=new y}populatePaintArray(n,a,c,d,m,y,b){const S=this.expression.evaluate(new pi(this.zoom,{brightness:y}),a,{},m,d,b),T=this.expression.evaluate(new pi(this.zoom+1,{brightness:y}),a,{},m,d,b),D=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(D,n,S,T)}updatePaintArray(n,a,c,d,m,y,b){const S=this.expression.evaluate({zoom:this.zoom,brightness:b},c,d,void 0,m),T=this.expression.evaluate({zoom:this.zoom+1,brightness:b},c,d,void 0,m);this._setPaintValue(n,a,S,T)}_setPaintValue(n,a,c,d){if(this.type==="color"){const m=M(c),y=M(d);for(let b=n;b<a;b++)this.paintVertexArray.emplace(b,m[0],m[1],y[0],y[1])}else{for(let m=n;m<a;m++)this.paintVertexArray.emplace(m,c,d);this.maxValue=Math.max(this.maxValue,Math.abs(c),Math.abs(d))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,a,c,d,m){const y=this.useIntegerZoom?Math.floor(c.zoom):c.zoom,b=Le(this.expression.interpolationFactor(y,this.zoom,this.zoom+1),0,1);a.set(n,m,b)}getBinding(n,a){return new ra(n)}}class Y{constructor(n,a,c,d,m){this.expression=n,this.layerId=m,this.paintVertexAttributes=(c==="array"?m1:p1).members;for(let y=0;y<a.length;++y);this.paintVertexArray=new d}populatePaintArray(n,a,c){const d=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValues(d,n,a.patterns&&a.patterns[this.layerId],c)}updatePaintArray(n,a,c,d,m,y,b){this._setPaintValues(n,a,c.patterns&&c.patterns[this.layerId],y)}_setPaintValues(n,a,c,d){if(!d||!c)return;const m=d[c];if(!m)return;const{tl:y,br:b,pixelRatio:S}=m;for(let T=n;T<a;T++)this.paintVertexArray.emplace(T,y[0],y[1],b[0],b[1],S)}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class te{constructor(n,a,c=()=>!0){this.binders={},this._buffers=[];const d=[];for(const m in n.paint._values){const y=n.paint.get(m);if(!c(m)||!(y instanceof ef&&Vc(y.property.specification)))continue;const b=ue(m,n.type),S=y.value,T=y.property.specification.type,D=!!y.property.useIntegerZoom,O=m==="line-dasharray"||m.endsWith("pattern"),z=m==="line-dasharray"&&n.layout.get("line-cap").value.kind!=="constant";if(S.kind!=="constant"||z)if(S.kind==="source"||z||O){const $=ye(m,T,"source");this.binders[m]=O?new Y(S,b,T,$,n.id):new j(S,b,T,$),d.push(`/a_${m}`)}else{const $=ye(m,T,"composite");this.binders[m]=new V(S,b,T,D,a,$),d.push(`/z_${m}`)}else this.binders[m]=O?new F(S.value,b):new k(S.value,b,T),d.push(`/u_${m}`)}this.cacheKey=d.sort().join("")}getMaxValue(n){const a=this.binders[n];return a instanceof j||a instanceof V?a.maxValue:0}populatePaintArrays(n,a,c,d,m,y,b){for(const S in this.binders){const T=this.binders[S];(T instanceof j||T instanceof V||T instanceof Y)&&T.populatePaintArray(n,a,c,d,m,y,b)}}setConstantPatternPositions(n){for(const a in this.binders){const c=this.binders[a];c instanceof F&&c.setConstantPatternPositions(n)}}updatePaintArrays(n,a,c,d,m,y,b,S){let T=!1;const D=Object.keys(n),O=D.length!==0,z=O?D:a.uniqueIds;for(const $ in this.binders){const G=this.binders[$];if((G instanceof j||G instanceof V||G instanceof Y)&&(G.expression.isStateDependent===!0||G.expression.isLightConstant===!1)){const q=m.paint.get($);G.expression=q.value;for(const re of z){const ie=n[re.toString()];a.eachPosition(re,(fe,_e,ge)=>{const Se=d.feature(fe);G.updatePaintArray(_e,ge,Se,ie,y,b,S)})}if(!O)for(const re of c.uniqueIds){const ie=n[re.toString()];c.eachPosition(re,(fe,_e,ge)=>{const Se=d.feature(fe);G.updatePaintArray(_e,ge,Se,ie,y,b,S)})}T=!0}}return T}defines(){const n=[];for(const a in this.binders){const c=this.binders[a];(c instanceof k||c instanceof F)&&n.push(...c.uniformNames.map(d=>`#define HAS_UNIFORM_${d}`))}return n}getBinderAttributes(){const n=[];for(const a in this.binders){const c=this.binders[a];if(c instanceof j||c instanceof V||c instanceof Y)for(let d=0;d<c.paintVertexAttributes.length;d++)n.push(c.paintVertexAttributes[d].name)}return n}getBinderUniforms(){const n=[];for(const a in this.binders){const c=this.binders[a];if(c instanceof k||c instanceof F||c instanceof V)for(const d of c.uniformNames)n.push(d)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n){const a=[];for(const c in this.binders){const d=this.binders[c];if(d instanceof k||d instanceof F||d instanceof V)for(const m of d.uniformNames)a.push({name:m,property:c,binding:d.getBinding(n,m)})}return a}setUniforms(n,a,c,d,m){for(const{name:y,property:b,binding:S}of c)this.binders[b].setUniform(n,S,m,d.get(b),y)}updatePaintBuffers(){this._buffers=[];for(const n in this.binders){const a=this.binders[n];(a instanceof j||a instanceof V||a instanceof Y)&&a.paintVertexBuffer&&this._buffers.push(a.paintVertexBuffer)}}upload(n){for(const a in this.binders){const c=this.binders[a];(c instanceof j||c instanceof V||c instanceof Y)&&c.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const a=this.binders[n];(a instanceof j||a instanceof V||a instanceof Y)&&a.destroy()}}}class le{constructor(n,a,c=()=>!0){this.programConfigurations={};for(const d of n)this.programConfigurations[d.id]=new te(d,a,c);this.needsUpload=!1,this._featureMap=new Xd,this._featureMapWithoutIds=new Xd,this._bufferOffset=0,this._idlessCounter=0}populatePaintArrays(n,a,c,d,m,y,b,S){for(const T in this.programConfigurations)this.programConfigurations[T].populatePaintArrays(n,a,d,m,y,b,S);a.id!==void 0?this._featureMap.add(a.id,c,this._bufferOffset,n):(this._featureMapWithoutIds.add(this._idlessCounter,c,this._bufferOffset,n),this._idlessCounter+=1),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,a,c,d,m,y){for(const b of c)this.needsUpload=this.programConfigurations[b.id].updatePaintArrays(n,this._featureMap,this._featureMapWithoutIds,a,b,d,m,y||0)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const a in this.programConfigurations)this.programConfigurations[a].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}const ae={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-emissive-strength":["emissive_strength"],"icon-emissive-strength":["emissive_strength"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function ue(i,n){return ae[i]||[i.replace(`${n}-`,"").replace(/-/g,"_")]}const ne={"line-pattern":{source:Qu,composite:Qu},"fill-pattern":{source:Qu,composite:Qu},"fill-extrusion-pattern":{source:Qu,composite:Qu},"line-dasharray":{source:rf,composite:rf}},he={color:{source:Hd,composite:Ju},number:{source:Vd,composite:Hd}};function ye(i,n,a){const c=ne[i];return c&&c[a]||he[n][a]}Kt(k,"ConstantBinder"),Kt(F,"PatternConstantBinder"),Kt(j,"SourceExpressionBinder"),Kt(Y,"PatternCompositeBinder"),Kt(V,"CompositeExpressionBinder"),Kt(te,"ProgramConfiguration",{omit:["_buffers"]}),Kt(le,"ProgramConfigurationSet");const de=Ut/Math.PI/2,ve=5,ce=6,xe=16383,Ee=64,Pe=[Ee,32,16],Re=-de,Xe=de;function Fe(i,n,a,c=de){return a=Oe(a),[i*Math.sin(a)*c,-n*c,i*Math.cos(a)*c]}function it(i,n,a){return Fe(Math.cos(Oe(i)),Math.sin(Oe(i)),n,a)}const rt=63710088e-1,Bt=2*Math.PI*rt;class Ve{constructor(n,a){if(isNaN(n)||isNaN(a))throw new Error(`Invalid LngLat object: (${n}, ${a})`);if(this.lng=+n,this.lat=+a,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ve(xt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const a=Math.PI/180,c=this.lat*a,d=n.lat*a,m=Math.sin(c)*Math.sin(d)+Math.cos(c)*Math.cos(d)*Math.cos((n.lng-this.lng)*a);return rt*Math.acos(Math.min(m,1))}toBounds(n=0){const a=360*n/40075017,c=a/Math.cos(Math.PI/180*this.lat);return new et({lng:this.lng-c,lat:this.lat-a},{lng:this.lng+c,lat:this.lat+a})}toEcef(n){return it(this.lat,this.lng,de+n*de/rt)}static convert(n){if(n instanceof Ve)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new Ve(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new Ve(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class et{constructor(n,a){n&&(a?this.setSouthWest(n).setNorthEast(a):n.length===4?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1]))}setNorthEast(n){return this._ne=n instanceof Ve?new Ve(n.lng,n.lat):Ve.convert(n),this}setSouthWest(n){return this._sw=n instanceof Ve?new Ve(n.lng,n.lat):Ve.convert(n),this}extend(n){const a=this._sw,c=this._ne;let d,m;if(n instanceof Ve)d=n,m=n;else{if(!(n instanceof et))return Array.isArray(n)?n.length===4||n.every(Array.isArray)?this.extend(et.convert(n)):this.extend(Ve.convert(n)):typeof n=="object"&&n!==null&&n.hasOwnProperty("lat")&&(n.hasOwnProperty("lon")||n.hasOwnProperty("lng"))?this.extend(Ve.convert(n)):this;if(d=n._sw,m=n._ne,!d||!m)return this}return a||c?(a.lng=Math.min(d.lng,a.lng),a.lat=Math.min(d.lat,a.lat),c.lng=Math.max(m.lng,c.lng),c.lat=Math.max(m.lat,c.lat)):(this._sw=new Ve(d.lng,d.lat),this._ne=new Ve(m.lng,m.lat)),this}getCenter(){return new Ve((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Ve(this.getWest(),this.getNorth())}getSouthEast(){return new Ve(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(n){const{lng:a,lat:c}=Ve.convert(n);let d=this._sw.lng<=a&&a<=this._ne.lng;return this._sw.lng>this._ne.lng&&(d=this._sw.lng>=a&&a>=this._ne.lng),this._sw.lat<=c&&c<=this._ne.lat&&d}static convert(n){return!n||n instanceof et?n:new et(n)}}var ke={};(function(i,n){(function(a){function c(m,y,b){var S=d(256*m,256*(y=Math.pow(2,b)-y-1),b),T=d(256*(m+1),256*(y+1),b);return S[0]+","+S[1]+","+T[0]+","+T[1]}function d(m,y,b){var S=2*Math.PI*6378137/256/Math.pow(2,b);return[m*S-2*Math.PI*6378137/2,y*S-2*Math.PI*6378137/2]}a.getURL=function(m,y,b,S,T,D){return D=D||{},m+"?"+["bbox="+c(b,S,T),"format="+(D.format||"image/png"),"service="+(D.service||"WMS"),"version="+(D.version||"1.1.1"),"request="+(D.request||"GetMap"),"srs="+(D.srs||"EPSG:3857"),"width="+(D.width||256),"height="+(D.height||256),"layers="+y].join("&")},a.getTileBBox=c,a.getMercCoords=d,Object.defineProperty(a,"__esModule",{value:!0})})(n)})(0,ke);var Ze=ke;class bt{constructor(n,a,c){this.z=n,this.x=a,this.y=c,this.key=Ft(0,n,n,a,c)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,a){const c=Ze.getTileBBox(this.x,this.y,this.z),d=function(m,y,b){let S,T="";for(let D=m;D>0;D--)S=1<<D-1,T+=(y&S?1:0)+(b&S?2:0);return T}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(a==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",d).replace("{bbox-epsg-3857}",c)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Pt{constructor(n,a){this.wrap=n,this.canonical=a,this.key=Ft(n,a.z,a.z,a.x,a.y)}}class At{constructor(n,a,c,d,m){this.overscaledZ=n,this.wrap=a,this.canonical=new bt(c,+d,+m),this.key=a===0&&n===c?this.canonical.key:Ft(a,n,c,d,m)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){const a=this.canonical.z-n;return n>this.canonical.z?new At(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new At(n,this.wrap,n,this.canonical.x>>a,this.canonical.y>>a)}calculateScaledKey(n,a=!0){if(this.overscaledZ===n&&a)return this.key;if(n>this.canonical.z)return Ft(this.wrap*+a,n,this.canonical.z,this.canonical.x,this.canonical.y);{const c=this.canonical.z-n;return Ft(this.wrap*+a,n,n,this.canonical.x>>c,this.canonical.y>>c)}}isChildOf(n){if(n.wrap!==this.wrap)return!1;const a=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.z<this.canonical.z&&n.canonical.x===this.canonical.x>>a&&n.canonical.y===this.canonical.y>>a}children(n){if(this.overscaledZ>=n)return[new At(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const a=this.canonical.z+1,c=2*this.canonical.x,d=2*this.canonical.y;return[new At(a,this.wrap,a,c,d),new At(a,this.wrap,a,c+1,d),new At(a,this.wrap,a,c,d+1),new At(a,this.wrap,a,c+1,d+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new At(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new At(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Pt(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function Ft(i,n,a,c,d){const m=1<<Math.min(a,22);let y=m*(d%m)+c%m;return i&&a<22&&(y+=m*m*((i<0?-2*i-1:2*i)%(1<<2*(22-a)))),16*(32*y+a)+(n-a)}const tr=[i=>{let n=i.canonical.x-1,a=i.wrap;return n<0&&(n=(1<<i.canonical.z)-1,a--),new At(i.overscaledZ,a,i.canonical.z,n,i.canonical.y)},i=>{let n=i.canonical.x+1,a=i.wrap;return n===1<<i.canonical.z&&(n=0,a++),new At(i.overscaledZ,a,i.canonical.z,n,i.canonical.y)},i=>new At(i.overscaledZ,i.wrap,i.canonical.z,i.canonical.x,(i.canonical.y===0?1<<i.canonical.z:i.canonical.y)-1),i=>new At(i.overscaledZ,i.wrap,i.canonical.z,i.canonical.x,i.canonical.y===(1<<i.canonical.z)-1?0:i.canonical.y+1)];Kt(bt,"CanonicalTileID"),Kt(At,"OverscaledTileID",{omit:["projMatrix","expandedProjMatrix"]});const hr=0,ir=25.5;function sr(i){return Bt*Math.cos(i*Math.PI/180)}function Lr(i){return(180+i)/360}function Cr(i){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i*Math.PI/360)))/360}function Pr(i,n){return i/sr(n)}function Dr(i){return 360*i-180}function un(i){return 360/Math.PI*Math.atan(Math.exp((180-360*i)*Math.PI/180))-90}function qn(i,n){return i*sr(un(n))}const Yr=85.051129;function gi(i){return Math.cos(Oe(Le(i,-Yr,Yr)))}function Jr(i,n){const a=Le(n,hr,ir),c=Math.pow(2,a);return gi(i)*Bt/(512*c)}function gn(i){return 1/Math.cos(i*Math.PI/180)}function Qr(i,n=0){const a=Math.exp(Math.PI*(1-(i.y+n/Ut)/(1<<i.z)*2));return 80150034*a/(a*a+1)/Ut/(1<<i.z)}class fn{constructor(n,a,c=0){this.x=+n,this.y=+a,this.z=+c}static fromLngLat(n,a=0){const c=Ve.convert(n);return new fn(Lr(c.lng),Cr(c.lat),Pr(a,c.lat))}toLngLat(){return new Ve(Dr(this.x),un(this.y))}toAltitude(){return qn(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Bt*gn(un(this.y))}}function Jn(i,n,a,c,d,m,y,b,S){const T=(n+c)/2,D=(a+d)/2,O=new De(T,D);b(O),function(z,$,G,q,re,ie){const fe=G-re,_e=q-ie;return Math.abs((q-$)*fe-(G-z)*_e)/Math.hypot(fe,_e)}(O.x,O.y,m.x,m.y,y.x,y.y)>=S?(Jn(i,n,a,T,D,m,O,b,S),Jn(i,T,D,c,d,O,y,b,S)):i.push(y)}function Cn(i,n,a){let c=i[0],d=c.x,m=c.y;n(c);const y=[c];for(let b=1;b<i.length;b++){const S=i[b],{x:T,y:D}=S;n(S),Jn(y,d,m,T,D,c,S,n,a),d=T,m=D,c=S}return y}function mo(i,n,a,c){if(c(n,a)){const d=n.add(a)._mult(.5);mo(i,n,d,c),mo(i,d,a,c)}else i.push(a)}function Oo(i,n){let a=i[0];const c=[a];for(let d=1;d<i.length;d++){const m=i[d];mo(c,a,m,n),a=m}return c}const ka=Math.pow(2,14)-1,Tl=-ka-1;function La(i,n){const a=Math.round(i.x*n),c=Math.round(i.y*n);return i.x=Le(a,Tl,ka),i.y=Le(c,Tl,ka),(a<i.x||a>i.x+1||c<i.y||c>i.y+1)&&Er("Geometry exceeds allowed extent, reduce your vector tile buffer size"),i}function go(i,n,a){const c=i.loadGeometry(),d=i.extent,m=Ut/d;if(n&&a&&a.projection.isReprojectedInTileSpace){const y=1<<n.z,{scale:b,x:S,y:T,projection:D}=a,O=z=>{const $=Dr((n.x+z.x/d)/y),G=un((n.y+z.y/d)/y),q=D.project($,G);z.x=(q.x*b-S)*d,z.y=(q.y*b-T)*d};for(let z=0;z<c.length;z++)if(i.type!==1)c[z]=Cn(c[z],O,1);else{const $=[];for(const G of c[z])G.x<0||G.x>=d||G.y<0||G.y>=d||(O(G),$.push(G));c[z]=$}}for(const y of c)for(const b of y)La(b,m);return c}function to(i,n){return{type:i.type,id:i.id,properties:i.properties,geometry:n?go(i):[]}}function na(i,n,a,c,d){i.emplaceBack(2*n+(c+1)/2,2*a+(d+1)/2)}function ya(i,n,a){i.emplaceBack(n.x,n.y,n.z,a[0]*16384,a[1]*16384,a[2]*16384)}class Ra{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(a=>a.fqid),this.index=n.index,this.hasPattern=!1,this.projection=n.projection,this.layoutVertexArray=new $s,this.indexArray=new po,this.segments=new Ei,this.programConfigurations=new le(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(n,a,c,d){const m=this.layers[0],y=[];let b=null;m.type==="circle"&&(b=m.layout.get("circle-sort-key"));for(const{feature:T,id:D,index:O,sourceLayerIndex:z}of n){const $=this.layers[0]._featureFilter.needGeometry,G=to(T,$);if(!this.layers[0]._featureFilter.filter(new pi(this.zoom),G,c))continue;const q=b?b.evaluate(G,{},c):void 0,re={id:D,properties:T.properties,type:T.type,sourceLayerIndex:z,index:O,geometry:$?G.geometry:go(T,c,d),patterns:{},sortKey:q};y.push(re)}b&&y.sort((T,D)=>T.sortKey-D.sortKey);let S=null;d.projection.name==="globe"&&(this.globeExtVertexArray=new ym,S=d.projection);for(const T of y){const{geometry:D,index:O,sourceLayerIndex:z}=T,$=n[O].feature;this.addFeature(T,D,O,a.availableImages,c,S,a.brightness),a.featureIndex.insert($,D,O,z,this.index)}}update(n,a,c,d,m){const y=Object.keys(n).length!==0;y&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(n,a,y?this.stateDependentLayers:this.layers,c,d,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,WS.members),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=n.createVertexBuffer(this.globeExtVertexArray,d1.members))),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(n,a,c,d,m,y,b){for(const S of a)for(const T of S){const D=T.x,O=T.y;if(D<0||D>=Ut||O<0||O>=Ut)continue;if(y){const G=y.projectTilePoint(D,O,m),q=y.upVector(m,D,O),re=this.globeExtVertexArray;ya(re,G,q),ya(re,G,q),ya(re,G,q),ya(re,G,q)}const z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),$=z.vertexLength;na(this.layoutVertexArray,D,O,-1,-1),na(this.layoutVertexArray,D,O,1,-1),na(this.layoutVertexArray,D,O,1,1),na(this.layoutVertexArray,D,O,-1,1),this.indexArray.emplaceBack($,$+1,$+2),this.indexArray.emplaceBack($,$+2,$+3),z.vertexLength+=4,z.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,c,{},d,m,b)}}function Al(i,n){for(let a=0;a<i.length;a++)if(au(n,i[a]))return!0;for(let a=0;a<n.length;a++)if(au(i,n[a]))return!0;return!!Jd(i,n)}function rc(i,n,a){return!!au(i,n)||!!Qd(n,i,a)}function qc(i,n){if(i.length===1)return wm(n,i[0]);for(let a=0;a<n.length;a++){const c=n[a];for(let d=0;d<c.length;d++)if(au(i,c[d]))return!0}for(let a=0;a<i.length;a++)if(wm(n,i[a]))return!0;for(let a=0;a<n.length;a++)if(Jd(i,n[a]))return!0;return!1}function Yd(i,n,a){if(i.length>1){if(Jd(i,n))return!0;for(let c=0;c<n.length;c++)if(Qd(n[c],i,a))return!0}for(let c=0;c<i.length;c++)if(Qd(i[c],n,a))return!0;return!1}function Jd(i,n){if(i.length===0||n.length===0)return!1;for(let a=0;a<i.length-1;a++){const c=i[a],d=i[a+1];for(let m=0;m<n.length-1;m++)if(vy(c,d,n[m],n[m+1]))return!0}return!1}function vy(i,n,a,c){return $n(i,a,c)!==$n(n,a,c)&&$n(i,n,a)!==$n(i,n,c)}function Qd(i,n,a){const c=a*a;if(n.length===1)return i.distSqr(n[0])<c;for(let d=1;d<n.length;d++)if(of(i,n[d-1],n[d])<c)return!0;return!1}function of(i,n,a){const c=n.distSqr(a);if(c===0)return i.distSqr(n);const d=((i.x-n.x)*(a.x-n.x)+(i.y-n.y)*(a.y-n.y))/c;return i.distSqr(d<0?n:d>1?a:a.sub(n)._mult(d)._add(n))}function wm(i,n){let a,c,d,m=!1;for(let y=0;y<i.length;y++){a=i[y];for(let b=0,S=a.length-1;b<a.length;S=b++)c=a[b],d=a[S],c.y>n.y!=d.y>n.y&&n.x<(d.x-c.x)*(n.y-c.y)/(d.y-c.y)+c.x&&(m=!m)}return m}function au(i,n){let a=!1;for(let c=0,d=i.length-1;c<i.length;d=c++){const m=i[c],y=i[d];m.y>n.y!=y.y>n.y&&n.x<(y.x-m.x)*(n.y-m.y)/(y.y-m.y)+m.x&&(a=!a)}return a}function qk(i,n,a,c,d){for(const y of i)if(n<=y.x&&a<=y.y&&c>=y.x&&d>=y.y)return!0;const m=[new De(n,a),new De(n,d),new De(c,d),new De(c,a)];if(i.length>2){for(const y of m)if(au(i,y))return!0}for(let y=0;y<i.length-1;y++)if(tK(i[y],i[y+1],m))return!0;return!1}function tK(i,n,a){const c=a[0],d=a[2];if(i.x<c.x&&n.x<c.x||i.x>d.x&&n.x>d.x||i.y<c.y&&n.y<c.y||i.y>d.y&&n.y>d.y)return!1;const m=$n(i,n,a[0]);return m!==$n(i,n,a[1])||m!==$n(i,n,a[2])||m!==$n(i,n,a[3])}function Sm(i,n,a,c,d,m){let y=n.y-i.y,b=i.x-n.x;if(m=m||0){const S=y*y+b*b;if(S===0)return!0;const T=Math.sqrt(S);y/=T,b/=T}return!((a.x-i.x)*y+(a.y-i.y)*b-m<0||(c.x-i.x)*y+(c.y-i.y)*b-m<0||(d.x-i.x)*y+(d.y-i.y)*b-m<0)}function ZS(i,n,a,c,d,m,y){return!(Sm(i,n,c,d,m,y)||Sm(n,a,c,d,m,y)||Sm(a,i,c,d,m,y)||Sm(c,d,i,n,a,y)||Sm(d,m,i,n,a,y)||Sm(m,c,i,n,a,y))}function Tm(i,n,a){const c=n.paint.get(i).value;return c.kind==="constant"?c.value:a.programConfigurations.get(n.id).getMaxValue(i)}function x1(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function Kk(i,n,a,c,d){if(!n[0]&&!n[1])return i;const m=De.convert(n)._mult(d);a==="viewport"&&m._rotate(-c);const y=[];for(let b=0;b<i.length;b++)y.push(i[b].sub(m));return y}function Xk(i,n,a,c){const d=De.convert(i)._mult(c);return n==="viewport"&&d._rotate(-a),d}Kt(Ra,"CircleBucket",{omit:["layers"]});const rK=new mi({"circle-sort-key":new pr(Ke.layout_circle["circle-sort-key"]),visibility:new Ot(Ke.layout_circle.visibility)});var nK={paint:new mi({"circle-radius":new pr(Ke.paint_circle["circle-radius"]),"circle-color":new pr(Ke.paint_circle["circle-color"]),"circle-blur":new pr(Ke.paint_circle["circle-blur"]),"circle-opacity":new pr(Ke.paint_circle["circle-opacity"]),"circle-translate":new Ot(Ke.paint_circle["circle-translate"]),"circle-translate-anchor":new Ot(Ke.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ot(Ke.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ot(Ke.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new pr(Ke.paint_circle["circle-stroke-width"]),"circle-stroke-color":new pr(Ke.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new pr(Ke.paint_circle["circle-stroke-opacity"]),"circle-emissive-strength":new Ot(Ke.paint_circle["circle-emissive-strength"])}),layout:rK},xo={},bo={};Object.defineProperty(bo,"__esModule",{value:!0}),bo.setMatrixArrayType=function(i){bo.ARRAY_TYPE=Jk=i},bo.toRadian=function(i){return i*oK},bo.equals=function(i,n){return Math.abs(i-n)<=Yk*Math.max(1,Math.abs(i),Math.abs(n))},bo.RANDOM=bo.ARRAY_TYPE=bo.EPSILON=void 0;var Yk=1e-6;bo.EPSILON=Yk;var Jk=typeof Float32Array<"u"?Float32Array:Array;bo.ARRAY_TYPE=Jk;var iK=Math.random;bo.RANDOM=iK;var oK=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var i=0,n=arguments.length;n--;)i+=arguments[n]*arguments[n];return Math.sqrt(i)});var _i={};function qS(i){return qS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},qS(i)}Object.defineProperty(_i,"__esModule",{value:!0}),_i.create=function(){var i=new af.ARRAY_TYPE(4);return af.ARRAY_TYPE!=Float32Array&&(i[1]=0,i[2]=0),i[0]=1,i[3]=1,i},_i.clone=function(i){var n=new af.ARRAY_TYPE(4);return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n},_i.copy=function(i,n){return i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],i},_i.identity=function(i){return i[0]=1,i[1]=0,i[2]=0,i[3]=1,i},_i.fromValues=function(i,n,a,c){var d=new af.ARRAY_TYPE(4);return d[0]=i,d[1]=n,d[2]=a,d[3]=c,d},_i.set=function(i,n,a,c,d){return i[0]=n,i[1]=a,i[2]=c,i[3]=d,i},_i.transpose=function(i,n){if(i===n){var a=n[1];i[1]=n[2],i[2]=a}else i[0]=n[0],i[1]=n[2],i[2]=n[1],i[3]=n[3];return i},_i.invert=function(i,n){var a=n[0],c=n[1],d=n[2],m=n[3],y=a*m-d*c;return y?(i[0]=m*(y=1/y),i[1]=-c*y,i[2]=-d*y,i[3]=a*y,i):null},_i.adjoint=function(i,n){var a=n[0];return i[0]=n[3],i[1]=-n[1],i[2]=-n[2],i[3]=a,i},_i.determinant=function(i){return i[0]*i[3]-i[2]*i[1]},_i.multiply=eL,_i.rotate=function(i,n,a){var c=n[0],d=n[1],m=n[2],y=n[3],b=Math.sin(a),S=Math.cos(a);return i[0]=c*S+m*b,i[1]=d*S+y*b,i[2]=c*-b+m*S,i[3]=d*-b+y*S,i},_i.scale=function(i,n,a){var c=n[1],d=n[2],m=n[3],y=a[0],b=a[1];return i[0]=n[0]*y,i[1]=c*y,i[2]=d*b,i[3]=m*b,i},_i.fromRotation=function(i,n){var a=Math.sin(n),c=Math.cos(n);return i[0]=c,i[1]=a,i[2]=-a,i[3]=c,i},_i.fromScaling=function(i,n){return i[0]=n[0],i[1]=0,i[2]=0,i[3]=n[1],i},_i.str=function(i){return"mat2("+i[0]+", "+i[1]+", "+i[2]+", "+i[3]+")"},_i.frob=function(i){return Math.hypot(i[0],i[1],i[2],i[3])},_i.LDU=function(i,n,a,c){return i[2]=c[2]/c[0],a[0]=c[0],a[1]=c[1],a[3]=c[3]-i[2]*a[1],[i,n,a]},_i.add=function(i,n,a){return i[0]=n[0]+a[0],i[1]=n[1]+a[1],i[2]=n[2]+a[2],i[3]=n[3]+a[3],i},_i.subtract=tL,_i.exactEquals=function(i,n){return i[0]===n[0]&&i[1]===n[1]&&i[2]===n[2]&&i[3]===n[3]},_i.equals=function(i,n){var a=i[0],c=i[1],d=i[2],m=i[3],y=n[0],b=n[1],S=n[2],T=n[3];return Math.abs(a-y)<=af.EPSILON*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(c-b)<=af.EPSILON*Math.max(1,Math.abs(c),Math.abs(b))&&Math.abs(d-S)<=af.EPSILON*Math.max(1,Math.abs(d),Math.abs(S))&&Math.abs(m-T)<=af.EPSILON*Math.max(1,Math.abs(m),Math.abs(T))},_i.multiplyScalar=function(i,n,a){return i[0]=n[0]*a,i[1]=n[1]*a,i[2]=n[2]*a,i[3]=n[3]*a,i},_i.multiplyScalarAndAdd=function(i,n,a,c){return i[0]=n[0]+a[0]*c,i[1]=n[1]+a[1]*c,i[2]=n[2]+a[2]*c,i[3]=n[3]+a[3]*c,i},_i.sub=_i.mul=void 0;var af=function(i,n){if(i&&i.__esModule)return i;if(i===null||qS(i)!=="object"&&typeof i!="function")return{default:i};var a=Qk(void 0);if(a&&a.has(i))return a.get(i);var c={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in i)if(m!=="default"&&Object.prototype.hasOwnProperty.call(i,m)){var y=d?Object.getOwnPropertyDescriptor(i,m):null;y&&(y.get||y.set)?Object.defineProperty(c,m,y):c[m]=i[m]}return c.default=i,a&&a.set(i,c),c}(bo);function Qk(i){if(typeof WeakMap!="function")return null;var n=new WeakMap,a=new WeakMap;return(Qk=function(c){return c?a:n})(i)}function eL(i,n,a){var c=n[0],d=n[1],m=n[2],y=n[3],b=a[0],S=a[1],T=a[2],D=a[3];return i[0]=c*b+m*S,i[1]=d*b+y*S,i[2]=c*T+m*D,i[3]=d*T+y*D,i}function tL(i,n,a){return i[0]=n[0]-a[0],i[1]=n[1]-a[1],i[2]=n[2]-a[2],i[3]=n[3]-a[3],i}_i.mul=eL,_i.sub=tL;var Bi={};function KS(i){return KS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},KS(i)}Object.defineProperty(Bi,"__esModule",{value:!0}),Bi.create=function(){var i=new nc.ARRAY_TYPE(6);return nc.ARRAY_TYPE!=Float32Array&&(i[1]=0,i[2]=0,i[4]=0,i[5]=0),i[0]=1,i[3]=1,i},Bi.clone=function(i){var n=new nc.ARRAY_TYPE(6);return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n},Bi.copy=function(i,n){return i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],i[4]=n[4],i[5]=n[5],i},Bi.identity=function(i){return i[0]=1,i[1]=0,i[2]=0,i[3]=1,i[4]=0,i[5]=0,i},Bi.fromValues=function(i,n,a,c,d,m){var y=new nc.ARRAY_TYPE(6);return y[0]=i,y[1]=n,y[2]=a,y[3]=c,y[4]=d,y[5]=m,y},Bi.set=function(i,n,a,c,d,m,y){return i[0]=n,i[1]=a,i[2]=c,i[3]=d,i[4]=m,i[5]=y,i},Bi.invert=function(i,n){var a=n[0],c=n[1],d=n[2],m=n[3],y=n[4],b=n[5],S=a*m-c*d;return S?(i[0]=m*(S=1/S),i[1]=-c*S,i[2]=-d*S,i[3]=a*S,i[4]=(d*b-m*y)*S,i[5]=(c*y-a*b)*S,i):null},Bi.determinant=function(i){return i[0]*i[3]-i[1]*i[2]},Bi.multiply=nL,Bi.rotate=function(i,n,a){var c=n[0],d=n[1],m=n[2],y=n[3],b=n[4],S=n[5],T=Math.sin(a),D=Math.cos(a);return i[0]=c*D+m*T,i[1]=d*D+y*T,i[2]=c*-T+m*D,i[3]=d*-T+y*D,i[4]=b,i[5]=S,i},Bi.scale=function(i,n,a){var c=n[1],d=n[2],m=n[3],y=n[4],b=n[5],S=a[0],T=a[1];return i[0]=n[0]*S,i[1]=c*S,i[2]=d*T,i[3]=m*T,i[4]=y,i[5]=b,i},Bi.translate=function(i,n,a){var c=n[0],d=n[1],m=n[2],y=n[3],b=n[4],S=n[5],T=a[0],D=a[1];return i[0]=c,i[1]=d,i[2]=m,i[3]=y,i[4]=c*T+m*D+b,i[5]=d*T+y*D+S,i},Bi.fromRotation=function(i,n){var a=Math.sin(n),c=Math.cos(n);return i[0]=c,i[1]=a,i[2]=-a,i[3]=c,i[4]=0,i[5]=0,i},Bi.fromScaling=function(i,n){return i[0]=n[0],i[1]=0,i[2]=0,i[3]=n[1],i[4]=0,i[5]=0,i},Bi.fromTranslation=function(i,n){return i[0]=1,i[1]=0,i[2]=0,i[3]=1,i[4]=n[0],i[5]=n[1],i},Bi.str=function(i){return"mat2d("+i[0]+", "+i[1]+", "+i[2]+", "+i[3]+", "+i[4]+", "+i[5]+")"},Bi.frob=function(i){return Math.hypot(i[0],i[1],i[2],i[3],i[4],i[5],1)},Bi.add=function(i,n,a){return i[0]=n[0]+a[0],i[1]=n[1]+a[1],i[2]=n[2]+a[2],i[3]=n[3]+a[3],i[4]=n[4]+a[4],i[5]=n[5]+a[5],i},Bi.subtract=iL,Bi.multiplyScalar=function(i,n,a){return i[0]=n[0]*a,i[1]=n[1]*a,i[2]=n[2]*a,i[3]=n[3]*a,i[4]=n[4]*a,i[5]=n[5]*a,i},Bi.multiplyScalarAndAdd=function(i,n,a,c){return i[0]=n[0]+a[0]*c,i[1]=n[1]+a[1]*c,i[2]=n[2]+a[2]*c,i[3]=n[3]+a[3]*c,i[4]=n[4]+a[4]*c,i[5]=n[5]+a[5]*c,i},Bi.exactEquals=function(i,n){return i[0]===n[0]&&i[1]===n[1]&&i[2]===n[2]&&i[3]===n[3]&&i[4]===n[4]&&i[5]===n[5]},Bi.equals=function(i,n){var a=i[0],c=i[1],d=i[2],m=i[3],y=i[4],b=i[5],S=n[0],T=n[1],D=n[2],O=n[3],z=n[4],$=n[5];return Math.abs(a-S)<=nc.EPSILON*Math.max(1,Math.abs(a),Math.abs(S))&&Math.abs(c-T)<=nc.EPSILON*Math.max(1,Math.abs(c),Math.abs(T))&&Math.abs(d-D)<=nc.EPSILON*Math.max(1,Math.abs(d),Math.abs(D))&&Math.abs(m-O)<=nc.EPSILON*Math.max(1,Math.abs(m),Math.abs(O))&&Math.abs(y-z)<=nc.EPSILON*Math.max(1,Math.abs(y),Math.abs(z))&&Math.abs(b-$)<=nc.EPSILON*Math.max(1,Math.abs(b),Math.abs($))},Bi.sub=Bi.mul=void 0;var nc=function(i,n){if(i&&i.__esModule)return i;if(i===null||KS(i)!=="object"&&typeof i!="function")return{default:i};var a=rL(void 0);if(a&&a.has(i))return a.get(i);var c={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in i)if(m!=="default"&&Object.prototype.hasOwnProperty.call(i,m)){var y=d?Object.getOwnPropertyDescriptor(i,m):null;y&&(y.get||y.set)?Object.defineProperty(c,m,y):c[m]=i[m]}return c.default=i,a&&a.set(i,c),c}(bo);function rL(i){if(typeof WeakMap!="function")return null;var n=new WeakMap,a=new WeakMap;return(rL=function(c){return c?a:n})(i)}function nL(i,n,a){var c=n[0],d=n[1],m=n[2],y=n[3],b=n[4],S=n[5],T=a[0],D=a[1],O=a[2],z=a[3],$=a[4],G=a[5];return i[0]=c*T+m*D,i[1]=d*T+y*D,i[2]=c*O+m*z,i[3]=d*O+y*z,i[4]=c*$+m*G+b,i[5]=d*$+y*G+S,i}function iL(i,n,a){return i[0]=n[0]-a[0],i[1]=n[1]-a[1],i[2]=n[2]-a[2],i[3]=n[3]-a[3],i[4]=n[4]-a[4],i[5]=n[5]-a[5],i}Bi.mul=nL,Bi.sub=iL;var Vn={};function XS(i){return XS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},XS(i)}Object.defineProperty(Vn,"__esModule",{value:!0}),Vn.create=function(){var i=new Us.ARRAY_TYPE(9);return Us.ARRAY_TYPE!=Float32Array&&(i[1]=0,i[2]=0,i[3]=0,i[5]=0,i[6]=0,i[7]=0),i[0]=1,i[4]=1,i[8]=1,i},Vn.fromMat4=function(i,n){return i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[4],i[4]=n[5],i[5]=n[6],i[6]=n[8],i[7]=n[9],i[8]=n[10],i},Vn.clone=function(i){var n=new Us.ARRAY_TYPE(9);return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n},Vn.copy=function(i,n){return i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],i[4]=n[4],i[5]=n[5],i[6]=n[6],i[7]=n[7],i[8]=n[8],i},Vn.fromValues=function(i,n,a,c,d,m,y,b,S){var T=new Us.ARRAY_TYPE(9);return T[0]=i,T[1]=n,T[2]=a,T[3]=c,T[4]=d,T[5]=m,T[6]=y,T[7]=b,T[8]=S,T},Vn.set=function(i,n,a,c,d,m,y,b,S,T){return i[0]=n,i[1]=a,i[2]=c,i[3]=d,i[4]=m,i[5]=y,i[6]=b,i[7]=S,i[8]=T,i},Vn.identity=function(i){return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=1,i[5]=0,i[6]=0,i[7]=0,i[8]=1,i},Vn.transpose=function(i,n){if(i===n){var a=n[1],c=n[2],d=n[5];i[1]=n[3],i[2]=n[6],i[3]=a,i[5]=n[7],i[6]=c,i[7]=d}else i[0]=n[0],i[1]=n[3],i[2]=n[6],i[3]=n[1],i[4]=n[4],i[5]=n[7],i[6]=n[2],i[7]=n[5],i[8]=n[8];return i},Vn.invert=function(i,n){var a=n[0],c=n[1],d=n[2],m=n[3],y=n[4],b=n[5],S=n[6],T=n[7],D=n[8],O=D*y-b*T,z=-D*m+b*S,$=T*m-y*S,G=a*O+c*z+d*$;return G?(i[0]=O*(G=1/G),i[1]=(-D*c+d*T)*G,i[2]=(b*c-d*y)*G,i[3]=z*G,i[4]=(D*a-d*S)*G,i[5]=(-b*a+d*m)*G,i[6]=$*G,i[7]=(-T*a+c*S)*G,i[8]=(y*a-c*m)*G,i):null},Vn.adjoint=function(i,n){var a=n[0],c=n[1],d=n[2],m=n[3],y=n[4],b=n[5],S=n[6],T=n[7],D=n[8];return i[0]=y*D-b*T,i[1]=d*T-c*D,i[2]=c*b-d*y,i[3]=b*S-m*D,i[4]=a*D-d*S,i[5]=d*m-a*b,i[6]=m*T-y*S,i[7]=c*S-a*T,i[8]=a*y-c*m,i},Vn.determinant=function(i){var n=i[3],a=i[4],c=i[5],d=i[6],m=i[7],y=i[8];return i[0]*(y*a-c*m)+i[1]*(-y*n+c*d)+i[2]*(m*n-a*d)},Vn.multiply=aL,Vn.translate=function(i,n,a){var c=n[0],d=n[1],m=n[2],y=n[3],b=n[4],S=n[5],T=n[6],D=n[7],O=n[8],z=a[0],$=a[1];return i[0]=c,i[1]=d,i[2]=m,i[3]=y,i[4]=b,i[5]=S,i[6]=z*c+$*y+T,i[7]=z*d+$*b+D,i[8]=z*m+$*S+O,i},Vn.rotate=function(i,n,a){var c=n[0],d=n[1],m=n[2],y=n[3],b=n[4],S=n[5],T=n[6],D=n[7],O=n[8],z=Math.sin(a),$=Math.cos(a);return i[0]=$*c+z*y,i[1]=$*d+z*b,i[2]=$*m+z*S,i[3]=$*y-z*c,i[4]=$*b-z*d,i[5]=$*S-z*m,i[6]=T,i[7]=D,i[8]=O,i},Vn.scale=function(i,n,a){var c=a[0],d=a[1];return i[0]=c*n[0],i[1]=c*n[1],i[2]=c*n[2],i[3]=d*n[3],i[4]=d*n[4],i[5]=d*n[5],i[6]=n[6],i[7]=n[7],i[8]=n[8],i},Vn.fromTranslation=function(i,n){return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=1,i[5]=0,i[6]=n[0],i[7]=n[1],i[8]=1,i},Vn.fromRotation=function(i,n){var a=Math.sin(n),c=Math.cos(n);return i[0]=c,i[1]=a,i[2]=0,i[3]=-a,i[4]=c,i[5]=0,i[6]=0,i[7]=0,i[8]=1,i},Vn.fromScaling=function(i,n){return i[0]=n[0],i[1]=0,i[2]=0,i[3]=0,i[4]=n[1],i[5]=0,i[6]=0,i[7]=0,i[8]=1,i},Vn.fromMat2d=function(i,n){return i[0]=n[0],i[1]=n[1],i[2]=0,i[3]=n[2],i[4]=n[3],i[5]=0,i[6]=n[4],i[7]=n[5],i[8]=1,i},Vn.fromQuat=function(i,n){var a=n[0],c=n[1],d=n[2],m=n[3],y=a+a,b=c+c,S=d+d,T=a*y,D=c*y,O=c*b,z=d*y,$=d*b,G=d*S,q=m*y,re=m*b,ie=m*S;return i[0]=1-O-G,i[3]=D-ie,i[6]=z+re,i[1]=D+ie,i[4]=1-T-G,i[7]=$-q,i[2]=z-re,i[5]=$+q,i[8]=1-T-O,i},Vn.normalFromMat4=function(i,n){var a=n[0],c=n[1],d=n[2],m=n[3],y=n[4],b=n[5],S=n[6],T=n[7],D=n[8],O=n[9],z=n[10],$=n[11],G=n[12],q=n[13],re=n[14],ie=n[15],fe=a*b-c*y,_e=a*S-d*y,ge=a*T-m*y,Se=c*S-d*b,be=c*T-m*b,Me=d*T-m*S,Ne=D*q-O*G,Ge=D*re-z*G,Ye=D*ie-$*G,He=O*re-z*q,st=O*ie-$*q,yt=z*ie-$*re,nt=fe*yt-_e*st+ge*He+Se*Ye-be*Ge+Me*Ne;return nt?(i[0]=(b*yt-S*st+T*He)*(nt=1/nt),i[1]=(S*Ye-y*yt-T*Ge)*nt,i[2]=(y*st-b*Ye+T*Ne)*nt,i[3]=(d*st-c*yt-m*He)*nt,i[4]=(a*yt-d*Ye+m*Ge)*nt,i[5]=(c*Ye-a*st-m*Ne)*nt,i[6]=(q*Me-re*be+ie*Se)*nt,i[7]=(re*ge-G*Me-ie*_e)*nt,i[8]=(G*be-q*ge+ie*fe)*nt,i):null},Vn.projection=function(i,n,a){return i[0]=2/n,i[1]=0,i[2]=0,i[3]=0,i[4]=-2/a,i[5]=0,i[6]=-1,i[7]=1,i[8]=1,i},Vn.str=function(i){return"mat3("+i[0]+", "+i[1]+", "+i[2]+", "+i[3]+", "+i[4]+", "+i[5]+", "+i[6]+", "+i[7]+", "+i[8]+")"},Vn.frob=function(i){return Math.hypot(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8])},Vn.add=function(i,n,a){return i[0]=n[0]+a[0],i[1]=n[1]+a[1],i[2]=n[2]+a[2],i[3]=n[3]+a[3],i[4]=n[4]+a[4],i[5]=n[5]+a[5],i[6]=n[6]+a[6],i[7]=n[7]+a[7],i[8]=n[8]+a[8],i},Vn.subtract=sL,Vn.multiplyScalar=function(i,n,a){return i[0]=n[0]*a,i[1]=n[1]*a,i[2]=n[2]*a,i[3]=n[3]*a,i[4]=n[4]*a,i[5]=n[5]*a,i[6]=n[6]*a,i[7]=n[7]*a,i[8]=n[8]*a,i},Vn.multiplyScalarAndAdd=function(i,n,a,c){return i[0]=n[0]+a[0]*c,i[1]=n[1]+a[1]*c,i[2]=n[2]+a[2]*c,i[3]=n[3]+a[3]*c,i[4]=n[4]+a[4]*c,i[5]=n[5]+a[5]*c,i[6]=n[6]+a[6]*c,i[7]=n[7]+a[7]*c,i[8]=n[8]+a[8]*c,i},Vn.exactEquals=function(i,n){return i[0]===n[0]&&i[1]===n[1]&&i[2]===n[2]&&i[3]===n[3]&&i[4]===n[4]&&i[5]===n[5]&&i[6]===n[6]&&i[7]===n[7]&&i[8]===n[8]},Vn.equals=function(i,n){var a=i[0],c=i[1],d=i[2],m=i[3],y=i[4],b=i[5],S=i[6],T=i[7],D=i[8],O=n[0],z=n[1],$=n[2],G=n[3],q=n[4],re=n[5],ie=n[6],fe=n[7],_e=n[8];return Math.abs(a-O)<=Us.EPSILON*Math.max(1,Math.abs(a),Math.abs(O))&&Math.abs(c-z)<=Us.EPSILON*Math.max(1,Math.abs(c),Math.abs(z))&&Math.abs(d-$)<=Us.EPSILON*Math.max(1,Math.abs(d),Math.abs($))&&Math.abs(m-G)<=Us.EPSILON*Math.max(1,Math.abs(m),Math.abs(G))&&Math.abs(y-q)<=Us.EPSILON*Math.max(1,Math.abs(y),Math.abs(q))&&Math.abs(b-re)<=Us.EPSILON*Math.max(1,Math.abs(b),Math.abs(re))&&Math.abs(S-ie)<=Us.EPSILON*Math.max(1,Math.abs(S),Math.abs(ie))&&Math.abs(T-fe)<=Us.EPSILON*Math.max(1,Math.abs(T),Math.abs(fe))&&Math.abs(D-_e)<=Us.EPSILON*Math.max(1,Math.abs(D),Math.abs(_e))},Vn.sub=Vn.mul=void 0;var Us=function(i,n){if(i&&i.__esModule)return i;if(i===null||XS(i)!=="object"&&typeof i!="function")return{default:i};var a=oL(void 0);if(a&&a.has(i))return a.get(i);var c={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in i)if(m!=="default"&&Object.prototype.hasOwnProperty.call(i,m)){var y=d?Object.getOwnPropertyDescriptor(i,m):null;y&&(y.get||y.set)?Object.defineProperty(c,m,y):c[m]=i[m]}return c.default=i,a&&a.set(i,c),c}(bo);function oL(i){if(typeof WeakMap!="function")return null;var n=new WeakMap,a=new WeakMap;return(oL=function(c){return c?a:n})(i)}function aL(i,n,a){var c=n[0],d=n[1],m=n[2],y=n[3],b=n[4],S=n[5],T=n[6],D=n[7],O=n[8],z=a[0],$=a[1],G=a[2],q=a[3],re=a[4],ie=a[5],fe=a[6],_e=a[7],ge=a[8];return i[0]=z*c+$*y+G*T,i[1]=z*d+$*b+G*D,i[2]=z*m+$*S+G*O,i[3]=q*c+re*y+ie*T,i[4]=q*d+re*b+ie*D,i[5]=q*m+re*S+ie*O,i[6]=fe*c+_e*y+ge*T,i[7]=fe*d+_e*b+ge*D,i[8]=fe*m+_e*S+ge*O,i}function sL(i,n,a){return i[0]=n[0]-a[0],i[1]=n[1]-a[1],i[2]=n[2]-a[2],i[3]=n[3]-a[3],i[4]=n[4]-a[4],i[5]=n[5]-a[5],i[6]=n[6]-a[6],i[7]=n[7]-a[7],i[8]=n[8]-a[8],i}Vn.mul=aL,Vn.sub=sL;var Fr={};function YS(i){return YS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},YS(i)}Object.defineProperty(Fr,"__esModule",{value:!0}),Fr.create=function(){var i=new ki.ARRAY_TYPE(16);return ki.ARRAY_TYPE!=Float32Array&&(i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0),i[0]=1,i[5]=1,i[10]=1,i[15]=1,i},Fr.clone=function(i){var n=new ki.ARRAY_TYPE(16);return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],n},Fr.copy=function(i,n){return i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],i[4]=n[4],i[5]=n[5],i[6]=n[6],i[7]=n[7],i[8]=n[8],i[9]=n[9],i[10]=n[10],i[11]=n[11],i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15],i},Fr.fromValues=function(i,n,a,c,d,m,y,b,S,T,D,O,z,$,G,q){var re=new ki.ARRAY_TYPE(16);return re[0]=i,re[1]=n,re[2]=a,re[3]=c,re[4]=d,re[5]=m,re[6]=y,re[7]=b,re[8]=S,re[9]=T,re[10]=D,re[11]=O,re[12]=z,re[13]=$,re[14]=G,re[15]=q,re},Fr.set=function(i,n,a,c,d,m,y,b,S,T,D,O,z,$,G,q,re){return i[0]=n,i[1]=a,i[2]=c,i[3]=d,i[4]=m,i[5]=y,i[6]=b,i[7]=S,i[8]=T,i[9]=D,i[10]=O,i[11]=z,i[12]=$,i[13]=G,i[14]=q,i[15]=re,i},Fr.identity=uL,Fr.transpose=function(i,n){if(i===n){var a=n[1],c=n[2],d=n[3],m=n[6],y=n[7],b=n[11];i[1]=n[4],i[2]=n[8],i[3]=n[12],i[4]=a,i[6]=n[9],i[7]=n[13],i[8]=c,i[9]=m,i[11]=n[14],i[12]=d,i[13]=y,i[14]=b}else i[0]=n[0],i[1]=n[4],i[2]=n[8],i[3]=n[12],i[4]=n[1],i[5]=n[5],i[6]=n[9],i[7]=n[13],i[8]=n[2],i[9]=n[6],i[10]=n[10],i[11]=n[14],i[12]=n[3],i[13]=n[7],i[14]=n[11],i[15]=n[15];return i},Fr.invert=function(i,n){var a=n[0],c=n[1],d=n[2],m=n[3],y=n[4],b=n[5],S=n[6],T=n[7],D=n[8],O=n[9],z=n[10],$=n[11],G=n[12],q=n[13],re=n[14],ie=n[15],fe=a*b-c*y,_e=a*S-d*y,ge=a*T-m*y,Se=c*S-d*b,be=c*T-m*b,Me=d*T-m*S,Ne=D*q-O*G,Ge=D*re-z*G,Ye=D*ie-$*G,He=O*re-z*q,st=O*ie-$*q,yt=z*ie-$*re,nt=fe*yt-_e*st+ge*He+Se*Ye-be*Ge+Me*Ne;return nt?(i[0]=(b*yt-S*st+T*He)*(nt=1/nt),i[1]=(d*st-c*yt-m*He)*nt,i[2]=(q*Me-re*be+ie*Se)*nt,i[3]=(z*be-O*Me-$*Se)*nt,i[4]=(S*Ye-y*yt-T*Ge)*nt,i[5]=(a*yt-d*Ye+m*Ge)*nt,i[6]=(re*ge-G*Me-ie*_e)*nt,i[7]=(D*Me-z*ge+$*_e)*nt,i[8]=(y*st-b*Ye+T*Ne)*nt,i[9]=(c*Ye-a*st-m*Ne)*nt,i[10]=(G*be-q*ge+ie*fe)*nt,i[11]=(O*ge-D*be-$*fe)*nt,i[12]=(b*Ge-y*He-S*Ne)*nt,i[13]=(a*He-c*Ge+d*Ne)*nt,i[14]=(q*_e-G*Se-re*fe)*nt,i[15]=(D*Se-O*_e+z*fe)*nt,i):null},Fr.adjoint=function(i,n){var a=n[0],c=n[1],d=n[2],m=n[3],y=n[4],b=n[5],S=n[6],T=n[7],D=n[8],O=n[9],z=n[10],$=n[11],G=n[12],q=n[13],re=n[14],ie=n[15];return i[0]=b*(z*ie-$*re)-O*(S*ie-T*re)+q*(S*$-T*z),i[1]=-(c*(z*ie-$*re)-O*(d*ie-m*re)+q*(d*$-m*z)),i[2]=c*(S*ie-T*re)-b*(d*ie-m*re)+q*(d*T-m*S),i[3]=-(c*(S*$-T*z)-b*(d*$-m*z)+O*(d*T-m*S)),i[4]=-(y*(z*ie-$*re)-D*(S*ie-T*re)+G*(S*$-T*z)),i[5]=a*(z*ie-$*re)-D*(d*ie-m*re)+G*(d*$-m*z),i[6]=-(a*(S*ie-T*re)-y*(d*ie-m*re)+G*(d*T-m*S)),i[7]=a*(S*$-T*z)-y*(d*$-m*z)+D*(d*T-m*S),i[8]=y*(O*ie-$*q)-D*(b*ie-T*q)+G*(b*$-T*O),i[9]=-(a*(O*ie-$*q)-D*(c*ie-m*q)+G*(c*$-m*O)),i[10]=a*(b*ie-T*q)-y*(c*ie-m*q)+G*(c*T-m*b),i[11]=-(a*(b*$-T*O)-y*(c*$-m*O)+D*(c*T-m*b)),i[12]=-(y*(O*re-z*q)-D*(b*re-S*q)+G*(b*z-S*O)),i[13]=a*(O*re-z*q)-D*(c*re-d*q)+G*(c*z-d*O),i[14]=-(a*(b*re-S*q)-y*(c*re-d*q)+G*(c*S-d*b)),i[15]=a*(b*z-S*O)-y*(c*z-d*O)+D*(c*S-d*b),i},Fr.determinant=function(i){var n=i[0],a=i[1],c=i[2],d=i[3],m=i[4],y=i[5],b=i[6],S=i[7],T=i[8],D=i[9],O=i[10],z=i[11],$=i[12],G=i[13],q=i[14],re=i[15];return(n*y-a*m)*(O*re-z*q)-(n*b-c*m)*(D*re-z*G)+(n*S-d*m)*(D*q-O*G)+(a*b-c*y)*(T*re-z*$)-(a*S-d*y)*(T*q-O*$)+(c*S-d*b)*(T*G-D*$)},Fr.multiply=cL,Fr.translate=function(i,n,a){var c,d,m,y,b,S,T,D,O,z,$,G,q=a[0],re=a[1],ie=a[2];return n===i?(i[12]=n[0]*q+n[4]*re+n[8]*ie+n[12],i[13]=n[1]*q+n[5]*re+n[9]*ie+n[13],i[14]=n[2]*q+n[6]*re+n[10]*ie+n[14],i[15]=n[3]*q+n[7]*re+n[11]*ie+n[15]):(d=n[1],m=n[2],y=n[3],b=n[4],S=n[5],T=n[6],D=n[7],O=n[8],z=n[9],$=n[10],G=n[11],i[0]=c=n[0],i[1]=d,i[2]=m,i[3]=y,i[4]=b,i[5]=S,i[6]=T,i[7]=D,i[8]=O,i[9]=z,i[10]=$,i[11]=G,i[12]=c*q+b*re+O*ie+n[12],i[13]=d*q+S*re+z*ie+n[13],i[14]=m*q+T*re+$*ie+n[14],i[15]=y*q+D*re+G*ie+n[15]),i},Fr.scale=function(i,n,a){var c=a[0],d=a[1],m=a[2];return i[0]=n[0]*c,i[1]=n[1]*c,i[2]=n[2]*c,i[3]=n[3]*c,i[4]=n[4]*d,i[5]=n[5]*d,i[6]=n[6]*d,i[7]=n[7]*d,i[8]=n[8]*m,i[9]=n[9]*m,i[10]=n[10]*m,i[11]=n[11]*m,i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15],i},Fr.rotate=function(i,n,a,c){var d,m,y,b,S,T,D,O,z,$,G,q,re,ie,fe,_e,ge,Se,be,Me,Ne,Ge,Ye,He,st=c[0],yt=c[1],nt=c[2],mt=Math.hypot(st,yt,nt);return mt<ki.EPSILON?null:(st*=mt=1/mt,yt*=mt,nt*=mt,d=Math.sin(a),m=Math.cos(a),S=n[1],T=n[2],D=n[3],z=n[5],$=n[6],G=n[7],re=n[9],ie=n[10],fe=n[11],_e=st*st*(y=1-m)+m,be=st*yt*y-nt*d,Me=yt*yt*y+m,Ne=nt*yt*y+st*d,Ge=st*nt*y+yt*d,Ye=yt*nt*y-st*d,He=nt*nt*y+m,i[0]=(b=n[0])*_e+(O=n[4])*(ge=yt*st*y+nt*d)+(q=n[8])*(Se=nt*st*y-yt*d),i[1]=S*_e+z*ge+re*Se,i[2]=T*_e+$*ge+ie*Se,i[3]=D*_e+G*ge+fe*Se,i[4]=b*be+O*Me+q*Ne,i[5]=S*be+z*Me+re*Ne,i[6]=T*be+$*Me+ie*Ne,i[7]=D*be+G*Me+fe*Ne,i[8]=b*Ge+O*Ye+q*He,i[9]=S*Ge+z*Ye+re*He,i[10]=T*Ge+$*Ye+ie*He,i[11]=D*Ge+G*Ye+fe*He,n!==i&&(i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15]),i)},Fr.rotateX=function(i,n,a){var c=Math.sin(a),d=Math.cos(a),m=n[4],y=n[5],b=n[6],S=n[7],T=n[8],D=n[9],O=n[10],z=n[11];return n!==i&&(i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15]),i[4]=m*d+T*c,i[5]=y*d+D*c,i[6]=b*d+O*c,i[7]=S*d+z*c,i[8]=T*d-m*c,i[9]=D*d-y*c,i[10]=O*d-b*c,i[11]=z*d-S*c,i},Fr.rotateY=function(i,n,a){var c=Math.sin(a),d=Math.cos(a),m=n[0],y=n[1],b=n[2],S=n[3],T=n[8],D=n[9],O=n[10],z=n[11];return n!==i&&(i[4]=n[4],i[5]=n[5],i[6]=n[6],i[7]=n[7],i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15]),i[0]=m*d-T*c,i[1]=y*d-D*c,i[2]=b*d-O*c,i[3]=S*d-z*c,i[8]=m*c+T*d,i[9]=y*c+D*d,i[10]=b*c+O*d,i[11]=S*c+z*d,i},Fr.rotateZ=function(i,n,a){var c=Math.sin(a),d=Math.cos(a),m=n[0],y=n[1],b=n[2],S=n[3],T=n[4],D=n[5],O=n[6],z=n[7];return n!==i&&(i[8]=n[8],i[9]=n[9],i[10]=n[10],i[11]=n[11],i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15]),i[0]=m*d+T*c,i[1]=y*d+D*c,i[2]=b*d+O*c,i[3]=S*d+z*c,i[4]=T*d-m*c,i[5]=D*d-y*c,i[6]=O*d-b*c,i[7]=z*d-S*c,i},Fr.fromTranslation=function(i,n){return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=n[0],i[13]=n[1],i[14]=n[2],i[15]=1,i},Fr.fromScaling=function(i,n){return i[0]=n[0],i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=n[1],i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=n[2],i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i},Fr.fromRotation=function(i,n,a){var c,d,m,y=a[0],b=a[1],S=a[2],T=Math.hypot(y,b,S);return T<ki.EPSILON?null:(y*=T=1/T,b*=T,S*=T,c=Math.sin(n),d=Math.cos(n),i[0]=y*y*(m=1-d)+d,i[1]=b*y*m+S*c,i[2]=S*y*m-b*c,i[3]=0,i[4]=y*b*m-S*c,i[5]=b*b*m+d,i[6]=S*b*m+y*c,i[7]=0,i[8]=y*S*m+b*c,i[9]=b*S*m-y*c,i[10]=S*S*m+d,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i)},Fr.fromXRotation=function(i,n){var a=Math.sin(n),c=Math.cos(n);return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=c,i[6]=a,i[7]=0,i[8]=0,i[9]=-a,i[10]=c,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i},Fr.fromYRotation=function(i,n){var a=Math.sin(n),c=Math.cos(n);return i[0]=c,i[1]=0,i[2]=-a,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=a,i[9]=0,i[10]=c,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i},Fr.fromZRotation=function(i,n){var a=Math.sin(n),c=Math.cos(n);return i[0]=c,i[1]=a,i[2]=0,i[3]=0,i[4]=-a,i[5]=c,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i},Fr.fromRotationTranslation=hL,Fr.fromQuat2=function(i,n){var a=new ki.ARRAY_TYPE(3),c=-n[0],d=-n[1],m=-n[2],y=n[3],b=n[4],S=n[5],T=n[6],D=n[7],O=c*c+d*d+m*m+y*y;return O>0?(a[0]=2*(b*y+D*c+S*m-T*d)/O,a[1]=2*(S*y+D*d+T*c-b*m)/O,a[2]=2*(T*y+D*m+b*d-S*c)/O):(a[0]=2*(b*y+D*c+S*m-T*d),a[1]=2*(S*y+D*d+T*c-b*m),a[2]=2*(T*y+D*m+b*d-S*c)),hL(i,n,a),i},Fr.getTranslation=function(i,n){return i[0]=n[12],i[1]=n[13],i[2]=n[14],i},Fr.getScaling=fL,Fr.getRotation=function(i,n){var a=new ki.ARRAY_TYPE(3);fL(a,n);var c=1/a[0],d=1/a[1],m=1/a[2],y=n[0]*c,b=n[1]*d,S=n[2]*m,T=n[4]*c,D=n[5]*d,O=n[6]*m,z=n[8]*c,$=n[9]*d,G=n[10]*m,q=y+D+G,re=0;return q>0?(re=2*Math.sqrt(q+1),i[3]=.25*re,i[0]=(O-$)/re,i[1]=(z-S)/re,i[2]=(b-T)/re):y>D&&y>G?(re=2*Math.sqrt(1+y-D-G),i[3]=(O-$)/re,i[0]=.25*re,i[1]=(b+T)/re,i[2]=(z+S)/re):D>G?(re=2*Math.sqrt(1+D-y-G),i[3]=(z-S)/re,i[0]=(b+T)/re,i[1]=.25*re,i[2]=(O+$)/re):(re=2*Math.sqrt(1+G-y-D),i[3]=(b-T)/re,i[0]=(z+S)/re,i[1]=(O+$)/re,i[2]=.25*re),i},Fr.fromRotationTranslationScale=function(i,n,a,c){var d=n[0],m=n[1],y=n[2],b=n[3],S=d+d,T=m+m,D=y+y,O=d*S,z=d*T,$=d*D,G=m*T,q=m*D,re=y*D,ie=b*S,fe=b*T,_e=b*D,ge=c[0],Se=c[1],be=c[2];return i[0]=(1-(G+re))*ge,i[1]=(z+_e)*ge,i[2]=($-fe)*ge,i[3]=0,i[4]=(z-_e)*Se,i[5]=(1-(O+re))*Se,i[6]=(q+ie)*Se,i[7]=0,i[8]=($+fe)*be,i[9]=(q-ie)*be,i[10]=(1-(O+G))*be,i[11]=0,i[12]=a[0],i[13]=a[1],i[14]=a[2],i[15]=1,i},Fr.fromRotationTranslationScaleOrigin=function(i,n,a,c,d){var m=n[0],y=n[1],b=n[2],S=n[3],T=m+m,D=y+y,O=b+b,z=m*T,$=m*D,G=m*O,q=y*D,re=y*O,ie=b*O,fe=S*T,_e=S*D,ge=S*O,Se=c[0],be=c[1],Me=c[2],Ne=d[0],Ge=d[1],Ye=d[2],He=(1-(q+ie))*Se,st=($+ge)*Se,yt=(G-_e)*Se,nt=($-ge)*be,mt=(1-(z+ie))*be,tt=(re+fe)*be,pt=(G+_e)*Me,Lt=(re-fe)*Me,vt=(1-(z+q))*Me;return i[0]=He,i[1]=st,i[2]=yt,i[3]=0,i[4]=nt,i[5]=mt,i[6]=tt,i[7]=0,i[8]=pt,i[9]=Lt,i[10]=vt,i[11]=0,i[12]=a[0]+Ne-(He*Ne+nt*Ge+pt*Ye),i[13]=a[1]+Ge-(st*Ne+mt*Ge+Lt*Ye),i[14]=a[2]+Ye-(yt*Ne+tt*Ge+vt*Ye),i[15]=1,i},Fr.fromQuat=function(i,n){var a=n[0],c=n[1],d=n[2],m=n[3],y=a+a,b=c+c,S=d+d,T=a*y,D=c*y,O=c*b,z=d*y,$=d*b,G=d*S,q=m*y,re=m*b,ie=m*S;return i[0]=1-O-G,i[1]=D+ie,i[2]=z-re,i[3]=0,i[4]=D-ie,i[5]=1-T-G,i[6]=$+q,i[7]=0,i[8]=z+re,i[9]=$-q,i[10]=1-T-O,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i},Fr.frustum=function(i,n,a,c,d,m,y){var b=1/(a-n),S=1/(d-c),T=1/(m-y);return i[0]=2*m*b,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=2*m*S,i[6]=0,i[7]=0,i[8]=(a+n)*b,i[9]=(d+c)*S,i[10]=(y+m)*T,i[11]=-1,i[12]=0,i[13]=0,i[14]=y*m*2*T,i[15]=0,i},Fr.perspectiveNO=dL,Fr.perspectiveZO=function(i,n,a,c,d){var m,y=1/Math.tan(n/2);return i[0]=y/a,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=y,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=-1,i[12]=0,i[13]=0,i[15]=0,d!=null&&d!==1/0?(i[10]=d*(m=1/(c-d)),i[14]=d*c*m):(i[10]=-1,i[14]=-c),i},Fr.perspectiveFromFieldOfView=function(i,n,a,c){var d=Math.tan(n.upDegrees*Math.PI/180),m=Math.tan(n.downDegrees*Math.PI/180),y=Math.tan(n.leftDegrees*Math.PI/180),b=Math.tan(n.rightDegrees*Math.PI/180),S=2/(y+b),T=2/(d+m);return i[0]=S,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=T,i[6]=0,i[7]=0,i[8]=-(y-b)*S*.5,i[9]=(d-m)*T*.5,i[10]=c/(a-c),i[11]=-1,i[12]=0,i[13]=0,i[14]=c*a/(a-c),i[15]=0,i},Fr.orthoNO=pL,Fr.orthoZO=function(i,n,a,c,d,m,y){var b=1/(n-a),S=1/(c-d),T=1/(m-y);return i[0]=-2*b,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=-2*S,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=T,i[11]=0,i[12]=(n+a)*b,i[13]=(d+c)*S,i[14]=m*T,i[15]=1,i},Fr.lookAt=function(i,n,a,c){var d,m,y,b,S,T,D,O,z,$,G=n[0],q=n[1],re=n[2],ie=c[0],fe=c[1],_e=c[2],ge=a[0],Se=a[1],be=a[2];return Math.abs(G-ge)<ki.EPSILON&&Math.abs(q-Se)<ki.EPSILON&&Math.abs(re-be)<ki.EPSILON?uL(i):(D=G-ge,O=q-Se,z=re-be,d=fe*(z*=$=1/Math.hypot(D,O,z))-_e*(O*=$),m=_e*(D*=$)-ie*z,y=ie*O-fe*D,($=Math.hypot(d,m,y))?(d*=$=1/$,m*=$,y*=$):(d=0,m=0,y=0),b=O*y-z*m,S=z*d-D*y,T=D*m-O*d,($=Math.hypot(b,S,T))?(b*=$=1/$,S*=$,T*=$):(b=0,S=0,T=0),i[0]=d,i[1]=b,i[2]=D,i[3]=0,i[4]=m,i[5]=S,i[6]=O,i[7]=0,i[8]=y,i[9]=T,i[10]=z,i[11]=0,i[12]=-(d*G+m*q+y*re),i[13]=-(b*G+S*q+T*re),i[14]=-(D*G+O*q+z*re),i[15]=1,i)},Fr.targetTo=function(i,n,a,c){var d=n[0],m=n[1],y=n[2],b=c[0],S=c[1],T=c[2],D=d-a[0],O=m-a[1],z=y-a[2],$=D*D+O*O+z*z;$>0&&(D*=$=1/Math.sqrt($),O*=$,z*=$);var G=S*z-T*O,q=T*D-b*z,re=b*O-S*D;return($=G*G+q*q+re*re)>0&&(G*=$=1/Math.sqrt($),q*=$,re*=$),i[0]=G,i[1]=q,i[2]=re,i[3]=0,i[4]=O*re-z*q,i[5]=z*G-D*re,i[6]=D*q-O*G,i[7]=0,i[8]=D,i[9]=O,i[10]=z,i[11]=0,i[12]=d,i[13]=m,i[14]=y,i[15]=1,i},Fr.str=function(i){return"mat4("+i[0]+", "+i[1]+", "+i[2]+", "+i[3]+", "+i[4]+", "+i[5]+", "+i[6]+", "+i[7]+", "+i[8]+", "+i[9]+", "+i[10]+", "+i[11]+", "+i[12]+", "+i[13]+", "+i[14]+", "+i[15]+")"},Fr.frob=function(i){return Math.hypot(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],i[9],i[10],i[11],i[12],i[13],i[14],i[15])},Fr.add=function(i,n,a){return i[0]=n[0]+a[0],i[1]=n[1]+a[1],i[2]=n[2]+a[2],i[3]=n[3]+a[3],i[4]=n[4]+a[4],i[5]=n[5]+a[5],i[6]=n[6]+a[6],i[7]=n[7]+a[7],i[8]=n[8]+a[8],i[9]=n[9]+a[9],i[10]=n[10]+a[10],i[11]=n[11]+a[11],i[12]=n[12]+a[12],i[13]=n[13]+a[13],i[14]=n[14]+a[14],i[15]=n[15]+a[15],i},Fr.subtract=mL,Fr.multiplyScalar=function(i,n,a){return i[0]=n[0]*a,i[1]=n[1]*a,i[2]=n[2]*a,i[3]=n[3]*a,i[4]=n[4]*a,i[5]=n[5]*a,i[6]=n[6]*a,i[7]=n[7]*a,i[8]=n[8]*a,i[9]=n[9]*a,i[10]=n[10]*a,i[11]=n[11]*a,i[12]=n[12]*a,i[13]=n[13]*a,i[14]=n[14]*a,i[15]=n[15]*a,i},Fr.multiplyScalarAndAdd=function(i,n,a,c){return i[0]=n[0]+a[0]*c,i[1]=n[1]+a[1]*c,i[2]=n[2]+a[2]*c,i[3]=n[3]+a[3]*c,i[4]=n[4]+a[4]*c,i[5]=n[5]+a[5]*c,i[6]=n[6]+a[6]*c,i[7]=n[7]+a[7]*c,i[8]=n[8]+a[8]*c,i[9]=n[9]+a[9]*c,i[10]=n[10]+a[10]*c,i[11]=n[11]+a[11]*c,i[12]=n[12]+a[12]*c,i[13]=n[13]+a[13]*c,i[14]=n[14]+a[14]*c,i[15]=n[15]+a[15]*c,i},Fr.exactEquals=function(i,n){return i[0]===n[0]&&i[1]===n[1]&&i[2]===n[2]&&i[3]===n[3]&&i[4]===n[4]&&i[5]===n[5]&&i[6]===n[6]&&i[7]===n[7]&&i[8]===n[8]&&i[9]===n[9]&&i[10]===n[10]&&i[11]===n[11]&&i[12]===n[12]&&i[13]===n[13]&&i[14]===n[14]&&i[15]===n[15]},Fr.equals=function(i,n){var a=i[0],c=i[1],d=i[2],m=i[3],y=i[4],b=i[5],S=i[6],T=i[7],D=i[8],O=i[9],z=i[10],$=i[11],G=i[12],q=i[13],re=i[14],ie=i[15],fe=n[0],_e=n[1],ge=n[2],Se=n[3],be=n[4],Me=n[5],Ne=n[6],Ge=n[7],Ye=n[8],He=n[9],st=n[10],yt=n[11],nt=n[12],mt=n[13],tt=n[14],pt=n[15];return Math.abs(a-fe)<=ki.EPSILON*Math.max(1,Math.abs(a),Math.abs(fe))&&Math.abs(c-_e)<=ki.EPSILON*Math.max(1,Math.abs(c),Math.abs(_e))&&Math.abs(d-ge)<=ki.EPSILON*Math.max(1,Math.abs(d),Math.abs(ge))&&Math.abs(m-Se)<=ki.EPSILON*Math.max(1,Math.abs(m),Math.abs(Se))&&Math.abs(y-be)<=ki.EPSILON*Math.max(1,Math.abs(y),Math.abs(be))&&Math.abs(b-Me)<=ki.EPSILON*Math.max(1,Math.abs(b),Math.abs(Me))&&Math.abs(S-Ne)<=ki.EPSILON*Math.max(1,Math.abs(S),Math.abs(Ne))&&Math.abs(T-Ge)<=ki.EPSILON*Math.max(1,Math.abs(T),Math.abs(Ge))&&Math.abs(D-Ye)<=ki.EPSILON*Math.max(1,Math.abs(D),Math.abs(Ye))&&Math.abs(O-He)<=ki.EPSILON*Math.max(1,Math.abs(O),Math.abs(He))&&Math.abs(z-st)<=ki.EPSILON*Math.max(1,Math.abs(z),Math.abs(st))&&Math.abs($-yt)<=ki.EPSILON*Math.max(1,Math.abs($),Math.abs(yt))&&Math.abs(G-nt)<=ki.EPSILON*Math.max(1,Math.abs(G),Math.abs(nt))&&Math.abs(q-mt)<=ki.EPSILON*Math.max(1,Math.abs(q),Math.abs(mt))&&Math.abs(re-tt)<=ki.EPSILON*Math.max(1,Math.abs(re),Math.abs(tt))&&Math.abs(ie-pt)<=ki.EPSILON*Math.max(1,Math.abs(ie),Math.abs(pt))},Fr.sub=Fr.mul=Fr.ortho=Fr.perspective=void 0;var ki=function(i,n){if(i&&i.__esModule)return i;if(i===null||YS(i)!=="object"&&typeof i!="function")return{default:i};var a=lL(void 0);if(a&&a.has(i))return a.get(i);var c={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in i)if(m!=="default"&&Object.prototype.hasOwnProperty.call(i,m)){var y=d?Object.getOwnPropertyDescriptor(i,m):null;y&&(y.get||y.set)?Object.defineProperty(c,m,y):c[m]=i[m]}return c.default=i,a&&a.set(i,c),c}(bo);function lL(i){if(typeof WeakMap!="function")return null;var n=new WeakMap,a=new WeakMap;return(lL=function(c){return c?a:n})(i)}function uL(i){return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function cL(i,n,a){var c=n[0],d=n[1],m=n[2],y=n[3],b=n[4],S=n[5],T=n[6],D=n[7],O=n[8],z=n[9],$=n[10],G=n[11],q=n[12],re=n[13],ie=n[14],fe=n[15],_e=a[0],ge=a[1],Se=a[2],be=a[3];return i[0]=_e*c+ge*b+Se*O+be*q,i[1]=_e*d+ge*S+Se*z+be*re,i[2]=_e*m+ge*T+Se*$+be*ie,i[3]=_e*y+ge*D+Se*G+be*fe,i[4]=(_e=a[4])*c+(ge=a[5])*b+(Se=a[6])*O+(be=a[7])*q,i[5]=_e*d+ge*S+Se*z+be*re,i[6]=_e*m+ge*T+Se*$+be*ie,i[7]=_e*y+ge*D+Se*G+be*fe,i[8]=(_e=a[8])*c+(ge=a[9])*b+(Se=a[10])*O+(be=a[11])*q,i[9]=_e*d+ge*S+Se*z+be*re,i[10]=_e*m+ge*T+Se*$+be*ie,i[11]=_e*y+ge*D+Se*G+be*fe,i[12]=(_e=a[12])*c+(ge=a[13])*b+(Se=a[14])*O+(be=a[15])*q,i[13]=_e*d+ge*S+Se*z+be*re,i[14]=_e*m+ge*T+Se*$+be*ie,i[15]=_e*y+ge*D+Se*G+be*fe,i}function hL(i,n,a){var c=n[0],d=n[1],m=n[2],y=n[3],b=c+c,S=d+d,T=m+m,D=c*b,O=c*S,z=c*T,$=d*S,G=d*T,q=m*T,re=y*b,ie=y*S,fe=y*T;return i[0]=1-($+q),i[1]=O+fe,i[2]=z-ie,i[3]=0,i[4]=O-fe,i[5]=1-(D+q),i[6]=G+re,i[7]=0,i[8]=z+ie,i[9]=G-re,i[10]=1-(D+$),i[11]=0,i[12]=a[0],i[13]=a[1],i[14]=a[2],i[15]=1,i}function fL(i,n){var a=n[4],c=n[5],d=n[6],m=n[8],y=n[9],b=n[10];return i[0]=Math.hypot(n[0],n[1],n[2]),i[1]=Math.hypot(a,c,d),i[2]=Math.hypot(m,y,b),i}function dL(i,n,a,c,d){var m,y=1/Math.tan(n/2);return i[0]=y/a,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=y,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=-1,i[12]=0,i[13]=0,i[15]=0,d!=null&&d!==1/0?(i[10]=(d+c)*(m=1/(c-d)),i[14]=2*d*c*m):(i[10]=-1,i[14]=-2*c),i}function pL(i,n,a,c,d,m,y){var b=1/(n-a),S=1/(c-d),T=1/(m-y);return i[0]=-2*b,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=-2*S,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2*T,i[11]=0,i[12]=(n+a)*b,i[13]=(d+c)*S,i[14]=(y+m)*T,i[15]=1,i}function mL(i,n,a){return i[0]=n[0]-a[0],i[1]=n[1]-a[1],i[2]=n[2]-a[2],i[3]=n[3]-a[3],i[4]=n[4]-a[4],i[5]=n[5]-a[5],i[6]=n[6]-a[6],i[7]=n[7]-a[7],i[8]=n[8]-a[8],i[9]=n[9]-a[9],i[10]=n[10]-a[10],i[11]=n[11]-a[11],i[12]=n[12]-a[12],i[13]=n[13]-a[13],i[14]=n[14]-a[14],i[15]=n[15]-a[15],i}Fr.perspective=dL,Fr.ortho=pL,Fr.mul=cL,Fr.sub=mL;var Ir={},Rr={};function JS(i){return JS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},JS(i)}Object.defineProperty(Rr,"__esModule",{value:!0}),Rr.create=_L,Rr.clone=function(i){var n=new Kc.ARRAY_TYPE(3);return n[0]=i[0],n[1]=i[1],n[2]=i[2],n},Rr.length=yL,Rr.fromValues=function(i,n,a){var c=new Kc.ARRAY_TYPE(3);return c[0]=i,c[1]=n,c[2]=a,c},Rr.copy=function(i,n){return i[0]=n[0],i[1]=n[1],i[2]=n[2],i},Rr.set=function(i,n,a,c){return i[0]=n,i[1]=a,i[2]=c,i},Rr.add=function(i,n,a){return i[0]=n[0]+a[0],i[1]=n[1]+a[1],i[2]=n[2]+a[2],i},Rr.subtract=vL,Rr.multiply=BL,Rr.divide=xL,Rr.ceil=function(i,n){return i[0]=Math.ceil(n[0]),i[1]=Math.ceil(n[1]),i[2]=Math.ceil(n[2]),i},Rr.floor=function(i,n){return i[0]=Math.floor(n[0]),i[1]=Math.floor(n[1]),i[2]=Math.floor(n[2]),i},Rr.min=function(i,n,a){return i[0]=Math.min(n[0],a[0]),i[1]=Math.min(n[1],a[1]),i[2]=Math.min(n[2],a[2]),i},Rr.max=function(i,n,a){return i[0]=Math.max(n[0],a[0]),i[1]=Math.max(n[1],a[1]),i[2]=Math.max(n[2],a[2]),i},Rr.round=function(i,n){return i[0]=Math.round(n[0]),i[1]=Math.round(n[1]),i[2]=Math.round(n[2]),i},Rr.scale=function(i,n,a){return i[0]=n[0]*a,i[1]=n[1]*a,i[2]=n[2]*a,i},Rr.scaleAndAdd=function(i,n,a,c){return i[0]=n[0]+a[0]*c,i[1]=n[1]+a[1]*c,i[2]=n[2]+a[2]*c,i},Rr.distance=bL,Rr.squaredDistance=CL,Rr.squaredLength=wL,Rr.negate=function(i,n){return i[0]=-n[0],i[1]=-n[1],i[2]=-n[2],i},Rr.inverse=function(i,n){return i[0]=1/n[0],i[1]=1/n[1],i[2]=1/n[2],i},Rr.normalize=function(i,n){var a=n[0],c=n[1],d=n[2],m=a*a+c*c+d*d;return m>0&&(m=1/Math.sqrt(m)),i[0]=n[0]*m,i[1]=n[1]*m,i[2]=n[2]*m,i},Rr.dot=SL,Rr.cross=function(i,n,a){var c=n[0],d=n[1],m=n[2],y=a[0],b=a[1],S=a[2];return i[0]=d*S-m*b,i[1]=m*y-c*S,i[2]=c*b-d*y,i},Rr.lerp=function(i,n,a,c){var d=n[0],m=n[1],y=n[2];return i[0]=d+c*(a[0]-d),i[1]=m+c*(a[1]-m),i[2]=y+c*(a[2]-y),i},Rr.hermite=function(i,n,a,c,d,m){var y=m*m,b=y*(2*m-3)+1,S=y*(m-2)+m,T=y*(m-1),D=y*(3-2*m);return i[0]=n[0]*b+a[0]*S+c[0]*T+d[0]*D,i[1]=n[1]*b+a[1]*S+c[1]*T+d[1]*D,i[2]=n[2]*b+a[2]*S+c[2]*T+d[2]*D,i},Rr.bezier=function(i,n,a,c,d,m){var y=1-m,b=y*y,S=m*m,T=b*y,D=3*m*b,O=3*S*y,z=S*m;return i[0]=n[0]*T+a[0]*D+c[0]*O+d[0]*z,i[1]=n[1]*T+a[1]*D+c[1]*O+d[1]*z,i[2]=n[2]*T+a[2]*D+c[2]*O+d[2]*z,i},Rr.random=function(i,n){n=n||1;var a=2*Kc.RANDOM()*Math.PI,c=2*Kc.RANDOM()-1,d=Math.sqrt(1-c*c)*n;return i[0]=Math.cos(a)*d,i[1]=Math.sin(a)*d,i[2]=c*n,i},Rr.transformMat4=function(i,n,a){var c=n[0],d=n[1],m=n[2],y=a[3]*c+a[7]*d+a[11]*m+a[15];return i[0]=(a[0]*c+a[4]*d+a[8]*m+a[12])/(y=y||1),i[1]=(a[1]*c+a[5]*d+a[9]*m+a[13])/y,i[2]=(a[2]*c+a[6]*d+a[10]*m+a[14])/y,i},Rr.transformMat3=function(i,n,a){var c=n[0],d=n[1],m=n[2];return i[0]=c*a[0]+d*a[3]+m*a[6],i[1]=c*a[1]+d*a[4]+m*a[7],i[2]=c*a[2]+d*a[5]+m*a[8],i},Rr.transformQuat=function(i,n,a){var c=a[0],d=a[1],m=a[2],y=n[0],b=n[1],S=n[2],T=d*S-m*b,D=m*y-c*S,O=c*b-d*y,z=d*O-m*D,$=m*T-c*O,G=c*D-d*T,q=2*a[3];return D*=q,O*=q,$*=2,G*=2,i[0]=y+(T*=q)+(z*=2),i[1]=b+D+$,i[2]=S+O+G,i},Rr.rotateX=function(i,n,a,c){var d=[],m=[];return d[0]=n[0]-a[0],d[1]=n[1]-a[1],d[2]=n[2]-a[2],m[0]=d[0],m[1]=d[1]*Math.cos(c)-d[2]*Math.sin(c),m[2]=d[1]*Math.sin(c)+d[2]*Math.cos(c),i[0]=m[0]+a[0],i[1]=m[1]+a[1],i[2]=m[2]+a[2],i},Rr.rotateY=function(i,n,a,c){var d=[],m=[];return d[0]=n[0]-a[0],d[1]=n[1]-a[1],d[2]=n[2]-a[2],m[0]=d[2]*Math.sin(c)+d[0]*Math.cos(c),m[1]=d[1],m[2]=d[2]*Math.cos(c)-d[0]*Math.sin(c),i[0]=m[0]+a[0],i[1]=m[1]+a[1],i[2]=m[2]+a[2],i},Rr.rotateZ=function(i,n,a,c){var d=[],m=[];return d[0]=n[0]-a[0],d[1]=n[1]-a[1],d[2]=n[2]-a[2],m[0]=d[0]*Math.cos(c)-d[1]*Math.sin(c),m[1]=d[0]*Math.sin(c)+d[1]*Math.cos(c),m[2]=d[2],i[0]=m[0]+a[0],i[1]=m[1]+a[1],i[2]=m[2]+a[2],i},Rr.angle=function(i,n){var a=i[0],c=i[1],d=i[2],m=n[0],y=n[1],b=n[2],S=Math.sqrt(a*a+c*c+d*d)*Math.sqrt(m*m+y*y+b*b),T=S&&SL(i,n)/S;return Math.acos(Math.min(Math.max(T,-1),1))},Rr.zero=function(i){return i[0]=0,i[1]=0,i[2]=0,i},Rr.str=function(i){return"vec3("+i[0]+", "+i[1]+", "+i[2]+")"},Rr.exactEquals=function(i,n){return i[0]===n[0]&&i[1]===n[1]&&i[2]===n[2]},Rr.equals=function(i,n){var a=i[0],c=i[1],d=i[2],m=n[0],y=n[1],b=n[2];return Math.abs(a-m)<=Kc.EPSILON*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(c-y)<=Kc.EPSILON*Math.max(1,Math.abs(c),Math.abs(y))&&Math.abs(d-b)<=Kc.EPSILON*Math.max(1,Math.abs(d),Math.abs(b))},Rr.forEach=Rr.sqrLen=Rr.len=Rr.sqrDist=Rr.dist=Rr.div=Rr.mul=Rr.sub=void 0;var Kc=function(i,n){if(i&&i.__esModule)return i;if(i===null||JS(i)!=="object"&&typeof i!="function")return{default:i};var a=gL(void 0);if(a&&a.has(i))return a.get(i);var c={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in i)if(m!=="default"&&Object.prototype.hasOwnProperty.call(i,m)){var y=d?Object.getOwnPropertyDescriptor(i,m):null;y&&(y.get||y.set)?Object.defineProperty(c,m,y):c[m]=i[m]}return c.default=i,a&&a.set(i,c),c}(bo);function gL(i){if(typeof WeakMap!="function")return null;var n=new WeakMap,a=new WeakMap;return(gL=function(c){return c?a:n})(i)}function _L(){var i=new Kc.ARRAY_TYPE(3);return Kc.ARRAY_TYPE!=Float32Array&&(i[0]=0,i[1]=0,i[2]=0),i}function yL(i){return Math.hypot(i[0],i[1],i[2])}function vL(i,n,a){return i[0]=n[0]-a[0],i[1]=n[1]-a[1],i[2]=n[2]-a[2],i}function BL(i,n,a){return i[0]=n[0]*a[0],i[1]=n[1]*a[1],i[2]=n[2]*a[2],i}function xL(i,n,a){return i[0]=n[0]/a[0],i[1]=n[1]/a[1],i[2]=n[2]/a[2],i}function bL(i,n){return Math.hypot(n[0]-i[0],n[1]-i[1],n[2]-i[2])}function CL(i,n){var a=n[0]-i[0],c=n[1]-i[1],d=n[2]-i[2];return a*a+c*c+d*d}function wL(i){var n=i[0],a=i[1],c=i[2];return n*n+a*a+c*c}function SL(i,n){return i[0]*n[0]+i[1]*n[1]+i[2]*n[2]}Rr.sub=vL,Rr.mul=BL,Rr.div=xL,Rr.dist=bL,Rr.sqrDist=CL,Rr.len=yL,Rr.sqrLen=wL;var Xc,aK=(Xc=_L(),function(i,n,a,c,d,m){var y,b;for(n||(n=3),a||(a=0),b=c?Math.min(c*n+a,i.length):i.length,y=a;y<b;y+=n)Xc[0]=i[y],Xc[1]=i[y+1],Xc[2]=i[y+2],d(Xc,Xc,m),i[y]=Xc[0],i[y+1]=Xc[1],i[y+2]=Xc[2];return i});Rr.forEach=aK;var on={};function QS(i){return QS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},QS(i)}Object.defineProperty(on,"__esModule",{value:!0}),on.create=AL,on.clone=function(i){var n=new El.ARRAY_TYPE(4);return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n},on.fromValues=function(i,n,a,c){var d=new El.ARRAY_TYPE(4);return d[0]=i,d[1]=n,d[2]=a,d[3]=c,d},on.copy=function(i,n){return i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],i},on.set=function(i,n,a,c,d){return i[0]=n,i[1]=a,i[2]=c,i[3]=d,i},on.add=function(i,n,a){return i[0]=n[0]+a[0],i[1]=n[1]+a[1],i[2]=n[2]+a[2],i[3]=n[3]+a[3],i},on.subtract=EL,on.multiply=DL,on.divide=PL,on.ceil=function(i,n){return i[0]=Math.ceil(n[0]),i[1]=Math.ceil(n[1]),i[2]=Math.ceil(n[2]),i[3]=Math.ceil(n[3]),i},on.floor=function(i,n){return i[0]=Math.floor(n[0]),i[1]=Math.floor(n[1]),i[2]=Math.floor(n[2]),i[3]=Math.floor(n[3]),i},on.min=function(i,n,a){return i[0]=Math.min(n[0],a[0]),i[1]=Math.min(n[1],a[1]),i[2]=Math.min(n[2],a[2]),i[3]=Math.min(n[3],a[3]),i},on.max=function(i,n,a){return i[0]=Math.max(n[0],a[0]),i[1]=Math.max(n[1],a[1]),i[2]=Math.max(n[2],a[2]),i[3]=Math.max(n[3],a[3]),i},on.round=function(i,n){return i[0]=Math.round(n[0]),i[1]=Math.round(n[1]),i[2]=Math.round(n[2]),i[3]=Math.round(n[3]),i},on.scale=function(i,n,a){return i[0]=n[0]*a,i[1]=n[1]*a,i[2]=n[2]*a,i[3]=n[3]*a,i},on.scaleAndAdd=function(i,n,a,c){return i[0]=n[0]+a[0]*c,i[1]=n[1]+a[1]*c,i[2]=n[2]+a[2]*c,i[3]=n[3]+a[3]*c,i},on.distance=ML,on.squaredDistance=IL,on.length=OL,on.squaredLength=kL,on.negate=function(i,n){return i[0]=-n[0],i[1]=-n[1],i[2]=-n[2],i[3]=-n[3],i},on.inverse=function(i,n){return i[0]=1/n[0],i[1]=1/n[1],i[2]=1/n[2],i[3]=1/n[3],i},on.normalize=function(i,n){var a=n[0],c=n[1],d=n[2],m=n[3],y=a*a+c*c+d*d+m*m;return y>0&&(y=1/Math.sqrt(y)),i[0]=a*y,i[1]=c*y,i[2]=d*y,i[3]=m*y,i},on.dot=function(i,n){return i[0]*n[0]+i[1]*n[1]+i[2]*n[2]+i[3]*n[3]},on.cross=function(i,n,a,c){var d=a[0]*c[1]-a[1]*c[0],m=a[0]*c[2]-a[2]*c[0],y=a[0]*c[3]-a[3]*c[0],b=a[1]*c[2]-a[2]*c[1],S=a[1]*c[3]-a[3]*c[1],T=a[2]*c[3]-a[3]*c[2],D=n[0],O=n[1],z=n[2],$=n[3];return i[0]=O*T-z*S+$*b,i[1]=-D*T+z*y-$*m,i[2]=D*S-O*y+$*d,i[3]=-D*b+O*m-z*d,i},on.lerp=function(i,n,a,c){var d=n[0],m=n[1],y=n[2],b=n[3];return i[0]=d+c*(a[0]-d),i[1]=m+c*(a[1]-m),i[2]=y+c*(a[2]-y),i[3]=b+c*(a[3]-b),i},on.random=function(i,n){var a,c,d,m,y,b;n=n||1;do y=(a=2*El.RANDOM()-1)*a+(c=2*El.RANDOM()-1)*c;while(y>=1);do b=(d=2*El.RANDOM()-1)*d+(m=2*El.RANDOM()-1)*m;while(b>=1);var S=Math.sqrt((1-y)/b);return i[0]=n*a,i[1]=n*c,i[2]=n*d*S,i[3]=n*m*S,i},on.transformMat4=function(i,n,a){var c=n[0],d=n[1],m=n[2],y=n[3];return i[0]=a[0]*c+a[4]*d+a[8]*m+a[12]*y,i[1]=a[1]*c+a[5]*d+a[9]*m+a[13]*y,i[2]=a[2]*c+a[6]*d+a[10]*m+a[14]*y,i[3]=a[3]*c+a[7]*d+a[11]*m+a[15]*y,i},on.transformQuat=function(i,n,a){var c=n[0],d=n[1],m=n[2],y=a[0],b=a[1],S=a[2],T=a[3],D=T*c+b*m-S*d,O=T*d+S*c-y*m,z=T*m+y*d-b*c,$=-y*c-b*d-S*m;return i[0]=D*T+$*-y+O*-S-z*-b,i[1]=O*T+$*-b+z*-y-D*-S,i[2]=z*T+$*-S+D*-b-O*-y,i[3]=n[3],i},on.zero=function(i){return i[0]=0,i[1]=0,i[2]=0,i[3]=0,i},on.str=function(i){return"vec4("+i[0]+", "+i[1]+", "+i[2]+", "+i[3]+")"},on.exactEquals=function(i,n){return i[0]===n[0]&&i[1]===n[1]&&i[2]===n[2]&&i[3]===n[3]},on.equals=function(i,n){var a=i[0],c=i[1],d=i[2],m=i[3],y=n[0],b=n[1],S=n[2],T=n[3];return Math.abs(a-y)<=El.EPSILON*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(c-b)<=El.EPSILON*Math.max(1,Math.abs(c),Math.abs(b))&&Math.abs(d-S)<=El.EPSILON*Math.max(1,Math.abs(d),Math.abs(S))&&Math.abs(m-T)<=El.EPSILON*Math.max(1,Math.abs(m),Math.abs(T))},on.forEach=on.sqrLen=on.len=on.sqrDist=on.dist=on.div=on.mul=on.sub=void 0;var El=function(i,n){if(i&&i.__esModule)return i;if(i===null||QS(i)!=="object"&&typeof i!="function")return{default:i};var a=TL(void 0);if(a&&a.has(i))return a.get(i);var c={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in i)if(m!=="default"&&Object.prototype.hasOwnProperty.call(i,m)){var y=d?Object.getOwnPropertyDescriptor(i,m):null;y&&(y.get||y.set)?Object.defineProperty(c,m,y):c[m]=i[m]}return c.default=i,a&&a.set(i,c),c}(bo);function TL(i){if(typeof WeakMap!="function")return null;var n=new WeakMap,a=new WeakMap;return(TL=function(c){return c?a:n})(i)}function AL(){var i=new El.ARRAY_TYPE(4);return El.ARRAY_TYPE!=Float32Array&&(i[0]=0,i[1]=0,i[2]=0,i[3]=0),i}function EL(i,n,a){return i[0]=n[0]-a[0],i[1]=n[1]-a[1],i[2]=n[2]-a[2],i[3]=n[3]-a[3],i}function DL(i,n,a){return i[0]=n[0]*a[0],i[1]=n[1]*a[1],i[2]=n[2]*a[2],i[3]=n[3]*a[3],i}function PL(i,n,a){return i[0]=n[0]/a[0],i[1]=n[1]/a[1],i[2]=n[2]/a[2],i[3]=n[3]/a[3],i}function ML(i,n){return Math.hypot(n[0]-i[0],n[1]-i[1],n[2]-i[2],n[3]-i[3])}function IL(i,n){var a=n[0]-i[0],c=n[1]-i[1],d=n[2]-i[2],m=n[3]-i[3];return a*a+c*c+d*d+m*m}function OL(i){return Math.hypot(i[0],i[1],i[2],i[3])}function kL(i){var n=i[0],a=i[1],c=i[2],d=i[3];return n*n+a*a+c*c+d*d}on.sub=EL,on.mul=DL,on.div=PL,on.dist=ML,on.sqrDist=IL,on.len=OL,on.sqrLen=kL;var sK=function(){var i=AL();return function(n,a,c,d,m,y){var b,S;for(a||(a=4),c||(c=0),S=d?Math.min(d*a+c,n.length):n.length,b=c;b<S;b+=a)i[0]=n[b],i[1]=n[b+1],i[2]=n[b+2],i[3]=n[b+3],m(i,i,y),n[b]=i[0],n[b+1]=i[1],n[b+2]=i[2],n[b+3]=i[3];return n}}();function eT(i){return eT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},eT(i)}on.forEach=sK,Object.defineProperty(Ir,"__esModule",{value:!0}),Ir.create=tT,Ir.identity=function(i){return i[0]=0,i[1]=0,i[2]=0,i[3]=1,i},Ir.setAxisAngle=RL,Ir.getAxisAngle=function(i,n){var a=2*Math.acos(n[3]),c=Math.sin(a/2);return c>ep.EPSILON?(i[0]=n[0]/c,i[1]=n[1]/c,i[2]=n[2]/c):(i[0]=1,i[1]=0,i[2]=0),a},Ir.getAngle=function(i,n){var a=UL(i,n);return Math.acos(2*a*a-1)},Ir.multiply=zL,Ir.rotateX=function(i,n,a){a*=.5;var c=n[0],d=n[1],m=n[2],y=n[3],b=Math.sin(a),S=Math.cos(a);return i[0]=c*S+y*b,i[1]=d*S+m*b,i[2]=m*S-d*b,i[3]=y*S-c*b,i},Ir.rotateY=function(i,n,a){a*=.5;var c=n[0],d=n[1],m=n[2],y=n[3],b=Math.sin(a),S=Math.cos(a);return i[0]=c*S-m*b,i[1]=d*S+y*b,i[2]=m*S+c*b,i[3]=y*S-d*b,i},Ir.rotateZ=function(i,n,a){a*=.5;var c=n[0],d=n[1],m=n[2],y=n[3],b=Math.sin(a),S=Math.cos(a);return i[0]=c*S+d*b,i[1]=d*S-c*b,i[2]=m*S+y*b,i[3]=y*S-m*b,i},Ir.calculateW=function(i,n){var a=n[0],c=n[1],d=n[2];return i[0]=a,i[1]=c,i[2]=d,i[3]=Math.sqrt(Math.abs(1-a*a-c*c-d*d)),i},Ir.exp=NL,Ir.ln=FL,Ir.pow=function(i,n,a){return FL(i,n),$L(i,i,a),NL(i,i),i},Ir.slerp=C1,Ir.random=function(i){var n=ep.RANDOM(),a=ep.RANDOM(),c=ep.RANDOM(),d=Math.sqrt(1-n),m=Math.sqrt(n);return i[0]=d*Math.sin(2*Math.PI*a),i[1]=d*Math.cos(2*Math.PI*a),i[2]=m*Math.sin(2*Math.PI*c),i[3]=m*Math.cos(2*Math.PI*c),i},Ir.invert=function(i,n){var a=n[0],c=n[1],d=n[2],m=n[3],y=a*a+c*c+d*d+m*m,b=y?1/y:0;return i[0]=-a*b,i[1]=-c*b,i[2]=-d*b,i[3]=m*b,i},Ir.conjugate=function(i,n){return i[0]=-n[0],i[1]=-n[1],i[2]=-n[2],i[3]=n[3],i},Ir.fromMat3=jL,Ir.fromEuler=function(i,n,a,c){var d=.5*Math.PI/180;n*=d,a*=d,c*=d;var m=Math.sin(n),y=Math.cos(n),b=Math.sin(a),S=Math.cos(a),T=Math.sin(c),D=Math.cos(c);return i[0]=m*S*D-y*b*T,i[1]=y*b*D+m*S*T,i[2]=y*S*T-m*b*D,i[3]=y*S*D+m*b*T,i},Ir.str=function(i){return"quat("+i[0]+", "+i[1]+", "+i[2]+", "+i[3]+")"},Ir.setAxes=Ir.sqlerp=Ir.rotationTo=Ir.equals=Ir.exactEquals=Ir.normalize=Ir.sqrLen=Ir.squaredLength=Ir.len=Ir.length=Ir.lerp=Ir.dot=Ir.scale=Ir.mul=Ir.add=Ir.set=Ir.copy=Ir.fromValues=Ir.clone=void 0;var ep=b1(bo),lK=b1(Vn),Yc=b1(Rr),Vs=b1(on);function LL(i){if(typeof WeakMap!="function")return null;var n=new WeakMap,a=new WeakMap;return(LL=function(c){return c?a:n})(i)}function b1(i,n){if(!n&&i&&i.__esModule)return i;if(i===null||eT(i)!=="object"&&typeof i!="function")return{default:i};var a=LL(n);if(a&&a.has(i))return a.get(i);var c={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in i)if(m!=="default"&&Object.prototype.hasOwnProperty.call(i,m)){var y=d?Object.getOwnPropertyDescriptor(i,m):null;y&&(y.get||y.set)?Object.defineProperty(c,m,y):c[m]=i[m]}return c.default=i,a&&a.set(i,c),c}function tT(){var i=new ep.ARRAY_TYPE(4);return ep.ARRAY_TYPE!=Float32Array&&(i[0]=0,i[1]=0,i[2]=0),i[3]=1,i}function RL(i,n,a){a*=.5;var c=Math.sin(a);return i[0]=c*n[0],i[1]=c*n[1],i[2]=c*n[2],i[3]=Math.cos(a),i}function zL(i,n,a){var c=n[0],d=n[1],m=n[2],y=n[3],b=a[0],S=a[1],T=a[2],D=a[3];return i[0]=c*D+y*b+d*T-m*S,i[1]=d*D+y*S+m*b-c*T,i[2]=m*D+y*T+c*S-d*b,i[3]=y*D-c*b-d*S-m*T,i}function NL(i,n){var a=n[0],c=n[1],d=n[2],m=n[3],y=Math.sqrt(a*a+c*c+d*d),b=Math.exp(m),S=y>0?b*Math.sin(y)/y:0;return i[0]=a*S,i[1]=c*S,i[2]=d*S,i[3]=b*Math.cos(y),i}function FL(i,n){var a=n[0],c=n[1],d=n[2],m=n[3],y=Math.sqrt(a*a+c*c+d*d),b=y>0?Math.atan2(y,m)/y:0;return i[0]=a*b,i[1]=c*b,i[2]=d*b,i[3]=.5*Math.log(a*a+c*c+d*d+m*m),i}function C1(i,n,a,c){var d,m,y,b,S,T=n[0],D=n[1],O=n[2],z=n[3],$=a[0],G=a[1],q=a[2],re=a[3];return(m=T*$+D*G+O*q+z*re)<0&&(m=-m,$=-$,G=-G,q=-q,re=-re),1-m>ep.EPSILON?(d=Math.acos(m),y=Math.sin(d),b=Math.sin((1-c)*d)/y,S=Math.sin(c*d)/y):(b=1-c,S=c),i[0]=b*T+S*$,i[1]=b*D+S*G,i[2]=b*O+S*q,i[3]=b*z+S*re,i}function jL(i,n){var a,c=n[0]+n[4]+n[8];if(c>0)a=Math.sqrt(c+1),i[3]=.5*a,i[0]=(n[5]-n[7])*(a=.5/a),i[1]=(n[6]-n[2])*a,i[2]=(n[1]-n[3])*a;else{var d=0;n[4]>n[0]&&(d=1),n[8]>n[3*d+d]&&(d=2);var m=(d+1)%3,y=(d+2)%3;a=Math.sqrt(n[3*d+d]-n[3*m+m]-n[3*y+y]+1),i[d]=.5*a,i[3]=(n[3*m+y]-n[3*y+m])*(a=.5/a),i[m]=(n[3*m+d]+n[3*d+m])*a,i[y]=(n[3*y+d]+n[3*d+y])*a}return i}Ir.clone=Vs.clone,Ir.fromValues=Vs.fromValues,Ir.copy=Vs.copy,Ir.set=Vs.set,Ir.add=Vs.add,Ir.mul=zL;var $L=Vs.scale;Ir.scale=$L;var UL=Vs.dot;Ir.dot=UL,Ir.lerp=Vs.lerp;var VL=Vs.length;Ir.length=VL,Ir.len=VL;var GL=Vs.squaredLength;Ir.squaredLength=GL,Ir.sqrLen=GL;var rT=Vs.normalize;Ir.normalize=rT,Ir.exactEquals=Vs.exactEquals,Ir.equals=Vs.equals;var su,HL,WL,uK=(su=Yc.create(),HL=Yc.fromValues(1,0,0),WL=Yc.fromValues(0,1,0),function(i,n,a){var c=Yc.dot(n,a);return c<-.999999?(Yc.cross(su,HL,n),Yc.len(su)<1e-6&&Yc.cross(su,WL,n),Yc.normalize(su,su),RL(i,su,Math.PI),i):c>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(Yc.cross(su,n,a),i[0]=su[0],i[1]=su[1],i[2]=su[2],i[3]=1+c,rT(i,i))});Ir.rotationTo=uK;var nT,iT,cK=(nT=tT(),iT=tT(),function(i,n,a,c,d,m){return C1(nT,n,d,m),C1(iT,a,c,m),C1(i,nT,iT,2*m*(1-m)),i});Ir.sqlerp=cK;var lu,hK=(lu=lK.create(),function(i,n,a,c){return lu[0]=a[0],lu[3]=a[1],lu[6]=a[2],lu[1]=c[0],lu[4]=c[1],lu[7]=c[2],lu[2]=-n[0],lu[5]=-n[1],lu[8]=-n[2],rT(i,jL(i,lu))});Ir.setAxes=hK;var cn={};function oT(i){return oT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},oT(i)}Object.defineProperty(cn,"__esModule",{value:!0}),cn.create=function(){var i=new es.ARRAY_TYPE(8);return es.ARRAY_TYPE!=Float32Array&&(i[0]=0,i[1]=0,i[2]=0,i[4]=0,i[5]=0,i[6]=0,i[7]=0),i[3]=1,i},cn.clone=function(i){var n=new es.ARRAY_TYPE(8);return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n},cn.fromValues=function(i,n,a,c,d,m,y,b){var S=new es.ARRAY_TYPE(8);return S[0]=i,S[1]=n,S[2]=a,S[3]=c,S[4]=d,S[5]=m,S[6]=y,S[7]=b,S},cn.fromRotationTranslationValues=function(i,n,a,c,d,m,y){var b=new es.ARRAY_TYPE(8);b[0]=i,b[1]=n,b[2]=a,b[3]=c;var S=.5*d,T=.5*m,D=.5*y;return b[4]=S*c+T*a-D*n,b[5]=T*c+D*i-S*a,b[6]=D*c+S*n-T*i,b[7]=-S*i-T*n-D*a,b},cn.fromRotationTranslation=KL,cn.fromTranslation=function(i,n){return i[0]=0,i[1]=0,i[2]=0,i[3]=1,i[4]=.5*n[0],i[5]=.5*n[1],i[6]=.5*n[2],i[7]=0,i},cn.fromRotation=function(i,n){return i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],i[4]=0,i[5]=0,i[6]=0,i[7]=0,i},cn.fromMat4=function(i,n){var a=Jc.create();ZL.getRotation(a,n);var c=new es.ARRAY_TYPE(3);return ZL.getTranslation(c,n),KL(i,a,c),i},cn.copy=XL,cn.identity=function(i){return i[0]=0,i[1]=0,i[2]=0,i[3]=1,i[4]=0,i[5]=0,i[6]=0,i[7]=0,i},cn.set=function(i,n,a,c,d,m,y,b,S){return i[0]=n,i[1]=a,i[2]=c,i[3]=d,i[4]=m,i[5]=y,i[6]=b,i[7]=S,i},cn.getDual=function(i,n){return i[0]=n[4],i[1]=n[5],i[2]=n[6],i[3]=n[7],i},cn.setDual=function(i,n){return i[4]=n[0],i[5]=n[1],i[6]=n[2],i[7]=n[3],i},cn.getTranslation=function(i,n){var a=n[4],c=n[5],d=n[6],m=n[7],y=-n[0],b=-n[1],S=-n[2],T=n[3];return i[0]=2*(a*T+m*y+c*S-d*b),i[1]=2*(c*T+m*b+d*y-a*S),i[2]=2*(d*T+m*S+a*b-c*y),i},cn.translate=function(i,n,a){var c=n[0],d=n[1],m=n[2],y=n[3],b=.5*a[0],S=.5*a[1],T=.5*a[2],D=n[4],O=n[5],z=n[6],$=n[7];return i[0]=c,i[1]=d,i[2]=m,i[3]=y,i[4]=y*b+d*T-m*S+D,i[5]=y*S+m*b-c*T+O,i[6]=y*T+c*S-d*b+z,i[7]=-c*b-d*S-m*T+$,i},cn.rotateX=function(i,n,a){var c=-n[0],d=-n[1],m=-n[2],y=n[3],b=n[4],S=n[5],T=n[6],D=n[7],O=b*y+D*c+S*m-T*d,z=S*y+D*d+T*c-b*m,$=T*y+D*m+b*d-S*c,G=D*y-b*c-S*d-T*m;return Jc.rotateX(i,n,a),i[4]=O*(y=i[3])+G*(c=i[0])+z*(m=i[2])-$*(d=i[1]),i[5]=z*y+G*d+$*c-O*m,i[6]=$*y+G*m+O*d-z*c,i[7]=G*y-O*c-z*d-$*m,i},cn.rotateY=function(i,n,a){var c=-n[0],d=-n[1],m=-n[2],y=n[3],b=n[4],S=n[5],T=n[6],D=n[7],O=b*y+D*c+S*m-T*d,z=S*y+D*d+T*c-b*m,$=T*y+D*m+b*d-S*c,G=D*y-b*c-S*d-T*m;return Jc.rotateY(i,n,a),i[4]=O*(y=i[3])+G*(c=i[0])+z*(m=i[2])-$*(d=i[1]),i[5]=z*y+G*d+$*c-O*m,i[6]=$*y+G*m+O*d-z*c,i[7]=G*y-O*c-z*d-$*m,i},cn.rotateZ=function(i,n,a){var c=-n[0],d=-n[1],m=-n[2],y=n[3],b=n[4],S=n[5],T=n[6],D=n[7],O=b*y+D*c+S*m-T*d,z=S*y+D*d+T*c-b*m,$=T*y+D*m+b*d-S*c,G=D*y-b*c-S*d-T*m;return Jc.rotateZ(i,n,a),i[4]=O*(y=i[3])+G*(c=i[0])+z*(m=i[2])-$*(d=i[1]),i[5]=z*y+G*d+$*c-O*m,i[6]=$*y+G*m+O*d-z*c,i[7]=G*y-O*c-z*d-$*m,i},cn.rotateByQuatAppend=function(i,n,a){var c=a[0],d=a[1],m=a[2],y=a[3],b=n[0],S=n[1],T=n[2],D=n[3];return i[0]=b*y+D*c+S*m-T*d,i[1]=S*y+D*d+T*c-b*m,i[2]=T*y+D*m+b*d-S*c,i[3]=D*y-b*c-S*d-T*m,i[4]=(b=n[4])*y+(D=n[7])*c+(S=n[5])*m-(T=n[6])*d,i[5]=S*y+D*d+T*c-b*m,i[6]=T*y+D*m+b*d-S*c,i[7]=D*y-b*c-S*d-T*m,i},cn.rotateByQuatPrepend=function(i,n,a){var c=n[0],d=n[1],m=n[2],y=n[3],b=a[0],S=a[1],T=a[2],D=a[3];return i[0]=c*D+y*b+d*T-m*S,i[1]=d*D+y*S+m*b-c*T,i[2]=m*D+y*T+c*S-d*b,i[3]=y*D-c*b-d*S-m*T,i[4]=c*(D=a[7])+y*(b=a[4])+d*(T=a[6])-m*(S=a[5]),i[5]=d*D+y*S+m*b-c*T,i[6]=m*D+y*T+c*S-d*b,i[7]=y*D-c*b-d*S-m*T,i},cn.rotateAroundAxis=function(i,n,a,c){if(Math.abs(c)<es.EPSILON)return XL(i,n);var d=Math.hypot(a[0],a[1],a[2]);c*=.5;var m=Math.sin(c),y=m*a[0]/d,b=m*a[1]/d,S=m*a[2]/d,T=Math.cos(c),D=n[0],O=n[1],z=n[2],$=n[3];i[0]=D*T+$*y+O*S-z*b,i[1]=O*T+$*b+z*y-D*S,i[2]=z*T+$*S+D*b-O*y,i[3]=$*T-D*y-O*b-z*S;var G=n[4],q=n[5],re=n[6],ie=n[7];return i[4]=G*T+ie*y+q*S-re*b,i[5]=q*T+ie*b+re*y-G*S,i[6]=re*T+ie*S+G*b-q*y,i[7]=ie*T-G*y-q*b-re*S,i},cn.add=function(i,n,a){return i[0]=n[0]+a[0],i[1]=n[1]+a[1],i[2]=n[2]+a[2],i[3]=n[3]+a[3],i[4]=n[4]+a[4],i[5]=n[5]+a[5],i[6]=n[6]+a[6],i[7]=n[7]+a[7],i},cn.multiply=YL,cn.scale=function(i,n,a){return i[0]=n[0]*a,i[1]=n[1]*a,i[2]=n[2]*a,i[3]=n[3]*a,i[4]=n[4]*a,i[5]=n[5]*a,i[6]=n[6]*a,i[7]=n[7]*a,i},cn.lerp=function(i,n,a,c){var d=1-c;return JL(n,a)<0&&(c=-c),i[0]=n[0]*d+a[0]*c,i[1]=n[1]*d+a[1]*c,i[2]=n[2]*d+a[2]*c,i[3]=n[3]*d+a[3]*c,i[4]=n[4]*d+a[4]*c,i[5]=n[5]*d+a[5]*c,i[6]=n[6]*d+a[6]*c,i[7]=n[7]*d+a[7]*c,i},cn.invert=function(i,n){var a=w1(n);return i[0]=-n[0]/a,i[1]=-n[1]/a,i[2]=-n[2]/a,i[3]=n[3]/a,i[4]=-n[4]/a,i[5]=-n[5]/a,i[6]=-n[6]/a,i[7]=n[7]/a,i},cn.conjugate=function(i,n){return i[0]=-n[0],i[1]=-n[1],i[2]=-n[2],i[3]=n[3],i[4]=-n[4],i[5]=-n[5],i[6]=-n[6],i[7]=n[7],i},cn.normalize=function(i,n){var a=w1(n);if(a>0){a=Math.sqrt(a);var c=n[0]/a,d=n[1]/a,m=n[2]/a,y=n[3]/a,b=n[4],S=n[5],T=n[6],D=n[7],O=c*b+d*S+m*T+y*D;i[0]=c,i[1]=d,i[2]=m,i[3]=y,i[4]=(b-c*O)/a,i[5]=(S-d*O)/a,i[6]=(T-m*O)/a,i[7]=(D-y*O)/a}return i},cn.str=function(i){return"quat2("+i[0]+", "+i[1]+", "+i[2]+", "+i[3]+", "+i[4]+", "+i[5]+", "+i[6]+", "+i[7]+")"},cn.exactEquals=function(i,n){return i[0]===n[0]&&i[1]===n[1]&&i[2]===n[2]&&i[3]===n[3]&&i[4]===n[4]&&i[5]===n[5]&&i[6]===n[6]&&i[7]===n[7]},cn.equals=function(i,n){var a=i[0],c=i[1],d=i[2],m=i[3],y=i[4],b=i[5],S=i[6],T=i[7],D=n[0],O=n[1],z=n[2],$=n[3],G=n[4],q=n[5],re=n[6],ie=n[7];return Math.abs(a-D)<=es.EPSILON*Math.max(1,Math.abs(a),Math.abs(D))&&Math.abs(c-O)<=es.EPSILON*Math.max(1,Math.abs(c),Math.abs(O))&&Math.abs(d-z)<=es.EPSILON*Math.max(1,Math.abs(d),Math.abs(z))&&Math.abs(m-$)<=es.EPSILON*Math.max(1,Math.abs(m),Math.abs($))&&Math.abs(y-G)<=es.EPSILON*Math.max(1,Math.abs(y),Math.abs(G))&&Math.abs(b-q)<=es.EPSILON*Math.max(1,Math.abs(b),Math.abs(q))&&Math.abs(S-re)<=es.EPSILON*Math.max(1,Math.abs(S),Math.abs(re))&&Math.abs(T-ie)<=es.EPSILON*Math.max(1,Math.abs(T),Math.abs(ie))},cn.sqrLen=cn.squaredLength=cn.len=cn.length=cn.dot=cn.mul=cn.setReal=cn.getReal=void 0;var es=aT(bo),Jc=aT(Ir),ZL=aT(Fr);function qL(i){if(typeof WeakMap!="function")return null;var n=new WeakMap,a=new WeakMap;return(qL=function(c){return c?a:n})(i)}function aT(i,n){if(!n&&i&&i.__esModule)return i;if(i===null||oT(i)!=="object"&&typeof i!="function")return{default:i};var a=qL(n);if(a&&a.has(i))return a.get(i);var c={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in i)if(m!=="default"&&Object.prototype.hasOwnProperty.call(i,m)){var y=d?Object.getOwnPropertyDescriptor(i,m):null;y&&(y.get||y.set)?Object.defineProperty(c,m,y):c[m]=i[m]}return c.default=i,a&&a.set(i,c),c}function KL(i,n,a){var c=.5*a[0],d=.5*a[1],m=.5*a[2],y=n[0],b=n[1],S=n[2],T=n[3];return i[0]=y,i[1]=b,i[2]=S,i[3]=T,i[4]=c*T+d*S-m*b,i[5]=d*T+m*y-c*S,i[6]=m*T+c*b-d*y,i[7]=-c*y-d*b-m*S,i}function XL(i,n){return i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],i[4]=n[4],i[5]=n[5],i[6]=n[6],i[7]=n[7],i}function YL(i,n,a){var c=n[0],d=n[1],m=n[2],y=n[3],b=a[4],S=a[5],T=a[6],D=a[7],O=n[4],z=n[5],$=n[6],G=n[7],q=a[0],re=a[1],ie=a[2],fe=a[3];return i[0]=c*fe+y*q+d*ie-m*re,i[1]=d*fe+y*re+m*q-c*ie,i[2]=m*fe+y*ie+c*re-d*q,i[3]=y*fe-c*q-d*re-m*ie,i[4]=c*D+y*b+d*T-m*S+O*fe+G*q+z*ie-$*re,i[5]=d*D+y*S+m*b-c*T+z*fe+G*re+$*q-O*ie,i[6]=m*D+y*T+c*S-d*b+$*fe+G*ie+O*re-z*q,i[7]=y*D-c*b-d*S-m*T+G*fe-O*q-z*re-$*ie,i}cn.getReal=Jc.copy,cn.setReal=Jc.copy,cn.mul=YL;var JL=Jc.dot;cn.dot=JL;var QL=Jc.length;cn.length=QL,cn.len=QL;var w1=Jc.squaredLength;cn.squaredLength=w1,cn.sqrLen=w1;var Kr={};function sT(i){return sT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},sT(i)}Object.defineProperty(Kr,"__esModule",{value:!0}),Kr.create=tR,Kr.clone=function(i){var n=new tp.ARRAY_TYPE(2);return n[0]=i[0],n[1]=i[1],n},Kr.fromValues=function(i,n){var a=new tp.ARRAY_TYPE(2);return a[0]=i,a[1]=n,a},Kr.copy=function(i,n){return i[0]=n[0],i[1]=n[1],i},Kr.set=function(i,n,a){return i[0]=n,i[1]=a,i},Kr.add=function(i,n,a){return i[0]=n[0]+a[0],i[1]=n[1]+a[1],i},Kr.subtract=rR,Kr.multiply=nR,Kr.divide=iR,Kr.ceil=function(i,n){return i[0]=Math.ceil(n[0]),i[1]=Math.ceil(n[1]),i},Kr.floor=function(i,n){return i[0]=Math.floor(n[0]),i[1]=Math.floor(n[1]),i},Kr.min=function(i,n,a){return i[0]=Math.min(n[0],a[0]),i[1]=Math.min(n[1],a[1]),i},Kr.max=function(i,n,a){return i[0]=Math.max(n[0],a[0]),i[1]=Math.max(n[1],a[1]),i},Kr.round=function(i,n){return i[0]=Math.round(n[0]),i[1]=Math.round(n[1]),i},Kr.scale=function(i,n,a){return i[0]=n[0]*a,i[1]=n[1]*a,i},Kr.scaleAndAdd=function(i,n,a,c){return i[0]=n[0]+a[0]*c,i[1]=n[1]+a[1]*c,i},Kr.distance=oR,Kr.squaredDistance=aR,Kr.length=sR,Kr.squaredLength=lR,Kr.negate=function(i,n){return i[0]=-n[0],i[1]=-n[1],i},Kr.inverse=function(i,n){return i[0]=1/n[0],i[1]=1/n[1],i},Kr.normalize=function(i,n){var a=n[0],c=n[1],d=a*a+c*c;return d>0&&(d=1/Math.sqrt(d)),i[0]=n[0]*d,i[1]=n[1]*d,i},Kr.dot=function(i,n){return i[0]*n[0]+i[1]*n[1]},Kr.cross=function(i,n,a){var c=n[0]*a[1]-n[1]*a[0];return i[0]=i[1]=0,i[2]=c,i},Kr.lerp=function(i,n,a,c){var d=n[0],m=n[1];return i[0]=d+c*(a[0]-d),i[1]=m+c*(a[1]-m),i},Kr.random=function(i,n){n=n||1;var a=2*tp.RANDOM()*Math.PI;return i[0]=Math.cos(a)*n,i[1]=Math.sin(a)*n,i},Kr.transformMat2=function(i,n,a){var c=n[0],d=n[1];return i[0]=a[0]*c+a[2]*d,i[1]=a[1]*c+a[3]*d,i},Kr.transformMat2d=function(i,n,a){var c=n[0],d=n[1];return i[0]=a[0]*c+a[2]*d+a[4],i[1]=a[1]*c+a[3]*d+a[5],i},Kr.transformMat3=function(i,n,a){var c=n[0],d=n[1];return i[0]=a[0]*c+a[3]*d+a[6],i[1]=a[1]*c+a[4]*d+a[7],i},Kr.transformMat4=function(i,n,a){var c=n[0],d=n[1];return i[0]=a[0]*c+a[4]*d+a[12],i[1]=a[1]*c+a[5]*d+a[13],i},Kr.rotate=function(i,n,a,c){var d=n[0]-a[0],m=n[1]-a[1],y=Math.sin(c),b=Math.cos(c);return i[0]=d*b-m*y+a[0],i[1]=d*y+m*b+a[1],i},Kr.angle=function(i,n){var a=i[0],c=i[1],d=n[0],m=n[1],y=Math.sqrt(a*a+c*c)*Math.sqrt(d*d+m*m);return Math.acos(Math.min(Math.max(y&&(a*d+c*m)/y,-1),1))},Kr.zero=function(i){return i[0]=0,i[1]=0,i},Kr.str=function(i){return"vec2("+i[0]+", "+i[1]+")"},Kr.exactEquals=function(i,n){return i[0]===n[0]&&i[1]===n[1]},Kr.equals=function(i,n){var a=i[0],c=i[1],d=n[0],m=n[1];return Math.abs(a-d)<=tp.EPSILON*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(c-m)<=tp.EPSILON*Math.max(1,Math.abs(c),Math.abs(m))},Kr.forEach=Kr.sqrLen=Kr.sqrDist=Kr.dist=Kr.div=Kr.mul=Kr.sub=Kr.len=void 0;var tp=function(i,n){if(i&&i.__esModule)return i;if(i===null||sT(i)!=="object"&&typeof i!="function")return{default:i};var a=eR(void 0);if(a&&a.has(i))return a.get(i);var c={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in i)if(m!=="default"&&Object.prototype.hasOwnProperty.call(i,m)){var y=d?Object.getOwnPropertyDescriptor(i,m):null;y&&(y.get||y.set)?Object.defineProperty(c,m,y):c[m]=i[m]}return c.default=i,a&&a.set(i,c),c}(bo);function eR(i){if(typeof WeakMap!="function")return null;var n=new WeakMap,a=new WeakMap;return(eR=function(c){return c?a:n})(i)}function tR(){var i=new tp.ARRAY_TYPE(2);return tp.ARRAY_TYPE!=Float32Array&&(i[0]=0,i[1]=0),i}function rR(i,n,a){return i[0]=n[0]-a[0],i[1]=n[1]-a[1],i}function nR(i,n,a){return i[0]=n[0]*a[0],i[1]=n[1]*a[1],i}function iR(i,n,a){return i[0]=n[0]/a[0],i[1]=n[1]/a[1],i}function oR(i,n){return Math.hypot(n[0]-i[0],n[1]-i[1])}function aR(i,n){var a=n[0]-i[0],c=n[1]-i[1];return a*a+c*c}function sR(i){return Math.hypot(i[0],i[1])}function lR(i){var n=i[0],a=i[1];return n*n+a*a}Kr.len=sR,Kr.sub=rR,Kr.mul=nR,Kr.div=iR,Kr.dist=oR,Kr.sqrDist=aR,Kr.sqrLen=lR;var fK=function(){var i=tR();return function(n,a,c,d,m,y){var b,S;for(a||(a=2),c||(c=0),S=d?Math.min(d*a+c,n.length):n.length,b=c;b<S;b+=a)i[0]=n[b],i[1]=n[b+1],m(i,i,y),n[b]=i[0],n[b+1]=i[1];return n}}();function lT(i){return lT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},lT(i)}Kr.forEach=fK,Object.defineProperty(xo,"__esModule",{value:!0}),s.a7=xo.vec4=s.N=xo.vec3=xo.vec2=xo.quat2=s.bi=xo.quat=s.a6=xo.mat4=s.co=xo.mat3=xo.mat2d=s.b4=xo.mat2=xo.glMatrix=void 0;var dK=ic(bo);xo.glMatrix=dK;var pK=ic(_i);s.b4=xo.mat2=pK;var mK=ic(Bi);xo.mat2d=mK;var gK=ic(Vn);s.co=xo.mat3=gK;var _K=ic(Fr);s.a6=xo.mat4=_K;var yK=ic(Ir);s.bi=xo.quat=yK;var vK=ic(cn);xo.quat2=vK;var BK=ic(Kr);xo.vec2=BK;var xK=ic(Rr);s.N=xo.vec3=xK;var bK=ic(on);function uR(i){if(typeof WeakMap!="function")return null;var n=new WeakMap,a=new WeakMap;return(uR=function(c){return c?a:n})(i)}function ic(i,n){if(!n&&i&&i.__esModule)return i;if(i===null||lT(i)!=="object"&&typeof i!="function")return{default:i};var a=uR(n);if(a&&a.has(i))return a.get(i);var c={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in i)if(m!=="default"&&Object.prototype.hasOwnProperty.call(i,m)){var y=d?Object.getOwnPropertyDescriptor(i,m):null;y&&(y.get||y.set)?Object.defineProperty(c,m,y):c[m]=i[m]}return c.default=i,a&&a.set(i,c),c}s.a7=xo.vec4=bK;class uT{constructor(n,a){this.pos=n,this.dir=a}intersectsPlane(n,a,c){const d=s.N.dot(a,this.dir);if(Math.abs(d)<1e-6)return!1;const m=((n[0]-this.pos[0])*a[0]+(n[1]-this.pos[1])*a[1]+(n[2]-this.pos[2])*a[2])/d;return c[0]=this.pos[0]+this.dir[0]*m,c[1]=this.pos[1]+this.dir[1]*m,c[2]=this.pos[2]+this.dir[2]*m,!0}closestPointOnSphere(n,a,c){if(s.N.equals(this.pos,n)||a===0)return c[0]=c[1]=c[2]=0,!1;const[d,m,y]=this.dir,b=this.pos[0]-n[0],S=this.pos[1]-n[1],T=this.pos[2]-n[2],D=d*d+m*m+y*y,O=2*(b*d+S*m+T*y),z=O*O-4*D*(b*b+S*S+T*T-a*a);if(z<0){const $=Math.max(-O/2,0),G=b+d*$,q=S+m*$,re=T+y*$,ie=Math.hypot(G,q,re);return c[0]=G*a/ie,c[1]=q*a/ie,c[2]=re*a/ie,!1}{const $=(-O-Math.sqrt(z))/(2*D);if($<0){const G=Math.hypot(b,S,T);return c[0]=b*a/G,c[1]=S*a/G,c[2]=T*a/G,!1}return c[0]=b+d*$,c[1]=S+m*$,c[2]=T+y*$,!0}}}class cT{constructor(n,a,c,d,m){this.TL=n,this.TR=a,this.BR=c,this.BL=d,this.horizon=m}static fromInvProjectionMatrix(n,a,c){const d=[-1,1,1],m=[1,1,1],y=[1,-1,1],b=[-1,-1,1],S=s.N.transformMat4(d,d,n),T=s.N.transformMat4(m,m,n),D=s.N.transformMat4(y,y,n),O=s.N.transformMat4(b,b,n);return new cT(S,T,D,O,a/c)}}function By(i,n,a){let c=1/0,d=-1/0;const m=[];for(const y of i){s.N.sub(m,y,n);const b=s.N.dot(m,a);c=Math.min(c,b),d=Math.max(d,b)}return[c,d]}function cR(i,n){let a=!0;for(let c=0;c<i.planes.length;c++){const d=i.planes[c];let m=0;for(let y=0;y<n.length;y++)m+=s.N.dot(d,n[y])+d[3]>=0;if(m===0)return 0;m!==n.length&&(a=!1)}return a?2:1}function hR(i,n){for(const a of i.projections){const c=By(n,i.points[0],a.axis);if(a.projection[1]<c[0]||a.projection[0]>c[1])return 0}return 1}function fR(i,n){let a=0;const c=[0,0,0,0];for(let d=0;d<i.length;d++)c[0]=i[d][0],c[1]=i[d][1],c[2]=i[d][2],c[3]=1,s.a7.dot(c,n)>=0&&a++;return a}class hT{constructor(n,a){this.points=n||new Array(8).fill([0,0,0]),this.planes=a||new Array(6).fill([0,0,0,0]),this.bounds=xi.fromPoints(this.points),this.projections=[],this.frustumEdges=[s.N.sub([],this.points[2],this.points[3]),s.N.sub([],this.points[0],this.points[3]),s.N.sub([],this.points[4],this.points[0]),s.N.sub([],this.points[5],this.points[1]),s.N.sub([],this.points[6],this.points[2]),s.N.sub([],this.points[7],this.points[3])];for(const c of this.frustumEdges){const d=[0,-c[2],c[1]],m=[c[2],0,-c[0]];this.projections.push({axis:d,projection:By(this.points,this.points[0],d)}),this.projections.push({axis:m,projection:By(this.points,this.points[0],m)})}}static fromInvProjectionMatrix(n,a,c,d){const m=Math.pow(2,c),y=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(T=>{const D=s.a7.transformMat4([],T,n),O=1/D[3]/a*m;return s.a7.mul(D,D,[O,O,d?1/D[3]:O,O])}),b=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(T=>{const D=s.N.sub([],y[T[0]],y[T[1]]),O=s.N.sub([],y[T[2]],y[T[1]]),z=s.N.normalize([],s.N.cross([],D,O)),$=-s.N.dot(z,y[T[1]]);return z.concat($)}),S=[];for(let T=0;T<y.length;T++)S.push([y[T][0],y[T][1],y[T][2]]);return new hT(S,b)}intersectsPrecise(n,a,c){for(let d=0;d<a.length;d++)if(!fR(n,a[d]))return 0;for(let d=0;d<this.planes.length;d++)if(!fR(n,this.planes[d]))return 0;for(const d of c)for(const m of this.frustumEdges){const y=s.N.cross([],d,m),b=s.N.length(y);if(b===0)continue;s.N.scale(y,y,1/b);const S=By(this.points,this.points[0],y),T=By(n,this.points[0],y);if(S[0]>T[1]||T[0]>S[1])return 0}return 1}}class xi{static fromPoints(n){const a=[1/0,1/0,1/0],c=[-1/0,-1/0,-1/0];for(const d of n)s.N.min(a,a,d),s.N.max(c,c,d);return new xi(a,c)}static fromTileIdAndHeight(n,a,c){const d=1<<n.canonical.z,m=n.canonical.x,y=n.canonical.y;return new xi([m/d,y/d,a],[(m+1)/d,(y+1)/d,c])}static applyTransform(n,a){const c=n.getCorners();for(let d=0;d<c.length;++d)s.N.transformMat4(c[d],c[d],a);return xi.fromPoints(c)}static projectAabbCorners(n,a){const c=n.getCorners();for(let d=0;d<c.length;++d)s.N.transformMat4(c[d],c[d],a);return c}constructor(n,a){this.min=n,this.max=a,this.center=s.N.scale([],s.N.add([],this.min,this.max),.5)}quadrant(n){const a=[n%2==0,n<2],c=s.N.clone(this.min),d=s.N.clone(this.max);for(let m=0;m<a.length;m++)c[m]=a[m]?this.min[m]:this.center[m],d[m]=a[m]?this.center[m]:this.max[m];return d[2]=this.max[2],new xi(c,d)}distanceX(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]}distanceY(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]}distanceZ(n){return Math.max(Math.min(this.max[2],n[2]),this.min[2])-n[2]}getCorners(){const n=this.min,a=this.max;return[[n[0],n[1],n[2]],[a[0],n[1],n[2]],[a[0],a[1],n[2]],[n[0],a[1],n[2]],[n[0],n[1],a[2]],[a[0],n[1],a[2]],[a[0],a[1],a[2]],[n[0],a[1],a[2]]]}intersects(n){return this.intersectsAabb(n.bounds)?cR(n,this.getCorners()):0}intersectsFlat(n){return this.intersectsAabb(n.bounds)?cR(n,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsPrecise(n,a){return a||this.intersects(n)?hR(n,this.getCorners()):0}intersectsPreciseFlat(n,a){return a||this.intersectsFlat(n)?hR(n,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsAabb(n){for(let a=0;a<3;++a)if(this.min[a]>n.max[a]||n.min[a]>this.max[a])return!1;return!0}intersectsAabbXY(n){return!(this.min[0]>n.max[0]||n.min[0]>this.max[0]||this.min[1]>n.max[1]||n.min[1]>this.max[1])}encapsulate(n){for(let a=0;a<3;a++)this.min[a]=Math.min(this.min[a],n.min[a]),this.max[a]=Math.max(this.max[a],n.max[a])}encapsulatePoint(n){for(let a=0;a<3;a++)this.min[a]=Math.min(this.min[a],n[a]),this.max[a]=Math.max(this.max[a],n[a])}closestPoint(n){return[Math.max(Math.min(this.max[0],n[0]),this.min[0]),Math.max(Math.min(this.max[1],n[1]),this.min[1]),Math.max(Math.min(this.max[2],n[2]),this.min[2])]}}Kt(xi,"Aabb");const CK=Mn([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:S1}=CK,wK=Mn([{name:"a_pos_3",components:3,type:"Int16"}]);var dR=Mn([{name:"a_pos",type:"Int16",components:2}]);function T1(i){return i*de/rt}const SK=[new xi([Re,Re,Re],[Xe,Xe,Xe]),new xi([Re,Re,Re],[0,0,Xe]),new xi([0,Re,Re],[Xe,0,Xe]),new xi([Re,0,Re],[0,Xe,Xe]),new xi([0,0,Re],[Xe,Xe,Xe])];function pR(i,n,a,c=!0){const d=s.N.scale([],i._camera.position,i.worldSize),m=[n,a,1,1];s.a7.transformMat4(m,m,i.pixelMatrixInverse),s.a7.scale(m,m,1/m[3]);const y=s.N.sub([],m,d),b=s.N.normalize([],y),S=i.globeMatrix,T=[S[12],S[13],S[14]],D=s.N.sub([],T,d),O=s.N.length(D),z=s.N.normalize([],D),$=i.worldSize/(2*Math.PI),G=s.N.dot(z,b),q=Math.asin($/O);if(q<Math.acos(G)){if(!c)return null;const He=[],st=[];s.N.scale(He,b,O/G),s.N.normalize(st,s.N.sub(st,He,D)),s.N.normalize(b,s.N.add(b,D,s.N.scale(b,st,Math.tan(q)*O)))}const re=[];new uT(d,b).closestPointOnSphere(T,$,re);const ie=s.N.normalize([],we(S,0)),fe=s.N.normalize([],we(S,1)),_e=s.N.normalize([],we(S,2)),ge=s.N.dot(ie,re),Se=s.N.dot(fe,re),be=s.N.dot(_e,re),Me=ct(Math.asin(-Se/$));let Ne=ct(Math.atan2(ge,be));Ne=i.center.lng+function(He,st){const yt=(st-He+180)%360-180;return yt<-180?yt+360:yt}(i.center.lng,Ne);const Ge=Lr(Ne),Ye=Le(Cr(Me),0,1);return new fn(Ge,Ye)}class TK{constructor(n,a,c){this.a=s.N.sub([],n,c),this.b=s.N.sub([],a,c),this.center=c;const d=s.N.normalize([],this.a),m=s.N.normalize([],this.b);this.angle=Math.acos(s.N.dot(d,m))}}function fT(i,n){if(i.angle===0)return null;let a;return a=i.a[n]===0?1/i.angle*.5*Math.PI:1/i.angle*Math.atan(i.b[n]/i.a[n]/Math.sin(i.angle)-1/Math.tan(i.angle)),a<0||a>1?null:function(c,d,m,y){const b=Math.sin(m);return c*(Math.sin((1-y)*m)/b)+d*(Math.sin(y*m)/b)}(i.a[n],i.b[n],i.angle,Le(a,0,1))+i.center[n]}function oc(i){if(i.z<=1)return SK[i.z+2*i.y+i.x];const n=dT(A1(i));return xi.fromPoints(n)}function Qc(i,n,a){return s.N.scale(i,i,1-a),s.N.scaleAndAdd(i,i,n,a)}function mR(i,n,a){for(const c of i)s.N.transformMat4(c,c,n),s.N.scale(c,c,a)}function gR(i,n,a,c){const d=n/i.worldSize,m=i.globeMatrix;if(a.z<=1){const Ge=oc(a).getCorners();return mR(Ge,m,d),xi.fromPoints(Ge)}const y=A1(a,c),b=dT(y,de+T1(i._tileCoverLift));mR(b,m,d);const S=Number.MAX_VALUE,T=[-S,-S,-S],D=[S,S,S];if(y.contains(i.center)){for(const He of b)s.N.min(D,D,He),s.N.max(T,T,He);T[2]=0;const Ge=i.point,Ye=[Ge.x*d,Ge.y*d,0];return s.N.min(D,D,Ye),s.N.max(T,T,Ye),new xi(D,T)}if(i._tileCoverLift>0){for(const Ge of b)s.N.min(D,D,Ge),s.N.max(T,T,Ge);return new xi(D,T)}const O=[m[12]*d,m[13]*d,m[14]*d],z=y.getCenter(),$=Le(i.center.lat,-Yr,Yr),G=Le(z.lat,-Yr,Yr),q=Lr(i.center.lng),re=Cr($);let ie=q-Lr(z.lng);const fe=re-Cr(G);ie>.5?ie-=1:ie<-.5&&(ie+=1);let _e=0;if(Math.abs(ie)>Math.abs(fe))_e=ie>=0?1:3;else{_e=fe>=0?0:2;const Ge=[m[4]*d,m[5]*d,m[6]*d],Ye=-Math.sin(Oe(fe>=0?y.getSouth():y.getNorth()))*de;s.N.scaleAndAdd(O,O,Ge,Ye)}const ge=b[_e],Se=b[(_e+1)%4],be=new TK(ge,Se,O),Me=[fT(be,0)||ge[0],fT(be,1)||ge[1],fT(be,2)||ge[2]],Ne=sf(i.zoom);if(Ne>0){const Ge=function({x:He,y:st,z:yt},nt,mt,tt,pt){const Lt=1/(1<<yt);let vt=He*Lt,Jt=vt+Lt,Zt=st*Lt,Ct=Zt+Lt,vr=0;const ar=(vt+Jt)/2-tt;return ar>.5?vr=-1:ar<-.5&&(vr=1),vt=((vt+vr)*nt-(tt*=nt))*mt+tt,Jt=((Jt+vr)*nt-tt)*mt+tt,Zt=(Zt*nt-(pt*=nt))*mt+pt,Ct=(Ct*nt-pt)*mt+pt,[[vt,Ct,0],[Jt,Ct,0],[Jt,Zt,0],[vt,Zt,0]]}(a,n,i._pixelsPerMercatorPixel,q,re);for(let He=0;He<b.length;He++)Qc(b[He],Ge[He],Ne);const Ye=s.N.add([],Ge[_e],Ge[(_e+1)%4]);s.N.scale(Ye,Ye,.5),Qc(Me,Ye,Ne)}for(const Ge of b)s.N.min(D,D,Ge),s.N.max(T,T,Ge);return D[2]=Math.min(ge[2],Se[2]),s.N.min(D,D,Me),s.N.max(T,T,Me),new xi(D,T)}function A1({x:i,y:n,z:a},c=!1){const d=1/(1<<a),m=new Ve(Dr(i*d),n===(1<<a)-1&&c?-90:un((n+1)*d)),y=new Ve(Dr((i+1)*d),n===0&&c?90:un(n*d));return new et(m,y)}function dT(i,n=de){const a=Oe(i.getNorth()),c=Oe(i.getSouth()),d=Math.cos(a),m=Math.cos(c),y=Math.sin(a),b=Math.sin(c),S=i.getWest(),T=i.getEast();return[Fe(m,b,S,n),Fe(m,b,T,n),Fe(d,y,T,n),Fe(d,y,S,n)]}function xy(i,n,a,c){const d=1<<a.z,m=(i/Ut+a.x)/d;return it(un((n/Ut+a.y)/d),Dr(m),c)}function E1({min:i,max:n}){return xe/Math.max(n[0]-i[0],n[1]-i[1],n[2]-i[2])}const _R=new Float64Array(16);function D1(i){const n=E1(i),a=s.a6.fromScaling(_R,[n,n,n]);return s.a6.translate(a,a,s.N.negate([],i.min))}function pT(i){const n=s.a6.fromTranslation(_R,i.min),a=1/E1(i);return s.a6.scale(n,n,[a,a,a])}function mT(i){const n=Ut/(2*Math.PI);return i/(2*Math.PI)/n}function yR(i,n){return Ut/(512*Math.pow(2,i))*E1(oc(n))}function vR(i,n,a,c,d){const m=mT(a),y=[i,n,-a/(2*Math.PI)],b=s.a6.identity(new Float64Array(16));return s.a6.translate(b,b,y),s.a6.scale(b,b,[m,m,m]),s.a6.rotateX(b,b,Oe(-d)),s.a6.rotateY(b,b,Oe(-c)),b}function sf(i){return Nt(ve,ce,i)}function BR(i,n){const a=it(n.lat,n.lng),c=function(m){const y=it(m._center.lat,m._center.lng),b=s.N.fromValues(0,1,0);let S=s.N.cross([],b,y);const T=s.a6.fromRotation([],-m.angle,y);S=s.N.transformMat4(S,S,T),s.a6.fromRotation(T,-m._pitch,S);const D=s.N.normalize([],y);return s.N.scale(D,D,T1(m.cameraToCenterDistance/m.pixelsPerMeter)),s.N.transformMat4(D,D,T),s.N.add([],y,D)}(i),d=s.N.subtract([],c,a);return s.N.angle(d,a)}function gT(i,n){return BR(i,n)>Math.PI/2*1.01}const xR=Oe(85),AK=Math.cos(xR),EK=Math.sin(xR),DK=s.a6.create(),bR=i=>{const n=[];return i.paint.get("circle-pitch-alignment")==="map"&&n.push("PITCH_WITH_MAP"),i.paint.get("circle-pitch-scale")==="map"&&n.push("SCALE_WITH_MAP"),n};function CR(i,n,a,c,d,m,y,b,S){if(m&&i.queryGeometry.isAboveHorizon)return!1;m&&(S*=i.pixelToTileUnitsFactor);const T=i.tileID.canonical,D=a.projection.upVectorScale(T,a.center.lat,a.worldSize).metersToTile;for(const O of n)for(const z of O){const $=z.add(b),G=d&&a.elevation?a.elevation.exaggeration()*d.getElevationAt($.x,$.y,!0):0,q=a.projection.projectTilePoint($.x,$.y,T);if(G>0){const _e=a.projection.upVector(T,$.x,$.y);q.x+=_e[0]*D*G,q.y+=_e[1]*D*G,q.z+=_e[2]*D*G}const re=m?$:PK(q.x,q.y,q.z,c),ie=m?i.tilespaceRays.map(_e=>IK(_e,G)):i.queryGeometry.screenGeometry,fe=s.a7.transformMat4([],[q.x,q.y,q.z,1],c);if(!y&&m?S*=fe[3]/a.cameraToCenterDistance:y&&!m&&(S*=a.cameraToCenterDistance/fe[3]),m){const _e=un((z.y/Ut+T.y)/(1<<T.z));S/=a.projection.pixelsPerMeter(_e,1)/Pr(1,_e)}if(rc(ie,re,S))return!0}return!1}function PK(i,n,a,c){const d=s.a7.transformMat4([],[i,n,a,1],c);return new De(d[0]/d[3],d[1]/d[3])}const wR=s.N.fromValues(0,0,0),MK=s.N.fromValues(0,0,1);function IK(i,n){const a=s.N.create();return wR[2]=n,i.intersectsPlane(wR,MK,a),new De(a[0],a[1])}class SR extends Ra{}function TR(i,{width:n,height:a},c,d){if(d){if(d instanceof Uint8ClampedArray)d=new Uint8Array(d.buffer);else if(d.length!==n*a*c)throw new RangeError("mismatched image size")}else d=new Uint8Array(n*a*c);return i.width=n,i.height=a,i.data=d,i}function AR(i,n,a){const{width:c,height:d}=n;c===i.width&&d===i.height||(_T(i,n,{x:0,y:0},{x:0,y:0},{width:Math.min(i.width,c),height:Math.min(i.height,d)},a),i.width=c,i.height=d,i.data=n.data)}function _T(i,n,a,c,d,m,y){if(d.width===0||d.height===0)return n;if(d.width>i.width||d.height>i.height||a.x>i.width-d.width||a.y>i.height-d.height)throw new RangeError("out of range source coordinates for image copy");if(d.width>n.width||d.height>n.height||c.x>n.width-d.width||c.y>n.height-d.height)throw new RangeError("out of range destination coordinates for image copy");const b=i.data,S=n.data,T=m===4&&y;for(let D=0;D<d.height;D++){const O=((a.y+D)*i.width+a.x)*m,z=((c.y+D)*n.width+c.x)*m;if(T)for(let $=0;$<d.width;$++){const G=O+$*m+3,q=z+$*m;S[q+0]=255,S[q+1]=255,S[q+2]=255,S[q+3]=b[G]}else for(let $=0;$<d.width*m;$++)S[z+$]=b[O+$]}return n}Kt(SR,"HeatmapBucket",{omit:["layers"]});class lf{constructor(n,a){TR(this,n,1,a)}resize(n){AR(this,new lf(n),1)}clone(){return new lf({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,a,c,d,m){_T(n,a,c,d,m,1)}}class Gs{constructor(n,a){TR(this,n,4,a)}resize(n){AR(this,new Gs(n),4)}replace(n,a){a?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new Gs({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,a,c,d,m,y){_T(n,a,c,d,m,4,y)}}class ER{constructor(n,a){this.width=n.width,this.height=n.height,this.data=a instanceof Uint8Array?new Float32Array(a.buffer):a}}Kt(lf,"AlphaImage"),Kt(Gs,"RGBAImage");const OK=new mi({visibility:new Ot(Ke.layout_heatmap.visibility)});var kK={paint:new mi({"heatmap-radius":new pr(Ke.paint_heatmap["heatmap-radius"]),"heatmap-weight":new pr(Ke.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ot(Ke.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Wc(Ke.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ot(Ke.paint_heatmap["heatmap-opacity"])}),layout:OK};function by(i){const n={},a=i.resolution||256,c=i.clips?i.clips.length:1,d=i.image||new Gs({width:a,height:c}),m=(y,b,S)=>{n[i.evaluationKey]=S;const T=i.expression.evaluate(n);T&&(d.data[y+b+0]=Math.floor(255*T.r/T.a),d.data[y+b+1]=Math.floor(255*T.g/T.a),d.data[y+b+2]=Math.floor(255*T.b/T.a),d.data[y+b+3]=Math.floor(255*T.a))};if(i.clips)for(let y=0,b=0;y<c;++y,b+=4*a)for(let S=0,T=0;S<a;S++,T+=4){const D=S/(a-1),{start:O,end:z}=i.clips[y];m(b,T,O*(1-D)+z*D)}else for(let y=0,b=0;y<a;y++,b+=4)m(0,b,y/(a-1));return d}const LK=new mi({visibility:new Ot(Ke.layout_hillshade.visibility)});var RK={paint:new mi({"hillshade-illumination-direction":new Ot(Ke.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ot(Ke.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ot(Ke.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ot(Ke.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ot(Ke.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ot(Ke.paint_hillshade["hillshade-accent-color"]),"hillshade-emissive-strength":new Ot(Ke.paint_hillshade["hillshade-emissive-strength"])}),layout:LK};const zK=Mn([{name:"a_pos",components:2,type:"Int16"}],4),{members:NK}=zK;var yT={exports:{}};function P1(i,n,a){a=a||2;var c,d,m,y,b,S,T,D=n&&n.length,O=D?n[0]*a:i.length,z=DR(i,0,O,a,!0),$=[];if(!z||z.next===z.prev)return $;if(D&&(z=function(q,re,ie,fe){var _e,ge,Se,be=[];for(_e=0,ge=re.length;_e<ge;_e++)(Se=DR(q,re[_e]*fe,_e<ge-1?re[_e+1]*fe:q.length,fe,!1))===Se.next&&(Se.steiner=!0),be.push(WK(Se));for(be.sort(VK),_e=0;_e<be.length;_e++)ie=GK(be[_e],ie);return ie}(i,n,z,a)),i.length>80*a){c=m=i[0],d=y=i[1];for(var G=a;G<O;G+=a)(b=i[G])<c&&(c=b),(S=i[G+1])<d&&(d=S),b>m&&(m=b),S>y&&(y=S);T=(T=Math.max(m-c,y-d))!==0?32767/T:0}return Cy(z,$,a,c,d,T,0),$}function DR(i,n,a,c,d){var m,y;if(d===xT(i,n,a,c)>0)for(m=n;m<a;m+=c)y=IR(m,i[m],i[m+1],y);else for(m=a-c;m>=n;m-=c)y=IR(m,i[m],i[m+1],y);return y&&M1(y,y.next)&&(Sy(y),y=y.next),y}function rp(i,n){if(!i)return i;n||(n=i);var a,c=i;do if(a=!1,c.steiner||!M1(c,c.next)&&oo(c.prev,c,c.next)!==0)c=c.next;else{if(Sy(c),(c=n=c.prev)===c.next)break;a=!0}while(a||c!==n);return n}function Cy(i,n,a,c,d,m,y){if(i){!y&&m&&function(D,O,z,$){var G=D;do G.z===0&&(G.z=vT(G.x,G.y,O,z,$)),G.prevZ=G.prev,G.nextZ=G.next,G=G.next;while(G!==D);G.prevZ.nextZ=null,G.prevZ=null,function(q){var re,ie,fe,_e,ge,Se,be,Me,Ne=1;do{for(ie=q,q=null,ge=null,Se=0;ie;){for(Se++,fe=ie,be=0,re=0;re<Ne&&(be++,fe=fe.nextZ);re++);for(Me=Ne;be>0||Me>0&&fe;)be!==0&&(Me===0||!fe||ie.z<=fe.z)?(_e=ie,ie=ie.nextZ,be--):(_e=fe,fe=fe.nextZ,Me--),ge?ge.nextZ=_e:q=_e,_e.prevZ=ge,ge=_e;ie=fe}ge.nextZ=null,Ne*=2}while(Se>1)}(G)}(i,c,d,m);for(var b,S,T=i;i.prev!==i.next;)if(b=i.prev,S=i.next,m?jK(i,c,d,m):FK(i))n.push(b.i/a|0),n.push(i.i/a|0),n.push(S.i/a|0),Sy(i),i=S.next,T=S.next;else if((i=S)===T){y?y===1?Cy(i=$K(rp(i),n,a),n,a,c,d,m,2):y===2&&UK(i,n,a,c,d,m):Cy(rp(i),n,a,c,d,m,1);break}}}function FK(i){var n=i.prev,a=i,c=i.next;if(oo(n,a,c)>=0)return!1;for(var d=n.x,m=a.x,y=c.x,b=n.y,S=a.y,T=c.y,D=d<m?d<y?d:y:m<y?m:y,O=b<S?b<T?b:T:S<T?S:T,z=d>m?d>y?d:y:m>y?m:y,$=b>S?b>T?b:T:S>T?S:T,G=c.next;G!==n;){if(G.x>=D&&G.x<=z&&G.y>=O&&G.y<=$&&Am(d,b,m,S,y,T,G.x,G.y)&&oo(G.prev,G,G.next)>=0)return!1;G=G.next}return!0}function jK(i,n,a,c){var d=i.prev,m=i,y=i.next;if(oo(d,m,y)>=0)return!1;for(var b=d.x,S=m.x,T=y.x,D=d.y,O=m.y,z=y.y,$=b<S?b<T?b:T:S<T?S:T,G=D<O?D<z?D:z:O<z?O:z,q=b>S?b>T?b:T:S>T?S:T,re=D>O?D>z?D:z:O>z?O:z,ie=vT($,G,n,a,c),fe=vT(q,re,n,a,c),_e=i.prevZ,ge=i.nextZ;_e&&_e.z>=ie&&ge&&ge.z<=fe;){if(_e.x>=$&&_e.x<=q&&_e.y>=G&&_e.y<=re&&_e!==d&&_e!==y&&Am(b,D,S,O,T,z,_e.x,_e.y)&&oo(_e.prev,_e,_e.next)>=0||(_e=_e.prevZ,ge.x>=$&&ge.x<=q&&ge.y>=G&&ge.y<=re&&ge!==d&&ge!==y&&Am(b,D,S,O,T,z,ge.x,ge.y)&&oo(ge.prev,ge,ge.next)>=0))return!1;ge=ge.nextZ}for(;_e&&_e.z>=ie;){if(_e.x>=$&&_e.x<=q&&_e.y>=G&&_e.y<=re&&_e!==d&&_e!==y&&Am(b,D,S,O,T,z,_e.x,_e.y)&&oo(_e.prev,_e,_e.next)>=0)return!1;_e=_e.prevZ}for(;ge&&ge.z<=fe;){if(ge.x>=$&&ge.x<=q&&ge.y>=G&&ge.y<=re&&ge!==d&&ge!==y&&Am(b,D,S,O,T,z,ge.x,ge.y)&&oo(ge.prev,ge,ge.next)>=0)return!1;ge=ge.nextZ}return!0}function $K(i,n,a){var c=i;do{var d=c.prev,m=c.next.next;!M1(d,m)&&PR(d,c,c.next,m)&&wy(d,m)&&wy(m,d)&&(n.push(d.i/a|0),n.push(c.i/a|0),n.push(m.i/a|0),Sy(c),Sy(c.next),c=i=m),c=c.next}while(c!==i);return rp(c)}function UK(i,n,a,c,d,m){var y=i;do{for(var b=y.next.next;b!==y.prev;){if(y.i!==b.i&&ZK(y,b)){var S=MR(y,b);return y=rp(y,y.next),S=rp(S,S.next),Cy(y,n,a,c,d,m,0),void Cy(S,n,a,c,d,m,0)}b=b.next}y=y.next}while(y!==i)}function VK(i,n){return i.x-n.x}function GK(i,n){var a=function(d,m){var y,b=m,S=d.x,T=d.y,D=-1/0;do{if(T<=b.y&&T>=b.next.y&&b.next.y!==b.y){var O=b.x+(T-b.y)*(b.next.x-b.x)/(b.next.y-b.y);if(O<=S&&O>D&&(D=O,y=b.x<b.next.x?b:b.next,O===S))return y}b=b.next}while(b!==m);if(!y)return null;var z,$=y,G=y.x,q=y.y,re=1/0;b=y;do S>=b.x&&b.x>=G&&S!==b.x&&Am(T<q?S:D,T,G,q,T<q?D:S,T,b.x,b.y)&&(z=Math.abs(T-b.y)/(S-b.x),wy(b,d)&&(z<re||z===re&&(b.x>y.x||b.x===y.x&&HK(y,b)))&&(y=b,re=z)),b=b.next;while(b!==$);return y}(i,n);if(!a)return n;var c=MR(a,i);return rp(c,c.next),rp(a,a.next)}function HK(i,n){return oo(i.prev,i,n.prev)<0&&oo(n.next,i,i.next)<0}function vT(i,n,a,c,d){return(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-a)*d|0)|i<<8))|i<<4))|i<<2))|i<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-c)*d|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function WK(i){var n=i,a=i;do(n.x<a.x||n.x===a.x&&n.y<a.y)&&(a=n),n=n.next;while(n!==i);return a}function Am(i,n,a,c,d,m,y,b){return(d-y)*(n-b)>=(i-y)*(m-b)&&(i-y)*(c-b)>=(a-y)*(n-b)&&(a-y)*(m-b)>=(d-y)*(c-b)}function ZK(i,n){return i.next.i!==n.i&&i.prev.i!==n.i&&!function(a,c){var d=a;do{if(d.i!==a.i&&d.next.i!==a.i&&d.i!==c.i&&d.next.i!==c.i&&PR(d,d.next,a,c))return!0;d=d.next}while(d!==a);return!1}(i,n)&&(wy(i,n)&&wy(n,i)&&function(a,c){var d=a,m=!1,y=(a.x+c.x)/2,b=(a.y+c.y)/2;do d.y>b!=d.next.y>b&&d.next.y!==d.y&&y<(d.next.x-d.x)*(b-d.y)/(d.next.y-d.y)+d.x&&(m=!m),d=d.next;while(d!==a);return m}(i,n)&&(oo(i.prev,i,n.prev)||oo(i,n.prev,n))||M1(i,n)&&oo(i.prev,i,i.next)>0&&oo(n.prev,n,n.next)>0)}function oo(i,n,a){return(n.y-i.y)*(a.x-n.x)-(n.x-i.x)*(a.y-n.y)}function M1(i,n){return i.x===n.x&&i.y===n.y}function PR(i,n,a,c){var d=O1(oo(i,n,a)),m=O1(oo(i,n,c)),y=O1(oo(a,c,i)),b=O1(oo(a,c,n));return d!==m&&y!==b||!(d!==0||!I1(i,a,n))||!(m!==0||!I1(i,c,n))||!(y!==0||!I1(a,i,c))||!(b!==0||!I1(a,n,c))}function I1(i,n,a){return n.x<=Math.max(i.x,a.x)&&n.x>=Math.min(i.x,a.x)&&n.y<=Math.max(i.y,a.y)&&n.y>=Math.min(i.y,a.y)}function O1(i){return i>0?1:i<0?-1:0}function wy(i,n){return oo(i.prev,i,i.next)<0?oo(i,n,i.next)>=0&&oo(i,i.prev,n)>=0:oo(i,n,i.prev)<0||oo(i,i.next,n)<0}function MR(i,n){var a=new BT(i.i,i.x,i.y),c=new BT(n.i,n.x,n.y),d=i.next,m=n.prev;return i.next=n,n.prev=i,a.next=d,d.prev=a,c.next=a,a.prev=c,m.next=c,c.prev=m,c}function IR(i,n,a,c){var d=new BT(i,n,a);return c?(d.next=c.next,d.prev=c,c.next.prev=d,c.next=d):(d.prev=d,d.next=d),d}function Sy(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function BT(i,n,a){this.i=i,this.x=n,this.y=a,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function xT(i,n,a,c){for(var d=0,m=n,y=a-c;m<a;m+=c)d+=(i[y]-i[m])*(i[m+1]+i[y+1]),y=m;return d}yT.exports=P1,yT.exports.default=P1,P1.deviation=function(i,n,a,c){var d=n&&n.length,m=Math.abs(xT(i,0,d?n[0]*a:i.length,a));if(d)for(var y=0,b=n.length;y<b;y++)m-=Math.abs(xT(i,n[y]*a,y<b-1?n[y+1]*a:i.length,a));var S=0;for(y=0;y<c.length;y+=3){var T=c[y]*a,D=c[y+1]*a,O=c[y+2]*a;S+=Math.abs((i[T]-i[O])*(i[D+1]-i[T+1])-(i[T]-i[D])*(i[O+1]-i[T+1]))}return m===0&&S===0?0:Math.abs((S-m)/m)},P1.flatten=function(i){for(var n=i[0][0].length,a={vertices:[],holes:[],dimensions:n},c=0,d=0;d<i.length;d++){for(var m=0;m<i[d].length;m++)for(var y=0;y<n;y++)a.vertices.push(i[d][m][y]);d>0&&a.holes.push(c+=i[d-1].length)}return a};var k1=K(yT.exports);function bT(i,n){const a=i.length;if(a<=1)return[i];const c=[];let d,m;for(let y=0;y<a;y++){const b=ei(i[y]);b!==0&&(i[y].area=Math.abs(b),m===void 0&&(m=b<0),m===b<0?(d&&c.push(d),d=[i[y]]):d.push(i[y]))}if(d&&c.push(d),n>1)for(let y=0;y<c.length;y++)c[y].length<=n||(dd(c[y],n,1,c[y].length-1,qK),c[y]=c[y].slice(0,n));return c}function qK(i,n){return n.area-i.area}function CT(i,n,a){const c=a.patternDependencies;let d=!1;for(const m of n){const y=m.paint.get(`${i}-pattern`);y.isConstant()||(d=!0);const b=y.constantOr(null);b&&(d=!0,c[b]=!0)}return d}function wT(i,n,a,c,d){const m=d.patternDependencies;for(const y of n){const b=y.paint.get(`${i}-pattern`).value;if(b.kind!=="constant"){let S=b.evaluate({zoom:c},a,{},d.availableImages);S=S&&S.name?S.name:S,m[S]=!0,a.patterns[y.id]=S}}return a}class ST{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(a=>a.fqid),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new $s,this.indexArray=new po,this.indexArray2=new Sl,this.programConfigurations=new le(n.layers,n.zoom),this.segments=new Ei,this.segments2=new Ei,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id),this.projection=n.projection}populate(n,a,c,d){this.hasPattern=CT("fill",this.layers,a);const m=this.layers[0].layout.get("fill-sort-key"),y=[];for(const{feature:b,id:S,index:T,sourceLayerIndex:D}of n){const O=this.layers[0]._featureFilter.needGeometry,z=to(b,O);if(!this.layers[0]._featureFilter.filter(new pi(this.zoom),z,c))continue;const $=m?m.evaluate(z,{},c,a.availableImages):void 0,G={id:S,properties:b.properties,type:b.type,sourceLayerIndex:D,index:T,geometry:O?z.geometry:go(b,c,d),patterns:{},sortKey:$};y.push(G)}m&&y.sort((b,S)=>b.sortKey-S.sortKey);for(const b of y){const{geometry:S,index:T,sourceLayerIndex:D}=b;if(this.hasPattern){const O=wT("fill",this.layers,b,this.zoom,a);this.patternFeatures.push(O)}else this.addFeature(b,S,T,c,{},a.availableImages,a.brightness);a.featureIndex.insert(n[T].feature,S,T,D,this.index)}}update(n,a,c,d,m){const y=Object.keys(n).length!==0;y&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(n,a,y?this.stateDependentLayers:this.layers,c,d,m)}addFeatures(n,a,c,d,m,y){for(const b of this.patternFeatures)this.addFeature(b,b.geometry,b.index,a,c,d,y)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,NK),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,a,c,d,m,y=[],b){for(const S of bT(a,500)){let T=0;for(const q of S)T+=q.length;const D=this.segments.prepareSegment(T,this.layoutVertexArray,this.indexArray),O=D.vertexLength,z=[],$=[];for(const q of S){if(q.length===0)continue;q!==S[0]&&$.push(z.length/2);const re=this.segments2.prepareSegment(q.length,this.layoutVertexArray,this.indexArray2),ie=re.vertexLength;this.layoutVertexArray.emplaceBack(q[0].x,q[0].y),this.indexArray2.emplaceBack(ie+q.length-1,ie),z.push(q[0].x),z.push(q[0].y);for(let fe=1;fe<q.length;fe++)this.layoutVertexArray.emplaceBack(q[fe].x,q[fe].y),this.indexArray2.emplaceBack(ie+fe-1,ie+fe),z.push(q[fe].x),z.push(q[fe].y);re.vertexLength+=q.length,re.primitiveLength+=q.length}const G=k1(z,$);for(let q=0;q<G.length;q+=3)this.indexArray.emplaceBack(O+G[q],O+G[q+1],O+G[q+2]);D.vertexLength+=T,D.primitiveLength+=G.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,c,m,y,d,b)}}Kt(ST,"FillBucket",{omit:["layers","patternFeatures"]});const KK=new mi({"fill-sort-key":new pr(Ke.layout_fill["fill-sort-key"]),visibility:new Ot(Ke.layout_fill.visibility)});var XK={paint:new mi({"fill-antialias":new Ot(Ke.paint_fill["fill-antialias"]),"fill-opacity":new pr(Ke.paint_fill["fill-opacity"]),"fill-color":new pr(Ke.paint_fill["fill-color"]),"fill-outline-color":new pr(Ke.paint_fill["fill-outline-color"]),"fill-translate":new Ot(Ke.paint_fill["fill-translate"]),"fill-translate-anchor":new Ot(Ke.paint_fill["fill-translate-anchor"]),"fill-pattern":new pr(Ke.paint_fill["fill-pattern"]),"fill-emissive-strength":new Ot(Ke.paint_fill["fill-emissive-strength"])}),layout:KK};const YK=Mn([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),JK=Mn([{name:"a_pos_end",components:4,type:"Int16"},{name:"a_angular_offset_factor",components:1,type:"Int16"}]),QK=Mn([{name:"a_centroid_pos",components:2,type:"Uint16"}]),eX=Mn([{name:"a_hidden_by_landmark",components:1,type:"Uint8"}]),tX=Mn([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:rX}=YK;var L1={},nX=Ce,OR=Em;function Em(i,n,a,c,d){this.properties={},this.extent=a,this.type=0,this._pbf=i,this._geometry=-1,this._keys=c,this._values=d,i.readFields(iX,this,n)}function iX(i,n,a){i==1?n.id=a.readVarint():i==2?function(c,d){for(var m=c.readVarint()+c.pos;c.pos<m;){var y=d._keys[c.readVarint()],b=d._values[c.readVarint()];d.properties[y]=b}}(a,n):i==3?n.type=a.readVarint():i==4&&(n._geometry=a.pos)}function oX(i){for(var n,a,c=0,d=0,m=i.length,y=m-1;d<m;y=d++)c+=((a=i[y]).x-(n=i[d]).x)*(n.y+a.y);return c}Em.types=["Unknown","Point","LineString","Polygon"],Em.prototype.loadGeometry=function(){var i=this._pbf;i.pos=this._geometry;for(var n,a=i.readVarint()+i.pos,c=1,d=0,m=0,y=0,b=[];i.pos<a;){if(d<=0){var S=i.readVarint();c=7&S,d=S>>3}if(d--,c===1||c===2)m+=i.readSVarint(),y+=i.readSVarint(),c===1&&(n&&b.push(n),n=[]),n.push(new nX(m,y));else{if(c!==7)throw new Error("unknown command "+c);n&&n.push(n[0].clone())}}return n&&b.push(n),b},Em.prototype.bbox=function(){var i=this._pbf;i.pos=this._geometry;for(var n=i.readVarint()+i.pos,a=1,c=0,d=0,m=0,y=1/0,b=-1/0,S=1/0,T=-1/0;i.pos<n;){if(c<=0){var D=i.readVarint();a=7&D,c=D>>3}if(c--,a===1||a===2)(d+=i.readSVarint())<y&&(y=d),d>b&&(b=d),(m+=i.readSVarint())<S&&(S=m),m>T&&(T=m);else if(a!==7)throw new Error("unknown command "+a)}return[y,S,b,T]},Em.prototype.toGeoJSON=function(i,n,a){var c,d,m=this.extent*Math.pow(2,a),y=this.extent*i,b=this.extent*n,S=this.loadGeometry(),T=Em.types[this.type];function D($){for(var G=0;G<$.length;G++){var q=$[G];$[G]=[360*(q.x+y)/m-180,360/Math.PI*Math.atan(Math.exp((180-360*(q.y+b)/m)*Math.PI/180))-90]}}switch(this.type){case 1:var O=[];for(c=0;c<S.length;c++)O[c]=S[c][0];D(S=O);break;case 2:for(c=0;c<S.length;c++)D(S[c]);break;case 3:for(S=function($){var G=$.length;if(G<=1)return[$];for(var q,re,ie=[],fe=0;fe<G;fe++){var _e=oX($[fe]);_e!==0&&(re===void 0&&(re=_e<0),re===_e<0?(q&&ie.push(q),q=[$[fe]]):q.push($[fe]))}return q&&ie.push(q),ie}(S),c=0;c<S.length;c++)for(d=0;d<S[c].length;d++)D(S[c][d])}S.length===1?S=S[0]:T="Multi"+T;var z={type:"Feature",geometry:{type:T,coordinates:S},properties:this.properties};return"id"in this&&(z.id=this.id),z};var aX=OR,kR=LR;function LR(i,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=i,this._keys=[],this._values=[],this._features=[],i.readFields(sX,this,n),this.length=this._features.length}function sX(i,n,a){i===15?n.version=a.readVarint():i===1?n.name=a.readString():i===5?n.extent=a.readVarint():i===2?n._features.push(a.pos):i===3?n._keys.push(a.readString()):i===4&&n._values.push(function(c){for(var d=null,m=c.readVarint()+c.pos;c.pos<m;){var y=c.readVarint()>>3;d=y===1?c.readString():y===2?c.readFloat():y===3?c.readDouble():y===4?c.readVarint64():y===5?c.readVarint():y===6?c.readSVarint():y===7?c.readBoolean():null}return d}(a))}LR.prototype.feature=function(i){if(i<0||i>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[i];var n=this._pbf.readVarint()+this._pbf.pos;return new aX(this._pbf,n,this.extent,this._keys,this._values)};var lX=kR;function uX(i,n,a){if(i===3){var c=new lX(a,a.readVarint()+a.pos);c.length&&(n[c.name]=c)}}var TT=L1.VectorTile=function(i,n){this.layers=i.readFields(uX,{},n)},R1=L1.VectorTileFeature=OR;function z1(i,n,a,c){const d=[],m=c===0?(y,b,S,T,D,O)=>{y.push(new De(O,S+(O-b)/(T-b)*(D-S)))}:(y,b,S,T,D,O)=>{y.push(new De(b+(O-S)/(D-S)*(T-b),O))};for(const y of i){const b=[];for(const S of y){if(S.length<=2)continue;const T=[];for(let z=0;z<S.length-1;z++){const $=S[z].x,G=S[z].y,q=S[z+1].x,re=S[z+1].y,ie=c===0?$:G,fe=c===0?q:re;ie<n?fe>n&&m(T,$,G,q,re,n):ie>a?fe<a&&m(T,$,G,q,re,a):T.push(S[z]),fe<n&&ie>=n&&m(T,$,G,q,re,n),fe>a&&ie<=a&&m(T,$,G,q,re,a)}let D=S[S.length-1];const O=c===0?D.x:D.y;O>=n&&O<=a&&T.push(D),T.length&&(D=T[T.length-1],T[0].x===D.x&&T[0].y===D.y||T.push(T[0]),b.push(T))}b.length&&d.push(b)}return d}function N1(i,n){return i.x-n.x||i.y-n.y}function RR(i,n){return N1(i.min,n.min)===0&&N1(i.max,n.max)===0}function zR(i,n){return!(i.min.x>n.max.x||i.max.x<n.min.x||i.min.y>n.max.y||i.max.y<n.min.y)}function NR(i,n,a){const c=1/Ut,d=1/(1<<a.canonical.z),m=(n.x*c+a.canonical.x)*d+a.wrap,y=(n.y*c+a.canonical.y)*d;return{min:new De((i.x*c+a.canonical.x)*d+a.wrap,(i.y*c+a.canonical.y)*d),max:new De(m,y)}}function cX(i,n,a){const c=1<<a.canonical.z,d=((n.x-a.wrap)*c-a.canonical.x)*Ut,m=(n.y*c-a.canonical.y)*Ut;return{min:new De(((i.x-a.wrap)*c-a.canonical.x)*Ut,(i.y*c-a.canonical.y)*Ut),max:new De(d,m)}}function FR(i,n,a,c,d,m,y){const b=i.indices,S=i.vertices,T=[];for(let D=c;D<c+d;D+=3){const O=n[a[D+0]+m],z=n[a[D+1]+m],$=n[a[D+2]+m],G=Math.min(O.x,z.x,$.x),q=Math.max(O.x,z.x,$.x),re=Math.min(O.y,z.y,$.y),ie=Math.max(O.y,z.y,$.y);T.length=0,i.grid.query(new De(G,re),new De(q,ie),T);for(let fe=0;fe<T.length;fe++){const _e=T[fe];if(ZS(S[b[3*_e+0]],S[b[3*_e+1]],S[b[3*_e+2]],O,z,$,y))return!0}}return!1}function jR(i,n,a,c){if(!i||!a)return!1;let d=i.vertices;if(!n.canonical.equals(c.canonical)||n.wrap!==c.wrap){if(a.vertices.length<i.vertices.length)return jR(a,c,i,n);const m=n.canonical,y=c.canonical,b=Math.pow(2,y.z-m.z);d=i.vertices.map(S=>new De(S.x*m.x*Ut*b-y.x*Ut,S.y*m.y*Ut*b-y.y*Ut))}return FR(a,d,i.indices,0,i.indices.length,0,0)}L1.VectorTileLayer=kR;class $R{constructor(n){this.size=n,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(n,a){const c=this.toIdx(n,a);return{min:this.minimums[c],max:this.maximums[c]}}isLeaf(n,a){return this.leaves[this.toIdx(n,a)]}toIdx(n,a){return a*this.size+n}}function UR(i,n,a,c){let d=0,m=Number.MAX_VALUE;for(let y=0;y<3;y++)if(Math.abs(c[y])<1e-15){if(a[y]<i[y]||a[y]>n[y])return null}else{const b=1/c[y];let S=(i[y]-a[y])*b,T=(n[y]-a[y])*b;if(S>T){const D=S;S=T,T=D}if(S>d&&(d=S),T<m&&(m=T),d>m)return null}return d}function VR(i,n,a,c,d,m,y,b,S,T,D){const O=c-i,z=d-n,$=m-a,G=y-i,q=b-n,re=S-a,ie=D[1]*re-D[2]*q,fe=D[2]*G-D[0]*re,_e=D[0]*q-D[1]*G,ge=O*ie+z*fe+$*_e;if(Math.abs(ge)<1e-15)return null;const Se=1/ge,be=T[0]-i,Me=T[1]-n,Ne=T[2]-a,Ge=(be*ie+Me*fe+Ne*_e)*Se;if(Ge<0||Ge>1)return null;const Ye=Me*$-Ne*z,He=Ne*O-be*$,st=be*z-Me*O,yt=(D[0]*Ye+D[1]*He+D[2]*st)*Se;return yt<0||Ge+yt>1?null:(G*Ye+q*He+re*st)*Se}function GR(i,n,a){return(i-n)/(a-n)}function HR(i,n,a,c,d,m,y,b,S){const T=1<<a,D=m-c,O=y-d,z=(i+1)/T*D+c,$=(n+0)/T*O+d,G=(n+1)/T*O+d;b[0]=(i+0)/T*D+c,b[1]=$,S[0]=z,S[1]=G}class WR{constructor(n){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=n,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const a=function(m){const y=Math.ceil(Math.log2(m.dim/8)),b=[];let S=Math.ceil(Math.pow(2,y));const T=1/S,D=($,G,q,re,ie)=>{const fe=re?1:0,_e=($+1)*q-fe,ge=G*q,Se=(G+1)*q-fe;ie[0]=$*q,ie[1]=ge,ie[2]=_e,ie[3]=Se};let O=new $R(S);const z=[];for(let $=0;$<S*S;$++){D($%S,Math.floor($/S),T,!1,z);const G=uf(z[0],z[1],m),q=uf(z[2],z[1],m),re=uf(z[2],z[3],m),ie=uf(z[0],z[3],m);O.minimums.push(Math.min(G,q,re,ie)),O.maximums.push(Math.max(G,q,re,ie)),O.leaves.push(1)}for(b.push(O),S/=2;S>=1;S/=2){const $=b[b.length-1];O=new $R(S);for(let G=0;G<S*S;G++){D(G%S,Math.floor(G/S),2,!0,z);const q=$.getElevation(z[0],z[1]),re=$.getElevation(z[2],z[1]),ie=$.getElevation(z[2],z[3]),fe=$.getElevation(z[0],z[3]),_e=$.isLeaf(z[0],z[1]),ge=$.isLeaf(z[2],z[1]),Se=$.isLeaf(z[2],z[3]),be=$.isLeaf(z[0],z[3]),Me=Math.min(q.min,re.min,ie.min,fe.min),Ne=Math.max(q.max,re.max,ie.max,fe.max),Ge=_e&&ge&&Se&&be;O.maximums.push(Ne),O.minimums.push(Me),O.leaves.push(Ne-Me<=5&&Ge?1:0)}b.push(O)}return b}(this.dem),c=a.length-1,d=a[c];this._addNode(d.minimums[0],d.maximums[0],d.leaves[0]),this._construct(a,0,0,c,0)}raycastRoot(n,a,c,d,m,y,b=1){return UR([n,a,-100],[c,d,this.maximums[0]*b],m,y)}raycast(n,a,c,d,m,y,b=1){if(!this.nodeCount)return null;const S=this.raycastRoot(n,a,c,d,m,y,b);if(S==null)return null;const T=[],D=[],O=[],z=[],$=[{idx:0,t:S,nodex:0,nodey:0,depth:0}];for(;$.length>0;){const{idx:G,t:q,nodex:re,nodey:ie,depth:fe}=$.pop();if(this.leaves[G]){HR(re,ie,fe,n,a,c,d,O,z);const ge=1<<fe,Se=(re+0)/ge,be=(re+1)/ge,Me=(ie+0)/ge,Ne=(ie+1)/ge,Ge=uf(Se,Me,this.dem)*b,Ye=uf(be,Me,this.dem)*b,He=uf(be,Ne,this.dem)*b,st=uf(Se,Ne,this.dem)*b,yt=VR(O[0],O[1],Ge,z[0],O[1],Ye,z[0],z[1],He,m,y),nt=VR(z[0],z[1],He,O[0],z[1],st,O[0],O[1],Ge,m,y),mt=Math.min(yt!==null?yt:Number.MAX_VALUE,nt!==null?nt:Number.MAX_VALUE);if(mt!==Number.MAX_VALUE)return mt;{const tt=s.N.scaleAndAdd([],m,y,q);if(ZR(Ge,Ye,st,He,GR(tt[0],O[0],z[0]),GR(tt[1],O[1],z[1]))>=tt[2])return q}continue}let _e=0;for(let ge=0;ge<this._siblingOffset.length;ge++){HR((re<<1)+this._siblingOffset[ge][0],(ie<<1)+this._siblingOffset[ge][1],fe+1,n,a,c,d,O,z),O[2]=-100,z[2]=this.maximums[this.childOffsets[G]+ge]*b;const Se=UR(O,z,m,y);if(Se!=null){const be=Se;T[ge]=be;let Me=!1;for(let Ne=0;Ne<_e&&!Me;Ne++)be>=T[D[Ne]]&&(D.splice(Ne,0,ge),Me=!0);Me||(D[_e]=ge),_e++}}for(let ge=0;ge<_e;ge++){const Se=D[ge];$.push({idx:this.childOffsets[G]+Se,t:T[Se],nodex:(re<<1)+this._siblingOffset[Se][0],nodey:(ie<<1)+this._siblingOffset[Se][1],depth:fe+1})}}return null}_addNode(n,a,c){return this.minimums.push(n),this.maximums.push(a),this.leaves.push(c),this.childOffsets.push(0),this.nodeCount++}_construct(n,a,c,d,m){if(n[d].isLeaf(a,c)===1)return;this.childOffsets[m]||(this.childOffsets[m]=this.nodeCount);const y=d-1,b=n[y];let S=0,T=0;for(let D=0;D<this._siblingOffset.length;D++){const O=2*a+this._siblingOffset[D][0],z=2*c+this._siblingOffset[D][1],$=b.getElevation(O,z),G=b.isLeaf(O,z),q=this._addNode($.min,$.max,G);G&&(S|=1<<D),T||(T=q)}for(let D=0;D<this._siblingOffset.length;D++)S&1<<D||this._construct(n,2*a+this._siblingOffset[D][0],2*c+this._siblingOffset[D][1],y,T+D)}}function ZR(i,n,a,c,d,m){return Zr(Zr(i,a,m),Zr(n,c,m),d)}function uf(i,n,a){const c=a.dim,d=Le(i*c-.5,0,c-1),m=Le(n*c-.5,0,c-1),y=Math.floor(d),b=Math.floor(m),S=Math.min(y+1,c-1),T=Math.min(b+1,c-1);return ZR(a.get(y,b),a.get(S,b),a.get(y,T),a.get(S,T),d-y,m-b)}const hX={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function fX(i,n,a){return(256*i*256+256*n+a)/10-1e4}function dX(i,n,a){return 256*i+n+a/256-32768}class F1{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(n,a,c,d=!1){if(this.uid=n,a.height!==a.width)throw new RangeError("DEM tiles must be square");if(c&&c!=="mapbox"&&c!=="terrarium")return Er(`"${c}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=a.height;const m=this.dim=a.height-2,y=new Uint32Array(a.data.buffer);if(this.pixels=new Uint8Array(a.data.buffer),this.floatView=new Float32Array(a.data.buffer),this.borderReady=d,this._modifiedForSources={},!d){for(let S=0;S<m;S++)y[this._idx(-1,S)]=y[this._idx(0,S)],y[this._idx(m,S)]=y[this._idx(m-1,S)],y[this._idx(S,-1)]=y[this._idx(S,0)],y[this._idx(S,m)]=y[this._idx(S,m-1)];y[this._idx(-1,-1)]=y[this._idx(0,0)],y[this._idx(m,-1)]=y[this._idx(m-1,0)],y[this._idx(-1,m)]=y[this._idx(0,m-1)],y[this._idx(m,m)]=y[this._idx(m-1,m-1)]}const b=c==="terrarium"?dX:fX;for(let S=0;S<y.length;++S){const T=4*S;this.floatView[S]=b(this.pixels[T],this.pixels[T+1],this.pixels[T+2])}this._timestamp=Tt.now()}_buildQuadTree(){this._tree=new WR(this)}get(n,a,c=!1){c&&(n=Le(n,-1,this.dim),a=Le(a,-1,this.dim));const d=this._idx(n,a);return this.floatView[d]}set(n,a,c){const d=this._idx(n,a),m=this.floatView[d];return this.floatView[d]=c,c-m}static getUnpackVector(n){return hX[n]}_idx(n,a){if(n<-1||n>=this.dim+1||a<-1||a>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(a+1)*this.stride+(n+1)}static pack(n,a){const c=[0,0,0,0],d=F1.getUnpackVector(a);let m=Math.floor((n+d[3])/d[2]);return c[2]=m%256,m=Math.floor(m/256),c[1]=m%256,m=Math.floor(m/256),c[0]=m,c}getPixels(){return new ER({width:this.stride,height:this.stride},this.pixels)}backfillBorder(n,a,c){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let d=a*this.dim,m=a*this.dim+this.dim,y=c*this.dim,b=c*this.dim+this.dim;switch(a){case-1:d=m-1;break;case 1:m=d+1}switch(c){case-1:y=b-1;break;case 1:b=y+1}const S=-a*this.dim,T=-c*this.dim;for(let D=y;D<b;D++)for(let O=d;O<m;O++){const z=4*this._idx(O,D),$=4*this._idx(O+S,D+T);this.pixels[z+0]=n.pixels[$+0],this.pixels[z+1]=n.pixels[$+1],this.pixels[z+2]=n.pixels[$+2],this.pixels[z+3]=n.pixels[$+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}Kt(F1,"DEMData"),Kt(WR,"DemMinMaxQuadTree",{omit:["dem"]});class Dm{constructor(n,a,c){this._demTile=n,this._dem=this._demTile.dem,this._scale=a,this._offset=c}static create(n,a,c){const d=c||n.findDEMTileFor(a);if(!d||!d.dem)return;const m=d.dem,y=d.tileID,b=1<<a.canonical.z-y.canonical.z;return new Dm(d,m.dim/Ut/b,[(a.canonical.x/b-y.canonical.x)*m.dim,(a.canonical.y/b-y.canonical.y)*m.dim])}tileCoordToPixel(n,a){const c=a*this._scale+this._offset[1],d=Math.floor(n*this._scale+this._offset[0]),m=Math.floor(c);return new De(d,m)}getElevationAt(n,a,c,d){const m=n*this._scale+this._offset[0],y=a*this._scale+this._offset[1],b=Math.floor(m),S=Math.floor(y),T=this._dem;return d=!!d,c?Zr(Zr(T.get(b,S,d),T.get(b,S+1,d),y-S),Zr(T.get(b+1,S,d),T.get(b+1,S+1,d),y-S),m-b):T.get(b,S,d)}getElevationAtPixel(n,a,c){return this._dem.get(n,a,!!c)}getMeterToDEM(n){return(1<<this._demTile.tileID.canonical.z)*Pr(1,n)*this._dem.stride}}const pX=R1.types,mX=["fill-extrusion-base","fill-extrusion-height","fill-extrusion-color","fill-extrusion-pattern","fill-extrusion-flood-light-wall-radius"],gX=["fill-extrusion-flood-light-ground-radius"],_X=Math.pow(2,13),yX=Math.pow(2,15)-1,qR=new De(0,1),cf=2147483648;function Ty(i,n,a,c,d,m,y,b){i.emplaceBack((n<<1)+y,(a<<1)+m,(Math.floor(c*_X)<<1)+d,Math.round(b))}function j1(i,n,a,c,d,m){i.emplaceBack(n.x,n.y,(a.x<<1)+c,(a.y<<1)+d,m)}function Ay(i,n,a){i.emplaceBack(n.x,n.y,n.z,a[0]*16384,a[1]*16384,a[2]*16384)}class KR{constructor(){this.vertexOffset=0,this.vertexCount=0,this.indexOffset=0,this.indexCount=0}}class XR{constructor(){this.centroidXY=new De(0,0),this.vertexArrayOffset=0,this.vertexCount=0,this.groundVertexArrayOffset=0,this.groundVertexCount=0,this.flags=0,this.footprintSegIdx=-1,this.footprintSegLen=0,this.polygonSegIdx=-1,this.polygonSegLen=0,this.min=new De(Number.MAX_VALUE,Number.MAX_VALUE),this.max=new De(-Number.MAX_VALUE,-Number.MAX_VALUE),this.height=0}span(){return new De(this.max.x-this.min.x,this.max.y-this.min.y)}}class YR{constructor(){this.acc=new De(0,0),this.accCount=0,this.centroidDataIndex=0}startRing(n,a){n.min.x===Number.MAX_VALUE&&(n.min.x=n.max.x=a.x,n.min.y=n.max.y=a.y)}appendEdge(n,a,c){this.accCount++,this.acc._add(a);let d=!!this.borders;a.x<n.min.x?(n.min.x=a.x,d=!0):a.x>n.max.x&&(n.max.x=a.x,d=!0),a.y<n.min.y?(n.min.y=a.y,d=!0):a.y>n.max.y&&(n.max.y=a.y,d=!0),((a.x===0||a.x===Ut)&&a.x===c.x)!=((a.y===0||a.y===Ut)&&a.y===c.y)&&this.processBorderOverlap(a,c),d&&this.checkBorderIntersection(a,c)}checkBorderIntersection(n,a){a.x<0!=n.x<0&&this.addBorderIntersection(0,Zr(a.y,n.y,(0-a.x)/(n.x-a.x))),a.x>Ut!=n.x>Ut&&this.addBorderIntersection(1,Zr(a.y,n.y,(Ut-a.x)/(n.x-a.x))),a.y<0!=n.y<0&&this.addBorderIntersection(2,Zr(a.x,n.x,(0-a.y)/(n.y-a.y))),a.y>Ut!=n.y>Ut&&this.addBorderIntersection(3,Zr(a.x,n.x,(Ut-a.y)/(n.y-a.y)))}addBorderIntersection(n,a){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const c=this.borders[n];a<c[0]&&(c[0]=a),a>c[1]&&(c[1]=a)}processBorderOverlap(n,a){if(n.x===a.x){if(n.y===a.y)return;const c=n.x===0?0:1;this.addBorderIntersection(c,a.y),this.addBorderIntersection(c,n.y)}else{const c=n.y===0?2:3;this.addBorderIntersection(c,a.x),this.addBorderIntersection(c,n.x)}}centroid(){return this.accCount===0?new De(0,0):new De(Math.floor(Math.max(0,this.acc.x)/this.accCount),Math.floor(Math.max(0,this.acc.y)/this.accCount))}intersectsCount(){return this.borders?this.borders.reduce((n,a)=>n+ +(a[0]!==Number.MAX_VALUE),0):0}}function JR(i,n){const a=i.add(n)._unit(),c=Le(i.x*a.x+i.y*a.y,-1,1);var d,m,y;return d=Math.acos(c),Math.min(4,Math.max(-4,Math.tan(d)))/4*yX*((m=i).x*(y=n).y-m.y*y.x<0?-1:1)}const vX=[i=>i.x<0,i=>i.x>Ut,i=>i.y<0,i=>i.y>Ut];function BX(i,n,a,c){const d=[4];if(c===0)return d;a._mult(c);const m=i.sub(a),y=n.sub(a),b=[i,n,m,y];for(let S=0;S<4;S++)for(const T of b)if(vX[S](T)){d.push(S);break}return d}class QR{constructor(n){this.vertexArray=new oy,this.indexArray=new po,this.programConfigurations=new le(n.layers,n.zoom,a=>gX.includes(a)),this._segments=new Ei,this.hiddenByLandmarkVertexArray=new py,this._segmentToGroundQuads={},this._segmentToGroundQuads[0]=[],this._segmentToRegionTriCounts={},this._segmentToRegionTriCounts[0]=[0,0,0,0,0],this.regionSegments={},this.regionSegments[4]=new Ei}getDefaultSegment(){return this.regionSegments[4]}hasData(){return this.vertexArray.length!==0}addData(n,a,c,d=!1){const m=n.length;if(m>2){let y=Math.max(0,this._segments.get().length-1);const b=this._segments._prepareSegment(4*m,this.vertexArray.length,2*this._segmentToGroundQuads[y].length);let S;y!==this._segments.get().length-1&&(y++,this._segmentToGroundQuads[y]=[],this._segmentToRegionTriCounts[y]=[0,0,0,0,0]);{const T=n[0],D=n[1];S=JR(T.sub(n[m-1])._perp()._unit(),D.sub(T)._perp()._unit())}for(let T=0;T<m;T++){const D=T===m-1?0:T+1,O=n[T],z=n[D],$=n[D===m-1?0:D+1],G=z.sub(O)._perp()._unit(),q=JR(G,$.sub(z)._perp()._unit()),re=S,ie=q;if(AT(O,z,a)||d&&rz(O,a)&&rz(z,a)){S=q;continue}const fe=b.vertexLength;j1(this.vertexArray,O,z,1,1,re),j1(this.vertexArray,O,z,1,0,re),j1(this.vertexArray,O,z,0,1,ie),j1(this.vertexArray,O,z,0,0,ie),b.vertexLength+=4;const _e=BX(O,z,G,c);for(const ge of _e)this._segmentToGroundQuads[y].push({id:fe,region:ge}),this._segmentToRegionTriCounts[y][ge]+=2,b.primitiveLength+=2;S=q}}}prepareBorderSegments(){if(!this.hasData())return;const n=this._segments.get(),a=n.length;for(let c=0;c<a;c++)this._segmentToGroundQuads[c].sort((d,m)=>d.region-m.region);for(let c=0;c<a;c++){const d=this._segmentToGroundQuads[c],m=n[c],y=this._segmentToRegionTriCounts[c];y.reduce((S,T)=>S+T,0);let b=0;for(let S=0;S<=4;S++){const T=y[S];if(T!==0){let D=this.regionSegments[S];D||(D=this.regionSegments[S]=new Ei);const O={vertexOffset:m.vertexOffset,primitiveOffset:m.primitiveOffset+b,vertexLength:m.vertexLength,primitiveLength:T};D.get().push(O)}b+=T}for(let S=0;S<d.length;S++){const T=d[S].id;this.indexArray.emplaceBack(T,T+1,T+3),this.indexArray.emplaceBack(T,T+3,T+2)}}this._segmentToGroundQuads=null,this._segmentToRegionTriCounts=null,this._segments.destroy(),this._segments=null}addPaintPropertiesData(n,a,c,d,m,y){this.hasData()&&this.programConfigurations.populatePaintArrays(this.vertexArray.length,n,a,c,d,m,y)}upload(n){this.hasData()&&(this.vertexBuffer=n.createVertexBuffer(this.vertexArray,JK.members),this.indexBuffer=n.createIndexBuffer(this.indexArray))}uploadPaintProperties(n){this.hasData()&&this.programConfigurations.upload(n)}update(n,a,c,d,m,y){this.hasData()&&this.programConfigurations.updatePaintArrays(n,a,c,d,m,y)}updateHiddenByLandmark(n){if(!this.hasData())return;const a=n.groundVertexCount+n.groundVertexArrayOffset;if(n.groundVertexCount===0)return;const c=n.flags&cf?1:0;for(let d=n.groundVertexArrayOffset;d<a;++d)this.hiddenByLandmarkVertexArray.emplace(d,c);this._needsHiddenByLandmarkUpdate=!0}uploadHiddenByLandmark(n){this.hasData()&&this._needsHiddenByLandmarkUpdate&&(!this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexArray.length>0?this.hiddenByLandmarkVertexBuffer=n.createVertexBuffer(this.hiddenByLandmarkVertexArray,eX.members,!0):this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.updateData(this.hiddenByLandmarkVertexArray),this._needsHiddenByLandmarkUpdate=!1)}destroy(){if(this.vertexBuffer){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.destroy(),this._segments&&this._segments.destroy(),this.programConfigurations.destroy();for(let n=0;n<=4;n++){const a=this.regionSegments[n];a&&a.destroy()}}}}class $1{constructor(n){this.zoom=n.zoom,this.canonical=n.canonical,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(a=>a.fqid),this.index=n.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=n.projection,this.activeReplacements=[],this.replacementUpdateTime=0,this.centroidData=[],this.footprintIndices=new po,this.footprintVertices=new $s,this.footprintSegments=[],this.layoutVertexArray=new iu,this.centroidVertexArray=new qd,this.indexArray=new po,this.programConfigurations=new le(n.layers,n.zoom,a=>mX.includes(a)),this.segments=new Ei,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id),this.groundEffect=new QR(n),this.maxHeight=0,this.partLookup={},this.triangleSubSegments=[],this.polygonSegments=[]}populate(n,a,c,d){this.features=[],this.hasPattern=CT("fill-extrusion",this.layers,a),this.featuresOnBorder=[],this.borderFeatureIndices=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=Qr(c),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:m,id:y,index:b,sourceLayerIndex:S}of n){const T=this.layers[0]._featureFilter.needGeometry,D=to(m,T);if(!this.layers[0]._featureFilter.filter(new pi(this.zoom),D,c))continue;const O={id:y,sourceLayerIndex:S,index:b,geometry:T?D.geometry:go(m,c,d),properties:m.properties,type:m.type,patterns:{}},z=this.layoutVertexArray.length;this.hasPattern?this.features.push(wT("fill-extrusion",this.layers,O,this.zoom,a)):this.addFeature(O,O.geometry,b,c,{},a.availableImages,d,a.brightness),a.featureIndex.insert(m,O.geometry,b,S,this.index,z)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles(),this.groundEffect.prepareBorderSegments(),this.polygonSegments.length=0}addFeatures(n,a,c,d,m,y){for(const b of this.features){const{geometry:S}=b;this.addFeature(b,S,b.index,a,c,d,m,y)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles()}update(n,a,c,d,m){const y=Object.keys(n).length!==0;if(y&&!this.stateDependentLayers.length)return;const b=y?this.stateDependentLayers:this.layers;this.programConfigurations.updatePaintArrays(n,a,b,c,d,m),this.groundEffect.update(n,a,b,c,d,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload||this.groundEffect.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,rX),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=n.createVertexBuffer(this.layoutVertexExtArray,tX.members,!0)),this.groundEffect.upload(n)),this.groundEffect.uploadPaintProperties(n),this.programConfigurations.upload(n),this.uploaded=!0}uploadCentroid(n){this.groundEffect.uploadHiddenByLandmark(n),this.needsCentroidUpdate&&(!this.centroidVertexBuffer&&this.centroidVertexArray.length>0?this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,QK.members,!0):this.centroidVertexBuffer&&this.centroidVertexBuffer.updateData(this.centroidVertexArray),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.groundEffect.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,a,c,d,m,y,b,S){const T=this.layers[0].paint.get("fill-extrusion-flood-light-ground-radius").evaluate(n,{})/this.tileToMeter,D=[new De(0,0),new De(Ut,Ut)],O=b.projection,z=O.name==="globe",$=pX[n.type]==="Polygon",G=new YR;G.centroidDataIndex=this.centroidData.length;const q=new XR,re=this.layers[0].paint.get("fill-extrusion-base").evaluate(n,{},d)<=0,ie=this.layers[0].paint.get("fill-extrusion-height").evaluate(n,{},d);q.height=ie,q.vertexArrayOffset=this.layoutVertexArray.length,q.groundVertexArrayOffset=this.groundEffect.vertexArray.length,z&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new ym);const fe=bT(a,500);for(let Ne=fe.length-1;Ne>=0;Ne--){const Ge=fe[Ne];(Ge.length===0||(_e=Ge[0]).every(Ye=>Ye.x<=0)||_e.every(Ye=>Ye.x>=Ut)||_e.every(Ye=>Ye.y<=0)||_e.every(Ye=>Ye.y>=Ut))&&fe.splice(Ne,1)}var _e;let ge;if(z)ge=az(fe,D,d);else{ge=[];for(const Ne of fe)ge.push({polygon:Ne,bounds:D})}const Se=$?this.edgeRadius:0,be=Se>0&&this.zoom<17,Me=(Ne,Ge)=>{if(Ne.length===0)return!1;const Ye=Ne[Ne.length-1];return Ge.x===Ye.x&&Ge.y===Ye.y};for(const{polygon:Ne,bounds:Ge}of ge){let Ye=0,He=0;for(const mt of Ne)$&&!mt[0].equals(mt[mt.length-1])&&mt.push(mt[0]),He+=$?mt.length-1:mt.length;const st=this.segments.prepareSegment(($?5:4)*He,this.layoutVertexArray,this.indexArray);q.footprintSegIdx<0&&(q.footprintSegIdx=this.footprintSegments.length),q.polygonSegIdx<0&&(q.polygonSegIdx=this.polygonSegments.length);const yt={triangleArrayOffset:this.indexArray.length,triangleCount:0,triangleSegIdx:this.segments.segments.length-1},nt=new KR;if(nt.vertexOffset=this.footprintVertices.length,nt.indexOffset=3*this.footprintIndices.length,nt.ringIndices=[],$){const mt=[],tt=[];Ye=st.vertexLength;for(let Lt=0;Lt<Ne.length;Lt++){const vt=Ne[Lt];vt.length&&Lt!==0&&tt.push(mt.length/2);const Jt=[];let Zt,Ct;Zt=vt[1].sub(vt[0])._perp()._unit(),nt.ringIndices.push(vt.length-1);for(let vr=1;vr<vt.length;vr++){const ar=vt[vr],Yt=vt[vr===vt.length-1?1:vr+1],wt=ar.clone();if(Se){Ct=Yt.sub(ar)._perp()._unit();const gr=Zt.add(Ct)._unit(),jr=Se*Math.min(4,1/(Zt.x*gr.x+Zt.y*gr.y));wt.x+=jr*gr.x,wt.y+=jr*gr.y,wt.x=Math.round(wt.x),wt.y=Math.round(wt.y),Zt=Ct}!re||Se!==0&&!be||Me(Jt,wt)||Jt.push(wt),Ty(this.layoutVertexArray,wt.x,wt.y,0,0,1,1,0),st.vertexLength++,this.footprintVertices.emplaceBack(ar.x,ar.y),mt.push(ar.x,ar.y),z&&Ay(this.layoutVertexExtArray,O.projectTilePoint(wt.x,wt.y,d),O.upVector(d,wt.x,wt.y))}re&&(Se===0||be)&&(Jt.length!==0&&Me(Jt,Jt[0])&&Jt.pop(),this.groundEffect.addData(Jt,Ge,T))}const pt=k1(mt,tt);for(let Lt=0;Lt<pt.length;Lt+=3)this.footprintIndices.emplaceBack(nt.vertexOffset+pt[Lt+0],nt.vertexOffset+pt[Lt+1],nt.vertexOffset+pt[Lt+2]),this.indexArray.emplaceBack(Ye+pt[Lt],Ye+pt[Lt+2],Ye+pt[Lt+1]),st.primitiveLength++;nt.indexCount+=pt.length,nt.vertexCount+=this.footprintVertices.length-nt.vertexOffset}for(let mt=0;mt<Ne.length;mt++){const tt=Ne[mt];G.startRing(q,tt[0]);let pt=tt.length>4&&nz(tt[tt.length-2],tt[0],tt[1]),Lt=Se?xX(tt[tt.length-2],tt[0],tt[1],Se):0;const vt=[];let Jt,Zt,Ct;Zt=tt[1].sub(tt[0])._perp()._unit();let vr=!0;for(let ar=1,Yt=0;ar<tt.length;ar++){let wt=tt[ar-1],gr=tt[ar];const jr=tt[ar===tt.length-1?1:ar+1];if(G.appendEdge(q,gr,wt),AT(gr,wt,Ge)){Se&&(Zt=jr.sub(gr)._perp()._unit(),vr=!vr);continue}const xr=gr.sub(wt)._perp(),$r=xr.x/(Math.abs(xr.x)+Math.abs(xr.y)),Ar=xr.y>0?1:0,sn=wt.dist(gr);if(Yt+sn>32768&&(Yt=0),Se){Ct=jr.sub(gr)._perp()._unit();let xn=tz(wt,gr,jr,ez(Zt,Ct),Se);isNaN(xn)&&(xn=0);const Tn=gr.sub(wt)._unit();wt=wt.add(Tn.mult(Lt))._round(),gr=gr.add(Tn.mult(-xn))._round(),Lt=xn,Zt=Ct,re&&this.zoom>=17&&(Me(vt,wt)||vt.push(wt),Me(vt,gr)||vt.push(gr))}const Mr=st.vertexLength,Gn=tt.length>4&&nz(wt,gr,jr);let _n=iz(Yt,pt,vr);if(Ty(this.layoutVertexArray,wt.x,wt.y,$r,Ar,0,0,_n),Ty(this.layoutVertexArray,wt.x,wt.y,$r,Ar,0,1,_n),Yt+=sn,_n=iz(Yt,Gn,!vr),pt=Gn,Ty(this.layoutVertexArray,gr.x,gr.y,$r,Ar,0,0,_n),Ty(this.layoutVertexArray,gr.x,gr.y,$r,Ar,0,1,_n),st.vertexLength+=4,this.indexArray.emplaceBack(Mr+0,Mr+1,Mr+2),this.indexArray.emplaceBack(Mr+1,Mr+3,Mr+2),st.primitiveLength+=2,Se){const xn=Ye+(ar===1?tt.length-2:ar-2),Tn=ar===1?Ye:xn+1;if(this.indexArray.emplaceBack(Mr+1,xn,Mr+3),this.indexArray.emplaceBack(xn,Tn,Mr+3),st.primitiveLength+=2,Jt===void 0&&(Jt=Mr),!AT(jr,tt[ar],Ge)){const yn=ar===tt.length-1?Jt:st.vertexLength;this.indexArray.emplaceBack(Mr+2,Mr+3,yn),this.indexArray.emplaceBack(Mr+3,yn+1,yn),this.indexArray.emplaceBack(Mr+3,Tn,yn+1),st.primitiveLength+=3}vr=!vr}if(z){const xn=this.layoutVertexExtArray,Tn=O.projectTilePoint(wt.x,wt.y,d),yn=O.projectTilePoint(gr.x,gr.y,d),ci=O.upVector(d,wt.x,wt.y),zn=O.upVector(d,gr.x,gr.y);Ay(xn,Tn,ci),Ay(xn,Tn,ci),Ay(xn,yn,zn),Ay(xn,yn,zn)}}$&&(Ye+=tt.length-1),re&&Se&&this.zoom>=17&&(vt.length!==0&&Me(vt,vt[0])&&vt.pop(),this.groundEffect.addData(vt,Ge,T,Se>0))}this.footprintSegments.push(nt),yt.triangleCount=this.indexArray.length-yt.triangleArrayOffset,this.polygonSegments.push(yt),++q.footprintSegLen,++q.polygonSegLen}if(q.vertexCount=this.layoutVertexArray.length-q.vertexArrayOffset,q.groundVertexCount=this.groundEffect.vertexArray.length-q.groundVertexArrayOffset,q.vertexCount!==0){if(q.centroidXY=G.borders?qR:this.encodeCentroid(G,q),this.centroidData.push(q),G.borders){this.featuresOnBorder.push(G);const Ne=this.featuresOnBorder.length-1;for(let Ge=0;Ge<G.borders.length;Ge++)G.borders[Ge][0]!==Number.MAX_VALUE&&this.borderFeatureIndices[Ge].push(Ne)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,c,m,y,d,S),this.groundEffect.addPaintPropertiesData(n,c,m,y,d,S),this.maxHeight=Math.max(this.maxHeight,ie)}}sortBorders(){for(let n=0;n<this.borderFeatureIndices.length;n++)this.borderFeatureIndices[n].sort((a,c)=>this.featuresOnBorder[a].borders[n][0]-this.featuresOnBorder[c].borders[n][0])}splitToSubtiles(){const n=[];for(let b=0;b<this.centroidData.length;b++){const S=this.centroidData[b],T=+(S.min.y+S.max.y>Ut),D=2*T+(+(S.min.x+S.max.x>Ut)^T);for(let O=0;O<S.polygonSegLen;O++){const z=S.polygonSegIdx+O;n.push({centroidIdx:b,subtile:D,polygonSegmentIdx:z,triangleSegmentIdx:this.polygonSegments[z].triangleSegIdx})}}const a=new po;n.sort((b,S)=>b.triangleSegmentIdx===S.triangleSegmentIdx?b.subtile-S.subtile:b.triangleSegmentIdx-S.triangleSegmentIdx);let c=0,d=0,m=0;for(const b of n){if(b.triangleSegmentIdx!==c)break;m++}const y=n.length;for(;d!==n.length;){c=n[d].triangleSegmentIdx;let b=0,S=d,T=d;for(let D=S;D<m&&n[D].subtile===b;D++)T++;for(;S!==m;){const D=n[S];b=D.subtile;const O=this.centroidData[D.centroidIdx].min.clone(),z=this.centroidData[D.centroidIdx].max.clone(),$={vertexOffset:this.segments.segments[c].vertexOffset,primitiveOffset:a.length,vertexLength:this.segments.segments[c].vertexLength,primitiveLength:0,sortKey:void 0,vaos:{}};for(let G=S;G<T;G++){const q=n[G],re=this.polygonSegments[q.polygonSegmentIdx],ie=this.centroidData[q.centroidIdx].min,fe=this.centroidData[q.centroidIdx].max,_e=this.indexArray.uint16;for(let ge=re.triangleArrayOffset;ge<re.triangleArrayOffset+re.triangleCount;ge++)a.emplaceBack(_e[3*ge],_e[3*ge+1],_e[3*ge+2]);$.primitiveLength+=re.triangleCount,O.x=Math.min(O.x,ie.x),O.y=Math.min(O.y,ie.y),z.x=Math.max(z.x,fe.x),z.y=Math.max(z.y,fe.y)}$.primitiveLength>0&&this.triangleSubSegments.push({segment:$,min:O,max:z}),S=T;for(let G=S;G<m&&n[G].subtile===n[S].subtile;G++)T++}d=m;for(let D=d;D<y&&n[D].triangleSegmentIdx===n[d].triangleSegmentIdx;D++)m++}a._trim(),this.indexArray=a}getVisibleSegments(n,a,c){let d=0,m=0;const y=1<<n.canonical.z;if(a){const q=a.getMinMaxForTile(n);q&&(d=q.min,m=q.max)}m+=this.maxHeight;const b=n.toUnwrapped();let S;const T=[b.canonical.x/y+b.wrap,b.canonical.y/y],D=[(b.canonical.x+1)/y+b.wrap,(b.canonical.y+1)/y],O=new Ei,z=(q,re,ie)=>[q[0]*(1-ie[0])+re[0]*ie[0],q[1]*(1-ie[1])+re[1]*ie[1]],$=[],G=[];for(const q of this.triangleSubSegments){$[0]=q.min.x/Ut,$[1]=q.min.y/Ut,G[0]=q.max.x/Ut,G[1]=q.max.y/Ut;const re=z(T,D,$),ie=z(T,D,G);if(new xi([re[0],re[1],d],[ie[0],ie[1],m]).intersectsPrecise(c)===0){S&&(O.segments.push(S),S=void 0);continue}const fe=q.segment;S&&S.vertexOffset!==fe.vertexOffset&&(O.segments.push(S),S=void 0),S?(S.vertexLength+=fe.vertexLength,S.primitiveLength+=fe.primitiveLength):S={vertexOffset:fe.vertexOffset,primitiveLength:fe.primitiveLength,vertexLength:fe.vertexLength,primitiveOffset:fe.primitiveOffset,sortKey:void 0,vaos:{}}}return S&&O.segments.push(S),O}encodeCentroid(n,a){const c=n.centroid(),d=a.span(),m=Math.min(7,Math.round(d.x*this.tileToMeter/10)),y=Math.min(7,Math.round(d.y*this.tileToMeter/10));return new De(Le(c.x,1,Ut-1)<<3|m,Le(c.y,1,Ut-1)<<3|y)}encodeBorderCentroid(n){if(!n.borders)return new De(0,0);const a=n.borders,c=Number.MAX_VALUE;if(a[0][0]!==c||a[1][0]!==c){const d=a[0][0]!==c?0:1;return new De(6|(a[0][0]!==c?0:65528),(a[d][0]+a[d][1])/2<<3|6)}{const d=a[2][0]!==c?2:3;return new De((a[d][0]+a[d][1])/2<<3|6,6|(a[2][0]!==c?0:65528))}}showCentroid(n){const a=this.centroidData[n.centroidDataIndex];a.flags&=cf,a.centroidXY.x=0,a.centroidXY.y=0,this.writeCentroidToBuffer(a)}writeCentroidToBuffer(n){this.groundEffect.updateHiddenByLandmark(n);const a=n.vertexArrayOffset,c=n.vertexCount+n.vertexArrayOffset,d=n.flags&cf?qR:n.centroidXY,m=this.centroidVertexArray.geta_centroid_pos0(a);if(this.centroidVertexArray.geta_centroid_pos1(a)!==d.y||m!==d.x){for(let y=a;y<c;++y)this.centroidVertexArray.emplace(y,d.x,d.y);this.needsCentroidUpdate=!0}}createCentroidsBuffer(){this.centroidVertexArray.resize(this.layoutVertexArray.length),this.groundEffect.hiddenByLandmarkVertexArray.resize(this.groundEffect.vertexArray.length);for(const n of this.centroidData)this.writeCentroidToBuffer(n)}updateReplacement(n,a){if(a.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=a.updateTime;const c=a.getReplacementRegionsForTile(n.toUnwrapped());if(function(m,y){if(m.length!==y.length)return!1;for(let b=0;b<m.length;b++)if(m[b].sourceId!==y[b].sourceId||!RR(m[b],y[b]))return!1;return!0}(this.activeReplacements,c))return;if(this.activeReplacements=c,this.centroidVertexArray.length===0)this.createCentroidsBuffer();else for(const m of this.centroidData)m.flags&=2147483647;const d=[];for(const m of this.activeReplacements){const y=Math.pow(2,m.footprintTileId.canonical.z-n.canonical.z);for(const b of this.centroidData)if(!(b.flags&cf||m.min.x>b.max.x||b.min.x>m.max.x||m.min.y>b.max.y||b.min.y>m.max.y))for(let S=0;S<b.footprintSegLen;S++){const T=this.footprintSegments[b.footprintSegIdx+S];if(d.length=0,bX(this.footprintVertices,T.vertexOffset,T.vertexCount,m.footprintTileId.canonical,n.canonical,d),FR(m.footprint,d,this.footprintIndices.uint16,T.indexOffset,T.indexCount,-T.vertexOffset,-y)){b.flags|=cf;break}}}for(const m of this.centroidData)this.writeCentroidToBuffer(m);this.borderDoneWithNeighborZ=[-1,-1,-1,-1]}footprintContainsPoint(n,a,c){let d=!1;for(let m=0;m<c.footprintSegLen;m++){const y=this.footprintSegments[c.footprintSegIdx+m];let b=0;for(const S of y.ringIndices){for(let T=b,D=S+b-1;T<S+b;D=T++){const O=this.footprintVertices.int16[2*(T+y.vertexOffset)+0],z=this.footprintVertices.int16[2*(T+y.vertexOffset)+1],$=this.footprintVertices.int16[2*(D+y.vertexOffset)+1];z>a!=$>a&&n<(this.footprintVertices.int16[2*(D+y.vertexOffset)+0]-O)*(a-z)/($-z)+O&&(d=!d)}b=S}}return d}getHeightAtTileCoord(n,a){let c=Number.NEGATIVE_INFINITY,d=!0;const m=4*(n+Ut)*Ut+(a+Ut);if(this.partLookup.hasOwnProperty(m)){const y=this.partLookup[m];return y?{height:y.height,hidden:!!(y.flags&cf)}:void 0}for(const y of this.centroidData)n>y.max.x||y.min.x>n||a>y.max.y||y.min.y>a||this.footprintContainsPoint(n,a,y)&&y&&y.height>c&&(c=y.height,this.partLookup[m]=y,d=!!(y.flags&cf));if(c!==Number.NEGATIVE_INFINITY)return{height:c,hidden:d};this.partLookup[m]=void 0}}function ez(i,n){const a=i.add(n)._unit();return i.x*a.x+i.y*a.y}function xX(i,n,a,c){const d=n.sub(i)._perp()._unit(),m=a.sub(n)._perp()._unit();return tz(i,n,a,ez(d,m),c)}function tz(i,n,a,c,d){const m=Math.sqrt(1-c*c);return Math.min(i.dist(n)/3,n.dist(a)/3,d*m/c)}function AT(i,n,a){return i.x<a[0].x&&n.x<a[0].x||i.x>a[1].x&&n.x>a[1].x||i.y<a[0].y&&n.y<a[0].y||i.y>a[1].y&&n.y>a[1].y}function rz(i,n){return i.x<n[0].x||i.x>n[1].x||i.y<n[0].y||i.y>n[1].y}function nz(i,n,a){if(i.x<0||i.x>=Ut||n.x<0||n.x>=Ut||a.x<0||a.x>=Ut)return!1;const c=a.sub(n),d=c.perp(),m=i.sub(n);return(c.x*m.x+c.y*m.y)/Math.sqrt((c.x*c.x+c.y*c.y)*(m.x*m.x+m.y*m.y))>-.866&&d.x*m.x+d.y*m.y<0}function iz(i,n,a){const c=n?2|i:-3&i;return a?1|c:-2&c}function oz(){const i=Math.PI/32,n=Math.tan(i),a=rt;return a*Math.sqrt(1+2*n*n)-a}function az(i,n,a){const c=1<<a.z,d=Dr(a.x/c),m=Dr((a.x+1)/c),y=un(a.y/c),b=un((a.y+1)/c);return function(S,T,D,O,z=0,$){const G=[];if(!S.length||!D||!O)return G;const q=(be,Me)=>{for(const Ne of be)G.push({polygon:Ne,bounds:Me})},re=Math.ceil(Math.log2(D)),ie=Math.ceil(Math.log2(O)),fe=re-ie,_e=[];for(let be=0;be<Math.abs(fe);be++)_e.push(fe>0?0:1);for(let be=0;be<Math.min(re,ie);be++)_e.push(0),_e.push(1);let ge=S;if(ge=z1(ge,T[0].y-z,T[1].y+z,1),ge=z1(ge,T[0].x-z,T[1].x+z,0),!ge.length)return G;const Se=[];for(_e.length?Se.push({polygons:ge,bounds:T,depth:0}):q(ge,T);Se.length;){const be=Se.pop(),Me=be.depth,Ne=_e[Me],Ge=be.bounds[0],Ye=be.bounds[1],He=Ne===0?Ge.x:Ge.y,st=Ne===0?Ye.x:Ye.y,yt=$?$(Ne,He,st):.5*(He+st),nt=z1(be.polygons,He-z,yt+z,Ne),mt=z1(be.polygons,yt-z,st+z,Ne);if(nt.length){const tt=[Ge,new De(Ne===0?yt:Ye.x,Ne===1?yt:Ye.y)];_e.length>Me+1?Se.push({polygons:nt,bounds:tt,depth:Me+1}):q(nt,tt)}if(mt.length){const tt=[new De(Ne===0?yt:Ge.x,Ne===1?yt:Ge.y),Ye];_e.length>Me+1?Se.push({polygons:mt,bounds:tt,depth:Me+1}):q(mt,tt)}}return G}(i,n,Math.ceil((m-d)/11.25),Math.ceil((y-b)/11.25),1,(S,T,D)=>{if(S===0)return .5*(T+D);{const O=un((a.y+T/Ut)/c);return(Cr(.5*(un((a.y+D/Ut)/c)+O))*c-a.y)*Ut}})}function bX(i,n,a,c,d,m){const y=Math.pow(2,c.z-d.z);for(let b=0;b<a;b++){let S=i.int16[2*(b+n)+0],T=i.int16[2*(b+n)+1];S=(S+d.x*Ut)*y-c.x*Ut,T=(T+d.y*Ut)*y-c.y*Ut,m.push(new De(S,T))}}Kt($1,"FillExtrusionBucket",{omit:["layers","features"]}),Kt(XR,"PartData"),Kt(KR,"FootprintSegment"),Kt(YR,"BorderCentroidData"),Kt(QR,"GroundEffect");const CX=new mi({visibility:new Ot(Ke["layout_fill-extrusion"].visibility),"fill-extrusion-edge-radius":new Ot(Ke["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var wX={paint:new mi({"fill-extrusion-opacity":new Ot(Ke["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new pr(Ke["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ot(Ke["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ot(Ke["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new pr(Ke["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new pr(Ke["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new pr(Ke["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ot(Ke["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Ot(Ke["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Ot(Ke["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-ambient-occlusion-wall-radius":new Ot(Ke["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-wall-radius"]),"fill-extrusion-ambient-occlusion-ground-radius":new Ot(Ke["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-radius"]),"fill-extrusion-ambient-occlusion-ground-attenuation":new Ot(Ke["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-attenuation"]),"fill-extrusion-flood-light-color":new Ot(Ke["paint_fill-extrusion"]["fill-extrusion-flood-light-color"]),"fill-extrusion-flood-light-intensity":new Ot(Ke["paint_fill-extrusion"]["fill-extrusion-flood-light-intensity"]),"fill-extrusion-flood-light-wall-radius":new pr(Ke["paint_fill-extrusion"]["fill-extrusion-flood-light-wall-radius"]),"fill-extrusion-flood-light-ground-radius":new pr(Ke["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-radius"]),"fill-extrusion-flood-light-ground-attenuation":new Ot(Ke["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-attenuation"]),"fill-extrusion-vertical-scale":new Ot(Ke["paint_fill-extrusion"]["fill-extrusion-vertical-scale"]),"fill-extrusion-rounded-roof":new Ot(Ke["paint_fill-extrusion"]["fill-extrusion-rounded-roof"]),"fill-extrusion-cutoff-fade-range":new Ot(Ke["paint_fill-extrusion"]["fill-extrusion-cutoff-fade-range"]),"fill-extrusion-emissive-strength":new Ot(Ke["paint_fill-extrusion"]["fill-extrusion-emissive-strength"])}),layout:CX};class Pm extends De{constructor(n,a,c){super(n,a),this.z=c}}function Ey(i,n){return i.x*n.x+i.y*n.y}function sz(i,n){if(i.length===1){let a=0;const c=n[a++];let d;for(;!d||c.equals(d);)if(d=n[a++],!d)return 1/0;for(;a<n.length;a++){const m=n[a],y=i[0],b=d.sub(c),S=m.sub(c),T=y.sub(c),D=Ey(b,b),O=Ey(b,S),z=Ey(S,S),$=Ey(T,b),G=Ey(T,S),q=D*z-O*O,re=(z*$-O*G)/q,ie=(D*G-O*$)/q,fe=c.z*(1-re-ie)+d.z*re+m.z*ie;if(isFinite(fe))return fe}return 1/0}{let a=1/0;for(const c of n)a=Math.min(a,c.z);return a}}function lz(i,n,a,c,d,m,y,b){const S=y*d.getElevationAt(i,n,!0,!0),T=m[0]!==0,D=T?m[1]===0?y*(m[0]/7-450):y*function(O,z,$){const G=Math.floor(z[0]/8),q=Math.floor(z[1]/8),re=10*(z[0]-8*G),ie=10*(z[1]-8*q),fe=O.getElevationAt(G,q,!0,!0),_e=O.getMeterToDEM($),ge=Math.floor(.5*(re*_e-1)),Se=Math.floor(.5*(ie*_e-1)),be=O.tileCoordToPixel(G,q),Me=2*ge+1,Ne=2*Se+1,Ge=function(mt,tt,pt,Lt,vt){return[mt.getElevationAtPixel(tt,pt,!0),mt.getElevationAtPixel(tt+vt,pt,!0),mt.getElevationAtPixel(tt,pt+vt,!0),mt.getElevationAtPixel(tt+Lt,pt+vt,!0)]}(O,be.x-ge,be.y-Se,Me,Ne),Ye=Math.abs(Ge[0]-Ge[1]),He=Math.abs(Ge[2]-Ge[3]),st=Math.abs(Ge[0]-Ge[2])+Math.abs(Ge[1]-Ge[3]),yt=Math.min(.25,.5*_e*(Ye+He)/Me),nt=Math.min(.25,.5*_e*st/Ne);return fe+Math.max(yt*re,nt*ie)}(d,m,b):S;return{base:S+(a===0)?-1:a,top:T?Math.max(D+c,S+a+2):S+c}}const SX=Mn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:TX}=SX,AX=Mn([{name:"a_packed",components:4,type:"Float32"}]),{members:EX}=AX;class uz{constructor(n,a){this.width=n,this.height=a,this.nextRow=0,this.image=new lf({width:n,height:a}),this.positions={},this.uploaded=!1}getDash(n,a){const c=this.getKey(n,a);return this.positions[c]}trim(){const n=this.width,a=this.height=zr(this.nextRow);this.image.resize({width:n,height:a})}getKey(n,a){return n.join(",")+a}getDashRanges(n,a,c){const d=[];let m=n.length%2==1?-n[n.length-1]*c:0,y=n[0]*c,b=!0;d.push({left:m,right:y,isDash:b,zeroLength:n[0]===0});let S=n[0];for(let T=1;T<n.length;T++){b=!b;const D=n[T];m=S*c,S+=D,y=S*c,d.push({left:m,right:y,isDash:b,zeroLength:D===0})}return d}addRoundDash(n,a,c){const d=a/2;for(let m=-c;m<=c;m++){const y=this.width*(this.nextRow+c+m);let b=0,S=n[b];for(let T=0;T<this.width;T++){T/S.right>1&&(S=n[++b]);const D=Math.abs(T-S.left),O=Math.abs(T-S.right),z=Math.min(D,O);let $;const G=m/c*(d+1);if(S.isDash){const q=d-Math.abs(G);$=Math.sqrt(z*z+q*q)}else $=d-Math.sqrt(z*z+G*G);this.image.data[y+T]=Math.max(0,Math.min(255,$+128))}}}addRegularDash(n,a){for(let S=n.length-1;S>=0;--S){const T=n[S],D=n[S+1];T.zeroLength?n.splice(S,1):D&&D.isDash===T.isDash&&(D.left=T.left,n.splice(S,1))}const c=n[0],d=n[n.length-1];c.isDash===d.isDash&&(c.left=d.left-this.width,d.right=c.right+this.width);const m=this.width*this.nextRow;let y=0,b=n[y];for(let S=0;S<this.width;S++){S/b.right>1&&(b=n[++y]);const T=Math.abs(S-b.left),D=Math.abs(S-b.right),O=Math.min(T,D);this.image.data[m+S]=Math.max(0,Math.min(255,(b.isDash?O:-O)+a+128))}}addDash(n,a){const c=this.getKey(n,a);if(this.positions[c])return this.positions[c];const d=a==="round",m=d?7:0,y=2*m+1;if(this.nextRow+y>this.height)return Er("LineAtlas out of space"),null;n.length===0&&n.push(1);let b=0;for(let D=0;D<n.length;D++)n[D]<0&&(Er("Negative value is found in line dasharray, replacing values with 0"),n[D]=0),b+=n[D];if(b!==0){const D=this.width/b,O=this.getDashRanges(n,this.width,D);d?this.addRoundDash(O,D,m):this.addRegularDash(O,a==="square"?.5*D:0)}const S=this.nextRow+m;this.nextRow+=y;const T={tl:[S,m],br:[b,0]};return this.positions[c]=T,T}}Kt(uz,"LineAtlas");const DX=R1.types,PX=Math.cos(Math.PI/180*37.5);class ET{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(a=>a.fqid),this.index=n.index,this.projection=n.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(a=>{this.gradients[a.id]={}}),this.layoutVertexArray=new ay,this.layoutVertexArray2=new Ju,this.indexArray=new po,this.programConfigurations=new le(n.layers,n.zoom),this.segments=new Ei,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(n,a,c,d){this.hasPattern=CT("line",this.layers,a);const m=this.layers[0].layout.get("line-sort-key"),y=[];for(const{feature:D,id:O,index:z,sourceLayerIndex:$}of n){const G=this.layers[0]._featureFilter.needGeometry,q=to(D,G);if(!this.layers[0]._featureFilter.filter(new pi(this.zoom),q,c))continue;const re=m?m.evaluate(q,{},c):void 0,ie={id:O,properties:D.properties,type:D.type,sourceLayerIndex:$,index:z,geometry:G?q.geometry:go(D,c,d),patterns:{},sortKey:re};y.push(ie)}m&&y.sort((D,O)=>D.sortKey-O.sortKey);const{lineAtlas:b,featureIndex:S}=a,T=this.addConstantDashes(b);for(const D of y){const{geometry:O,index:z,sourceLayerIndex:$}=D;if(T&&this.addFeatureDashes(D,b),this.hasPattern){const G=wT("line",this.layers,D,this.zoom,a);this.patternFeatures.push(G)}else this.addFeature(D,O,z,c,b.positions,a.availableImages,a.brightness);S.insert(n[z].feature,O,z,$,this.index)}}addConstantDashes(n){let a=!1;for(const c of this.layers){const d=c.paint.get("line-dasharray").value,m=c.layout.get("line-cap").value;if(d.kind!=="constant"||m.kind!=="constant")a=!0;else{const y=m.value,b=d.value;if(!b)continue;n.addDash(b,y)}}return a}addFeatureDashes(n,a){const c=this.zoom;for(const d of this.layers){const m=d.paint.get("line-dasharray").value,y=d.layout.get("line-cap").value;if(m.kind==="constant"&&y.kind==="constant")continue;let b,S;if(m.kind==="constant"){if(b=m.value,!b)continue}else b=m.evaluate({zoom:c},n);S=y.kind==="constant"?y.value:y.evaluate({zoom:c},n),a.addDash(b,S),n.patterns[d.id]=a.getKey(b,S)}}update(n,a,c,d,m){const y=Object.keys(n).length!==0;y&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(n,a,y?this.stateDependentLayers:this.layers,c,d,m)}addFeatures(n,a,c,d,m,y){for(const b of this.patternFeatures)this.addFeature(b,b.geometry,b.index,a,c,d,y)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,EX)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,TX),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&n.properties.hasOwnProperty("mapbox_clip_start")&&n.properties.hasOwnProperty("mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,a,c,d,m,y,b){const S=this.layers[0].layout,T=S.get("line-join").evaluate(n,{}),D=S.get("line-cap").evaluate(n,{}),O=S.get("line-miter-limit"),z=S.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const $ of a)this.addLine($,n,T,D,O,z);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,c,m,y,d,b)}addLine(n,a,c,d,m,y){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ie=0;ie<n.length-1;ie++)this.totalDistance+=n[ie].dist(n[ie+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const b=DX[a.type]==="Polygon";let S=n.length;for(;S>=2&&n[S-1].equals(n[S-2]);)S--;let T=0;for(;T<S-1&&n[T].equals(n[T+1]);)T++;if(S<(b?3:2))return;c==="bevel"&&(m=1.05);const D=this.overscaling<=16?15*Ut/(512*this.overscaling):0,O=this.segments.prepareSegment(10*S,this.layoutVertexArray,this.indexArray);let z,$,G,q,re;this.e1=this.e2=-1,b&&(z=n[S-2],re=n[T].sub(z)._unit()._perp());for(let ie=T;ie<S;ie++){if(G=ie===S-1?b?n[T+1]:void 0:n[ie+1],G&&n[ie].equals(G))continue;re&&(q=re),z&&($=z),z=n[ie],re=G?G.sub(z)._unit()._perp():q,q=q||re;let fe=q.add(re);fe.x===0&&fe.y===0||fe._unit();const _e=q.x*re.x+q.y*re.y,ge=fe.x*re.x+fe.y*re.y,Se=ge!==0?1/ge:1/0,be=2*Math.sqrt(2-2*ge),Me=ge<PX&&$&&G,Ne=q.x*re.y-q.y*re.x>0;if(Me&&ie>T){const He=z.dist($);if(He>2*D){const st=z.sub(z.sub($)._mult(D/He)._round());this.updateDistance($,st),this.addCurrentVertex(st,q,0,0,O),$=st}}const Ge=$&&G;let Ye=Ge?c:b?"butt":d;if(Ge&&Ye==="round"&&(Se<y?Ye="miter":Se<=2&&(Ye="fakeround")),Ye==="miter"&&Se>m&&(Ye="bevel"),Ye==="bevel"&&(Se>2&&(Ye="flipbevel"),Se<m&&(Ye="miter")),$&&this.updateDistance($,z),Ye==="miter")fe._mult(Se),this.addCurrentVertex(z,fe,0,0,O);else if(Ye==="flipbevel"){if(Se>100)fe=re.mult(-1);else{const He=Se*q.add(re).mag()/q.sub(re).mag();fe._perp()._mult(He*(Ne?-1:1))}this.addCurrentVertex(z,fe,0,0,O),this.addCurrentVertex(z,fe.mult(-1),0,0,O)}else if(Ye==="bevel"||Ye==="fakeround"){const He=-Math.sqrt(Se*Se-1),st=Ne?He:0,yt=Ne?0:He;if($&&this.addCurrentVertex(z,q,st,yt,O),Ye==="fakeround"){const nt=Math.round(180*be/Math.PI/20);for(let mt=1;mt<nt;mt++){let tt=mt/nt;if(tt!==.5){const Lt=tt-.5;tt+=tt*Lt*(tt-1)*((1.0904+_e*(_e*(3.55645-1.43519*_e)-3.2452))*Lt*Lt+(.848013+_e*(.215638*_e-1.06021)))}const pt=re.sub(q)._mult(tt)._add(q)._unit()._mult(Ne?-1:1);this.addHalfVertex(z,pt.x,pt.y,!1,Ne,0,O)}}G&&this.addCurrentVertex(z,re,-st,-yt,O)}else if(Ye==="butt")this.addCurrentVertex(z,fe,0,0,O);else if(Ye==="square"){const He=$?1:-1;$||this.addCurrentVertex(z,fe,He,He,O),this.addCurrentVertex(z,fe,0,0,O),$&&this.addCurrentVertex(z,fe,He,He,O)}else Ye==="round"&&($&&(this.addCurrentVertex(z,q,0,0,O),this.addCurrentVertex(z,q,1,1,O,!0)),G&&(this.addCurrentVertex(z,re,-1,-1,O,!0),this.addCurrentVertex(z,re,0,0,O)));if(Me&&ie<S-1){const He=z.dist(G);if(He>2*D){const st=z.add(G.sub(z)._mult(D/He)._round());this.updateDistance(z,st),this.addCurrentVertex(st,re,0,0,O),z=st}}}}addCurrentVertex(n,a,c,d,m,y=!1){const b=a.y*d-a.x,S=-a.y-a.x*d;this.addHalfVertex(n,a.x+a.y*c,a.y-a.x*c,y,!1,c,m),this.addHalfVertex(n,b,S,y,!0,-d,m)}addHalfVertex({x:n,y:a},c,d,m,y,b,S){this.layoutVertexArray.emplaceBack((n<<1)+(m?1:0),(a<<1)+(y?1:0),Math.round(63*c)+128,Math.round(63*d)+128,1+(b===0?0:b<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const T=S.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,T),S.primitiveLength++),y?this.e2=T:this.e1=T}updateScaledDistance(){if(this.lineClips){const n=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=n*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(n,a){this.distance+=n.dist(a),this.updateScaledDistance()}}Kt(ET,"LineBucket",{omit:["layers","patternFeatures"]});const MX=new mi({"line-cap":new pr(Ke.layout_line["line-cap"]),"line-join":new pr(Ke.layout_line["line-join"]),"line-miter-limit":new Ot(Ke.layout_line["line-miter-limit"]),"line-round-limit":new Ot(Ke.layout_line["line-round-limit"]),"line-sort-key":new pr(Ke.layout_line["line-sort-key"]),visibility:new Ot(Ke.layout_line.visibility)});var cz={paint:new mi({"line-opacity":new pr(Ke.paint_line["line-opacity"]),"line-color":new pr(Ke.paint_line["line-color"]),"line-translate":new Ot(Ke.paint_line["line-translate"]),"line-translate-anchor":new Ot(Ke.paint_line["line-translate-anchor"]),"line-width":new pr(Ke.paint_line["line-width"]),"line-gap-width":new pr(Ke.paint_line["line-gap-width"]),"line-offset":new pr(Ke.paint_line["line-offset"]),"line-blur":new pr(Ke.paint_line["line-blur"]),"line-dasharray":new pr(Ke.paint_line["line-dasharray"]),"line-pattern":new pr(Ke.paint_line["line-pattern"]),"line-gradient":new Wc(Ke.paint_line["line-gradient"]),"line-trim-offset":new Ot(Ke.paint_line["line-trim-offset"]),"line-emissive-strength":new Ot(Ke.paint_line["line-emissive-strength"]),"line-border-width":new pr(Ke.paint_line["line-border-width"]),"line-border-color":new pr(Ke.paint_line["line-border-color"])}),layout:MX};function hz(i,n,a){return n*(Ut/(i.tileSize*Math.pow(2,a-i.tileID.overscaledZ)))}function fz(i,n){return 1/hz(i,1,n.tileZoom)}function dz(i,n,a,c){return i.translatePosMatrix(c||n.tileID.projMatrix,n,a.paint.get("line-translate"),a.paint.get("line-translate-anchor"))}const pz=i=>{const n=[];mz(i)&&n.push("RENDER_LINE_DASH"),i.paint.get("line-gradient")&&n.push("RENDER_LINE_GRADIENT");const a=i.paint.get("line-trim-offset");return a[0]===0&&a[1]===0||n.push("RENDER_LINE_TRIM_OFFSET"),i.paint.get("line-border-width").constantOr(1)!==0&&n.push("RENDER_LINE_BORDER"),n};function mz(i){const n=i.paint.get("line-dasharray").value;return n.value||n.kind!=="constant"}const gz=new class extends pr{possiblyEvaluate(i,n){return n=new pi(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,transition:n.transition}),super.possiblyEvaluate(i,n)}evaluate(i,n,a,c){return n=Wt({},n,{zoom:Math.floor(n.zoom)}),super.evaluate(i,n,a,c)}}(cz.paint.properties["line-width"].specification);function _z(i,n){return n>0?n+2*i:i}gz.useIntegerZoom=!0;const IX=Mn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),OX=Mn([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),kX=Mn([{name:"a_projected_pos",components:4,type:"Float32"}],4);Mn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const LX=Mn([{name:"a_z_offset",components:1,type:"Float32"}],4),RX=Mn([{name:"a_texb",components:2,type:"Uint16"}]),zX=Mn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),NX=Mn([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"},{name:"a_z_offset",components:1,type:"Float32"}]);Mn([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const yz=Mn([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),FX=Mn([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Mn([{name:"triangle",components:3,type:"Uint16"}]),Mn([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Mn([{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Float32",name:"zOffset"},{type:"Uint8",name:"hasIconTextFit"}]),Mn([{type:"Float32",name:"offsetX"}]),Mn([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var Uo=24;const uu=128;function DT(i,n){const{expression:a}=n;if(a.kind==="constant")return{kind:"constant",layoutSize:a.evaluate(new pi(i+1))};if(a.kind==="source")return{kind:"source"};{const{zoomStops:c,interpolationType:d}=a;let m=0;for(;m<c.length&&c[m]<=i;)m++;m=Math.max(0,m-1);let y=m;for(;y<c.length&&c[y]<i+1;)y++;y=Math.min(c.length-1,y);const b=c[m],S=c[y];return a.kind==="composite"?{kind:"composite",minZoom:b,maxZoom:S,interpolationType:d}:{kind:"camera",minZoom:b,maxZoom:S,minSize:a.evaluate(new pi(b)),maxSize:a.evaluate(new pi(S)),interpolationType:d}}}function U1(i,{uSize:n,uSizeT:a},{lowerSize:c,upperSize:d}){return i.kind==="source"?c/uu:i.kind==="composite"?Zr(c/uu,d/uu,a):n}function Mm(i,n){let a=0,c=0;if(i.kind==="constant")c=i.layoutSize;else if(i.kind!=="source"){const{interpolationType:d,minZoom:m,maxZoom:y}=i,b=d?Le(ea.interpolationFactor(d,n,m,y),0,1):0;i.kind==="camera"?c=Zr(i.minSize,i.maxSize,b):a=b}return{uSizeT:a,uSize:c}}var jX=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:uu,evaluateSizeForFeature:U1,evaluateSizeForZoom:Mm,getSizeData:DT});function $X(i,n,a){return i.sections.forEach(c=>{c.text=function(d,m,y){const b=m.layout.get("text-transform").evaluate(y,{});return b==="uppercase"?d=d.toLocaleUpperCase():b==="lowercase"&&(d=d.toLocaleLowerCase()),Ja.applyArabicShaping&&(d=Ja.applyArabicShaping(d)),d}(c.text,n,a)}),i}const Dy={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};function UX(i){return i===""||i===""||i===""||i===""||i===""||i===""||i===""||i===""||i===""||i===""||i===""||i===""||i===""||i===""||i===""||i===""||i===""}function VX(i){return i===""||i===""||i===""||i===""||i===""||i===""||i===""||i===""||i===""||i===""}var GX={read:function(i,n,a,c,d){var m,y,b=8*d-c-1,S=(1<<b)-1,T=S>>1,D=-7,O=a?d-1:0,z=a?-1:1,$=i[n+O];for(O+=z,m=$&(1<<-D)-1,$>>=-D,D+=b;D>0;m=256*m+i[n+O],O+=z,D-=8);for(y=m&(1<<-D)-1,m>>=-D,D+=c;D>0;y=256*y+i[n+O],O+=z,D-=8);if(m===0)m=1-T;else{if(m===S)return y?NaN:1/0*($?-1:1);y+=Math.pow(2,c),m-=T}return($?-1:1)*y*Math.pow(2,m-c)},write:function(i,n,a,c,d,m){var y,b,S,T=8*m-d-1,D=(1<<T)-1,O=D>>1,z=d===23?Math.pow(2,-24)-Math.pow(2,-77):0,$=c?0:m-1,G=c?1:-1,q=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(b=isNaN(n)?1:0,y=D):(y=Math.floor(Math.log(n)/Math.LN2),n*(S=Math.pow(2,-y))<1&&(y--,S*=2),(n+=y+O>=1?z/S:z*Math.pow(2,1-O))*S>=2&&(y++,S/=2),y+O>=D?(b=0,y=D):y+O>=1?(b=(n*S-1)*Math.pow(2,d),y+=O):(b=n*Math.pow(2,O-1)*Math.pow(2,d),y=0));d>=8;i[a+$]=255&b,$+=G,b/=256,d-=8);for(y=y<<d|b,T+=d;T>0;i[a+$]=255&y,$+=G,y/=256,T-=8);i[a+$-G]|=128*q}},vz=ui,V1=GX;function ui(i){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(i)?i:new Uint8Array(i||0),this.pos=0,this.type=0,this.length=this.buf.length}ui.Varint=0,ui.Fixed64=1,ui.Bytes=2,ui.Fixed32=5;var PT=4294967296,Bz=1/PT,xz=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function eh(i){return i.type===ui.Bytes?i.readVarint()+i.pos:i.pos+1}function Im(i,n,a){return a?4294967296*n+(i>>>0):4294967296*(n>>>0)+(i>>>0)}function bz(i,n,a){var c=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));a.realloc(c);for(var d=a.pos-1;d>=i;d--)a.buf[d+c]=a.buf[d]}function HX(i,n){for(var a=0;a<i.length;a++)n.writeVarint(i[a])}function WX(i,n){for(var a=0;a<i.length;a++)n.writeSVarint(i[a])}function ZX(i,n){for(var a=0;a<i.length;a++)n.writeFloat(i[a])}function qX(i,n){for(var a=0;a<i.length;a++)n.writeDouble(i[a])}function KX(i,n){for(var a=0;a<i.length;a++)n.writeBoolean(i[a])}function XX(i,n){for(var a=0;a<i.length;a++)n.writeFixed32(i[a])}function YX(i,n){for(var a=0;a<i.length;a++)n.writeSFixed32(i[a])}function JX(i,n){for(var a=0;a<i.length;a++)n.writeFixed64(i[a])}function QX(i,n){for(var a=0;a<i.length;a++)n.writeSFixed64(i[a])}function G1(i,n){return(i[n]|i[n+1]<<8|i[n+2]<<16)+16777216*i[n+3]}function Om(i,n,a){i[a]=n,i[a+1]=n>>>8,i[a+2]=n>>>16,i[a+3]=n>>>24}function Cz(i,n){return(i[n]|i[n+1]<<8|i[n+2]<<16)+(i[n+3]<<24)}ui.prototype={destroy:function(){this.buf=null},readFields:function(i,n,a){for(a=a||this.length;this.pos<a;){var c=this.readVarint(),d=c>>3,m=this.pos;this.type=7&c,i(d,n,this),this.pos===m&&this.skip(c)}return n},readMessage:function(i,n){return this.readFields(i,n,this.readVarint()+this.pos)},readFixed32:function(){var i=G1(this.buf,this.pos);return this.pos+=4,i},readSFixed32:function(){var i=Cz(this.buf,this.pos);return this.pos+=4,i},readFixed64:function(){var i=G1(this.buf,this.pos)+G1(this.buf,this.pos+4)*PT;return this.pos+=8,i},readSFixed64:function(){var i=G1(this.buf,this.pos)+Cz(this.buf,this.pos+4)*PT;return this.pos+=8,i},readFloat:function(){var i=V1.read(this.buf,this.pos,!0,23,4);return this.pos+=4,i},readDouble:function(){var i=V1.read(this.buf,this.pos,!0,52,8);return this.pos+=8,i},readVarint:function(i){var n,a,c=this.buf;return n=127&(a=c[this.pos++]),a<128?n:(n|=(127&(a=c[this.pos++]))<<7,a<128?n:(n|=(127&(a=c[this.pos++]))<<14,a<128?n:(n|=(127&(a=c[this.pos++]))<<21,a<128?n:function(d,m,y){var b,S,T=y.buf;if(b=(112&(S=T[y.pos++]))>>4,S<128||(b|=(127&(S=T[y.pos++]))<<3,S<128)||(b|=(127&(S=T[y.pos++]))<<10,S<128)||(b|=(127&(S=T[y.pos++]))<<17,S<128)||(b|=(127&(S=T[y.pos++]))<<24,S<128)||(b|=(1&(S=T[y.pos++]))<<31,S<128))return Im(d,b,m);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(a=c[this.pos]))<<28,i,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var i=this.readVarint();return i%2==1?(i+1)/-2:i/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var i=this.readVarint()+this.pos,n=this.pos;return this.pos=i,i-n>=12&&xz?function(a,c,d){return xz.decode(a.subarray(c,d))}(this.buf,n,i):function(a,c,d){for(var m="",y=c;y<d;){var b,S,T,D=a[y],O=null,z=D>239?4:D>223?3:D>191?2:1;if(y+z>d)break;z===1?D<128&&(O=D):z===2?(192&(b=a[y+1]))==128&&(O=(31&D)<<6|63&b)<=127&&(O=null):z===3?(S=a[y+2],(192&(b=a[y+1]))==128&&(192&S)==128&&((O=(15&D)<<12|(63&b)<<6|63&S)<=2047||O>=55296&&O<=57343)&&(O=null)):z===4&&(S=a[y+2],T=a[y+3],(192&(b=a[y+1]))==128&&(192&S)==128&&(192&T)==128&&((O=(15&D)<<18|(63&b)<<12|(63&S)<<6|63&T)<=65535||O>=1114112)&&(O=null)),O===null?(O=65533,z=1):O>65535&&(O-=65536,m+=String.fromCharCode(O>>>10&1023|55296),O=56320|1023&O),m+=String.fromCharCode(O),y+=z}return m}(this.buf,n,i)},readBytes:function(){var i=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,i);return this.pos=i,n},readPackedVarint:function(i,n){if(this.type!==ui.Bytes)return i.push(this.readVarint(n));var a=eh(this);for(i=i||[];this.pos<a;)i.push(this.readVarint(n));return i},readPackedSVarint:function(i){if(this.type!==ui.Bytes)return i.push(this.readSVarint());var n=eh(this);for(i=i||[];this.pos<n;)i.push(this.readSVarint());return i},readPackedBoolean:function(i){if(this.type!==ui.Bytes)return i.push(this.readBoolean());var n=eh(this);for(i=i||[];this.pos<n;)i.push(this.readBoolean());return i},readPackedFloat:function(i){if(this.type!==ui.Bytes)return i.push(this.readFloat());var n=eh(this);for(i=i||[];this.pos<n;)i.push(this.readFloat());return i},readPackedDouble:function(i){if(this.type!==ui.Bytes)return i.push(this.readDouble());var n=eh(this);for(i=i||[];this.pos<n;)i.push(this.readDouble());return i},readPackedFixed32:function(i){if(this.type!==ui.Bytes)return i.push(this.readFixed32());var n=eh(this);for(i=i||[];this.pos<n;)i.push(this.readFixed32());return i},readPackedSFixed32:function(i){if(this.type!==ui.Bytes)return i.push(this.readSFixed32());var n=eh(this);for(i=i||[];this.pos<n;)i.push(this.readSFixed32());return i},readPackedFixed64:function(i){if(this.type!==ui.Bytes)return i.push(this.readFixed64());var n=eh(this);for(i=i||[];this.pos<n;)i.push(this.readFixed64());return i},readPackedSFixed64:function(i){if(this.type!==ui.Bytes)return i.push(this.readSFixed64());var n=eh(this);for(i=i||[];this.pos<n;)i.push(this.readSFixed64());return i},skip:function(i){var n=7&i;if(n===ui.Varint)for(;this.buf[this.pos++]>127;);else if(n===ui.Bytes)this.pos=this.readVarint()+this.pos;else if(n===ui.Fixed32)this.pos+=4;else{if(n!==ui.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(i,n){this.writeVarint(i<<3|n)},realloc:function(i){for(var n=this.length||16;n<this.pos+i;)n*=2;if(n!==this.length){var a=new Uint8Array(n);a.set(this.buf),this.buf=a,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(i){this.realloc(4),Om(this.buf,i,this.pos),this.pos+=4},writeSFixed32:function(i){this.realloc(4),Om(this.buf,i,this.pos),this.pos+=4},writeFixed64:function(i){this.realloc(8),Om(this.buf,-1&i,this.pos),Om(this.buf,Math.floor(i*Bz),this.pos+4),this.pos+=8},writeSFixed64:function(i){this.realloc(8),Om(this.buf,-1&i,this.pos),Om(this.buf,Math.floor(i*Bz),this.pos+4),this.pos+=8},writeVarint:function(i){(i=+i||0)>268435455||i<0?function(n,a){var c,d;if(n>=0?(c=n%4294967296|0,d=n/4294967296|0):(d=~(-n/4294967296),4294967295^(c=~(-n%4294967296))?c=c+1|0:(c=0,d=d+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");a.realloc(10),function(m,y,b){b.buf[b.pos++]=127&m|128,m>>>=7,b.buf[b.pos++]=127&m|128,m>>>=7,b.buf[b.pos++]=127&m|128,m>>>=7,b.buf[b.pos++]=127&m|128,b.buf[b.pos]=127&(m>>>=7)}(c,0,a),function(m,y){var b=(7&m)<<4;y.buf[y.pos++]|=b|((m>>>=3)?128:0),m&&(y.buf[y.pos++]=127&m|((m>>>=7)?128:0),m&&(y.buf[y.pos++]=127&m|((m>>>=7)?128:0),m&&(y.buf[y.pos++]=127&m|((m>>>=7)?128:0),m&&(y.buf[y.pos++]=127&m|((m>>>=7)?128:0),m&&(y.buf[y.pos++]=127&m)))))}(d,a)}(i,this):(this.realloc(4),this.buf[this.pos++]=127&i|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=i>>>7&127))))},writeSVarint:function(i){this.writeVarint(i<0?2*-i-1:2*i)},writeBoolean:function(i){this.writeVarint(!!i)},writeString:function(i){i=String(i),this.realloc(4*i.length),this.pos++;var n=this.pos;this.pos=function(c,d,m){for(var y,b,S=0;S<d.length;S++){if((y=d.charCodeAt(S))>55295&&y<57344){if(!b){y>56319||S+1===d.length?(c[m++]=239,c[m++]=191,c[m++]=189):b=y;continue}if(y<56320){c[m++]=239,c[m++]=191,c[m++]=189,b=y;continue}y=b-55296<<10|y-56320|65536,b=null}else b&&(c[m++]=239,c[m++]=191,c[m++]=189,b=null);y<128?c[m++]=y:(y<2048?c[m++]=y>>6|192:(y<65536?c[m++]=y>>12|224:(c[m++]=y>>18|240,c[m++]=y>>12&63|128),c[m++]=y>>6&63|128),c[m++]=63&y|128)}return m}(this.buf,i,this.pos);var a=this.pos-n;a>=128&&bz(n,a,this),this.pos=n-1,this.writeVarint(a),this.pos+=a},writeFloat:function(i){this.realloc(4),V1.write(this.buf,i,this.pos,!0,23,4),this.pos+=4},writeDouble:function(i){this.realloc(8),V1.write(this.buf,i,this.pos,!0,52,8),this.pos+=8},writeBytes:function(i){var n=i.length;this.writeVarint(n),this.realloc(n);for(var a=0;a<n;a++)this.buf[this.pos++]=i[a]},writeRawMessage:function(i,n){this.pos++;var a=this.pos;i(n,this);var c=this.pos-a;c>=128&&bz(a,c,this),this.pos=a-1,this.writeVarint(c),this.pos+=c},writeMessage:function(i,n,a){this.writeTag(i,ui.Bytes),this.writeRawMessage(n,a)},writePackedVarint:function(i,n){n.length&&this.writeMessage(i,HX,n)},writePackedSVarint:function(i,n){n.length&&this.writeMessage(i,WX,n)},writePackedBoolean:function(i,n){n.length&&this.writeMessage(i,KX,n)},writePackedFloat:function(i,n){n.length&&this.writeMessage(i,ZX,n)},writePackedDouble:function(i,n){n.length&&this.writeMessage(i,qX,n)},writePackedFixed32:function(i,n){n.length&&this.writeMessage(i,XX,n)},writePackedSFixed32:function(i,n){n.length&&this.writeMessage(i,YX,n)},writePackedFixed64:function(i,n){n.length&&this.writeMessage(i,JX,n)},writePackedSFixed64:function(i,n){n.length&&this.writeMessage(i,QX,n)},writeBytesField:function(i,n){this.writeTag(i,ui.Bytes),this.writeBytes(n)},writeFixed32Field:function(i,n){this.writeTag(i,ui.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(i,n){this.writeTag(i,ui.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(i,n){this.writeTag(i,ui.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(i,n){this.writeTag(i,ui.Fixed64),this.writeSFixed64(n)},writeVarintField:function(i,n){this.writeTag(i,ui.Varint),this.writeVarint(n)},writeSVarintField:function(i,n){this.writeTag(i,ui.Varint),this.writeSVarint(n)},writeStringField:function(i,n){this.writeTag(i,ui.Bytes),this.writeString(n)},writeFloatField:function(i,n){this.writeTag(i,ui.Fixed32),this.writeFloat(n)},writeDoubleField:function(i,n){this.writeTag(i,ui.Fixed64),this.writeDouble(n)},writeBooleanField:function(i,n){this.writeVarintField(i,!!n)}};var km=K(vz);const MT=3;function eY(i,n,a){n.glyphs=[],i===1&&a.readMessage(tY,n)}function tY(i,n,a){if(i===3){const{id:c,bitmap:d,width:m,height:y,left:b,top:S,advance:T}=a.readMessage(rY,{});n.glyphs.push({id:c,bitmap:new lf({width:m+2*MT,height:y+2*MT},d),metrics:{width:m,height:y,left:b,top:S,advance:T}})}else i===4?n.ascender=a.readSVarint():i===5&&(n.descender=a.readSVarint())}function rY(i,n,a){i===1?n.id=a.readVarint():i===2?n.bitmap=a.readBytes():i===3?n.width=a.readVarint():i===4?n.height=a.readVarint():i===5?n.left=a.readSVarint():i===6?n.top=a.readSVarint():i===7&&(n.advance=a.readVarint())}const wz=MT,Hs={horizontal:1,vertical:2,horizontalOnly:3};class Py{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,a){const c=new Py;return c.scale=n||1,c.fontStack=a,c}static forImage(n){const a=new Py;return a.imageName=n,a}}class Lm{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,a){const c=new Lm;for(let d=0;d<n.sections.length;d++){const m=n.sections[d];m.image?c.addImageSection(m):c.addTextSection(m,a)}return c}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSections(){return this.sections}getSectionIndex(n){return this.sectionIndex[n]}getCodePoint(n){return this.text.codePointAt(n)}verticalizePunctuation(n){this.text=function(a,c){let d="";for(let m=0;m<a.length;m++){const y=a.charCodeAt(m+1)||null,b=a.charCodeAt(m-1)||null;d+=!c&&(y&&YB(y)&&!Dy[a[m+1]]||b&&YB(b)&&!Dy[a[m-1]])||!Dy[a[m]]?a[m]:Dy[a[m]]}return d}(this.text,n)}trim(){let n=0;for(let c=0;c<this.text.length&&H1[this.text.charCodeAt(c)];c++)n++;let a=this.text.length;for(let c=this.text.length-1;c>=0&&c>=n&&H1[this.text.charCodeAt(c)];c--)a--;this.text=this.text.substring(n,a),this.sectionIndex=this.sectionIndex.slice(n,a)}substring(n,a){const c=new Lm;return c.text=this.text.substring(n,a),c.sectionIndex=this.sectionIndex.slice(n,a),c.sections=this.sections,c}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,a)=>Math.max(n,this.sections[a].scale),0)}addTextSection(n,a){this.text+=n.text,this.sections.push(Py.forText(n.scale,n.fontStack||a));const c=this.sections.length-1;for(let d=0;d<n.text.length;++d)this.sectionIndex.push(c)}addImageSection(n){const a=n.image?n.image.namePrimary:"";if(a.length===0)return void Er("Can't add FormattedSection with an empty image.");const c=this.getNextImageSectionCharCode();c?(this.text+=String.fromCodePoint(c),this.sections.push(Py.forImage(a)),this.sectionIndex.push(this.sections.length-1)):Er("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function IT(i,n,a,c,d,m,y,b,S,T,D,O,z,$,G){const q=Lm.fromFeature(i,d);O===Hs.vertical&&q.verticalizePunctuation(z);let re=[];const ie=function(be,Me,Ne,Ge,Ye,He){if(!be)return[];const st=[],yt=function(pt,Lt,vt,Jt,Zt,Ct){let vr=0;for(let ar=0;ar<pt.length();ar++){const Yt=pt.getSection(ar);vr+=Sz(pt.getCodePoint(ar),Yt,Jt,Zt,Lt,Ct)}return vr/Math.max(1,Math.ceil(vr/vt))}(be,Me,Ne,Ge,Ye,He),nt=be.text.indexOf("")>=0;let mt=0;for(let pt=0;pt<be.length();pt++){const Lt=be.getSection(pt),vt=be.getCodePoint(pt);if(H1[vt]||(mt+=Sz(vt,Lt,Ge,Ye,Me,He)),pt<be.length()-1){const Jt=!((tt=vt)<11904||!(nr["Bopomofo Extended"](tt)||nr.Bopomofo(tt)||nr["CJK Compatibility Forms"](tt)||nr["CJK Compatibility Ideographs"](tt)||nr["CJK Compatibility"](tt)||nr["CJK Radicals Supplement"](tt)||nr["CJK Strokes"](tt)||nr["CJK Symbols and Punctuation"](tt)||nr["CJK Unified Ideographs Extension A"](tt)||nr["CJK Unified Ideographs"](tt)||nr["Enclosed CJK Letters and Months"](tt)||nr["Halfwidth and Fullwidth Forms"](tt)||nr.Hiragana(tt)||nr["Ideographic Description Characters"](tt)||nr["Kangxi Radicals"](tt)||nr["Katakana Phonetic Extensions"](tt)||nr.Katakana(tt)||nr["Vertical Forms"](tt)||nr["Yi Radicals"](tt)||nr["Yi Syllables"](tt)));(nY[vt]||Jt||Lt.imageName)&&st.push(Az(pt+1,mt,yt,st,iY(vt,be.getCodePoint(pt+1),Jt&&nt),!1))}}var tt;return Ez(Az(be.length(),mt,yt,st,0,!0))}(q,T,m,n,c,$),{processBidirectionalText:fe,processStyledBidirectionalText:_e}=Ja;if(fe&&q.sections.length===1){const be=fe(q.toString(),ie);for(const Me of be){const Ne=new Lm;Ne.text=Me,Ne.sections=q.sections;for(let Ge=0;Ge<Me.length;Ge++)Ne.sectionIndex.push(0);re.push(Ne)}}else if(_e){const be=_e(q.text,q.sectionIndex,ie);for(const Me of be){const Ne=new Lm;Ne.text=Me[0],Ne.sectionIndex=Me[1],Ne.sections=q.sections,re.push(Ne)}}else re=function(be,Me){const Ne=[],Ge=be.text;let Ye=0;for(const He of Me)Ne.push(be.substring(Ye,He)),Ye=He;return Ye<Ge.length&&Ne.push(be.substring(Ye,Ge.length)),Ne}(q,ie);const ge=[],Se={positionedLines:ge,text:q.toString(),top:D[1],bottom:D[1],left:D[0],right:D[0],writingMode:O,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(be,Me,Ne,Ge,Ye,He,st,yt,nt,mt,tt,pt){let Lt=0,vt=0,Jt=0;const Zt=yt==="right"?1:yt==="left"?0:.5;let Ct=!1;for(const jr of Ye){const xr=jr.getSections();for(const $r of xr){if($r.imageName)continue;const Ar=Me[$r.fontStack];if(Ar&&(Ct=Ar.ascender!==void 0&&Ar.descender!==void 0,!Ct))break}if(!Ct)break}let vr=0;for(const jr of Ye){jr.trim();const xr=jr.getMaxScale(),$r=(xr-1)*Uo,Ar={positionedGlyphs:[],lineOffset:0};be.positionedLines[vr]=Ar;const sn=Ar.positionedGlyphs;let Mr=0;if(!jr.length()){vt+=He,++vr;continue}let Gn=0,_n=0;for(let Tn=0;Tn<jr.length();Tn++){const yn=jr.getSection(Tn),ci=jr.getSectionIndex(Tn),zn=jr.getCodePoint(Tn);let Di=yn.scale,ao=null,ko=null,si=null,yi=Uo,Co=0;const wo=!(nt===Hs.horizontal||!tt&&!G_(zn)||tt&&(H1[zn]||(ar=zn,nr.Arabic(ar)||nr["Arabic Supplement"](ar)||nr["Arabic Extended-A"](ar)||nr["Arabic Presentation Forms-A"](ar)||nr["Arabic Presentation Forms-B"](ar))));if(yn.imageName){const So=Ge[yn.imageName];if(!So)continue;si=yn.imageName,be.iconsInText=be.iconsInText||!0,ko=So.paddedRect;const Qn=So.displaySize;Di=Di*Uo/pt,ao={width:Qn[0],height:Qn[1],left:0,top:-wz,advance:wo?Qn[1]:Qn[0],localGlyph:!1},Co=Ct?-ao.height*Di:xr*Uo-17-Qn[1]*Di,yi=ao.advance;const ys=(wo?Qn[0]:Qn[1])*Di-Uo*xr;ys>0&&ys>Mr&&(Mr=ys)}else{const So=Ne[yn.fontStack];if(!So)continue;So[zn]&&(ko=So[zn]);const Qn=Me[yn.fontStack];if(!Qn)continue;const ys=Qn.glyphs[zn];if(!ys)continue;if(ao=ys.metrics,yi=zn!==8203?Uo:0,Ct){const _f=Qn.ascender!==void 0?Math.abs(Qn.ascender):0,za=Qn.descender!==void 0?Math.abs(Qn.descender):0,va=(_f+za)*Di;Gn<va&&(Gn=va,_n=(_f-za)/2*Di),Co=-_f*Di}else Co=(xr-Di)*Uo-17}wo?(be.verticalizable=!0,sn.push({glyph:zn,imageName:si,x:Lt,y:vt+Co,vertical:wo,scale:Di,localGlyph:ao.localGlyph,fontStack:yn.fontStack,sectionIndex:ci,metrics:ao,rect:ko}),Lt+=yi*Di+mt):(sn.push({glyph:zn,imageName:si,x:Lt,y:vt+Co,vertical:wo,scale:Di,localGlyph:ao.localGlyph,fontStack:yn.fontStack,sectionIndex:ci,metrics:ao,rect:ko}),Lt+=ao.advance*Di+mt)}sn.length!==0&&(Jt=Math.max(Lt-mt,Jt),Ct?Dz(sn,Zt,Mr,_n,He*xr/2):Dz(sn,Zt,Mr,0,He/2)),Lt=0;const xn=He*xr+Mr;Ar.lineOffset=Math.max(Mr,$r),vt+=xn,++vr}var ar;const Yt=vt,{horizontalAlign:wt,verticalAlign:gr}=OT(st);(function(jr,xr,$r,Ar,sn,Mr){const Gn=(xr-$r)*sn,_n=-Mr*Ar;for(const xn of jr)for(const Tn of xn.positionedGlyphs)Tn.x+=Gn,Tn.y+=_n})(be.positionedLines,Zt,wt,gr,Jt,Yt),be.top+=-gr*Yt,be.bottom=be.top+Yt,be.left+=-wt*Jt,be.right=be.left+Jt,be.hasBaseline=Ct}(Se,n,a,c,re,y,b,S,O,T,z,G),!function(be){for(const Me of be)if(Me.positionedGlyphs.length!==0)return!1;return!0}(ge)&&Se}const H1={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},nY={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Sz(i,n,a,c,d,m){if(n.imageName){const y=c[n.imageName];return y?y.displaySize[0]*n.scale*Uo/m+d:0}{const y=a[n.fontStack],b=y&&y.glyphs[i];return b?b.metrics.advance*n.scale+d:0}}function Tz(i,n,a,c){const d=Math.pow(i-n,2);return c?i<n?d/2:2*d:d+Math.abs(a)*a}function iY(i,n,a){let c=0;return i===10&&(c-=1e4),a&&(c+=150),i!==40&&i!==65288||(c+=50),n!==41&&n!==65289||(c+=50),c}function Az(i,n,a,c,d,m){let y=null,b=Tz(n,a,d,m);for(const S of c){const T=Tz(n-S.x,a,d,m)+S.badness;T<=b&&(y=S,b=T)}return{index:i,x:n,priorBreak:y,badness:b}}function Ez(i){return i?Ez(i.priorBreak).concat(i.index):[]}function OT(i){let n=.5,a=.5;switch(i){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(i){case"bottom":case"bottom-right":case"bottom-left":a=1;break;case"top":case"top-right":case"top-left":a=0}return{horizontalAlign:n,verticalAlign:a}}function Dz(i,n,a,c,d){if(!(n||a||c||d))return;const m=i.length-1,y=i[m],b=(y.x+y.metrics.advance*y.scale)*n;for(let S=0;S<=m;S++)i[S].x-=b,i[S].y+=a+c+d}function oY(i,n,a,c){const{horizontalAlign:d,verticalAlign:m}=OT(c),y=a[0]-i.displaySize[0]*d,b=a[1]-i.displaySize[1]*m;return{imagePrimary:i,imageSecondary:n,top:b,bottom:b+i.displaySize[1],left:y,right:y+i.displaySize[0]}}function Pz(i,n,a,c,d,m){const y=i.imagePrimary;let b;if(y.content){const re=y.content,ie=y.pixelRatio||1;b=[re[0]/ie,re[1]/ie,y.displaySize[0]-re[2]/ie,y.displaySize[1]-re[3]/ie]}const S=n.left*m,T=n.right*m;let D,O,z,$;a==="width"||a==="both"?($=d[0]+S-c[3],O=d[0]+T+c[1]):($=d[0]+(S+T-y.displaySize[0])/2,O=$+y.displaySize[0]);const G=n.top*m,q=n.bottom*m;return a==="height"||a==="both"?(D=d[1]+G-c[0],z=d[1]+q+c[2]):(D=d[1]+(G+q-y.displaySize[1])/2,z=D+y.displaySize[1]),{imagePrimary:y,imageSecondary:void 0,top:D,right:O,bottom:z,left:$,collisionPadding:b}}class th extends De{constructor(n,a,c,d,m){super(n,a),this.angle=d,this.z=c,m!==void 0&&(this.segment=m)}clone(){return new th(this.x,this.y,this.z,this.angle,this.segment)}}function Mz(i,n,a,c,d){if(n.segment===void 0)return!0;let m=n,y=n.segment+1,b=0;for(;b>-a/2;){if(y--,y<0)return!1;b-=i[y].dist(m),m=i[y]}b+=i[y].dist(i[y+1]),y++;const S=[];let T=0;for(;b<a/2;){const D=i[y],O=i[y+1];if(!O)return!1;let z=i[y-1].angleTo(D)-D.angleTo(O);for(z=Math.abs((z+3*Math.PI)%(2*Math.PI)-Math.PI),S.push({distance:b,angleDelta:z}),T+=z;b-S[0].distance>c;)T-=S.shift().angleDelta;if(T>d)return!1;y++,b+=D.dist(O)}return!0}function Iz(i){let n=0;for(let a=0;a<i.length-1;a++)n+=i[a].dist(i[a+1]);return n}function Oz(i,n,a){return i?.6*n*a:0}function kz(i,n){return Math.max(i?i.right-i.left:0,n?n.right-n.left:0)}function aY(i,n,a,c,d,m){const y=Oz(a,d,m),b=kz(a,c)*m;let S=0;const T=Iz(i)/2;for(let D=0;D<i.length-1;D++){const O=i[D],z=i[D+1],$=O.dist(z);if(S+$>T){const G=(T-S)/$,q=Zr(O.x,z.x,G),re=Zr(O.y,z.y,G),ie=new th(q,re,0,z.angleTo(O),D);return!y||Mz(i,ie,b,y,n)?ie:void 0}S+=$}}function sY(i,n,a,c,d,m,y,b,S){const T=Oz(c,m,y),D=kz(c,d),O=D*y,z=i[0].x===0||i[0].x===S||i[0].y===0||i[0].y===S;return n-O<n/4&&(n=O+n/4),Lz(i,z?n/2*b%n:(D/2+2*m)*y*b%n,n,T,a,O,z,!1,S)}function Lz(i,n,a,c,d,m,y,b,S){const T=m/2,D=Iz(i);let O=0,z=n-a,$=[];for(let G=0;G<i.length-1;G++){const q=i[G],re=i[G+1],ie=q.dist(re),fe=re.angleTo(q);for(;z+a<O+ie;){z+=a;const _e=(z-O)/ie,ge=Zr(q.x,re.x,_e),Se=Zr(q.y,re.y,_e);if(ge>=0&&ge<S&&Se>=0&&Se<S&&z-T>=0&&z+T<=D){const be=new th(ge,Se,0,fe,G);c&&!Mz(i,be,m,c,d)||$.push(be)}}O+=ie}return b||$.length||y||($=Lz(i,O/2,a,c,d,m,y,!0,S)),$}function Rz(i,n,a,c,d){const m=[];for(let y=0;y<i.length;y++){const b=i[y];let S;for(let T=0;T<b.length-1;T++){let D=b[T],O=b[T+1];D.x<n&&O.x<n||(D.x<n?D=new De(n,D.y+(n-D.x)/(O.x-D.x)*(O.y-D.y))._round():O.x<n&&(O=new De(n,D.y+(n-D.x)/(O.x-D.x)*(O.y-D.y))._round()),D.y<a&&O.y<a||(D.y<a?D=new De(D.x+(a-D.y)/(O.y-D.y)*(O.x-D.x),a)._round():O.y<a&&(O=new De(D.x+(a-D.y)/(O.y-D.y)*(O.x-D.x),a)._round()),D.x>=c&&O.x>=c||(D.x>=c?D=new De(c,D.y+(c-D.x)/(O.x-D.x)*(O.y-D.y))._round():O.x>=c&&(O=new De(c,D.y+(c-D.x)/(O.x-D.x)*(O.y-D.y))._round()),D.y>=d&&O.y>=d||(D.y>=d?D=new De(D.x+(d-D.y)/(O.y-D.y)*(O.x-D.x),d)._round():O.y>=d&&(O=new De(D.x+(d-D.y)/(O.y-D.y)*(O.x-D.x),d)._round()),S&&D.equals(S[S.length-1])||(S=[D],m.push(S)),S.push(O)))))}}return m}function zz(i){let n=0,a=0;for(const y of i)n+=y.w*y.h,a=Math.max(a,y.w);i.sort((y,b)=>b.h-y.h);const c=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),a),h:1/0}];let d=0,m=0;for(const y of i)for(let b=c.length-1;b>=0;b--){const S=c[b];if(!(y.w>S.w||y.h>S.h)){if(y.x=S.x,y.y=S.y,m=Math.max(m,y.y+y.h),d=Math.max(d,y.x+y.w),y.w===S.w&&y.h===S.h){const T=c.pop();b<c.length&&(c[b]=T)}else y.h===S.h?(S.x+=y.w,S.w-=y.w):y.w===S.w?(S.y+=y.h,S.h-=y.h):(c.push({x:S.x+y.w,y:S.y,w:S.w-y.w,h:y.h}),S.y+=y.h,S.h-=y.h);break}}return{w:d,h:m,fill:n/(d*m)||0}}Kt(th,"Anchor");const _s=1;class kT{constructor(n,{pixelRatio:a,version:c,stretchX:d,stretchY:m,content:y}){this.paddedRect=n,this.pixelRatio=a,this.stretchX=d,this.stretchY=m,this.content=y,this.version=c}get tl(){return[this.paddedRect.x+_s,this.paddedRect.y+_s]}get br(){return[this.paddedRect.x+this.paddedRect.w-_s,this.paddedRect.y+this.paddedRect.h-_s]}get displaySize(){return[(this.paddedRect.w-2*_s)/this.pixelRatio,(this.paddedRect.h-2*_s)/this.pixelRatio]}}class Nz{constructor(n,a){const c={},d={};this.haveRenderCallbacks=[];const m=[];this.addImages(n,c,m),this.addImages(a,d,m);const{w:y,h:b}=zz(m),S=new Gs({width:y||1,height:b||1});for(const T in n){const D=n[T],O=c[T].paddedRect;Gs.copy(D.data,S,{x:0,y:0},{x:O.x+_s,y:O.y+_s},D.data,D.sdf)}for(const T in a){const D=a[T],O=d[T].paddedRect,z=O.x+_s,$=O.y+_s,G=D.data.width,q=D.data.height;Gs.copy(D.data,S,{x:0,y:0},{x:z,y:$},D.data),Gs.copy(D.data,S,{x:0,y:q-1},{x:z,y:$-1},{width:G,height:1}),Gs.copy(D.data,S,{x:0,y:0},{x:z,y:$+q},{width:G,height:1}),Gs.copy(D.data,S,{x:G-1,y:0},{x:z-1,y:$},{width:1,height:q}),Gs.copy(D.data,S,{x:0,y:0},{x:z+G,y:$},{width:1,height:q})}this.image=S,this.iconPositions=c,this.patternPositions=d}addImages(n,a,c){for(const d in n){const m=n[d],y={x:0,y:0,w:m.data.width+2*_s,h:m.data.height+2*_s};c.push(y),a[d]=new kT(y,m),m.hasRenderCallback&&this.haveRenderCallbacks.push(d)}}patchUpdatedImages(n,a,c){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(d=>n.hasImage(d,c)),n.dispatchRenderCallbacks(this.haveRenderCallbacks,c);for(const d in n.getUpdatedImages(c))this.patchUpdatedImage(this.iconPositions[d],n.getImage(d,c),a),this.patchUpdatedImage(this.patternPositions[d],n.getImage(d,c),a)}patchUpdatedImage(n,a,c){if(!n||!a||n.version===a.version)return;n.version=a.version;const[d,m]=n.tl,y=!!Object.keys(this.patternPositions).length;c.update(a.data,{useMipmap:y},{x:d,y:m})}}Kt(kT,"ImagePosition"),Kt(Nz,"ImageAtlas");const My=1e20;function Fz(i,n,a,c,d,m,y,b,S){for(let T=n;T<n+c;T++)jz(i,a*m+T,m,d,y,b,S);for(let T=a;T<a+d;T++)jz(i,T*m+n,1,c,y,b,S)}function jz(i,n,a,c,d,m,y){m[0]=0,y[0]=-My,y[1]=My,d[0]=i[n];for(let b=1,S=0,T=0;b<c;b++){d[b]=i[n+b*a];const D=b*b;do{const O=m[S];T=(d[b]-d[O]+D-O*O)/(b-O)/2}while(T<=y[S]&&--S>-1);S++,m[S]=b,y[S]=T,y[S+1]=My}for(let b=0,S=0;b<c;b++){for(;y[S+1]<b;)S++;const T=m[S],D=b-T;i[n+b*a]=d[T]+D*D}}const cu=2,LT={none:0,ideographs:1,all:2};class Rm{constructor(n,a,c){this.requestManager=n,this.localGlyphMode=a,this.localFontFamily=c,this.urls={},this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(n,a){this.urls[a]=n}getGlyphs(n,a,c){const d=[],m=this.urls[a]||P.GLYPHS_URL;for(const y in n)for(const b of n[y])d.push({stack:y,id:b});$t(d,({stack:y,id:b},S)=>{let T=this.entries[y];T||(T=this.entries[y]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let D=T.glyphs[b];if(D!==void 0)return void S(null,{stack:y,id:b,glyph:D});if(D=this._tinySDF(T,y,b),D)return T.glyphs[b]=D,void S(null,{stack:y,id:b,glyph:D});const O=Math.floor(b/256);if(256*O>65535)return void S(new Error("glyphs > 65535 not supported"));if(T.ranges[O])return void S(null,{stack:y,id:b,glyph:D});let z=T.requests[O];z||(z=T.requests[O]=[],Rm.loadGlyphRange(y,O,m,this.requestManager,($,G)=>{if(G){T.ascender=G.ascender,T.descender=G.descender;for(const q in G.glyphs)this._doesCharSupportLocalGlyph(+q)||(T.glyphs[+q]=G.glyphs[+q]);T.ranges[O]=!0}for(const q of z)q($,G);delete T.requests[O]})),z.push(($,G)=>{$?S($):G&&S(null,{stack:y,id:b,glyph:G.glyphs[b]||null})})},(y,b)=>{if(y)c(y);else if(b){const S={};for(const{stack:T,id:D,glyph:O}of b)S[T]===void 0&&(S[T]={}),S[T].glyphs===void 0&&(S[T].glyphs={}),S[T].glyphs[D]=O&&{id:O.id,bitmap:O.bitmap.clone(),metrics:O.metrics},S[T].ascender=this.entries[T].ascender,S[T].descender=this.entries[T].descender;c(null,S)}})}_doesCharSupportLocalGlyph(n){return this.localGlyphMode!==LT.none&&(this.localGlyphMode===LT.all?!!this.localFontFamily:!!this.localFontFamily&&(nr["CJK Unified Ideographs"](n)||nr["Hangul Syllables"](n)||nr.Hiragana(n)||nr.Katakana(n)||nr["CJK Symbols and Punctuation"](n)||nr["CJK Unified Ideographs Extension A"](n)||nr["CJK Unified Ideographs Extension B"](n)))}_tinySDF(n,a,c){const d=this.localFontFamily;if(!d||!this._doesCharSupportLocalGlyph(c))return;let m=n.tinySDF;if(!m){let q="400";/bold/i.test(a)?q="900":/medium/i.test(a)?q="500":/light/i.test(a)&&(q="200"),m=n.tinySDF=new Rm.TinySDF({fontFamily:d,fontWeight:q,fontSize:24*cu,buffer:3*cu,radius:8*cu}),m.fontWeight=q}if(this.localGlyphs[m.fontWeight][c])return this.localGlyphs[m.fontWeight][c];const y=String.fromCodePoint(c),{data:b,width:S,height:T,glyphWidth:D,glyphHeight:O,glyphLeft:z,glyphTop:$,glyphAdvance:G}=m.draw(y);return this.localGlyphs[m.fontWeight][c]={id:c,bitmap:new lf({width:S,height:T},b),metrics:{width:D/cu,height:O/cu,left:z/cu,top:$/cu-27,advance:G/cu,localGlyph:!0}}}}Rm.loadGlyphRange=function(i,n,a,c,d){const m=256*n,y=m+255,b=c.transformRequest(c.normalizeGlyphsURL(a).replace("{fontstack}",i).replace("{range}",`${m}-${y}`),Xo.Glyphs);at(b,(S,T)=>{if(S)d(S);else if(T){const D={},O=function(z){return new km(z).readFields(eY,{})}(T);for(const z of O.glyphs)D[z.id]=z;d(null,{glyphs:D,ascender:O.ascender,descender:O.descender})}})},Rm.TinySDF=class{constructor({fontSize:i=24,buffer:n=3,radius:a=8,cutoff:c=.25,fontFamily:d="sans-serif",fontWeight:m="normal",fontStyle:y="normal"}={}){this.buffer=n,this.cutoff=c,this.radius=a;const b=this.size=i+4*n,S=this._createCanvas(b),T=this.ctx=S.getContext("2d",{willReadFrequently:!0});T.font=`${y} ${m} ${i}px ${d}`,T.textBaseline="alphabetic",T.textAlign="left",T.fillStyle="black",this.gridOuter=new Float64Array(b*b),this.gridInner=new Float64Array(b*b),this.f=new Float64Array(b),this.z=new Float64Array(b+1),this.v=new Uint16Array(b)}_createCanvas(i){const n=document.createElement("canvas");return n.width=n.height=i,n}draw(i){const{width:n,actualBoundingBoxAscent:a,actualBoundingBoxDescent:c,actualBoundingBoxLeft:d,actualBoundingBoxRight:m}=this.ctx.measureText(i),y=Math.ceil(a),b=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(m-d))),S=Math.min(this.size-this.buffer,y+Math.ceil(c)),T=b+2*this.buffer,D=S+2*this.buffer,O=Math.max(T*D,0),z=new Uint8ClampedArray(O),$={data:z,width:T,height:D,glyphWidth:b,glyphHeight:S,glyphTop:y,glyphLeft:0,glyphAdvance:n};if(b===0||S===0)return $;const{ctx:G,buffer:q,gridInner:re,gridOuter:ie}=this;G.clearRect(q,q,b,S),G.fillText(i,q,q+y);const fe=G.getImageData(q,q,b,S);ie.fill(My,0,O),re.fill(0,0,O);for(let _e=0;_e<S;_e++)for(let ge=0;ge<b;ge++){const Se=fe.data[4*(_e*b+ge)+3]/255;if(Se===0)continue;const be=(_e+q)*T+ge+q;if(Se===1)ie[be]=0,re[be]=My;else{const Me=.5-Se;ie[be]=Me>0?Me*Me:0,re[be]=Me<0?Me*Me:0}}Fz(ie,0,0,T,D,T,this.f,this.v,this.z),Fz(re,q,q,b,S,T,this.f,this.v,this.z);for(let _e=0;_e<O;_e++){const ge=Math.sqrt(ie[_e])-Math.sqrt(re[_e]);z[_e]=Math.round(255-255*(ge/this.radius+this.cutoff))}return $}};const hf=_s;function $z(i,n,a,c){const d=[],m=i.imagePrimary,y=m.pixelRatio,b=m.paddedRect.w-2*hf,S=m.paddedRect.h-2*hf,T=i.right-i.left,D=i.bottom-i.top,O=m.stretchX||[[0,b]],z=m.stretchY||[[0,S]],$=(He,st)=>He+st[1]-st[0],G=O.reduce($,0),q=z.reduce($,0),re=b-G,ie=S-q;let fe=0,_e=G,ge=0,Se=q,be=0,Me=re,Ne=0,Ge=ie;if(m.content&&c){const He=m.content;fe=W1(O,0,He[0]),ge=W1(z,0,He[1]),_e=W1(O,He[0],He[2]),Se=W1(z,He[1],He[3]),be=He[0]-fe,Ne=He[1]-ge,Me=He[2]-He[0]-_e,Ge=He[3]-He[1]-Se}const Ye=(He,st,yt,nt)=>{const mt=Z1(He.stretch-fe,_e,T,i.left),tt=q1(He.fixed-be,Me,He.stretch,G),pt=Z1(st.stretch-ge,Se,D,i.top),Lt=q1(st.fixed-Ne,Ge,st.stretch,q),vt=Z1(yt.stretch-fe,_e,T,i.left),Jt=q1(yt.fixed-be,Me,yt.stretch,G),Zt=Z1(nt.stretch-ge,Se,D,i.top),Ct=q1(nt.fixed-Ne,Ge,nt.stretch,q),vr=new De(mt,pt),ar=new De(vt,pt),Yt=new De(vt,Zt),wt=new De(mt,Zt),gr=new De(tt/y,Lt/y),jr=new De(Jt/y,Ct/y),xr=n*Math.PI/180;if(xr){const _n=Math.sin(xr),xn=Math.cos(xr),Tn=[xn,-_n,_n,xn];vr._matMult(Tn),ar._matMult(Tn),wt._matMult(Tn),Yt._matMult(Tn)}const $r=He.stretch+He.fixed,Ar=yt.stretch+yt.fixed,sn=st.stretch+st.fixed,Mr=nt.stretch+nt.fixed,Gn=i.imageSecondary;return{tl:vr,tr:ar,bl:wt,br:Yt,texPrimary:{x:m.paddedRect.x+hf+$r,y:m.paddedRect.y+hf+sn,w:Ar-$r,h:Mr-sn},texSecondary:Gn?{x:Gn.paddedRect.x+hf+$r,y:Gn.paddedRect.y+hf+sn,w:Ar-$r,h:Mr-sn}:void 0,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:gr,pixelOffsetBR:jr,minFontScaleX:Me/y/T,minFontScaleY:Ge/y/D,isSDF:a}};if(c&&(m.stretchX||m.stretchY)){const He=Uz(O,re,G),st=Uz(z,ie,q);for(let yt=0;yt<He.length-1;yt++){const nt=He[yt],mt=He[yt+1];for(let tt=0;tt<st.length-1;tt++)d.push(Ye(nt,st[tt],mt,st[tt+1]))}}else d.push(Ye({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:b+1},{fixed:0,stretch:S+1}));return d}function W1(i,n,a){let c=0;for(const d of i)c+=Math.max(n,Math.min(a,d[1]))-Math.max(n,Math.min(a,d[0]));return c}function Uz(i,n,a){const c=[{fixed:-hf,stretch:0}];for(const[d,m]of i){const y=c[c.length-1];c.push({fixed:d-y.stretch,stretch:y.stretch}),c.push({fixed:d-y.stretch,stretch:y.stretch+(m-d)})}return c.push({fixed:n+hf,stretch:a}),c}function Z1(i,n,a,c){return i/n*a+c}function q1(i,n,a,c){return i-n*a/c}function lY(i,n,a,c){const d=n+i.positionedLines[c].lineOffset;return c===0?a+d/2:a+(d+(n+i.positionedLines[c-1].lineOffset))/2}function uY(i,n=1,a=!1){let c=1/0,d=1/0,m=-1/0,y=-1/0;const b=i[0];for(let $=0;$<b.length;$++){const G=b[$];(!$||G.x<c)&&(c=G.x),(!$||G.y<d)&&(d=G.y),(!$||G.x>m)&&(m=G.x),(!$||G.y>y)&&(y=G.y)}const S=Math.min(m-c,y-d);let T=S/2;const D=new pa([],cY);if(S===0)return new De(c,d);for(let $=c;$<m;$+=S)for(let G=d;G<y;G+=S)D.push(new zm($+T,G+T,T,i));let O=function($){let G=0,q=0,re=0;const ie=$[0];for(let fe=0,_e=ie.length,ge=_e-1;fe<_e;ge=fe++){const Se=ie[fe],be=ie[ge],Me=Se.x*be.y-be.x*Se.y;q+=(Se.x+be.x)*Me,re+=(Se.y+be.y)*Me,G+=3*Me}return new zm(q/G,re/G,0,$)}(i),z=D.length;for(;D.length;){const $=D.pop();($.d>O.d||!O.d)&&(O=$,a&&console.log("found best %d after %d probes",Math.round(1e4*$.d)/1e4,z)),$.max-O.d<=n||(T=$.h/2,D.push(new zm($.p.x-T,$.p.y-T,T,i)),D.push(new zm($.p.x+T,$.p.y-T,T,i)),D.push(new zm($.p.x-T,$.p.y+T,T,i)),D.push(new zm($.p.x+T,$.p.y+T,T,i)),z+=4)}return a&&(console.log(`num probes: ${z}`),console.log(`best distance: ${O.d}`)),O.p}function cY(i,n){return n.max-i.max}class zm{constructor(n,a,c,d){this.p=new De(n,a),this.h=c,this.d=function(m,y){let b=!1,S=1/0;for(let T=0;T<y.length;T++){const D=y[T];for(let O=0,z=D.length,$=z-1;O<z;$=O++){const G=D[O],q=D[$];G.y>m.y!=q.y>m.y&&m.x<(q.x-G.x)*(m.y-G.y)/(q.y-G.y)+G.x&&(b=!b),S=Math.min(S,of(m,G,q))}}return(b?1:-1)*Math.sqrt(S)}(this.p,d),this.max=this.d+this.h*Math.SQRT2}}const RT=Number.POSITIVE_INFINITY,hY=Math.sqrt(2);function Vz(i,[n,a]){let c=0,d=0;if(a===RT){n<0&&(n=0);const m=n/hY;switch(i){case"top-right":case"top-left":d=m-7;break;case"bottom-right":case"bottom-left":d=7-m;break;case"bottom":d=7-n;break;case"top":d=n-7}switch(i){case"top-right":case"bottom-right":c=-m;break;case"top-left":case"bottom-left":c=m;break;case"left":c=n;break;case"right":c=-n}}else{switch(n=Math.abs(n),a=Math.abs(a),i){case"top-right":case"top-left":case"top":d=a-7;break;case"bottom-right":case"bottom-left":case"bottom":d=7-a}switch(i){case"top-right":case"bottom-right":case"right":c=-n;break;case"top-left":case"bottom-left":case"left":c=n}}return[c,d]}function zT(i){switch(i){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function fY(i,n,a,c,d,m,y,b,S,T,D,O,z,$,G){let q=m.textMaxSize.evaluate(n,{},O);q===void 0&&(q=y);const re=i.layers[0].layout,ie=re.get("icon-offset").evaluate(n,{},O),fe=Hz(a.horizontal)||a.vertical,_e=z.name==="globe",ge=Uo,Se=y/ge,be=i.tilePixelRatio*q/ge,Me=(mt=i.overscaling,i.zoom>18&&mt>2&&(mt>>=1),Math.max(Ut/(512*mt),1)*re.get("symbol-spacing")),Ne=re.get("text-padding")*i.tilePixelRatio,Ge=re.get("icon-padding")*i.tilePixelRatio,Ye=Oe(re.get("text-max-angle")),He=re.get("text-rotation-alignment")==="map"&&re.get("symbol-placement")!=="point",st=re.get("icon-rotation-alignment")==="map"&&re.get("symbol-placement")!=="point",yt=re.get("symbol-placement"),nt=Me/2;var mt;const tt=re.get("icon-text-fit").evaluate(n,{},O),pt=re.get("icon-text-fit-padding").evaluate(n,{},O),Lt=tt!=="none";let vt;i.hasAnyIconTextFit===!1&&Lt&&(i.hasAnyIconTextFit=!0),c&&Lt&&(i.allowVerticalPlacement&&a.vertical&&(vt=Pz(c,a.vertical,tt,pt,ie,Se)),fe&&(c=Pz(c,fe,tt,pt,ie,Se)));const Jt=(Zt,Ct,vr)=>{if(Ct.x<0||Ct.x>=Ut||Ct.y<0||Ct.y>=Ut)return;let ar=null;if(_e){const{x:Yt,y:wt,z:gr}=z.projectTilePoint(Ct.x,Ct.y,vr);ar={anchor:new th(Yt,wt,gr,0,void 0),up:z.upVector(vr,Ct.x,Ct.y)}}(function(Yt,wt,gr,jr,xr,$r,Ar,sn,Mr,Gn,_n,xn,Tn,yn,ci,zn,Di,ao,ko,si,yi,Co,wo,So,Qn,ys,_f){const za=Yt.addToLineVertexArray(wt,jr);let va,Zs,Zy,mx,H4,W4,Z4,q4=0,K4=0,X4=0,Y4=0,sA=-1,lA=-1;const ac={};let J4=_y("");const ap=gr?gr.anchor:wt,uA=Mr.layout.get("icon-text-fit").evaluate(yi,{},Qn)!=="none";let cA=0,hA=0;if(Mr._unevaluatedLayout.getValue("text-radial-offset")===void 0?[cA,hA]=Mr.layout.get("text-offset").evaluate(yi,{},Qn).map(vs=>vs*Uo):(cA=Mr.layout.get("text-radial-offset").evaluate(yi,{},Qn)*Uo,hA=RT),Yt.allowVerticalPlacement&&xr.vertical){const vs=xr.vertical;if(ci)W4=NT(vs),sn&&(Z4=NT(sn));else{const Bs=Mr.layout.get("text-rotate").evaluate(yi,{},Qn)+90;Zy=K1(Gn,ap,wt,_n,xn,Tn,vs,yn,Bs,zn),sn&&(mx=K1(Gn,ap,wt,_n,xn,Tn,sn,ao,Bs))}}if($r){const vs=Mr.layout.get("icon-rotate").evaluate(yi,{},Qn),Bs=$z($r,vs,wo,uA),Hm=sn?$z(sn,vs,wo,uA):void 0;Zs=K1(Gn,ap,wt,_n,xn,Tn,$r,ao,vs),q4=4*Bs.length;const Q4=Yt.iconSizeData;let sp=null;Q4.kind==="source"?(sp=[uu*Mr.layout.get("icon-size").evaluate(yi,{},Qn)],sp[0]>ff&&Er(`${Yt.layerIds[0]}: Value for "icon-size" is >= ${Iy}. Reduce your "icon-size".`)):Q4.kind==="composite"&&(sp=[uu*Co.compositeIconSizes[0].evaluate(yi,{},Qn),uu*Co.compositeIconSizes[1].evaluate(yi,{},Qn)],(sp[0]>ff||sp[1]>ff)&&Er(`${Yt.layerIds[0]}: Value for "icon-size" is >= ${Iy}. Reduce your "icon-size".`)),Yt.addSymbols(Yt.icon,Bs,sp,si,ko,yi,!1,gr,wt,za.lineStartIndex,za.lineLength,-1,So,Qn,ys,_f),sA=Yt.icon.placedSymbolArray.length-1,Hm&&(K4=4*Hm.length,Yt.addSymbols(Yt.icon,Hm,sp,si,ko,yi,Hs.vertical,gr,wt,za.lineStartIndex,za.lineLength,-1,So,Qn,ys,_f),lA=Yt.icon.placedSymbolArray.length-1)}for(const vs in xr.horizontal){const Bs=xr.horizontal[vs];va||(J4=_y(Bs.text),ci?H4=NT(Bs):va=K1(Gn,ap,wt,_n,xn,Tn,Bs,yn,Mr.layout.get("text-rotate").evaluate(yi,{},Qn),zn));const Hm=Bs.positionedLines.length===1;if(X4+=Gz(Yt,gr,wt,Bs,Ar,Mr,ci,yi,zn,za,xr.vertical?Hs.horizontal:Hs.horizontalOnly,Hm?Object.keys(xr.horizontal):[vs],ac,sA,Co,So,Qn,ys),Hm)break}xr.vertical&&(Y4+=Gz(Yt,gr,wt,xr.vertical,Ar,Mr,ci,yi,zn,za,Hs.vertical,["vertical"],ac,lA,Co,So,Qn,ys));let yf=-1;const fA=(vs,Bs)=>vs?Math.max(vs,Bs):Bs;yf=fA(H4,yf),yf=fA(W4,yf),yf=fA(Z4,yf);const PJ=yf>-1?1:0;Yt.glyphOffsetArray.length>=65535&&Er("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),yi.sortKey!==void 0&&Yt.addToSortKeyRanges(Yt.symbolInstances.length,yi.sortKey),Yt.symbolInstances.emplaceBack(wt.x,wt.y,ap.x,ap.y,ap.z,ac.right>=0?ac.right:-1,ac.center>=0?ac.center:-1,ac.left>=0?ac.left:-1,ac.vertical>=0?ac.vertical:-1,sA,lA,J4,va!==void 0?va:Yt.collisionBoxArray.length,va!==void 0?va+1:Yt.collisionBoxArray.length,Zy!==void 0?Zy:Yt.collisionBoxArray.length,Zy!==void 0?Zy+1:Yt.collisionBoxArray.length,Zs!==void 0?Zs:Yt.collisionBoxArray.length,Zs!==void 0?Zs+1:Yt.collisionBoxArray.length,mx||Yt.collisionBoxArray.length,mx?mx+1:Yt.collisionBoxArray.length,_n,X4,Y4,q4,K4,PJ,0,cA,hA,yf,0,uA?1:0)})(i,Ct,ar,Zt,a,c,d,vt,i.layers[0],i.collisionBoxArray,n.index,n.sourceLayerIndex,i.index,Ne,He,S,0,Ge,st,ie,n,m,T,D,O,$,G)};if(yt==="line")for(const Zt of Rz(n.geometry,0,0,Ut,Ut)){const Ct=sY(Zt,Me,Ye,a.vertical||fe,c,ge,be,i.overscaling,Ut);for(const vr of Ct)fe&&dY(i,fe.text,nt,vr)||Jt(Zt,vr,O)}else if(yt==="line-center"){for(const Zt of n.geometry)if(Zt.length>1){const Ct=aY(Zt,Ye,a.vertical||fe,c,ge,be);Ct&&Jt(Zt,Ct,O)}}else if(n.type==="Polygon")for(const Zt of bT(n.geometry,0)){const Ct=uY(Zt,16);Jt(Zt[0],new th(Ct.x,Ct.y,0,0,void 0),O)}else if(n.type==="LineString")for(const Zt of n.geometry)Jt(Zt,new th(Zt[0].x,Zt[0].y,0,0,void 0),O);else if(n.type==="Point")for(const Zt of n.geometry)for(const Ct of Zt)Jt([Ct],new th(Ct.x,Ct.y,0,0,void 0),O)}const Iy=255,ff=Iy*uu;function Gz(i,n,a,c,d,m,y,b,S,T,D,O,z,$,G,q,re,ie){const fe=function(Se,be,Me,Ne,Ge,Ye,He,st){const yt=[];if(be.positionedLines.length===0)return yt;const nt=Ne.layout.get("text-rotate").evaluate(Ye,{})*Math.PI/180,mt=function(Jt){const Zt=Jt[0],Ct=Jt[1],vr=Zt*Ct;return vr>0?[Zt,-Ct]:vr<0?[-Zt,Ct]:Zt===0?[Ct,Zt]:[Ct,-Zt]}(Me);let tt=Math.abs(be.top-be.bottom);for(const Jt of be.positionedLines)tt-=Jt.lineOffset;const pt=be.positionedLines.length,Lt=tt/pt;let vt=be.top-Me[1];for(let Jt=0;Jt<pt;++Jt){const Zt=be.positionedLines[Jt];vt=lY(be,Lt,vt,Jt);for(const Ct of Zt.positionedGlyphs){if(!Ct.rect)continue;const vr=Ct.rect||{};let ar=wz+1,Yt=!0,wt=1,gr=0;if(Ct.imageName){const si=He[Ct.imageName];if(!si)continue;if(si.sdf){Er("SDF images are not supported in formatted text and will be ignored.");continue}Yt=!1,wt=si.pixelRatio,ar=_s/wt}const jr=(Ge||st)&&Ct.vertical,xr=Ct.metrics.advance*Ct.scale/2,$r=Ct.metrics,Ar=Ct.rect;if(Ar===null)continue;st&&be.verticalizable&&(gr=Ct.imageName?xr-Ct.metrics.width*Ct.scale/2:0);const sn=Ge?[Ct.x+xr,Ct.y]:[0,0];let Mr=[0,0],Gn=[0,0],_n=!1;Ge||(jr?(Gn=[Ct.x+xr+mt[0],Ct.y+mt[1]-gr],_n=!0):Mr=[Ct.x+xr+Me[0],Ct.y+Me[1]-gr]);const xn=Ar.w*Ct.scale/(wt*(Ct.localGlyph?cu:1)),Tn=Ar.h*Ct.scale/(wt*(Ct.localGlyph?cu:1));let yn,ci,zn,Di;if(jr){const si=Ct.y-vt,yi=new De(-xr,xr-si),Co=-Math.PI/2,wo=new De(...Gn);yn=new De(-xr+Mr[0],Mr[1]),yn._rotateAround(Co,yi)._add(wo),yn.x+=-si+xr,yn.y-=($r.left-ar)*Ct.scale;const So=Ct.imageName?$r.advance*Ct.scale:Uo*Ct.scale,Qn=String.fromCodePoint(Ct.glyph);UX(Qn)?yn.x+=(1-ar)*Ct.scale:VX(Qn)?yn.x+=So-$r.height*Ct.scale+(-ar-1)*Ct.scale:yn.x+=Ct.imageName||$r.width+2*ar===Ar.w&&$r.height+2*ar===Ar.h?(So-Tn)/2:(So-($r.height+2*ar)*Ct.scale)/2,ci=new De(yn.x,yn.y-xn),zn=new De(yn.x+Tn,yn.y),Di=new De(yn.x+Tn,yn.y-xn)}else{const si=($r.left-ar)*Ct.scale-xr+Mr[0],yi=(-$r.top-ar)*Ct.scale+Mr[1],Co=si+xn,wo=yi+Tn;yn=new De(si,yi),ci=new De(Co,yi),zn=new De(si,wo),Di=new De(Co,wo)}if(nt){let si;si=Ge?new De(0,0):_n?new De(mt[0],mt[1]):new De(Me[0],Me[1]),yn._rotateAround(nt,si),ci._rotateAround(nt,si),zn._rotateAround(nt,si),Di._rotateAround(nt,si)}const ao=new De(0,0),ko=new De(0,0);yt.push({tl:yn,tr:ci,bl:zn,br:Di,texPrimary:vr,texSecondary:void 0,writingMode:be.writingMode,glyphOffset:sn,sectionIndex:Ct.sectionIndex,isSDF:Yt,pixelOffsetTL:ao,pixelOffsetBR:ko,minFontScaleX:0,minFontScaleY:0})}}return yt}(0,c,S,m,y,b,d,i.allowVerticalPlacement),_e=i.textSizeData;let ge=null;_e.kind==="source"?(ge=[uu*m.layout.get("text-size").evaluate(b,{},re)],ge[0]>ff&&Er(`${i.layerIds[0]}: Value for "text-size" is >= ${Iy}. Reduce your "text-size".`)):_e.kind==="composite"&&(ge=[uu*G.compositeTextSizes[0].evaluate(b,{},re),uu*G.compositeTextSizes[1].evaluate(b,{},re)],(ge[0]>ff||ge[1]>ff)&&Er(`${i.layerIds[0]}: Value for "text-size" is >= ${Iy}. Reduce your "text-size".`)),i.addSymbols(i.text,fe,ge,S,y,b,D,n,a,T.lineStartIndex,T.lineLength,$,q,re,ie,!1);for(const Se of O)z[Se]=i.text.placedSymbolArray.length-1;return 4*fe.length}function Hz(i){for(const n in i)return i[n];return null}function K1(i,n,a,c,d,m,y,b,S,T){let D=y.top,O=y.bottom,z=y.left,$=y.right;const G=y.collisionPadding;if(G&&(z-=G[0],D-=G[1],$+=G[2],O+=G[3]),S){const q=new De(z,D),re=new De($,D),ie=new De(z,O),fe=new De($,O),_e=Oe(S);let ge=new De(0,0);T&&(ge=new De(T[0],T[1])),q._rotateAround(_e,ge),re._rotateAround(_e,ge),ie._rotateAround(_e,ge),fe._rotateAround(_e,ge),z=Math.min(q.x,re.x,ie.x,fe.x),$=Math.max(q.x,re.x,ie.x,fe.x),D=Math.min(q.y,re.y,ie.y,fe.y),O=Math.max(q.y,re.y,ie.y,fe.y)}return i.emplaceBack(n.x,n.y,n.z,a.x,a.y,z,D,$,O,b,c,d,m),i.length-1}function NT(i){i.collisionPadding&&(i.top-=i.collisionPadding[1],i.bottom+=i.collisionPadding[3]);const n=i.bottom-i.top;return n>0?Math.max(10,n):null}function dY(i,n,a,c){const d=i.compareText;if(n in d){const m=d[n];for(let y=m.length-1;y>=0;y--)if(c.dist(m[y])<a)return!0}else d[n]=[];return d[n].push(c),!1}function Wz(i,n){const a=i.fovAboveCenter,c=i.elevation?i.elevation.getMinElevationBelowMSL()*n:0,d=(i._camera.position[2]*i.worldSize-c)/Math.cos(i._pitch),m=Math.sin(a)*d/Math.sin(Math.max(Math.PI/2-i._pitch-a,.01)),y=Math.sin(i._pitch)*m+d;return Math.min(1.01*y,d*(1/i._horizonShift))}function Oy(i,n){if(!n.isReprojectedInTileSpace)return{scale:1<<i.z,x:i.x,y:i.y,x2:i.x+1,y2:i.y+1,projection:n};const a=Math.pow(2,-i.z),c=i.x*a,d=(i.x+1)*a,m=i.y*a,y=(i.y+1)*a,b=Dr(c),S=Dr(d),T=un(m),D=un(y),O=n.project(b,T),z=n.project(S,T),$=n.project(S,D),G=n.project(b,D);let q=Math.min(O.x,z.x,$.x,G.x),re=Math.min(O.y,z.y,$.y,G.y),ie=Math.max(O.x,z.x,$.x,G.x),fe=Math.max(O.y,z.y,$.y,G.y);const _e=a/16;function ge(be,Me,Ne,Ge,Ye,He){const st=(Ne+Ye)/2,yt=(Ge+He)/2,nt=n.project(Dr(st),un(yt)),mt=Math.max(0,q-nt.x,re-nt.y,nt.x-ie,nt.y-fe);q=Math.min(q,nt.x),ie=Math.max(ie,nt.x),re=Math.min(re,nt.y),fe=Math.max(fe,nt.y),mt>_e&&(ge(be,nt,Ne,Ge,st,yt),ge(nt,Me,st,yt,Ye,He))}ge(O,z,c,m,d,m),ge(z,$,d,m,d,y),ge($,G,d,y,c,y),ge(G,O,c,y,c,m),q-=_e,re-=_e,ie+=_e,fe+=_e;const Se=1/Math.max(ie-q,fe-re);return{scale:Se,x:q*Se,y:re*Se,x2:ie*Se,y2:fe*Se,projection:n}}function Zz(i,{x:n,y:a},c=0){return new De(((n-c)*i.scale-i.x)*Ut,(a*i.scale-i.y)*Ut)}const pY=s.a6.identity(new Float32Array(16));class df{constructor(n){this.spec=n,this.name=n.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(n,a){return{x:0,y:0,z:0}}unproject(n,a){return new Ve(0,0)}projectTilePoint(n,a,c){return{x:n,y:a,z:0}}locationPoint(n,a,c=!0){return n._coordinatePoint(n.locationCoordinate(a),c)}pixelsPerMeter(n,a){return Pr(1,n)*a}pixelSpaceConversion(n,a,c){return 1}farthestPixelDistance(n){return Wz(n,n.pixelsPerMeter)}pointCoordinate(n,a,c,d){const m=n.horizonLineFromTop(!1),y=new De(a,Math.max(m,c));return n.rayIntersectionCoordinate(n.pointRayIntersection(y,d))}pointCoordinate3D(n,a,c){const d=new De(a,c);if(n.elevation)return n.elevation.pointCoordinate(d);{const m=this.pointCoordinate(n,d.x,d.y,0);return[m.x,m.y,m.z]}}isPointAboveHorizon(n,a){if(n.elevation)return!this.pointCoordinate3D(n,a.x,a.y);const c=n.horizonLineFromTop();return a.y<c}createInversionMatrix(n,a){return pY}createTileMatrix(n,a,c){let d,m,y;const b=c.canonical,S=s.a6.identity(new Float64Array(16));if(this.isReprojectedInTileSpace){const T=Oy(b,this);d=1,m=T.x+c.wrap*T.scale,y=T.y,s.a6.scale(S,S,[d/T.scale,d/T.scale,n.pixelsPerMeter/a])}else d=a/n.zoomScale(b.z),m=(b.x+Math.pow(2,b.z)*c.wrap)*d,y=b.y*d;return s.a6.translate(S,S,[m,y,0]),s.a6.scale(S,S,[d/Ut,d/Ut,1]),S}upVector(n,a,c){return[0,0,1]}upVectorScale(n,a,c){return{metersToTile:1}}}class mY extends df{constructor(n){super(n),this.range=[4,7],this.center=n.center||[-96,37.5];const[a,c]=this.parallels=n.parallels||[29.5,45.5],d=Math.sin(Oe(a));this.n=(d+Math.sin(Oe(c)))/2,this.c=1+d*(2*this.n-d),this.r0=Math.sqrt(this.c)/this.n}project(n,a){const{n:c,c:d,r0:m}=this,y=Oe(n-this.center[0]),b=Oe(a),S=Math.sqrt(d-2*c*Math.sin(b))/c;return{x:S*Math.sin(y*c),y:S*Math.cos(y*c)-m,z:0}}unproject(n,a){const{n:c,c:d,r0:m}=this,y=m+a;let b=Math.atan2(n,Math.abs(y))*Math.sign(y);y*c<0&&(b-=Math.PI*Math.sign(n)*Math.sign(y));const S=Oe(this.center[0])*c;b=xt(b,-Math.PI-S,Math.PI-S);const T=Le(ct(b/c)+this.center[0],-180,180),D=Math.asin(Le((d-(n*n+y*y)*c*c)/(2*c),-1,1)),O=Le(ct(D),-Yr,Yr);return new Ve(T,O)}}const ky=1.340264,Ly=-.081106,Ry=893e-6,zy=.003796,X1=Math.sqrt(3)/2;class gY extends df{project(n,a){a=a/180*Math.PI,n=n/180*Math.PI;const c=Math.asin(X1*Math.sin(a)),d=c*c,m=d*d*d;return{x:.5*(n*Math.cos(c)/(X1*(ky+3*Ly*d+m*(7*Ry+9*zy*d)))/Math.PI+.5),y:1-.5*(c*(ky+Ly*d+m*(Ry+zy*d))/Math.PI+1),z:0}}unproject(n,a){n=(2*n-.5)*Math.PI;let c=a=(2*(1-a)-1)*Math.PI,d=c*c,m=d*d*d;for(let D,O,z,$=0;$<12&&(O=c*(ky+Ly*d+m*(Ry+zy*d))-a,z=ky+3*Ly*d+m*(7*Ry+9*zy*d),D=O/z,c=Le(c-D,-Math.PI/3,Math.PI/3),d=c*c,m=d*d*d,!(Math.abs(D)<1e-12));++$);const y=X1*n*(ky+3*Ly*d+m*(7*Ry+9*zy*d))/Math.cos(c),b=Math.asin(Math.sin(c)/X1),S=Le(180*y/Math.PI,-180,180),T=Le(180*b/Math.PI,-Yr,Yr);return new Ve(S,T)}}class _Y extends df{constructor(n){super(n),this.wrap=!0,this.supportsWorldCopies=!0}project(n,a){return{x:.5+n/360,y:.5-a/360,z:0}}unproject(n,a){const c=360*(n-.5),d=Le(360*(.5-a),-Yr,Yr);return new Ve(c,d)}}const Nm=Math.PI/2;function Y1(i){return Math.tan((Nm+i)/2)}class yY extends df{constructor(n){super(n),this.center=n.center||[0,30];const[a,c]=this.parallels=n.parallels||[30,30];let d=Oe(a),m=Oe(c);this.southernCenter=d+m<0,this.southernCenter&&(d=-d,m=-m);const y=Math.cos(d),b=Y1(d);this.n=d===m?Math.sin(d):Math.log(y/Math.cos(m))/Math.log(Y1(m)/b),this.f=y*Math.pow(Y1(d),this.n)/this.n}project(n,a){a=Oe(a),this.southernCenter&&(a=-a),n=Oe(n-this.center[0]);const c=1e-6,{n:d,f:m}=this;m>0?a<-Nm+c&&(a=-Nm+c):a>Nm-c&&(a=Nm-c);const y=m/Math.pow(Y1(a),d);let b=y*Math.sin(d*n),S=m-y*Math.cos(d*n);return b=.5*(b/Math.PI+.5),S=.5*(S/Math.PI+.5),{x:b,y:this.southernCenter?S:1-S,z:0}}unproject(n,a){n=(2*n-.5)*Math.PI,this.southernCenter&&(a=1-a),a=(2*(1-a)-.5)*Math.PI;const{n:c,f:d}=this,m=d-a,y=Math.sign(m),b=Math.sign(c)*Math.sqrt(n*n+m*m);let S=Math.atan2(n,Math.abs(m))*y;m*c<0&&(S-=Math.PI*Math.sign(n)*y);const T=Le(ct(S/c)+this.center[0],-180,180),D=Le(ct(2*Math.atan(Math.pow(d/b,1/c))-Nm),-Yr,Yr);return new Ve(T,this.southernCenter?-D:D)}}class qz extends df{constructor(n){super(n),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(n,a){return{x:Lr(n),y:Cr(a),z:0}}unproject(n,a){const c=Dr(n),d=un(a);return new Ve(c,d)}}const Kz=Oe(Yr);class vY extends df{project(n,a){const c=(a=Oe(a))*a,d=c*c;return{x:.5*((n=Oe(n))*(.8707-.131979*c+d*(d*(.003971*c-.001529*d)-.013791))/Math.PI+.5),y:1-.5*(a*(1.007226+c*(.015085+d*(.028874*c-.044475-.005916*d)))/Math.PI+1),z:0}}unproject(n,a){n=(2*n-.5)*Math.PI;let c=a=(2*(1-a)-1)*Math.PI,d=25,m=0,y=c*c;do{y=c*c;const T=y*y;m=(c*(1.007226+y*(.015085+T*(.028874*y-.044475-.005916*T)))-a)/(1.007226+y*(.045255+T*(.259866*y-.311325-.005916*11*T))),c=Le(c-m,-Kz,Kz)}while(Math.abs(m)>1e-6&&--d>0);y=c*c;const b=Le(ct(n/(.8707+y*(y*(y*y*y*(.003971-.001529*y)-.013791)-.131979))),-180,180),S=ct(c);return new Ve(b,S)}}const Xz=Oe(Yr);class BY extends df{project(n,a){a=Oe(a),n=Oe(n);const c=Math.cos(a),d=2/Math.PI,m=Math.acos(c*Math.cos(n/2)),y=Math.sin(m)/m,b=.5*(n*d+2*c*Math.sin(n/2)/y)||0,S=.5*(a+Math.sin(a)/y)||0;return{x:.5*(b/Math.PI+.5),y:1-.5*(S/Math.PI+1),z:0}}unproject(n,a){let c=n=(2*n-.5)*Math.PI,d=a=(2*(1-a)-1)*Math.PI,m=25;const y=1e-6;let b=0,S=0;do{const T=Math.cos(d),D=Math.sin(d),O=2*D*T,z=D*D,$=T*T,G=Math.cos(c/2),q=Math.sin(c/2),re=2*G*q,ie=q*q,fe=1-$*G*G,_e=fe?1/fe:0,ge=fe?Math.acos(T*G)*Math.sqrt(1/fe):0,Se=.5*(2*ge*T*q+2*c/Math.PI)-n,be=.5*(ge*D+d)-a,Me=.5*_e*($*ie+ge*T*G*z)+1/Math.PI,Ne=_e*(re*O/4-ge*D*q),Ge=.125*_e*(O*q-ge*D*$*re),Ye=.5*_e*(z*G+ge*ie*T)+.5,He=Ne*Ge-Ye*Me;b=(be*Ne-Se*Ye)/He,S=(Se*Ge-be*Me)/He,c=Le(c-b,-Math.PI,Math.PI),d=Le(d-S,-Xz,Xz)}while((Math.abs(b)>y||Math.abs(S)>y)&&--m>0);return new Ve(ct(c),ct(d))}}class Yz extends df{constructor(n){super(n),this.center=n.center||[0,0],this.parallels=n.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(Oe(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(n,a){const{scale:c,cosPhi:d}=this;return{x:Oe(n)*d*c+.5,y:-Math.sin(Oe(a))/d*c+.5,z:0}}unproject(n,a){const{scale:c,cosPhi:d}=this,m=-(a-.5)/c,y=Le(ct((n-.5)/c)/d,-180,180),b=Math.asin(Le(m*d,-1,1)),S=Le(ct(b),-Yr,Yr);return new Ve(y,S)}}class xY extends qz{constructor(n){super(n),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(n,a,c){const d=xy(n,a,c),m=D1(oc(c));return s.N.transformMat4(d,d,m),{x:d[0],y:d[1],z:d[2]}}locationPoint(n,a){const c=it(a.lat,a.lng),d=s.N.normalize([],c),m=n.elevation?n.elevation.getAtPointOrZero(n.locationCoordinate(a),n._centerAltitude):n._centerAltitude,y=Pr(1,0)*Ut*m;s.N.scaleAndAdd(c,c,d,y);const b=s.a6.identity(new Float64Array(16));return s.a6.multiply(b,n.pixelMatrix,n.globeMatrix),s.N.transformMat4(c,c,b),new De(c[0],c[1])}pixelsPerMeter(n,a){return Pr(1,0)*a}pixelSpaceConversion(n,a,c){const d=Pr(1,n)*a,m=Zr(Pr(1,45)*a,d,c);return this.pixelsPerMeter(n,a)/m}createTileMatrix(n,a,c){const d=pT(oc(c.canonical));return s.a6.multiply(new Float64Array(16),n.globeMatrix,d)}createInversionMatrix(n,a){const{center:c}=n,d=D1(oc(a));return s.a6.rotateY(d,d,Oe(c.lng)),s.a6.rotateX(d,d,Oe(c.lat)),s.a6.scale(d,d,[n._pixelsPerMercatorPixel,n._pixelsPerMercatorPixel,1]),Float32Array.from(d)}pointCoordinate(n,a,c,d){return pR(n,a,c,!0)||new fn(0,0)}pointCoordinate3D(n,a,c){const d=this.pointCoordinate(n,a,c,0);return[d.x,d.y,d.z]}isPointAboveHorizon(n,a){return!pR(n,a.x,a.y,!1)}farthestPixelDistance(n){const a=function(d,m){const y=d.cameraToCenterDistance,b=d._centerAltitude*m,S=d._camera,T=d._camera.forward(),D=s.N.add([],s.N.scale([],T,-y),[0,0,b]),O=d.worldSize/(2*Math.PI),z=[0,0,-O],$=d.width/d.height,G=Math.tan(d.fovAboveCenter),q=s.N.scale([],S.up(),G),re=s.N.scale([],S.right(),G*$),ie=s.N.normalize([],s.N.add([],s.N.add([],T,q),re)),fe=[];let _e;if(new uT(D,ie).closestPointOnSphere(z,O,fe)){const ge=s.N.add([],fe,z),Se=s.N.sub([],ge,D);_e=Math.cos(d.fovAboveCenter)*s.N.length(Se)}else{const ge=s.N.sub([],D,z),Se=s.N.sub([],z,D);s.N.normalize(Se,Se);const be=s.N.length(ge)-O;_e=Math.sqrt(be*(be+2*O));const Me=Math.acos(_e/(O+be))-Math.acos(s.N.dot(T,Se));_e*=Math.cos(Me)}return 1.01*_e}(n,this.pixelsPerMeter(n.center.lat,n.worldSize)),c=sf(n.zoom);if(c>0){const d=Wz(n,Pr(1,n.center.lat)*n.worldSize),m=n.worldSize/(2*Math.PI),y=Math.max(n.width,n.height)/n.worldSize*Math.PI;return Zr(a,d+m*(1-Math.cos(y)),Math.pow(c,10))}return a}upVector(n,a,c){return xy(a,c,n,1)}upVectorScale(n){return{metersToTile:T1(E1(oc(n)))}}}function Jz(i){const n=i.parallels,a=!!n&&Math.abs(n[0]+n[1])<.01;switch(i.name){case"mercator":return new qz(i);case"equirectangular":return new _Y(i);case"naturalEarth":return new vY(i);case"equalEarth":return new gY(i);case"winkelTripel":return new BY(i);case"albers":return a?new Yz(i):new mY(i);case"lambertConformalConic":return a?new Yz(i):new yY(i);case"globe":return new xY(i)}throw new Error(`Invalid projection name: ${i.name}`)}const bY=R1.types,CY=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function J1(i,n,a,c,d,m,y,b,S,T,D,O,z){const $=b?Math.min(ff,Math.round(b[0])):0,G=b?Math.min(ff,Math.round(b[1])):0;i.emplaceBack(n,a,Math.round(32*c),Math.round(32*d),m,y,($<<1)+(S?1:0),G,16*T,16*D,256*O,256*z)}function Q1(i,n,a){i.emplaceBack(n,a)}function ex(i,n,a,c,d,m,y){i.emplaceBack(n,a,c,d,m,y)}function tx(i,n,a,c,d){i.emplaceBack(n,a,c,d),i.emplaceBack(n,a,c,d),i.emplaceBack(n,a,c,d),i.emplaceBack(n,a,c,d)}function wY(i){for(const n of i.sections)if(H_(n.text))return!0;return!1}class FT{constructor(n){this.layoutVertexArray=new $d,this.indexArray=new po,this.programConfigurations=n,this.segments=new Ei,this.dynamicLayoutVertexArray=new Ju,this.opacityVertexArray=new ly,this.placedSymbolArray=new s1,this.iconTransitioningVertexArray=new Sl,this.globeExtVertexArray=new sy,this.zOffsetVertexArray=new Vd}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0&&this.iconTransitioningVertexArray.length===0}upload(n,a,c,d,m){this.isEmpty()||(c&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,IX.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,a),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,kX.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,CY,!0),this.iconTransitioningVertexArray.length>0&&(this.iconTransitioningVertexBuffer=n.createVertexBuffer(this.iconTransitioningVertexArray,RX.members,!0)),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=n.createVertexBuffer(this.globeExtVertexArray,OX.members,!0)),!this.zOffsetVertexBuffer&&(this.zOffsetVertexArray.length>0||m)&&(this.zOffsetVertexBuffer=n.createVertexBuffer(this.zOffsetVertexArray,LX.members,!0)),this.opacityVertexBuffer.itemSize=1),(c||d)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.iconTransitioningVertexBuffer&&this.iconTransitioningVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy(),this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy())}}Kt(FT,"SymbolBuffers");class jT{constructor(n,a,c){this.layoutVertexArray=new n,this.layoutAttributes=a,this.indexArray=new c,this.segments=new Ei,this.collisionVertexArray=new cy,this.collisionVertexArrayExt=new Ju}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,zX.members,!0),this.collisionVertexBufferExt=n.createVertexBuffer(this.collisionVertexArrayExt,NX.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Kt(jT,"CollisionBuffers");class rx{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(y=>y.fqid),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.hasAnyIconTextFit=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=s.a6.identity([]),this.placementViewportMatrix=s.a6.identity([]);const a=this.layers[0]._unevaluatedLayout._values;this.textSizeData=DT(this.zoom,a["text-size"]),this.iconSizeData=DT(this.zoom,a["icon-size"]);const c=this.layers[0].layout,d=c.get("symbol-sort-key"),m=c.get("symbol-z-order");this.canOverlap=c.get("text-allow-overlap")||c.get("icon-allow-overlap")||c.get("text-ignore-placement")||c.get("icon-ignore-placement"),this.sortFeaturesByKey=m!=="viewport-y"&&d.constantOr(1)!==void 0,this.sortFeaturesByY=(m==="viewport-y"||m==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=c.get("text-writing-mode").map(y=>Hs[y]),this.stateDependentLayerIds=this.layers.filter(y=>y.isStateDependent()).map(y=>y.id),this.sourceID=n.sourceID,this.projection=n.projection,this.hasAnyZOffset=!1,this.zOffsetSortDirty=!1,this.zOffsetBuffersNeedUpload=c.get("symbol-z-elevate")}createArrays(){this.text=new FT(new le(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new FT(new le(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new c1,this.lineVertexArray=new Zd,this.symbolInstances=new u1}calculateGlyphDependencies(n,a,c,d,m){for(let y=0;y<n.length;y++){const b=n.codePointAt(y);if(b===void 0)break;if(a[b]=!0,d&&m&&b<=65535){const S=Dy[n.charAt(y)];S&&(a[S.charCodeAt(0)]=!0)}}}populate(n,a,c,d){const m=this.layers[0],y=m.layout,b=this.projection.name==="globe",S=y.get("text-font"),T=y.get("text-field"),D=y.get("icon-image"),O=(T.value.kind!=="constant"||T.value.value instanceof eo&&!T.value.value.isEmpty()||T.value.value.toString().length>0)&&(S.value.kind!=="constant"||S.value.value.length>0),z=D.value.kind!=="constant"||!!D.value.value||Object.keys(D.parameters).length>0,$=y.get("symbol-sort-key");if(this.features=[],!O&&!z)return;const G=a.iconDependencies,q=a.glyphDependencies,re=a.availableImages,ie=new pi(this.zoom);for(const{feature:fe,id:_e,index:ge,sourceLayerIndex:Se}of n){const be=m._featureFilter.needGeometry,Me=to(fe,be);if(!m._featureFilter.filter(ie,Me,c))continue;if(be||(Me.geometry=go(fe,c,d)),b&&fe.type!==1&&c.z<=5){const He=Me.geometry,st=.98078528056,yt=(nt,mt)=>{const tt=xy(nt.x,nt.y,c,1),pt=xy(mt.x,mt.y,c,1);return s.N.dot(tt,pt)<st};for(let nt=0;nt<He.length;nt++)He[nt]=Oo(He[nt],yt)}let Ne,Ge;if(O){const He=m.getValueAndResolveTokens("text-field",Me,c,re),st=eo.factory(He);wY(st)&&(this.hasRTLText=!0),(!this.hasRTLText||Yu()==="unavailable"||this.hasRTLText&&Ja.isParsed())&&(Ne=$X(st,m,Me))}if(z){const He=m.getValueAndResolveTokens("icon-image",Me,c,re);Ge=He instanceof cr?He:cr.fromString(He)}if(!Ne&&!Ge)continue;const Ye=this.sortFeaturesByKey?$.evaluate(Me,{},c):void 0;if(this.features.push({id:_e,text:Ne,icon:Ge,index:ge,sourceLayerIndex:Se,geometry:Me.geometry,properties:fe.properties,type:bY[fe.type],sortKey:Ye}),Ge&&(G[Ge.namePrimary]=!0,Ge.nameSecondary&&(G[Ge.nameSecondary]=!0)),Ne){const He=S.evaluate(Me,{},c).join(","),st=y.get("text-rotation-alignment")==="map"&&y.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Hs.vertical)>=0;for(const yt of Ne.sections)if(yt.image)G[yt.image.namePrimary]=!0;else{const nt=Ku(Ne.toString()),mt=yt.fontStack||He,tt=q[mt]=q[mt]||{};this.calculateGlyphDependencies(yt.text,tt,st,this.allowVerticalPlacement,nt)}}}y.get("symbol-placement")==="line"&&(this.features=function(fe){const _e={},ge={},Se=[];let be=0;function Me(He){Se.push(fe[He]),be++}function Ne(He,st,yt){const nt=ge[He];return delete ge[He],ge[st]=nt,Se[nt].geometry[0].pop(),Se[nt].geometry[0]=Se[nt].geometry[0].concat(yt[0]),nt}function Ge(He,st,yt){const nt=_e[st];return delete _e[st],_e[He]=nt,Se[nt].geometry[0].shift(),Se[nt].geometry[0]=yt[0].concat(Se[nt].geometry[0]),nt}function Ye(He,st,yt){const nt=yt?st[0][st[0].length-1]:st[0][0];return`${He}:${nt.x}:${nt.y}`}for(let He=0;He<fe.length;He++){const st=fe[He],yt=st.geometry,nt=st.text?st.text.toString():null;if(!nt){Me(He);continue}const mt=Ye(nt,yt),tt=Ye(nt,yt,!0);if(mt in ge&&tt in _e&&ge[mt]!==_e[tt]){const pt=Ge(mt,tt,yt),Lt=Ne(mt,tt,Se[pt].geometry);delete _e[mt],delete ge[tt],ge[Ye(nt,Se[Lt].geometry,!0)]=Lt,Se[pt].geometry=null}else mt in ge?Ne(mt,tt,yt):tt in _e?Ge(mt,tt,yt):(Me(He),_e[mt]=be-1,ge[tt]=be-1)}return Se.filter(He=>He.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((fe,_e)=>fe.sortKey-_e.sortKey)}update(n,a,c,d,m){const y=Object.keys(n).length!==0;if(y&&!this.stateDependentLayers.length)return;const b=y?this.stateDependentLayers:this.layers;this.text.programConfigurations.updatePaintArrays(n,a,b,c,d,m),this.icon.programConfigurations.updatePaintArrays(n,a,b,c,d,m)}updateZOffset(){const n=(m,y,b)=>{c+=y,c>m.length&&m.resize(c);for(let S=-y;S<0;S++)m.emplace(S+c,b)},a=(m,y,b)=>{d+=y,d>m.length&&m.resize(d);for(let S=-y;S<0;S++)m.emplace(S+d,b)};if(!this.zOffsetBuffersNeedUpload)return;this.zOffsetBuffersNeedUpload=!1;let c=0,d=0;for(let m=0;m<this.symbolInstances.length;m++){const y=this.symbolInstances.get(m),{numHorizontalGlyphVertices:b,numVerticalGlyphVertices:S,numIconVertices:T}=y,D=y.zOffset,O=T>0;if((b>0||S>0)&&(n(this.text.zOffsetVertexArray,b,D),n(this.text.zOffsetVertexArray,S,D)),O){const{placedIconSymbolIndex:z,verticalPlacedIconSymbolIndex:$}=y;z>=0&&a(this.icon.zOffsetVertexArray,T,D),$>=0&&a(this.icon.zOffsetVertexArray,y.numVerticalIconVertices,D)}}this.text.zOffsetVertexBuffer&&this.text.zOffsetVertexBuffer.updateData(this.text.zOffsetVertexArray),this.icon.zOffsetVertexBuffer&&this.icon.zOffsetVertexBuffer.updateData(this.icon.zOffsetVertexArray)}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=Jz(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,a){const c=this.lineVertexArray.length;if(n.segment!==void 0)for(const{x:d,y:m}of a)this.lineVertexArray.emplaceBack(d,m);return{lineStartIndex:c,lineLength:this.lineVertexArray.length-c}}addSymbols(n,a,c,d,m,y,b,S,T,D,O,z,$,G,q,re){const ie=n.indexArray,fe=n.layoutVertexArray,_e=n.globeExtVertexArray,ge=n.segments.prepareSegment(4*a.length,fe,ie,this.canOverlap?y.sortKey:void 0),Se=this.glyphOffsetArray.length,be=ge.vertexLength,Me=this.allowVerticalPlacement&&b===Hs.vertical?Math.PI/2:0,Ne=y.text&&y.text.sections;for(let Ye=0;Ye<a.length;Ye++){const{tl:He,tr:st,bl:yt,br:nt,texPrimary:mt,texSecondary:tt,pixelOffsetTL:pt,pixelOffsetBR:Lt,minFontScaleX:vt,minFontScaleY:Jt,glyphOffset:Zt,isSDF:Ct,sectionIndex:vr}=a[Ye],ar=ge.vertexLength,Yt=Zt[1];if(J1(fe,T.x,T.y,He.x,Yt+He.y,mt.x,mt.y,c,Ct,pt.x,pt.y,vt,Jt),J1(fe,T.x,T.y,st.x,Yt+st.y,mt.x+mt.w,mt.y,c,Ct,Lt.x,pt.y,vt,Jt),J1(fe,T.x,T.y,yt.x,Yt+yt.y,mt.x,mt.y+mt.h,c,Ct,pt.x,Lt.y,vt,Jt),J1(fe,T.x,T.y,nt.x,Yt+nt.y,mt.x+mt.w,mt.y+mt.h,c,Ct,Lt.x,Lt.y,vt,Jt),S){const{x:wt,y:gr,z:jr}=S.anchor,[xr,$r,Ar]=S.up;ex(_e,wt,gr,jr,xr,$r,Ar),ex(_e,wt,gr,jr,xr,$r,Ar),ex(_e,wt,gr,jr,xr,$r,Ar),ex(_e,wt,gr,jr,xr,$r,Ar),tx(n.dynamicLayoutVertexArray,wt,gr,jr,Me)}else tx(n.dynamicLayoutVertexArray,T.x,T.y,T.z,Me);if(re){const wt=tt||mt;Q1(n.iconTransitioningVertexArray,wt.x,wt.y),Q1(n.iconTransitioningVertexArray,wt.x+wt.w,wt.y),Q1(n.iconTransitioningVertexArray,wt.x,wt.y+wt.h),Q1(n.iconTransitioningVertexArray,wt.x+wt.w,wt.y+wt.h)}ie.emplaceBack(ar,ar+1,ar+2),ie.emplaceBack(ar+1,ar+2,ar+3),ge.vertexLength+=4,ge.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Zt[0]),Ye!==a.length-1&&vr===a[Ye+1].sectionIndex||n.programConfigurations.populatePaintArrays(fe.length,y,y.index,{},$,G,q,Ne&&Ne[vr])}const Ge=S?S.anchor:T;n.placedSymbolArray.emplaceBack(Ge.x,Ge.y,Ge.z,T.x,T.y,Se,this.glyphOffsetArray.length-Se,be,D,O,T.segment,c?c[0]:0,c?c[1]:0,d[0],d[1],b,0,!1,0,z,0)}_commitLayoutVertex(n,a,c,d,m,y,b){n.emplaceBack(a,c,d,m,y,Math.round(b.x),Math.round(b.y))}_addCollisionDebugVertices(n,a,c,d,m,y,b){const S=c.segments.prepareSegment(4,c.layoutVertexArray,c.indexArray),T=S.vertexLength,D=b.tileAnchorX,O=b.tileAnchorY;for(let $=0;$<4;$++)c.collisionVertexArray.emplaceBack(0,0,0,0);this._commitDebugCollisionVertexUpdate(c.collisionVertexArrayExt,a,n.padding,b.zOffset),this._commitLayoutVertex(c.layoutVertexArray,d,m,y,D,O,new De(n.x1,n.y1)),this._commitLayoutVertex(c.layoutVertexArray,d,m,y,D,O,new De(n.x2,n.y1)),this._commitLayoutVertex(c.layoutVertexArray,d,m,y,D,O,new De(n.x2,n.y2)),this._commitLayoutVertex(c.layoutVertexArray,d,m,y,D,O,new De(n.x1,n.y2)),S.vertexLength+=4;const z=c.indexArray;z.emplaceBack(T,T+1),z.emplaceBack(T+1,T+2),z.emplaceBack(T+2,T+3),z.emplaceBack(T+3,T),S.primitiveLength+=4}_addTextDebugCollisionBoxes(n,a,c,d,m,y){for(let b=d;b<m;b++){const S=c.get(b),T=this.getSymbolInstanceTextSize(n,y,a,b);this._addCollisionDebugVertices(S,T,this.textCollisionBox,S.projectedAnchorX,S.projectedAnchorY,S.projectedAnchorZ,y)}}_addIconDebugCollisionBoxes(n,a,c,d,m,y){for(let b=d;b<m;b++){const S=c.get(b),T=this.getSymbolInstanceIconSize(n,a,y.placedIconSymbolIndex);this._addCollisionDebugVertices(S,T,this.iconCollisionBox,S.projectedAnchorX,S.projectedAnchorY,S.projectedAnchorZ,y)}}generateCollisionDebugBuffers(n,a){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new jT(Ud,yz.members,Sl),this.iconCollisionBox=new jT(Ud,yz.members,Sl);const c=Mm(this.iconSizeData,n),d=Mm(this.textSizeData,n);for(let m=0;m<this.symbolInstances.length;m++){const y=this.symbolInstances.get(m);this._addTextDebugCollisionBoxes(d,n,a,y.textBoxStartIndex,y.textBoxEndIndex,y),this._addTextDebugCollisionBoxes(d,n,a,y.verticalTextBoxStartIndex,y.verticalTextBoxEndIndex,y),this._addIconDebugCollisionBoxes(c,n,a,y.iconBoxStartIndex,y.iconBoxEndIndex,y),this._addIconDebugCollisionBoxes(c,n,a,y.verticalIconBoxStartIndex,y.verticalIconBoxEndIndex,y)}}getSymbolInstanceTextSize(n,a,c,d){const m=this.text.placedSymbolArray.get(a.rightJustifiedTextSymbolIndex>=0?a.rightJustifiedTextSymbolIndex:a.centerJustifiedTextSymbolIndex>=0?a.centerJustifiedTextSymbolIndex:a.leftJustifiedTextSymbolIndex>=0?a.leftJustifiedTextSymbolIndex:a.verticalPlacedTextSymbolIndex>=0?a.verticalPlacedTextSymbolIndex:d),y=U1(this.textSizeData,n,m)/Uo;return this.tilePixelRatio*y}getSymbolInstanceIconSize(n,a,c){const d=this.icon.placedSymbolArray.get(c),m=U1(this.iconSizeData,n,d);return this.tilePixelRatio*m}_commitDebugCollisionVertexUpdate(n,a,c,d){n.emplaceBack(a,-c,-c,d),n.emplaceBack(a,c,-c,d),n.emplaceBack(a,c,c,d),n.emplaceBack(a,-c,c,d)}_updateTextDebugCollisionBoxes(n,a,c,d,m,y){for(let b=d;b<m;b++){const S=c.get(b),T=this.getSymbolInstanceTextSize(n,y,a,b);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,T,S.padding,y.zOffset)}}_updateIconDebugCollisionBoxes(n,a,c,d,m,y){for(let b=d;b<m;b++){const S=c.get(b),T=this.getSymbolInstanceIconSize(n,a,y.placedIconSymbolIndex);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,T,S.padding,y.zOffset)}}updateCollisionDebugBuffers(n,a){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const c=Mm(this.iconSizeData,n),d=Mm(this.textSizeData,n);for(let m=0;m<this.symbolInstances.length;m++){const y=this.symbolInstances.get(m);this._updateTextDebugCollisionBoxes(d,n,a,y.textBoxStartIndex,y.textBoxEndIndex,y),this._updateTextDebugCollisionBoxes(d,n,a,y.verticalTextBoxStartIndex,y.verticalTextBoxEndIndex,y),this._updateIconDebugCollisionBoxes(c,n,a,y.iconBoxStartIndex,y.iconBoxEndIndex,y),this._updateIconDebugCollisionBoxes(c,n,a,y.verticalIconBoxStartIndex,y.verticalIconBoxEndIndex,y)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(n,a,c,d,m,y,b,S,T){const D={};if(a<c){const{x1:O,y1:z,x2:$,y2:G,padding:q,projectedAnchorX:re,projectedAnchorY:ie,projectedAnchorZ:fe,tileAnchorX:_e,tileAnchorY:ge,featureIndex:Se}=n.get(a);D.textBox={x1:O,y1:z,x2:$,y2:G,padding:q,projectedAnchorX:re,projectedAnchorY:ie,projectedAnchorZ:fe,tileAnchorX:_e,tileAnchorY:ge},D.textFeatureIndex=Se}if(d<m){const{x1:O,y1:z,x2:$,y2:G,padding:q,projectedAnchorX:re,projectedAnchorY:ie,projectedAnchorZ:fe,tileAnchorX:_e,tileAnchorY:ge,featureIndex:Se}=n.get(d);D.verticalTextBox={x1:O,y1:z,x2:$,y2:G,padding:q,projectedAnchorX:re,projectedAnchorY:ie,projectedAnchorZ:fe,tileAnchorX:_e,tileAnchorY:ge},D.verticalTextFeatureIndex=Se}if(y<b){const{x1:O,y1:z,x2:$,y2:G,padding:q,projectedAnchorX:re,projectedAnchorY:ie,projectedAnchorZ:fe,tileAnchorX:_e,tileAnchorY:ge,featureIndex:Se}=n.get(y);D.iconBox={x1:O,y1:z,x2:$,y2:G,padding:q,projectedAnchorX:re,projectedAnchorY:ie,projectedAnchorZ:fe,tileAnchorX:_e,tileAnchorY:ge},D.iconFeatureIndex=Se}if(S<T){const{x1:O,y1:z,x2:$,y2:G,padding:q,projectedAnchorX:re,projectedAnchorY:ie,projectedAnchorZ:fe,tileAnchorX:_e,tileAnchorY:ge,featureIndex:Se}=n.get(S);D.verticalIconBox={x1:O,y1:z,x2:$,y2:G,padding:q,projectedAnchorX:re,projectedAnchorY:ie,projectedAnchorZ:fe,tileAnchorX:_e,tileAnchorY:ge},D.verticalIconFeatureIndex=Se}return D}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let a=0;a<this.symbolInstances.length;a++){const c=this.symbolInstances.get(a);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,c.textBoxStartIndex,c.textBoxEndIndex,c.verticalTextBoxStartIndex,c.verticalTextBoxEndIndex,c.iconBoxStartIndex,c.iconBoxEndIndex,c.verticalIconBoxStartIndex,c.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}hasIconTextFit(){return this.hasAnyIconTextFit}addIndicesForPlacedSymbol(n,a){const c=n.placedSymbolArray.get(a),d=c.vertexStartIndex+4*c.numGlyphs;for(let m=c.vertexStartIndex;m<d;m+=4)n.indexArray.emplaceBack(m,m+1,m+2),n.indexArray.emplaceBack(m+1,m+2,m+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const a=Math.sin(n),c=Math.cos(n),d=[],m=[],y=[];for(let b=0;b<this.symbolInstances.length;++b){y.push(b);const S=this.symbolInstances.get(b);d.push(0|Math.round(a*S.tileAnchorX+c*S.tileAnchorY)),m.push(S.featureIndex)}return y.sort((b,S)=>d[b]-d[S]||m[S]-m[b]),y}getSortedIndexesByZOffset(){if(!this.zOffsetSortDirty)return this.symbolInstanceIndexesSortedZOffset;if(!this.symbolInstanceIndexesSortedZOffset){this.symbolInstanceIndexesSortedZOffset=[];for(let n=0;n<this.symbolInstances.length;++n)this.symbolInstanceIndexesSortedZOffset.push(n)}return this.zOffsetSortDirty=!1,this.symbolInstanceIndexesSortedZOffset.sort((n,a)=>this.symbolInstances.get(a).zOffset-this.symbolInstances.get(n).zOffset)}addToSortKeyRanges(n,a){const c=this.sortKeyRanges[this.sortKeyRanges.length-1];c&&c.sortKey===a?c.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:a,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const a of this.symbolInstanceIndexes){const c=this.symbolInstances.get(a);this.featureSortOrder.push(c.featureIndex);const{rightJustifiedTextSymbolIndex:d,centerJustifiedTextSymbolIndex:m,leftJustifiedTextSymbolIndex:y,verticalPlacedTextSymbolIndex:b,placedIconSymbolIndex:S,verticalPlacedIconSymbolIndex:T}=c;d>=0&&this.addIndicesForPlacedSymbol(this.text,d),m>=0&&m!==d&&this.addIndicesForPlacedSymbol(this.text,m),y>=0&&y!==m&&y!==d&&this.addIndicesForPlacedSymbol(this.text,y),b>=0&&this.addIndicesForPlacedSymbol(this.text,b),S>=0&&this.addIndicesForPlacedSymbol(this.icon,S),T>=0&&this.addIndicesForPlacedSymbol(this.icon,T)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Kt(rx,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),rx.addDynamicAttributes=tx;const SY=new mi({"symbol-placement":new Ot(Ke.layout_symbol["symbol-placement"]),"symbol-spacing":new Ot(Ke.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ot(Ke.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new pr(Ke.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ot(Ke.layout_symbol["symbol-z-order"]),"symbol-z-elevate":new Ot(Ke.layout_symbol["symbol-z-elevate"]),"icon-allow-overlap":new Ot(Ke.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Ot(Ke.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ot(Ke.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ot(Ke.layout_symbol["icon-rotation-alignment"]),"icon-size":new pr(Ke.layout_symbol["icon-size"]),"icon-text-fit":new pr(Ke.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new pr(Ke.layout_symbol["icon-text-fit-padding"]),"icon-image":new pr(Ke.layout_symbol["icon-image"]),"icon-rotate":new pr(Ke.layout_symbol["icon-rotate"]),"icon-padding":new Ot(Ke.layout_symbol["icon-padding"]),"icon-keep-upright":new Ot(Ke.layout_symbol["icon-keep-upright"]),"icon-offset":new pr(Ke.layout_symbol["icon-offset"]),"icon-anchor":new pr(Ke.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ot(Ke.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ot(Ke.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ot(Ke.layout_symbol["text-rotation-alignment"]),"text-field":new pr(Ke.layout_symbol["text-field"]),"text-font":new pr(Ke.layout_symbol["text-font"]),"text-size":new pr(Ke.layout_symbol["text-size"]),"text-max-width":new pr(Ke.layout_symbol["text-max-width"]),"text-line-height":new pr(Ke.layout_symbol["text-line-height"]),"text-letter-spacing":new pr(Ke.layout_symbol["text-letter-spacing"]),"text-justify":new pr(Ke.layout_symbol["text-justify"]),"text-radial-offset":new pr(Ke.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ot(Ke.layout_symbol["text-variable-anchor"]),"text-anchor":new pr(Ke.layout_symbol["text-anchor"]),"text-max-angle":new Ot(Ke.layout_symbol["text-max-angle"]),"text-writing-mode":new Ot(Ke.layout_symbol["text-writing-mode"]),"text-rotate":new pr(Ke.layout_symbol["text-rotate"]),"text-padding":new Ot(Ke.layout_symbol["text-padding"]),"text-keep-upright":new Ot(Ke.layout_symbol["text-keep-upright"]),"text-transform":new pr(Ke.layout_symbol["text-transform"]),"text-offset":new pr(Ke.layout_symbol["text-offset"]),"text-allow-overlap":new Ot(Ke.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Ot(Ke.layout_symbol["text-ignore-placement"]),"text-optional":new Ot(Ke.layout_symbol["text-optional"]),visibility:new Ot(Ke.layout_symbol.visibility)});var $T={paint:new mi({"icon-opacity":new pr(Ke.paint_symbol["icon-opacity"]),"icon-emissive-strength":new pr(Ke.paint_symbol["icon-emissive-strength"]),"text-emissive-strength":new pr(Ke.paint_symbol["text-emissive-strength"]),"icon-color":new pr(Ke.paint_symbol["icon-color"]),"icon-halo-color":new pr(Ke.paint_symbol["icon-halo-color"]),"icon-halo-width":new pr(Ke.paint_symbol["icon-halo-width"]),"icon-halo-blur":new pr(Ke.paint_symbol["icon-halo-blur"]),"icon-translate":new Ot(Ke.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ot(Ke.paint_symbol["icon-translate-anchor"]),"icon-image-cross-fade":new pr(Ke.paint_symbol["icon-image-cross-fade"]),"text-opacity":new pr(Ke.paint_symbol["text-opacity"]),"text-color":new pr(Ke.paint_symbol["text-color"],{runtimeType:Yo,getOverride:i=>i.textColor,hasOverride:i=>!!i.textColor}),"text-halo-color":new pr(Ke.paint_symbol["text-halo-color"]),"text-halo-width":new pr(Ke.paint_symbol["text-halo-width"]),"text-halo-blur":new pr(Ke.paint_symbol["text-halo-blur"]),"text-translate":new Ot(Ke.paint_symbol["text-translate"]),"text-translate-anchor":new Ot(Ke.paint_symbol["text-translate-anchor"]),"icon-color-saturation":new Ot(Ke.paint_symbol["icon-color-saturation"])}),layout:SY};class Qz{constructor(n){this.type=n.property.overrides?n.property.overrides.runtimeType:cs,this.defaultValue=n}evaluate(n){if(n.formattedSection){const a=this.defaultValue.property.overrides;if(a&&a.hasOverride(n.formattedSection))return a.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Kt(Qz,"FormatSectionOverride",{omit:["defaultValue"]});class nx extends Oa{constructor(n,a,c){super(n,$T,a,c)}recalculate(n,a){super.recalculate(n,a),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const c=this.layout.get("text-writing-mode");if(c){const d=[];for(const m of c)d.indexOf(m)<0&&d.push(m);this.layout._values["text-writing-mode"]=d}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(n,a,c,d){const m=this.layout.get(n).evaluate(a,{},c,d),y=this._unevaluatedLayout._values[n];return y.isDataDriven()||Ed(y.value)||!m?m:function(b,S){return S.replace(/{([^{}]+)}/g,(T,D)=>D in b?String(b[D]):"")}(a.properties,m)}createBucket(n){return new rx(n)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const n of $T.paint.overridableProperties){if(!nx.hasPaintOverride(this.layout,n))continue;const a=this.paint.get(n),c=new Qz(a),d=new hm(c,a.property.specification,this.scope,this.options);let m=null;m=a.value.kind==="constant"||a.value.kind==="source"?new V_("source",d):new Dd("composite",d,a.value.zoomStops,a.value._interpolationType),this.paint._values[n]=new ef(a.property,m,a.parameters)}}_handleOverridablePaintPropertyUpdate(n,a,c){return!(!this.layout||a.isDataDriven()||c.isDataDriven())&&nx.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,a){const c=n.get("text-field"),d=$T.paint.properties[a];let m=!1;const y=b=>{for(const S of b)if(d.overrides&&d.overrides.hasOverride(S))return void(m=!0)};if(c.value.kind==="constant"&&c.value.value instanceof eo)y(c.value.value.sections);else if(c.value.kind==="source"){const b=T=>{m||(T instanceof hs&&di(T.value)===fl?y(T.value.sections):T instanceof Lu?y(T.sections):T.eachChild(b))},S=c.value;S._styleExpression&&b(S._styleExpression.expression)}return m}getProgramIds(){const n=this.paint.get("icon-opacity").constantOr(1)!==0,a=this.paint.get("text-opacity").constantOr(1)!==0,c=[];return n&&c.push("symbolIcon"),a&&c.push("symbolSDF"),c}getDefaultProgramParams(n,a){return{config:new te(this,a),overrideFog:!1}}}const TY=new mi({visibility:new Ot(Ke.layout_background.visibility)});var AY={paint:new mi({"background-color":new Ot(Ke.paint_background["background-color"]),"background-pattern":new Ot(Ke.paint_background["background-pattern"]),"background-opacity":new Ot(Ke.paint_background["background-opacity"]),"background-emissive-strength":new Ot(Ke.paint_background["background-emissive-strength"])}),layout:TY};const EY=new mi({visibility:new Ot(Ke.layout_raster.visibility)});var DY={paint:new mi({"raster-opacity":new Ot(Ke.paint_raster["raster-opacity"]),"raster-color":new Wc(Ke.paint_raster["raster-color"]),"raster-color-mix":new Ot(Ke.paint_raster["raster-color-mix"]),"raster-color-range":new Ot(Ke.paint_raster["raster-color-range"]),"raster-hue-rotate":new Ot(Ke.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ot(Ke.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ot(Ke.paint_raster["raster-brightness-max"]),"raster-saturation":new Ot(Ke.paint_raster["raster-saturation"]),"raster-contrast":new Ot(Ke.paint_raster["raster-contrast"]),"raster-resampling":new Ot(Ke.paint_raster["raster-resampling"]),"raster-fade-duration":new Ot(Ke.paint_raster["raster-fade-duration"]),"raster-emissive-strength":new Ot(Ke.paint_raster["raster-emissive-strength"]),"raster-array-band":new Ot(Ke.paint_raster["raster-array-band"]),"raster-elevation":new Ot(Ke.paint_raster["raster-elevation"])}),layout:EY},UT=Mn([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class VT{constructor(n,a,c,d){this.context=n,this.format=c,this.texture=n.gl.createTexture(),this.update(a,d)}update(n,a,c){const{width:d,height:m}=n,{context:y}=this,{gl:b}=y;if(b.bindTexture(b.TEXTURE_2D,this.texture),y.pixelStoreUnpackFlipY.set(!1),y.pixelStoreUnpack.set(1),y.pixelStoreUnpackPremultiplyAlpha.set(this.format===b.RGBA&&(!a||a.premultiply!==!1)),c||this.size&&this.size[0]===d&&this.size[1]===m){const{x:S,y:T}=c||{x:0,y:0};if(n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||ImageBitmap&&n instanceof ImageBitmap)b.texSubImage2D(b.TEXTURE_2D,0,S,T,b.RGBA,b.UNSIGNED_BYTE,n);else{let D=this.format,O=b.UNSIGNED_BYTE;this.format===b.R32F&&(D=b.RED,O=b.FLOAT),b.texSubImage2D(b.TEXTURE_2D,0,S,T,d,m,D,O,n.data)}}else if(this.size=[d,m],n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||ImageBitmap&&n instanceof ImageBitmap){let S=this.format;this.format===b.R8&&(S=b.RED),b.texImage2D(b.TEXTURE_2D,0,this.format,S,b.UNSIGNED_BYTE,n)}else{let S=this.format,T=this.format,D=b.UNSIGNED_BYTE;this.format===b.DEPTH_COMPONENT&&(S=b.DEPTH_COMPONENT16,D=b.UNSIGNED_SHORT),this.format===b.R8&&(T=b.RED),this.format===b.R32F&&(D=b.FLOAT,T=b.RED),b.texImage2D(b.TEXTURE_2D,0,S,d,m,0,T,D,n.data)}this.useMipmap=!!(a&&a.useMipmap),this.useMipmap&&b.generateMipmap(b.TEXTURE_2D)}bind(n,a,c=!1){const{context:d}=this,{gl:m}=d;m.bindTexture(m.TEXTURE_2D,this.texture),n!==this.minFilter&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,n),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,this.useMipmap&&!c?n===m.NEAREST?m.NEAREST_MIPMAP_NEAREST:m.LINEAR_MIPMAP_LINEAR:n),this.minFilter=n),a!==this.wrapS&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,a),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,a),this.wrapS=a)}bindExtraParam(n,a,c,d){const{context:m}=this,{gl:y}=m;y.bindTexture(y.TEXTURE_2D,this.texture),a!==this.magFilter&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,a),this.magFilter=a),n!==this.minFilter&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,this.useMipmap?n===y.NEAREST?y.NEAREST_MIPMAP_NEAREST:y.LINEAR_MIPMAP_LINEAR:n),this.minFilter=n),c!==this.wrapS&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,c),this.wrapS=c),d!==this.wrapT&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,d),this.wrapT=d)}destroy(){const{gl:n}=this.context;n.deleteTexture(this.texture),this.texture=null}}class ix{constructor(n,a){this.context=n,this.texture=a}bind(n,a){const{context:c}=this,{gl:d}=c;d.bindTexture(d.TEXTURE_2D,this.texture),n!==this.minFilter&&(d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,n),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,n),this.minFilter=n),a!==this.wrapS&&(d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,a),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,a),this.wrapS=a)}}function ox(i,n,a,c,d,m,y,b){const S=[i,n,1,a,c,1,d,m,1],T=[y,b,1],D=s.co.adjoint([],S),[O,z,$]=s.N.transformMat3(T,T,D);return s.co.multiply(S,S,[O,0,0,0,z,0,0,0,$])}function e4(i,n,a,c,d,m,y,b){const S=function(T,D,O,z,$,G,q,re){const ie=ox(0,0,1,0,1,1,0,1),fe=ox(T,D,O,z,$,G,q,re),_e=s.co.adjoint([],ie);return s.co.multiply(fe,fe,_e)}(i,n,a,c,d,m,y,b);return[S[2]/S[8]/Ut,S[5]/S[8]/Ut]}function ax(i){return[i[0],Math.min(Math.max(i[1],-Yr),Yr)]}class t4 extends On{constructor(n,a,c,d){super(),this.id=n,this.dispatcher=c,this.coordinates=a.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.onNorthPole=!1,this.onSouthPole=!1,this.setEventedParent(d),this.options=a,this._dirty=!1}load(n,a){if(this._loaded=a||!1,this.fire(new ul("dataloading",{dataType:"source"})),this.url=this.options.url,!this.url)return n&&(this.coordinates=n),this._loaded=!0,void this._finishLoading();this._imageRequest=zt(this.map._requestManager.transformRequest(this.url,Xo.Image),(c,d)=>{this._imageRequest=null,this._loaded=!0,c?this.fire(new Hl(c)):d&&(this.image=d instanceof HTMLImageElement?Tt.getImageData(d):d,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,n&&(this.coordinates=n),this._finishLoading())})}loaded(){return this._loaded}updateImage(n){return n.url?(this._imageRequest&&n.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=n.url,this.load(n.coordinates,this._loaded),this):this}setTexture(n){if(!(n.handle instanceof WebGLTexture))throw new Error("The provided handle is not a WebGLTexture instance");return this.texture=new ix(this.map.painter.context,n.handle),this.width=n.dimensions[0],this.height=n.dimensions[1],this._dirty=!1,this._loaded=!0,this._finishLoading(),this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new ul("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(n){this.map=n,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),!this.texture||this.texture instanceof ix||this.texture.destroy(),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy())}setCoordinates(n){if(this.coordinates=n,this._boundsArray=void 0,this._unsupportedCoords=!1,!n.length)return this;this.onNorthPole=!1,this.onSouthPole=!1;let a=n[0][1],c=n[0][1];for(const m of n)m[1]>c&&(c=m[1]),m[1]<a&&(a=m[1]);const d=(c+a)/2;if(d>Yr?this.onNorthPole=!0:d<-Yr&&(this.onSouthPole=!0),!this.onNorthPole&&!this.onSouthPole){const m=n.map(fn.fromLngLat);this.tileID=function(y){let b=1/0,S=1/0,T=-1/0,D=-1/0;for(const q of y)b=Math.min(b,q.x),S=Math.min(S,q.y),T=Math.max(T,q.x),D=Math.max(D,q.y);const O=Math.max(T-b,D-S),z=Math.max(0,Math.floor(-Math.log(O)/Math.LN2)),$=Math.pow(2,z);let G=Math.floor((b+T)/2*$);return G>1&&(G-=1),new bt(z,G,Math.floor((S+D)/2*$))}(m),this.minzoom=this.maxzoom=this.tileID.z}return this.fire(new ul("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0,this._unsupportedCoords=!1}_prepareData(n){for(const ie in this.tiles){const fe=this.tiles[ie];fe.state!=="loaded"&&(fe.state="loaded",fe.texture=this.texture)}if(this._boundsArray||this.onNorthPole||this.onSouthPole||this._unsupportedCoords)return;const a=Oy(new bt(0,0,0),this.map.transform.projection),c=[a.projection.project(this.coordinates[0][0],this.coordinates[0][1]),a.projection.project(this.coordinates[1][0],this.coordinates[1][1]),a.projection.project(this.coordinates[2][0],this.coordinates[2][1]),a.projection.project(this.coordinates[3][0],this.coordinates[3][1])];if(!function(ie){const fe=ie[1].x-ie[0].x,_e=ie[1].y-ie[0].y,ge=ie[2].x-ie[1].x,Se=ie[2].y-ie[1].y,be=ie[3].x-ie[2].x,Me=ie[3].y-ie[2].y,Ne=ie[0].x-ie[3].x,Ge=ie[0].y-ie[3].y,Ye=fe*Se-ge*_e,He=ge*Me-be*Se,st=be*Ge-Ne*Me,yt=Ne*_e-fe*Ge;return Ye>0&&He>0&&st>0&&yt>0||Ye<0&&He<0&&st<0&&yt<0}(c))return console.warn("Image source coordinates are defining non-convex area in the Mercator projection"),void(this._unsupportedCoords=!0);const d=Oy(this.tileID,this.map.transform.projection),[m,y,b,S]=this.coordinates.map(ie=>{const fe=d.projection.project(ie[0],ie[1]);return Zz(d,fe)._round()});this.perspectiveTransform=e4(m.x,m.y,y.x,y.y,b.x,b.y,S.x,S.y);const T=this._boundsArray=new iu;T.emplaceBack(m.x,m.y,0,0),T.emplaceBack(y.x,y.y,Ut,0),T.emplaceBack(S.x,S.y,0,Ut),T.emplaceBack(b.x,b.y,Ut,Ut),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy()),this.boundsBuffer=n.createVertexBuffer(T,UT.members),this.boundsSegments=Ei.simpleSegment(0,0,4,2);const D=[],O=[ax((z=this.coordinates)[0]),ax(z[1]),ax(z[2]),ax(z[3])];var z;const[$,G,q,re]=function(ie){let fe=ie[0][0],_e=fe,ge=ie[0][1],Se=ge;for(let be=1;be<ie.length;be++)ie[be][0]<fe?fe=ie[be][0]:ie[be][0]>_e&&(_e=ie[be][0]),ie[be][1]<ge?ge=ie[be][1]:ie[be][1]>Se&&(Se=ie[be][1]);return[fe,ge,_e-fe,Se-ge]}(O);{const ie=new iu,[fe,_e,ge,Se]=function(pt){let Lt=pt[0].x,vt=Lt,Jt=pt[0].y,Zt=Jt;for(let Ct=1;Ct<pt.length;Ct++)pt[Ct].x<Lt?Lt=pt[Ct].x:pt[Ct].x>vt&&(vt=pt[Ct].x),pt[Ct].y<Jt?Jt=pt[Ct].y:pt[Ct].y>Zt&&(Zt=pt[Ct].y);return[Lt,Jt,vt-Lt,Zt-Jt]}(c),be=pt=>[(pt.x-fe)/ge,(pt.y-_e)/Se],[Me,Ne,Ge,Ye]=c.map(be),He=function(pt,Lt,vt,Jt,Zt,Ct,vr,ar){const Yt=ox(0,0,1,0,1,1,0,1),wt=ox(pt,Lt,vt,Jt,Zt,Ct,vr,ar),gr=s.co.adjoint([],wt);return s.co.multiply(Yt,Yt,gr)}(Me[0],Me[1],Ne[0],Ne[1],Ge[0],Ge[1],Ye[0],Ye[1]);this.elevatedGlobePerspectiveTransform=e4(Me[0],Me[1],Ne[0],Ne[1],Ge[0],Ge[1],Ye[0],Ye[1]);const st=(pt,Lt)=>{D.push(pt.lng);const vt=Math.round((pt.lng-$)/q*Ut),Jt=Math.round((pt.lat-G)/re*Ut),Zt=be(Lt),Ct=s.N.transformMat3([],[Zt[0],Zt[1],1],He),vr=Math.round(Ct[0]/Ct[2]*Ut),ar=Math.round(Ct[1]/Ct[2]*Ut);ie.emplaceBack(vt,Jt,vr,ar)},yt=c[3].x-c[0].x,nt=c[3].y-c[0].y,mt=c[2].x-c[1].x,tt=c[2].y-c[1].y;for(let pt=0;pt<65;pt++){const Lt=pt/64,vt=[c[0].x+Lt*yt,c[0].y+Lt*nt],Jt=[c[1].x+Lt*mt,c[1].y+Lt*tt],Zt=Jt[0]-vt[0],Ct=Jt[1]-vt[1];for(let vr=0;vr<65;vr++){const ar=vr/64,Yt={x:vt[0]+Zt*ar,y:vt[1]+Ct*ar,z:0};st(a.projection.unproject(Yt.x,Yt.y),Yt)}}this.elevatedGlobeVertexBuffer=n.createVertexBuffer(ie,UT.members)}{this.maxLongitudeTriangleSize=0;let ie=[],fe=new po;const _e=(ge,Se,be)=>{fe.emplaceBack(ge,Se,be);const Me=D[ge],Ne=D[Se],Ge=D[be],Ye=Math.min(Math.min(Me,Ne),Ge),He=Math.max(Math.max(Me,Ne),Ge)-Ye;He>this.maxLongitudeTriangleSize&&(this.maxLongitudeTriangleSize=He),ie.push(Ye+He/2)};for(let ge=0;ge<64;ge++)for(let Se=0;Se<64;Se++){const be=65*ge+Se,Me=be+1,Ne=be+65,Ge=Ne+1;_e(be,Ne,Me),_e(Me,Ne,Ge)}[ie,fe]=function(ge,Se){const be=Array.from({length:ge.length},(Ge,Ye)=>Ye);be.sort((Ge,Ye)=>ge[Ge]-ge[Ye]);const Me=[],Ne=new po;for(let Ge=0;Ge<be.length;Ge++){const Ye=be[Ge];Me.push(ge[Ye]);const He=3*Ye,st=He+1;Ne.emplaceBack(Se.uint16[He],Se.uint16[st],Se.uint16[st+1])}return[Me,Ne]}(ie,fe),this.elevatedGlobeTrianglesCenterLongitudes=ie,this.elevatedGlobeIndexBuffer=n.createIndexBuffer(fe)}this.elevatedGlobeSegments=Ei.simpleSegment(0,0,4225,8192),this.elevatedGlobeGridMatrix=new Float32Array([0,q/Ut,0,re/Ut,0,0,G,$,0])}prepare(){const n=Object.keys(this.tiles).length!==0;if(this.tileID&&!n)return;const a=this.map.painter.context,c=a.gl;!this._dirty||this.texture instanceof ix||(this.texture?this.texture.update(this.image):(this.texture=new VT(a,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE)),this._dirty=!1),n&&this._prepareData(a)}loadTile(n,a){this.tileID&&this.tileID.equals(n.tileID.canonical)?(this.tiles[String(n.tileID.wrap)]=n,n.buckets={},a(null)):(n.state="errored",a(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}getSegmentsForLongitude(n){const a=this.elevatedGlobeSegments;if(!this.elevatedGlobeTrianglesCenterLongitudes||!a)return null;const c=this.elevatedGlobeTrianglesCenterLongitudes;let d=((D,O)=>D+360*Math.round((O-D)/360))(n+180,c[0]);const m=new Ei,y=(D,O)=>{m.segments.push({vertexOffset:0,primitiveOffset:D,vertexLength:a.segments[0].vertexLength,primitiveLength:O,sortKey:void 0,vaos:{}})},b=.51*this.maxLongitudeTriangleSize;if(Math.abs(c[0]-d)<=b){const D=ut(c,0,c.length,d+b);return D===c.length||y(D,ze(c,D+1,c.length,d+360-b)-D),m}d<c[0]&&(d+=360);const S=ze(c,0,c.length,d-b);if(S===c.length)return y(0,c.length),m;y(0,S-0);const T=ut(c,S+1,c.length,d+b);return T!==c.length&&y(T,c.length-T),m}}const PY=(Math.pow(256,2)-1)/16907520;class r4 extends Oa{constructor(n,a,c){super(n,DY,a,c),this.updateColorRamp(),this._curRampRange=[NaN,NaN]}getProgramIds(){return["raster"]}hasColorMap(){return!!this._transitionablePaint._values["raster-color"].value.value}tileCoverLift(){return this.paint.get("raster-elevation")}isLayerDraped(n){return!(n&&n._source instanceof t4&&(n._source.onNorthPole||n._source.onSouthPole))&&this.paint.get("raster-elevation")===0}_handleSpecialPaintPropertyUpdate(n){n!=="raster-color"&&n!=="raster-color-range"||(this._curRampRange=[NaN,NaN],this.updateColorRamp())}updateColorRamp(n){if(!this.hasColorMap()||!this._curRampRange)return;const a=this._transitionablePaint._values["raster-color"].value.expression,[c,d]=n||this._transitionablePaint._values["raster-color-range"].value.expression.evaluate({zoom:0})||[NaN,NaN];isNaN(c)&&isNaN(d)||c===this._curRampRange[0]&&d===this._curRampRange[1]||(this.colorRamp=by({expression:a,evaluationKey:"rasterValue",image:this.colorRamp,clips:[{start:c,end:d}],resolution:256}),this.colorRampTexture=null,this._curRampRange=[c,d])}}const MY=new mi({visibility:new Ot(Ke["layout_raster-particle"].visibility)});var IY={paint:new mi({"raster-particle-array-band":new Ot(Ke["paint_raster-particle"]["raster-particle-array-band"]),"raster-particle-count":new Ot(Ke["paint_raster-particle"]["raster-particle-count"]),"raster-particle-color":new Wc(Ke["paint_raster-particle"]["raster-particle-color"]),"raster-particle-max-speed":new Ot(Ke["paint_raster-particle"]["raster-particle-max-speed"]),"raster-particle-speed-factor":new Ot(Ke["paint_raster-particle"]["raster-particle-speed-factor"]),"raster-particle-fade-opacity-factor":new Ot(Ke["paint_raster-particle"]["raster-particle-fade-opacity-factor"]),"raster-particle-reset-rate-factor":new Ot(Ke["paint_raster-particle"]["raster-particle-reset-rate-factor"])}),layout:MY};class n4 extends Oa{constructor(n,a,c){super(n,IY,a,c),this._updateColorRamp(),this.onRemove=d=>{this.colorRampTexture&&this.colorRampTexture.destroy(),this.transformFeedbackObject&&d.painter.context.gl.deleteTransformFeedback(this.transformFeedbackObject),this.tileFramebuffer&&this.tileFramebuffer.destroy()},this.lastInvalidatedAt=Tt.now()}hasColorMap(){return!!this._transitionablePaint._values["raster-particle-color"].value.value}getProgramIds(){return["rasterParticle"]}hasOffscreenPass(){return this.visibility!=="none"}isLayerDraped(n){return!1}_handleSpecialPaintPropertyUpdate(n){n!=="raster-particle-color"&&n!=="raster-particle-max-speed"||(this._updateColorRamp(),this._invalidateAnimationState()),n==="raster-particle-count"&&this._invalidateAnimationState()}_updateColorRamp(){if(!this.hasColorMap())return;const n=this._transitionablePaint._values["raster-particle-color"].value.expression,a=this._transitionablePaint._values["raster-particle-max-speed"].value.expression.evaluate({zoom:0});this.colorRamp=by({expression:n,evaluationKey:"rasterParticleSpeed",image:this.colorRamp,clips:[{start:0,end:a}],resolution:256}),this.colorRampTexture=null}_invalidateAnimationState(){this.lastInvalidatedAt=Tt.now()}}class OY extends Oa{constructor(n,a){super(n,{},a),this.implementation=n,n.slot&&(this.slot=n.slot)}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isLayerDraped(n){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(n){this.implementation.onAdd&&this.implementation.onAdd(n,n.painter.context.gl)}onRemove(n){this.implementation.onRemove&&this.implementation.onRemove(n,n.painter.context.gl)}}const kY=new mi({visibility:new Ot(Ke.layout_sky.visibility)});var LY={paint:new mi({"sky-type":new Ot(Ke.paint_sky["sky-type"]),"sky-atmosphere-sun":new Ot(Ke.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Ot(Ke.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Ot(Ke.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Ot(Ke.paint_sky["sky-gradient-radius"]),"sky-gradient":new Wc(Ke.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Ot(Ke.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Ot(Ke.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Ot(Ke.paint_sky["sky-opacity"])}),layout:kY};function GT(i,n,a){const c=[0,0,1],d=s.bi.identity([]);return s.bi.rotateY(d,d,a?-Oe(i)+Math.PI:Oe(i)),s.bi.rotateX(d,d,-Oe(n)),s.N.transformQuat(c,c,d),s.N.normalize(c,c)}var RY={paint:new mi({})};function i4(i,n){const a=sx(i.projection,i.zoom,i.width,i.height),c=function(m,y,b,S,T){const D=new Ve(b.lng-180*pf,b.lat),O=new Ve(b.lng+180*pf,b.lat),z=m.project(D.lng,D.lat),$=m.project(O.lng,O.lat),G=-Math.atan2($.y-z.y,$.x-z.x),q=fn.fromLngLat(b);q.y=Le(q.y,-1+pf,1-pf);const re=q.toLngLat(),ie=m.project(re.lng,re.lat),fe=fn.fromLngLat(re);fe.x+=pf;const _e=fe.toLngLat(),ge=m.project(_e.lng,_e.lat),Se=s4(ge.x-ie.x,ge.y-ie.y,G),be=fn.fromLngLat(re);be.y+=pf;const Me=be.toLngLat(),Ne=m.project(Me.lng,Me.lat),Ge=s4(Ne.x-ie.x,Ne.y-ie.y,G),Ye=Math.abs(Se.x)/Math.abs(Ge.y),He=s.a6.identity([]);s.a6.rotateZ(He,He,-G*(1-(T?0:S)));const st=s.a6.identity([]);return s.a6.scale(st,st,[1,1-(1-Ye)*S,1]),st[4]=-Ge.x/Ge.y*S,s.a6.rotateZ(st,st,G),s.a6.multiply(st,He,st),st}(i.projection,0,i.center,a,n),d=o4(i);return s.a6.scale(c,c,[d,d,1]),c}function o4(i){const n=i.projection,a=sx(i.projection,i.zoom,i.width,i.height),c=a4(n,i.center),d=a4(n,Ve.convert(n.center));return Math.pow(2,c*a+(1-a)*d)}function sx(i,n,a,c,d=1/0){const m=i.range;if(!m)return 0;const y=Math.min(d,Math.max(a,c)),b=Math.log(y/1024)/Math.LN2;return Nt(m[0]+b,m[1]+b,n)}const pf=1/4e4;function a4(i,n){const a=Le(n.lat,-Yr,Yr),c=new Ve(n.lng-180*pf,a),d=new Ve(n.lng+180*pf,a),m=i.project(c.lng,a),y=i.project(d.lng,a),b=fn.fromLngLat(c),S=fn.fromLngLat(d),T=y.x-m.x,D=y.y-m.y,O=S.x-b.x,z=S.y-b.y,$=Math.sqrt((O*O+z*z)/(T*T+D*D));return Math.log($)/Math.LN2}function s4(i,n,a){const c=Math.cos(a),d=Math.sin(a);return{x:i*c-n*d,y:i*d+n*c}}function l4(i,n,a){s.a6.identity(i),s.a6.rotateZ(i,i,Oe(n[2])),s.a6.rotateX(i,i,Oe(n[0])),s.a6.rotateY(i,i,Oe(n[1])),s.a6.scale(i,i,a),s.a6.multiply(i,i,[1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1])}function lx(i,n,a,c,d,m,y,b){const S=[a[0]-n[0],a[1]-n[1],0],T=[c[0]-n[0],c[1]-n[1],0];if(s.N.length(S)<1e-12||s.N.length(T)<1e-12)return s.bi.identity(i);const D=s.N.cross([],S,T);s.N.normalize(D,D),s.N.subtract(T,c,n),S[2]=(m-d)*b,T[2]=(y-d)*b;const O=S;return s.N.cross(O,S,T),s.N.normalize(O,O),s.bi.rotationTo(i,D,O)}function HT(i,n,a=!1){const c=sf(n.zoom),d=function(m,y,b){const S=y.worldSize,T=[m[12],m[13],m[14]],D=un(T[1]/S),O=Dr(T[0]/S),z=s.a6.identity([]),$=Pr(1,D)*S,G=Pr(1,0)*S*Jr(D,y.zoom),q=1/mT(S);let re=G*q;if(b){const ge=sx(y.projection,y.zoom,y.width,y.height,1024);re=q*y.projection.pixelSpaceConversion(y.center.lat,S,ge)}const ie=it(D,O);s.N.add(ie,ie,s.N.scale([],s.N.normalize([],ie),$*re*T[2]));const fe=function(ge){const Se=[ge[0],ge[1],ge[2]];let be=[0,1,0];const Me=s.N.cross([],be,Se);return s.N.cross(be,Se,Me),s.N.squaredLength(be)===0&&(be=[0,1,0],s.N.cross(Me,Se,be)),s.N.normalize(Me,Me),s.N.normalize(be,be),s.N.normalize(Se,Se),[Me[0],Me[1],Me[2],0,be[0],be[1],be[2],0,Se[0],Se[1],Se[2],0,ge[0],ge[1],ge[2],1]}(ie);s.a6.scale(z,z,[re,re,re*$]),s.a6.translate(z,z,[-T[0],-T[1],-T[2]]);const _e=s.a6.multiply([],y.globeMatrix,fe);return s.a6.multiply(_e,_e,z),s.a6.multiply(_e,_e,m),_e}(i,n,a);if(c>0){const m=function(y,b){const S=b.worldSize,T=Pr(1,0)*S*Jr(b.center.lat,b.zoom)/mT(S),D=Pr(1,b.center.lat)*S,O=s.a6.identity([]);return s.a6.rotateY(O,O,Oe(b.center.lng)),s.a6.rotateX(O,O,Oe(b.center.lat)),s.a6.translate(O,O,[0,0,de]),s.a6.scale(O,O,[T,T,T*D]),s.a6.translate(O,O,[b.point.x-.5*S,b.point.y-.5*S,0]),s.a6.multiply(O,O,y),s.a6.multiply(O,b.globeMatrix,O)}(i,n);return function(y,b,S){const T=(G,q,re)=>{const ie=s.N.length(G),fe=s.N.length(q),_e=Qc(G,q,re);return s.N.scale(_e,_e,1/s.N.length(_e)*Zr(ie,fe,re))},D=T([y[0],y[1],y[2]],[b[0],b[1],b[2]],S),O=T([y[4],y[5],y[6]],[b[4],b[5],b[6]],S),z=T([y[8],y[9],y[10]],[b[8],b[9],b[10]],S),$=Qc([y[12],y[13],y[14]],[b[12],b[13],b[14]],S);return[D[0],D[1],D[2],0,O[0],O[1],O[2],0,z[0],z[1],z[2],0,$[0],$[1],$[2],1]}(d,m,c)}return d}function u4(i,n,a,c){const d=xi.projectAabbCorners(c,a);let m=Number.MAX_VALUE,y=-1;for(let T=0;T<d.length;++T){const D=d[T];D[0]=(.5*D[0]+.5)*n.width,D[1]=(.5-.5*D[1])*n.height,D[2]<m&&(y=T,m=D[2])}const b=T=>new De(d[T][0],d[T][1]);let S;switch(y){case 0:case 6:S=[b(1),b(5),b(4),b(7),b(3),b(2),b(1)];break;case 1:case 7:S=[b(0),b(4),b(5),b(6),b(2),b(3),b(0)];break;case 3:case 5:S=[b(1),b(0),b(4),b(7),b(6),b(2),b(1)];break;default:S=[b(1),b(5),b(6),b(7),b(3),b(0),b(1)]}if(Al(i,S))return m}const zY=Mn([{name:"a_pos_3f",components:3,type:"Float32"}]),NY=Mn([{name:"a_color_3f",components:3,type:"Float32"}]),FY=Mn([{name:"a_color_4f",components:4,type:"Float32"}]),jY=Mn([{name:"a_uv_2f",components:2,type:"Float32"}]),$Y=Mn([{name:"a_normal_3f",components:3,type:"Float32"}]),UY=Mn([{name:"a_normal_matrix0",components:4,type:"Float32"},{name:"a_normal_matrix1",components:4,type:"Float32"},{name:"a_normal_matrix2",components:4,type:"Float32"},{name:"a_normal_matrix3",components:4,type:"Float32"}]),VY=Mn([{name:"a_pbr",components:4,type:"Uint16"},{name:"a_heightBasedEmissiveStrength",components:3,type:"Float32"}]);class c4{constructor(n,a){this.feature=n,this.instancedDataOffset=a,this.instancedDataCount=0,this.rotation=[0,0,0],this.scale=[1,1,1],this.translation=[0,0,0]}}class h4{constructor(){this.instancedDataArray=new dy,this.instancesEvaluatedElevation=[],this.features=[],this.idToFeaturesIndex={}}}class WT{constructor(n){this.zoom=n.zoom,this.canonical=n.canonical,this.layers=n.layers,this.layerIds=this.layers.map(a=>a.fqid),this.projection=n.projection,this.index=n.index,this.hasZoomDependentProperties=this.layers[0].isZoomDependent(),this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id),this.hasPattern=!1,this.instancesPerModel={},this.validForExaggeration=0,this.maxVerticalOffset=0,this.maxScale=0,this.maxHeight=0,this.lookupDim=this.zoom>this.canonical.z?256:this.zoom>15?75:100,this.instanceCount=0,this.terrainElevationMin=0,this.terrainElevationMax=0,this.validForDEMTile={id:null,timestamp:0}}populate(n,a,c,d){this.tileToMeter=Qr(c);const m=this.layers[0]._featureFilter.needGeometry;this.lookup=new Uint8Array(this.lookupDim*this.lookupDim);for(const{feature:y,id:b,index:S,sourceLayerIndex:T}of n){const D=to(y,m);if(!this.layers[0]._featureFilter.filter(new pi(this.zoom),D,c))continue;const O={id:b,sourceLayerIndex:T,index:S,geometry:m?D.geometry:go(y,c,d),properties:y.properties,type:y.type,patterns:{}},z=this.addFeature(O,O.geometry,D);z&&a.featureIndex.insert(y,O.geometry,S,T,this.index,this.instancesPerModel[z].instancedDataArray.length,Ut/32)}this.lookup=null}update(n,a,c,d){for(const m in this.instancesPerModel){const y=this.instancesPerModel[m];for(const b in n)y.idToFeaturesIndex.hasOwnProperty(b)&&this.evaluate(y.features[y.idToFeaturesIndex[b]],n[b],y,!0)}this.maxHeight=0}updateZoomBasedPaintProperties(){if(!this.hasZoomDependentProperties)return!1;let n=!1;for(const a in this.instancesPerModel){const c=this.instancesPerModel[a];for(const d of c.features){const m=this.layers[0],y=d.feature,b=this.canonical,S=m.paint.get("model-rotation").evaluate(y,{},b),T=m.paint.get("model-scale").evaluate(y,{},b),D=m.paint.get("model-translation").evaluate(y,{},b);s.N.exactEquals(d.rotation,S)&&s.N.exactEquals(d.scale,T)&&s.N.exactEquals(d.translation,D)||(this.evaluate(d,d.featureStates,c,!0),n=!0)}}return n}isEmpty(){for(const n in this.instancesPerModel)if(this.instancesPerModel[n].instancedDataArray.length!==0)return!1;return!0}uploadPending(){return!this.uploaded}upload(n){if(!this.uploaded)for(const a in this.instancesPerModel){const c=this.instancesPerModel[a];c.instancedDataArray.length<0||c.instancedDataArray.length===0||(c.instancedDataBuffer?c.instancedDataBuffer.updateData(c.instancedDataArray):c.instancedDataBuffer=n.createVertexBuffer(c.instancedDataArray,UY.members,!0,void 0,this.instanceCount))}this.uploaded=!0}destroy(){for(const n in this.instancesPerModel){const a=this.instancesPerModel[n];a.instancedDataArray.length!==0&&a.instancedDataBuffer&&a.instancedDataBuffer.destroy()}}addFeature(n,a,c){const d=this.layers[0],m=d.layout.get("model-id").evaluate(c,{},this.canonical);if(!m)return Er(`modelId is not evaluated for layer ${d.id} and it is not going to get rendered.`),m;this.instancesPerModel[m]||(this.instancesPerModel[m]=new h4);const y=this.instancesPerModel[m],b=y.instancedDataArray,S=new c4(c,b.length);for(const T of a)for(const D of T){if(D.x<0||D.x>=Ut||D.y<0||D.y>=Ut)continue;const O=(this.lookupDim-1)/Ut,z=this.lookupDim*(D.y*O|0)+D.x*O|0;if(this.lookup){if(this.lookup[z]!==0)continue;this.lookup[z]=1}this.instanceCount++;const $=b.length;b.resize($+1),y.instancesEvaluatedElevation.push(0),b.float32[16*$]=D.x,b.float32[16*$+1]=D.y}return S.instancedDataCount=y.instancedDataArray.length-S.instancedDataOffset,S.instancedDataCount>0&&(n.id&&(y.idToFeaturesIndex[n.id]=y.features.length),y.features.push(S),this.evaluate(S,{},y,!1)),m}evaluate(n,a,c,d){const m=this.layers[0],y=n.feature,b=this.canonical,S=n.rotation=m.paint.get("model-rotation").evaluate(y,a,b),T=n.scale=m.paint.get("model-scale").evaluate(y,a,b),D=n.translation=m.paint.get("model-translation").evaluate(y,a,b),O=m.paint.get("model-color").evaluate(y,a,b);O.a=m.paint.get("model-color-mix-intensity").evaluate(y,a,b);const z=[];this.maxVerticalOffset<D[2]&&(this.maxVerticalOffset=D[2]),this.maxScale=Math.max(Math.max(this.maxScale,T[0]),Math.max(T[1],T[2])),l4(z,S,T);const $=Math.round(100*O.a)+O.b/1.05;for(let G=0;G<n.instancedDataCount;++G){const q=n.instancedDataOffset+G,re=16*q,ie=c.instancedDataArray.float32;let fe=0;d&&(fe=ie[re+6]-c.instancesEvaluatedElevation[q]);const _e=0|ie[re+1];ie[re]=(0|ie[re])+O.r/1.05,ie[re+1]=_e+O.g/1.05,ie[re+2]=$,ie[re+3]=1/(b.z>10?this.tileToMeter:Qr(b,_e)),ie[re+4]=D[0],ie[re+5]=D[1],ie[re+6]=D[2]+fe,ie[re+7]=z[0],ie[re+8]=z[1],ie[re+9]=z[2],ie[re+10]=z[4],ie[re+11]=z[5],ie[re+12]=z[6],ie[re+13]=z[8],ie[re+14]=z[9],ie[re+15]=z[10],c.instancesEvaluatedElevation[q]=D[2]}}}Kt(WT,"ModelBucket",{omit:["layers"]}),Kt(h4,"PerModelAttributes"),Kt(c4,"ModelFeature");const GY=new mi({visibility:new Ot(Ke.layout_model.visibility),"model-id":new pr(Ke.layout_model["model-id"])});var HY={paint:new mi({"model-opacity":new Ot(Ke.paint_model["model-opacity"]),"model-rotation":new pr(Ke.paint_model["model-rotation"]),"model-scale":new pr(Ke.paint_model["model-scale"]),"model-translation":new pr(Ke.paint_model["model-translation"]),"model-color":new pr(Ke.paint_model["model-color"]),"model-color-mix-intensity":new pr(Ke.paint_model["model-color-mix-intensity"]),"model-type":new Ot(Ke.paint_model["model-type"]),"model-cast-shadows":new Ot(Ke.paint_model["model-cast-shadows"]),"model-receive-shadows":new Ot(Ke.paint_model["model-receive-shadows"]),"model-ambient-occlusion-intensity":new Ot(Ke.paint_model["model-ambient-occlusion-intensity"]),"model-emissive-strength":new pr(Ke.paint_model["model-emissive-strength"]),"model-roughness":new pr(Ke.paint_model["model-roughness"]),"model-height-based-emissive-strength-multiplier":new pr(Ke.paint_model["model-height-based-emissive-strength-multiplier"]),"model-cutoff-fade-range":new Ot(Ke.paint_model["model-cutoff-fade-range"])}),layout:GY};const np=64,Fm={CoordinateSpaceTile:1,CoordinateSpaceYUp:2,HasMapboxMeshFeatures:4,HasMeshoptCompression:8};function f4(i,n,a,c,d,m,y,b,S,T=!1){const D=a.zoom,O=a.project(c),z=Jr(c.lat,D),$=1/z;s.a6.identity(i),s.a6.translate(i,i,[O.x+y[0]*$,O.y+y[1]*$,y[2]]);let G=1,q=1;const re=a.worldSize;if(T){if(a.projection.name==="mercator"){let ge=0;a.elevation&&(ge=a.elevation.getAtPointOrZero(new fn(O.x/re,O.y/re),0));const Se=s.a7.transformMat4([],[O.x,O.y,ge,1],a.projMatrix)[3]/a.cameraToCenterDistance;G=Se,q=Se*Jr(a.center.lat,D)}else if(a.projection.name==="globe"){const ge=HT(i,a),Se=s.a6.multiply([],a.projMatrix,ge),be=[0,0,0,1];s.a7.transformMat4(be,be,Se);const Me=be[3]/a.cameraToCenterDistance,Ne=sf(D),Ge=a.projection.pixelsPerMeter(c.lat,re)*Jr(c.lat,D),Ye=a.projection.pixelsPerMeter(a.center.lat,re)*Jr(a.center.lat,D);G=Me/Zr(Ge,gi(a.center.lat),Ne),q=Me*z/Ge,G*=Ye,q*=Ye}}else G=$;s.a6.scale(i,i,[G,G,q]);const ie=[...i],fe=n.orientation,_e=[];if(l4(_e,[fe[0]+d[0],fe[1]+d[1],fe[2]+d[2]],m),s.a6.multiply(i,ie,_e),b&&a.elevation){let ge=0;const Se=[];if(S&&a.elevation){ge=function(Ne,Ge,Ye,He,st){const yt=Ge.elevation;if(!yt)return 0;const nt=xi.projectAabbCorners(Ye,He),mt=Pr(1,st.lat)*Ge.worldSize,tt=function(gr,jr){const xr=[0,0,1],$r=[{corners:[0,1,3,2],dotProductWithUp:0},{corners:[1,5,2,6],dotProductWithUp:0},{corners:[0,4,1,5],dotProductWithUp:0},{corners:[2,6,3,7],dotProductWithUp:0},{corners:[4,7,5,6],dotProductWithUp:0},{corners:[0,3,4,7],dotProductWithUp:0}];for(const Ar of $r){const sn=gr[Ar.corners[0]],Mr=gr[Ar.corners[1]],Gn=gr[Ar.corners[2]],_n=[Mr[0]-sn[0],Mr[1]-sn[1],jr*(Mr[2]-sn[2])],xn=s.N.cross(_n,_n,[Gn[0]-sn[0],Gn[1]-sn[1],jr*(Gn[2]-sn[2])]);s.N.normalize(xn,xn),Ar.dotProductWithUp=s.N.dot(xn,xr)}return $r.sort((Ar,sn)=>Ar.dotProductWithUp-sn.dotProductWithUp),$r[0].corners}(nt,mt),pt=nt[tt[0]],Lt=nt[tt[1]],vt=nt[tt[2]],Jt=nt[tt[3]],Zt=yt.getAtPointOrZero(new fn(pt[0]/Ge.worldSize,pt[1]/Ge.worldSize),0),Ct=yt.getAtPointOrZero(new fn(Lt[0]/Ge.worldSize,Lt[1]/Ge.worldSize),0),vr=yt.getAtPointOrZero(new fn(vt[0]/Ge.worldSize,vt[1]/Ge.worldSize),0),ar=yt.getAtPointOrZero(new fn(Jt[0]/Ge.worldSize,Jt[1]/Ge.worldSize),0),Yt=(Zt+ar)/2,wt=(Ct+vr)/2;return Yt>wt?Ct<vr?lx(Ne,Lt,Jt,pt,Ct,ar,Zt,mt):lx(Ne,vt,pt,Jt,vr,Zt,ar,mt):Zt<ar?lx(Ne,pt,Lt,vt,Zt,Ct,vr,mt):lx(Ne,Jt,vt,Lt,ar,vr,Ct,mt),Math.max(Yt,wt)}(Se,a,n.aabb,i,c);const be=s.a6.fromQuat([],Se),Me=s.a6.multiply([],be,_e);s.a6.multiply(i,ie,Me)}else ge=a.elevation.getAtPointOrZero(new fn(O.x/re,O.y/re),0);ge!==0&&(i[14]+=ge)}}function Ny(i,n,a=!1){i.uploaded||(i.gfxTexture=new VT(n,i.image,a?n.gl.R8:n.gl.RGBA,{useMipmap:i.sampler.minFilter>=n.gl.NEAREST_MIPMAP_NEAREST}),i.uploaded=!0,i.image=null)}function WY(i,n,a){i.indexBuffer=n.createIndexBuffer(i.indexArray,!1,!0),i.vertexBuffer=n.createVertexBuffer(i.vertexArray,zY.members,!1,!0),i.normalArray&&(i.normalBuffer=n.createVertexBuffer(i.normalArray,$Y.members,!1,!0)),i.texcoordArray&&(i.texcoordBuffer=n.createVertexBuffer(i.texcoordArray,jY.members,!1,!0)),i.colorArray&&(i.colorBuffer=n.createVertexBuffer(i.colorArray,(i.colorArray.bytesPerElement===12?NY:FY).members,!1,!0)),i.featureArray&&(i.pbrBuffer=n.createVertexBuffer(i.featureArray,VY.members,!0)),i.segments=Ei.simpleSegment(0,0,i.vertexArray.length,i.indexArray.length);const c=i.material;c.pbrMetallicRoughness.baseColorTexture&&Ny(c.pbrMetallicRoughness.baseColorTexture,n),c.pbrMetallicRoughness.metallicRoughnessTexture&&Ny(c.pbrMetallicRoughness.metallicRoughnessTexture,n),c.normalTexture&&Ny(c.normalTexture,n),c.occlusionTexture&&Ny(c.occlusionTexture,n,a),c.emissionTexture&&Ny(c.emissionTexture,n)}function ZT(i,n,a){if(i.meshes)for(const c of i.meshes)WY(c,n,a);if(i.children)for(const c of i.children)ZT(c,n,a)}function ux(i){if(i.meshes)for(const n of i.meshes)n.indexArray.destroy(),n.vertexArray.destroy(),n.colorArray&&n.colorArray.destroy(),n.normalArray&&n.normalArray.destroy(),n.texcoordArray&&n.texcoordArray.destroy(),n.featureArray&&n.featureArray.destroy();if(i.children)for(const n of i.children)ux(n)}function qT(i){if(i.meshes)for(const a of i.meshes)a.vertexBuffer&&(a.vertexBuffer.destroy(),a.indexBuffer.destroy(),a.normalBuffer&&a.normalBuffer.destroy(),a.texcoordBuffer&&a.texcoordBuffer.destroy(),a.colorBuffer&&a.colorBuffer.destroy(),a.pbrBuffer&&a.pbrBuffer.destroy(),a.segments.destroy(),a.material&&((n=a.material).pbrMetallicRoughness.baseColorTexture&&n.pbrMetallicRoughness.baseColorTexture.gfxTexture&&n.pbrMetallicRoughness.baseColorTexture.gfxTexture.destroy(),n.pbrMetallicRoughness.metallicRoughnessTexture&&n.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture&&n.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture.destroy(),n.normalTexture&&n.normalTexture.gfxTexture&&n.normalTexture.gfxTexture.destroy(),n.emissionTexture&&n.emissionTexture.gfxTexture&&n.emissionTexture.gfxTexture.destroy(),n.occlusionTexture&&n.occlusionTexture.gfxTexture&&n.occlusionTexture.gfxTexture.destroy()));var n;if(i.children)for(const a of i.children)qT(a)}class ZY{constructor(n){this._callback=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class qY{constructor(){this.tasks={},this.taskQueue=[],Ti(["process"],this),this.invoker=new ZY(this.process),this.nextId=0}add(n,a){const c=this.nextId++,d=function({type:m,isSymbolTile:y,zoom:b}){return b=b||0,m==="message"?0:m!=="maybePrepare"||y?m!=="parseTile"||y?m==="parseTile"&&y?300-b:m==="maybePrepare"&&y?400-b:500:200-b:100-b}(a);if(d===0){Mi();try{n()}finally{}return null}return this.tasks[c]={fn:n,metadata:a,priority:d,id:c},this.taskQueue.push(c),this.invoker.trigger(),{cancel:()=>{delete this.tasks[c]}}}process(){Mi();try{if(this.taskQueue=this.taskQueue.filter(c=>!!this.tasks[c]),!this.taskQueue.length)return;const n=this.pick();if(n===null)return;const a=this.tasks[n];if(delete this.tasks[n],this.taskQueue.length&&this.invoker.trigger(),!a)return;a.fn()}finally{}}pick(){let n=null,a=1/0;for(let d=0;d<this.taskQueue.length;d++){const m=this.tasks[this.taskQueue[d]];m.priority<a&&(a=m.priority,n=d)}if(n===null)return null;const c=this.taskQueue[n];return this.taskQueue.splice(n,1),c}remove(){this.invoker.remove()}}class d4{constructor(n,a,c){this.target=n,this.parent=a,this.mapId=c,this.callbacks={},this.cancelCallbacks={},Ti(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.scheduler=new qY}send(n,a,c,d,m=!1,y){const b=Math.round(1e18*Math.random()).toString(36).substring(0,10);c&&(c.metadata=y,this.callbacks[b]=c);const S=new Set;return this.target.postMessage({id:b,type:n,hasCallback:!!c,targetMapId:d,mustQueue:m,sourceMapId:this.mapId,data:qu(a,S)},S),{cancel:()=>{c&&delete this.callbacks[b],this.target.postMessage({id:b,type:"<cancel>",targetMapId:d,sourceMapId:this.mapId})}}}receive(n){const a=n.data,c=a.id;if(c&&(!a.targetMapId||this.mapId===a.targetMapId))if(a.type==="<cancel>"){const d=this.cancelCallbacks[c];delete this.cancelCallbacks[c],d&&d.cancel()}else if(a.mustQueue||Mi()){const d=this.callbacks[c],m=this.scheduler.add(()=>this.processTask(c,a),d&&d.metadata||{type:"message"});m&&(this.cancelCallbacks[c]=m)}else this.processTask(c,a)}processTask(n,a){if(delete this.cancelCallbacks[n],a.type==="<response>"){const c=this.callbacks[n];delete this.callbacks[n],c&&(a.error?c(Gc(a.error)):c(null,Gc(a.data)))}else{const c=new Set,d=a.hasCallback?(y,b)=>{this.target.postMessage({id:n,type:"<response>",sourceMapId:this.mapId,error:y?qu(y):null,data:qu(b,c)},c)}:y=>{},m=Gc(a.data);if(this.parent[a.type])this.parent[a.type](a.sourceMapId,m,d);else if(this.parent.getWorkerSource){const y=a.type.split(".");this.parent.getWorkerSource(a.sourceMapId,y[0],m.source,m.scope)[y[1]](m,d)}else d(new Error(`Could not find function ${a.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}}class jm{constructor(n,a){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=Hr();const c=this.workerPool.acquire(this.id);for(let d=0;d<c.length;d++){const m=new jm.Actor(c[d],a,this.id);m.name=`Worker ${d}`,this.actors.push(m)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(n,a,c){$t(this.actors,(d,m)=>{d.send(n,a,m)},c=c||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(n=>{n.remove()}),this.actors=[],this.workerPool.release(this.id)}}jm.Actor=d4;var Fy={workerUrl:"",workerClass:null,workerParams:void 0};function KY(){return Fy.workerClass!=null?new Fy.workerClass:new self.Worker(Fy.workerUrl,Fy.workerParams)}const KT="mapboxgl_preloaded_worker_pool";class jy{constructor(){this.active={}}acquire(n){if(!this.workers)for(this.workers=[];this.workers.length<jy.workerCount;)this.workers.push(new KY);return this.active[n]=!0,this.workers.slice()}release(n){delete this.active[n],this.workers&&this.numActive()===0&&(this.workers.forEach(a=>{a.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[KT]}numActive(){return Object.keys(this.active).length}}let $y;function cx(){return $y||($y=new jy),$y}jy.workerCount=2;let hx,XT,hu,$m,YT,Um=null;function p4(){return Mi()&&self.worker&&self.worker.dracoUrl?self.worker.dracoUrl:XT||P.DRACO_URL}function m4(){if(Mi()&&self.worker&&self.worker.meshoptUrl)return self.worker.meshoptUrl;if($m)return $m;const i=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]);if(typeof WebAssembly!="object")throw new Error("WebAssembly not supported, cannot instantiate meshoptimizer");return $m=WebAssembly.validate(i)?P.MESHOPT_SIMD_URL:P.MESHOPT_URL,$m}const fx={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},XY={5120:"DT_INT8",5121:"DT_UINT8",5122:"DT_INT16",5123:"DT_UINT16",5125:"DT_UINT32",5126:"DT_FLOAT32"},Uy={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16};function g4(i,n,a){const c=a.json.bufferViews.length,d=a.buffers.length;n.bufferView=c,a.json.bufferViews[c]={buffer:d,byteLength:i.byteLength},a.buffers[d]=i}const JT="KHR_draco_mesh_compression";function YY(i,n){const a=i.extensions&&i.extensions[JT];if(!a)return;const c=new hu.Decoder,d=B4(n,a.bufferView),m=new hu.Mesh;if(!c.DecodeArrayToMesh(d,d.byteLength,m))throw new Error("Failed to decode Draco mesh");const y=n.json.accessors[i.indices],b=fx[y.componentType],S=y.count*b.BYTES_PER_ELEMENT,T=hu._malloc(S);b===Uint16Array?c.GetTrianglesUInt16Array(m,S,T):c.GetTrianglesUInt32Array(m,S,T),g4(hu.memory.buffer.slice(T,T+S),y,n),hu._free(T);for(const D of Object.keys(a.attributes)){const O=c.GetAttributeByUniqueId(m,a.attributes[D]),z=n.json.accessors[i.attributes[D]],$=XY[z.componentType],G=z.count*Uy[z.type]*fx[z.componentType].BYTES_PER_ELEMENT,q=hu._malloc(G);c.GetAttributeDataArrayForAllPoints(m,O,hu[$],G,q),g4(hu.memory.buffer.slice(q,q+G),z,n),hu._free(q)}c.destroy(),m.destroy(),delete i.extensions[JT]}const dx="EXT_meshopt_compression";function JY(i,n){if(!i.extensions||!i.extensions[dx])return;const a=i.extensions[dx],c=new Uint8Array(n.buffers[a.buffer],a.byteOffset||0,a.byteLength||0),d=new Uint8Array(a.count*a.byteStride);YT.decodeGltfBuffer(d,a.count,a.byteStride,c,a.mode,a.filter),i.buffer=n.buffers.length,i.byteOffset=0,n.buffers[i.buffer]=d.buffer,delete i.extensions[dx]}const _4=1179937895,y4=new TextDecoder("utf8");function v4(i,n){return new URL(i,n).href}function QY(i,n,a,c){return fetch(v4(i.uri,c)).then(d=>d.arrayBuffer()).then(d=>{n.buffers[a]=d})}function B4(i,n){const a=i.json.bufferViews[n];return new Uint8Array(i.buffers[a.buffer],a.byteOffset||0,a.byteLength)}function eJ(i,n,a,c){if(i.uri){const d=v4(i.uri,c);return fetch(d).then(m=>m.blob()).then(m=>createImageBitmap(m)).then(m=>{n.images[a]=m})}if(i.bufferView!==void 0){const d=B4(n,i.bufferView),m=new Blob([d],{type:i.mimeType});return createImageBitmap(m).then(y=>{n.images[a]=y})}}function x4(i,n=0,a){const c={json:null,images:[],buffers:[]};if(new Uint32Array(i,n,1)[0]===_4){const D=new Uint32Array(i,n);let O=2;const z=(D[O++]>>2)-3,$=D[O++]>>2;if(O++,c.json=JSON.parse(y4.decode(D.subarray(O,O+$))),O+=$,O<z){const G=D[O++];O++;const q=n+(O<<2);c.buffers[0]=i.slice(q,q+G)}}else c.json=JSON.parse(y4.decode(new Uint8Array(i,n)));const{buffers:d,images:m,meshes:y,extensionsUsed:b,bufferViews:S}=c.json;let T=Promise.resolve();if(d){const D=[];for(let O=0;O<d.length;O++){const z=d[O];z.uri?D.push(QY(z,c,O,a)):c.buffers[O]||(c.buffers[O]=null)}T=Promise.all(D)}return T.then(()=>{const D=[],O=b&&b.includes(JT),z=b&&b.includes(dx);if(O&&D.push(function(){if(!hu)return hx||(hx=function($){let G,q=null;function re(){G=new Uint8Array(q.buffer)}function ie(){throw new Error("Unexpected Draco error.")}const fe={a:{a:ie,d:function(_e,ge,Se){return G.copyWithin(_e,ge,ge+Se)},c:function(_e){const ge=G.length,Se=Math.max(_e>>>0,Math.ceil(1.2*ge)),be=Math.ceil((Se-ge)/65536);try{return q.grow(be),re(),!0}catch{return!1}},b:ie}};return(WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming($,fe):$.then(_e=>_e.arrayBuffer()).then(_e=>WebAssembly.instantiate(_e,fe))).then(_e=>{const{Rb:ge,Qb:Se,P:be,T:Me,X:Ne,Ja:Ge,La:Ye,Qa:He,Va:st,Wa:yt,eb:nt,jb:mt,f:tt,e:pt,yb:Lt,zb:vt,Ab:Jt,Bb:Zt,Db:Ct,Gb:vr}=_e.instance.exports;q=pt;const ar=(()=>{let Yt=0,wt=0,gr=0,jr=0;return xr=>{gr&&(ge(jr),ge(Yt),wt+=gr,gr=Yt=0),Yt||(wt+=128,Yt=Se(wt));const $r=xr.length+7&-8;let Ar=Yt;$r>=wt&&(gr=$r,Ar=jr=Se($r));for(let sn=0;sn<xr.length;sn++)G[Ar+sn]=xr[sn];return Ar}})();return re(),tt(),{memory:pt,_free:ge,_malloc:Se,Mesh:class{constructor(){this.ptr=be()}destroy(){Me(this.ptr)}},Decoder:class{constructor(){this.ptr=Ge()}destroy(){mt(this.ptr)}DecodeArrayToMesh(Yt,wt,gr){const jr=ar(Yt),xr=Ye(this.ptr,jr,wt,gr.ptr);return!!Ne(xr)}GetAttributeByUniqueId(Yt,wt){return{ptr:He(this.ptr,Yt.ptr,wt)}}GetTrianglesUInt16Array(Yt,wt,gr){st(this.ptr,Yt.ptr,wt,gr)}GetTrianglesUInt32Array(Yt,wt,gr){yt(this.ptr,Yt.ptr,wt,gr)}GetAttributeDataArrayForAllPoints(Yt,wt,gr,jr,xr){nt(this.ptr,Yt.ptr,wt.ptr,gr,jr,xr)}},DT_INT8:Lt(),DT_UINT8:vt(),DT_INT16:Jt(),DT_UINT16:Zt(),DT_UINT32:Ct(),DT_FLOAT32:vr()}})}(fetch(p4())),hx.then($=>{hu=$,hx=void 0}))}()),z&&D.push(function(){if(YT)return;const $=function(G){let q;const re=WebAssembly.instantiateStreaming(G,{}).then(_e=>{q=_e.instance,q.exports.__wasm_call_ctors()}),ie={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},fe={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return{ready:re,supported:!0,decodeGltfBuffer(_e,ge,Se,be,Me,Ne){(function(Ge,Ye,He,st,yt,nt,mt){const tt=Ge.exports.sbrk,pt=st+3&-4,Lt=tt(pt*yt),vt=tt(nt.length),Jt=new Uint8Array(Ge.exports.memory.buffer);Jt.set(nt,vt);const Zt=Ye(Lt,st,yt,vt,nt.length);if(Zt===0&&mt&&mt(Lt,pt,yt),He.set(Jt.subarray(Lt,Lt+st*yt)),tt(Lt-tt(0)),Zt!==0)throw new Error(`Malformed buffer data: ${Zt}`)})(q,q.exports[fe[Me]],_e,ge,Se,be,q.exports[ie[Ne]])}}}(fetch(m4()));return $.ready.then(()=>{YT=$})}()),m)for(let $=0;$<m.length;$++)D.push(eJ(m[$],c,$,a));return(D.length?Promise.all(D):Promise.resolve()).then(()=>{if(O&&y)for(const{primitives:$}of y)for(const G of $)YY(G,c);if(z&&y&&S)for(const $ of S)JY($,c);return c})})}class b4{constructor(n,a,c){if(this.triangleCount=a.length/3,this.min=new De(0,0),this.max=new De(0,0),this.xScale=0,this.yScale=0,this.cellsX=0,this.cellsY=0,this.cells=[],this.payload=[],this.triangleCount===0||n.length===0||c===0)return;const d=n.map(D=>D.x),m=n.map(D=>D.y);this.min=new De(Math.min(...d),Math.min(...m)),this.max=new De(Math.max(...d),Math.max(...m));const y=this.max.sub(this.min);y.x=Math.max(y.x,1),y.y=Math.max(y.y,1);const b=Math.max(y.x,y.y)/c;this.cellsX=Math.max(1,Math.ceil(y.x/b)),this.cellsY=Math.max(1,Math.ceil(y.y/b)),this.xScale=1/b,this.yScale=1/b;const S=[];for(let D=0;D<this.triangleCount;D++){const O=n[a[3*D+0]].sub(this.min),z=n[a[3*D+1]].sub(this.min),$=n[a[3*D+2]].sub(this.min),G=mf(Math.floor(Math.min(O.x,z.x,$.x)),this.xScale,this.cellsX),q=mf(Math.floor(Math.max(O.x,z.x,$.x)),this.xScale,this.cellsX),re=mf(Math.floor(Math.min(O.y,z.y,$.y)),this.yScale,this.cellsY),ie=mf(Math.floor(Math.max(O.y,z.y,$.y)),this.yScale,this.cellsY),fe=new De(0,0),_e=new De(0,0),ge=new De(0,0),Se=new De(0,0);for(let be=re;be<=ie;++be){fe.y=_e.y=be*b,ge.y=Se.y=(be+1)*b;for(let Me=G;Me<=q;++Me)fe.x=ge.x=Me*b,_e.x=Se.x=(Me+1)*b,(ZS(O,z,$,fe,_e,Se)||ZS(O,z,$,fe,Se,ge))&&S.push({cellIdx:be*this.cellsX+Me,triIdx:D})}}if(S.length===0)return;S.sort((D,O)=>D.cellIdx-O.cellIdx||D.triIdx-O.triIdx);let T=0;for(;T<S.length;){const D=S[T].cellIdx,O={start:this.payload.length,len:0};for(;T<S.length&&S[T].cellIdx===D;)++O.len,this.payload.push(S[T++].triIdx);this.cells[D]=O}}query(n,a,c){if(this.triangleCount===0||this.cells.length===0||n.x>this.max.x||this.min.x>a.x||n.y>this.max.y||this.min.y>a.y)return;this.lookup||(this.lookup=new Uint8Array(Math.ceil(this.triangleCount/8)));for(let S=0;S<this.lookup.length;S++)this.lookup[S]=0;const d=mf(n.x-this.min.x,this.xScale,this.cellsX),m=mf(a.x-this.min.x,this.xScale,this.cellsX),y=mf(n.y-this.min.y,this.yScale,this.cellsY),b=mf(a.y-this.min.y,this.yScale,this.cellsY);for(let S=y;S<=b;S++)for(let T=d;T<=m;T++){const D=this.cells[S*this.cellsX+T];if(D)for(let O=0;O<D.len;O++){const z=this.payload[D.start+O],$=Math.floor(z/8),G=1<<z%8;if(!(this.lookup[$]&G)&&(this.lookup[$]|=G,c.push(z),c.length===this.triangleCount))return}}}}function mf(i,n,a){return Math.max(0,Math.min(a-1,Math.floor(i*n)))}function ip(i,n){const a=i.json.bufferViews[n.bufferView],c=fx[n.componentType];return new c(i.buffers[a.buffer],(n.byteOffset||0)+(a.byteOffset||0),n.count*(a.byteStride&&a.byteStride!==Uy[n.type]*c.BYTES_PER_ELEMENT?a.byteStride/c.BYTES_PER_ELEMENT:Uy[n.type]))}function QT(i,n,a,c){const d=fx[n.componentType],m=function(D){switch(D){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:return 1}}(d),y=i.json.bufferViews[n.bufferView],b=y.byteStride?y.byteStride/d.BYTES_PER_ELEMENT:Uy[n.type],S=a.float32,T=S.length/a.capacity;for(let D=0,O=0;D<n.count*b;D+=b,O+=T)for(let z=0;z<T;z++)S[O+z]=c[D+z]*m;a._trim()}function tJ(i,n,a){const c=i.indices,d=i.attributes,m={};m.indexArray=new po;const y=n.json.accessors[c],b=y.count/3;m.indexArray.reserve(b);const S=ip(n,y);for(let z=0;z<b;z++)m.indexArray.emplaceBack(S[3*z],S[3*z+1],S[3*z+2]);m.indexArray._trim(),m.vertexArray=new Zc;const T=n.json.accessors[d.POSITION];m.vertexArray.reserve(T.count);const D=ip(n,T);for(let z=0;z<T.count;z++)m.vertexArray.emplaceBack(D[3*z],D[3*z+1],D[3*z+2]);if(m.vertexArray._trim(),m.aabb=new xi(T.min,T.max),m.centroid=function(z,$){const G=[0,0,0],q=z.length;if(q>0){for(let re=0;re<q;re++){const ie=3*z[re];G[0]+=$[ie],G[1]+=$[ie+1],G[2]+=$[ie+2]}G[0]/=q,G[1]/=q,G[2]/=q}return G}(S,D),d.COLOR_0!==void 0){const z=n.json.accessors[d.COLOR_0],$=Uy[z.type],G=ip(n,z);m.colorArray=$===3?new Zc:new Ju,m.colorArray.resize(z.count),QT(n,z,m.colorArray,G)}if(d.NORMAL!==void 0){m.normalArray=new Zc;const z=n.json.accessors[d.NORMAL];m.normalArray.resize(z.count);const $=ip(n,z);QT(n,z,m.normalArray,$)}if(d.TEXCOORD_0!==void 0&&a.length>0){m.texcoordArray=new Hd;const z=n.json.accessors[d.TEXCOORD_0];m.texcoordArray.resize(z.count);const $=ip(n,z);QT(n,z,m.texcoordArray,$)}if(d._FEATURE_ID_RGBA4444!==void 0){const z=n.json.accessors[d._FEATURE_ID_RGBA4444];n.json.extensionsUsed&&n.json.extensionsUsed.includes("EXT_meshopt_compression")&&(m.featureData=ip(n,z))}d._FEATURE_RGBA4444!==void 0&&(m.featureData=new Uint32Array(ip(n,n.json.accessors[d._FEATURE_RGBA4444]).buffer));const O=i.material;return m.material=function(z,$){const{emissiveFactor:G=[0,0,0],alphaMode:q="OPAQUE",alphaCutoff:re=.5,normalTexture:ie,occlusionTexture:fe,emissiveTexture:_e,doubleSided:ge}=z,{baseColorFactor:Se=[1,1,1,1],metallicFactor:be=1,roughnessFactor:Me=1,baseColorTexture:Ne,metallicRoughnessTexture:Ge}=z.pbrMetallicRoughness||{},Ye=fe?$[fe.index]:void 0;if(fe&&fe.extensions&&fe.extensions.KHR_texture_transform&&Ye){const He=fe.extensions.KHR_texture_transform;Ye.offsetScale=[He.offset[0],He.offset[1],He.scale[0],He.scale[1]]}return{pbrMetallicRoughness:{baseColorFactor:new mn(...Se),metallicFactor:be,roughnessFactor:Me,baseColorTexture:Ne?$[Ne.index]:void 0,metallicRoughnessTexture:Ge?$[Ge.index]:void 0},doubleSided:ge,emissiveFactor:G,alphaMode:q,alphaCutoff:re,normalTexture:ie?$[ie.index]:void 0,occlusionTexture:Ye,emissionTexture:_e?$[_e.index]:void 0,defined:z.defined===void 0}}(O!==void 0?n.json.materials[O]:{defined:!1},a),m}function C4(i,n,a){const{matrix:c,rotation:d,translation:m,scale:y,mesh:b,extras:S,children:T}=i,D={};if(D.matrix=c||s.a6.fromRotationTranslationScale([],d||[0,0,0,1],m||[0,0,0],y||[1,1,1]),b!==void 0){D.meshes=a[b];const O=D.anchor=[0,0];for(const z of D.meshes){const{min:$,max:G}=z.aabb;O[0]+=$[0]+G[0],O[1]+=$[1]+G[1]}O[0]=Math.floor(O[0]/D.meshes.length/2),O[1]=Math.floor(O[1]/D.meshes.length/2)}if(S&&(S.id&&(D.id=S.id),S.lights&&(D.lights=function(O){if(!O.length)return[];const z=function(ie){const fe=atob(ie),_e=new Uint8Array(fe.length);for(let ge=0;ge<fe.length;ge++)_e[ge]=fe.codePointAt(ge);return _e}(O),$=[],G=z.length/24,q=new Uint16Array(z.buffer),re=new Float32Array(z.buffer);for(let ie=0;ie<G;ie++){const fe=q[2*ie*6]/30,_e=q[2*ie*6+1]/30,ge=q[2*ie*6+10]/100,Se=re[6*ie+1],be=re[6*ie+2],Me=re[6*ie+3],Ne=re[6*ie+4],Ge=Me-Se,Ye=Ne-be,He=Math.hypot(Ge,Ye);$.push({pos:[Se+.5*Ge,be+.5*Ye,_e],normal:[Ye/He,-Ge/He,0],width:He,height:fe,depth:ge,points:[Se,be,Me,Ne]})}return $}(S.lights))),T){const O=[];for(const z of T)O.push(C4(n.json.nodes[z],n,a));D.children=O}return D}function rJ(i){if(i.vertices.length===0||i.indices.length===0)return null;const[n,a]=[i.vertices[0].clone(),i.vertices[0].clone()];for(let y=1;y<i.vertices.length;++y){const b=i.vertices[y];n.x=Math.min(n.x,b.x),n.y=Math.min(n.y,b.y),a.x=Math.max(a.x,b.x),a.y=Math.max(a.y,b.y)}const c=Math.ceil(Math.max(a.x-n.x,a.y-n.y)/256),d=Math.max(8,c),m=new b4(i.vertices,i.indices,d);return{vertices:i.vertices,indices:i.indices,grid:m,min:n,max:a}}function nJ(i){if(!i.extras||!i.extras.ground)return null;const n=i.extras.ground;if(!n||!Array.isArray(n)||n.length===0)return null;const a=n[0];if(!a||!Array.isArray(a)||a.length===0)return null;const c=[];for(const y of a){if(!Array.isArray(y)||y.length!==2)continue;const b=y[0],S=y[1];typeof b=="number"&&typeof S=="number"&&c.push(new De(b,S))}if(c.length<3)return null;c.length>1&&c[c.length-1].equals(c[0])&&c.pop();let d=0;for(let y=0;y<c.length;y++){const b=c[y],S=c[(y+1)%c.length],T=c[(y+2)%c.length];d+=(b.x-S.x)*(T.y-S.y)-(T.x-S.x)*(b.y-S.y)}d>0&&c.reverse();const m=k1(c.flatMap(y=>[y.x,y.y]),[]);return m.length===0?null:{vertices:c,indices:m}}function iJ(i){const n=[],a=[];let c=0;for(const d of i){c=n.length;const m=d.vertexArray.float32,y=d.indexArray.uint16;for(let b=0;b<d.vertexArray.length;b++)n.push(new De(m[3*b+0],m[3*b+1]));for(let b=0;b<3*d.indexArray.length;b++)a.push(y[b]+c)}if(a.length%3!=0)return null;for(let d=0;d<a.length;d+=3){const m=n[a[d+0]],y=n[a[d+1]],b=n[a[d+2]];(m.x-y.x)*(b.y-y.y)-(b.x-y.x)*(m.y-y.y)>0&&([a[d+1],a[d+2]]=[a[d+2],a[d+1]])}return{vertices:n,indices:a}}function w4(i){const n=function(S,T){const D=[],O=WebGL2RenderingContext;if(S.json.textures)for(const z of S.json.textures){const $={magFilter:O.LINEAR,minFilter:O.NEAREST,wrapS:O.REPEAT,wrapT:O.REPEAT};z.sampler!==void 0&&Object.assign($,S.json.samplers[z.sampler]),D.push({image:T[z.source],sampler:$,uploaded:!1})}return D}(i,i.images),a=function(S,T){const D=[];for(const O of S.json.meshes){const z=[];for(const $ of O.primitives)z.push(tJ($,S,T));D.push(z)}return D}(i,n),{scenes:c,scene:d,nodes:m}=i.json,y=c?c[d||0].nodes:m,b=[];for(const S of y)b.push(C4(m[S],i,a));return function(S,T,D){const O={},z=new Set;for(let $=0;$<S.length;$++){const G=D[T[$]];if(!G.extras)continue;const q=G.extras["mapbox:footprint:version"],re=G.extras["mapbox:footprint:id"];(q||re)&&z.add($),q==="1.0.0"&&re&&(O[re]=$)}for(let $=0;$<S.length;$++){if(z.has($))continue;const G=S[$],q=D[T[$]];if(!q.extras)continue;let re=null;G.id in O&&(re=iJ(S[O[G.id]].meshes)),re||(re=nJ(q)),re&&(G.footprint=rJ(re))}if(z.size>0){const $=Array.from(z.values()).sort((G,q)=>G-q);for(let G=$.length-1;G>=0;G--)S.splice($[G],1)}}(b,y,i.json.nodes),b}function oJ(i){i.heightmap=new Float32Array(4096),i.heightmap.fill(-1);const n=i.vertexArray.float32,a=i.aabb.min[0]-1,c=i.aabb.min[1]-1,d=np/(i.aabb.max[0]-a+2),m=np/(i.aabb.max[1]-c+2);for(let y=0;y<n.length;y+=3){const b=n[y+2],S=(n[y+0]-a)*d|0,T=(n[y+1]-c)*m|0;b>i.heightmap[T*np+S]&&(i.heightmap[T*np+S]=b)}}function aJ(i,n){const a={};a.indexArray=new po,a.indexArray.reserve(4*i.length),a.vertexArray=new Zc,a.vertexArray.reserve(10*i.length),a.colorArray=new Ju,a.vertexArray.reserve(10*i.length);let c=0;for(const y of i){const b=Math.min(10,Math.max(4,1.3*y.height))*n,S=[-y.normal[1],y.normal[0],0],T=Math.min(.29,.1*y.width/y.depth),D=y.width-2*y.depth*n*(T+.01),O=s.N.scaleAndAdd([],y.pos,S,D/2),z=s.N.scaleAndAdd([],y.pos,S,-D/2),$=[O[0],O[1],O[2]+y.height],G=[z[0],z[1],z[2]+y.height],q=s.N.scaleAndAdd([],y.normal,S,T);s.N.scale(q,q,b);const re=s.N.scaleAndAdd([],y.normal,S,-T);s.N.scale(re,re,b),s.N.add(q,O,q),s.N.add(re,z,re),O[2]+=.1,z[2]+=.1,a.vertexArray.emplaceBack(q[0],q[1],q[2]),a.vertexArray.emplaceBack(re[0],re[1],re[2]),a.vertexArray.emplaceBack(O[0],O[1],O[2]),a.vertexArray.emplaceBack(z[0],z[1],z[2]),a.vertexArray.emplaceBack($[0],$[1],$[2]),a.vertexArray.emplaceBack(G[0],G[1],G[2]),a.vertexArray.emplaceBack(O[0],O[1],O[2]),a.vertexArray.emplaceBack(z[0],z[1],z[2]),a.vertexArray.emplaceBack(q[0],q[1],q[2]),a.vertexArray.emplaceBack(re[0],re[1],re[2]);const ie=D/b/2;a.colorArray.emplaceBack(-ie-T,-1,ie,.8),a.colorArray.emplaceBack(ie+T,-1,ie,.8),a.colorArray.emplaceBack(-ie,0,ie,1.3),a.colorArray.emplaceBack(ie,0,ie,1.3),a.colorArray.emplaceBack(ie+T,-.8,ie,.7),a.colorArray.emplaceBack(ie+T,-.8,ie,.7),a.colorArray.emplaceBack(0,0,ie,1.3),a.colorArray.emplaceBack(0,0,ie,1.3),a.colorArray.emplaceBack(ie+T,-1.2,ie,.8),a.colorArray.emplaceBack(ie+T,-1.2,ie,.8),a.indexArray.emplaceBack(6+c,4+c,8+c),a.indexArray.emplaceBack(7+c,9+c,5+c),a.indexArray.emplaceBack(0+c,1+c,2+c),a.indexArray.emplaceBack(1+c,3+c,2+c),c+=10}const d={defined:!0,emissiveFactor:[0,0,0]},m={};return m.baseColorFactor=mn.white,d.pbrMetallicRoughness=m,a.material=d,a.aabb=new xi([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),a}Kt(b4,"TriangleGridIndex");class S4{constructor(n){this._stringToNumber={},this._numberToString=[];for(let a=0;a<n.length;a++){const c=n[a];this._stringToNumber[c]=a,this._numberToString[a]=c}}encode(n){return this._stringToNumber[n]}decode(n){return this._numberToString[n]}}const sJ=["tile","layer","source","sourceLayer","state"];class T4{constructor(n,a,c,d,m){this.type="Feature",this._vectorTileFeature=n,this._z=a,this._x=c,this._y=d,this.properties=n.properties,this.id=m}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};this.id!==void 0&&(n.id=this.id);for(const a of sJ)this[a]!==void 0&&(n[a]=this[a]);return n}}class A4{constructor(n,a){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new ru(Ut,16,0),this.featureIndexArray=new f1,this.promoteId=a,this.is3DTile=!1}insert(n,a,c,d,m,y=0,b=0){const S=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(c,d,m,y);const T=this.grid;for(let D=0;D<a.length;D++){const O=a[D],z=[1/0,1/0,-1/0,-1/0];for(let $=0;$<O.length;$++){const G=O[$];z[0]=Math.min(z[0],G.x),z[1]=Math.min(z[1],G.y),z[2]=Math.max(z[2],G.x),z[3]=Math.max(z[3],G.y)}b!==0&&(z[0]-=b,z[1]-=b,z[2]+=b,z[3]+=b),z[0]<Ut&&z[1]<Ut&&z[2]>=0&&z[3]>=0&&T.insert(S,z[0],z[1],z[2],z[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new TT(new km(this.rawTileData)).layers,this.sourceLayerCoder=new S4(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const n in this.vtLayers)this.vtFeatures[n]=[]}return this.vtLayers}query(n,a,c,d){this.loadVTLayers();const m=n.params||{},y=Qa(m.filter),b=n.tileResult,S=n.transform,T=b.bufferedTilespaceBounds,D=this.grid.query(T.min.x,T.min.y,T.max.x,T.max.y,(G,q,re,ie)=>qk(b.bufferedTilespaceGeometry,G,q,re,ie));D.sort(lJ);let O=null;S.elevation&&D.length>0&&(O=Dm.create(S.elevation,this.tileID));const z={};let $;for(let G=0;G<D.length;G++){const q=D[G];if(q===$)continue;$=q;const re=this.featureIndexArray.get(q);let ie=null;if(this.is3DTile){const fe=this.bucketLayerIDs[0][0],_e=a[fe];if(_e.type!=="model")continue;const{queryFeature:ge,intersectionZ:Se}=_e.queryIntersectsMatchingFeature(b,re.featureIndex,y,S);ge&&this.appendToResult(z,fe,re.featureIndex,ge,Se)}else this.loadMatchingFeature(z,re,y,m.layers,m.availableImages,a,c,d,(fe,_e,ge,Se=0)=>(ie||(ie=go(fe,this.tileID.canonical,n.tileTransform)),_e.queryIntersectsFeature(b,fe,ge,ie,this.z,n.transform,n.pixelPosMatrix,O,Se)))}return z}loadMatchingFeature(n,a,c,d,m,y,b,S,T){const{featureIndex:D,bucketIndex:O,sourceLayerIndex:z,layoutVertexArrayOffset:$}=a,G=this.bucketLayerIDs[O];if(d&&!function(fe,_e){for(let ge=0;ge<fe.length;ge++)if(_e.indexOf(fe[ge])>=0)return!0;return!1}(d,G))return;const q=this.sourceLayerCoder.decode(z),re=this.vtLayers[q].feature(D);if(c.needGeometry){const fe=to(re,!0);if(!c.filter(new pi(this.tileID.overscaledZ),fe,this.tileID.canonical))return}else if(!c.filter(new pi(this.tileID.overscaledZ),re))return;const ie=this.getId(re,q);for(let fe=0;fe<G.length;fe++){const _e=G[fe];if(d&&d.indexOf(_e)<0)continue;const ge=y[_e];if(!ge)continue;let Se={};ie!==void 0&&S&&(Se=S.getState(ge.sourceLayer||"_geojsonTileLayer",ie));const be=!T||T(re,ge,Se,$);if(!be)continue;const Me=new T4(re,this.z,this.x,this.y,ie),Ne=Wt({},b[_e]);Ne.paint=E4(Ne.paint,ge.paint,re,Se,m),Ne.layout=E4(Ne.layout,ge.layout,re,Se,m),Me.layer=Ne,this.appendToResult(n,_e,D,Me,be)}}appendToResult(n,a,c,d,m){let y=n[a];y===void 0&&(y=n[a]=[]),y.push({featureIndex:c,feature:d,intersectionZ:m})}lookupSymbolFeatures(n,a,c,d,m,y,b,S){const T={};this.loadVTLayers();const D=Qa(m);for(const O of n)this.loadMatchingFeature(T,{bucketIndex:c,sourceLayerIndex:d,featureIndex:O,layoutVertexArrayOffset:0},D,y,b,S,a);return T}loadFeature(n){const{featureIndex:a,sourceLayerIndex:c}=n;this.loadVTLayers();const d=this.sourceLayerCoder.decode(c),m=this.vtFeatures[d];if(m[a])return m[a];const y=this.vtLayers[d].feature(a);return m[a]=y,y}hasLayer(n){for(const a of this.bucketLayerIDs)for(const c of a)if(n===c)return!0;return!1}getId(n,a){let c=n.id;if(this.promoteId){const d=typeof this.promoteId=="string"?this.promoteId:this.promoteId[a];d!=null&&(c=n.properties[d]),typeof c=="boolean"&&(c=Number(c))}return c}}function E4(i,n,a,c,d){return br(i,(m,y)=>{const b=n instanceof Od?n.get(y):null;return b&&b.evaluate?b.evaluate(a,c,d):b})}function lJ(i,n){return n-i}Kt(A4,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});const eA=new Float32Array(262144),op=new Uint8Array(262144);function D4(i){let n=0;if(i.meshes)for(const a of i.meshes)n=Math.max(n,a.aabb.max[2]);if(i.children)for(const a of i.children)n=Math.max(n,D4(a));return n}function P4(i,n,a){if(i.meshes)for(const c of i.meshes)c.aabb.min[0]!==1/0&&a.insert(n,c.aabb.min[0],c.aabb.min[1],c.aabb.max[0],c.aabb.max[1]);if(i.children)for(const c of i.children)P4(c,n,a)}const M4=["","wall","door","roof","window","lamp","logo"];class I4{constructor(n){this.node=n,this.evaluatedRMEA=[[1,0,0,1],[1,0,0,1],[1,0,0,1],[1,0,0,1],[.4,1,0,1],[1,0,0,1],[1,0,0,1]],this.hiddenByReplacement=!1,this.evaluatedScale=[1,1,1],this.evaluatedColor=[],this.emissionHeightBasedParams=[],this.feature={type:"Point",id:n.id,geometry:[],properties:{height:D4(n)}}}getLocalBounds(){if(!this.node.meshes)return new xi([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);if(!this.aabb){let n=0;const a=new xi([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);for(const c of this.node.meshes)this.node.lightMeshIndex!==n&&a.encapsulate(c.aabb),n++;this.aabb=a}return this.aabb}}class px{constructor(n,a,c,d,m,y){this.id=a,this.modelTraits|=Fm.CoordinateSpaceTile,this.uploaded=!1,this.hasPattern=!1,c&&(this.modelTraits|=Fm.HasMapboxMeshFeatures),d&&(this.modelTraits|=Fm.HasMeshoptCompression),this.zoom=-1,this.terrainExaggeration=1,this.projection={name:"mercator"},this.replacementUpdateTime=0,this.elevationReadFromZ=255,this.brightness=m,this.dirty=!0,this.needsUpload=!1,this.nodesInfo=[];for(const b of n)this.nodesInfo.push(new I4(b)),P4(b,y.featureIndexArray.length,y.grid),y.featureIndexArray.emplaceBack(this.nodesInfo.length-1,0,y.bucketLayerIDs.length-1,0)}update(){console.log("Update 3D model bucket")}populate(){console.log("populate 3D model bucket")}uploadPending(){return!this.uploaded||this.needsUpload}upload(n){if(!this.needsUpload)return;const a=this.getNodesInfo();for(const c of a){const d=c.node;this.uploaded?this.updatePbrBuffer(d):ZT(d,n,!0)}for(const c of a)ux(c.node);this.uploaded=!0,this.needsUpload=!1}updatePbrBuffer(n){let a=!1;if(!n.meshes)return a;for(const c of n.meshes)c.pbrBuffer&&(c.pbrBuffer.updateData(c.featureArray),a=!0);return a}needsReEvaluation(n,a,c){const d=n.transform.projectionOptions,m=n.style.getBrightness(),y=this.brightness!==m;return!!(!this.uploaded||this.dirty||d.name!==this.projection.name||Vy(c.paint.get("model-color").value,y)||Vy(c.paint.get("model-color-mix-intensity").value,y)||Vy(c.paint.get("model-roughness").value,y)||Vy(c.paint.get("model-emissive-strength").value,y)||Vy(c.paint.get("model-height-based-emissive-strength-multiplier").value,y))&&(this.projection=d,this.brightness=m,!0)}evaluateScale(n,a){if(n.transform.zoom===this.zoom)return;this.zoom=n.transform.zoom;const c=this.getNodesInfo(),d=this.id.canonical;for(const m of c){const y=m.feature;m.evaluatedScale=a.paint.get("model-scale").evaluate(y,{},d)}}evaluate(n){const a=this.getNodesInfo();for(const c of a){if(!c.node.meshes)continue;const d=c.feature,m=c.node.meshes&&c.node.meshes[0].featureData,y=c.evaluatedColor[2],b=c.evaluatedRMEA[2],S=this.id.canonical;if(c.hasTranslucentParts=!1,m){for(let T=0;T<M4.length;T++){const D=M4[T];D.length&&(d.properties.part=D);const O=n.paint.get("model-color").evaluate(d,{},S),z=n.paint.get("model-color-mix-intensity").evaluate(d,{},S);c.evaluatedColor[T]=[O.r,O.g,O.b,z],c.evaluatedRMEA[T][0]=n.paint.get("model-roughness").evaluate(d,{},S),c.evaluatedRMEA[T][2]=n.paint.get("model-emissive-strength").evaluate(d,{},S),c.evaluatedRMEA[T][3]=O.a,c.emissionHeightBasedParams[T]=n.paint.get("model-height-based-emissive-strength-multiplier").evaluate(d,{},S),!c.hasTranslucentParts&&O.a<1&&(c.hasTranslucentParts=!0)}delete d.properties.part,cJ(c,y!==c.evaluatedColor[2]||b!==c.evaluatedRMEA[2],this.modelTraits)}else c.evaluatedRMEA[0][2]=n.paint.get("model-emissive-strength").evaluate(d,{},S);c.evaluatedScale=n.paint.get("model-scale").evaluate(d,{},S),this.updatePbrBuffer(c.node)||(this.needsUpload=!0)}this.dirty=!1}elevationUpdate(n,a,c,d){const m=n.findDEMTileFor(c);if(m&&(m.tileID.canonical!==this.terrainTile||a!==this.terrainExaggeration)){if(m.dem&&m.tileID.overscaledZ!==this.elevationReadFromZ){this.elevationReadFromZ=m.tileID.overscaledZ;const y=Dm.create(n,c,m);if(!y)return;this.modelTraits&Fm.HasMapboxMeshFeatures&&this.updateDEM(n,y,c,d);for(const b of this.getNodesInfo()){const S=b.node;if(!S.footprint||!S.footprint.vertices||!S.footprint.vertices.length)continue;const T=S.footprint.vertices;let D=y.getElevationAt(T[0].x,T[0].y,!0,!0);for(let O=1;O<T.length;O++)D=Math.min(D,y.getElevationAt(T[O].x,T[O].y,!0,!0));S.elevation=D}}this.terrainTile=m.tileID.canonical,this.terrainExaggeration=a}}updateDEM(n,a,c,d){let m=a._dem._modifiedForSources[d];if(m===void 0&&(a._dem._modifiedForSources[d]=[],m=a._dem._modifiedForSources[d]),m.includes(c.canonical))return;const y=a._dem.dim;m.push(c.canonical);let b=!1;for(const S of this.getNodesInfo()){const T=S.node;if(!T.footprint||!T.footprint.grid)continue;const D=T.footprint.grid,O=a.tileCoordToPixel(D.min.x,D.min.y),z=a.tileCoordToPixel(D.max.x,D.max.y),$=Math.min(Math.min(y-z.y,O.x),Math.min(O.y,y-z.x));if($<0)continue;const G=Le($,2,5);let q=Math.max(0,O.x-G),re=Math.max(0,O.y-G),ie=Math.min(z.x+G,y-1),fe=Math.min(z.y+G,y-1);for(let be=re;be<=fe;++be)for(let Me=q;Me<=ie;++Me)op[be*y+Me]=255;let _e=0,ge=0;for(let be=0;be<D.cellsY;++be)for(let Me=0;Me<D.cellsX;++Me){if(!D.cells[be*D.cellsX+Me])continue;const Ne=a.tileCoordToPixel(D.min.x+Me/D.xScale,D.min.y+be/D.yScale),Ge=a.tileCoordToPixel(D.min.x+(Me+1)/D.xScale,D.min.y+(be+1)/D.yScale);for(let Ye=Ne.y;Ye<=Math.min(Ge.y+1,y-1);++Ye)for(let He=Ne.x;He<=Math.min(Ge.x+1,y-1);++He)op[Ye*y+He]===255&&(op[Ye*y+He]=0,_e+=a.getElevationAtPixel(He,Ye),ge++)}const Se=_e/ge;q=Math.max(1,O.x-G),re=Math.max(1,O.y-G),ie=Math.min(z.x+G,y-2),fe=Math.min(z.y+G,y-2),b=!0;for(let be=re;be<=fe;++be)for(let Me=q;Me<=ie;++Me)op[be*y+Me]===0&&(eA[be*y+Me]=a._dem.set(Me,be,Se));for(let be=1;be<G;++be){q=Math.max(1,O.x-be),re=Math.max(1,O.y-be),ie=Math.min(z.x+be,y-2),fe=Math.min(z.y+be,y-2);for(let Me=re;Me<=fe;++Me)for(let Ne=q;Ne<=ie;++Ne){const Ge=Me*y+Ne;if(op[Ge]===255){let Ye=0,He=0,st=-1,yt=-1;for(let nt=-1;nt<=1;++nt)for(let mt=-1;mt<=1;++mt){const tt=(Me+nt)*y+Ne+mt;if(op[tt]>=be)continue;const pt=eA[tt],Lt=Math.abs(pt);Lt>He&&(Ye=pt,He=Lt,st=mt,yt=nt)}if(He>.1){const nt=1-(be+.5*Math.abs(st*yt))/G;let mt=a._dem.get(Ne,Me)+Ye*nt;const tt=a._dem.get(Ne+st,Me+yt),pt=a._dem.get(Ne-st,Me-yt,!0);(mt-tt)*(mt-pt)>0&&(mt=(tt+pt)/2),eA[Ge]=a._dem.set(Ne,Me,mt),op[Ge]=be}}}}}b&&(a._demTile.needsDEMTextureUpload=!0,a._dem._timestamp=Tt.now())}getNodesInfo(){return this.nodesInfo}destroy(){const n=this.getNodesInfo();for(const a of n)ux(a.node),qT(a.node)}isEmpty(){return!this.nodesInfo.length}updateReplacement(n,a){if(a.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=a.updateTime;const c=a.getReplacementRegionsForTile(n.toUnwrapped()),d=this.getNodesInfo();for(let m=0;m<this.nodesInfo.length;m++){const y=d[m].node;d[m].hiddenByReplacement=!!y.footprint&&!c.find(b=>b.footprint===y.footprint)}}getHeightAtTileCoord(n,a){const c=this.getNodesInfo(),d=[];for(let m=0;m<this.nodesInfo.length;m++){const y=c[m],b=y.node.meshes[0];if(n<b.aabb.min[0]||a<b.aabb.min[1]||n>b.aabb.max[0]||a>b.aabb.max[1])continue;const S=(n-b.aabb.min[0])/(b.aabb.max[0]-b.aabb.min[0])*np|0,T=Math.min(63,(a-b.aabb.min[1])/(b.aabb.max[1]-b.aabb.min[1])*np|0)*np+Math.min(63,S);if(!(b.heightmap[T]<0&&y.node.footprint))return y.hiddenByReplacement?void 0:{height:b.heightmap[T],maxHeight:y.feature.properties.height,hidden:!1,verticalScale:y.evaluatedScale[2]};if(y.node.footprint.grid.query(new De(n,a),new De(n,a),d),d.length>0)return{height:void 0,maxHeight:y.feature.properties.height,hidden:y.hiddenByReplacement,verticalScale:y.evaluatedScale[2]}}}}function Vy(i,n){return!i.isLightConstant&&n}function uJ(i,n,a,c,d,m,y,b){let S=(61440&n|(61440&n)>>4)>>8,T=(3840&n|(3840&n)>>4)>>4,D=240&n|(240&n)>>4;a[3]>0&&(S=Zr(S,255*a[0],a[3]),T=Zr(T,255*a[1],a[3]),D=Zr(D,255*a[2],a[3]));const O=S<<8|T,z=D<<8|Math.floor(255*c[3]),$=function(be){const Me=Le(be,0,2);return Math.min(Math.round(.5*Me*255),255)}(c[2])<<8|15*c[0]<<4|15*c[1],G=Le(d[0],0,1),q=Le(d[1],0,1),re=Le(d[2],0,1),ie=Le(d[3],0,1);let fe,_e,ge,Se;if(G!==q&&y!==m&&q!==G){const be=y-m;_e=1/(be*(q-G)),ge=-(m+be*G)/(be*(q-G));const Me=Le(d[4],-1,1);Se=Math.pow(10,Me),fe=255*re<<8|255*ie}else fe=65535,_e=0,ge=1,Se=1;if(i.emplaceBack(O,z,$,fe,_e,ge,Se),b){const be=b.length;b.clear();for(let Me=0;Me<be;Me++)b.emplaceBack(O,z,$,fe,_e,ge,Se)}}function cJ(i,n,a){const c=i.node;let d=0;const m=a&Fm.HasMeshoptCompression;for(const y of c.meshes){if(c.lights&&c.lightMeshIndex===d||!y.featureData)continue;y.featureArray=new Wd,y.featureArray.reserve(y.featureData.length);let b=n;for(const S of y.featureData){const T=m?65535&S:S>>16&65535,D=m?S>>16&65535:65535&S,O=(15&D)<8?15&D:0,z=i.evaluatedRMEA[O],$=i.evaluatedColor[O],G=i.emissionHeightBasedParams[O];let q;if(b&&O===2&&c.lights&&(q=new Wd,q.resize(10*c.lights.length)),uJ(y.featureArray,T,$,z,G,y.aabb.min[2],y.aabb.max[2],q),q&&b){b=!1;const re=c.meshes[c.lightMeshIndex];re.featureArray=q,re.featureArray._trim()}}y.featureArray._trim(),d++}}function O4(i,n,a,c){const d=1<<i.z;n.lat=un((c/Ut+i.y)/d),n.lng=Dr((a/Ut+i.x)/d)}Kt(px,"Tiled3dModelBucket",{omit:["layers"]}),Kt(I4,"Tiled3dModelFeature");const hJ={circle:class extends Oa{constructor(i,n,a){super(i,nK,n,a)}createBucket(i){return new Ra(i)}queryRadius(i){const n=i;return Tm("circle-radius",this,n)+Tm("circle-stroke-width",this,n)+x1(this.paint.get("circle-translate"))}queryIntersectsFeature(i,n,a,c,d,m,y,b){const S=Xk(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),m.angle,i.pixelToTileUnitsFactor),T=this.paint.get("circle-radius").evaluate(n,a)+this.paint.get("circle-stroke-width").evaluate(n,a);return CR(i,c,m,y,b,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",S,T)}getProgramIds(){return["circle"]}getDefaultProgramParams(i,n){const a=bR(this);return{config:new te(this,n),defines:a,overrideFog:!1}}},heatmap:class extends Oa{createBucket(i){return new SR(i)}constructor(i,n,a){super(i,kK,n,a),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(i){i==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=by({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(i){return Tm("heatmap-radius",this,i)}queryIntersectsFeature(i,n,a,c,d,m,y,b){const S=this.paint.get("heatmap-radius").evaluate(n,a);return CR(i,c,m,y,b,!0,!0,new De(0,0),S)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getDefaultProgramParams(i,n){return i==="heatmap"?{config:new te(this,n),overrideFog:!1}:{}}},hillshade:class extends Oa{constructor(i,n,a){super(i,RK,n,a)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}getDefaultProgramParams(i,n){return{overrideFog:!1}}},fill:class extends Oa{constructor(i,n,a){super(i,XK,n,a)}getProgramIds(){const i=this.paint.get("fill-pattern"),n=i&&i.constantOr(1),a=[n?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&a.push(n&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),a}getDefaultProgramParams(i,n){return{config:new te(this,n),overrideFog:!1}}recalculate(i,n){super.recalculate(i,n);const a=this.paint._values["fill-outline-color"];a.value.kind==="constant"&&a.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(i){return new ST(i)}queryRadius(){return x1(this.paint.get("fill-translate"))}queryIntersectsFeature(i,n,a,c,d,m){return!i.queryGeometry.isAboveHorizon&&qc(Kk(i.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),m.angle,i.pixelToTileUnitsFactor),c)}isTileClipped(){return!0}},"fill-extrusion":class extends Oa{constructor(i,n,a){super(i,wX,n,a),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(i){return new $1(i)}queryRadius(){return x1(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}hasShadowPass(){return!0}cutoffRange(){return this.paint.get("fill-extrusion-cutoff-fade-range")}canCastShadows(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}queryIntersectsFeature(i,n,a,c,d,m,y,b,S){const T=Xk(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),m.angle,i.pixelToTileUnitsFactor),D=this.paint.get("fill-extrusion-height").evaluate(n,a),O=this.paint.get("fill-extrusion-base").evaluate(n,a),z=[0,0],$=b&&m.elevation,G=m.elevation?m.elevation.exaggeration():1,q=i.tile.getBucket(this);if($&&q instanceof $1){const ge=q.centroidVertexArray,Se=S+1;Se<ge.length&&(z[0]=ge.geta_centroid_pos0(Se),z[1]=ge.geta_centroid_pos1(Se))}if(z[0]===0&&z[1]===1)return!1;m.projection.name==="globe"&&(c=az([c],[new De(0,0),new De(Ut,Ut)],i.tileID.canonical).map(ge=>ge.polygon).flat());const re=$?b:null,[ie,fe]=function(ge,Se,be,Me,Ne,Ge,Ye,He,st,yt,nt){return ge.projection.name==="globe"?function(mt,tt,pt,Lt,vt,Jt,Zt,Ct,vr,ar,Yt){const wt=[],gr=[],jr=mt.projection.upVectorScale(Yt,mt.center.lat,mt.worldSize).metersToTile,xr=[0,0,0,1],$r=[0,0,0,1],Ar=(Mr,Gn,_n,xn)=>{Mr[0]=Gn,Mr[1]=_n,Mr[2]=xn,Mr[3]=1},sn=oz();pt>0&&(pt+=sn),Lt+=sn;for(const Mr of tt){const Gn=[],_n=[];for(const xn of Mr){const Tn=xn.x+vt.x,yn=xn.y+vt.y,ci=mt.projection.projectTilePoint(Tn,yn,Yt),zn=mt.projection.upVector(Yt,xn.x,xn.y);let Di=pt,ao=Lt;if(Zt){const ko=lz(Tn,yn,pt,Lt,Zt,Ct,vr,ar);Di+=ko.base,ao+=ko.top}pt!==0?Ar(xr,ci.x+zn[0]*jr*Di,ci.y+zn[1]*jr*Di,ci.z+zn[2]*jr*Di):Ar(xr,ci.x,ci.y,ci.z),Ar($r,ci.x+zn[0]*jr*ao,ci.y+zn[1]*jr*ao,ci.z+zn[2]*jr*ao),s.N.transformMat4(xr,xr,Jt),s.N.transformMat4($r,$r,Jt),Gn.push(new Pm(xr[0],xr[1],xr[2])),_n.push(new Pm($r[0],$r[1],$r[2]))}wt.push(Gn),gr.push(_n)}return[wt,gr]}(ge,Se,be,Me,Ne,Ge,Ye,He,st,yt,nt):Ye?function(mt,tt,pt,Lt,vt,Jt,Zt,Ct,vr){const ar=[],Yt=[],wt=[0,0,0,1];for(const gr of mt){const jr=[],xr=[];for(const $r of gr){const Ar=$r.x+Lt.x,sn=$r.y+Lt.y,Mr=lz(Ar,sn,tt,pt,Jt,Zt,Ct,vr);wt[0]=Ar,wt[1]=sn,wt[2]=Mr.base,wt[3]=1,s.a7.transformMat4(wt,wt,vt),wt[3]=Math.max(wt[3],1e-5);const Gn=new Pm(wt[0]/wt[3],wt[1]/wt[3],wt[2]/wt[3]);wt[0]=Ar,wt[1]=sn,wt[2]=Mr.top,wt[3]=1,s.a7.transformMat4(wt,wt,vt),wt[3]=Math.max(wt[3],1e-5);const _n=new Pm(wt[0]/wt[3],wt[1]/wt[3],wt[2]/wt[3]);jr.push(Gn),xr.push(_n)}ar.push(jr),Yt.push(xr)}return[ar,Yt]}(Se,be,Me,Ne,Ge,Ye,He,st,yt):function(mt,tt,pt,Lt,vt){const Jt=[],Zt=[],Ct=vt[8]*tt,vr=vt[9]*tt,ar=vt[10]*tt,Yt=vt[11]*tt,wt=vt[8]*pt,gr=vt[9]*pt,jr=vt[10]*pt,xr=vt[11]*pt;for(const $r of mt){const Ar=[],sn=[];for(const Mr of $r){const Gn=Mr.x+Lt.x,_n=Mr.y+Lt.y,xn=vt[0]*Gn+vt[4]*_n+vt[12],Tn=vt[1]*Gn+vt[5]*_n+vt[13],yn=vt[2]*Gn+vt[6]*_n+vt[14],ci=vt[3]*Gn+vt[7]*_n+vt[15],zn=xn+Ct,Di=Tn+vr,ao=yn+ar,ko=Math.max(ci+Yt,1e-5),si=xn+wt,yi=Tn+gr,Co=yn+jr,wo=Math.max(ci+xr,1e-5);Ar.push(new Pm(zn/ko,Di/ko,ao/ko)),sn.push(new Pm(si/wo,yi/wo,Co/wo))}Jt.push(Ar),Zt.push(sn)}return[Jt,Zt]}(Se,be,Me,Ne,Ge)}(m,c,O,D,T,y,re,z,G,m.center.lat,i.tileID.canonical),_e=i.queryGeometry;return function(ge,Se,be){let Me=1/0;qc(be,Se)&&(Me=sz(be,Se[0]));for(let Ne=0;Ne<Se.length;Ne++){const Ge=Se[Ne],Ye=ge[Ne];for(let He=0;He<Ge.length-1;He++){const st=Ge[He],yt=[st,Ge[He+1],Ye[He+1],Ye[He],st];Al(be,yt)&&(Me=Math.min(Me,sz(be,yt)))}}return Me!==1/0&&Me}(ie,fe,_e.isPointQuery()?_e.screenBounds:_e.screenGeometry)}},line:class extends Oa{constructor(i,n,a){super(i,cz,n,a),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(i){if(i==="line-gradient"){const n=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=n._styleExpression&&n._styleExpression.expression instanceof Nc,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(i,n){super.recalculate(i,n),this.paint._values["line-floorwidth"]=gz.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)}createBucket(i){return new ET(i)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getDefaultProgramParams(i,n){const a=pz(this);return{config:new te(this,n),defines:a,overrideFog:!1}}queryRadius(i){const n=i,a=_z(Tm("line-width",this,n),Tm("line-gap-width",this,n)),c=Tm("line-offset",this,n);return a/2+Math.abs(c)+x1(this.paint.get("line-translate"))}queryIntersectsFeature(i,n,a,c,d,m){if(i.queryGeometry.isAboveHorizon)return!1;const y=Kk(i.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),m.angle,i.pixelToTileUnitsFactor),b=i.pixelToTileUnitsFactor/2*_z(this.paint.get("line-width").evaluate(n,a),this.paint.get("line-gap-width").evaluate(n,a)),S=this.paint.get("line-offset").evaluate(n,a);return S&&(c=function(T,D){const O=[],z=new De(0,0);for(let $=0;$<T.length;$++){const G=T[$],q=[];for(let re=0;re<G.length;re++){const ie=G[re],fe=G[re+1],_e=re===0?z:ie.sub(G[re-1])._unit()._perp(),ge=re===G.length-1?z:fe.sub(ie)._unit()._perp(),Se=_e._add(ge)._unit();Se._mult(1/(Se.x*ge.x+Se.y*ge.y)),q.push(Se._mult(D)._add(ie))}O.push(q)}return O}(c,S*i.pixelToTileUnitsFactor)),function(T,D,O){for(let z=0;z<D.length;z++){const $=D[z];if(T.length>=3){for(let G=0;G<$.length;G++)if(au(T,$[G]))return!0}if(Yd(T,$,O))return!0}return!1}(y,c,b)}isTileClipped(){return!0}},symbol:nx,background:class extends Oa{constructor(i,n,a){super(i,AY,n,a)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}getDefaultProgramParams(i,n){return{overrideFog:!1}}},raster:r4,"raster-particle":n4,sky:class extends Oa{constructor(i,n,a){super(i,LY,n,a),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(i){i==="sky-gradient"?this._updateColorRamp():i!=="sky-atmosphere-sun"&&i!=="sky-atmosphere-halo-color"&&i!=="sky-atmosphere-color"&&i!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=by({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(i){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const n=i.style.light.properties.get("position");return this._lightPosition.azimuthal!==n.azimuthal||this._lightPosition.polar!==n.polar}return!1}getCenter(i,n){if(this.paint.get("sky-type")==="atmosphere"){const c=this.paint.get("sky-atmosphere-sun"),d=!c,m=i.style.light,y=m.properties.get("position");return d&&m.properties.get("anchor")==="viewport"&&Er("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),d?GT(y.azimuthal,90-y.polar,n):GT(c[0],90-c[1],n)}const a=this.paint.get("sky-gradient-center");return GT(a[0],90-a[1],n)}isSky(){return!0}markSkyboxValid(i){this._skyboxInvalidated=!1,this._lightPosition=i.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const i=this.paint.get("sky-type");return i==="atmosphere"?["skyboxCapture","skybox"]:i==="gradient"?["skyboxGradient"]:null}},slot:class extends Oa{constructor(i,n,a){super(i,RY,n)}},model:class extends Oa{constructor(i,n,a){super(i,HY,n,a),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(i){return new WT(i)}getProgramIds(){return["model"]}is3D(){return!0}hasShadowPass(){return!0}canCastShadows(){return!0}hasLightBeamPass(){return!0}cutoffRange(){return this.paint.get("model-cutoff-fade-range")}queryRadius(i){return i instanceof px?Ut-1:0}queryIntersectsFeature(i,n,a,c,d,m){if(!this.modelManager)return!1;const y=this.modelManager,b=i.tile.getBucket(this);if(!(b&&b instanceof WT))return!1;const S=b;for(const T in S.instancesPerModel){const D=S.instancesPerModel[T];if(D.idToFeaturesIndex.hasOwnProperty(n.id)){const O=D.features[D.idToFeaturesIndex[n.id]],z=y.getModel(T,this.scope);if(!z)return!1;let $=s.a6.create();const G=new Ve(0,0),q=S.canonical;let re=Number.MAX_VALUE;for(let ie=0;ie<O.instancedDataCount;++ie){const fe=16*(O.instancedDataOffset+ie),_e=D.instancedDataArray.float32,ge=[_e[fe+4],_e[fe+5],_e[fe+6]];O4(q,G,_e[fe],0|_e[fe+1]),f4($,z,m,G,O.rotation,O.scale,ge,!1,!1,!1),m.projection.name==="globe"&&($=HT($,m));const Se=s.a6.multiply([],m.projMatrix,$),be=i.queryGeometry,Me=u4(be.isPointQuery()?be.screenBounds:be.screenGeometry,m,Se,z.aabb);Me!=null&&(re=Math.min(Me,re))}return re!==Number.MAX_VALUE&&re}}return!1}_handleOverridablePaintPropertyUpdate(i,n,a){return!(!this.layout||n.isDataDriven()||a.isDataDriven()||i!=="model-color"&&i!=="model-color-mix-intensity"&&i!=="model-rotation"&&i!=="model-scale"&&i!=="model-translation"&&i!=="model-emissive-strength")}_isPropertyZoomDependent(i){const n=this._transitionablePaint._values[i];return n!=null&&n.value!=null&&n.value.expression!=null&&n.value.expression instanceof Dd}isZoomDependent(){return this._isPropertyZoomDependent("model-scale")||this._isPropertyZoomDependent("model-rotation")||this._isPropertyZoomDependent("model-translation")}queryIntersectsMatchingFeature(i,n,a,c){const d=i.tile,m=d.getBucket(this);let y=null,b=Number.MAX_VALUE;if(!(m&&m instanceof px))return{queryFeature:y,intersectionZ:b};const S=m.getNodesInfo()[n];if(S.hiddenByReplacement||!S.node.meshes||!a.filter(new pi(d.tileID.overscaledZ),S.feature,d.tileID.canonical))return{queryFeature:y,intersectionZ:b};const T=S.node,D=c.calculatePosMatrix(d.tileID.toUnwrapped(),c.worldSize),O=S.evaluatedScale;let z=0;c.elevation&&T.elevation&&(z=T.elevation*c.elevation.exaggeration()),s.a6.translate(D,D,[(T.anchor?T.anchor[0]:0)*(O[0]-1),(T.anchor?T.anchor[1]:0)*(O[1]-1),z]),s.a6.scale(D,D,O),s.a6.multiply(D,D,T.matrix);const $=i.queryGeometry,G=$.isPointQuery()?$.screenBounds:$.screenGeometry,q=function(ie){const fe=s.a6.multiply([],D,ie.matrix),_e=s.a6.multiply(fe,c.expandedFarZProjMatrix,fe);for(let ge=0;ge<ie.meshes.length;++ge){const Se=ie.meshes[ge];if(ge===ie.lightMeshIndex)continue;const be=u4(G,c,_e,Se.aabb);be!=null&&(b=Math.min(be,b))}if(ie.children)for(const ge of ie.children)q(ge)};if(q(T),b===Number.MAX_VALUE)return{queryFeature:y,intersectionZ:b};const re=new Ve(0,0);return O4(d.tileID.canonical,re,S.node.anchor[0],S.node.anchor[1]),y={type:"Feature",geometry:{type:"Point",coordinates:[re.lng,re.lat]},properties:S.feature.properties,id:S.feature.id,state:{},layer:this.serialize()},{queryFeature:y,intersectionZ:b}}}},Or={read:function(i,n){return i.readFields(Or._readField,{header_length:0,x:0,y:0,z:0,layers:[]},n)},_readField:function(i,n,a){i===1?n.header_length=a.readFixed32():i===2?n.x=a.readVarint():i===3?n.y=a.readVarint():i===4?n.z=a.readVarint():i===5&&n.layers.push(Or.Layer.read(a,a.readVarint()+a.pos))},PixelFormat:{PIXEL_FORMAT_UNKNOWN:{value:0,options:{}},PIXEL_FORMAT_UINT32:{value:1,options:{}},PIXEL_FORMAT_UINT16:{value:2,options:{}},PIXEL_FORMAT_UINT8:{value:3,options:{}}},Filter:{}};Or.Filter.read=function(i,n){return i.readFields(Or.Filter._readField,{delta_filter:null,filter:null,zigzag_filter:null,bitshuffle_filter:null,byteshuffle_filter:null},n)},Or.Filter._readField=function(i,n,a){i===1?(n.delta_filter=Or.Filter.Delta.read(a,a.readVarint()+a.pos),n.filter="delta_filter"):i===2?(n.zigzag_filter=Or.Filter.Zigzag.read(a,a.readVarint()+a.pos),n.filter="zigzag_filter"):i===3?(n.bitshuffle_filter=Or.Filter.BitShuffle.read(a,a.readVarint()+a.pos),n.filter="bitshuffle_filter"):i===4&&(n.byteshuffle_filter=Or.Filter.ByteShuffle.read(a,a.readVarint()+a.pos),n.filter="byteshuffle_filter")},Or.Filter.Delta={},Or.Filter.Delta.read=function(i,n){return i.readFields(Or.Filter.Delta._readField,{block_size:0},n)},Or.Filter.Delta._readField=function(i,n,a){i===1&&(n.block_size=a.readVarint())},Or.Filter.Zigzag={},Or.Filter.Zigzag.read=function(i,n){return i.readFields(Or.Filter.Zigzag._readField,{},n)},Or.Filter.Zigzag._readField=function(i,n,a){},Or.Filter.BitShuffle={},Or.Filter.BitShuffle.read=function(i,n){return i.readFields(Or.Filter.BitShuffle._readField,{},n)},Or.Filter.BitShuffle._readField=function(i,n,a){},Or.Filter.ByteShuffle={},Or.Filter.ByteShuffle.read=function(i,n){return i.readFields(Or.Filter.ByteShuffle._readField,{},n)},Or.Filter.ByteShuffle._readField=function(i,n,a){},Or.Codec={},Or.Codec.read=function(i,n){return i.readFields(Or.Codec._readField,{gzip_data:null,codec:null,jpeg_image:null,webp_image:null,png_image:null},n)},Or.Codec._readField=function(i,n,a){i===1?(n.gzip_data=Or.Codec.GzipData.read(a,a.readVarint()+a.pos),n.codec="gzip_data"):i===2?(n.jpeg_image=Or.Codec.JpegImage.read(a,a.readVarint()+a.pos),n.codec="jpeg_image"):i===3?(n.webp_image=Or.Codec.WebpImage.read(a,a.readVarint()+a.pos),n.codec="webp_image"):i===4&&(n.png_image=Or.Codec.PngImage.read(a,a.readVarint()+a.pos),n.codec="png_image")},Or.Codec.GzipData={},Or.Codec.GzipData.read=function(i,n){return i.readFields(Or.Codec.GzipData._readField,{},n)},Or.Codec.GzipData._readField=function(i,n,a){},Or.Codec.JpegImage={},Or.Codec.JpegImage.read=function(i,n){return i.readFields(Or.Codec.JpegImage._readField,{},n)},Or.Codec.JpegImage._readField=function(i,n,a){},Or.Codec.WebpImage={},Or.Codec.WebpImage.read=function(i,n){return i.readFields(Or.Codec.WebpImage._readField,{},n)},Or.Codec.WebpImage._readField=function(i,n,a){},Or.Codec.PngImage={},Or.Codec.PngImage.read=function(i,n){return i.readFields(Or.Codec.PngImage._readField,{},n)},Or.Codec.PngImage._readField=function(i,n,a){},Or.DataIndexEntry={},Or.DataIndexEntry.read=function(i,n){return i.readFields(Or.DataIndexEntry._readField,{first_byte:0,last_byte:0,filters:[],codec:null,offset:0,scale:0,bands:[]},n)},Or.DataIndexEntry._readField=function(i,n,a){i===1?n.first_byte=a.readFixed64():i===2?n.last_byte=a.readFixed64():i===3?n.filters.push(Or.Filter.read(a,a.readVarint()+a.pos)):i===4?n.codec=Or.Codec.read(a,a.readVarint()+a.pos):i===5?n.offset=a.readFloat():i===6?n.scale=a.readFloat():i===7&&n.bands.push(a.readString())},Or.Layer={},Or.Layer.read=function(i,n){return i.readFields(Or.Layer._readField,{version:0,name:"",units:"",tilesize:0,buffer:0,pixel_format:0,data_index:[]},n)},Or.Layer._readField=function(i,n,a){i===1?n.version=a.readVarint():i===2?n.name=a.readString():i===3?n.units=a.readString():i===4?n.tilesize=a.readVarint():i===5?n.buffer=a.readVarint():i===6?n.pixel_format=a.readVarint():i===7&&n.data_index.push(Or.DataIndexEntry.read(a,a.readVarint()+a.pos))};const fu={read:function(i,n){return i.readFields(fu._readField,{uint32_values:null,values:null,fixed32_values:null},n)},_readField:function(i,n,a){i===2?(n.uint32_values=fu.Uint32Values.read(a,a.readVarint()+a.pos),n.values="uint32_values"):i===3&&(n.fixed32_values=fu.Fixed32Values.read(a,a.readVarint()+a.pos),n.values="fixed32_values")},Uint32Values:{}};fu.Uint32Values.read=function(i,n){return i.readFields(fu.Uint32Values._readField,{values:[]},n)},fu.Uint32Values._readField=function(i,n,a){i===1&&(n.readValuesInto=function(c){if(c.type!==2)throw new Error(`Unsupported pbf type "${c.type}"`);const d=function(y){return y.type===2?y.readVarint()+y.pos:y.pos+1}(c),m=c.pos;return c.pos=d,function(y){c.pos=m;let b=0;for(;c.pos<d;){const S=c.readVarint();y[b++]=S}return y}}(a))},fu.Fixed32Values={},fu.Fixed32Values.read=function(i,n){return i.readFields(fu.Fixed32Values._readField,{values:[]},n)},fu.Fixed32Values._readField=function(i,n,a){throw new Error("Not implemented")};/**
 * tiny-lru
 *
 * @copyright 2023 Jason Mulligan <jason.mulligan@avoidwork.com>
 * @license BSD-3-Clause
 * @version 11.2.5
 */class fJ{constructor(n=0,a=0,c=!1){this.first=null,this.items=Object.create(null),this.last=null,this.max=n,this.resetTtl=c,this.size=0,this.ttl=a}clear(){return this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this}delete(n){if(this.has(n)){const a=this.items[n];delete this.items[n],this.size--,a.prev!==null&&(a.prev.next=a.next),a.next!==null&&(a.next.prev=a.prev),this.first===a&&(this.first=a.next),this.last===a&&(this.last=a.prev)}return this}entries(n=this.keys()){return n.map(a=>[a,this.get(a)])}evict(n=!1){if(n||this.size>0){const a=this.first;delete this.items[a.key],--this.size==0?(this.first=null,this.last=null):(this.first=a.next,this.first.prev=null)}return this}expiresAt(n){let a;return this.has(n)&&(a=this.items[n].expiry),a}get(n){let a;if(this.has(n)){const c=this.items[n];this.ttl>0&&c.expiry<=Date.now()?this.delete(n):(a=c.value,this.set(n,a,!0))}return a}has(n){return n in this.items}keys(){const n=[];let a=this.first;for(;a!==null;)n.push(a.key),a=a.next;return n}set(n,a,c=!1,d=this.resetTtl){let m;if(c||this.has(n)){if(m=this.items[n],m.value=a,c===!1&&d&&(m.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl),this.last!==m){const y=this.last,b=m.next,S=m.prev;this.first===m&&(this.first=m.next),m.next=null,m.prev=this.last,y.next=m,S!==null&&(S.next=b),b!==null&&(b.prev=S)}}else this.max>0&&this.size===this.max&&this.evict(!0),m=this.items[n]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:n,prev:this.last,next:null,value:a},++this.size==1?this.first=m:this.last.next=m;return this.last=m,this}values(n=this.keys()){return n.map(a=>this.get(a))}}function dJ(i,n){if(n.length!==4)throw new Error(`Expected data of dimension 4 but got ${n.length}.`);let a=n[3];for(let c=2;c>=1;c--){const d=c===1?1:0,m=c===2?1:0;for(let y=0;y<n[0];y++){const b=n[1]*y;for(let S=d;S<n[1];S++){const T=n[2]*(S+b);for(let D=m;D<n[2];D++){const O=n[3]*(D+T);for(let z=0;z<n[3];z++){const $=O+z;i[$]+=i[$-a]}}}}a*=n[c]}return i}function pJ(i){for(let n=0,a=i.length;n<a;n++)i[n]=i[n]>>>1^-(1&i[n]);return i}function mJ(i,n){switch(n){case"uint32":return i;case"uint16":for(let a=0;a<i.length;a+=2){const c=i[a],d=i[a+1];i[a]=(240&c)>>4|(61440&c)>>8|(240&d)<<4|61440&d,i[a+1]=15&c|(3840&c)>>4|(15&d)<<8|(3840&d)<<4}return i;case"uint8":for(let a=0;a<i.length;a+=4){const c=i[a],d=i[a+1],m=i[a+2],y=i[a+3];i[a+0]=(192&c)>>6|(192&d)>>4|(192&m)>>2|192&y,i[a+1]=(48&c)>>4|(48&d)>>2|48&m|(48&y)<<2,i[a+2]=(12&c)>>2|12&d|(12&m)<<2|(12&y)<<4,i[a+3]=3&c|(3&d)<<2|(3&m)<<4|(3&y)<<6}return i;default:throw new Error(`Invalid pixel format, "${n}"`)}}class gf extends Error{constructor(n){super(n),this.name="MRTError"}}var Ws=Uint8Array,Vm=Uint16Array,gJ=Int32Array,k4=new Ws([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),L4=new Ws([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),_J=new Ws([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),R4=function(i,n){for(var a=new Vm(31),c=0;c<31;++c)a[c]=n+=1<<i[c-1];var d=new gJ(a[30]);for(c=1;c<30;++c)for(var m=a[c];m<a[c+1];++m)d[m]=m-a[c]<<5|c;return{b:a,r:d}},z4=R4(k4,2),N4=z4.b,yJ=z4.r;N4[28]=258,yJ[258]=28;for(var vJ=R4(L4,0).b,tA=new Vm(32768),Hi=0;Hi<32768;++Hi){var Gm=(43690&Hi)>>1|(21845&Hi)<<1;tA[Hi]=((65280&(Gm=(61680&(Gm=(52428&Gm)>>2|(13107&Gm)<<2))>>4|(3855&Gm)<<4))>>8|(255&Gm)<<8)>>1}var Gy=function(i,n,a){for(var c=i.length,d=0,m=new Vm(n);d<c;++d)i[d]&&++m[i[d]-1];var y,b=new Vm(n);for(d=1;d<n;++d)b[d]=b[d-1]+m[d-1]<<1;if(a){y=new Vm(1<<n);var S=15-n;for(d=0;d<c;++d)if(i[d])for(var T=d<<4|i[d],D=n-i[d],O=b[i[d]-1]++<<D,z=O|(1<<D)-1;O<=z;++O)y[tA[O]>>S]=T}else for(y=new Vm(c),d=0;d<c;++d)i[d]&&(y[d]=tA[b[i[d]-1]++]>>15-i[d]);return y},Hy=new Ws(288);for(Hi=0;Hi<144;++Hi)Hy[Hi]=8;for(Hi=144;Hi<256;++Hi)Hy[Hi]=9;for(Hi=256;Hi<280;++Hi)Hy[Hi]=7;for(Hi=280;Hi<288;++Hi)Hy[Hi]=8;var F4=new Ws(32);for(Hi=0;Hi<32;++Hi)F4[Hi]=5;var BJ=Gy(Hy,9,1),xJ=Gy(F4,5,1),rA=function(i){for(var n=i[0],a=1;a<i.length;++a)i[a]>n&&(n=i[a]);return n},du=function(i,n,a){var c=n/8|0;return(i[c]|i[c+1]<<8)>>(7&n)&a},nA=function(i,n){var a=n/8|0;return(i[a]|i[a+1]<<8|i[a+2]<<16)>>(7&n)},bJ=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],pu=function(i,n,a){var c=new Error(n||bJ[i]);if(c.code=i,Error.captureStackTrace&&Error.captureStackTrace(c,pu),!a)throw c;return c},CJ=new Ws(0),wJ=typeof TextDecoder<"u"&&new TextDecoder;try{wJ.decode(CJ,{stream:!0})}catch{}const SJ={gzip_data:"gzip"},TJ={0:"uint32",1:"uint32",2:"uint16",3:"uint8"},AJ={uint32:1,uint16:2,uint8:4},EJ={uint32:Uint32Array,uint16:Uint16Array,uint8:Uint8Array};class j4{constructor(n=1){this.x=NaN,this.y=NaN,this.z=NaN,this.layers={},this._cacheSize=n}getLayer(n){return this.layers[n]}getHeaderLength(n){const a=new Uint8Array(n),c=new DataView(n);if(a[0]!==13)throw new gf("File is not a valid MRT.");return c.getUint32(1,!0)}parseHeader(n){const a=new Uint8Array(n),c=this.getHeaderLength(n);if(a.length<c)throw new gf(`Expected header with length >= ${c} but got buffer of length ${a.length}`);const d=new km(a.subarray(0,c)),m=Or.read(d);if(!isNaN(this.x)&&(this.x!==m.x||this.y!==m.y||this.z!==m.z))throw new gf(`Invalid attempt to parse header ${m.z}/${m.x}/${m.y} for tile ${this.z}/${this.x}/${this.y}`);this.x=m.x,this.y=m.y,this.z=m.z;for(const y of m.layers)this.layers[y.name]=new DJ(y,{cacheSize:this._cacheSize});return this}createDecodingTask(n){const a=[],c=this.getLayer(n.layerName);for(let d=0;d<c.dataIndex.length;d++){const m=c.dataIndex[d],y=m.first_byte-n.firstByte,b=m.last_byte+1-n.firstByte;if(d<n.firstBlock||d>n.lastBlock||c._blocksInProgress.has(d))continue;const S={layerName:c.name,firstByte:y,lastByte:b,pixelFormat:c.pixelFormat,blockIndex:d,blockShape:[m.bands.length].concat(c.bandShape),buffer:c.buffer,codec:m.codec.codec,filters:m.filters.map(T=>T.filter)};c._blocksInProgress.add(d),a.push(S)}return new $4(a,()=>{a.forEach(d=>c._blocksInProgress.delete(d.blockIndex))},(d,m)=>{if(a.forEach(y=>c._blocksInProgress.delete(y.blockIndex)),d)throw d;m.forEach(y=>{this.getLayer(y.layerName).processDecodedData(y)})})}}class DJ{constructor({version:n,name:a,units:c,tilesize:d,pixel_format:m,buffer:y,data_index:b},S){if(this.version=n,this.version!==1)throw new gf(`Cannot parse raster layer encoded with MRT version ${n}`);this.name=a,this.units=c,this.tileSize=d,this.buffer=y,this.pixelFormat=TJ[m],this.dataIndex=b,this.bandShape=[d+2*y,d+2*y,AJ[this.pixelFormat]],this._decodedBlocks=function(T=1e3,D=0,O=!1){if(isNaN(T)||T<0)throw new TypeError("Invalid max value");if(isNaN(D)||D<0)throw new TypeError("Invalid ttl value");if(typeof O!="boolean")throw new TypeError("Invalid resetTtl value");return new fJ(T,D,O)}(S?S.cacheSize:5),this._blocksInProgress=new Set}processDecodedData(n){const a=n.blockIndex.toString();this._decodedBlocks.get(a)||this._decodedBlocks.set(a,n.data)}getBlockForBand(n){let a=0;switch(typeof n){case"string":for(const[c,d]of this.dataIndex.entries()){for(const[m,y]of d.bands.entries())if(y===n)return{bandIndex:a+m,blockIndex:c,blockBandIndex:m};a+=d.bands.length}break;case"number":for(const[c,d]of this.dataIndex.entries()){if(n>=a&&n<a+d.bands.length)return{bandIndex:n,blockIndex:c,blockBandIndex:n-a};a+=d.bands.length}break;default:throw new gf(`Invalid band \`${JSON.stringify(n)}\`. Expected string or integer.`)}throw new gf(`Band not found: ${JSON.stringify(n)}`)}getDataRange(n){let a=1/0,c=-1/0,d=1/0,m=-1/0;for(const y of n){const{blockIndex:b}=this.getBlockForBand(y);if(b<0)throw new gf(`Invalid band: ${JSON.stringify(y)}`);const S=this.dataIndex[b];d=Math.min(d,b),m=Math.max(m,b),a=Math.min(a,S.first_byte),c=Math.max(c,S.last_byte)}return{layerName:this.name,firstByte:a,lastByte:c,firstBlock:d,lastBlock:m}}hasBand(n){const{blockIndex:a}=this.getBlockForBand(n);return a>=0}hasDataForBand(n){const{blockIndex:a}=this.getBlockForBand(n);return a>=0&&!!this._decodedBlocks.get(a.toString())}getBandView(n){const{blockIndex:a,blockBandIndex:c}=this.getBlockForBand(n),d=this._decodedBlocks.get(a.toString());if(!d)throw new gf(`Data for band ${JSON.stringify(n)} of layer "${this.name}" not decoded.`);const m=this.dataIndex[a],y=this.bandShape.reduce((T,D)=>T*D,1),b=c*y,S=d.subarray(b,b+y);return{data:S,bytes:new Uint8Array(S.buffer).subarray(S.byteOffset,S.byteOffset+S.byteLength),tileSize:this.tileSize,buffer:this.buffer,offset:m.offset,scale:m.scale}}}class $4{constructor(n,a,c){this.tasks=n,this._onCancel=a,this._onComplete=c,this._finalized=!1}cancel(){this._finalized||(this._onCancel(),this._finalized=!0)}complete(n,a){this._finalized||(this._onComplete(n,a),this._finalized=!0)}}j4.performDecoding=function(i,n){return Promise.all(n.tasks.map(a=>{const{layerName:c,firstByte:d,lastByte:m,pixelFormat:y,blockShape:b,blockIndex:S,filters:T,codec:D}=a,O=new Uint8Array(i).subarray(d,m+1),z=new Uint32Array(b[0]*b[1]*b[2]);let $;if(D!=="gzip_data")throw new Error(`Unhandled codec: ${D}`);return $=function(G,q){if(!globalThis.DecompressionStream&&q==="gzip_data")return Promise.resolve(((_e=function(be){be[0]==31&&be[1]==139&&be[2]==8||pu(6,"invalid gzip data");var Me=be[3],Ne=10;4&Me&&(Ne+=2+(be[10]|be[11]<<8));for(var Ge=(Me>>3&1)+(Me>>4&1);Ge>0;Ge-=!be[Ne++]);return Ne+(2&Me)}(fe=G))+8>fe.length&&pu(6,"invalid gzip data"),function(be,Me,Ne,Ge){var Ye=be.length;if(!Ye||Me.f&&!Me.l)return Ne||new Ws(0);var He=!Ne,st=He||Me.i!=2,yt=Me.i;He&&(Ne=new Ws(3*Ye));var nt=function(za){var va=Ne.length;if(za>va){var Zs=new Ws(Math.max(2*va,za));Zs.set(Ne),Ne=Zs}},mt=Me.f||0,tt=Me.p||0,pt=Me.b||0,Lt=Me.l,vt=Me.d,Jt=Me.m,Zt=Me.n,Ct=8*Ye;do{if(!Lt){mt=du(be,tt,1);var vr=du(be,tt+1,3);if(tt+=3,!vr){var ar=be[(_n=4+((tt+7)/8|0))-4]|be[_n-3]<<8,Yt=_n+ar;if(Yt>Ye){yt&&pu(0);break}st&&nt(pt+ar),Ne.set(be.subarray(_n,Yt),pt),Me.b=pt+=ar,Me.p=tt=8*Yt,Me.f=mt;continue}if(vr==1)Lt=BJ,vt=xJ,Jt=9,Zt=5;else if(vr==2){var wt=du(be,tt,31)+257,gr=du(be,tt+10,15)+4,jr=wt+du(be,tt+5,31)+1;tt+=14;for(var xr=new Ws(jr),$r=new Ws(19),Ar=0;Ar<gr;++Ar)$r[_J[Ar]]=du(be,tt+3*Ar,7);tt+=3*gr;var sn=rA($r),Mr=(1<<sn)-1,Gn=Gy($r,sn,1);for(Ar=0;Ar<jr;){var _n,xn=Gn[du(be,tt,Mr)];if(tt+=15&xn,(_n=xn>>4)<16)xr[Ar++]=_n;else{var Tn=0,yn=0;for(_n==16?(yn=3+du(be,tt,3),tt+=2,Tn=xr[Ar-1]):_n==17?(yn=3+du(be,tt,7),tt+=3):_n==18&&(yn=11+du(be,tt,127),tt+=7);yn--;)xr[Ar++]=Tn}}var ci=xr.subarray(0,wt),zn=xr.subarray(wt);Jt=rA(ci),Zt=rA(zn),Lt=Gy(ci,Jt,1),vt=Gy(zn,Zt,1)}else pu(1);if(tt>Ct){yt&&pu(0);break}}st&&nt(pt+131072);for(var Di=(1<<Jt)-1,ao=(1<<Zt)-1,ko=tt;;ko=tt){var si=(Tn=Lt[nA(be,tt)&Di])>>4;if((tt+=15&Tn)>Ct){yt&&pu(0);break}if(Tn||pu(2),si<256)Ne[pt++]=si;else{if(si==256){ko=tt,Lt=null;break}var yi=si-254;si>264&&(yi=du(be,tt,(1<<(So=k4[Ar=si-257]))-1)+N4[Ar],tt+=So);var Co=vt[nA(be,tt)&ao],wo=Co>>4;if(Co||pu(3),tt+=15&Co,zn=vJ[wo],wo>3){var So=L4[wo];zn+=nA(be,tt)&(1<<So)-1,tt+=So}if(tt>Ct){yt&&pu(0);break}st&&nt(pt+131072);var Qn=pt+yi;if(pt<zn){var ys=0-zn,_f=Math.min(zn,Qn);for(ys+pt<0&&pu(3);pt<_f;++pt)Ne[pt]=Ge[ys+pt]}for(;pt<Qn;++pt)Ne[pt]=Ne[pt-zn]}}Me.l=Lt,Me.p=ko,Me.b=pt,Me.f=mt,Lt&&(mt=1,Me.m=Jt,Me.d=vt,Me.n=Zt)}while(!mt);return pt!=Ne.length&&He?function(za,va,Zs){return(va==null||va<0)&&(va=0),(Zs==null||Zs>za.length)&&(Zs=za.length),new Ws(za.subarray(va,Zs))}(Ne,0,pt):Ne.subarray(0,pt)}(fe.subarray(_e,-8),{i:2},new Ws(((re=fe)[(ie=re.length)-4]|re[ie-3]<<8|re[ie-2]<<16|re[ie-1]<<24)>>>0),void 0)));var re,ie,fe,_e;const ge=SJ[q];if(!ge)throw new Error(`Unhandled codec: ${q}`);const Se=new globalThis.DecompressionStream(ge);return new Response(new Blob([G]).stream().pipeThrough(Se)).arrayBuffer().then(be=>new Uint8Array(be))}(O,D).then(G=>{const q=fu.read(new km(G));if(q.values==="uint32_values")return q.uint32_values.readValuesInto(z),new EJ[y](z.buffer);throw new Error(`Unhandled numeric data "${q.values}"`)}),$.then(G=>{for(let q=T.length-1;q>=0;q--)switch(T[q]){case"delta_filter":dJ(G,b);break;case"zigzag_filter":pJ(G);break;case"bitshuffle_filter":mJ(G,y);break;default:throw new Error(`Unhandled filter "${T[q]}"`)}return{layerName:c,blockIndex:S,data:G}}).catch(G=>{throw G})}))},Kt($4,"MRTDecodingBatch",{omit:["_onCancel","_onComplete"]});const U4=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class iA{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[a,c]=new Uint8Array(n,0,2);if(a!==219)throw new Error("Data does not appear to be in a KDBush format.");const d=c>>4;if(d!==1)throw new Error(`Got v${d} data when expected v1.`);const m=U4[15&c];if(!m)throw new Error("Unrecognized array type.");const[y]=new Uint16Array(n,2,1),[b]=new Uint32Array(n,4,1);return new iA(b,y,m,n)}constructor(n,a=64,c=Float64Array,d){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+a,2),65535),this.ArrayType=c,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const m=U4.indexOf(this.ArrayType),y=2*n*this.ArrayType.BYTES_PER_ELEMENT,b=n*this.IndexArrayType.BYTES_PER_ELEMENT,S=(8-b%8)%8;if(m<0)throw new Error(`Unexpected typed array class: ${c}.`);d&&d instanceof ArrayBuffer?(this.data=d,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+b+S,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+y+b+S),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+b+S,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+m]),new Uint16Array(this.data,2,1)[0]=a,new Uint32Array(this.data,4,1)[0]=n)}add(n,a){const c=this._pos>>1;return this.ids[c]=c,this.coords[this._pos++]=n,this.coords[this._pos++]=a,c}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return oA(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,a,c,d){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:y,nodeSize:b}=this,S=[0,m.length-1,0],T=[];for(;S.length;){const D=S.pop()||0,O=S.pop()||0,z=S.pop()||0;if(O-z<=b){for(let re=z;re<=O;re++){const ie=y[2*re],fe=y[2*re+1];ie>=n&&ie<=c&&fe>=a&&fe<=d&&T.push(m[re])}continue}const $=z+O>>1,G=y[2*$],q=y[2*$+1];G>=n&&G<=c&&q>=a&&q<=d&&T.push(m[$]),(D===0?n<=G:a<=q)&&(S.push(z),S.push($-1),S.push(1-D)),(D===0?c>=G:d>=q)&&(S.push($+1),S.push(O),S.push(1-D))}return T}within(n,a,c){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:d,coords:m,nodeSize:y}=this,b=[0,d.length-1,0],S=[],T=c*c;for(;b.length;){const D=b.pop()||0,O=b.pop()||0,z=b.pop()||0;if(O-z<=y){for(let re=z;re<=O;re++)G4(m[2*re],m[2*re+1],n,a)<=T&&S.push(d[re]);continue}const $=z+O>>1,G=m[2*$],q=m[2*$+1];G4(G,q,n,a)<=T&&S.push(d[$]),(D===0?n-c<=G:a-c<=q)&&(b.push(z),b.push($-1),b.push(1-D)),(D===0?n+c>=G:a+c>=q)&&(b.push($+1),b.push(O),b.push(1-D))}return S}}function oA(i,n,a,c,d,m){if(d-c<=a)return;const y=c+d>>1;V4(i,n,y,c,d,m),oA(i,n,a,c,y-1,1-m),oA(i,n,a,y+1,d,1-m)}function V4(i,n,a,c,d,m){for(;d>c;){if(d-c>600){const T=d-c+1,D=a-c+1,O=Math.log(T),z=.5*Math.exp(2*O/3),$=.5*Math.sqrt(O*z*(T-z)/T)*(D-T/2<0?-1:1);V4(i,n,a,Math.max(c,Math.floor(a-D*z/T+$)),Math.min(d,Math.floor(a+(T-D)*z/T+$)),m)}const y=n[2*a+m];let b=c,S=d;for(Wy(i,n,c,a),n[2*d+m]>y&&Wy(i,n,c,d);b<S;){for(Wy(i,n,b,S),b++,S--;n[2*b+m]<y;)b++;for(;n[2*S+m]>y;)S--}n[2*c+m]===y?Wy(i,n,c,S):(S++,Wy(i,n,S,d)),S<=a&&(c=S+1),a<=S&&(d=S-1)}}function Wy(i,n,a,c){aA(i,a,c),aA(n,2*a,2*c),aA(n,2*a+1,2*c+1)}function aA(i,n,a){const c=i[n];i[n]=i[a],i[a]=c}function G4(i,n,a,c){const d=i-a,m=n-c;return d*d+m*m}s.$=Zz,s.A=cm,s.B=Td,s.C=rn,s.D=Ke,s.E=On,s.F=mi,s.G=Ot,s.H=class{constructor(i){this.specification=i}possiblyEvaluate(i,n){return vi(i.expression.evaluate(n))}interpolate(i,n,a){return{x:Zr(i.x,n.x,a),y:Zr(i.y,n.y,a),z:Zr(i.z,n.z,a),azimuthal:Zr(i.azimuthal,n.azimuthal,a),polar:Zr(i.polar,n.polar,a)}}},s.I=kT,s.J=nu,s.K=pi,s.L=fn,s.M=class{constructor(i,n,a,c){this.id=i,this.position=n!=null?new Ve(n[0],n[1]):new Ve(0,0),this.orientation=a??[0,0,0],this.nodes=c,this.uploaded=!1,this.aabb=new xi([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),this.matrix=[]}_applyTransformations(i,n){if(s.a6.multiply(i.matrix,n,i.matrix),i.meshes)for(const a of i.meshes){const c=xi.applyTransform(a.aabb,i.matrix);this.aabb.encapsulate(c)}if(i.children)for(const a of i.children)this._applyTransformations(a,i.matrix)}computeBoundsAndApplyParent(){const i=s.a6.identity([]);for(const n of this.nodes)this._applyTransformations(n,i)}computeModelMatrix(i,n,a,c,d,m,y=!1){f4(this.matrix,this,i.transform,this.position,n,a,c,d,m,y)}upload(i){if(!this.uploaded){for(const n of this.nodes)ZT(n,i);for(const n of this.nodes)ux(n);this.uploaded=!0}}destroy(){for(const i of this.nodes)qT(i)}},s.O=Nt,s.P=De,s.Q=Od,s.R=Xo,s.S=sf,s.T=VT,s.U=Zr,s.V=Ut,s.W=Ac,s.X=class{constructor(i){this.specification=i}possiblyEvaluate(i,n){return function([a,c]){const d=vi([1,a,c]);return{x:d.x,y:d.y,z:d.z}}(i.expression.evaluate(n))}interpolate(i,n,a){return{x:Zr(i.x,n.x,a),y:Zr(i.y,n.y,a),z:Zr(i.z,n.z,a)}}},s.Y=function(i,n,a=0,c=!0){const d=new De(a,a),m=i.sub(d),y=n.add(d),b=[m,new De(y.x,m.y),y,new De(m.x,y.y)];return c&&b.push(m.clone()),b},s.Z=Dd,s._=function(i,n){const a=[];for(let c=0;c<i.length;c++){const d=xt(c-1,-1,i.length-1),m=xt(c+1,-1,i.length-1),y=i[c],b=i[m],S=i[d].sub(y).unit(),T=b.sub(y).unit(),D=T.angleWithSep(S.x,S.y),O=S.add(T).unit().mult(-1*n/Math.sin(D/2));a.push(y.add(O))}return a},s.a=Hl,s.a$=function(i){const n=[];for(const a in i)n.push(i[a]);return n},s.a0=qk,s.a1=function(i,n,a=0){return s.N.fromValues(((n.x-a)*i.scale-i.x)*Ut,(n.y*i.scale-i.y)*Ut,qn(n.z,n.y))},s.a2=uT,s.a3=hz,s.a4=function(i){let n=1/0,a=1/0,c=-1/0,d=-1/0;for(const m of i)n=Math.min(n,m.x),a=Math.min(a,m.y),c=Math.max(c,m.x),d=Math.max(d,m.y);return{min:new De(n,a),max:new De(c,d)}},s.a5=Lr,s.a8=au,s.a9=Cn,s.aA=lm,s.aB=Ei,s.aC=Hr,s.aD=o1,s.aE=rx,s.aF=function(){Ja.isLoading()||Ja.isLoaded()||Yu()!=="deferred"||J_()},s.aG=Qa,s.aH=to,s.aI=T4,s.aJ=Sa,s.aK=ET,s.aL=ST,s.aM=go,s.aN=$s,s.aO=fy,s.aP=dR,s.aQ=k1,s.aR=UT,s.aS=function(i,n){const a=sf(n.zoom);if(a===0)return oc(i);const c=A1(i),d=dT(c),m=Lr(c.getWest())*n.worldSize,y=Lr(c.getEast())*n.worldSize,b=Cr(c.getNorth())*n.worldSize,S=Cr(c.getSouth())*n.worldSize,T=[m,b,0],D=[y,b,0],O=[m,S,0],z=[y,S,0],$=s.a6.invert([],n.globeMatrix);return s.N.transformMat4(T,T,$),s.N.transformMat4(D,D,$),s.N.transformMat4(O,O,$),s.N.transformMat4(z,z,$),d[0]=Qc(d[0],O,a),d[1]=Qc(d[1],z,a),d[2]=Qc(d[2],D,a),d[3]=Qc(d[3],T,a),xi.fromPoints(d)},s.aT=D1,s.aU=xy,s.aV=Qc,s.aW=_a,s.aX=wK,s.aY=Ti,s.aZ=j4,s.a_=at,s.aa=Le,s.ab=de,s.ac=function(i,n){const a={};for(let c=0;c<n.length;c++){const d=n[c];d in i&&(a[d]=i[d])}return a},s.ad=et,s.ae=Cr,s.af=class{constructor(i){this.entries={},this.scheduler=i}request(i,n,a,c){const d=this.entries[i]=this.entries[i]||{callbacks:[]};if(d.result){const[m,y]=d.result;return this.scheduler?this.scheduler.add(()=>{c(m,y)},n):c(m,y),()=>{}}return d.callbacks.push(c),d.cancel||(d.cancel=a((m,y)=>{d.result=[m,y];for(const b of d.callbacks)this.scheduler?this.scheduler.add(()=>{b(m,y)},n):b(m,y);setTimeout(()=>delete this.entries[i],3e3)})),()=>{d.result||(d.callbacks=d.callbacks.filter(m=>m!==c),d.callbacks.length||(d.cancel(),delete this.entries[i]))}}},s.ag=iy,s.ah=function(i,n,a){const c=JSON.stringify(i.request);return i.data&&(this.deduped.entries[c]={result:[null,i.data]}),this.deduped.request(c,{type:"parseTile",isSymbolTile:i.isSymbolTile,zoom:i.tileZoom},d=>{const m=at(i.request,(y,b,S,T)=>{y?d(y):b&&d(null,{vectorTile:a?void 0:new TT(new km(b)),rawData:b,cacheControl:S,expires:T})});return()=>{m.cancel(),d()}},n)},s.ai=function(i){vn++,vn>Qt&&(i.getActor().send("enforceCacheSizeLimit",ft),vn=0)},s.aj=Ni,s.ak=gt,s.al=function(i){return i<=1?1:Math.pow(2,Math.floor(Math.log(i)/Math.LN2))},s.am=At,s.an=r4,s.ao=n4,s.ap=t4,s.aq=function(i,n){const a=document.createElement("video");a.muted=!0,a.onloadstart=function(){n(null,a)};for(let c=0;c<i.length;c++){const d=document.createElement("source");Qe(i[c])||(a.crossOrigin="Anonymous"),d.src=i[c],a.appendChild(d)}return{cancel:()=>{}}},s.ar=ix,s.as=Oy,s.at=Dr,s.au=un,s.av=iu,s.aw=po,s.ax=mn,s.ay=Mn,s.az=Zc,s.b=ul,s.b$=e1,s.b0=function(i,n){const a=[];for(const c in i)c in n||a.push(c);return a},s.b1=$t,s.b2=["type","source","source-layer","minzoom","maxzoom","filter","layout"],s.b3=function(i,n){const{x:a,y:c}=i.point,d=vR(a,c,i.worldSize/i._pixelsPerMercatorPixel,0,0);return s.a6.multiply(d,d,pT(oc(n)))},s.b5=Mm,s.b6=Hs,s.b7=U1,s.b8=function(i,n,a,c,d){const m=5*n+2;i.float32[m+0]=a,i.float32[m+1]=c,i.float32[m+2]=d},s.b9=tx,s.bA=sx,s.bB=i4,s.bC=function(i){const n=i4(i,!0);return s.b4.invert([],[n[0],n[1],n[4],n[5]])},s.bD=cT,s.bE=function(i){const{x:n,y:a}=i.point,{lng:c,lat:d}=i._center;return vR(n,a,i.worldSize,c,d)},s.bF=ct,s.bG=ve,s.bH=function(i){const n=Math.round((i+45+360)%360/90)%4;return ht[n]},s.bI=45,s.bJ=sr,s.bK=_,s.bL=tc,s.bM=B1,s.bN=ra,s.bO=Cm,s.bP=g,s.bQ=function(i,n,a){const c=Math.sqrt(i*i+n*n+a*a),d=c>0?Math.acos(a/c)*je:0;let m=i!==0||n!==0?Math.atan2(-n,-i)*je+90:0;return m<0&&(m+=360),[c,m,d]},s.bR=Qr,s.bS=xi,s.bT=vi,s.bU=function(i){return[Math.pow(i[0],1/2.2),Math.pow(i[1],1/2.2),Math.pow(i[2],1/2.2)]},s.bV=function(i){return i({pluginStatus:Ia,pluginURL:Xu}),Y_.on("pluginStateChange",i),i},s.bW=jm,s.bX=cx,s.bY=Rm,s.bZ=LT,s.b_=Ii,s.ba=Rz,s.bb=Al,s.bc=Uo,s.bd=Vz,s.be=zT,s.bf=OT,s.bg=iA,s.bh=xt,s.bj=Oe,s.bk=we,s.bl=Pr,s.bm=function(i,n,a){i[4*n+0]=a[0],i[4*n+1]=a[1],i[4*n+2]=a[2],i[4*n+3]=a[3]},s.bn=Ve,s.bo=Jz,s.bp=Pt,s.bq=hT,s.br=o4,s.bs=bt,s.bt=gR,s.bu=function(i,n,a,c,d,m,y,b,S){if(S.name==="globe")return gR(i,n,new bt(a,c,d),!1);const T=Oy({z:a,x:c,y:d},S);return new xi([(m+T.x/T.scale)*n,n*(T.y/T.scale),y],[(m+T.x2/T.scale)*n,n*(T.y2/T.scale),b])},s.bv=function(i,n,a){let c=0;for(let d=0;d<2;++d){const m=a?a[d]:0;i[d]>m&&(c+=(i[d]-m)*(i[d]-m)),n[d]<m&&(c+=(m-n[d])*(m-n[d]))}return c},s.bw=Yr,s.bx=ce,s.by=function(i){const n=s.a6.identity(new Float64Array(16));s.a6.multiply(n,i.pixelMatrix,i.globeMatrix);const a=[0,Re,0],c=[0,Xe,0];return s.N.transformMat4(a,a,n),s.N.transformMat4(c,c,n),[a[0]>0&&a[0]<=i.width&&a[1]>0&&a[1]<=i.height&&!gT(i,new Ve(i.center.lat,90)),c[0]>0&&c[0]<=i.width&&c[1]>0&&c[1]<=i.height&&!gT(i,new Ve(i.center.lat,-90))]},s.bz=function(i,n){const{scale:a}=i.tileTransform,c=a*Ut/(i.tileSize*Math.pow(2,n.zoom-i.tileID.overscaledZ+i.tileID.canonical.z));return s.b4.scale(new Float32Array(4),n.inverseAdjustmentMatrix,[c,c])},s.c=w4,s.c$=function(){return!!document.fullscreenElement||!!document.webkitFullscreenElement},s.c0=U,s.c1=kt,s.c2=function(i,n,a){return i.type==="custom"?new OY(i,n):new hJ[i.type](i,n,a)},s.c3=function(i){const n=i.indexOf(gm);return n>=0?i.slice(0,n):i},s.c4=function(i){return i.indexOf(gm)>=0},s.c5=function(i){const n=i.indexOf(gm);return n>=0?i.slice(n+1):""},s.c6=function(i){const n=[],a=i.id;return a===void 0&&n.push({message:`layers.${a}: missing required property "id"`}),i.render===void 0&&n.push({message:`layers.${a}: missing required method "render"`}),i.renderingMode&&i.renderingMode!=="2d"&&i.renderingMode!=="3d"&&n.push({message:`layers.${a}: property "renderingMode" must be either "2d" or "3d"`}),n},s.c7=Ur,s.c8=Y_,s.c9=lt,s.cA=pz,s.cB=(i,n,a,c,d,m)=>{const y=i.transform;return{u_matrix:dz(i,n,a,c),u_texsize:n.imageAtlasTexture?n.imageAtlasTexture.size:[0,0],u_pixels_to_tile_units:y.calculatePixelsToTileUnitsMatrix(n),u_device_pixel_ratio:d,u_image:0,u_tile_units_to_pixels:fz(n,y),u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]],u_alpha_discard_threshold:0,u_trim_offset:m}},s.cC=(i,n,a,c,d,m,y)=>{const b=i.transform,S=b.calculatePixelsToTileUnitsMatrix(n);return{u_matrix:dz(i,n,a,c),u_pixels_to_tile_units:S,u_device_pixel_ratio:m,u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:d,u_texsize:mz(a)&&n.lineAtlasTexture?n.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:fz(n,i.transform),u_alpha_discard_threshold:0,u_trim_offset:y,u_emissive_strength:a.paint.get("line-emissive-strength")}},s.cD=zr,s.cE=by,s.cF=oz,s.cG=tr,s.cH=$1,s.cI=cf,s.cJ=450,s.cK=7,s.cL=PY,s.cM=256,s.cN=pT,s.cO=ec,s.cP=hy,s.cQ=function(i,n,a,c,d){return Le((i-n)/(a-n)*(d-c)+c,c,d)},s.cR=Jr,s.cS=HT,s.cT=[1,1,1],s.cU=Dm,s.cV=Fm,s.cW=Sl,s.cX=class{constructor(){this._updateTime=0,this._sourceIds=[],this._activeRegions=[],this._prevRegions=[]}clear(){this._activeRegions.length>0&&++this._updateTime,this._activeRegions=[],this._prevRegions=[]}get updateTime(){return this._updateTime}getReplacementRegionsForTile(i){const n=NR(new De(0,0),new De(Ut,Ut),i),a=[];for(const c of this._activeRegions){if(c.hiddenByOverlap||!zR(n,c))continue;const d=cX(c.min,c.max,i);a.push({min:d.min,max:d.max,sourceId:this._sourceIds[c.priority],footprint:c.footprint,footprintTileId:c.tileId})}return a}setSources(i){this._setSources(i.map(n=>({getSourceId:()=>n.cache.id,getFootprints:()=>{const a=[];for(const c of n.cache.getVisibleCoordinates()){const d=n.cache.getTile(c).buckets[n.layer];if(d)for(const m of d.getNodesInfo()){const y=m.node;y.footprint&&a.push({footprint:y.footprint,id:c.toUnwrapped()})}}return a}})))}_addSource(i){const n=i.getFootprints();if(n.length!==0){for(const a of n){if(!a.footprint)continue;const c=NR(a.footprint.min,a.footprint.max,a.id);this._activeRegions.push({min:c.min,max:c.max,hiddenByOverlap:!1,priority:this._sourceIds.length,tileId:a.id,footprint:a.footprint})}this._sourceIds.push(i.getSourceId())}}_computeReplacement(){this._activeRegions.sort((n,a)=>n.priority-a.priority||N1(n.min,a.min)||N1(n.max,a.max));let i=this._activeRegions.length!==this._prevRegions.length;if(!i){let n=0,a=0;for(;!i&&n!==this._activeRegions.length;){const c=this._activeRegions[n],d=this._prevRegions[a];i=c.priority!==d.priority||!RR(c,d),++n,++a}}if(i){++this._updateTime;const n=a=>{const c=this._activeRegions;if(a>=c.length)return a;const d=c[a].priority;for(;a<c.length&&c[a].priority===d;)++a;return a};if(this._sourceIds.length>1){let a=0,c=n(a);for(;a!==c;){let d=a;const m=a;for(;d!==c;){const y=this._activeRegions[d];y.hiddenByOverlap=!1;for(let b=0;b<m;b++){const S=this._activeRegions[b];if(!S.hiddenByOverlap&&zR(y,S)&&(y.hiddenByOverlap=jR(y.footprint,y.tileId,S.footprint,S.tileId),y.hiddenByOverlap))break}++d}a=c,c=n(a)}}}}_setSources(i){[this._prevRegions,this._activeRegions]=[this._activeRegions,[]],this._sourceIds=[];for(let n=i.length-1;n>=0;n--)this._addSource(i[n]);this._computeReplacement()}},s.cY=class{constructor(i){this._createGrid(i),this._createPoles(i)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const i of this._poleSegments)i.destroy();for(const i of this._gridSegments)i.withSkirts.destroy(),i.withoutSkirts.destroy()}_fillGridMeshWithLods(i,n){const a=new $s,c=new po,d=[],m=i+1+2,y=n[0]+1,b=n[0]+1+(1+n.length),S=(T,D,O)=>{let z=T===m-1?T-2:T===0?T:T-1;return z+=O?24575:0,[z,D]};for(let T=0;T<m;++T)a.emplaceBack(...S(T,0,!0));for(let T=0;T<y;++T)for(let D=0;D<m;++D)a.emplaceBack(...S(D,T,(D===0||D===m-1)&&!0));for(let T=0;T<n.length;++T){const D=n[T];for(let O=0;O<m;++O)a.emplaceBack(...S(O,D,!0))}for(let T=0;T<n.length;++T){const D=c.length,O=n[T]+1+2,z=new po;for(let q=0;q<O-1;q++){const re=q===O-2,ie=re?m*(b-n.length+T-q):m;for(let fe=0;fe<m-1;fe++){const _e=q*m+fe;q===0||re||fe===0||fe===m-2?(z.emplaceBack(_e+1,_e,_e+ie),z.emplaceBack(_e+ie,_e+ie+1,_e+1)):(c.emplaceBack(_e+1,_e,_e+ie),c.emplaceBack(_e+ie,_e+ie+1,_e+1))}}const $=Ei.simpleSegment(0,D,a.length,c.length-D);for(let q=0;q<z.uint16.length;q+=3)c.emplaceBack(z.uint16[q],z.uint16[q+1],z.uint16[q+2]);const G=Ei.simpleSegment(0,D,a.length,c.length-D);d.push({withoutSkirts:$,withSkirts:G})}return{vertices:a,indices:c,segments:d}}_createGrid(i){const n=this._fillGridMeshWithLods(Ee,Pe);this._gridSegments=n.segments,this._gridBuffer=i.createVertexBuffer(n.vertices,dR.members),this._gridIndexBuffer=i.createIndexBuffer(n.indices,!0)}_createPoles(i){const n=new po;for(let y=0;y<=Ee;y++)n.emplaceBack(0,y+1,y+2);this._poleIndexBuffer=i.createIndexBuffer(n,!0);const a=new ec,c=new ec,d=new ec,m=new ec;this._poleSegments=[];for(let y=0,b=0;y<ve;y++){const S=360/(1<<y);a.emplaceBack(0,-de,0,.5,0),c.emplaceBack(0,-de,0,.5,1),d.emplaceBack(0,-de,0,.5,.5),m.emplaceBack(0,-de,0,.5,.5);for(let T=0;T<=Ee;T++){let D=T/Ee,O=0;const z=Zr(0,S,D),[$,G,q]=Fe(AK,EK,z,de);a.emplaceBack($,G,q,D,O),c.emplaceBack($,G,q,D,1-O);const re=Oe(z);D=.5+.5*Math.sin(re),O=.5+.5*Math.cos(re),d.emplaceBack($,G,q,D,O),m.emplaceBack($,G,q,D,1-O)}this._poleSegments.push(Ei.simpleSegment(b,0,66,64)),b+=66}this._poleNorthVertexBuffer=i.createVertexBuffer(a,S1,!1),this._poleSouthVertexBuffer=i.createVertexBuffer(c,S1,!1),this._texturedPoleNorthVertexBuffer=i.createVertexBuffer(d,S1,!1),this._texturedPoleSouthVertexBuffer=i.createVertexBuffer(m,S1,!1)}getGridBuffers(i,n){return[this._gridBuffer,this._gridIndexBuffer,n?this._gridSegments[i].withSkirts:this._gridSegments[i].withoutSkirts]}getPoleBuffers(i,n){return[n?this._texturedPoleNorthVertexBuffer:this._poleNorthVertexBuffer,n?this._texturedPoleSouthVertexBuffer:this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[i]]}},s.cZ=function(i){return ls.has(i)},s.c_=Je,s.ca=l,s.cb=class extends ou{constructor(i){super(i),this.current=B}set(i,n,a){if(this.fetchUniformLocation(i,n)){for(let c=0;c<9;c++)if(a[c]!==this.current[c]){this.current=a,this.gl.uniformMatrix3fv(this.location,!1,a);break}}}},s.cc=We,s.cd=function(i,n,a){const c=sf(a.zoom),d=i.style.map._antialias,m=n.options.extStandardDerivativesForceOff||i.terrain&&i.terrain.exaggeration()>0;return c===0&&!d&&!m},s.ce=function(i){const n=i.pixelsPerMeter,a=n/Pr(1,i.center.lat),c=s.a6.identity(new Float64Array(16));return s.a6.translate(c,c,[i.point.x,i.point.y,0]),s.a6.scale(c,c,[a,a,n]),Float32Array.from(c)},s.cf=A1,s.cg=function(i){const n=Yr-5;i=Le(i,-n,n)/n*90;const a=Math.pow(Math.abs(Math.sin(Oe(i))),3);return Math.round(a*(Pe.length-1))},s.ch=function(i,n,a,c){const d=n.getNorth(),m=n.getSouth(),y=n.getWest(),b=n.getEast(),S=1<<i.z,T=b-y,D=d-m,O=T/Ee,z=-D/Pe[a],$=[0,O,0,z,0,0,d,y,0];if(i.z>0){const G=180/c;s.co.multiply($,$,[G/T+1,0,0,0,G/D+1,0,-.5*G/O,.5*G/z,1])}return $[2]=S,$[5]=i.x,$[8]=i.y,$},s.ci=oc,s.cj=function(i,n,a){const c=s.a6.identity(new Float64Array(16)),d=(n/(1<<i)-.5)*Math.PI*2;return s.a6.rotateY(c,a.globeMatrix,d),Float32Array.from(c)},s.ck=class{isDataAvailableAtPoint(i){const n=this._source();if(this.isUsingMockSource()||!n||i.y<0||i.y>1)return!1;const a=n.getSource().maxzoom,c=1<<a,d=Math.floor(i.x),m=Math.floor((i.x-d)*c),y=Math.floor(i.y*c),b=this.findDEMTileFor(new At(a,d,a,m,y));return!(!b||!b.dem)}getAtPointOrZero(i,n=0){return this.getAtPoint(i,n)||0}getAtPoint(i,n,a=!0){if(this.isUsingMockSource())return null;n==null&&(n=null);const c=this._source();if(!c||i.y<0||i.y>1)return n;const d=c.getSource().maxzoom,m=1<<d,y=Math.floor(i.x),b=i.x-y,S=new At(d,y,d,Math.floor(b*m),Math.floor(i.y*m)),T=this.findDEMTileFor(S);if(!T||!T.dem)return n;const D=T.dem,O=1<<T.tileID.canonical.z,z=(b*O-T.tileID.canonical.x)*D.dim,$=(i.y*O-T.tileID.canonical.y)*D.dim,G=Math.floor(z),q=Math.floor($);return(a?this.exaggeration():1)*Zr(Zr(D.get(G,q),D.get(G,q+1),$-q),Zr(D.get(G+1,q),D.get(G+1,q+1),$-q),z-G)}getAtTileOffset(i,n,a){const c=1<<i.canonical.z;return this.getAtPointOrZero(new fn(i.wrap+(i.canonical.x+n/Ut)/c,(i.canonical.y+a/Ut)/c))}getAtTileOffsetFunc(i,n,a,c){return d=>{const m=this.getAtTileOffset(i,d.x,d.y),y=c.upVector(i.canonical,d.x,d.y),b=c.upVectorScale(i.canonical,n,a).metersToTile;return s.N.scale(y,y,m*b),y}}getForTilePoints(i,n,a,c){if(this.isUsingMockSource())return!1;const d=Dm.create(this,i,c);return!!d&&(n.forEach(m=>{m[2]=this.exaggeration()*d.getElevationAt(m[0],m[1],a)}),!0)}getMinMaxForTile(i){if(this.isUsingMockSource())return null;const n=this.findDEMTileFor(i);if(!n||!n.dem)return null;const a=n.dem.tree,c=n.tileID,d=1<<i.canonical.z-c.canonical.z;let m=i.canonical.x/d-c.canonical.x,y=i.canonical.y/d-c.canonical.y,b=0;for(let S=0;S<i.canonical.z-c.canonical.z&&!a.leaves[b];S++){m*=2,y*=2;const T=2*Math.floor(y)+Math.floor(m);b=a.childOffsets[b]+T,m%=1,y%=1}return{min:this.exaggeration()*a.minimums[b],max:this.exaggeration()*a.maximums[b]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(i,n,a){throw new Error("Pure virtual method called.")}pointCoordinate(i){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(i){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}getMinMaxForVisibleTiles(){const i=this.visibleDemTiles;if(i.length===0)return null;let n=!1,a=Number.MAX_VALUE,c=Number.MIN_VALUE;for(const d of i){const m=this.getMinMaxForTile(d.tileID);m&&(a=Math.min(a,m.min),c=Math.max(c,m.max),n=!0)}return n?{min:a,max:c}:null}},s.cl=T1,s.cm=ER,s.cn=function(i,n){return[Math.pow(i[0],2.2)*n,Math.pow(i[1],2.2)*n,Math.pow(i[2],2.2)*n]},s.cp=yR,s.cq=256,s.cr=function(i,n){const a=[0,0,0],c=D1(oc(n.canonical));return s.N.transformMat4(a,a,c),s.N.transformMat4(a,a,i),a},s.cs=i=>({u_camera_to_center_distance:new ra(i),u_extrude_scale:new E(i),u_device_pixel_ratio:new ra(i),u_matrix:new _(i),u_inv_rot_matrix:new _(i),u_merc_center:new tc(i),u_tile_id:new B1(i),u_zoom_transition:new ra(i),u_up_dir:new B1(i),u_emissive_strength:new ra(i)}),s.ct=i=>({u_matrix:new _(i),u_pixels_to_tile_units:new E(i),u_device_pixel_ratio:new ra(i),u_units_to_pixels:new tc(i),u_dash_image:new Cm(i),u_gradient_image:new Cm(i),u_image_height:new ra(i),u_texsize:new tc(i),u_tile_units_to_pixels:new ra(i),u_alpha_discard_threshold:new ra(i),u_trim_offset:new tc(i),u_emissive_strength:new ra(i)}),s.cu=i=>({u_matrix:new _(i),u_texsize:new tc(i),u_pixels_to_tile_units:new E(i),u_device_pixel_ratio:new ra(i),u_image:new Cm(i),u_units_to_pixels:new tc(i),u_tile_units_to_pixels:new ra(i),u_alpha_discard_threshold:new ra(i),u_trim_offset:new tc(i)}),s.cv=vm,s.cw=FX,s.cx=jX,s.cy=bR,s.cz=(i,n,a,c,d,m)=>{const y=i.transform,b=y.projection.name==="globe";let S;if(m.paint.get("circle-pitch-alignment")==="map")if(b){const D=yR(y.zoom,n.canonical)*y._pixelsPerMercatorPixel;S=Float32Array.from([D,0,0,D])}else S=y.calculatePixelsToTileUnitsMatrix(a);else S=new Float32Array([y.pixelsToGLUnits[0],0,0,y.pixelsToGLUnits[1]]);const T={u_camera_to_center_distance:i.transform.getCameraToCenterDistance(y.projection),u_matrix:i.translatePosMatrix(n.projMatrix,a,m.paint.get("circle-translate"),m.paint.get("circle-translate-anchor")),u_device_pixel_ratio:Tt.devicePixelRatio,u_extrude_scale:S,u_inv_rot_matrix:DK,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0],u_emissive_strength:m.paint.get("circle-emissive-strength")};if(b){T.u_inv_rot_matrix=c,T.u_merc_center=d,T.u_tile_id=[n.canonical.x,n.canonical.y,1<<n.canonical.z],T.u_zoom_transition=sf(y.zoom);const D=d[0]*Ut,O=d[1]*Ut;T.u_up_dir=y.projection.upVector(new bt(0,0,0),D,O)}return T},s.d=zt,s.d0=St,s.d1=gn,s.d2=it,s.d3=function([i,n,a]){const c=Math.hypot(i,n,a),d=Math.atan2(i,a),m=.5*Math.PI-Math.acos(-n/c);return new Ve(ct(d),ct(m))},s.d4=rt,s.d5=P,s.d6=gT,s.d7=BR,s.d8=function(i){const n=[0,0,0],a=s.a6.identity(new Float64Array(16));return s.a6.multiply(a,i.pixelMatrix,i.globeMatrix),s.N.transformMat4(n,n,a),new De(n[0],n[1])},s.d9=function(i){const n=i.navigator?i.navigator.userAgent:null;return!!function(a){if(dt==null){const c=a.navigator?a.navigator.userAgent:null;dt=!!a.safari||!(!c||!(/\b(iPad|iPhone|iPod)\b/.test(c)||c.match("Safari")&&!c.match("Chrome")))}return dt}(i)&&n&&(n.match("Version/15.4")||n.match("Version/15.5")||n.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},s.dA=cu,s.dB=S4,s.dC=A4,s.dD=uz,s.dE=br,s.dF=Nz,s.dG=function(i,n,a,c,d,m,y,b,S,T,D){i.createArrays(),i.tilePixelRatio=Ut/(512*i.overscaling),i.compareText={},i.iconsNeedLinear=!1;const O=i.layers[0].layout,z=i.layers[0]._unevaluatedLayout._values,$={};if(i.textSizeData.kind==="composite"){const{minZoom:ie,maxZoom:fe}=i.textSizeData;$.compositeTextSizes=[z["text-size"].possiblyEvaluate(new pi(ie),b),z["text-size"].possiblyEvaluate(new pi(fe),b)]}if(i.iconSizeData.kind==="composite"){const{minZoom:ie,maxZoom:fe}=i.iconSizeData;$.compositeIconSizes=[z["icon-size"].possiblyEvaluate(new pi(ie),b),z["icon-size"].possiblyEvaluate(new pi(fe),b)]}$.layoutTextSize=z["text-size"].possiblyEvaluate(new pi(S+1),b),$.layoutIconSize=z["icon-size"].possiblyEvaluate(new pi(S+1),b),$.textMaxSize=z["text-size"].possiblyEvaluate(new pi(18),b);const G=O.get("text-rotation-alignment")==="map"&&O.get("symbol-placement")!=="point",q=O.get("text-size");let re=!1;for(const ie of i.features)if(ie.icon&&ie.icon.nameSecondary){re=!0;break}for(const ie of i.features){const fe=O.get("text-font").evaluate(ie,{},b).join(","),_e=q.evaluate(ie,{},b),ge=$.layoutTextSize.evaluate(ie,{},b),Se=($.layoutIconSize.evaluate(ie,{},b),{horizontal:{},vertical:void 0}),be=ie.text;let Me,Ne=[0,0];if(be){const He=be.toString(),st=O.get("text-letter-spacing").evaluate(ie,{},b)*Uo,yt=O.get("text-line-height").evaluate(ie,{},b)*Uo,nt=jS(He)?st:0,mt=O.get("text-anchor").evaluate(ie,{},b),tt=O.get("text-variable-anchor");if(!tt){const Zt=O.get("text-radial-offset").evaluate(ie,{},b);Ne=Zt?Vz(mt,[Zt*Uo,RT]):O.get("text-offset").evaluate(ie,{},b).map(Ct=>Ct*Uo)}let pt=G?"center":O.get("text-justify").evaluate(ie,{},b);const Lt=O.get("symbol-placement")==="point",vt=Lt?O.get("text-max-width").evaluate(ie,{},b)*Uo:1/0,Jt=Zt=>{i.allowVerticalPlacement&&Ku(He)&&(Se.vertical=IT(be,n,a,d,fe,vt,yt,mt,Zt,nt,Ne,Hs.vertical,!0,ge,_e))};if(!G&&tt){const Zt=pt==="auto"?tt.map(vr=>zT(vr)):[pt];let Ct=!1;for(let vr=0;vr<Zt.length;vr++){const ar=Zt[vr];if(!Se.horizontal[ar])if(Ct)Se.horizontal[ar]=Se.horizontal[0];else{const Yt=IT(be,n,a,d,fe,vt,yt,"center",ar,nt,Ne,Hs.horizontal,!1,ge,_e);Yt&&(Se.horizontal[ar]=Yt,Ct=Yt.positionedLines.length===1)}}Jt("left")}else{if(pt==="auto"&&(pt=zT(mt)),Lt||O.get("text-writing-mode").indexOf("horizontal")>=0||!Ku(He)){const Zt=IT(be,n,a,d,fe,vt,yt,mt,pt,nt,Ne,Hs.horizontal,!1,ge,_e);Zt&&(Se.horizontal[pt]=Zt)}Jt(Lt?"left":pt)}}let Ge=!1;if(ie.icon&&ie.icon.namePrimary){const He=c[ie.icon.namePrimary];He&&(Me=oY(d[ie.icon.namePrimary],ie.icon.nameSecondary?d[ie.icon.nameSecondary]:void 0,O.get("icon-offset").evaluate(ie,{},b),O.get("icon-anchor").evaluate(ie,{},b)),Ge=He.sdf,i.sdfIcons===void 0?i.sdfIcons=He.sdf:i.sdfIcons!==He.sdf&&Er("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(He.pixelRatio!==i.pixelRatio||O.get("icon-rotate").constantOr(1)!==0)&&(i.iconsNeedLinear=!0))}const Ye=Hz(Se.horizontal)||Se.vertical;i.iconsInText||(i.iconsInText=!!Ye&&Ye.iconsInText),(Ye||Me)&&fY(i,ie,Se,Me,c,$,ge,0,Ne,Ge,y,b,T,D,re)}m&&i.generateCollisionDebugBuffers(S,i.collisionBoxArray)},s.dH=TT,s.dI=km,s.dJ=F1,s.dK=K,s.dL=R1,s.dM=L1,s.dN=Ce,s.dO=vz,s.dP=function(i){let n=0;if(new Uint32Array(i,0,1)[0]!==_4){const a=new Uint32Array(i,0,7),[,,c,d,m,y]=a;n=a.byteLength+d+m+y+m,(c!==i.byteLength||n>=i.byteLength)&&Er("Invalid b3dm header information.")}return x4(i,n)},s.dQ=function(i,n){const a=w4(i);for(const c of a){for(const d of c.meshes)oJ(d);c.lights&&(c.lightMeshIndex=c.meshes.length,c.meshes.push(aJ(c.lights,n)))}return a},s.dR=px,s.dS=d4,s.dT=Ja,s.dU=function(i){Rn(),qt&&qt.then(n=>{n.keys().then(a=>{for(let c=0;c<a.length-i;c++)n.delete(a[c])})})},s.da=class{constructor(i,n,a){this._transformRequestFn=i,this._customAccessToken=n,this._silenceAuthErrors=!!a,this._createSkuToken()}_createSkuToken(){const i=function(){let n="";for(let a=0;a<10;a++)n+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Dt,n].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=i.token,this._skuTokenExpiresAt=i.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(i,n){return this._transformRequestFn&&this._transformRequestFn(i,n)||{url:i}}normalizeStyleURL(i,n){if(!U(i))return i;const a=Br(i);return a.params.push(`sdk=js-${w}`),a.path=`/styles/v1${a.path}`,this._makeAPIURL(a,this._customAccessToken||n)}normalizeGlyphsURL(i,n){if(!U(i))return i;const a=Br(i);return a.path=`/fonts/v1${a.path}`,this._makeAPIURL(a,this._customAccessToken||n)}normalizeModelURL(i,n){if(!U(i))return i;const a=Br(i);return a.path=`/models/v1${a.path}`,this._makeAPIURL(a,this._customAccessToken||n)}normalizeSourceURL(i,n,a,c){if(!U(i))return i;const d=Br(i);return d.path=`/v4/${d.authority}.json`,d.params.push("secure"),a&&d.params.push(`language=${a}`),c&&d.params.push(`worldview=${c}`),this._makeAPIURL(d,this._customAccessToken||n)}normalizeSpriteURL(i,n,a,c){const d=Br(i);return U(i)?(d.path=`/styles/v1${d.path}/sprite${n}${a}`,this._makeAPIURL(d,this._customAccessToken||c)):(d.path+=`${n}${a}`,en(d))}normalizeTileURL(i,n,a){if(this._isSkuTokenExpired()&&this._createSkuToken(),i&&!U(i))return i;const c=Br(i);c.path=c.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${n||a&&c.authority!=="raster"&&a===512?"@2x":""}${Bn.supported?".webp":"$1"}`),c.authority==="raster"?c.path=`/${P.RASTER_URL_PREFIX}${c.path}`:c.authority==="rasterarrays"?c.path=`/${P.RASTERARRAYS_URL_PREFIX}${c.path}`:(c.path=c.path.replace(/^.+\/v4\//,"/"),c.path=`/${P.TILE_URL_VERSION}${c.path}`);const d=this._customAccessToken||function(m){for(const y of m){const b=y.match(/^access_token=(.*)$/);if(b)return b[1]}return null}(c.params)||P.ACCESS_TOKEN;return P.REQUIRE_ACCESS_TOKEN&&d&&this._skuToken&&c.params.push(`sku=${this._skuToken}`),this._makeAPIURL(c,d)}canonicalizeTileURL(i,n){const a=Br(i);if(!a.path.match(/^(\/v4\/|\/(raster|rasterarrays)\/v1\/)/)||!a.path.match(/\.[\w]+$/))return i;let c="mapbox://";a.path.match(/^\/raster\/v1\//)?c+=`raster/${a.path.replace(`/${P.RASTER_URL_PREFIX}/`,"")}`:a.path.match(/^\/rasterarrays\/v1\//)?c+=`rasterarrays/${a.path.replace(`/${P.RASTERARRAYS_URL_PREFIX}/`,"")}`:c+=`tiles/${a.path.replace(`/${P.TILE_URL_VERSION}/`,"")}`;let d=a.params;return n&&(d=d.filter(m=>!m.match(/^access_token=/))),d.length&&(c+=`?${d.join("&")}`),c}canonicalizeTileset(i,n){const a=!!n&&U(n),c=[];for(const d of i.tiles||[])N(d)?c.push(this.canonicalizeTileURL(d,a)):c.push(d);return c}_makeAPIURL(i,n){const a="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",c=Br(P.API_URL);if(i.protocol=c.protocol,i.authority=c.authority,i.protocol==="http"){const d=i.params.indexOf("secure");d>=0&&i.params.splice(d,1)}if(c.path!=="/"&&(i.path=`${c.path}${i.path}`),!P.REQUIRE_ACCESS_TOKEN)return en(i);if(n=n||P.ACCESS_TOKEN,!this._silenceAuthErrors){if(!n)throw new Error(`An API access token is required to use Mapbox GL. ${a}`);if(n[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${a}`)}return i.params=i.params.filter(d=>d.indexOf("access_token")===-1),i.params.push(`access_token=${n||""}`),en(i)}},s.db=function(i,n){n?ls.add(i):ls.delete(i)},s.dc=Bn,s.dd=Za,s.de=Sc,s.df=Ht,s.dg=pn,s.dh=function(i){ls.delete(i)},s.di=ho,s.dj=Vi,s.dk=w,s.dl=function(i,n){ft=i,Qt=n},s.dm=function(i,n,a=!1){if(Ia===W_||Ia===Z_||Ia===q_)throw new Error("setRTLTextPlugin cannot be called multiple times.");Xu=Tt.resolveURL(i),Ia=W_,K_=n,X_(),a||J_()},s.dn=Yu,s.dp=function(){cx().acquire(KT)},s.dq=function(){const i=$y;i&&(i.isPreloaded()&&i.numActive()===1?(i.release(KT),$y=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},s.dr=jy,s.ds=function(i){const n=Vr();if(!n)return;const a=n.delete(Xt);i&&a.catch(i).then(()=>i())},s.dt=Fy,s.du=p4,s.dv=function(i){XT=Tt.resolveURL(i),Um||(Um=new jm(cx(),new On)),Um.broadcast("setDracoUrl",XT)},s.dw=m4,s.dx=function(i){$m=Tt.resolveURL(i),Um||(Um=new jm(cx(),new On)),Um.broadcast("setMeshoptUrl",$m)},s.dy=Kt,s.dz=lf,s.e=Wt,s.f=Tt,s.g=function(i,n){return lt(Wt(i,{type:"json"}),n)},s.h=Gs,s.i=Dn,s.j=cd,s.k=Vc,s.l=function(i){return fetch(i).then(n=>n.arrayBuffer()).then(n=>x4(n,0,i))},s.m=WB,s.n=Ed,s.o=Ld,s.p=zz,s.q=dm,s.r=fm,s.s=$_,s.t=Uu,s.u=kd,s.v=Gi,s.w=Er,s.x=Bl,s.z=ty}),p(["./shared"],function(s){function w(dt){const pe=dt?dt.url.toString():void 0;return pe?performance.getEntriesByName(pe):[]}function I(dt){if(typeof dt=="number"||typeof dt=="boolean"||typeof dt=="string"||dt==null)return JSON.stringify(dt);if(Array.isArray(dt)){let we="[";for(const ze of dt)we+=`${I(ze)},`;return`${we}]`}let pe="{";for(const we of Object.keys(dt).sort())pe+=`${we}:${I(dt[we])},`;return`${pe}}`}function P(dt){let pe="";for(const we of s.b2)pe+=`/${I(dt[we])}`;return pe}class N{constructor(pe){this.keyCache={},this._layers={},this._layerConfigs={},pe&&this.replace(pe)}replace(pe,we){this._layerConfigs={},this._layers={},this.update(pe,[],we)}update(pe,we,ze){this._options=ze;for(const gt of pe)this._layerConfigs[gt.id]=gt,(this._layers[gt.id]=s.c2(gt,this.scope,this._options)).compileFilter(),this.keyCache[gt.id]&&delete this.keyCache[gt.id];for(const gt of we)delete this.keyCache[gt],delete this._layerConfigs[gt],delete this._layers[gt];this.familiesBySource={};const ut=function(gt,Tt){const Xt={};for(let Qt=0;Qt<gt.length;Qt++){const qt=Tt&&Tt[gt[Qt].id]||P(gt[Qt]);Tt&&(Tt[gt[Qt].id]=qt);let er=Xt[qt];er||(er=Xt[qt]=[]),er.push(gt[Qt])}const ft=[];for(const Qt in Xt)ft.push(Xt[Qt]);return ft}(s.a$(this._layerConfigs),this.keyCache);for(const gt of ut){const Tt=gt.map(Vr=>this._layers[Vr.id]),Xt=Tt[0];if(Xt.visibility==="none")continue;const ft=Xt.source||"";let Qt=this.familiesBySource[ft];Qt||(Qt=this.familiesBySource[ft]={});const qt=Xt.sourceLayer||"_geojsonTileLayer";let er=Qt[qt];er||(er=Qt[qt]=[]),er.push(Tt)}}}const U=1*s.dA;class X{constructor(pe){const we={},ze=[];for(const Xt in pe){const ft=pe[Xt],Qt=we[Xt]={};for(const qt in ft.glyphs){const er=ft.glyphs[+qt];if(!er||er.bitmap.width===0||er.bitmap.height===0)continue;const Vr=er.metrics.localGlyph?U:1,Rn={x:0,y:0,w:er.bitmap.width+2*Vr,h:er.bitmap.height+2*Vr};ze.push(Rn),Qt[qt]=Rn}}const{w:ut,h:gt}=s.p(ze),Tt=new s.dz({width:ut||1,height:gt||1});for(const Xt in pe){const ft=pe[Xt];for(const Qt in ft.glyphs){const qt=ft.glyphs[+Qt];if(!qt||qt.bitmap.width===0||qt.bitmap.height===0)continue;const er=we[Xt][Qt],Vr=qt.metrics.localGlyph?U:1;s.dz.copy(qt.bitmap,Tt,{x:0,y:0},{x:er.x+Vr,y:er.y+Vr},qt.bitmap)}}this.image=Tt,this.positions=we}}s.dy(X,"GlyphAtlas");class Q{constructor(pe){this.tileID=new s.am(pe.tileID.overscaledZ,pe.tileID.wrap,pe.tileID.canonical.z,pe.tileID.canonical.x,pe.tileID.canonical.y),this.tileZoom=pe.tileZoom,this.uid=pe.uid,this.zoom=pe.zoom,this.canonical=pe.tileID.canonical,this.pixelRatio=pe.pixelRatio,this.tileSize=pe.tileSize,this.source=pe.source,this.scope=pe.scope,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=pe.showCollisionBoxes,this.collectResourceTiming=!!pe.collectResourceTiming,this.promoteId=pe.promoteId,this.isSymbolTile=pe.isSymbolTile,this.tileTransform=s.as(pe.tileID.canonical,pe.projection),this.projection=pe.projection,this.brightness=pe.brightness,this.extraShadowCaster=!!pe.extraShadowCaster}parse(pe,we,ze,ut,gt){this.status="parsing",this.data=pe,this.collisionBoxArray=new s.aD;const Tt=new s.dB(Object.keys(pe.layers).sort()),Xt=new s.dC(this.tileID,this.promoteId);Xt.bucketLayerIDs=[];const ft={},Qt=new s.dD(256,256),qt={featureIndex:Xt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:Qt,availableImages:ze,brightness:this.brightness},er=we.familiesBySource[this.source];for(const Pn in er){const Zn=pe.layers[Pn];if(!Zn)continue;let Qi=!1,Xn=!1,zo=!1;for(const zi of er[Pn])zi[0].type==="symbol"?Qi=!0:Xn=!0,zi[0].is3D()&&zi[0].type!=="model"&&(zo=!0);if(this.extraShadowCaster&&!zo||this.isSymbolTile===!0&&!Qi||this.isSymbolTile===!1&&!Xn)continue;Zn.version===1&&s.w(`Vector tile source "${this.source}" layer "${Pn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const co=Tt.encode(Pn),Xo=[];for(let zi=0;zi<Zn.length;zi++){const Ii=Zn.feature(zi),lt=Xt.getId(Ii,Pn);Xo.push({feature:Ii,id:lt,index:zi,sourceLayerIndex:co})}for(const zi of er[Pn]){const Ii=zi[0];(!this.extraShadowCaster||Ii.is3D()&&Ii.type!=="model")&&(this.isSymbolTile!==void 0&&Ii.type==="symbol"!==this.isSymbolTile||Ii.minzoom&&this.zoom<Math.floor(Ii.minzoom)||Ii.maxzoom&&this.zoom>=Ii.maxzoom||Ii.visibility!=="none"&&(J(zi,this.zoom,qt.brightness,ze),(ft[Ii.id]=Ii.createBucket({index:Xt.bucketLayerIDs.length,layers:zi,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:co,sourceID:this.source,projection:this.projection.spec})).populate(Xo,qt,this.tileID.canonical,this.tileTransform),Xt.bucketLayerIDs.push(zi.map(lt=>lt.id))))}}let Vr,Rn,Kn,In;Qt.trim();const vn={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},Bn=()=>{if(Vr)return this.status="done",gt(Vr);if(this.extraShadowCaster)this.status="done",gt(null,{buckets:s.a$(ft).filter(Pn=>!Pn.isEmpty()),featureIndex:Xt,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:qt.brightness,glyphMap:null,iconMap:null,glyphPositions:null});else if(Rn&&Kn&&In){const Pn=new X(Rn),Zn=new s.dF(Kn,In);for(const Qi in ft){const Xn=ft[Qi];Xn instanceof s.aE?(J(Xn.layers,this.zoom,qt.brightness,ze),s.dG(Xn,Rn,Pn.positions,Kn,Zn.iconPositions,this.showCollisionBoxes,ze,this.tileID.canonical,this.tileZoom,this.projection,this.brightness)):Xn.hasPattern&&(Xn instanceof s.aK||Xn instanceof s.aL||Xn instanceof s.cH)&&(J(Xn.layers,this.zoom,qt.brightness,ze),Xn.addFeatures(qt,this.tileID.canonical,Zn.patternPositions,ze,this.tileTransform,this.brightness))}this.status="done",gt(null,{buckets:s.a$(ft).filter(Qi=>!Qi.isEmpty()),featureIndex:Xt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Pn.image,lineAtlas:Qt,imageAtlas:Zn,brightness:qt.brightness})}};if(!this.extraShadowCaster){const Pn=s.dE(qt.glyphDependencies,Xn=>Object.keys(Xn).map(Number));Object.keys(Pn).length?ut.send("getGlyphs",{uid:this.uid,stacks:Pn,scope:this.scope},(Xn,zo)=>{Vr||(Vr=Xn,Rn=zo,Bn())},void 0,!1,vn):Rn={};const Zn=Object.keys(qt.iconDependencies);Zn.length?ut.send("getImages",{icons:Zn,source:this.source,scope:this.scope,tileID:this.tileID,type:"icons"},(Xn,zo)=>{Vr||(Vr=Xn,Kn=zo,Bn())},void 0,!1,vn):Kn={};const Qi=Object.keys(qt.patternDependencies);Qi.length?ut.send("getImages",{icons:Qi,source:this.source,scope:this.scope,tileID:this.tileID,type:"patterns"},(Xn,zo)=>{Vr||(Vr=Xn,In=zo,Bn())},void 0,!1,vn):In={}}Bn()}}function J(dt,pe,we,ze){const ut=new s.K(pe,{brightness:we});for(const gt of dt)gt.recalculate(ut,ze)}class Z extends s.E{constructor(pe,we,ze,ut,gt,Tt){super(),this.actor=pe,this.layerIndex=we,this.availableImages=ze,this.loadVectorData=gt||s.ah,this.loading={},this.loaded={},this.deduped=new s.af(pe.scheduler),this.isSpriteLoaded=ut,this.scheduler=pe.scheduler,this.brightness=Tt}loadTile(pe,we){const ze=pe.uid,ut=pe&&pe.request,gt=ut&&ut.collectResourceTiming,Tt=this.loading[ze]=new Q(pe);Tt.abort=this.loadVectorData(pe,(Xt,ft)=>{const Qt=!this.loading[ze];if(delete this.loading[ze],Qt||Xt||!ft)return Tt.status="done",Qt||(this.loaded[ze]=Tt),we(Xt);const qt=ft.rawData,er={};ft.expires&&(er.expires=ft.expires),ft.cacheControl&&(er.cacheControl=ft.cacheControl),Tt.vectorTile=ft.vectorTile||new s.dH(new s.dI(qt));const Vr=()=>{Tt.parse(Tt.vectorTile,this.layerIndex,this.availableImages,this.actor,(Rn,Kn)=>{if(Rn||!Kn)return we(Rn);const In={};if(gt){const vn=w(ut);vn.length>0&&(In.resourceTiming=JSON.parse(JSON.stringify(vn)))}we(null,s.e({rawTileData:qt.slice(0)},Kn,er,In))})};this.isSpriteLoaded?Vr():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(Vr,{type:"parseTile",isSymbolTile:pe.isSymbolTile,zoom:pe.tileZoom}):Vr()}),this.loaded=this.loaded||{},this.loaded[ze]=Tt})}reloadTile(pe,we){const ze=this.loaded,ut=pe.uid,gt=this;if(ze&&ze[ut]){const Tt=ze[ut];Tt.showCollisionBoxes=pe.showCollisionBoxes,Tt.projection=pe.projection,Tt.brightness=pe.brightness,Tt.tileTransform=s.as(pe.tileID.canonical,pe.projection),Tt.extraShadowCaster=pe.extraShadowCaster;const Xt=(ft,Qt)=>{const qt=Tt.reloadCallback;qt&&(delete Tt.reloadCallback,Tt.parse(Tt.vectorTile,gt.layerIndex,this.availableImages,gt.actor,qt)),we(ft,Qt)};Tt.status==="parsing"?Tt.reloadCallback=Xt:Tt.status==="done"&&(Tt.vectorTile?Tt.parse(Tt.vectorTile,this.layerIndex,this.availableImages,this.actor,Xt):Xt())}else we(null,void 0)}abortTile(pe,we){const ze=pe.uid,ut=this.loading[ze];ut&&(ut.abort&&ut.abort(),delete this.loading[ze]),we()}removeTile(pe,we){const ze=this.loaded,ut=pe.uid;ze&&ze[ut]&&delete ze[ut],we()}}class H{loadTile(pe,we){const{uid:ze,encoding:ut,rawImageData:gt,padding:Tt}=pe,Xt=ImageBitmap&&gt instanceof ImageBitmap?this.getImageData(gt,Tt):gt;we(null,new s.dJ(ze,Xt,ut,Tt<1))}getImageData(pe,we){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(pe.width,pe.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=pe.width,this.offscreenCanvas.height=pe.height,this.offscreenCanvasContext.drawImage(pe,0,0,pe.width,pe.height);const ze=this.offscreenCanvasContext.getImageData(-we,-we,pe.width+2*we,pe.height+2*we);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),ze}}class K{decodeRasterArray({task:pe,buffer:we},ze){s.aZ.performDecoding(we,pe).then(ut=>{ze(null,ut)},ut=>{ze(ut)})}}function ee(dt,pe){if(dt.length!==0){se(dt[0],pe);for(var we=1;we<dt.length;we++)se(dt[we],!pe)}}function se(dt,pe){for(var we=0,ze=0,ut=0,gt=dt.length,Tt=gt-1;ut<gt;Tt=ut++){var Xt=(dt[ut][0]-dt[Tt][0])*(dt[Tt][1]+dt[ut][1]),ft=we+Xt;ze+=Math.abs(we)>=Math.abs(Xt)?we-ft+Xt:Xt-ft+we,we=ft}we+ze>=0!=!!pe&&dt.reverse()}var me=s.dK(function dt(pe,we){var ze,ut=pe&&pe.type;if(ut==="FeatureCollection")for(ze=0;ze<pe.features.length;ze++)dt(pe.features[ze],we);else if(ut==="GeometryCollection")for(ze=0;ze<pe.geometries.length;ze++)dt(pe.geometries[ze],we);else if(ut==="Feature")dt(pe.geometry,we);else if(ut==="Polygon")ee(pe.coordinates,we);else if(ut==="MultiPolygon")for(ze=0;ze<pe.coordinates.length;ze++)ee(pe.coordinates[ze],we);return pe});const Ce=s.dL.prototype.toGeoJSON;let Ae=class{constructor(dt){this._feature=dt,this.extent=s.V,this.type=dt.type,this.properties=dt.tags,"id"in dt&&!isNaN(dt.id)&&(this.id=parseInt(dt.id,10))}loadGeometry(){if(this._feature.type===1){const dt=[];for(const pe of this._feature.geometry)dt.push([new s.P(pe[0],pe[1])]);return dt}{const dt=[];for(const pe of this._feature.geometry){const we=[];for(const ze of pe)we.push(new s.P(ze[0],ze[1]));dt.push(we)}return dt}}toGeoJSON(dt,pe,we){return Ce.call(this,dt,pe,we)}},De=class{constructor(dt){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=s.V,this.length=dt.length,this._features=dt}feature(dt){return new Ae(this._features[dt])}};var qe={exports:{}},je=s.dN,Oe=s.dM.VectorTileFeature,ct=ht;function ht(dt,pe){this.options=pe||{},this.features=dt,this.length=dt.length}function We(dt,pe){this.id=typeof dt.id=="number"?dt.id:void 0,this.type=dt.type,this.rawGeometry=dt.type===1?[dt.geometry]:dt.geometry,this.properties=dt.tags,this.extent=pe||4096}ht.prototype.feature=function(dt){return new We(this.features[dt],this.options.extent)},We.prototype.loadGeometry=function(){var dt=this.rawGeometry;this.geometry=[];for(var pe=0;pe<dt.length;pe++){for(var we=dt[pe],ze=[],ut=0;ut<we.length;ut++)ze.push(new je(we[ut][0],we[ut][1]));this.geometry.push(ze)}return this.geometry},We.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var dt=this.geometry,pe=1/0,we=-1/0,ze=1/0,ut=-1/0,gt=0;gt<dt.length;gt++)for(var Tt=dt[gt],Xt=0;Xt<Tt.length;Xt++){var ft=Tt[Xt];pe=Math.min(pe,ft.x),we=Math.max(we,ft.x),ze=Math.min(ze,ft.y),ut=Math.max(ut,ft.y)}return[pe,ze,we,ut]},We.prototype.toGeoJSON=Oe.prototype.toGeoJSON;var Je=s.dO,St=ct;function Le(dt){var pe=new Je;return function(we,ze){for(var ut in we.layers)ze.writeMessage(3,Nt,we.layers[ut])}(dt,pe),pe.finish()}function Nt(dt,pe){var we;pe.writeVarintField(15,dt.version||1),pe.writeStringField(1,dt.name||""),pe.writeVarintField(5,dt.extent||4096);var ze={keys:[],values:[],keycache:{},valuecache:{}};for(we=0;we<dt.length;we++)ze.feature=dt.feature(we),pe.writeMessage(2,xt,ze);var ut=ze.keys;for(we=0;we<ut.length;we++)pe.writeStringField(3,ut[we]);var gt=ze.values;for(we=0;we<gt.length;we++)pe.writeMessage(4,Wr,gt[we])}function xt(dt,pe){var we=dt.feature;we.id!==void 0&&pe.writeVarintField(1,we.id),pe.writeMessage(2,$t,dt),pe.writeVarintField(3,we.type),pe.writeMessage(4,Hr,we)}function $t(dt,pe){var we=dt.feature,ze=dt.keys,ut=dt.values,gt=dt.keycache,Tt=dt.valuecache;for(var Xt in we.properties){var ft=we.properties[Xt],Qt=gt[Xt];if(ft!==null){Qt===void 0&&(ze.push(Xt),gt[Xt]=Qt=ze.length-1),pe.writeVarint(Qt);var qt=typeof ft;qt!=="string"&&qt!=="boolean"&&qt!=="number"&&(ft=JSON.stringify(ft));var er=qt+":"+ft,Vr=Tt[er];Vr===void 0&&(ut.push(ft),Tt[er]=Vr=ut.length-1),pe.writeVarint(Vr)}}}function Wt(dt,pe){return(pe<<3)+(7&dt)}function Tr(dt){return dt<<1^dt>>31}function Hr(dt,pe){for(var we=dt.loadGeometry(),ze=dt.type,ut=0,gt=0,Tt=we.length,Xt=0;Xt<Tt;Xt++){var ft=we[Xt],Qt=1;ze===1&&(Qt=ft.length),pe.writeVarint(Wt(1,Qt));for(var qt=ze===3?ft.length-1:ft.length,er=0;er<qt;er++){er===1&&ze!==1&&pe.writeVarint(Wt(2,qt-1));var Vr=ft[er].x-ut,Rn=ft[er].y-gt;pe.writeVarint(Tr(Vr)),pe.writeVarint(Tr(Rn)),ut+=Vr,gt+=Rn}ze===3&&pe.writeVarint(Wt(7,1))}}function Wr(dt,pe){var we=typeof dt;we==="string"?pe.writeStringField(1,dt):we==="boolean"?pe.writeBooleanField(7,dt):we==="number"&&(dt%1!=0?pe.writeDoubleField(3,dt):dt<0?pe.writeSVarintField(6,dt):pe.writeVarintField(5,dt))}qe.exports=Le,qe.exports.fromVectorTileJs=Le,qe.exports.fromGeojsonVt=function(dt,pe){pe=pe||{};var we={};for(var ze in dt)we[ze]=new St(dt[ze].features,pe),we[ze].name=ze,we[ze].version=pe.version,we[ze].extent=pe.extent;return Le({layers:we})},qe.exports.GeoJSONWrapper=St;var zr=s.dK(qe.exports);const jn={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:dt=>dt},Ti=Math.fround||(ur=new Float32Array(1),dt=>(ur[0]=+dt,ur[0]));var ur;const br=3,Ur=5,kt=6;class ii{constructor(pe){this.options=Object.assign(Object.create(jn),pe),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(pe){const{log:we,minZoom:ze,maxZoom:ut}=this.options;we&&console.time("total time");const gt=`prepare ${pe.length} points`;we&&console.time(gt),this.points=pe;const Tt=[];for(let ft=0;ft<pe.length;ft++){const Qt=pe[ft];if(!Qt.geometry)continue;const[qt,er]=Qt.geometry.coordinates,Vr=Ti(ei(qt)),Rn=Ti(vi(er));Tt.push(Vr,Rn,1/0,ft,-1,1),this.options.reduce&&Tt.push(0)}let Xt=this.trees[ut+1]=this._createTree(Tt);we&&console.timeEnd(gt);for(let ft=ut;ft>=ze;ft--){const Qt=+Date.now();Xt=this.trees[ft]=this._createTree(this._cluster(Xt,ft)),we&&console.log("z%d: %d clusters in %dms",ft,Xt.numItems,+Date.now()-Qt)}return we&&console.timeEnd("total time"),this}getClusters(pe,we){let ze=((pe[0]+180)%360+360)%360-180;const ut=Math.max(-90,Math.min(90,pe[1]));let gt=pe[2]===180?180:((pe[2]+180)%360+360)%360-180;const Tt=Math.max(-90,Math.min(90,pe[3]));if(pe[2]-pe[0]>=360)ze=-180,gt=180;else if(ze>gt){const er=this.getClusters([ze,ut,180,Tt],we),Vr=this.getClusters([-180,ut,gt,Tt],we);return er.concat(Vr)}const Xt=this.trees[this._limitZoom(we)],ft=Xt.range(ei(ze),vi(Tt),ei(gt),vi(ut)),Qt=Xt.data,qt=[];for(const er of ft){const Vr=this.stride*er;qt.push(Qt[Vr+Ur]>1?Er(Qt,Vr,this.clusterProps):this.points[Qt[Vr+br]])}return qt}getChildren(pe){const we=this._getOriginId(pe),ze=this._getOriginZoom(pe),ut="No cluster with the specified id.",gt=this.trees[ze];if(!gt)throw new Error(ut);const Tt=gt.data;if(we*this.stride>=Tt.length)throw new Error(ut);const Xt=this.options.radius/(this.options.extent*Math.pow(2,ze-1)),ft=gt.within(Tt[we*this.stride],Tt[we*this.stride+1],Xt),Qt=[];for(const qt of ft){const er=qt*this.stride;Tt[er+4]===pe&&Qt.push(Tt[er+Ur]>1?Er(Tt,er,this.clusterProps):this.points[Tt[er+br]])}if(Qt.length===0)throw new Error(ut);return Qt}getLeaves(pe,we,ze){const ut=[];return this._appendLeaves(ut,pe,we=we||10,ze=ze||0,0),ut}getTile(pe,we,ze){const ut=this.trees[this._limitZoom(pe)],gt=Math.pow(2,pe),{extent:Tt,radius:Xt}=this.options,ft=Xt/Tt,Qt=(ze-ft)/gt,qt=(ze+1+ft)/gt,er={features:[]};return this._addTileFeatures(ut.range((we-ft)/gt,Qt,(we+1+ft)/gt,qt),ut.data,we,ze,gt,er),we===0&&this._addTileFeatures(ut.range(1-ft/gt,Qt,1,qt),ut.data,gt,ze,gt,er),we===gt-1&&this._addTileFeatures(ut.range(0,Qt,ft/gt,qt),ut.data,-1,ze,gt,er),er.features.length?er:null}getClusterExpansionZoom(pe){let we=this._getOriginZoom(pe)-1;for(;we<=this.options.maxZoom;){const ze=this.getChildren(pe);if(we++,ze.length!==1)break;pe=ze[0].properties.cluster_id}return we}_appendLeaves(pe,we,ze,ut,gt){const Tt=this.getChildren(we);for(const Xt of Tt){const ft=Xt.properties;if(ft&&ft.cluster?gt+ft.point_count<=ut?gt+=ft.point_count:gt=this._appendLeaves(pe,ft.cluster_id,ze,ut,gt):gt<ut?gt++:pe.push(Xt),pe.length===ze)break}return gt}_createTree(pe){const we=new s.bg(pe.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ze=0;ze<pe.length;ze+=this.stride)we.add(pe[ze],pe[ze+1]);return we.finish(),we.data=pe,we}_addTileFeatures(pe,we,ze,ut,gt,Tt){for(const Xt of pe){const ft=Xt*this.stride,Qt=we[ft+Ur]>1;let qt,er,Vr;if(Qt)qt=$n(we,ft,this.clusterProps),er=we[ft],Vr=we[ft+1];else{const In=this.points[we[ft+br]];qt=In.properties;const[vn,Bn]=In.geometry.coordinates;er=ei(vn),Vr=vi(Bn)}const Rn={type:1,geometry:[[Math.round(this.options.extent*(er*gt-ze)),Math.round(this.options.extent*(Vr*gt-ut))]],tags:qt};let Kn;Kn=Qt||this.options.generateId?we[ft+br]:this.points[we[ft+br]].id,Kn!==void 0&&(Rn.id=Kn),Tt.features.push(Rn)}}_limitZoom(pe){return Math.max(this.options.minZoom,Math.min(Math.floor(+pe),this.options.maxZoom+1))}_cluster(pe,we){const{radius:ze,extent:ut,reduce:gt,minPoints:Tt}=this.options,Xt=ze/(ut*Math.pow(2,we)),ft=pe.data,Qt=[],qt=this.stride;for(let er=0;er<ft.length;er+=qt){if(ft[er+2]<=we)continue;ft[er+2]=we;const Vr=ft[er],Rn=ft[er+1],Kn=pe.within(ft[er],ft[er+1],Xt),In=ft[er+Ur];let vn=In;for(const Bn of Kn){const Pn=Bn*qt;ft[Pn+2]>we&&(vn+=ft[Pn+Ur])}if(vn>In&&vn>=Tt){let Bn,Pn=Vr*In,Zn=Rn*In,Qi=-1;const Xn=(er/qt<<5)+(we+1)+this.points.length;for(const zo of Kn){const co=zo*qt;if(ft[co+2]<=we)continue;ft[co+2]=we;const Xo=ft[co+Ur];Pn+=ft[co]*Xo,Zn+=ft[co+1]*Xo,ft[co+4]=Xn,gt&&(Bn||(Bn=this._map(ft,er,!0),Qi=this.clusterProps.length,this.clusterProps.push(Bn)),gt(Bn,this._map(ft,co)))}ft[er+4]=Xn,Qt.push(Pn/vn,Zn/vn,1/0,Xn,-1,vn),gt&&Qt.push(Qi)}else{for(let Bn=0;Bn<qt;Bn++)Qt.push(ft[er+Bn]);if(vn>1)for(const Bn of Kn){const Pn=Bn*qt;if(!(ft[Pn+2]<=we)){ft[Pn+2]=we;for(let Zn=0;Zn<qt;Zn++)Qt.push(ft[Pn+Zn])}}}}return Qt}_getOriginId(pe){return pe-this.points.length>>5}_getOriginZoom(pe){return(pe-this.points.length)%32}_map(pe,we,ze){if(pe[we+Ur]>1){const Tt=this.clusterProps[pe[we+kt]];return ze?Object.assign({},Tt):Tt}const ut=this.points[pe[we+br]].properties,gt=this.options.map(ut);return ze&&gt===ut?Object.assign({},gt):gt}}function Er(dt,pe,we){return{type:"Feature",id:dt[pe+br],properties:$n(dt,pe,we),geometry:{type:"Point",coordinates:[(ze=dt[pe],360*(ze-.5)),Mi(dt[pe+1])]}};var ze}function $n(dt,pe,we){const ze=dt[pe+Ur],ut=ze>=1e4?`${Math.round(ze/1e3)}k`:ze>=1e3?Math.round(ze/100)/10+"k":ze,gt=dt[pe+kt],Tt=gt===-1?{}:Object.assign({},we[gt]);return Object.assign(Tt,{cluster:!0,cluster_id:dt[pe+br],point_count:ze,point_count_abbreviated:ut})}function ei(dt){return dt/360+.5}function vi(dt){const pe=Math.sin(dt*Math.PI/180),we=.5-.25*Math.log((1+pe)/(1-pe))/Math.PI;return we<0?0:we>1?1:we}function Mi(dt){const pe=(180-360*dt)*Math.PI/180;return 360*Math.atan(Math.exp(pe))/Math.PI-90}var Sa={exports:{}};Sa.exports=function(){function dt(lt,at,Qe,It){for(var Et,Rt=It,zt=Qe-at>>1,Dt=Qe-at,Ht=lt[at],Mt=lt[at+1],Br=lt[Qe],en=lt[Qe+1],or=at+3;or<Qe;or+=3){var Nn=pe(lt[or],lt[or+1],Ht,Mt,Br,en);if(Nn>Rt)Et=or,Rt=Nn;else if(Nn===Rt){var ti=Math.abs(or-zt);ti<Dt&&(Et=or,Dt=ti)}}Rt>It&&(Et-at>3&&dt(lt,at,Et,It),lt[Et+2]=Rt,Qe-Et>3&&dt(lt,Et,Qe,It))}function pe(lt,at,Qe,It,Et,Rt){var zt=Et-Qe,Dt=Rt-It;if(zt!==0||Dt!==0){var Ht=((lt-Qe)*zt+(at-It)*Dt)/(zt*zt+Dt*Dt);Ht>1?(Qe=Et,It=Rt):Ht>0&&(Qe+=zt*Ht,It+=Dt*Ht)}return(zt=lt-Qe)*zt+(Dt=at-It)*Dt}function we(lt,at,Qe,It){var Et={id:lt===void 0?null:lt,type:at,geometry:Qe,tags:It,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Rt){var zt=Rt.geometry,Dt=Rt.type;if(Dt==="Point"||Dt==="MultiPoint"||Dt==="LineString")ze(Rt,zt);else if(Dt==="Polygon"||Dt==="MultiLineString")for(var Ht=0;Ht<zt.length;Ht++)ze(Rt,zt[Ht]);else if(Dt==="MultiPolygon")for(Ht=0;Ht<zt.length;Ht++)for(var Mt=0;Mt<zt[Ht].length;Mt++)ze(Rt,zt[Ht][Mt])}(Et),Et}function ze(lt,at){for(var Qe=0;Qe<at.length;Qe+=3)lt.minX=Math.min(lt.minX,at[Qe]),lt.minY=Math.min(lt.minY,at[Qe+1]),lt.maxX=Math.max(lt.maxX,at[Qe]),lt.maxY=Math.max(lt.maxY,at[Qe+1])}function ut(lt,at,Qe,It){if(at.geometry){var Et=at.geometry.coordinates,Rt=at.geometry.type,zt=Math.pow(Qe.tolerance/((1<<Qe.maxZoom)*Qe.extent),2),Dt=[],Ht=at.id;if(Qe.promoteId?Ht=at.properties[Qe.promoteId]:Qe.generateId&&(Ht=It||0),Rt==="Point")gt(Et,Dt);else if(Rt==="MultiPoint")for(var Mt=0;Mt<Et.length;Mt++)gt(Et[Mt],Dt);else if(Rt==="LineString")Tt(Et,Dt,zt,!1);else if(Rt==="MultiLineString"){if(Qe.lineMetrics){for(Mt=0;Mt<Et.length;Mt++)Tt(Et[Mt],Dt=[],zt,!1),lt.push(we(Ht,"LineString",Dt,at.properties));return}Xt(Et,Dt,zt,!1)}else if(Rt==="Polygon")Xt(Et,Dt,zt,!0);else{if(Rt!=="MultiPolygon"){if(Rt==="GeometryCollection"){for(Mt=0;Mt<at.geometry.geometries.length;Mt++)ut(lt,{id:Ht,geometry:at.geometry.geometries[Mt],properties:at.properties},Qe,It);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Mt=0;Mt<Et.length;Mt++){var Br=[];Xt(Et[Mt],Br,zt,!0),Dt.push(Br)}}lt.push(we(Ht,Rt,Dt,at.properties))}}function gt(lt,at){at.push(ft(lt[0])),at.push(Qt(lt[1])),at.push(0)}function Tt(lt,at,Qe,It){for(var Et,Rt,zt=0,Dt=0;Dt<lt.length;Dt++){var Ht=ft(lt[Dt][0]),Mt=Qt(lt[Dt][1]);at.push(Ht),at.push(Mt),at.push(0),Dt>0&&(zt+=It?(Et*Mt-Ht*Rt)/2:Math.sqrt(Math.pow(Ht-Et,2)+Math.pow(Mt-Rt,2))),Et=Ht,Rt=Mt}var Br=at.length-3;at[2]=1,dt(at,0,Br,Qe),at[Br+2]=1,at.size=Math.abs(zt),at.start=0,at.end=at.size}function Xt(lt,at,Qe,It){for(var Et=0;Et<lt.length;Et++){var Rt=[];Tt(lt[Et],Rt,Qe,It),at.push(Rt)}}function ft(lt){return lt/360+.5}function Qt(lt){var at=Math.sin(lt*Math.PI/180),Qe=.5-.25*Math.log((1+at)/(1-at))/Math.PI;return Qe<0?0:Qe>1?1:Qe}function qt(lt,at,Qe,It,Et,Rt,zt,Dt){if(It/=at,Rt>=(Qe/=at)&&zt<It)return lt;if(zt<Qe||Rt>=It)return null;for(var Ht=[],Mt=0;Mt<lt.length;Mt++){var Br=lt[Mt],en=Br.geometry,or=Br.type,Nn=Et===0?Br.minX:Br.minY,ti=Et===0?Br.maxX:Br.maxY;if(Nn>=Qe&&ti<It)Ht.push(Br);else if(!(ti<Qe||Nn>=It)){var Fn=[];if(or==="Point"||or==="MultiPoint")er(en,Fn,Qe,It,Et);else if(or==="LineString")Vr(en,Fn,Qe,It,Et,!1,Dt.lineMetrics);else if(or==="MultiLineString")Kn(en,Fn,Qe,It,Et,!1);else if(or==="Polygon")Kn(en,Fn,Qe,It,Et,!0);else if(or==="MultiPolygon")for(var Ni=0;Ni<en.length;Ni++){var Vi=[];Kn(en[Ni],Vi,Qe,It,Et,!0),Vi.length&&Fn.push(Vi)}if(Fn.length){if(Dt.lineMetrics&&or==="LineString"){for(Ni=0;Ni<Fn.length;Ni++)Ht.push(we(Br.id,or,Fn[Ni],Br.tags));continue}or!=="LineString"&&or!=="MultiLineString"||(Fn.length===1?(or="LineString",Fn=Fn[0]):or="MultiLineString"),or!=="Point"&&or!=="MultiPoint"||(or=Fn.length===3?"Point":"MultiPoint"),Ht.push(we(Br.id,or,Fn,Br.tags))}}}return Ht.length?Ht:null}function er(lt,at,Qe,It,Et){for(var Rt=0;Rt<lt.length;Rt+=3){var zt=lt[Rt+Et];zt>=Qe&&zt<=It&&(at.push(lt[Rt]),at.push(lt[Rt+1]),at.push(lt[Rt+2]))}}function Vr(lt,at,Qe,It,Et,Rt,zt){for(var Dt,Ht,Mt=Rn(lt),Br=Et===0?vn:Bn,en=lt.start,or=0;or<lt.length-3;or+=3){var Nn=lt[or],ti=lt[or+1],Fn=lt[or+2],Ni=lt[or+3],Vi=lt[or+4],pn=Et===0?Nn:ti,ha=Et===0?Ni:Vi,Za=!1;zt&&(Dt=Math.sqrt(Math.pow(Nn-Ni,2)+Math.pow(ti-Vi,2))),pn<Qe?ha>Qe&&(Ht=Br(Mt,Nn,ti,Ni,Vi,Qe),zt&&(Mt.start=en+Dt*Ht)):pn>It?ha<It&&(Ht=Br(Mt,Nn,ti,Ni,Vi,It),zt&&(Mt.start=en+Dt*Ht)):In(Mt,Nn,ti,Fn),ha<Qe&&pn>=Qe&&(Ht=Br(Mt,Nn,ti,Ni,Vi,Qe),Za=!0),ha>It&&pn<=It&&(Ht=Br(Mt,Nn,ti,Ni,Vi,It),Za=!0),!Rt&&Za&&(zt&&(Mt.end=en+Dt*Ht),at.push(Mt),Mt=Rn(lt)),zt&&(en+=Dt)}var ho=lt.length-3;Nn=lt[ho],ti=lt[ho+1],Fn=lt[ho+2],(pn=Et===0?Nn:ti)>=Qe&&pn<=It&&In(Mt,Nn,ti,Fn),ho=Mt.length-3,Rt&&ho>=3&&(Mt[ho]!==Mt[0]||Mt[ho+1]!==Mt[1])&&In(Mt,Mt[0],Mt[1],Mt[2]),Mt.length&&at.push(Mt)}function Rn(lt){var at=[];return at.size=lt.size,at.start=lt.start,at.end=lt.end,at}function Kn(lt,at,Qe,It,Et,Rt){for(var zt=0;zt<lt.length;zt++)Vr(lt[zt],at,Qe,It,Et,Rt,!1)}function In(lt,at,Qe,It){lt.push(at),lt.push(Qe),lt.push(It)}function vn(lt,at,Qe,It,Et,Rt){var zt=(Rt-at)/(It-at);return lt.push(Rt),lt.push(Qe+(Et-Qe)*zt),lt.push(1),zt}function Bn(lt,at,Qe,It,Et,Rt){var zt=(Rt-Qe)/(Et-Qe);return lt.push(at+(It-at)*zt),lt.push(Rt),lt.push(1),zt}function Pn(lt,at){for(var Qe=[],It=0;It<lt.length;It++){var Et,Rt=lt[It],zt=Rt.type;if(zt==="Point"||zt==="MultiPoint"||zt==="LineString")Et=Zn(Rt.geometry,at);else if(zt==="MultiLineString"||zt==="Polygon"){Et=[];for(var Dt=0;Dt<Rt.geometry.length;Dt++)Et.push(Zn(Rt.geometry[Dt],at))}else if(zt==="MultiPolygon")for(Et=[],Dt=0;Dt<Rt.geometry.length;Dt++){for(var Ht=[],Mt=0;Mt<Rt.geometry[Dt].length;Mt++)Ht.push(Zn(Rt.geometry[Dt][Mt],at));Et.push(Ht)}Qe.push(we(Rt.id,zt,Et,Rt.tags))}return Qe}function Zn(lt,at){var Qe=[];Qe.size=lt.size,lt.start!==void 0&&(Qe.start=lt.start,Qe.end=lt.end);for(var It=0;It<lt.length;It+=3)Qe.push(lt[It]+at,lt[It+1],lt[It+2]);return Qe}function Qi(lt,at){if(lt.transformed)return lt;var Qe,It,Et,Rt=1<<lt.z,zt=lt.x,Dt=lt.y;for(Qe=0;Qe<lt.features.length;Qe++){var Ht=lt.features[Qe],Mt=Ht.geometry,Br=Ht.type;if(Ht.geometry=[],Br===1)for(It=0;It<Mt.length;It+=2)Ht.geometry.push(Xn(Mt[It],Mt[It+1],at,Rt,zt,Dt));else for(It=0;It<Mt.length;It++){var en=[];for(Et=0;Et<Mt[It].length;Et+=2)en.push(Xn(Mt[It][Et],Mt[It][Et+1],at,Rt,zt,Dt));Ht.geometry.push(en)}}return lt.transformed=!0,lt}function Xn(lt,at,Qe,It,Et,Rt){return[Math.round(Qe*(lt*It-Et)),Math.round(Qe*(at*It-Rt))]}function zo(lt,at,Qe,It,Et){for(var Rt=at===Et.maxZoom?0:Et.tolerance/((1<<at)*Et.extent),zt={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Qe,y:It,z:at,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Dt=0;Dt<lt.length;Dt++){zt.numFeatures++,co(zt,lt[Dt],Rt,Et);var Ht=lt[Dt].minX,Mt=lt[Dt].minY,Br=lt[Dt].maxX,en=lt[Dt].maxY;Ht<zt.minX&&(zt.minX=Ht),Mt<zt.minY&&(zt.minY=Mt),Br>zt.maxX&&(zt.maxX=Br),en>zt.maxY&&(zt.maxY=en)}return zt}function co(lt,at,Qe,It){var Et=at.geometry,Rt=at.type,zt=[];if(Rt==="Point"||Rt==="MultiPoint")for(var Dt=0;Dt<Et.length;Dt+=3)zt.push(Et[Dt]),zt.push(Et[Dt+1]),lt.numPoints++,lt.numSimplified++;else if(Rt==="LineString")Xo(zt,Et,lt,Qe,!1,!1);else if(Rt==="MultiLineString"||Rt==="Polygon")for(Dt=0;Dt<Et.length;Dt++)Xo(zt,Et[Dt],lt,Qe,Rt==="Polygon",Dt===0);else if(Rt==="MultiPolygon")for(var Ht=0;Ht<Et.length;Ht++){var Mt=Et[Ht];for(Dt=0;Dt<Mt.length;Dt++)Xo(zt,Mt[Dt],lt,Qe,!0,Dt===0)}if(zt.length){var Br=at.tags||null;if(Rt==="LineString"&&It.lineMetrics){for(var en in Br={},at.tags)Br[en]=at.tags[en];Br.mapbox_clip_start=Et.start/Et.size,Br.mapbox_clip_end=Et.end/Et.size}var or={geometry:zt,type:Rt==="Polygon"||Rt==="MultiPolygon"?3:Rt==="LineString"||Rt==="MultiLineString"?2:1,tags:Br};at.id!==null&&(or.id=at.id),lt.features.push(or)}}function Xo(lt,at,Qe,It,Et,Rt){var zt=It*It;if(It>0&&at.size<(Et?zt:It))Qe.numPoints+=at.length/3;else{for(var Dt=[],Ht=0;Ht<at.length;Ht+=3)(It===0||at[Ht+2]>zt)&&(Qe.numSimplified++,Dt.push(at[Ht]),Dt.push(at[Ht+1])),Qe.numPoints++;Et&&function(Mt,Br){for(var en=0,or=0,Nn=Mt.length,ti=Nn-2;or<Nn;ti=or,or+=2)en+=(Mt[or]-Mt[ti])*(Mt[or+1]+Mt[ti+1]);if(en>0===Br)for(or=0,Nn=Mt.length;or<Nn/2;or+=2){var Fn=Mt[or],Ni=Mt[or+1];Mt[or]=Mt[Nn-2-or],Mt[or+1]=Mt[Nn-1-or],Mt[Nn-2-or]=Fn,Mt[Nn-1-or]=Ni}}(Dt,Rt),lt.push(Dt)}}function zi(lt,at){var Qe=(at=this.options=function(Et,Rt){for(var zt in Rt)Et[zt]=Rt[zt];return Et}(Object.create(this.options),at)).debug;if(Qe&&console.time("preprocess data"),at.maxZoom<0||at.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(at.promoteId&&at.generateId)throw new Error("promoteId and generateId cannot be used together.");var It=function(Et,Rt){var zt=[];if(Et.type==="FeatureCollection")for(var Dt=0;Dt<Et.features.length;Dt++)ut(zt,Et.features[Dt],Rt,Dt);else ut(zt,Et.type==="Feature"?Et:{geometry:Et},Rt);return zt}(lt,at);this.tiles={},this.tileCoords=[],Qe&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",at.indexMaxZoom,at.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(It=function(Et,Rt){var zt=Rt.buffer/Rt.extent,Dt=Et,Ht=qt(Et,1,-1-zt,zt,0,-1,2,Rt),Mt=qt(Et,1,1-zt,2+zt,0,-1,2,Rt);return(Ht||Mt)&&(Dt=qt(Et,1,-zt,1+zt,0,-1,2,Rt)||[],Ht&&(Dt=Pn(Ht,1).concat(Dt)),Mt&&(Dt=Dt.concat(Pn(Mt,-1)))),Dt}(It,at)).length&&this.splitTile(It,0,0,0),Qe&&(It.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Ii(lt,at,Qe){return 32*((1<<lt)*Qe+at)+lt}return zi.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},zi.prototype.splitTile=function(lt,at,Qe,It,Et,Rt,zt){for(var Dt=[lt,at,Qe,It],Ht=this.options,Mt=Ht.debug;Dt.length;){It=Dt.pop(),Qe=Dt.pop(),at=Dt.pop(),lt=Dt.pop();var Br=1<<at,en=Ii(at,Qe,It),or=this.tiles[en];if(!or&&(Mt>1&&console.time("creation"),or=this.tiles[en]=zo(lt,at,Qe,It,Ht),this.tileCoords.push({z:at,x:Qe,y:It}),Mt)){Mt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",at,Qe,It,or.numFeatures,or.numPoints,or.numSimplified),console.timeEnd("creation"));var Nn="z"+at;this.stats[Nn]=(this.stats[Nn]||0)+1,this.total++}if(or.source=lt,Et){if(at===Ht.maxZoom||at===Et)continue;var ti=1<<Et-at;if(Qe!==Math.floor(Rt/ti)||It!==Math.floor(zt/ti))continue}else if(at===Ht.indexMaxZoom||or.numPoints<=Ht.indexMaxPoints)continue;if(or.source=null,lt.length!==0){Mt>1&&console.time("clipping");var Fn,Ni,Vi,pn,ha,Za,ho=.5*Ht.buffer/Ht.extent,Sc=.5-ho,ls=.5+ho,us=1+ho;Fn=Ni=Vi=pn=null,ha=qt(lt,Br,Qe-ho,Qe+ls,0,or.minX,or.maxX,Ht),Za=qt(lt,Br,Qe+Sc,Qe+us,0,or.minX,or.maxX,Ht),lt=null,ha&&(Fn=qt(ha,Br,It-ho,It+ls,1,or.minY,or.maxY,Ht),Ni=qt(ha,Br,It+Sc,It+us,1,or.minY,or.maxY,Ht),ha=null),Za&&(Vi=qt(Za,Br,It-ho,It+ls,1,or.minY,or.maxY,Ht),pn=qt(Za,Br,It+Sc,It+us,1,or.minY,or.maxY,Ht),Za=null),Mt>1&&console.timeEnd("clipping"),Dt.push(Fn||[],at+1,2*Qe,2*It),Dt.push(Ni||[],at+1,2*Qe,2*It+1),Dt.push(Vi||[],at+1,2*Qe+1,2*It),Dt.push(pn||[],at+1,2*Qe+1,2*It+1)}}},zi.prototype.getTile=function(lt,at,Qe){var It=this.options,Et=It.extent,Rt=It.debug;if(lt<0||lt>24)return null;var zt=1<<lt,Dt=Ii(lt,at=(at%zt+zt)%zt,Qe);if(this.tiles[Dt])return Qi(this.tiles[Dt],Et);Rt>1&&console.log("drilling down to z%d-%d-%d",lt,at,Qe);for(var Ht,Mt=lt,Br=at,en=Qe;!Ht&&Mt>0;)Mt--,Br=Math.floor(Br/2),en=Math.floor(en/2),Ht=this.tiles[Ii(Mt,Br,en)];return Ht&&Ht.source?(Rt>1&&console.log("found parent tile z%d-%d-%d",Mt,Br,en),Rt>1&&console.time("drilling down"),this.splitTile(Ht.source,Mt,Br,en,lt,at,Qe),Rt>1&&console.timeEnd("drilling down"),this.tiles[Dt]?Qi(this.tiles[Dt],Et):null):null},function(lt,at){return new zi(lt,at)}}();var Wn=s.dK(Sa.exports);function Eo(dt,pe){const we=dt.tileID.canonical;if(!this._geoJSONIndex)return pe(null,null);const ze=this._geoJSONIndex.getTile(we.z,we.x,we.y);if(!ze)return pe(null,null);const ut=new De(ze.features);let gt=zr(ut);gt.byteOffset===0&&gt.byteLength===gt.buffer.byteLength||(gt=new Uint8Array(gt)),pe(null,{vectorTile:ut,rawData:gt.buffer})}class Wa extends Z{constructor(pe,we,ze,ut,gt,Tt){super(pe,we,ze,ut,Eo,Tt),gt&&(this.loadGeoJSON=gt)}loadData(pe,we){const ze=pe&&pe.request,ut=ze&&ze.collectResourceTiming;this.loadGeoJSON(pe,(gt,Tt)=>{if(gt||!Tt)return we(gt);if(typeof Tt!="object")return we(new Error(`Input data given to '${pe.source}' is not a valid GeoJSON object.`));{me(Tt,!0);try{if(pe.filter){const ft=s.r(pe.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ft.result==="error")throw new Error(ft.value.map(qt=>`${qt.key}: ${qt.message}`).join(", "));Tt={type:"FeatureCollection",features:Tt.features.filter(qt=>ft.value.evaluate({zoom:0},qt))}}this._geoJSONIndex=pe.cluster?new ii(function({superclusterOptions:ft,clusterProperties:Qt}){if(!Qt||!ft)return ft;const qt={},er={},Vr={accumulated:null,zoom:0},Rn={properties:null},Kn=Object.keys(Qt);for(const In of Kn){const[vn,Bn]=Qt[In],Pn=s.r(Bn),Zn=s.r(typeof vn=="string"?[vn,["accumulated"],["get",In]]:vn);qt[In]=Pn.value,er[In]=Zn.value}return ft.map=In=>{Rn.properties=In;const vn={};for(const Bn of Kn)vn[Bn]=qt[Bn].evaluate(Vr,Rn);return vn},ft.reduce=(In,vn)=>{Rn.properties=vn;for(const Bn of Kn)Vr.accumulated=In[Bn],In[Bn]=er[Bn].evaluate(Vr,Rn)},ft}(pe)).load(Tt.features):Wn(Tt,pe.geojsonVtOptions)}catch(ft){return we(ft)}this.loaded={};const Xt={};if(ut){const ft=w(ze);ft&&(Xt.resourceTiming={},Xt.resourceTiming[pe.source]=JSON.parse(JSON.stringify(ft)))}we(null,Xt)}})}reloadTile(pe,we){const ze=this.loaded;return ze&&ze[pe.uid]?super.reloadTile(pe,we):this.loadTile(pe,we)}loadGeoJSON(pe,we){if(pe.request)s.g(pe.request,we);else{if(typeof pe.data!="string")return we(new Error(`Input data given to '${pe.source}' is not a valid GeoJSON object.`));try{return we(null,JSON.parse(pe.data))}catch{return we(new Error(`Input data given to '${pe.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(pe,we){try{we(null,this._geoJSONIndex.getClusterExpansionZoom(pe.clusterId))}catch(ze){we(ze)}}getClusterChildren(pe,we){try{we(null,this._geoJSONIndex.getChildren(pe.clusterId))}catch(ze){we(ze)}}getClusterLeaves(pe,we){try{we(null,this._geoJSONIndex.getLeaves(pe.clusterId,pe.limit,pe.offset))}catch(ze){we(ze)}}}class Do{constructor(pe,we){this.tileID=new s.am(pe.tileID.overscaledZ,pe.tileID.wrap,pe.tileID.canonical.z,pe.tileID.canonical.x,pe.tileID.canonical.y),this.tileZoom=pe.tileZoom,this.uid=pe.uid,this.zoom=pe.zoom,this.canonical=pe.tileID.canonical,this.pixelRatio=pe.pixelRatio,this.tileSize=pe.tileSize,this.source=pe.source,this.overscaling=this.tileID.overscaleFactor(),this.projection=pe.projection,this.brightness=we}parse(pe,we,ze,ut){this.status="parsing";const gt=new s.am(ze.tileID.overscaledZ,ze.tileID.wrap,ze.tileID.canonical.z,ze.tileID.canonical.x,ze.tileID.canonical.y),Tt={},Xt=we.familiesBySource[ze.source],ft=new s.dC(gt,ze.promoteId);return ft.bucketLayerIDs=[],ft.is3DTile=!0,s.dP(pe).then(Qt=>{if(!Qt)return ut(new Error("Could not parse tile"));const qt=s.dQ(Qt,1/s.bR(ze.tileID.canonical)),er=Qt.json.extensionsUsed&&Qt.json.extensionsUsed.includes("MAPBOX_mesh_features")||Qt.json.asset.extras&&Qt.json.asset.extras.MAPBOX_mesh_features,Vr=Qt.json.extensionsUsed&&Qt.json.extensionsUsed.includes("EXT_meshopt_compression"),Rn=new s.K(this.zoom,{brightness:this.brightness});for(const Kn in Xt)for(const In of Xt[Kn]){const vn=In[0];ft.bucketLayerIDs.push(In.map(Pn=>Pn.id)),vn.recalculate(Rn,[]);const Bn=new s.dR(qt,gt,er,Vr,this.brightness,ft);er||(Bn.needsUpload=!0),Tt[vn.fqid]=Bn,Bn.evaluate(vn)}this.status="done",ut(null,{buckets:Tt,featureIndex:ft})}).catch(Qt=>ut(new Error(Qt.message)))}}class Ta{constructor(pe,we,ze,ut,gt,Tt){this.actor=pe,this.layerIndex=we,this.brightness=Tt,this.loading={},this.loaded={}}loadTile(pe,we){const ze=pe.uid,ut=this.loading[ze]=new Do(pe,this.brightness);s.a_(pe.request,(gt,Tt)=>{const Xt=!this.loading[ze];return delete this.loading[ze],Xt||gt?(ut.status="done",Xt||(this.loaded[ze]=ut),we(gt)):Tt&&Tt.byteLength!==0?void ut.parse(Tt,this.layerIndex,pe,(ft,Qt)=>{ut.status="done",this.loaded=this.loaded||{},this.loaded[ze]=ut,ft||!Qt?we(ft):we(null,Qt)}):(ut.status="done",this.loaded[ze]=ut,we())})}reloadTile(pe,we){const ze=this.loaded,ut=pe.uid;if(ze&&ze[ut]){const gt=ze[ut];gt.projection=pe.projection,gt.brightness=pe.brightness;const Tt=(Xt,ft)=>{gt.reloadCallback&&(delete gt.reloadCallback,this.loadTile(pe,we)),we(Xt,ft)};gt.status==="parsing"?gt.reloadCallback=Tt:gt.status==="done"&&this.loadTile(pe,we)}}abortTile(pe,we){const ze=pe.uid;this.loading[ze]&&delete this.loading[ze],we()}removeTile(pe,we){const ze=this.loaded,ut=pe.uid;ze&&ze[ut]&&delete ze[ut],we()}}class ll{constructor(pe){this.self=pe,this.actor=new s.dS(pe,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=s.bo({name:"mercator"}),this.workerSourceTypes={vector:Z,geojson:Wa,"batched-model":Ta},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(we,ze)=>{if(this.workerSourceTypes[we])throw new Error(`Worker source with name "${we}" already registered.`);this.workerSourceTypes[we]=ze},this.self.registerRTLTextPlugin=we=>{if(s.dT.isParsed())throw new Error("RTL text plugin already registered.");s.dT.applyArabicShaping=we.applyArabicShaping,s.dT.processBidirectionalText=we.processBidirectionalText,s.dT.processStyledBidirectionalText=we.processStyledBidirectionalText}}clearCaches(pe,we,ze){delete this.layerIndexes[pe],delete this.availableImages[pe],delete this.workerSources[pe],delete this.demWorkerSources[pe],delete this.rasterArrayWorkerSource,ze()}checkIfReady(pe,we,ze){ze()}setReferrer(pe,we){this.referrer=we}spriteLoaded(pe,{scope:we,isLoaded:ze}){if(this.isSpriteLoaded[pe]||(this.isSpriteLoaded[pe]={}),this.isSpriteLoaded[pe][we]=ze,this.workerSources[pe]&&this.workerSources[pe][we])for(const ut in this.workerSources[pe][we]){const gt=this.workerSources[pe][we][ut];for(const Tt in gt)gt[Tt]instanceof Z&&(gt[Tt].isSpriteLoaded=ze,gt[Tt].fire(new s.b("isSpriteLoaded")))}}setImages(pe,{scope:we,images:ze},ut){if(this.availableImages[pe]||(this.availableImages[pe]={}),this.availableImages[pe][we]=ze,this.workerSources[pe]&&this.workerSources[pe][we]){for(const gt in this.workerSources[pe][we]){const Tt=this.workerSources[pe][we][gt];for(const Xt in Tt)Tt[Xt].availableImages=ze}ut()}else ut()}setProjection(pe,we){this.projections[pe]=s.bo(we)}setBrightness(pe,we,ze){this.brightness=we,ze()}setLayers(pe,we,ze){this.getLayerIndex(pe,we.scope).replace(we.layers,we.options),ze()}updateLayers(pe,we,ze){this.getLayerIndex(pe,we.scope).update(we.layers,we.removedIds,we.options),ze()}loadTile(pe,we,ze){we.projection=this.projections[pe]||this.defaultProjection,this.getWorkerSource(pe,we.type,we.source,we.scope).loadTile(we,ze)}loadDEMTile(pe,we,ze){this.getDEMWorkerSource(pe,we.source,we.scope).loadTile(we,ze)}decodeRasterArray(pe,we,ze){this.getRasterArrayWorkerSource().decodeRasterArray(we,ze)}reloadTile(pe,we,ze){we.projection=this.projections[pe]||this.defaultProjection,this.getWorkerSource(pe,we.type,we.source,we.scope).reloadTile(we,ze)}abortTile(pe,we,ze){this.getWorkerSource(pe,we.type,we.source,we.scope).abortTile(we,ze)}removeTile(pe,we,ze){this.getWorkerSource(pe,we.type,we.source,we.scope).removeTile(we,ze)}removeSource(pe,we,ze){if(!(this.workerSources[pe]&&this.workerSources[pe][we.scope]&&this.workerSources[pe][we.scope][we.type]&&this.workerSources[pe][we.scope][we.type][we.source]))return;const ut=this.workerSources[pe][we.scope][we.type][we.source];delete this.workerSources[pe][we.scope][we.type][we.source],ut.removeSource!==void 0?ut.removeSource(we,ze):ze()}loadWorkerSource(pe,we,ze){try{this.self.importScripts(we.url),ze()}catch(ut){ze(ut.toString())}}syncRTLPluginState(pe,we,ze){try{s.dT.setState(we);const ut=s.dT.getPluginURL();if(s.dT.isLoaded()&&!s.dT.isParsed()&&ut!=null){this.self.importScripts(ut);const gt=s.dT.isParsed();ze(gt?void 0:new Error(`RTL Text Plugin failed to import scripts from ${ut}`),gt)}}catch(ut){ze(ut.toString())}}setDracoUrl(pe,we){this.dracoUrl=we}getAvailableImages(pe,we){this.availableImages[pe]||(this.availableImages[pe]={});let ze=this.availableImages[pe][we];return ze||(ze=[]),ze}getLayerIndex(pe,we){this.layerIndexes[pe]||(this.layerIndexes[pe]={});let ze=this.layerIndexes[pe][we];return ze||(ze=this.layerIndexes[pe][we]=new N,ze.scope=we),ze}getWorkerSource(pe,we,ze,ut){if(this.workerSources[pe]||(this.workerSources[pe]={}),this.workerSources[pe][ut]||(this.workerSources[pe][ut]={}),this.workerSources[pe][ut][we]||(this.workerSources[pe][ut][we]={}),this.isSpriteLoaded[pe]||(this.isSpriteLoaded[pe]={}),!this.workerSources[pe][ut][we][ze]){const gt={send:(Tt,Xt,ft,Qt,qt,er)=>{this.actor.send(Tt,Xt,ft,pe,qt,er)},scheduler:this.actor.scheduler};this.workerSources[pe][ut][we][ze]=new this.workerSourceTypes[we](gt,this.getLayerIndex(pe,ut),this.getAvailableImages(pe,ut),this.isSpriteLoaded[pe][ut],void 0,this.brightness)}return this.workerSources[pe][ut][we][ze]}getDEMWorkerSource(pe,we,ze){return this.demWorkerSources[pe]||(this.demWorkerSources[pe]={}),this.demWorkerSources[pe][ze]||(this.demWorkerSources[pe][ze]={}),this.demWorkerSources[pe][ze][we]||(this.demWorkerSources[pe][ze][we]=new H),this.demWorkerSources[pe][ze][we]}getRasterArrayWorkerSource(){return this.rasterArrayWorkerSource||(this.rasterArrayWorkerSource=new K),this.rasterArrayWorkerSource}enforceCacheSizeLimit(pe,we){s.dU(we)}getWorkerPerformanceMetrics(pe,we,ze){ze(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new ll(self)),ll}),p(["./shared"],function(s){function w(g,l){if(Array.isArray(g)){if(!Array.isArray(l)||g.length!==l.length)return!1;for(let h=0;h<g.length;h++)if(!w(g[h],l[h]))return!1;return!0}if(typeof g=="object"&&g!==null&&l!==null){if(typeof l!="object"||Object.keys(g).length!==Object.keys(l).length)return!1;for(const h in g)if(!w(g[h],l[h]))return!1;return!0}return g===l}var I=P;function P(g){return!function(l){return typeof window>"u"||typeof document>"u"?"not a browser":function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var _,B,C=new Blob([""],{type:"text/javascript"}),E=URL.createObjectURL(C);try{B=new Worker(E),_=!0}catch{_=!1}return B&&B.terminate(),URL.revokeObjectURL(E),_}()?function(){var _=document.createElement("canvas");_.width=_.height=1;var B=_.getContext("2d");if(!B)return!1;var C=B.getImageData(0,0,1,1);return C&&C.width===_.width}()?(N[h=l&&l.failIfMajorPerformanceCaveat]===void 0&&(N[h]=function(_){var B,C=function(E){var M=document.createElement("canvas"),k=Object.create(P.webGLContextAttributes);return k.failIfMajorPerformanceCaveat=E,M.getContext("webgl2",k)}(_);if(!C)return!1;try{B=C.createShader(C.VERTEX_SHADER)}catch{return!1}return!(!B||C.isContextLost())&&(C.shaderSource(B,"void main() {}"),C.compileShader(B),C.getShaderParameter(B,C.COMPILE_STATUS)===!0)}(h)),N[h]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL2 support"):"insufficient Canvas/getImageData support":"insufficient worker support";var h}(g)}var N={};function U(g,l,h){const _=document.createElement(g);return l!=null&&(_.className=l),h&&h.appendChild(_),_}function X(g,l,h){const _=document.createElementNS("http://www.w3.org/2000/svg",g);for(const B of Object.keys(l))_.setAttributeNS(null,B,String(l[B]));return h&&h.appendChild(_),_}P.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const Q=typeof document<"u"?document.documentElement&&document.documentElement.style:null,J=Q&&Q.userSelect!==void 0?"userSelect":"WebkitUserSelect";let Z;function H(){Q&&J&&(Z=Q[J],Q[J]="none")}function K(){Q&&J&&(Q[J]=Z)}function ee(g){g.preventDefault(),g.stopPropagation(),window.removeEventListener("click",ee,!0)}function se(){window.addEventListener("click",ee,!0),window.setTimeout(()=>{window.removeEventListener("click",ee,!0)},0)}function me(g,l){const h=g.getBoundingClientRect();return De(g,h,l)}function Ce(g,l){const h=g.getBoundingClientRect(),_=[];for(let B=0;B<l.length;B++)_.push(De(g,h,l[B]));return _}function Ae(g){return window.InstallTrigger!==void 0&&g.button===2&&g.ctrlKey&&window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:g.button}function De(g,l,h){const _=g.offsetWidth===l.width?1:g.offsetWidth/l.width;return new s.P((h.clientX-l.left)*_,(h.clientY-l.top)*_)}class qe{constructor(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps=new Set,this._updatedImages=new Set}isDirty(){return this._changed}setDirty(){this._changed=!0}getUpdatedSourceCaches(){return this._updatedSourceCaches}updateSourceCache(l,h){this._updatedSourceCaches[l]=h,this.setDirty()}discardSourceCacheUpdate(l){delete this._updatedSourceCaches[l]}updateLayer(l){const h=l.scope;this._updatedLayers[h]=this._updatedLayers[h]||new Set,this._updatedLayers[h].add(l.id),this.setDirty()}removeLayer(l){const h=l.scope;this._removedLayers[h]=this._removedLayers[h]||{},this._updatedLayers[h]=this._updatedLayers[h]||new Set,this._removedLayers[h][l.id]=l,this._updatedLayers[h].delete(l.id),this._updatedPaintProps.delete(l.fqid),this.setDirty()}getRemovedLayer(l){return this._removedLayers[l.scope]?this._removedLayers[l.scope][l.id]:null}discardLayerRemoval(l){this._removedLayers[l.scope]&&delete this._removedLayers[l.scope][l.id]}getLayerUpdatesByScope(){const l={};for(const h in this._updatedLayers)l[h]=l[h]||{},l[h].updatedIds=Array.from(this._updatedLayers[h].values());for(const h in this._removedLayers)l[h]=l[h]||{},l[h].removedIds=Object.keys(this._removedLayers[h]);return l}getUpdatedPaintProperties(){return this._updatedPaintProps}updatePaintProperties(l){this._updatedPaintProps.add(l.fqid),this.setDirty()}getUpdatedImages(){return Array.from(this._updatedImages.values())}updateImage(l){this._updatedImages.add(l),this.setDirty()}resetUpdatedImages(){this._updatedImages.clear()}reset(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps.clear(),this._updatedImages.clear()}}class je extends s.E{constructor(l){super(),this.requestManager=l,this.models={"":{}},this.numModelsLoading={}}loadModel(l,h){return s.l(this.requestManager.transformRequest(h,s.R.Model).url).then(_=>{if(!_)return;const B=s.c(_),C=new s.M(l,void 0,void 0,B);return C.computeBoundsAndApplyParent(),C}).catch(_=>{this.fire(new s.a(new Error(`Could not load model ${l} from ${h}: ${_.message}`)))})}load(l,h){this.models[h]||(this.models[h]={});const _=Object.keys(l);this.numModelsLoading[h]=(this.numModelsLoading[h]||0)+_.length;const B=[];for(const C of _)B.push(this.loadModel(C,l[C]));Promise.allSettled(B).then(C=>{for(let E=0;E<C.length;E++){const{status:M,value:k}=C[E];M==="fulfilled"&&k&&(this.models[h][_[E]]=k)}this.numModelsLoading[h]-=_.length,this.fire(new s.b("data",{dataType:"style"}))}).catch(C=>{this.fire(new s.a(new Error(`Could not load models: ${C.message}`)))})}isLoaded(){for(const l in this.numModelsLoading)if(this.numModelsLoading[l]>0)return!1;return!0}hasModel(l,h){return!!this.getModel(l,h)}getModel(l,h){return this.models[h]||(this.models[h]={}),this.models[h][l]}addModel(l,h,_){this.models[_]||(this.models[_]={}),this.hasModel(l,_)&&this.removeModel(l,_),this.load({[l]:this.requestManager.normalizeModelURL(h)},_)}addModels(l,h){const _={};for(const B in l)_[B]=this.requestManager.normalizeModelURL(l[B]);this.load(_,h)}removeModel(l,h){this.models[h]||(this.models[h]={});const _=this.models[h][l];delete this.models[h][l],_.destroy()}listModels(l){return this.models[l]||(this.models[l]={}),Object.keys(this.models[l])}upload(l,h){this.models[h]||(this.models[h]={});for(const _ in this.models[h])this.models[h][_].upload(l.context)}}class Oe{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(l,h,_){const B=String(h);if(this.stateChanges[l]=this.stateChanges[l]||{},this.stateChanges[l][B]=this.stateChanges[l][B]||{},s.e(this.stateChanges[l][B],_),this.deletedStates[l]===null){this.deletedStates[l]={};for(const C in this.state[l])C!==B&&(this.deletedStates[l][C]=null)}else if(this.deletedStates[l]&&this.deletedStates[l][B]===null){this.deletedStates[l][B]={};for(const C in this.state[l][B])_[C]||(this.deletedStates[l][B][C]=null)}else for(const C in _)this.deletedStates[l]&&this.deletedStates[l][B]&&this.deletedStates[l][B][C]===null&&delete this.deletedStates[l][B][C]}removeFeatureState(l,h,_){if(this.deletedStates[l]===null)return;const B=String(h);if(this.deletedStates[l]=this.deletedStates[l]||{},_&&h!==void 0)this.deletedStates[l][B]!==null&&(this.deletedStates[l][B]=this.deletedStates[l][B]||{},this.deletedStates[l][B][_]=null);else if(h!==void 0)if(this.stateChanges[l]&&this.stateChanges[l][B])for(_ in this.deletedStates[l][B]={},this.stateChanges[l][B])this.deletedStates[l][B][_]=null;else this.deletedStates[l][B]=null;else this.deletedStates[l]=null}getState(l,h){const _=String(h),B=s.e({},(this.state[l]||{})[_],(this.stateChanges[l]||{})[_]);if(this.deletedStates[l]===null)return{};if(this.deletedStates[l]){const C=this.deletedStates[l][h];if(C===null)return{};for(const E in C)delete B[E]}return B}initializeTileState(l,h){l.setFeatureState(this.state,h)}coalesceChanges(l,h){const _={};for(const B in this.stateChanges){this.state[B]=this.state[B]||{};const C={};for(const E in this.stateChanges[B])this.state[B][E]||(this.state[B][E]={}),s.e(this.state[B][E],this.stateChanges[B][E]),C[E]=this.state[B][E];_[B]=C}for(const B in this.deletedStates){this.state[B]=this.state[B]||{};const C={};if(this.deletedStates[B]===null)for(const E in this.state[B])C[E]={},this.state[B][E]={};else for(const E in this.deletedStates[B]){if(this.deletedStates[B][E]===null)this.state[B][E]={};else if(this.state[B][E])for(const M of Object.keys(this.deletedStates[B][E]))delete this.state[B][E][M];C[E]=this.state[B][E]}_[B]=_[B]||{},s.e(_[B],C)}if(this.stateChanges={},this.deletedStates={},Object.keys(_).length!==0)for(const B in l)l[B].setFeatureState(_,h)}}function ct(g){const{userImage:l}=g;return!!(l&&l.render&&l.render())&&(g.data.replace(new Uint8Array(l.data.buffer)),!0)}class ht extends s.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded={},this.requestors=[],this.patterns={},this.atlasImage={},this.atlasTexture={},this.dirty=!0}createScope(l){this.images[l]={},this.loaded[l]=!1,this.updatedImages[l]={},this.patterns[l]={},this.callbackDispatchedThisFrame[l]={},this.atlasImage[l]=new s.h({width:1,height:1})}isLoaded(){for(const l in this.loaded)if(!this.loaded[l])return!1;return!0}setLoaded(l,h){if(this.loaded[h]!==l&&(this.loaded[h]=l,l)){for(const{ids:_,callback:B}of this.requestors)this._notify(_,h,B);this.requestors=[]}}hasImage(l,h){return!!this.getImage(l,h)}getImage(l,h){return this.images[h][l]}addImage(l,h,_){this._validate(l,_)&&(this.images[h][l]=_)}_validate(l,h){let _=!0;return this._validateStretch(h.stretchX,h.data&&h.data.width)||(this.fire(new s.a(new Error(`Image "${l}" has invalid "stretchX" value`))),_=!1),this._validateStretch(h.stretchY,h.data&&h.data.height)||(this.fire(new s.a(new Error(`Image "${l}" has invalid "stretchY" value`))),_=!1),this._validateContent(h.content,h)||(this.fire(new s.a(new Error(`Image "${l}" has invalid "content" value`))),_=!1),_}_validateStretch(l,h){if(!l)return!0;let _=0;for(const B of l){if(B[0]<_||B[1]<B[0]||h<B[1])return!1;_=B[1]}return!0}_validateContent(l,h){return!(l&&(l.length!==4||l[0]<0||h.data.width<l[0]||l[1]<0||h.data.height<l[1]||l[2]<0||h.data.width<l[2]||l[3]<0||h.data.height<l[3]||l[2]<l[0]||l[3]<l[1]))}updateImage(l,h,_){_.version=this.images[h][l].version+1,this.images[h][l]=_,this.updatedImages[h][l]=!0}removeImage(l,h){const _=this.images[h][l];delete this.images[h][l],delete this.patterns[h][l],_.userImage&&_.userImage.onRemove&&_.userImage.onRemove()}listImages(l){return Object.keys(this.images[l])}getImages(l,h,_){let B=!0;const C=!!this.loaded[h];if(!C)for(const E of l)this.images[h][E]||(B=!1);C||B?this._notify(l,h,_):this.requestors.push({ids:l,scope:h,callback:_})}getUpdatedImages(l){return this.updatedImages[l]}_notify(l,h,_){const B={};for(const C of l){this.images[h][C]||this.fire(new s.b("styleimagemissing",{id:C}));const E=this.images[h][C];E?B[C]={data:E.data.clone(),pixelRatio:E.pixelRatio,sdf:E.sdf,version:E.version,stretchX:E.stretchX,stretchY:E.stretchY,content:E.content,hasRenderCallback:!!(E.userImage&&E.userImage.render)}:s.w(`Image "${C}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}_(null,B)}getPixelSize(l){const{width:h,height:_}=this.atlasImage[l];return{width:h,height:_}}getPattern(l,h){const _=this.patterns[h][l],B=this.getImage(l,h);if(!B)return null;if(_&&_.position.version===B.version)return _.position;if(_)_.position.version=B.version;else{const C={w:B.data.width+2,h:B.data.height+2,x:0,y:0},E=new s.I(C,B);this.patterns[h][l]={bin:C,position:E}}return this._updatePatternAtlas(h),this.patterns[h][l].position}bind(l,h){const _=l.gl;let B=this.atlasTexture[h];B?this.dirty&&(B.update(this.atlasImage[h]),this.dirty=!1):(B=new s.T(l,this.atlasImage[h],_.RGBA),this.atlasTexture[h]=B),B.bind(_.LINEAR,_.CLAMP_TO_EDGE)}_updatePatternAtlas(l){const h=[];for(const E in this.patterns[l])h.push(this.patterns[l][E].bin);const{w:_,h:B}=s.p(h),C=this.atlasImage[l];C.resize({width:_||1,height:B||1});for(const E in this.patterns[l]){const{bin:M}=this.patterns[l][E],k=M.x+1,F=M.y+1,j=this.images[l][E].data,V=j.width,Y=j.height;s.h.copy(j,C,{x:0,y:0},{x:k,y:F},{width:V,height:Y}),s.h.copy(j,C,{x:0,y:Y-1},{x:k,y:F-1},{width:V,height:1}),s.h.copy(j,C,{x:0,y:0},{x:k,y:F+Y},{width:V,height:1}),s.h.copy(j,C,{x:V-1,y:0},{x:k-1,y:F},{width:1,height:Y}),s.h.copy(j,C,{x:0,y:0},{x:k+V,y:F},{width:1,height:Y})}this.dirty=!0}beginFrame(){for(const l in this.images)this.callbackDispatchedThisFrame[l]={}}dispatchRenderCallbacks(l,h){for(const _ of l){if(this.callbackDispatchedThisFrame[h][_])continue;this.callbackDispatchedThisFrame[h][_]=!0;const B=this.images[h][_];ct(B)&&this.updateImage(_,h,B)}}}class We{constructor(l,h,_,B){this.message=(l?`${l}: `:"")+_,B&&(this.identifier=B),h!=null&&h.__line__&&(this.line=h.__line__)}}class Je extends We{}function St(g){const l=g.key,h=g.value,_=g.valueSpec||{},B=g.objectElementValidators||{},C=g.style,E=g.styleSpec;let M=[];const k=s.i(h);if(k!=="object")return[new We(l,h,`object expected, ${k} found`)];for(const F in h){const j=F.split(".")[0];let V;B[j]?V=B[j]:_[j]?V=Wn:B["*"]?V=B["*"]:_["*"]&&(V=Wn),V?M=M.concat(V({key:(l&&`${l}.`)+F,value:h[F],valueSpec:_[j]||_["*"],style:C,styleSpec:E,object:h,objectKey:F},h)):M.push(new Je(l,h[F],`unknown property "${F}"`))}for(const F in _)B[F]||_[F].required&&_[F].default===void 0&&h[F]===void 0&&M.push(new We(l,h,`missing required property "${F}"`));return M}function Le(g){const l=g.value,h=g.valueSpec,_=g.style,B=g.styleSpec,C=g.key,E=g.arrayElementValidator||Wn;if(s.i(l)!=="array")return[new We(C,l,`array expected, ${s.i(l)} found`)];if(h.length&&l.length!==h.length)return[new We(C,l,`array length ${h.length} expected, length ${l.length} found`)];if(h["min-length"]&&l.length<h["min-length"])return[new We(C,l,`array length at least ${h["min-length"]} expected, length ${l.length} found`)];let M={type:h.value,values:h.values,minimum:h.minimum,maximum:h.maximum,function:void 0};B.$version<7&&(M.function=h.function),s.i(h.value)==="object"&&(M=h.value);let k=[];for(let F=0;F<l.length;F++)k=k.concat(E({array:l,arrayIndex:F,value:l[F],valueSpec:M,style:_,styleSpec:B,key:`${C}[${F}]`},!0));return k}function Nt(g){const l=g.key,h=g.value,_=g.valueSpec;let B=s.i(h);if(B==="number"&&h!=h&&(B="NaN"),B!=="number")return[new We(l,h,`number expected, ${B} found`)];if("minimum"in _){let C=_.minimum;if(s.i(_.minimum)==="array"&&(C=_.minimum[g.arrayIndex]),h<C)return[new We(l,h,`${h} is less than the minimum value ${C}`)]}if("maximum"in _){let C=_.maximum;if(s.i(_.maximum)==="array"&&(C=_.maximum[g.arrayIndex]),h>C)return[new We(l,h,`${h} is greater than the maximum value ${C}`)]}return[]}function xt(g){const l=g.valueSpec,h=s.u(g.value.type);let _,B,C,E={};const M=h!=="categorical"&&g.value.property===void 0,k=!M,F=s.i(g.value.stops)==="array"&&s.i(g.value.stops[0])==="array"&&s.i(g.value.stops[0][0])==="object",j=St({key:g.key,value:g.value,valueSpec:g.styleSpec.function,style:g.style,styleSpec:g.styleSpec,objectElementValidators:{stops:function(te){if(h==="identity")return[new We(te.key,te.value,'identity function may not have a "stops" property')];let le=[];const ae=te.value;return le=le.concat(Le({key:te.key,value:ae,valueSpec:te.valueSpec,style:te.style,styleSpec:te.styleSpec,arrayElementValidator:V})),s.i(ae)==="array"&&ae.length===0&&le.push(new We(te.key,ae,"array must have at least one stop")),le},default:function(te){return Wn({key:te.key,value:te.value,valueSpec:l,style:te.style,styleSpec:te.styleSpec})}}});return h==="identity"&&M&&j.push(new We(g.key,g.value,'missing required property "property"')),h==="identity"||g.value.stops||j.push(new We(g.key,g.value,'missing required property "stops"')),h==="exponential"&&g.valueSpec.expression&&!s.s(g.valueSpec)&&j.push(new We(g.key,g.value,"exponential functions not supported")),g.styleSpec.$version>=8&&(k&&!s.k(g.valueSpec)?j.push(new We(g.key,g.value,"property functions not supported")):M&&!s.m(g.valueSpec)&&j.push(new We(g.key,g.value,"zoom functions not supported"))),h!=="categorical"&&!F||g.value.property!==void 0||j.push(new We(g.key,g.value,'"property" property is required')),j;function V(te){let le=[];const ae=te.value,ue=te.key;if(s.i(ae)!=="array")return[new We(ue,ae,`array expected, ${s.i(ae)} found`)];if(ae.length!==2)return[new We(ue,ae,`array length 2 expected, length ${ae.length} found`)];if(F){if(s.i(ae[0])!=="object")return[new We(ue,ae,`object expected, ${s.i(ae[0])} found`)];if(ae[0].zoom===void 0)return[new We(ue,ae,"object stop key must have zoom")];if(ae[0].value===void 0)return[new We(ue,ae,"object stop key must have value")];const ne=s.u(ae[0].zoom);if(typeof ne!="number")return[new We(ue,ae[0].zoom,"stop zoom values must be numbers")];if(C&&C>ne)return[new We(ue,ae[0].zoom,"stop zoom values must appear in ascending order")];ne!==C&&(C=ne,B=void 0,E={}),le=le.concat(St({key:`${ue}[0]`,value:ae[0],valueSpec:{zoom:{}},style:te.style,styleSpec:te.styleSpec,objectElementValidators:{zoom:Nt,value:Y}}))}else le=le.concat(Y({key:`${ue}[0]`,value:ae[0],valueSpec:{},style:te.style,styleSpec:te.styleSpec},ae));return s.n(s.o(ae[1]))?le.concat([new We(`${ue}[1]`,ae[1],"expressions are not allowed in function stops.")]):le.concat(Wn({key:`${ue}[1]`,value:ae[1],valueSpec:l,style:te.style,styleSpec:te.styleSpec}))}function Y(te,le){const ae=s.i(te.value),ue=s.u(te.value),ne=te.value!==null?te.value:le;if(_){if(ae!==_)return[new We(te.key,ne,`${ae} stop domain type must match previous stop domain type ${_}`)]}else _=ae;if(ae!=="number"&&ae!=="string"&&ae!=="boolean"&&typeof ue!="number"&&typeof ue!="string"&&typeof ue!="boolean")return[new We(te.key,ne,"stop domain value must be a number, string, or boolean")];if(ae!=="number"&&h!=="categorical"){let he=`number expected, ${ae} found`;return s.k(l)&&h===void 0&&(he+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new We(te.key,ne,he)]}return h!=="categorical"||ae!=="number"||typeof ue=="number"&&isFinite(ue)&&Math.floor(ue)===ue?h!=="categorical"&&ae==="number"&&typeof ue=="number"&&typeof B=="number"&&B!==void 0&&ue<B?[new We(te.key,ne,"stop domain values must appear in ascending order")]:(B=ue,h==="categorical"&&ue in E?[new We(te.key,ne,"stop domain values must be unique")]:(E[ue]=!0,[])):[new We(te.key,ne,`integer expected, found ${String(ue)}`)]}}function $t(g){const l=(g.expressionContext==="property"?s.q:s.r)(s.o(g.value),g.valueSpec);if(l.result==="error")return l.value.map(_=>new We(`${g.key}${_.key}`,g.value,_.message));const h=l.value.expression||l.value._styleExpression.expression;if(g.expressionContext==="property"&&g.propertyKey==="text-font"&&!h.outputDefined())return[new We(g.key,g.value,`Invalid data expression for "${g.propertyKey}". Output values must be contained as literals within the expression.`)];if(g.expressionContext==="property"&&g.propertyType==="layout"&&!s.t(h))return[new We(g.key,g.value,'"feature-state" data expressions are not supported with layout properties.')];if(g.expressionContext==="filter")return Wt(h,g);if(g.expressionContext&&g.expressionContext.indexOf("cluster")===0){if(!s.v(h,["zoom","feature-state"]))return[new We(g.key,g.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(g.expressionContext==="cluster-initial"&&!s.x(h))return[new We(g.key,g.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Wt(g,l){const h=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(l.valueSpec&&l.valueSpec.expression)for(const B of l.valueSpec.expression.parameters)h.delete(B);if(h.size===0)return[];const _=[];return g instanceof s.C&&h.has(g.name)?[new We(l.key,l.value,`["${g.name}"] expression is not supported in a filter for a ${l.object.type} layer with id: ${l.object.id}`)]:(g.eachChild(B=>{_.push(...Wt(B,l))}),_)}function Tr(g){const l=g.key,h=g.value,_=g.valueSpec,B=[];return Array.isArray(_.values)?_.values.indexOf(s.u(h))===-1&&B.push(new We(l,h,`expected one of [${_.values.join(", ")}], ${JSON.stringify(h)} found`)):Object.keys(_.values).indexOf(s.u(h))===-1&&B.push(new We(l,h,`expected one of [${Object.keys(_.values).join(", ")}], ${JSON.stringify(h)} found`)),B}function Hr(g){return s.z(s.o(g.value))?$t(s.j({},g,{expressionContext:"filter",valueSpec:g.styleSpec[`filter_${g.layerType||"fill"}`]})):Wr(g)}function Wr(g){const l=g.value,h=g.key;if(s.i(l)!=="array")return[new We(h,l,`array expected, ${s.i(l)} found`)];const _=g.styleSpec;let B,C=[];if(l.length<1)return[new We(h,l,"filter array must have at least 1 element")];switch(C=C.concat(Tr({key:`${h}[0]`,value:l[0],valueSpec:_.filter_operator,style:g.style,styleSpec:g.styleSpec})),s.u(l[0])){case"<":case"<=":case">":case">=":l.length>=2&&s.u(l[1])==="$type"&&C.push(new We(h,l,`"$type" cannot be use with operator "${l[0]}"`));case"==":case"!=":l.length!==3&&C.push(new We(h,l,`filter array for operator "${l[0]}" must have 3 elements`));case"in":case"!in":l.length>=2&&(B=s.i(l[1]),B!=="string"&&C.push(new We(`${h}[1]`,l[1],`string expected, ${B} found`)));for(let E=2;E<l.length;E++)B=s.i(l[E]),s.u(l[1])==="$type"?C=C.concat(Tr({key:`${h}[${E}]`,value:l[E],valueSpec:_.geometry_type,style:g.style,styleSpec:g.styleSpec})):B!=="string"&&B!=="number"&&B!=="boolean"&&C.push(new We(`${h}[${E}]`,l[E],`string, number, or boolean expected, ${B} found`));break;case"any":case"all":case"none":for(let E=1;E<l.length;E++)C=C.concat(Wr({key:`${h}[${E}]`,value:l[E],style:g.style,styleSpec:g.styleSpec}));break;case"has":case"!has":B=s.i(l[1]),l.length!==2?C.push(new We(h,l,`filter array for "${l[0]}" operator must have 2 elements`)):B!=="string"&&C.push(new We(`${h}[1]`,l[1],`string expected, ${B} found`))}return C}function zr(g,l){const h=g.key,_=g.style,B=g.layer,C=g.styleSpec,E=g.value,M=g.objectKey,k=C[`${l}_${g.layerType}`];if(!k)return[];const F=M.match(/^(.*)-transition$/);if(l==="paint"&&F&&k[F[1]]&&k[F[1]].transition)return Wn({key:h,value:E,valueSpec:C.transition,style:_,styleSpec:C});const j=g.valueSpec||k[M];if(!j)return[new Je(h,E,`unknown property "${M}"`)];let V;if(s.i(E)==="string"&&s.k(j)&&!j.tokens&&(V=/^{([^}]+)}$/.exec(E))){const te=`\`{ "type": "identity", "property": ${V?JSON.stringify(V[1]):'"_"'} }\``;return[new We(h,E,`"${M}" does not support interpolation syntax
Use an identity property function instead: ${te}.`)]}const Y=[];if(g.layerType==="symbol")M!=="text-field"||!_||_.glyphs||_.imports||Y.push(new We(h,E,'use of "text-field" requires a style "glyphs" property')),M==="text-font"&&s.A(s.o(E))&&s.u(E.type)==="identity"&&Y.push(new We(h,E,'"text-font" does not support identity functions'));else if(g.layerType==="model"&&l==="paint"&&B&&B.layout&&B.layout.hasOwnProperty("model-id")&&s.k(j)&&(s.B(j)||s.m(j))){const te=s.q(s.o(E),j),le=te.value.expression||te.value._styleExpression.expression;le&&!s.v(le,["measure-light"])&&(M==="model-emissive-strength"&&s.x(le)&&s.t(le)||Y.push(new We(h,E,`${M} does not support measure-light expressions when the model layer source is vector tile or GeoJSON.`)))}return Y.concat(Wn({key:g.key,value:E,valueSpec:j,style:_,styleSpec:C,expressionContext:"property",propertyType:l,propertyKey:M}))}function jn(g){return zr(g,"paint")}function Ti(g){return zr(g,"layout")}function ur(g){let l=[];const h=g.value,_=g.key,B=g.style,C=g.styleSpec;h.type||h.ref||l.push(new We(_,h,'either "type" or "ref" is required'));let E=s.u(h.type);const M=s.u(h.ref);if(h.id){const k=s.u(h.id);for(let F=0;F<g.arrayIndex;F++){const j=B.layers[F];s.u(j.id)===k&&l.push(new We(_,h.id,`duplicate layer id "${h.id}", previously used at line ${j.id.__line__}`))}}if("ref"in h){let k;["type","source","source-layer","filter","layout"].forEach(F=>{F in h&&l.push(new We(_,h[F],`"${F}" is prohibited for ref layers`))}),B.layers.forEach(F=>{s.u(F.id)===M&&(k=F)}),k?k.ref?l.push(new We(_,h.ref,"ref cannot reference another ref layer")):E=s.u(k.type):typeof M=="string"&&l.push(new We(_,h.ref,`ref layer "${M}" not found`))}else if(E!=="background"&&E!=="sky"&&E!=="slot")if(h.source){const k=B.sources&&B.sources[h.source],F=k&&s.u(k.type);k?F==="vector"&&E==="raster"?l.push(new We(_,h.source,`layer "${h.id}" requires a raster source`)):F==="raster"&&E!=="raster"?l.push(new We(_,h.source,`layer "${h.id}" requires a vector source`)):F!=="vector"||h["source-layer"]?F==="raster-dem"&&E!=="hillshade"?l.push(new We(_,h.source,"raster-dem source can only be used with layer type 'hillshade'.")):F!=="raster-array"||["raster","raster-particle"].includes(E)?E!=="line"||!h.paint||!h.paint["line-gradient"]&&!h.paint["line-trim-offset"]||F==="geojson"&&k.lineMetrics?E==="raster-particle"&&F!=="raster-array"&&l.push(new We(_,h.source,`layer "${h.id}" requires a 'raster-array' source.`)):l.push(new We(_,h,`layer "${h.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):l.push(new We(_,h.source,"raster-array source can only be used with layer type 'raster'.")):l.push(new We(_,h,`layer "${h.id}" must specify a "source-layer"`)):l.push(new We(_,h.source,`source "${h.source}" not found`))}else l.push(new We(_,h,'missing required property "source"'));return l=l.concat(St({key:_,value:h,valueSpec:C.layer,style:g.style,styleSpec:g.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Wn({key:`${_}.type`,value:h.type,valueSpec:C.layer.type,style:g.style,styleSpec:g.styleSpec,object:h,objectKey:"type"}),filter:k=>Hr(s.j({layerType:E},k)),layout:k=>St({layer:h,key:k.key,value:k.value,valueSpec:{},style:k.style,styleSpec:k.styleSpec,objectElementValidators:{"*":F=>Ti(s.j({layerType:E},F))}}),paint:k=>St({layer:h,key:k.key,value:k.value,valueSpec:{},style:k.style,styleSpec:k.styleSpec,objectElementValidators:{"*":F=>jn(s.j({layerType:E,layer:h},F))}})}})),l}function br(g){const l=g.value,h=g.key,_=s.i(l);return _!=="string"?[new We(h,l,`string expected, ${_} found`)]:[]}const Ur={promoteId:function({key:g,value:l}){if(s.i(l)==="string")return br({key:g,value:l});{const h=[];for(const _ in l)h.push(...br({key:`${g}.${_}`,value:l[_]}));return h}}};function kt(g){const l=g.value,h=g.key,_=g.styleSpec,B=g.style;if(!l.type)return[new We(h,l,'"type" is required')];const C=s.u(l.type);let E=[];switch(["vector","raster","raster-dem","raster-array"].includes(C)&&(l.url||l.tiles||E.push(new Je(h,l,'Either "url" or "tiles" is required.'))),C){case"vector":case"raster":case"raster-dem":case"raster-array":return E=E.concat(St({key:h,value:l,valueSpec:_[`source_${C.replace("-","_")}`],style:g.style,styleSpec:_,objectElementValidators:Ur})),E;case"geojson":if(E=St({key:h,value:l,valueSpec:_.source_geojson,style:B,styleSpec:_,objectElementValidators:Ur}),l.cluster)for(const M in l.clusterProperties){const[k,F]=l.clusterProperties[M],j=typeof k=="string"?[k,["accumulated"],["get",M]]:k;E.push(...$t({key:`${h}.${M}.map`,value:F,expressionContext:"cluster-map"})),E.push(...$t({key:`${h}.${M}.reduce`,value:j,expressionContext:"cluster-reduce"}))}return E;case"video":return St({key:h,value:l,valueSpec:_.source_video,style:B,styleSpec:_});case"image":return St({key:h,value:l,valueSpec:_.source_image,style:B,styleSpec:_});case"canvas":return[new We(h,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Tr({key:`${h}.type`,value:l.type,valueSpec:{values:ii(_)},style:B,styleSpec:_})}}function ii(g){return g.source.reduce((l,h)=>{const _=g[h];return _.type.type==="enum"&&(l=l.concat(Object.keys(_.type.values))),l},[])}function Er(g){const l=g.value;let h=[];if(!l)return h;const _=s.i(l);return _!=="string"?(h=h.concat([new We(g.key,l,`string expected, "${_}" found`)]),h):(function(B){const C=B.indexOf("://")===-1;try{return new URL(B,C?"http://example.com":void 0),!0}catch{return!1}}(l)||(h=h.concat([new We(g.key,l,`invalid url "${l}"`)])),h)}function $n(g){const l=g.value,h=g.styleSpec,_=h.light,B=g.style;let C=[];const E=s.i(l);if(l===void 0)return C;if(E!=="object")return C=C.concat([new We("light",l,`object expected, ${E} found`)]),C;for(const M in l){const k=M.match(/^(.*)-transition$/);C=C.concat(k&&_[k[1]]&&_[k[1]].transition?Wn({key:M,value:l[M],valueSpec:h.transition,style:B,styleSpec:h}):_[M]?Wn({key:M,value:l[M],valueSpec:_[M],style:B,styleSpec:h}):[new We(M,l[M],`unknown property "${M}"`)])}return C}function ei(g){const l=g.value;let h=[];if(!l)return h;const _=s.i(l);if(_!=="object")return h=h.concat([new We("light-3d",l,`object expected, ${_} found`)]),h;const B=g.styleSpec,C=B["light-3d"],E=g.key,M=g.style,k=g.style.lights;for(const V of["type","id"])if(!(V in l))return h=h.concat([new We("light-3d",l,`missing property ${V} on light`)]),h;if(l.type&&k)for(let V=0;V<g.arrayIndex;V++){const Y=s.u(l.type),te=k[V];s.u(te.type)===Y&&h.push(new We(E,l.id,`duplicate light type "${l.type}", previously defined at line ${te.id.__line__}`))}const F=`properties_light_${l.type}`;if(!(F in B))return h=h.concat([new We("light-3d",l,`Invalid light type ${l.type}`)]),h;const j=B[F];for(const V in l)if(V==="properties"){const Y=l[V],te=s.i(Y);if(te!=="object")return h=h.concat([new We("properties",Y,`object expected, ${te} found`)]),h;for(const le in Y)h=h.concat(j[le]?Wn({key:le,value:Y[le],valueSpec:j[le],style:M,styleSpec:B}):[new Je(g.key,Y[le],`unknown property "${le}"`)])}else{const Y=V.match(/^(.*)-transition$/);h=h.concat(Y&&C[Y[1]]&&C[Y[1]].transition?Wn({key:V,value:l[V],valueSpec:B.transition,style:M,styleSpec:B}):C[V]?Wn({key:V,value:l[V],valueSpec:C[V],style:M,styleSpec:B}):[new Je(V,l[V],`unknown property "${V}"`)])}return h}function vi(g){const l=g.value,h=g.key,_=g.style,B=g.styleSpec,C=B.terrain;let E=[];const M=s.i(l);if(l===void 0||M==="null")return E;if(M!=="object")return E=E.concat([new We("terrain",l,`object expected, ${M} found`)]),E;for(const k in l){const F=k.match(/^(.*)-transition$/);E=E.concat(F&&C[F[1]]&&C[F[1]].transition?Wn({key:k,value:l[k],valueSpec:B.transition,style:_,styleSpec:B}):C[k]?Wn({key:k,value:l[k],valueSpec:C[k],style:_,styleSpec:B}):[new Je(k,l[k],`unknown property "${k}"`)])}if(l.source){const k=_.sources&&_.sources[l.source],F=k&&s.u(k.type);k?F!=="raster-dem"&&E.push(new We(h,l.source,`terrain cannot be used with a source of type ${String(F)}, it only be used with a "raster-dem" source type`)):E.push(new We(h,l.source,`source "${l.source}" not found`))}else E.push(new We(h,l,'terrain is missing required property "source"'));return E}function Mi(g){const l=g.value,h=g.style,_=g.styleSpec,B=_.fog;let C=[];const E=s.i(l);if(l===void 0)return C;if(E!=="object")return C=C.concat([new We("fog",l,`object expected, ${E} found`)]),C;for(const M in l){const k=M.match(/^(.*)-transition$/);C=C.concat(k&&B[k[1]]&&B[k[1]].transition?Wn({key:M,value:l[M],valueSpec:_.transition,style:h,styleSpec:_}):B[M]?Wn({key:M,value:l[M],valueSpec:B[M],style:h,styleSpec:_}):[new Je(M,l[M],`unknown property "${M}"`)])}return C}const Sa={"*":()=>[],array:Le,boolean:function(g){const l=g.value,h=g.key,_=s.i(l);return _!=="boolean"?[new We(h,l,`boolean expected, ${_} found`)]:[]},number:Nt,color:function(g){const l=g.key,h=g.value,_=s.i(h);return _!=="string"?[new We(l,h,`color expected, ${_} found`)]:s.y(h)===null?[new We(l,h,`color expected, "${h}" found`)]:[]},enum:Tr,filter:Hr,function:xt,layer:ur,object:St,source:kt,model:Er,light:$n,"light-3d":ei,terrain:vi,fog:Mi,string:br,formatted:function(g){return br(g).length===0?[]:$t(g)},resolvedImage:function(g){return br(g).length===0?[]:$t(g)},projection:function(g){const l=g.value,h=g.styleSpec,_=h.projection,B=g.style;let C=[];const E=s.i(l);if(E==="object")for(const M in l)C=C.concat(Wn({key:M,value:l[M],valueSpec:_[M],style:B,styleSpec:h}));else E!=="string"&&(C=C.concat([new We("projection",l,`object or string expected, ${E} found`)]));return C},import:function(g){const{value:l,styleSpec:h}=g,{data:_,...B}=l;Object.defineProperty(B,"__line__",{value:l.__line__,enumerable:!1});let C=St(s.j({},g,{value:B,valueSpec:h.import}));return s.u(B.id)===""&&C.push(new We(`${g.key}.id`,B,"import id can't be an empty string")),_&&(C=C.concat(Wa(_,h,{key:`${g.key}.data`}))),C}};function Wn(g,l=!1){const h=g.value,_=g.valueSpec,B=g.styleSpec;if(_.expression&&s.A(s.u(h)))return xt(g);if(_.expression&&s.n(s.o(h)))return $t(g);if(_.type&&Sa[_.type]){const C=Sa[_.type](g);return l===!0&&C.length>0&&s.i(g.value)==="array"?$t(g):C}return St(s.j({},g,{valueSpec:_.type?B[_.type]:_}))}function Eo(g){const l=g.value,h=g.key,_=br(g);return _.length||(l.indexOf("{fontstack}")===-1&&_.push(new We(h,l,'"glyphs" url must include a "{fontstack}" token')),l.indexOf("{range}")===-1&&_.push(new We(h,l,'"glyphs" url must include a "{range}" token'))),_}function Wa(g,l=s.D,h={}){return Wn({key:h.key||"",value:g,valueSpec:l.$root,styleSpec:l,style:g,objectElementValidators:{glyphs:Eo,"*":()=>[]}})}function Do(g,l=s.D){return ft(Wa(g,l))}const Ta=g=>ft(kt(g)),ll=g=>ft($n(g)),dt=g=>ft(ei(g)),pe=g=>ft(vi(g)),we=g=>ft(Mi(g)),ze=g=>ft(ur(g)),ut=g=>ft(Hr(g)),gt=g=>ft(jn(g)),Tt=g=>ft(Ti(g)),Xt=g=>ft(Er(g));function ft(g){return g.slice().sort((l,h)=>l.line&&h.line?l.line-h.line:0)}function Qt(g,l){let h=!1;if(l&&l.length)for(const _ of l)_ instanceof Je?s.w(_.message):(g.fire(new s.a(new Error(_.message))),h=!0);return h}const qt=new s.F({anchor:new s.G(s.D.light.anchor),position:new s.H(s.D.light.position),color:new s.G(s.D.light.color),intensity:new s.G(s.D.light.intensity)});class er extends s.E{constructor(l,h="flat"){super(),this._transitionable=new s.J(qt),this.setLight(l,h),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(l,h,_={}){this._validate(ll,l,_)||(this._transitionable.setTransitionOrValue(l),this.id=h)}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,h,_){return(!_||_.validate!==!1)&&Qt(this,l.call(Do,s.e({value:h,style:{glyphs:!0,sprite:!0},styleSpec:s.D})))}}const Vr=new s.F({source:new s.G(s.D.terrain.source),exaggeration:new s.G(s.D.terrain.exaggeration)});let Rn=class extends s.E{constructor(g,l,h,_){super(),this.scope=h,this._transitionable=new s.J(Vr,h,_),this._transitionable.setTransitionOrValue(g,_),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=l}get(){return this._transitionable.serialize()}set(g,l){this._transitionable.setTransitionOrValue(g,l)}updateTransitions(g){this._transitioning=this._transitionable.transitioned(g,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(g){this.properties=this._transitioning.possiblyEvaluate(g)}getExaggeration(g){return this._transitioning.possiblyEvaluate(new s.K(g)).get("exaggeration")}isZoomDependent(){const g=this._transitionable._values.exaggeration;return g!=null&&g.value!=null&&g.value.expression!=null&&g.value.expression instanceof s.Z}};const Kn=45,In=65,vn=.05;function Bn(g,l,h,_){const B=s.O(Kn,In,h),[C,E]=Pn(g,_);let M=1-Math.min(1,Math.exp((l-C)/(E-C)*-6));return M*=M*M,M=Math.min(1,1.00747*M),M*B*g.alpha}function Pn(g,l){const h=.5/Math.tan(.5*l);return[g.range[0]+h,g.range[1]+h]}function Zn(g,l,h,_,B){const C=s.N.transformMat4([],[l,h,_],B.mercatorFogMatrix);return Bn(g,s.N.length(C),B.pitch,B._fov)}function Qi(g,l,h,_,B,C,E){const M=[[h,_,0],[B,_,0],[B,C,0],[h,C,0]];let k=Number.MAX_VALUE,F=-Number.MAX_VALUE;for(const j of M){const V=s.N.transformMat4([],j,l),Y=s.N.length(V);k=Math.min(k,Y),F=Math.max(F,Y)}return[Bn(g,k,E.pitch,E._fov),Bn(g,F,E.pitch,E._fov)]}const Xn=new s.F({range:new s.G(s.D.fog.range),color:new s.G(s.D.fog.color),"high-color":new s.G(s.D.fog["high-color"]),"space-color":new s.G(s.D.fog["space-color"]),"horizon-blend":new s.G(s.D.fog["horizon-blend"]),"star-intensity":new s.G(s.D.fog["star-intensity"]),"vertical-range":new s.G(s.D.fog["vertical-range"])});class zo extends s.E{constructor(l,h,_,B){super(),this._transitionable=new s.J(Xn,_,new Map(B)),this.set(l,B),this._transitioning=this._transitionable.untransitioned(),this._transform=h,this.properties=new s.Q(Xn)}get state(){const l=this._transform,h=l.projection.name==="globe",_=s.S(l.zoom),B=this.properties.get("range"),C=[.5,3];return{range:h?[s.U(C[0],B[0],_),s.U(C[1],B[1],_)]:B,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(l,h,_={}){if(this._validate(we,l,_))return;const B=s.e({},l);for(const C of Object.keys(s.D.fog))B[C]===void 0&&(B[C]=s.D.fog[C].default);this._options=B,this._transitionable.setTransitionOrValue(this._options,h)}getOpacity(l){if(!this._transform.projection.supportsFog)return 0;const h=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:s.O(Kn,In,l))*h.a}getOpacityAtLatLng(l,h){return this._transform.projection.supportsFog?function(_,B,C){const E=s.L.fromLngLat(B),M=C.elevation?C.elevation.getAtPointOrZero(E):0;return Zn(_,E.x,E.y,M,C)}(this.state,l,h):0}getOpacityForTile(l){if(!this._transform.projection.supportsFog)return[1,1];const h=this._transform.calculateFogTileMatrix(l.toUnwrapped());return Qi(this.state,h,0,0,s.V,s.V,this._transform)}getOpacityForBounds(l,h,_,B,C){return this._transform.projection.supportsFog?Qi(this.state,l,h,_,B,C,this._transform):[1,1]}getFovAdjustedRange(l){return this._transform.projection.supportsFog?Pn(this.state,l):[0,1]}isVisibleOnFrustum(l){if(!this._transform.projection.supportsFog)return!1;const h=[4,5,6,7];for(const _ of h){const B=l.points[_];let C;if(B[2]>=0)C=B;else{const E=l.points[_-4];C=s.W(E,B,E[2]/(E[2]-B[2]))}if(Zn(this.state,C[0],C[1],0,this._transform)>=vn)return!0}return!1}updateConfig(l){this._transitionable.setTransitionOrValue(this._options,new Map(l))}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,h,_){return(!_||_.validate!==!1)&&Qt(this,l.call(Do,s.e({value:h,style:{glyphs:!0,sprite:!0},styleSpec:s.D})))}}class co extends s.E{constructor(l,h,_,B){super(),this.scope=_,this._options=l,this.properties=new s.Q(h),this._transitionable=new s.J(h,_,new Map(B)),this._transitionable.setTransitionOrValue(l.properties),this._transitioning=this._transitionable.untransitioned()}updateConfig(l){this._transitionable.setTransitionOrValue(this._options.properties,new Map(l))}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}get(){return this._options.properties=this._transitionable.serialize(),this._options}set(l,h){this._options=l,this._transitionable.setTransitionOrValue(l.properties,h)}shadowsEnabled(){return!!this.properties&&this.properties.get("cast-shadows")===!0}}const Xo=new s.F({color:new s.G(s.D.properties_light_ambient.color),intensity:new s.G(s.D.properties_light_ambient.intensity)}),zi=new s.F({direction:new s.X(s.D.properties_light_directional.direction),color:new s.G(s.D.properties_light_directional.color),intensity:new s.G(s.D.properties_light_directional.intensity),"cast-shadows":new s.G(s.D.properties_light_directional["cast-shadows"]),"shadow-intensity":new s.G(s.D.properties_light_directional["shadow-intensity"])});class Ii{constructor(l,h,_,B){this.screenBounds=l,this.cameraPoint=h,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=_,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,B)}static createFromScreenPoints(l,h){let _,B;if(l instanceof s.P||typeof l[0]=="number"){const C=s.P.convert(l);_=[C],B=h.isPointAboveHorizon(C)}else{const C=s.P.convert(l[0]),E=s.P.convert(l[1]);_=[C,E],B=s.Y(C,E).every(M=>h.isPointAboveHorizon(M))}return new Ii(_,h.getCameraPoint(),B,h)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(l){return s.Y(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],l)}bufferedCameraGeometry(l){const h=this.screenBounds[0],_=this.screenBounds.length===1?this.screenBounds[0].add(new s.P(1,1)):this.screenBounds[1],B=s.Y(h,_,0,!1);return this.cameraPoint.y>_.y&&(this.cameraPoint.x>h.x&&this.cameraPoint.x<_.x?B.splice(3,0,this.cameraPoint):this.cameraPoint.x>=_.x?B[2]=this.cameraPoint:this.cameraPoint.x<=h.x&&(B[3]=this.cameraPoint)),s._(B,l)}bufferedCameraGeometryGlobe(l){const h=this.screenBounds[0],_=this.screenBounds.length===1?this.screenBounds[0].add(new s.P(1,1)):this.screenBounds[1],B=s.Y(h,_,l),C=this.cameraPoint.clone();switch(3*((C.y>h.y)+(C.y>_.y))+((C.x>h.x)+(C.x>_.x))){case 0:B[0]=C,B[4]=C.clone();break;case 1:B.splice(1,0,C);break;case 2:B[1]=C;break;case 3:B.splice(4,0,C);break;case 5:B.splice(2,0,C);break;case 6:B[3]=C;break;case 7:B.splice(3,0,C);break;case 8:B[2]=C}return B}containsTile(l,h,_,B=0){const C=l.queryPadding/h._pixelsPerMercatorPixel+1,E=_?this._bufferedCameraMercator(C,h):this._bufferedScreenMercator(C,h);let M=l.tileID.wrap+(E.unwrapped?B:0);const k=E.polygon.map(ue=>s.$(l.tileTransform,ue,M));if(!s.a0(k,0,0,s.V,s.V))return;M=l.tileID.wrap+(this.screenGeometryMercator.unwrapped?B:0);const F=this.screenGeometryMercator.polygon.map(ue=>s.a1(l.tileTransform,ue,M)),j=F.map(ue=>new s.P(ue[0],ue[1])),V=h.getFreeCameraOptions().position||new s.L(0,0,0),Y=s.a1(l.tileTransform,V,M),te=F.map(ue=>{const ne=s.N.sub(ue,ue,Y);return s.N.normalize(ne,ne),new s.a2(Y,ne)}),le=s.a3(l,1,h.zoom)*h._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:j,tilespaceRays:te,bufferedTilespaceGeometry:k,bufferedTilespaceBounds:(ae=s.a4(k),ae.min.x=s.aa(ae.min.x,0,s.V),ae.min.y=s.aa(ae.min.y,0,s.V),ae.max.x=s.aa(ae.max.x,0,s.V),ae.max.y=s.aa(ae.max.y,0,s.V),ae),tile:l,tileID:l.tileID,pixelToTileUnitsFactor:le};var ae}_bufferedScreenMercator(l,h){const _=Qe(l);if(this._screenRaycastCache[_])return this._screenRaycastCache[_];{let B;return B=h.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(l),h):{polygon:this.bufferedScreenGeometry(l).map(C=>h.pointCoordinate3D(C)),unwrapped:!0},this._screenRaycastCache[_]=B,B}}_bufferedCameraMercator(l,h){const _=Qe(l);if(this._cameraRaycastCache[_])return this._cameraRaycastCache[_];{let B;return B=h.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(l),h):{polygon:this.bufferedCameraGeometry(l).map(C=>h.pointCoordinate3D(C)),unwrapped:!0},this._cameraRaycastCache[_]=B,B}}_projectAndResample(l,h){const _=function(C,E){const M=s.a6.multiply([],E.pixelMatrix,E.globeMatrix),k=[0,-s.ab,0,1],F=[0,s.ab,0,1],j=[0,0,0,1];s.a7.transformMat4(k,k,M),s.a7.transformMat4(F,F,M),s.a7.transformMat4(j,j,M);const V=new s.P(k[0]/k[3],k[1]/k[3]),Y=new s.P(F[0]/F[3],F[1]/F[3]),te=s.a8(C,V)&&k[3]<j[3],le=s.a8(C,Y)&&F[3]<j[3];if(!te&&!le)return null;const ae=function(xe,Ee,Pe){for(let Re=1;Re<xe.length;Re++){const Xe=at(Ee.pointCoordinate3D(xe[Re-1]).x),Fe=at(Ee.pointCoordinate3D(xe[Re]).x);if(Pe<0){if(Xe<Fe)return{idx:Re,t:-Xe/(Fe-1-Xe)}}else if(Fe<Xe)return{idx:Re,t:(1-Xe)/(Fe+1-Xe)}}return null}(C,E,te?-1:1);if(!ae)return null;const{idx:ue,t:ne}=ae;let he=ue>1?lt(C.slice(0,ue),E):[],ye=ue<C.length?lt(C.slice(ue),E):[];he=he.map(xe=>new s.P(at(xe.x),xe.y)),ye=ye.map(xe=>new s.P(at(xe.x),xe.y));const de=[...he];de.length===0&&de.push(ye[ye.length-1]);const ve=s.U(de[de.length-1].y,(ye.length===0?he[0]:ye[0]).y,ne);let ce;return ce=te?[new s.P(0,ve),new s.P(0,0),new s.P(1,0),new s.P(1,ve)]:[new s.P(1,ve),new s.P(1,1),new s.P(0,1),new s.P(0,ve)],de.push(...ce),ye.length===0?de.push(he[0]):de.push(...ye),{polygon:de.map(xe=>new s.L(xe.x,xe.y)),unwrapped:!1}}(l,h);if(_)return _;const B=function(C,E){let M=!1,k=-1/0,F=0;for(let V=0;V<C.length-1;V++)C[V].x>k&&(k=C[V].x,F=V);for(let V=0;V<C.length-1;V++){const Y=(F+V)%(C.length-1),te=C[Y],le=C[Y+1];Math.abs(te.x-le.x)>.5&&(te.x<le.x?(te.x+=1,Y===0&&(C[C.length-1].x+=1)):(le.x+=1,Y+1===C.length-1&&(C[0].x+=1)),M=!0)}const j=s.a5(E.center.lng);return M&&j<Math.abs(j-1)&&C.forEach(V=>{V.x-=1}),{polygon:C,unwrapped:M}}(lt(l,h).map(C=>new s.P(at(C.x),C.y)),h);return{polygon:B.polygon.map(C=>new s.L(C.x,C.y)),unwrapped:B.unwrapped}}}function lt(g,l){return s.a9(g,h=>{const _=l.pointCoordinate3D(h);h.x=_.x,h.y=_.y},1/256)}function at(g){return g<0?1+g%1:g%1}function Qe(g){return 100*g|0}function It(g,l,h,_,B){const C=function(E,M){if(E)return B(E);if(M){g.url&&M.tiles&&g.tiles&&delete g.tiles;const k=s.ac(s.e(M,g),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);M.vector_layers&&(k.vectorLayers=M.vector_layers,k.vectorLayerIds=k.vectorLayers.map(F=>F.id)),M.raster_layers&&(k.rasterLayers=M.raster_layers,k.rasterLayerIds=k.rasterLayers.map(F=>F.id)),k.tiles=l.canonicalizeTileset(k,g.url),B(null,k)}};return g.url?s.g(l.transformRequest(l.normalizeSourceURL(g.url,null,h,_),s.R.Source),C):s.f.frame(()=>C(null,g))}class Et{constructor(l,h,_){this.bounds=s.ad.convert(this.validateBounds(l)),this.minzoom=h||0,this.maxzoom=_||24}validateBounds(l){return Array.isArray(l)&&l.length===4?[Math.max(-180,l[0]),Math.max(-90,l[1]),Math.min(180,l[2]),Math.min(90,l[3])]:[-180,-90,180,90]}contains(l){const h=Math.pow(2,l.z),_=Math.floor(s.a5(this.bounds.getWest())*h),B=Math.floor(s.ae(this.bounds.getNorth())*h),C=Math.ceil(s.a5(this.bounds.getEast())*h),E=Math.ceil(s.ae(this.bounds.getSouth())*h);return l.x>=_&&l.x<C&&l.y>=B&&l.y<E}}class Rt extends s.E{constructor(l,h,_,B){if(super(),this.id=l,this.dispatcher=_,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.e(this,s.ac(h,["url","scheme","tileSize","promoteId"])),this._options=s.e({type:"vector"},h),this._collectResourceTiming=!!h.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(B),this._tileWorkers={},this._deduped=new s.af}load(l){this._loaded=!1,this.fire(new s.b("dataloading",{dataType:"source"}));const h=Array.isArray(this.map._language)?this.map._language.join():this.map._language,_=this.map._worldview;this._tileJSONRequest=It(this._options,this.map._requestManager,h,_,(B,C)=>{this._tileJSONRequest=null,this._loaded=!0,B?(h&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${h}`),_&&_.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${_}`),this.fire(new s.a(B))):C&&(s.e(this,C),C.bounds&&(this.tileBounds=new Et(C.bounds,this.minzoom,this.maxzoom)),s.aj(C.tiles,this.map._requestManager._customAccessToken),this.fire(new s.b("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.b("data",{dataType:"source",sourceDataType:"content"}))),l&&l(B)})}loaded(){return this._loaded}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}onAdd(l){this.map=l,this.load()}reload(){this.cancelTileJSONRequest();const l=s.ag(this.id,this.scope);this.load(()=>this.map.style.clearSource(l))}setTiles(l){return this._options.tiles=l,this.reload(),this}setUrl(l){return this.url=l,this._options.url=l,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return s.e({},this._options)}loadTile(l,h){const _=this.map._requestManager.normalizeTileURL(l.tileID.canonical.url(this.tiles,this.scheme)),B={request:this.map._requestManager.transformRequest(_,s.R.Tile),data:void 0,uid:l.uid,tileID:l.tileID,tileZoom:l.tileZoom,zoom:l.tileID.overscaledZ,tileSize:this.tileSize*l.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,pixelRatio:s.f.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:l.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,extraShadowCaster:l.isExtraShadowCaster};if(B.request.collectResourceTiming=this._collectResourceTiming,l.actor&&l.state!=="expired")l.state==="loading"?l.reloadCallback=h:l.request=l.actor.send("reloadTile",B,C.bind(this));else if(l.actor=this._tileWorkers[_]=this._tileWorkers[_]||this.dispatcher.getActor(),this.dispatcher.ready)l.request=l.actor.send("loadTile",B,C.bind(this),void 0,!0);else{const E=s.ah.call({deduped:this._deduped},B,(M,k)=>{M||!k?C.call(this,M):(B.data={cacheControl:k.cacheControl,expires:k.expires,rawData:k.rawData.slice(0)},l.actor&&l.actor.send("loadTile",B,C.bind(this),void 0,!0))},!0);l.request={cancel:E}}function C(E,M){return delete l.request,l.aborted?h(null):E&&E.status!==404?h(E):(M&&M.resourceTiming&&(l.resourceTiming=M.resourceTiming),this.map._refreshExpiredTiles&&M&&l.setExpiryData(M),l.loadVectorData(M,this.map.painter),s.ai(this.dispatcher),h(null),void(l.reloadCallback&&(this.loadTile(l,l.reloadCallback),l.reloadCallback=null)))}}abortTile(l){l.request&&(l.request.cancel(),delete l.request),l.actor&&l.actor.send("abortTile",{uid:l.uid,type:this.type,source:this.id,scope:this.scope})}unloadTile(l){l.actor&&l.actor.send("removeTile",{uid:l.uid,type:this.type,source:this.id,scope:this.scope}),l.destroy()}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class zt extends s.E{constructor(l,h,_,B){super(),this.id=l,this.dispatcher=_,this.setEventedParent(B),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.e({type:"raster"},h),s.e(this,s.ac(h,["url","scheme","tileSize"]))}load(l){this._loaded=!1,this.fire(new s.b("dataloading",{dataType:"source"})),this._tileJSONRequest=It(this._options,this.map._requestManager,null,null,(h,_)=>{this._tileJSONRequest=null,this._loaded=!0,h?this.fire(new s.a(h)):_&&(s.e(this,_),_.bounds&&(this.tileBounds=new Et(_.bounds,this.minzoom,this.maxzoom)),s.aj(_.tiles),this.fire(new s.b("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.b("data",{dataType:"source",sourceDataType:"content"}))),l&&l(h)})}loaded(){return this._loaded}onAdd(l){this.map=l,this.load()}reload(){this.cancelTileJSONRequest();const l=s.ag(this.id,this.scope);this.load(()=>this.map.style.clearSource(l))}setTiles(l){return this._options.tiles=l,this.reload(),this}setUrl(l){return this.url=l,this._options.url=l,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return s.e({},this._options)}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}loadTile(l,h){const _=s.f.devicePixelRatio>=2,B=this.map._requestManager.normalizeTileURL(l.tileID.canonical.url(this.tiles,this.scheme),_,this.tileSize);l.request=s.d(this.map._requestManager.transformRequest(B,s.R.Tile),(C,E,M,k)=>(delete l.request,l.aborted?(l.state="unloaded",h(null)):C?(l.state="errored",h(C)):E?(this.map._refreshExpiredTiles&&l.setExpiryData({cacheControl:M,expires:k}),l.setTexture(E,this.map.painter),l.state="loaded",s.ai(this.dispatcher),void h(null)):h(null)))}abortTile(l,h){l.request&&(l.request.cancel(),delete l.request),h()}unloadTile(l,h){l.texture&&l.texture instanceof s.T?(l.destroy(!0),l.texture&&l.texture instanceof s.T&&this.map.painter.saveTileTexture(l.texture)):l.destroy(),h()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Dt extends zt{constructor(l,h,_,B){super(l,h,_,B),this.type="raster-array",this.maxzoom=22,this._options=s.e({type:"raster-array"},h)}triggerRepaint(l){const h=this.map.painter._terrain,_=this.map.style.getSourceCache(this.id);h&&h.enabled&&_&&h._clearRenderCacheForTile(_.id,l.tileID),this.map.triggerRepaint()}loadTile(l,h){const _=this.map._requestManager.normalizeTileURL(l.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize),B=this.map._requestManager.transformRequest(_,s.R.Tile);l.requestParams=B,l.actor||(l.actor=this.dispatcher.getActor()),l.request=l.fetchHeader(void 0,(C,E,M,k)=>{if(delete l.request,l.aborted)return l.state="unloaded",h(null);if(C)return C.code===20?void 0:(l.state="errored",h(C));this.map._refreshExpiredTiles&&l.setExpiryData({cacheControl:M,expires:k}),l.state="empty",h(null)})}unloadTile(l){const h=l.texture;h&&h instanceof s.T?(l.destroy(!0),this.map.painter.saveTileTexture(h)):(l.destroy(),l.flushQueues(),l._isHeaderLoaded=!1,delete l._mrt,delete l.textureDescriptor),l.fbo&&(l.fbo.destroy(),delete l.fbo),delete l.request,delete l.requestParams,delete l.neighboringTiles,l.state="unloaded"}prepareTile(l,h,_){l._isHeaderLoaded&&(l.state!=="empty"&&(l.state="reloading"),l.fetchBand(h,_,(B,C)=>{if(B)return l.state="errored",this.fire(new s.a(B)),void this.triggerRepaint(l);C&&(l.setTexture(C,this.map.painter),l.state="loaded",this.triggerRepaint(l))}))}getInitialBand(l){if(!this.rasterLayers)return 0;const h=this.rasterLayers.find(({id:C})=>C===l),_=h&&h.fields,B=_&&_.bands&&_.bands;return B?B[0]:0}getTextureDescriptor(l,h,_){if(!l)return;const B=h.sourceLayer||this.rasterLayerIds&&this.rasterLayerIds[0];if(!B)return;let C=null;h instanceof s.an?C=h.paint.get("raster-array-band"):h instanceof s.ao&&(C=h.paint.get("raster-particle-array-band"));const E=C||this.getInitialBand(B);if(E!=null)if(l.textureDescriptor){if(!l.updateNeeded(B,E)||_)return Object.assign({},l.textureDescriptor,{texture:l.texture})}else this.prepareTile(l,B,E)}}const Ht=32,Mt=33,Br=new Uint16Array(8184);for(let g=0;g<2046;g++){let l=g+2,h=0,_=0,B=0,C=0,E=0,M=0;for(1&l?B=C=E=Ht:h=_=M=Ht;(l>>=1)>1;){const F=h+B>>1,j=_+C>>1;1&l?(B=h,C=_,h=E,_=M):(h=B,_=C,B=E,C=M),E=F,M=j}const k=4*g;Br[k+0]=h,Br[k+1]=_,Br[k+2]=B,Br[k+3]=C}const en=new Uint16Array(2178),or=new Uint8Array(1089),Nn=new Uint16Array(1089);function ti(g){return g===0?-.03125:g===32?.03125:0}class Fn{constructor(l,h,_,B){this.id=Fn.uniqueIdxCounter,Fn.uniqueIdxCounter++,this.context=l;const C=l.gl;this.buffer=C.createBuffer(),this.dynamicDraw=!!_,this.context.unbindVAO(),l.bindElementBuffer.set(this.buffer),C.bufferData(C.ELEMENT_ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?C.DYNAMIC_DRAW:C.STATIC_DRAW),this.dynamicDraw||B||h.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(l){this.id=Fn.uniqueIdxCounter,Fn.uniqueIdxCounter++;const h=this.context.gl;this.context.unbindVAO(),this.bind(),h.bufferSubData(h.ELEMENT_ARRAY_BUFFER,0,l.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}Fn.uniqueIdxCounter=0;const Ni={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Vi{constructor(l,h,_,B,C,E){this.length=h.length,this.attributes=_,this.itemSize=h.bytesPerElement,this.dynamicDraw=B,this.instanceCount=E,this.context=l;const M=l.gl;this.buffer=M.createBuffer(),l.bindVertexBuffer.set(this.buffer),M.bufferData(M.ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?M.DYNAMIC_DRAW:M.STATIC_DRAW),this.dynamicDraw||C||h.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(l){const h=this.context.gl;this.bind(),h.bufferSubData(h.ARRAY_BUFFER,0,l.arrayBuffer)}enableAttributes(l,h){for(let _=0;_<this.attributes.length;_++){const B=h.attributes[this.attributes[_].name];B!==void 0&&l.enableVertexAttribArray(B)}}setVertexAttribPointers(l,h,_){for(let B=0;B<this.attributes.length;B++){const C=this.attributes[B],E=h.attributes[C.name];E!==void 0&&l.vertexAttribPointer(E,C.components,l[Ni[C.type]],!1,this.itemSize,C.offset+this.itemSize*(_||0))}}setVertexAttribDivisor(l,h,_){for(let B=0;B<this.attributes.length;B++){const C=h.attributes[this.attributes[B].name];C!==void 0&&this.instanceCount&&this.instanceCount>0&&l.vertexAttribDivisor(C,_)}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class pn{constructor(l){this.gl=l.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(l){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class ha extends pn{getDefault(){return s.ax.transparent}set(l){const h=this.current;(l.r!==h.r||l.g!==h.g||l.b!==h.b||l.a!==h.a||this.dirty)&&(this.gl.clearColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class Za extends pn{getDefault(){return 1}set(l){(l!==this.current||this.dirty)&&(this.gl.clearDepth(l),this.current=l,this.dirty=!1)}}class ho extends pn{getDefault(){return 0}set(l){(l!==this.current||this.dirty)&&(this.gl.clearStencil(l),this.current=l,this.dirty=!1)}}class Sc extends pn{getDefault(){return[!0,!0,!0,!0]}set(l){const h=this.current;(l[0]!==h[0]||l[1]!==h[1]||l[2]!==h[2]||l[3]!==h[3]||this.dirty)&&(this.gl.colorMask(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class ls extends pn{getDefault(){return!0}set(l){(l!==this.current||this.dirty)&&(this.gl.depthMask(l),this.current=l,this.dirty=!1)}}class us extends pn{getDefault(){return 255}set(l){(l!==this.current||this.dirty)&&(this.gl.stencilMask(l),this.current=l,this.dirty=!1)}}class Ph extends pn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(l){const h=this.current;(l.func!==h.func||l.ref!==h.ref||l.mask!==h.mask||this.dirty)&&(this.gl.stencilFunc(l.func,l.ref,l.mask),this.current=l,this.dirty=!1)}}class ul extends pn{getDefault(){const l=this.gl;return[l.KEEP,l.KEEP,l.KEEP]}set(l){const h=this.current;(l[0]!==h[0]||l[1]!==h[1]||l[2]!==h[2]||this.dirty)&&(this.gl.stencilOp(l[0],l[1],l[2]),this.current=l,this.dirty=!1)}}class Hl extends pn{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;l?h.enable(h.STENCIL_TEST):h.disable(h.STENCIL_TEST),this.current=l,this.dirty=!1}}class On extends pn{getDefault(){return[0,1]}set(l){const h=this.current;(l[0]!==h[0]||l[1]!==h[1]||this.dirty)&&(this.gl.depthRange(l[0],l[1]),this.current=l,this.dirty=!1)}}class Ai extends pn{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;l?h.enable(h.DEPTH_TEST):h.disable(h.DEPTH_TEST),this.current=l,this.dirty=!1}}class Wl extends pn{getDefault(){return this.gl.LESS}set(l){(l!==this.current||this.dirty)&&(this.gl.depthFunc(l),this.current=l,this.dirty=!1)}}class cl extends pn{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;l?h.enable(h.BLEND):h.disable(h.BLEND),this.current=l,this.dirty=!1}}class Ps extends pn{getDefault(){const l=this.gl;return[l.ONE,l.ZERO,l.ONE,l.ZERO]}set(l){const h=this.current;(l[0]!==h[0]||l[1]!==h[1]||l[2]!==h[2]||l[3]!==h[3]||this.dirty)&&(this.gl.blendFuncSeparate(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class Tc extends pn{getDefault(){return s.ax.transparent}set(l){const h=this.current;(l.r!==h.r||l.g!==h.g||l.b!==h.b||l.a!==h.a||this.dirty)&&(this.gl.blendColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class Gr extends pn{getDefault(){return this.gl.FUNC_ADD}set(l){(l!==this.current||this.dirty)&&(this.gl.blendEquationSeparate(l,l),this.current=l,this.dirty=!1)}}class mn extends pn{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;l?h.enable(h.CULL_FACE):h.disable(h.CULL_FACE),this.current=l,this.dirty=!1}}class Zr extends pn{getDefault(){return this.gl.BACK}set(l){(l!==this.current||this.dirty)&&(this.gl.cullFace(l),this.current=l,this.dirty=!1)}}class Ac extends pn{getDefault(){return this.gl.CCW}set(l){(l!==this.current||this.dirty)&&(this.gl.frontFace(l),this.current=l,this.dirty=!1)}}let No=class extends pn{getDefault(){return null}set(g){(g!==this.current||this.dirty)&&(this.gl.useProgram(g),this.current=g,this.dirty=!1)}};class cd extends pn{getDefault(){return this.gl.TEXTURE0}set(l){(l!==this.current||this.dirty)&&(this.gl.activeTexture(l),this.current=l,this.dirty=!1)}}class Mh extends pn{getDefault(){const l=this.gl;return[0,0,l.drawingBufferWidth,l.drawingBufferHeight]}set(l){const h=this.current;(l[0]!==h[0]||l[1]!==h[1]||l[2]!==h[2]||l[3]!==h[3]||this.dirty)&&(this.gl.viewport(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class Po extends pn{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.bindFramebuffer(h.FRAMEBUFFER,l),this.current=l,this.dirty=!1}}class Fi extends pn{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.bindRenderbuffer(h.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class Zl extends pn{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.bindTexture(h.TEXTURE_2D,l),this.current=l,this.dirty=!1}}class cs extends pn{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.bindBuffer(h.ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class Gt extends pn{getDefault(){return null}set(l){const h=this.gl;h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class hn extends pn{getDefault(){return null}set(l){this.gl&&(l!==this.current||this.dirty)&&(this.gl.bindVertexArray(l),this.current=l,this.dirty=!1)}}class ln extends pn{getDefault(){return 4}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_ALIGNMENT,l),this.current=l,this.dirty=!1}}class Yo extends pn{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l),this.current=l,this.dirty=!1}}class hl extends pn{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,l),this.current=l,this.dirty=!1}}class tn extends pn{constructor(l,h){super(l),this.context=l,this.parent=h}getDefault(){return null}}class ku extends tn{setDirty(){this.dirty=!0}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,l,0),this.current=l,this.dirty=!1}}class fl extends tn{attachment(){return this.gl.DEPTH_ATTACHMENT}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferRenderbuffer(h.FRAMEBUFFER,this.attachment(),h.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class dl extends tn{attachment(){return this.gl.DEPTH_ATTACHMENT}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferTexture2D(h.FRAMEBUFFER,this.attachment(),h.TEXTURE_2D,l,0),this.current=l,this.dirty=!1}}class Fo extends fl{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class fi{constructor(l,h,_,B,C){this.context=l,this.width=h,this.height=_;const E=this.framebuffer=l.gl.createFramebuffer();B&&(this.colorAttachment=new ku(l,E)),C&&(this.depthAttachmentType=C,this.depthAttachment=C==="renderbuffer"?new fl(l,E):new dl(l,E))}destroy(){const l=this.context.gl;if(this.colorAttachment){const h=this.colorAttachment.get();h&&l.deleteTexture(h)}if(this.depthAttachment&&this.depthAttachmentType)if(this.depthAttachmentType==="renderbuffer"){const h=this.depthAttachment.get();h&&l.deleteRenderbuffer(h)}else{const h=this.depthAttachment.get();h&&l.deleteTexture(h)}l.deleteFramebuffer(this.framebuffer)}}class dr{constructor(l,h,_){this.func=l,this.mask=h,this.range=_}}dr.ReadOnly=!1,dr.ReadWrite=!0,dr.disabled=new dr(519,dr.ReadOnly,[0,1]);const nn=7680;class yr{constructor(l,h,_,B,C,E){this.test=l,this.ref=h,this.mask=_,this.fail=B,this.depthFail=C,this.pass=E}}yr.disabled=new yr({func:519,mask:0},0,0,nn,nn,nn);const Un=771;class Nr{constructor(l,h,_,B){this.blendFunction=l,this.blendColor=h,this.mask=_,this.blendEquation=B}}Nr.Replace=[1,0,1,0],Nr.disabled=new Nr(Nr.Replace,s.ax.transparent,[!1,!1,!1,!1]),Nr.unblended=new Nr(Nr.Replace,s.ax.transparent,[!0,!0,!0,!0]),Nr.alphaBlended=new Nr([1,Un,1,Un],s.ax.transparent,[!0,!0,!0,!0]),Nr.multiply=new Nr([774,0,774,0],s.ax.transparent,[!0,!0,!0,!0]);const pl=1029,eo=2305;class cr{constructor(l,h,_){this.enable=l,this.mode=h,this.frontFace=_}}cr.disabled=new cr(!1,pl,eo),cr.backCCW=new cr(!0,pl,eo),cr.backCW=new cr(!0,pl,2304),cr.frontCW=new cr(!0,1028,2304),cr.frontCCW=new cr(!0,1028,eo);class ml{constructor(l,h){this.gl=l,this.clearColor=new ha(this),this.clearDepth=new Za(this),this.clearStencil=new ho(this),this.colorMask=new Sc(this),this.depthMask=new ls(this),this.stencilMask=new us(this),this.stencilFunc=new Ph(this),this.stencilOp=new ul(this),this.stencilTest=new Hl(this),this.depthRange=new On(this),this.depthTest=new Ai(this),this.depthFunc=new Wl(this),this.blend=new cl(this),this.blendFunc=new Ps(this),this.blendColor=new Tc(this),this.blendEquation=new Gr(this),this.cullFace=new mn(this),this.cullFaceSide=new Zr(this),this.frontFace=new Ac(this),this.program=new No(this),this.activeTexture=new cd(this),this.viewport=new Mh(this),this.bindFramebuffer=new Po(this),this.bindRenderbuffer=new Fi(this),this.bindTexture=new Zl(this),this.bindVertexBuffer=new cs(this),this.bindElementBuffer=new Gt(this),this.bindVertexArrayOES=new hn(this),this.pixelStoreUnpack=new ln(this),this.pixelStoreUnpackPremultiplyAlpha=new Yo(this),this.pixelStoreUnpackFlipY=new hl(this),this.options=h?{...h}:{},this.options.extTextureFilterAnisotropicForceOff||(this.extTextureFilterAnisotropic=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=l.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT))),this.extDebugRendererInfo=l.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=l.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=l.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),this.options.extTextureFloatLinearForceOff||(this.extTextureFloatLinear=l.getExtension("OES_texture_float_linear")),this.extRenderToTextureHalfFloat=l.getExtension("EXT_color_buffer_half_float"),this.extTimerQuery=l.getExtension("EXT_disjoint_timer_query_webgl2"),this.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE),this.maxPointSize=l.getParameter(l.ALIASED_POINT_SIZE_RANGE)[1]}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArrayOES.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(l,h,_){return new Fn(this,l,h,_)}createVertexBuffer(l,h,_,B,C){return new Vi(this,l,h,_,B,C)}createRenderbuffer(l,h,_){const B=this.gl,C=B.createRenderbuffer();return this.bindRenderbuffer.set(C),B.renderbufferStorage(B.RENDERBUFFER,l,h,_),this.bindRenderbuffer.set(null),C}createFramebuffer(l,h,_,B){return new fi(this,l,h,_,B)}clear({color:l,depth:h,stencil:_,colorMask:B}){const C=this.gl;let E=0;l&&(E|=C.COLOR_BUFFER_BIT,this.clearColor.set(l),this.colorMask.set(B||[!0,!0,!0,!0])),h!==void 0&&(E|=C.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(h),this.depthMask.set(!0)),_!==void 0&&(E|=C.STENCIL_BUFFER_BIT,this.clearStencil.set(_),this.stencilMask.set(255)),C.clear(E)}setCullFace(l){l.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(l.mode),this.frontFace.set(l.frontFace))}setDepthMode(l){l.func!==this.gl.ALWAYS||l.mask?(this.depthTest.set(!0),this.depthFunc.set(l.func),this.depthMask.set(l.mask),this.depthRange.set(l.range)):this.depthTest.set(!1)}setStencilMode(l){l.test.func!==this.gl.ALWAYS||l.mask?(this.stencilTest.set(!0),this.stencilMask.set(l.mask),this.stencilOp.set([l.fail,l.depthFail,l.pass]),this.stencilFunc.set({func:l.test.func,ref:l.ref,mask:l.test.mask})):this.stencilTest.set(!1)}setColorMode(l){w(l.blendFunction,Nr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(l.blendFunction),this.blendColor.set(l.blendColor),l.blendEquation?this.blendEquation.set(l.blendEquation):this.blendEquation.setDefault()),this.colorMask.set(l.mask)}unbindVAO(){this.bindVertexArrayOES.set(null)}}var Ms=s.ay([{name:"a_pos",type:"Float32",components:3}]);class di{constructor(l,h,_,B){const C={width:_[0],height:_[1],data:null},E=l.gl;this.targetColorTexture=new s.T(l,C,E.RGBA,{useMipmap:!1}),this.backgroundColorTexture=new s.T(l,C,E.RGBA,{useMipmap:!1}),this.context=l,this.setNumParticles(h,B),this.lastInvalidatedAt=0}setNumParticles(l,h){if(this.numParticles===h)return;(this.particleVertices0||this.particleVertices1||this.particleSegment)&&(this.particleVertices0.destroy(),this.particleVertices1.destroy(),this.particleSegment.destroy());const _=new s.az;_.reserve(Math.round(h));const B=s.aA(l.key);for(let C=0;C<h;C++)_.emplaceBack(B(),B(),B());this.particleVertices0=this.context.createVertexBuffer(_,Ms.members,!0),this.particleVertices1=this.context.createVertexBuffer(_,Ms.members,!0),this.particleSegment=s.aB.simpleSegment(0,0,this.particleVertices0.length,0),this.numParticles=h}update(l){return!(this.lastInvalidatedAt<l&&(this.lastInvalidatedAt=s.f.now(),1))}destroy(){this.targetColorTexture.destroy(),this.backgroundColorTexture.destroy(),this.particleVertices0.destroy(),this.particleVertices1.destroy(),this.particleSegment.destroy()}}const oi={type:2,extent:s.V,loadGeometry:()=>[[new s.P(0,0),new s.P(s.V+1,0),new s.P(s.V+1,s.V+1),new s.P(0,s.V+1),new s.P(0,0)]]};class Jo{constructor(l,h,_,B,C){this.tileID=l,this.uid=s.aC(),this.uses=0,this.tileSize=h,this.tileZoom=_,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=C,B&&B.style&&(this._lastUpdatedBrightness=B.style.getBrightness()),this.expiredRequestCount=0,this.state="loading",B&&B.transform&&(this.projection=B.transform.projection)}registerFadeDuration(l){const h=l+this.timeAdded;h<s.f.now()||this.fadeEndTime&&h<this.fadeEndTime||(this.fadeEndTime=h)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=s.as(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(l,h,_){if(this.unloadVectorData(),this.state="loaded",l){l.featureIndex&&(this.latestFeatureIndex=l.featureIndex,l.rawTileData?(this.latestRawTileData=l.rawTileData,this.latestFeatureIndex.rawTileData=l.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=l.collisionBoxArray,this.buckets=function(B,C){const E={};if(!C)return E;for(const M of B){const k=M.layerIds.map(F=>C.getLayer(F)).filter(Boolean);if(k.length!==0){M.layers=k,M.stateDependentLayerIds&&(M.stateDependentLayers=M.stateDependentLayerIds.map(F=>k.filter(j=>j.id===F)[0]));for(const F of k)E[F.fqid]=M}}return E}(l.buckets,h.style),this.hasSymbolBuckets=!1;for(const B in this.buckets){const C=this.buckets[B];if(C instanceof s.aE){if(this.hasSymbolBuckets=!0,!_)break;C.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const B in this.buckets){const C=this.buckets[B];if(C instanceof s.aE&&C.hasRTLText){this.hasRTLText=!0,s.aF();break}}this.queryPadding=0;for(const B in this.buckets){const C=this.buckets[B],E=h.style.getOwnLayer(B);if(!E)continue;const M=E.queryRadius(C);this.queryPadding=Math.max(this.queryPadding,M)}l.imageAtlas&&(this.imageAtlas=l.imageAtlas),l.glyphAtlasImage&&(this.glyphAtlasImage=l.glyphAtlasImage),l.lineAtlas&&(this.lineAtlas=l.lineAtlas),this._lastUpdatedBrightness=l.brightness}else this.collisionBoxArray=new s.aD}unloadVectorData(){if(this.hasData()){for(const l in this.buckets)this.buckets[l].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(l){return this.buckets[l.fqid]}upload(l){for(const B in this.buckets){const C=this.buckets[B];C.uploadPending()&&C.upload(l)}const h=l.gl,_=this.imageAtlas;if(_&&!_.uploaded){const B=!!Object.keys(_.patternPositions).length;this.imageAtlasTexture=new s.T(l,_.image,h.RGBA,{useMipmap:B}),this.imageAtlas.uploaded=!0}this.glyphAtlasImage&&(this.glyphAtlasTexture=new s.T(l,this.glyphAtlasImage,h.R8),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new s.T(l,this.lineAtlas.image,h.R8),this.lineAtlas.uploaded=!0)}prepare(l,h,_){if(this.imageAtlas&&this.imageAtlasTexture&&this.imageAtlas.patchUpdatedImages(l,this.imageAtlasTexture,_),!h||!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData)return;const B=h.style.getBrightness();(this._lastUpdatedBrightness||B)&&(this._lastUpdatedBrightness&&B&&Math.abs(this._lastUpdatedBrightness-B)<.001||(this._lastUpdatedBrightness=B,this.updateBuckets(void 0,h)))}queryRenderedFeatures(l,h,_,B,C,E,M,k){return this.latestFeatureIndex&&(this.latestFeatureIndex.rawTileData||this.latestFeatureIndex.is3DTile)?this.latestFeatureIndex.query({tileResult:B,pixelPosMatrix:M,transform:E,params:C,tileTransform:this.tileTransform},l,h,_):{}}querySourceFeatures(l,h){const _=this.latestFeatureIndex;if(!_||!_.rawTileData)return;const B=_.loadVTLayers(),C=h?h.sourceLayer:"",E=B._geojsonTileLayer||B[C];if(!E)return;const M=s.aG(h&&h.filter),{z:k,x:F,y:j}=this.tileID.canonical,V={z:k,x:F,y:j};for(let Y=0;Y<E.length;Y++){const te=E.feature(Y);if(M.needGeometry){const ue=s.aH(te,!0);if(!M.filter(new s.K(this.tileID.overscaledZ),ue,this.tileID.canonical))continue}else if(!M.filter(new s.K(this.tileID.overscaledZ),te))continue;const le=_.getId(te,C),ae=new s.aI(te,k,F,j,le);ae.tile=V,l.push(ae)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}bucketsLoaded(){for(const l in this.buckets)if(this.buckets[l].uploadPending())return!1;return!0}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(l){const h=this.expirationTime;if(l.cacheControl){const _=s.aJ(l.cacheControl);_["max-age"]&&(this.expirationTime=Date.now()+1e3*_["max-age"])}else l.expires&&(this.expirationTime=new Date(l.expires).getTime());if(this.expirationTime){const _=Date.now();let B=!1;if(this.expirationTime>_)B=!1;else if(h)if(this.expirationTime<h)B=!0;else{const C=this.expirationTime-h;C?this.expirationTime=_+Math.max(C,3e4):B=!0}else B=!0;B?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(l,h){this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(l).length!==0&&h&&this.updateBuckets(l,h)}updateBuckets(l,h){if(!this.latestFeatureIndex)return;const _=this.latestFeatureIndex.loadVTLayers(),B=h.style.listImages(),C=h.style.getBrightness();for(const E in this.buckets){if(!h.style.hasLayer(E))continue;const M=this.buckets[E],k=M.layers[0].sourceLayer||"_geojsonTileLayer",F=_[k];let j={};if(l&&(j=l[k],!F||!j||Object.keys(j).length===0))continue;if(M.update(j,F,B,this.imageAtlas&&this.imageAtlas.patternPositions||{},C),M instanceof s.aK||M instanceof s.aL){const Y=h.style.getOwnSourceCache(M.layers[0].source);h._terrain&&h._terrain.enabled&&Y&&M.programConfigurations.needsUpload&&h._terrain._clearRenderCacheForTile(Y.id,this.tileID)}const V=h&&h.style&&h.style.getOwnLayer(E);V&&(this.queryPadding=Math.max(this.queryPadding,V.queryRadius(M)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<s.f.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(l){this.symbolFadeHoldUntil=s.f.now()+l}setTexture(l,h){const _=h.context,B=_.gl;this.texture=this.texture||h.getTileTexture(l.width),this.texture&&this.texture instanceof s.T?this.texture.update(l,{useMipmap:!0}):(this.texture=new s.T(_,l,B.RGBA,{useMipmap:!0}),this.texture.bind(B.LINEAR,B.CLAMP_TO_EDGE))}setDependencies(l,h){const _={};for(const B of h)_[B]=!0;this.dependencies[l]=_}hasDependency(l,h){for(const _ of l){const B=this.dependencies[_];if(B){for(const C of h)if(B[C])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(l,h){if(!h||h.name==="mercator"||this._tileDebugBuffer)return;const _=s.aM(oi,this.tileID.canonical,this.tileTransform)[0],B=new s.aN,C=new s.aO;for(let E=0;E<_.length;E++){const{x:M,y:k}=_[E];B.emplaceBack(M,k),C.emplaceBack(E)}C.emplaceBack(0),this._tileDebugIndexBuffer=l.createIndexBuffer(C),this._tileDebugBuffer=l.createVertexBuffer(B,s.aP.members),this._tileDebugSegments=s.aB.simpleSegment(0,0,B.length,C.length)}_makeTileBoundsBuffers(l,h){if(this._tileBoundsBuffer||!h||h.name==="mercator")return;const _=s.aM(oi,this.tileID.canonical,this.tileTransform)[0];let B,C;if(this.isRaster){const E=function(M,k){const F=s.as(M,k),j=Math.pow(2,M.z);for(let ue=0;ue<Mt;ue++)for(let ne=0;ne<Mt;ne++){const he=s.at((M.x+(ne+ti(ne))/Ht)/j),ye=s.au((M.y+(ue+ti(ue))/Ht)/j),de=k.project(he,ye),ve=ue*Mt+ne;en[2*ve+0]=Math.round((de.x*F.scale-F.x)*s.V),en[2*ve+1]=Math.round((de.y*F.scale-F.y)*s.V)}or.fill(0),Nn.fill(0);for(let ue=2045;ue>=0;ue--){const ne=4*ue,he=Br[ne+0],ye=Br[ne+1],de=Br[ne+2],ve=Br[ne+3],ce=he+de>>1,xe=ye+ve>>1,Ee=ce+xe-ye,Pe=xe+he-ce,Re=ye*Mt+he,Xe=ve*Mt+de,Fe=xe*Mt+ce,it=Math.hypot((en[2*Re+0]+en[2*Xe+0])/2-en[2*Fe+0],(en[2*Re+1]+en[2*Xe+1])/2-en[2*Fe+1])>=16;or[Fe]=or[Fe]||(it?1:0),ue<1022&&(or[Fe]=or[Fe]||or[(ye+Pe>>1)*Mt+(he+Ee>>1)]||or[(ve+Pe>>1)*Mt+(de+Ee>>1)])}const V=new s.av,Y=new s.aw;let te=0;function le(ue,ne){const he=ne*Mt+ue;return Nn[he]===0&&(V.emplaceBack(en[2*he+0],en[2*he+1],ue*s.V/Ht,ne*s.V/Ht),Nn[he]=++te),Nn[he]-1}function ae(ue,ne,he,ye,de,ve){const ce=ue+he>>1,xe=ne+ye>>1;if(Math.abs(ue-de)+Math.abs(ne-ve)>1&&or[xe*Mt+ce])ae(de,ve,ue,ne,ce,xe),ae(he,ye,de,ve,ce,xe);else{const Ee=le(ue,ne),Pe=le(he,ye),Re=le(de,ve);Y.emplaceBack(Ee,Pe,Re)}}return ae(0,0,Ht,Ht,Ht,0),ae(Ht,Ht,0,0,0,Ht),{vertices:V,indices:Y}}(this.tileID.canonical,h);B=E.vertices,C=E.indices}else{B=new s.av,C=new s.aw;for(const{x:M,y:k}of _)B.emplaceBack(M,k,0,0);const E=s.aQ(B.int16,void 0,4);for(let M=0;M<E.length;M+=3)C.emplaceBack(E[M],E[M+1],E[M+2])}this._tileBoundsBuffer=l.createVertexBuffer(B,s.aR.members),this._tileBoundsIndexBuffer=l.createIndexBuffer(C),this._tileBoundsSegments=s.aB.simpleSegment(0,0,B.length,C.length)}_makeGlobeTileDebugBuffers(l,h){const _=h.projection;if(!_||_.name!=="globe"||h.freezeTileCoverage)return;const B=this.tileID.canonical,C=s.aS(B,h),E=s.aT(C),M=s.S(h.zoom);let k;M>0&&(k=s.a6.invert(new Float64Array(16),h.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(l,B,h,E,k,M),this._makeGlobeTileDebugTextBuffer(l,B,h,E,k,M)}_globePoint(l,h,_,B,C,E,M){let k=s.aU(l,h,_);if(E){const F=1<<_.z,j=s.a5(B.center.lng),V=s.ae(B.center.lat),Y=(_.x+.5)/F-j;let te=0;Y>.5?te=-1:Y<-.5&&(te=1);let le=(l/s.V+_.x)/F+te,ae=(h/s.V+_.y)/F;le=(le-j)*B._pixelsPerMercatorPixel+j,ae=(ae-V)*B._pixelsPerMercatorPixel+V;const ue=[le*B.worldSize,ae*B.worldSize,0];s.N.transformMat4(ue,ue,E),k=s.aV(k,ue,M)}return s.N.transformMat4(k,k,C)}_makeGlobeTileDebugBorderBuffer(l,h,_,B,C,E){const M=new s.aN,k=new s.aO,F=new s.aW,j=(Y,te,le,ae,ue)=>{const ne=(le-Y)/(ue-1),he=(ae-te)/(ue-1),ye=M.length;for(let de=0;de<ue;de++){const ve=Y+de*ne,ce=te+de*he;M.emplaceBack(ve,ce);const xe=this._globePoint(ve,ce,h,_,B,C,E);F.emplaceBack(xe[0],xe[1],xe[2]),k.emplaceBack(ye+de)}},V=s.V;j(0,0,V,0,16),j(V,0,V,V,16),j(V,V,0,V,16),j(0,V,0,0,16),this._tileDebugIndexBuffer=l.createIndexBuffer(k),this._tileDebugBuffer=l.createVertexBuffer(M,s.aP.members),this._globeTileDebugBorderBuffer=l.createVertexBuffer(F,s.aX.members),this._tileDebugSegments=s.aB.simpleSegment(0,0,M.length,k.length)}_makeGlobeTileDebugTextBuffer(l,h,_,B,C,E){const M=s.V/4,k=new s.aN,F=new s.aw,j=new s.aW,V=25;F.reserve(32),k.reserve(V),j.reserve(V);const Y=(te,le)=>V*te+le;for(let te=0;te<V;te++){const le=te*M;for(let ae=0;ae<V;ae++){const ue=ae*M;k.emplaceBack(ue,le);const ne=this._globePoint(ue,le,h,_,B,C,E);j.emplaceBack(ne[0],ne[1],ne[2])}}for(let te=0;te<4;te++)for(let le=0;le<4;le++){const ae=Y(te,le),ue=Y(te,le+1),ne=Y(te+1,le),he=Y(te+1,le+1);F.emplaceBack(ae,ue,ne),F.emplaceBack(ne,ue,he)}this._tileDebugTextIndexBuffer=l.createIndexBuffer(F),this._tileDebugTextBuffer=l.createVertexBuffer(k,s.aP.members),this._globeTileDebugTextBuffer=l.createVertexBuffer(j,s.aX.members),this._tileDebugTextSegments=s.aB.simpleSegment(0,0,V,32)}destroy(l=!1){for(const h in this.buckets)this.buckets[h].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&(this.imageAtlasTexture.destroy(),delete this.imageAtlasTexture),this.glyphAtlasTexture&&(this.glyphAtlasTexture.destroy(),delete this.glyphAtlasTexture),this.lineAtlasTexture&&(this.lineAtlasTexture.destroy(),delete this.lineAtlasTexture),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),!l&&this.texture&&this.texture instanceof s.T&&(this.texture.destroy(),delete this.texture),this.hillshadeFBO&&(this.hillshadeFBO.destroy(),delete this.hillshadeFBO),this.dem&&delete this.dem,this.neighboringTiles&&delete this.neighboringTiles,this.demTexture&&(this.demTexture.destroy(),delete this.demTexture),this.rasterParticleState&&(this.rasterParticleState.destroy(),delete this.rasterParticleState),this.latestFeatureIndex=null,this.state="unloaded"}}const hs={vector:Rt,raster:zt,"raster-dem":class extends zt{constructor(g,l,h,_){super(g,l,h,_),this.type="raster-dem",this.maxzoom=22,this._options=s.e({type:"raster-dem"},l),this.encoding=l.encoding||"mapbox"}loadTile(g,l){const h=this.map._requestManager.normalizeTileURL(g.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function _(B,C){B&&(g.state="errored",l(B)),C&&(g.dem=C,g.dem.onDeserialize(),g.needsHillshadePrepare=!0,g.needsDEMTextureUpload=!0,g.state="loaded",l(null))}g.request=s.d(this.map._requestManager.transformRequest(h,s.R.Tile),(function(B,C,E,M){if(delete g.request,g.aborted)g.state="unloaded",l(null);else if(B)g.state="errored",l(B);else if(C){this.map._refreshExpiredTiles&&g.setExpiryData({cacheControl:E,expires:M});const k=ImageBitmap&&C instanceof ImageBitmap&&s.ak(),F=1-(C.width-s.al(C.width))/2;F<1||g.neighboringTiles||(g.neighboringTiles=this._getNeighboringTiles(g.tileID));const j=k?C:s.f.getImageData(C,F),V={uid:g.uid,coord:g.tileID,source:this.id,scope:this.scope,rawImageData:j,encoding:this.encoding,padding:F};g.actor&&g.state!=="expired"||(g.actor=this.dispatcher.getActor(),g.actor.send("loadDEMTile",V,_.bind(this),void 0,!0))}}).bind(this))}_getNeighboringTiles(g){const l=g.canonical,h=Math.pow(2,l.z),_=(l.x-1+h)%h,B=l.x===0?g.wrap-1:g.wrap,C=(l.x+1+h)%h,E=l.x+1===h?g.wrap+1:g.wrap,M={};return M[new s.am(g.overscaledZ,B,l.z,_,l.y).key]={backfilled:!1},M[new s.am(g.overscaledZ,E,l.z,C,l.y).key]={backfilled:!1},l.y>0&&(M[new s.am(g.overscaledZ,B,l.z,_,l.y-1).key]={backfilled:!1},M[new s.am(g.overscaledZ,g.wrap,l.z,l.x,l.y-1).key]={backfilled:!1},M[new s.am(g.overscaledZ,E,l.z,C,l.y-1).key]={backfilled:!1}),l.y+1<h&&(M[new s.am(g.overscaledZ,B,l.z,_,l.y+1).key]={backfilled:!1},M[new s.am(g.overscaledZ,g.wrap,l.z,l.x,l.y+1).key]={backfilled:!1},M[new s.am(g.overscaledZ,E,l.z,C,l.y+1).key]={backfilled:!1}),M}},"raster-array":Dt,geojson:class extends s.E{constructor(g,l,h,_){super(),this.id=g,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=h.getActor(),this.setEventedParent(_),this._data=l.data,this._options=s.e({},l),this._collectResourceTiming=l.collectResourceTiming,l.maxzoom!==void 0&&(this.maxzoom=l.maxzoom),l.type&&(this.type=l.type),l.attribution&&(this.attribution=l.attribution),this.promoteId=l.promoteId;const B=s.V/this.tileSize;this.workerOptions=s.e({source:this.id,scope:this.scope,cluster:l.cluster||!1,geojsonVtOptions:{buffer:(l.buffer!==void 0?l.buffer:128)*B,tolerance:(l.tolerance!==void 0?l.tolerance:.375)*B,extent:s.V,maxZoom:this.maxzoom,lineMetrics:l.lineMetrics||!1,generateId:l.generateId||!1},superclusterOptions:{maxZoom:l.clusterMaxZoom!==void 0?l.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,l.clusterMinPoints||2),extent:s.V,radius:(l.clusterRadius!==void 0?l.clusterRadius:50)*B,log:!1,generateId:l.generateId||!1},clusterProperties:l.clusterProperties,filter:l.filter},l.workerOptions)}onAdd(g){this.map=g,this.setData(this._data)}setData(g){return this._data=g,this._updateWorkerData(),this}getClusterExpansionZoom(g,l){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:g,source:this.id,scope:this.scope},l),this}getClusterChildren(g,l){return this.actor.send("geojson.getClusterChildren",{clusterId:g,source:this.id,scope:this.scope},l),this}getClusterLeaves(g,l,h,_){return this.actor.send("geojson.getClusterLeaves",{source:this.id,scope:this.scope,clusterId:g,limit:l,offset:h},_),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new s.b("dataloading",{dataType:"source"})),this._loaded=!1;const g=s.e({},this.workerOptions);g.scope=this.scope;const l=this._data;typeof l=="string"?(g.request=this.map._requestManager.transformRequest(s.f.resolveURL(l),s.R.Source),g.request.collectResourceTiming=this._collectResourceTiming):g.data=JSON.stringify(l),this._pendingLoad=this.actor.send(`${this.type}.loadData`,g,(h,_)=>{if(this._loaded=!0,this._pendingLoad=null,h)this.fire(new s.a(h));else{const B={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&_&&_.resourceTiming&&_.resourceTiming[this.id]&&(B.resourceTiming=_.resourceTiming[this.id]),this.fire(new s.b("data",B)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(g,l){const h=g.actor?"reloadTile":"loadTile";g.actor=this.actor;const _={type:this.type,uid:g.uid,tileID:g.tileID,tileZoom:g.tileZoom,zoom:g.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,scope:this.scope,pixelRatio:s.f.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,brightness:this.map.style&&this.map.style.getBrightness()||0};g.request=this.actor.send(h,_,(B,C)=>(delete g.request,g.destroy(),g.aborted?l(null):B?l(B):(g.loadVectorData(C,this.map.painter,h==="reloadTile"),l(null))),void 0,h==="loadTile")}abortTile(g){g.request&&(g.request.cancel(),delete g.request),g.aborted=!0}unloadTile(g){this.actor.send("removeTile",{uid:g.uid,type:this.type,source:this.id,scope:this.scope}),g.destroy()}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return s.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends s.ap{constructor(g,l,h,_){super(g,l,h,_),this.roundZoom=!0,this.type="video",this.options=l}load(){this._loaded=!1;const g=this.options;this.urls=[];for(const l of g.urls)this.urls.push(this.map._requestManager.transformRequest(l,s.R.Source).url);s.aq(this.urls,(l,h)=>{this._loaded=!0,l?this.fire(new s.a(l)):h&&(this.video=h,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(g){if(this.video){const l=this.video.seekable;g<l.start(0)||g>l.end(0)?this.fire(new s.a(new We(`sources.${this.id}`,null,`Playback for this video can be set only between the ${l.start(0)} and ${l.end(0)}-second mark.`))):this.video.currentTime=g}}getVideo(){return this.video}onAdd(g){this.map||(this.map=g,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const g=this.map.painter.context,l=g.gl;this.texture?this.video.paused||(this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),l.texSubImage2D(l.TEXTURE_2D,0,0,0,l.RGBA,l.UNSIGNED_BYTE,this.video)):(this.texture=new s.T(g,this.video,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(g)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:s.ap,model:class extends s.E{constructor(g,l,h,_){super(),this.id=g,this.type="model",this.models=[],this._loaded=!1,this._options=l}load(){const g=[];for(const l in this._options.models){const h=this._options.models[l],_=s.l(this.map._requestManager.transformRequest(h.uri,s.R.Model).url).then(B=>{if(!B)return;const C=s.c(B),E=new s.M(l,h.position,h.orientation,C);E.computeBoundsAndApplyParent(),this.models.push(E)}).catch(B=>{this.fire(new s.a(new Error(`Could not load model ${l} from ${h.uri}: ${B.message}`)))});g.push(_)}return Promise.allSettled(g).then(()=>{this._loaded=!0,this.fire(new s.b("data",{dataType:"source",sourceDataType:"metadata"}))}).catch(l=>{this.fire(new s.a(new Error(`Could not load models: ${l.message}`)))})}onAdd(g){this.map=g,this.load()}hasTransition(){return!1}loaded(){return this._loaded}getModels(){return this.models}loadTile(g,l){}serialize(){return{type:"model"}}},"batched-model":class extends s.E{constructor(g,l,h,_){super(),this.type="batched-model",this.id=g,this.tileSize=512,this._options=l,this.tiles=this._options.tiles,this.maxzoom=l.maxzoom||19,this.minzoom=l.minzoom||0,this.roundZoom=!0,this.usedInConflation=!0,this.dispatcher=h,this.reparseOverscaled=!1,this.scheme="xyz",this._loaded=!1,this.setEventedParent(_)}onAdd(g){this.map=g,this.load()}load(g){this._loaded=!1,this.fire(new s.b("dataloading",{dataType:"source"}));const l=Array.isArray(this.map._language)?this.map._language.join():this.map._language,h=this.map._worldview;this._tileJSONRequest=It(this._options,this.map._requestManager,l,h,(_,B)=>{this._tileJSONRequest=null,this._loaded=!0,_?(l&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${l}`),h&&h.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${h}`),this.fire(new s.a(_))):B&&(s.e(this,B),B.bounds&&(this.tileBounds=new Et(B.bounds,this.minzoom,this.maxzoom)),s.aj(B.tiles,this.map._requestManager._customAccessToken),this.fire(new s.b("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.b("data",{dataType:"source",sourceDataType:"content"}))),g&&g(_)})}hasTransition(){return!1}hasTile(g){return!this.tileBounds||this.tileBounds.contains(g.canonical)}loaded(){return this._loaded}loadTile(g,l){const h=this.map._requestManager.normalizeTileURL(g.tileID.canonical.url(this.tiles,this.scheme)),_={request:this.map._requestManager.transformRequest(h,s.R.Tile),data:void 0,uid:g.uid,tileID:g.tileID,tileZoom:g.tileZoom,zoom:g.tileID.overscaledZ,tileSize:this.tileSize*g.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,showCollisionBoxes:this.map.showCollisionBoxes,isSymbolTile:g.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0};if(g.actor&&g.state!=="expired")if(g.state==="loading")g.reloadCallback=l;else{if(g.buckets){const C=Object.values(g.buckets);for(const E of C)E.dirty=!0;return void(g.state="loaded")}g.request=g.actor.send("reloadTile",_,B.bind(this))}else g.actor=this.dispatcher.getActor(),g.request=g.actor.send("loadTile",_,B.bind(this),void 0,!0);function B(C,E){return g.aborted?l(null):C&&C.status!==404?l(C):(E&&(E.resourceTiming&&(g.resourceTiming=E.resourceTiming),this.map._refreshExpiredTiles&&g.setExpiryData(E),g.buckets={...g.buckets,...E.buckets},E.featureIndex&&(g.latestFeatureIndex=E.featureIndex)),g.state="loaded",void l(null))}}serialize(){return s.e({},this._options)}},canvas:class extends s.ap{constructor(g,l,h,_){super(g,l,h,_),l.coordinates?Array.isArray(l.coordinates)&&l.coordinates.length===4&&!l.coordinates.some(B=>!Array.isArray(B)||B.length!==2||B.some(C=>typeof C!="number"))||this.fire(new s.a(new We(`sources.${g}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.a(new We(`sources.${g}`,null,'missing required property "coordinates"'))),l.animate&&typeof l.animate!="boolean"&&this.fire(new s.a(new We(`sources.${g}`,null,'optional "animate" property must be a boolean value'))),l.canvas?typeof l.canvas=="string"||l.canvas instanceof HTMLCanvasElement||this.fire(new s.a(new We(`sources.${g}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.a(new We(`sources.${g}`,null,'missing required property "canvas"'))),this.options=l,this.animate=l.animate===void 0||l.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.a(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(g){this.map=g,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let g=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,g=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,g=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const l=this.map.painter.context;this.texture?!g&&!this._playing||this.texture instanceof s.ar||this.texture.update(this.canvas,{premultiply:!0}):this.texture=new s.T(l,this.canvas,l.gl.RGBA,{premultiply:!0}),this._prepareData(l)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const g of[this.canvas.width,this.canvas.height])if(isNaN(g)||g<=0)return!0;return!1}},custom:class extends s.E{constructor(g,l,h,_){super(),this.id=g,this.type="custom",this._dataType="raster",this._dispatcher=h,this._implementation=l,this.setEventedParent(_),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new s.a(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new s.a(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new Et(this._implementation.bounds,this.minzoom,this.maxzoom)),l.update=this._update.bind(this),l.clearTiles=this._clearTiles.bind(this),l.coveringTiles=this._coveringTiles.bind(this),s.e(this,s.ac(l,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return s.ac(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new s.b("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.b("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(g){this._map=g,this._loaded=!1,this.fire(new s.b("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(g),this.load()}onRemove(g){this._implementation.onRemove&&this._implementation.onRemove(g)}hasTile(g){if(this._implementation.hasTile){const{x:l,y:h,z:_}=g.canonical;return this._implementation.hasTile({x:l,y:h,z:_})}return!this.tileBounds||this.tileBounds.contains(g.canonical)}loadTile(g,l){const{x:h,y:_,z:B}=g.tileID.canonical,C=new AbortController;g.request=Promise.resolve(this._implementation.loadTile({x:h,y:_,z:B},{signal:C.signal})).then((function(E){return delete g.request,g.aborted?(g.state="unloaded",l(null)):E===void 0?(g.state="errored",l(null)):E===null?(this.loadTileData(g,{width:this.tileSize,height:this.tileSize,data:null}),g.state="loaded",l(null)):function(M){return M instanceof ImageData||M instanceof HTMLCanvasElement||M instanceof ImageBitmap||M instanceof HTMLImageElement}(E)?(this.loadTileData(g,E),g.state="loaded",void l(null)):(g.state="errored",l(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}).bind(this)).catch(E=>{E.code!==20&&(g.state="errored",l(E))}),g.request.cancel=()=>C.abort()}loadTileData(g,l){g.setTexture(l,this._map.painter)}unloadTile(g,l){if(g.texture&&g.texture instanceof s.T?(g.destroy(!0),g.texture&&g.texture instanceof s.T&&this._map.painter.saveTileTexture(g.texture)):g.destroy(),this._implementation.unloadTile){const{x:h,y:_,z:B}=g.tileID.canonical;this._implementation.unloadTile({x:h,y:_,z:B})}l()}abortTile(g,l){g.request&&g.request.cancel&&(g.request.cancel(),delete g.request),l()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(g=>({x:g.canonical.x,y:g.canonical.y,z:g.canonical.z}))}_clearTiles(){const g=s.ag(this.id,this.scope);this._map.style.clearSource(g)}_update(){this.fire(new s.b("data",{dataType:"source",sourceDataType:"content"}))}}},Oi=function(g,l,h,_){const B=new hs[l.type](g,l,h,_);if(B.id!==g)throw new Error(`Expected Source id to be ${g} instead of ${B.id}`);return s.aY(["load","abort","unload","serialize","prepare"],B),B};function hd(g,l){const h=s.a6.identity([]);return s.a6.scale(h,h,[.5*g.width,.5*-g.height,1]),s.a6.translate(h,h,[1,-1,0]),s.a6.multiply(h,h,g.calculateProjMatrix(l.toUnwrapped())),Float32Array.from(h)}function Ih(g,l,h,_,B,C,E,M=!1){const k=g.tilesIn(_,E,M);k.sort(Lu);const F=[];for(const V of k)F.push({wrappedTileID:V.tile.tileID.wrapped().key,queryResults:V.tile.queryRenderedFeatures(l,h,g._state,V,B,C,hd(g.transform,V.tile.tileID),M)});const j=function(V){const Y={},te={};for(const le of V){const ae=le.queryResults,ue=le.wrappedTileID,ne=te[ue]=te[ue]||{};for(const he in ae){const ye=ae[he],de=ne[he]=ne[he]||{},ve=Y[he]=Y[he]||[];for(const ce of ye)de[ce.featureIndex]||(de[ce.featureIndex]=!0,ve.push(ce))}}return Y}(F);for(const V in j)j[V].forEach(Y=>{const te=Y.feature,le=te.layer;le&&le.type!=="background"&&le.type!=="sky"&&le.type!=="slot"&&(te.source=le.source,le["source-layer"]&&(te.sourceLayer=le["source-layer"]),te.state=te.id!==void 0?g.getFeatureState(le["source-layer"],te.id):{})});return j}function qa(g,l){const h=g.getRenderableIds().map(C=>g.getTileByID(C)),_=[],B={};for(let C=0;C<h.length;C++){const E=h[C],M=E.tileID.canonical.key;B[M]||(B[M]=!0,E.querySourceFeatures(_,l))}return _}function Lu(g,l){const h=g.tileID,_=l.tileID;return h.overscaledZ-_.overscaledZ||h.canonical.y-_.canonical.y||h.wrap-_.wrap||h.canonical.x-_.canonical.x}class gl extends Jo{constructor(l,h,_,B,C){super(l,h,_,B,C),this._workQueue=[],this._fetchQueue=[],this._isHeaderLoaded=!1}setTexture(l,h){const _=h.context,B=_.gl;this.texture=this.texture||h.getTileTexture(l.width),this.texture&&this.texture instanceof s.T?this.texture.update(l,{useMipmap:!1,premultiply:!1}):this.texture=new s.T(_,l,B.RGBA,{useMipmap:!1,premultiply:!1})}flushQueues(){for(;this._workQueue.length;)this._workQueue.pop()();for(;this._fetchQueue.length;)this._fetchQueue.pop()()}fetchHeader(l=16384,h){const _=this._mrt=new s.aZ(30),B=Object.assign({},this.requestParams,{headers:{Range:"bytes=0-"+(l-1)}});return this.entireBuffer=null,this.request=s.a_(B,(C,E,M,k)=>{if(C)h(C);else try{const F=_.getHeaderLength(E);if(F>l)return void(this.request=this.fetchHeader(F,h));_.parseHeader(E),this._isHeaderLoaded=!0;let j=0;for(const V of Object.values(_.layers))j=Math.max(j,V.dataIndex[V.dataIndex.length-1].last_byte);E.byteLength>=j&&(this.entireBuffer=E),h(null,this.entireBuffer||E,M,k)}catch(F){h(F)}}),this.request}fetchBand(l,h,_){const B=this._mrt;if(!this._isHeaderLoaded||!B)return void _(new Error("Tile header is not ready"));const C=this.actor;if(!C)return void _(new Error("Can't fetch tile band without an actor"));let E;const M=(V,Y)=>{E.complete(V,Y),V?_(V):(this.updateTextureDescriptor(l,h),_(null,this.textureDescriptor&&this.textureDescriptor.img))},k=(V,Y)=>{if(V)return _(V);const te=C.send("decodeRasterArray",{buffer:Y,task:E},M,void 0,!0);this._workQueue.push(()=>{te&&te.cancel(),E.cancel()})},F=B.getLayer(l);if(!F)return void _(new Error(`Unknown sourceLayer "${l}"`));if(F.hasDataForBand(h))return this.updateTextureDescriptor(l,h),void _(null,this.textureDescriptor?this.textureDescriptor.img:null);const j=F.getDataRange([h]);if(E=B.createDecodingTask(j),!E||E.tasks.length)if(this.flushQueues(),this.entireBuffer)k(null,this.entireBuffer.slice(j.firstByte,j.lastByte+1));else{const V=Object.assign({},this.requestParams,{headers:{Range:`bytes=${j.firstByte}-${j.lastByte}`}}),Y=s.a_(V,k);this._fetchQueue.push(()=>{Y.cancel(),E.cancel()})}else _(null)}updateNeeded(l,h){return(!this.textureDescriptor||this.textureDescriptor.band!==h||this.textureDescriptor.layer!==l)&&this.state!=="errored"}updateTextureDescriptor(l,h){if(!this._mrt)return;const _=this._mrt.getLayer(l);if(!_||!_.hasBand(h)||!_.hasDataForBand(h))return;const{bytes:B,tileSize:C,buffer:E,offset:M,scale:k}=_.getBandView(h),F=C+2*E,j={data:B,width:F,height:F},V=this.texture;V&&V instanceof s.T&&V.update(j,{useMipmap:!1,premultiply:!1}),this.textureDescriptor={layer:l,band:h,img:j,buffer:E,offset:M,tileSize:C,format:_.pixelFormat,mix:[k,256*k,65536*k,16777216*k]}}}class Dn{constructor(l,h){this.max=l,this.onRemove=h,this.reset()}reset(){for(const l in this.data)for(const h of this.data[l])h.timeout&&clearTimeout(h.timeout),this.onRemove(h.value);return this.data={},this.order=[],this}add(l,h,_){const B=l.wrapped().key;this.data[B]===void 0&&(this.data[B]=[]);const C={value:h,timeout:void 0};if(_!==void 0&&(C.timeout=setTimeout(()=>{this.remove(l,C)},_)),this.data[B].push(C),this.order.push(B),this.order.length>this.max){const E=this._getAndRemoveByKey(this.order[0]);E&&this.onRemove(E)}return this}has(l){return l.wrapped().key in this.data}getAndRemove(l){return this.has(l)?this._getAndRemoveByKey(l.wrapped().key):null}_getAndRemoveByKey(l){const h=this.data[l].shift();return h.timeout&&clearTimeout(h.timeout),this.data[l].length===0&&delete this.data[l],this.order.splice(this.order.indexOf(l),1),h.value}getByKey(l){const h=this.data[l];return h?h[0].value:null}get(l){return this.has(l)?this.data[l.wrapped().key][0].value:null}remove(l,h){if(!this.has(l))return this;const _=l.wrapped().key,B=h===void 0?0:this.data[_].indexOf(h),C=this.data[_][B];return this.data[_].splice(B,1),C.timeout&&clearTimeout(C.timeout),this.data[_].length===0&&delete this.data[_],this.onRemove(C.value),this.order.splice(this.order.indexOf(_),1),this}setMaxSize(l){for(this.max=l;this.order.length>this.max;){const h=this._getAndRemoveByKey(this.order[0]);h&&this.onRemove(h)}return this}filter(l){const h=[];for(const _ in this.data)for(const B of this.data[_])l(B.value)||h.push(B);for(const _ of h)this.remove(_.value.tileID,_)}}class Ka extends s.E{constructor(l,h,_){super(),this.id=l,this._onlySymbols=_,h.on("data",B=>{B.dataType==="source"&&B.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&B.dataType==="source"&&B.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),h.on("error",()=>{this._sourceErrored=!0}),this._source=h,this._tiles={},this._cache=new Dn(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=h.minTileCacheSize,this._maxTileCacheSize=h.maxTileCacheSize,this._loadedParentTiles={},this.castsShadows=!1,this.tileCoverLift=0,this._coveredTiles={},this._shadowCasterTiles={},this._state=new Oe,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="raster-array"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(l){this.map=l,this._minTileCacheSize=this._minTileCacheSize===void 0&&l?l._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&l?l._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const l in this._tiles){const h=this._tiles[l];if(h.state!=="errored"&&(h.state!=="loaded"||!h.bucketsLoaded()))return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const l=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,l&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(l,h){return l.isSymbolTile=this._onlySymbols,l.isExtraShadowCaster=this._shadowCasterTiles[l.tileID.key],this._source.loadTile(l,h)}_unloadTile(l){if(this._source.unloadTile)return this._source.unloadTile(l,()=>{})}_abortTile(l){if(this._source.abortTile)return this._source.abortTile(l,()=>{})}serialize(){return this._source.serialize()}prepare(l){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const h in this._tiles){const _=this._tiles[h];_.upload(l),_.prepare(this.map.style.imageManager,this.map?this.map.painter:null,this._source.scope)}}getIds(){return s.a$(this._tiles).map(l=>l.tileID).sort(Qo).map(l=>l.key)}getRenderableIds(l,h){const _=[];for(const B in this._tiles)this._isIdRenderable(+B,l,h)&&_.push(this._tiles[B]);return l?_.sort((B,C)=>{const E=B.tileID,M=C.tileID,k=new s.P(E.canonical.x,E.canonical.y)._rotate(this.transform.angle),F=new s.P(M.canonical.x,M.canonical.y)._rotate(this.transform.angle);return E.overscaledZ-M.overscaledZ||F.y-k.y||F.x-k.x}).map(B=>B.tileID.key):_.map(B=>B.tileID).sort(Qo).map(B=>B.key)}hasRenderableParent(l){const h=this.findLoadedParent(l,0);return!!h&&this._isIdRenderable(h.tileID.key)}_isIdRenderable(l,h,_){return this._tiles[l]&&this._tiles[l].hasData()&&!this._coveredTiles[l]&&(h||!this._tiles[l].holdingForFade())&&(_||!this._shadowCasterTiles[l])}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const l in this._tiles)this._tiles[l].state!=="errored"&&this._reloadTile(+l,"reloading")}}_reloadTile(l,h){const _=this._tiles[l];_&&(_.state!=="loading"&&(_.state=h),this._loadTile(_,this._tileLoaded.bind(this,_,l,h)))}_tileLoaded(l,h,_,B){if(B)if(l.state="errored",B.status!==404)this._source.fire(new s.a(B,{tile:l}));else{if(!(l.tileID.key in this._loadedParentTiles))return void this._source.fire(new s.b("data",{dataType:"source",sourceDataType:"error",sourceId:this._source.id}));if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const C=this.map.painter.terrain;this.update(this.transform,C.getScaledDemTileSize(),!0),C.resetTileLookupCache(this.id)}else this.update(this.transform)}else l.timeAdded=s.f.now(),_==="expired"&&(l.refreshedUponExpiration=!0),this._setTileReloadTimer(h,l),this._source.type==="raster-dem"&&l.dem&&this._backfillDEM(l),this._state.initializeTileState(l,this.map?this.map.painter:null),this._source.fire(new s.b("data",{dataType:"source",tile:l,coord:l.tileID,sourceCacheId:this.id}))}_backfillDEM(l){const h=this.getRenderableIds();for(let B=0;B<h.length;B++){const C=h[B];if(l.neighboringTiles&&l.neighboringTiles[C]){const E=this.getTileByID(C);_(l,E),_(E,l)}}function _(B,C){if(!B.dem||B.dem.borderReady)return;B.needsHillshadePrepare=!0,B.needsDEMTextureUpload=!0;let E=C.tileID.canonical.x-B.tileID.canonical.x;const M=C.tileID.canonical.y-B.tileID.canonical.y,k=Math.pow(2,B.tileID.canonical.z),F=C.tileID.key;E===0&&M===0||Math.abs(M)>1||(Math.abs(E)>1&&(Math.abs(E+k)===1?E+=k:Math.abs(E-k)===1&&(E-=k)),C.dem&&B.dem&&(B.dem.backfillBorder(C.dem,E,M),B.neighboringTiles&&B.neighboringTiles[F]&&(B.neighboringTiles[F].backfilled=!0)))}}getTile(l){return this.getTileByID(l.key)}getTileByID(l){return this._tiles[l]}_retainLoadedChildren(l,h,_,B){for(const C in this._tiles){let E=this._tiles[C];if(B[C]||!E.hasData()||E.tileID.overscaledZ<=h||E.tileID.overscaledZ>_)continue;let M=E.tileID;for(;E&&E.tileID.overscaledZ>h+1;){const F=E.tileID.scaledTo(E.tileID.overscaledZ-1);E=this._tiles[F.key],E&&E.hasData()&&(M=F)}let k=M;for(;k.overscaledZ>h;)if(k=k.scaledTo(k.overscaledZ-1),l[k.key]){B[M.key]=M;break}}}findLoadedParent(l,h){if(l.key in this._loadedParentTiles){const _=this._loadedParentTiles[l.key];return _&&_.tileID.overscaledZ>=h?_:null}for(let _=l.overscaledZ-1;_>=h;_--){const B=l.scaledTo(_),C=this._getLoadedTile(B);if(C)return C}}_getLoadedTile(l){const h=this._tiles[l.key];return h&&h.hasData()?h:this._cache.getByKey(this._source.reparseOverscaled?l.wrapped().key:l.canonical.key)}updateCacheSize(l,h){h=h||this._source.tileSize;const _=Math.ceil(l.width/h)+1,B=Math.ceil(l.height/h)+1,C=Math.floor(_*B*5),E=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,C):C,M=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,E):E;this._cache.setMaxSize(M)}handleWrapJump(l){const h=Math.round((l-(this._prevLng===void 0?l:this._prevLng))/360);if(this._prevLng=l,h){const _={};for(const B in this._tiles){const C=this._tiles[B];C.tileID=C.tileID.unwrapTo(C.tileID.wrap+h),_[C.tileID.key]=C}this._tiles=_;for(const B in this._timers)clearTimeout(this._timers[B]),delete this._timers[B];for(const B in this._tiles)this._setTileReloadTimer(+B,this._tiles[B])}}update(l,h,_,B){if(this.transform=l,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!_)return;let C;if(this.updateCacheSize(l,h),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._shadowCasterTiles={},this._coveredTiles={},this.used||this.usedForTerrain)if(this._source.tileID)C=l.getVisibleUnwrappedCoordinates(this._source.tileID).map(k=>new s.am(k.canonical.z,k.wrap,k.canonical.z,k.canonical.x,k.canonical.y));else if(this.tileCoverLift!==0){const k=l.clone();k.tileCoverLift=this.tileCoverLift,C=k.coveringTiles({tileSize:h||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!_,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.minzoom<=1&&l.projection.name==="globe"&&(C.push(new s.am(1,0,1,0,0)),C.push(new s.am(1,0,1,1,0)),C.push(new s.am(1,0,1,0,1)),C.push(new s.am(1,0,1,1,1)))}else C=l.coveringTiles({tileSize:h||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!_,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(C=C.filter(k=>this._source.hasTile(k)));else C=[];if(C.length>0&&this.castsShadows&&B&&this.transform.projection.name!=="globe"&&!this.usedForTerrain&&!fa(this._source.type)){const k=l.coveringZoomLevel({tileSize:h||this._source.tileSize,roundZoom:this._source.roundZoom&&!_}),F=Math.min(k,this._source.maxzoom),j=l.extendTileCoverForShadows(C,B,F);for(const V of j)this._shadowCasterTiles[V.key]=!0,C.push(V)}const E=this._updateRetainedTiles(C);if(fa(this._source.type)&&C.length!==0){const k={},F={},j=Object.keys(E);for(const Y of j){const te=E[Y],le=this._tiles[Y];if(!le||le.fadeEndTime&&le.fadeEndTime<=s.f.now())continue;const ae=this.findLoadedParent(te,Math.max(te.overscaledZ-Ka.maxOverzooming,this._source.minzoom));ae&&(this._addTile(ae.tileID),k[ae.tileID.key]=ae.tileID),F[Y]=te}const V=C[C.length-1].overscaledZ;for(const Y in this._tiles){const te=this._tiles[Y];if(E[Y]||!te.hasData())continue;let le=te.tileID;for(;le.overscaledZ>V;){le=le.scaledTo(le.overscaledZ-1);const ae=this._tiles[le.key];if(ae&&ae.hasData()&&F[le.key]){E[Y]=te.tileID;break}}}for(const Y in k)E[Y]||(this._coveredTiles[Y]=!0,E[Y]=k[Y])}for(const k in E)this._tiles[k].clearFadeHold();const M=s.b0(this._tiles,E);for(const k of M){const F=this._tiles[k];F.hasSymbolBuckets&&!F.holdingForFade()?F.setHoldDuration(this.map._fadeDuration):F.hasSymbolBuckets&&!F.symbolFadeFinished()||this._removeTile(+k)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const l in this._tiles)this._tiles[l].holdingForFade()&&this._removeTile(+l)}_updateRetainedTiles(l){const h={};if(l.length===0)return h;const _={},B=l.reduce((F,j)=>Math.min(F,j.overscaledZ),1/0),C=l[0].overscaledZ,E=Math.max(C-Ka.maxOverzooming,this._source.minzoom),M=Math.max(C+Ka.maxUnderzooming,this._source.minzoom),k={};for(const F of l){const j=this._addTile(F);h[F.key]=F,j.hasData()||B<this._source.maxzoom&&(k[F.key]=F)}this._retainLoadedChildren(k,B,M,h);for(const F of l){let j=this._tiles[F.key];if(j.hasData())continue;if(F.canonical.z>=this._source.maxzoom){const Y=F.children(this._source.maxzoom)[0],te=this.getTile(Y);if(te&&te.hasData()){h[Y.key]=Y;continue}}else{const Y=F.children(this._source.maxzoom);if(h[Y[0].key]&&h[Y[1].key]&&h[Y[2].key]&&h[Y[3].key])continue}let V=j.wasRequested();for(let Y=F.overscaledZ-1;Y>=E;--Y){const te=F.scaledTo(Y);if(_[te.key]||(_[te.key]=!0,j=this.getTile(te),!j&&V&&(j=this._addTile(te)),j&&(h[te.key]=te,V=j.wasRequested(),j.hasData())))break}}return h}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const l in this._tiles){const h=[];let _,B=this._tiles[l].tileID;for(;B.overscaledZ>0;){if(B.key in this._loadedParentTiles){_=this._loadedParentTiles[B.key];break}h.push(B.key);const C=B.scaledTo(B.overscaledZ-1);if(_=this._getLoadedTile(C),_)break;B=C}for(const C of h)this._loadedParentTiles[C]=_}}_addTile(l){let h=this._tiles[l.key];if(h)return h.isExtraShadowCaster!==!0||this._shadowCasterTiles[l.key]||this._reloadTile(l.key,"reloading"),h;h=this._cache.getAndRemove(l),h&&(this._setTileReloadTimer(l.key,h),h.tileID=l,this._state.initializeTileState(h,this.map?this.map.painter:null),this._cacheTimers[l.key]&&(clearTimeout(this._cacheTimers[l.key]),delete this._cacheTimers[l.key],this._setTileReloadTimer(l.key,h)));const _=!!h;if(!_){const B=this.map?this.map.painter:null,C=this._source.tileSize*l.overscaleFactor();h=this._source.type==="raster-array"?new gl(l,C,this.transform.tileZoom,B,this._isRaster):new Jo(l,C,this.transform.tileZoom,B,this._isRaster),this._loadTile(h,this._tileLoaded.bind(this,h,l.key,h.state))}return h?(h.uses++,this._tiles[l.key]=h,_||this._source.fire(new s.b("dataloading",{tile:h,coord:h.tileID,dataType:"source"})),h):null}_setTileReloadTimer(l,h){l in this._timers&&(clearTimeout(this._timers[l]),delete this._timers[l]);const _=h.getExpiryTimeout();_&&(this._timers[l]=setTimeout(()=>{this._reloadTile(l,"expired"),delete this._timers[l]},_))}_removeTile(l){const h=this._tiles[l];h&&(h.uses--,delete this._tiles[l],this._timers[l]&&(clearTimeout(this._timers[l]),delete this._timers[l]),h.uses>0||(h.hasData()&&h.state!=="reloading"||h.state==="empty"?this._cache.add(h.tileID,h,h.getExpiryTimeout()):(h.aborted=!0,this._abortTile(h),this._unloadTile(h))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const l in this._tiles)this._removeTile(+l);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(l,h,_){const B=[],C=this.transform;if(!C)return B;const E=C.projection.name==="globe",M=s.a5(C.center.lng);for(const k in this._tiles){const F=this._tiles[k];if(_&&F.clearQueryDebugViz(),F.holdingForFade())continue;let j;if(E){const V=F.tileID.canonical;if(V.z===0){const Y=[Math.abs(s.aa(M,...Ru(V,-1))-M),Math.abs(s.aa(M,...Ru(V,1))-M)];j=[0,2*Y.indexOf(Math.min(...Y))-1]}else{const Y=[Math.abs(s.aa(M,...Ru(V,-1))-M),Math.abs(s.aa(M,...Ru(V,0))-M),Math.abs(s.aa(M,...Ru(V,1))-M)];j=[Y.indexOf(Math.min(...Y))-1]}}else j=[0];for(const V of j){const Y=l.containsTile(F,C,h,V);Y&&B.push(Y)}}return B}getShadowCasterCoordinates(){return this._getRenderableCoordinates(!1,!0)}getVisibleCoordinates(l){return this._getRenderableCoordinates(l)}_getRenderableCoordinates(l,h){const _=this.getRenderableIds(l,h).map(C=>this._tiles[C].tileID),B=this.transform.projection.name==="globe";for(const C of _)C.projMatrix=this.transform.calculateProjMatrix(C.toUnwrapped()),C.expandedProjMatrix=B?this.transform.calculateProjMatrix(C.toUnwrapped(),!1,!0):C.projMatrix;return _}sortCoordinatesByDistance(l){const h=l.slice(),_=this.transform._camera.position,B=this.transform._camera.forward(),C={};for(const E of h){const M=1/(1<<E.canonical.z);C[E.key]=((E.canonical.x+.5)*M+E.wrap-_[0])*B[0]+((E.canonical.y+.5)*M-_[1])*B[1]-_[2]*B[2]}return h.sort((E,M)=>C[E.key]-C[M.key]),h}hasTransition(){if(this._source.hasTransition())return!0;if(fa(this._source.type))for(const l in this._tiles){const h=this._tiles[l];if(h.fadeEndTime!==void 0&&h.fadeEndTime>=s.f.now())return!0}return!1}setFeatureState(l,h,_){this._state.updateState(l=l||"_geojsonTileLayer",h,_)}removeFeatureState(l,h,_){this._state.removeFeatureState(l=l||"_geojsonTileLayer",h,_)}getFeatureState(l,h){return this._state.getState(l=l||"_geojsonTileLayer",h)}setDependencies(l,h,_){const B=this._tiles[l];B&&B.setDependencies(h,_)}reloadTilesForDependencies(l,h){for(const _ in this._tiles)this._tiles[_].hasDependency(l,h)&&this._reloadTile(+_,"reloading");this._cache.filter(_=>!_.hasDependency(l,h))}_preloadTiles(l,h){if(!this._sourceLoaded){const k=()=>{this._sourceLoaded&&(this._source.off("data",k),this._preloadTiles(l,h))};return void this._source.on("data",k)}const _=new Map,B=Array.isArray(l)?l:[l],C=this.map.painter.terrain,E=this.usedForTerrain&&C?C.getScaledDemTileSize():this._source.tileSize;for(const k of B){const F=k.coveringTiles({tileSize:E,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const j of F)_.set(j.key,j);this.usedForTerrain&&k.updateElevation(!1)}const M=Array.from(_.values());s.b1(M,(k,F)=>{const j=new Jo(k,this._source.tileSize*k.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(j,V=>{this._source.type==="raster-dem"&&j.dem&&this._backfillDEM(j),F(V,j)})},h)}}function Qo(g,l){const h=Math.abs(2*g.wrap)-+(g.wrap<0),_=Math.abs(2*l.wrap)-+(l.wrap<0);return g.overscaledZ-l.overscaledZ||_-h||l.canonical.y-g.canonical.y||l.canonical.x-g.canonical.x}function fa(g){return g==="raster"||g==="image"||g==="video"||g==="custom"}function Ru(g,l){const h=1<<g.z;return[g.x/h+l,(g.x+1)/h+l]}Ka.maxOverzooming=10,Ka.maxUnderzooming=3;class rm{constructor(l){this.style=l,this.layersGotHidden=!1,this.layers=[]}processLayersChanged(){this.layers=[];const l=!1,h=!1;for(const _ in this.style._mergedLayers){const B=this.style._mergedLayers[_];if(B.type==="fill-extrusion")this.layers.push({layer:B,visible:l,visibilityChanged:h});else if(B.type==="model"){const C=this.style.getLayerSource(B);C&&C.type==="batched-model"&&this.layers.push({layer:B,visible:l,visibilityChanged:h})}}}onNewFrame(l){this.layersGotHidden=!1;for(const h of this.layers){const _=h.layer;let B=!1;_.type==="fill-extrusion"?B=!_.isHidden(l)&&_.paint.get("fill-extrusion-opacity")>0:_.type==="model"&&(B=!_.isHidden(l)&&_.paint.get("model-opacity")>0),this.layersGotHidden=this.layersGotHidden||!B&&h.visible,h.visible=B}}updateZOffset(l,h){this.currentBuildingBuckets=[];for(const B of this.layers){const C=B.layer,E=this.style.getLayerSourceCache(C);let M=1;C.type==="fill-extrusion"&&(M=B.visible?C.paint.get("fill-extrusion-vertical-scale"):0);let k=E?E.getTile(h):null;if(!k&&E&&h.canonical.z>E.getSource().minzoom){let F=h.scaledTo(Math.min(E.getSource().maxzoom,h.overscaledZ-1));for(;F.overscaledZ>=E.getSource().minzoom&&(k=E.getTile(F),!k&&F.overscaledZ!==0);)F=F.scaledTo(F.overscaledZ-1)}this.currentBuildingBuckets.push({bucket:k?k.getBucket(C):null,tileID:k?k.tileID:h,verticalScale:M})}l.hasAnyZOffset=!1;let _=!1;for(let B=0;B<l.symbolInstances.length;B++){const C=l.symbolInstances.get(B),E=C.zOffset,M=this._getHeightAtTileOffset(h,C.tileAnchorX,C.tileAnchorY);C.zOffset=M!==Number.NEGATIVE_INFINITY?M:E,_||E===C.zOffset||(_=!0),l.hasAnyZOffset||C.zOffset===0||(l.hasAnyZOffset=!0)}_&&(l.zOffsetBuffersNeedUpload=!0,l.zOffsetSortDirty=!0)}_mapCoordToOverlappingTile(l,h,_,B){let C=h,E=_;if(l.canonical.z!==B.canonical.z){const M=B.canonical,k=1/(1<<l.canonical.z-M.z);C=(h+l.canonical.x*s.V)*k-M.x*s.V|0,E=(_+l.canonical.y*s.V)*k-M.y*s.V|0}return{tileX:C,tileY:E}}_getHeightAtTileOffset(l,h,_){let B,C;for(let E=0;E<this.layers.length;++E){if(this.layers[E].layer.type!=="fill-extrusion")continue;const{bucket:M,tileID:k,verticalScale:F}=this.currentBuildingBuckets[E];if(!M)continue;const{tileX:j,tileY:V}=this._mapCoordToOverlappingTile(l,h,_,k),Y=M.getHeightAtTileCoord(j,V);Y&&Y.height!==void 0&&(Y.hidden?B=Y.height:C=Math.max(Y.height*F,C||0))}if(C!==void 0)return C;for(let E=0;E<this.layers.length;++E){const M=this.layers[E];if(M.layer.type!=="model"||!M.visible)continue;const{bucket:k,tileID:F}=this.currentBuildingBuckets[E];if(!k)continue;const{tileX:j,tileY:V}=this._mapCoordToOverlappingTile(l,h,_,F),Y=k.getHeightAtTileCoord(j,V);if(Y&&!Y.hidden)return Y.height===void 0&&B!==void 0?Math.min(Y.maxHeight,B)*Y.verticalScale:(Y.height||0)*Y.verticalScale}return this.layersGotHidden?0:Number.NEGATIVE_INFINITY}}function Is(g,l){const h={};for(const _ in g)_!=="ref"&&(h[_]=g[_]);return s.b2.forEach(_=>{_ in l&&(h[_]=l[_])}),h}function nm(g){g=g.slice();const l=Object.create(null);for(let h=0;h<g.length;h++)l[g[h].id]=g[h];for(let h=0;h<g.length;h++)"ref"in g[h]&&(g[h]=Is(g[h],l[g[h].ref]));return g}const rn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setSlot:"setSlot",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setCamera:"setCamera",setLights:"setLights",setProjection:"setProjection",addImport:"addImport",removeImport:"removeImport",updateImport:"updateImport"};function Ec(g,l,h){h.push({command:rn.addSource,args:[g,l[g]]})}function fd(g,l,h){l.push({command:rn.removeSource,args:[g]}),h[g]=!0}function dd(g,l,h,_){fd(g,h,_),Ec(g,l,h)}function N_(g,l,h){let _;for(_ in g[h])if(g[h].hasOwnProperty(_)&&_!=="data"&&!w(g[h][_],l[h][_]))return!1;for(_ in l[h])if(l[h].hasOwnProperty(_)&&_!=="data"&&!w(g[h][_],l[h][_]))return!1;return!0}function Bo(g,l,h,_,B,C){let E;for(E in l=l||{},g=g||{})g.hasOwnProperty(E)&&(w(g[E],l[E])||h.push({command:C,args:[_,E,l[E],B]}));for(E in l)l.hasOwnProperty(E)&&!g.hasOwnProperty(E)&&(w(g[E],l[E])||h.push({command:C,args:[_,E,l[E],B]}))}function _l(g){return g.id}function Dc(g,l){return g[l.id]=l,g}class da{constructor(l,h){this.reset(l,h)}reset(l,h){this.points=l||[],this._distances=[0];for(let _=1;_<this.points.length;_++)this._distances[_]=this._distances[_-1]+this.points[_].dist(this.points[_-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(h||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(l){if(this.points.length===1)return this.points[0];l=s.aa(l,0,1);let h=1,_=this._distances[h];const B=l*this.paddedLength+this.padding;for(;_<B&&h<this._distances.length;)_=this._distances[++h];const C=h-1,E=this._distances[C],M=_-E,k=M>0?(B-E)/M:0;return this.points[C].mult(1-k).add(this.points[h].mult(k))}}class Oh{constructor(l,h,_){const B=this.boxCells=[],C=this.circleCells=[];this.xCellCount=Math.ceil(l/_),this.yCellCount=Math.ceil(h/_);for(let E=0;E<this.xCellCount*this.yCellCount;E++)B.push([]),C.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=l,this.height=h,this.xScale=this.xCellCount/l,this.yScale=this.yCellCount/h,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(l,h,_,B,C){this._forEachCell(h,_,B,C,this._insertBoxCell,this.boxUid++),this.boxKeys.push(l),this.bboxes.push(h),this.bboxes.push(_),this.bboxes.push(B),this.bboxes.push(C)}insertCircle(l,h,_,B){this._forEachCell(h-B,_-B,h+B,_+B,this._insertCircleCell,this.circleUid++),this.circleKeys.push(l),this.circles.push(h),this.circles.push(_),this.circles.push(B)}_insertBoxCell(l,h,_,B,C,E){this.boxCells[C].push(E)}_insertCircleCell(l,h,_,B,C,E){this.circleCells[C].push(E)}_query(l,h,_,B,C,E){if(_<0||l>this.width||B<0||h>this.height)return!C&&[];const M=[];if(l<=0&&h<=0&&this.width<=_&&this.height<=B){if(C)return!0;for(let k=0;k<this.boxKeys.length;k++)M.push({key:this.boxKeys[k],x1:this.bboxes[4*k],y1:this.bboxes[4*k+1],x2:this.bboxes[4*k+2],y2:this.bboxes[4*k+3]});for(let k=0;k<this.circleKeys.length;k++){const F=this.circles[3*k],j=this.circles[3*k+1],V=this.circles[3*k+2];M.push({key:this.circleKeys[k],x1:F-V,y1:j-V,x2:F+V,y2:j+V})}return E?M.filter(E):M}return this._forEachCell(l,h,_,B,this._queryCell,M,{hitTest:C,seenUids:{box:{},circle:{}}},E),C?M.length>0:M}_queryCircle(l,h,_,B,C){const E=l-_,M=l+_,k=h-_,F=h+_;if(M<0||E>this.width||F<0||k>this.height)return!B&&[];const j=[];return this._forEachCell(E,k,M,F,this._queryCellCircle,j,{hitTest:B,circle:{x:l,y:h,radius:_},seenUids:{box:{},circle:{}}},C),B?j.length>0:j}query(l,h,_,B,C){return this._query(l,h,_,B,!1,C)}hitTest(l,h,_,B,C){return this._query(l,h,_,B,!0,C)}hitTestCircle(l,h,_,B){return this._queryCircle(l,h,_,!0,B)}_queryCell(l,h,_,B,C,E,M,k){const F=M.seenUids,j=this.boxCells[C];if(j!==null){const Y=this.bboxes;for(const te of j)if(!F.box[te]){F.box[te]=!0;const le=4*te;if(l<=Y[le+2]&&h<=Y[le+3]&&_>=Y[le+0]&&B>=Y[le+1]&&(!k||k(this.boxKeys[te]))){if(M.hitTest)return E.push(!0),!0;E.push({key:this.boxKeys[te],x1:Y[le],y1:Y[le+1],x2:Y[le+2],y2:Y[le+3]})}}}const V=this.circleCells[C];if(V!==null){const Y=this.circles;for(const te of V)if(!F.circle[te]){F.circle[te]=!0;const le=3*te;if(this._circleAndRectCollide(Y[le],Y[le+1],Y[le+2],l,h,_,B)&&(!k||k(this.circleKeys[te]))){if(M.hitTest)return E.push(!0),!0;{const ae=Y[le],ue=Y[le+1],ne=Y[le+2];E.push({key:this.circleKeys[te],x1:ae-ne,y1:ue-ne,x2:ae+ne,y2:ue+ne})}}}}}_queryCellCircle(l,h,_,B,C,E,M,k){const F=M.circle,j=M.seenUids,V=this.boxCells[C];if(V!==null){const te=this.bboxes;for(const le of V)if(!j.box[le]){j.box[le]=!0;const ae=4*le;if(this._circleAndRectCollide(F.x,F.y,F.radius,te[ae+0],te[ae+1],te[ae+2],te[ae+3])&&(!k||k(this.boxKeys[le])))return E.push(!0),!0}}const Y=this.circleCells[C];if(Y!==null){const te=this.circles;for(const le of Y)if(!j.circle[le]){j.circle[le]=!0;const ae=3*le;if(this._circlesCollide(te[ae],te[ae+1],te[ae+2],F.x,F.y,F.radius)&&(!k||k(this.circleKeys[le])))return E.push(!0),!0}}}_forEachCell(l,h,_,B,C,E,M,k){const F=this._convertToXCellCoord(l),j=this._convertToYCellCoord(h),V=this._convertToXCellCoord(_),Y=this._convertToYCellCoord(B);for(let te=F;te<=V;te++)for(let le=j;le<=Y;le++)if(C.call(this,l,h,_,B,this.xCellCount*le+te,E,M,k))return}_convertToXCellCoord(l){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(l*this.xScale)))}_convertToYCellCoord(l){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(l*this.yScale)))}_circlesCollide(l,h,_,B,C,E){const M=B-l,k=C-h,F=_+E;return F*F>M*M+k*k}_circleAndRectCollide(l,h,_,B,C,E,M){const k=(E-B)/2,F=Math.abs(l-(B+k));if(F>k+_)return!1;const j=(M-C)/2,V=Math.abs(h-(C+j));if(V>j+_)return!1;if(F<=k||V<=j)return!0;const Y=F-k,te=V-j;return Y*Y+te*te<=_*_}}const fs={unknown:0,flipRequired:1,flipNotRequired:2},ds=Math.tan(85*Math.PI/180);function Pc(g,l,h,_,B,C,E){const M=s.a6.create();if(h)if(C.name==="globe"){const k=s.b3(B,l);s.a6.multiply(M,M,k)}else{const k=s.b4.invert([],E);M[0]=k[0],M[1]=k[1],M[4]=k[2],M[5]=k[3],_||s.a6.rotateZ(M,M,B.angle)}else s.a6.multiply(M,B.labelPlaneMatrix,g);return M}function kh(g,l,h,_,B,C,E){const M=Pc(g,l,h,_,B,C,E);return C.name==="globe"&&h||(M[2]=M[6]=M[10]=M[14]=0),M}function Lh(g,l,h,_,B,C,E){if(h){if(C.name==="globe"){const M=Pc(g,l,h,_,B,C,E);return s.a6.invert(M,M),s.a6.multiply(M,g,M),M}{const M=s.a6.clone(g),k=s.a6.identity([]);return k[0]=E[0],k[1]=E[1],k[4]=E[2],k[5]=E[3],s.a6.multiply(M,M,k),_||s.a6.rotateZ(M,M,-B.angle),M}}return B.glCoordMatrix}function Aa(g,l,h,_){const B=[g,l,h,1];h?s.a7.transformMat4(B,B,_):Fh(B,B,_);const C=B[3];return B[0]/=C,B[1]/=C,B[2]/=C,B}function im(g,l){return Math.min(.5+g/l*.5,1.5)}function Mc(g,l){const h=g[0]/g[3],_=g[1]/g[3];return h>=-l[0]&&h<=l[0]&&_>=-l[1]&&_<=l[1]}function pd(g,l,h,_,B,C,E,M,k,F){const j=h.transform,V=_?g.textSizeData:g.iconSizeData,Y=s.b5(V,h.transform.zoom),te=j.projection.name==="globe",le=[256/h.width*2+1,256/h.height*2+1],ae=_?g.text.dynamicLayoutVertexArray:g.icon.dynamicLayoutVertexArray;ae.clear();let ue=null;te&&(ue=_?g.text.globeExtVertexArray:g.icon.globeExtVertexArray);const ne=g.lineVertexArray,he=_?g.text.placedSymbolArray:g.icon.placedSymbolArray,ye=h.transform.width/h.transform.height;let de,ve=!1;for(let ce=0;ce<he.length;ce++){const xe=he.get(ce),{numGlyphs:Ee,writingMode:Pe}=xe;if(Pe!==s.b6.vertical||ve||de===s.b6.horizontal||(ve=!0),de=Pe,(xe.hidden||Pe===s.b6.vertical)&&!ve){io(Ee,ae);continue}ve=!1;const Re=new s.P(xe.tileAnchorX,xe.tileAnchorY);let{x:Xe,y:Fe,z:it}=j.projection.projectTilePoint(Re.x,Re.y,F.canonical);if(k){const[Ft,tr,hr]=k(Re);Xe+=Ft,Fe+=tr,it+=hr}const rt=[Xe,Fe,it,1];if(s.a7.transformMat4(rt,rt,l),!Mc(rt,le)){io(Ee,ae);continue}const Bt=rt[3],Ve=im(h.transform.getCameraToCenterDistance(j.projection),Bt),et=s.b7(V,Y,xe),ke=E?et/Ve:et*Ve,Ze=Aa(Xe,Fe,it,B);if(Ze[3]<=0){io(Ee,ae);continue}let bt={};const Pt=E?null:k,At=zu(xe,ke,!1,M,l,B,C,g.glyphOffsetArray,ne,ae,ue,Ze,Re,bt,ye,Pt,j.projection,F,E);ve=At.useVertical,Pt&&At.needsFlipping&&(bt={}),(At.notEnoughRoom||ve||At.needsFlipping&&zu(xe,ke,!0,M,l,B,C,g.glyphOffsetArray,ne,ae,ue,Ze,Re,bt,ye,Pt,j.projection,F,E).notEnoughRoom)&&io(Ee,ae)}_?(g.text.dynamicLayoutVertexBuffer.updateData(ae),ue&&g.text.globeExtVertexBuffer&&g.text.globeExtVertexBuffer.updateData(ue)):(g.icon.dynamicLayoutVertexBuffer.updateData(ae),ue&&g.icon.globeExtVertexBuffer&&g.icon.globeExtVertexBuffer.updateData(ue))}function Rh(g,l,h,_,B,C,E,M,k,F,j,V,Y,te,le,ae){const{lineStartIndex:ue,glyphStartIndex:ne,segment:he}=M,ye=ne+M.numGlyphs,de=ue+M.lineLength,ve=l.getoffsetX(ne),ce=l.getoffsetX(ye-1),xe=Os(g*ve,h,_,B,C,E,he,ue,de,k,F,j,V,Y,!0,te,le,ae);if(!xe)return null;const Ee=Os(g*ce,h,_,B,C,E,he,ue,de,k,F,j,V,Y,!0,te,le,ae);return Ee?{first:xe,last:Ee}:null}function zh(g,l,h,_){return g===s.b6.horizontal&&Math.abs(_)>Math.abs(h)?{useVertical:!0}:g===s.b6.vertical?_>0?{needsFlipping:!0}:null:l!==fs.unknown&&function(B,C){return B===0||Math.abs(C/B)>ds}(h,_)?l===fs.flipRequired?{needsFlipping:!0}:null:h<0?{needsFlipping:!0}:null}function zu(g,l,h,_,B,C,E,M,k,F,j,V,Y,te,le,ae,ue,ne,he){const ye=l/24,de=g.lineOffsetX*ye,ve=g.lineOffsetY*ye,{lineStartIndex:ce,glyphStartIndex:xe,numGlyphs:Ee,segment:Pe,writingMode:Re,flipState:Xe}=g,Fe=ce+g.lineLength,it=rt=>{if(j){const[ke,Ze,bt]=rt.up,Pt=F.length;s.b8(j,Pt+0,ke,Ze,bt),s.b8(j,Pt+1,ke,Ze,bt),s.b8(j,Pt+2,ke,Ze,bt),s.b8(j,Pt+3,ke,Ze,bt)}const[Bt,Ve,et]=rt.point;s.b9(F,Bt,Ve,et,rt.angle)};if(Ee>1){const rt=Rh(ye,M,de,ve,h,V,Y,g,k,C,te,ae,!1,ue,ne,he);if(!rt)return{notEnoughRoom:!0};if(_&&!h){let[Bt,Ve,et]=rt.first.point,[ke,Ze,bt]=rt.last.point;[Bt,Ve]=Aa(Bt,Ve,et,E),[ke,Ze]=Aa(ke,Ze,bt,E);const Pt=zh(Re,Xe,(ke-Bt)*le,Ze-Ve);if(g.flipState=Pt&&Pt.needsFlipping?fs.flipRequired:fs.flipNotRequired,Pt)return Pt}it(rt.first);for(let Bt=xe+1;Bt<xe+Ee-1;Bt++){const Ve=Os(ye*M.getoffsetX(Bt),de,ve,h,V,Y,Pe,ce,Fe,k,C,te,ae,!1,!1,ue,ne,he);if(!Ve)return F.length-=4*(Bt-xe),{notEnoughRoom:!0};it(Ve)}it(rt.last)}else{if(_&&!h){const Bt=Aa(Y.x,Y.y,0,B),Ve=ce+Pe+1,et=new s.P(k.getx(Ve),k.gety(Ve)),ke=Aa(et.x,et.y,0,B),Ze=ke[3]>0?ke:Nh(Y,et,Bt,1,B,void 0,ue,ne.canonical),bt=zh(Re,Xe,(Ze[0]-Bt[0])*le,Ze[1]-Bt[1]);if(g.flipState=bt&&bt.needsFlipping?fs.flipRequired:fs.flipNotRequired,bt)return bt}const rt=Os(ye*M.getoffsetX(xe),de,ve,h,V,Y,Pe,ce,Fe,k,C,te,ae,!1,!1,ue,ne,he);if(!rt)return{notEnoughRoom:!0};it(rt)}return{}}function Ea(g,l,h,_,B){const{x:C,y:E,z:M}=_.projectTilePoint(g.x,g.y,l);if(!B)return Aa(C,E,M,h);const[k,F,j]=B(g);return Aa(C+k,E+F,M+j,h)}function Nh(g,l,h,_,B,C,E,M){const k=Ea(g.sub(l)._unit()._add(g),M,B,E,C);return s.N.sub(k,h,k),s.N.normalize(k,k),s.N.scaleAndAdd(k,h,k,_)}function Os(g,l,h,_,B,C,E,M,k,F,j,V,Y,te,le,ae,ue,ne){const he=_?g-l:g+l;let ye=he>0?1:-1,de=0;_&&(ye*=-1,de=Math.PI),ye<0&&(de+=Math.PI);let ve=M+E+(ye>0?0:1)|0,ce=B,xe=B,Ee=0,Pe=0;const Re=Math.abs(he),Xe=[],Fe=[];let it=C,rt=it;const Bt=()=>Nh(rt,it,xe,Re-Ee+1,j,Y,ae,ue.canonical);for(;Ee+Pe<=Re;){if(ve+=ye,ve<M||ve>=k)return null;if(xe=ce,rt=it,Xe.push(xe),te&&Fe.push(rt),it=new s.P(F.getx(ve),F.gety(ve)),ce=V[ve],!ce){const tr=Ea(it,ue.canonical,j,ae,Y);ce=tr[3]>0?V[ve]=tr:Bt()}Ee+=Pe,Pe=s.N.distance(xe,ce)}le&&Y&&(V[ve]&&(ce=Bt(),Pe=s.N.distance(xe,ce)),V[ve]=ce);const Ve=(Re-Ee)/Pe,et=it.sub(rt)._mult(Ve)._add(rt),ke=s.N.sub([],ce,xe),Ze=s.N.scaleAndAdd([],xe,ke,Ve);let bt=[0,0,1],Pt=ke[0],At=ke[1];if(ne&&(bt=ae.upVector(ue.canonical,et.x,et.y),bt[0]!==0||bt[1]!==0||bt[2]!==1)){const tr=[bt[2],0,-bt[0]],hr=s.N.cross([],bt,tr);s.N.normalize(tr,tr),s.N.normalize(hr,hr),Pt=s.N.dot(ke,tr),At=s.N.dot(ke,hr)}if(h){const tr=s.N.cross([],bt,ke);s.N.normalize(tr,tr),s.N.scaleAndAdd(Ze,Ze,tr,h*ye)}const Ft=de+Math.atan2(At,Pt);return Xe.push(Ze),te&&Fe.push(et),{point:Ze,angle:Ft,path:Xe,tilePath:Fe,up:bt}}function io(g,l){const h=l.length,_=h+4*g;l.resize(_),l.float32.fill(-1/0,4*h,4*_)}function Fh(g,l,h){const _=l[0],B=l[1];return g[0]=h[0]*_+h[4]*B+h[12],g[1]=h[1]*_+h[5]*B+h[13],g[3]=h[3]*_+h[7]*B+h[15],g}const pa=100;class Ut{constructor(l,h,_=new Oh(l.width+200,l.height+200,25),B=new Oh(l.width+200,l.height+200,25)){this.transform=l,this.grid=_,this.ignoredGrid=B,this.pitchfactor=Math.cos(l._pitch)*l.cameraToCenterDistance,this.screenRightBoundary=l.width+pa,this.screenBottomBoundary=l.height+pa,this.gridRightBoundary=l.width+200,this.gridBottomBoundary=l.height+200,this.fogState=h}placeCollisionBox(l,h,_,B,C,E,M,k){let F=_.projectedAnchorX,j=_.projectedAnchorY,V=_.projectedAnchorZ;const Y=_.elevation,te=_.tileID,le=l.getProjection();if(Y&&te){const[ce,xe,Ee]=le.upVector(te.canonical,_.tileAnchorX,_.tileAnchorY),Pe=le.upVectorScale(te.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;F+=ce*Y*Pe,j+=xe*Y*Pe,V+=Ee*Y*Pe}const ae=this.projectAndGetPerspectiveRatio(M,F,j,V,_.tileID,le.name==="globe"||!!Y||this.transform.pitch>0,le),ue=E*ae.perspectiveRatio,ne=(_.x1*h+B.x-_.padding)*ue+ae.point.x,he=(_.y1*h+B.y-_.padding)*ue+ae.point.y,ye=(_.x2*h+B.x+_.padding)*ue+ae.point.x,de=(_.y2*h+B.y+_.padding)*ue+ae.point.y,ve=ae.perspectiveRatio<=.55||ae.occluded;return!this.isInsideGrid(ne,he,ye,de)||!C&&this.grid.hitTest(ne,he,ye,de,k)||ve?{box:[],offscreen:!1,occluded:ae.occluded}:{box:[ne,he,ye,de],offscreen:this.isOffscreen(ne,he,ye,de),occluded:!1}}placeCollisionCircles(l,h,_,B,C,E,M,k,F,j,V,Y,te,le,ae){const ue=[],ne=this.transform.elevation,he=l.getProjection(),ye=ne?ne.getAtTileOffsetFunc(ae,this.transform.center.lat,this.transform.worldSize,he):null,de=new s.P(_.tileAnchorX,_.tileAnchorY);let{x:ve,y:ce,z:xe}=he.projectTilePoint(de.x,de.y,ae.canonical);if(ye){const[et,ke,Ze]=ye(de);ve+=et,ce+=ke,xe+=Ze}const Ee=he.name==="globe",Pe=this.projectAndGetPerspectiveRatio(M,ve,ce,xe,ae,Ee||!!ne||this.transform.pitch>0,he),{perspectiveRatio:Re}=Pe,Xe=(V?E/Re:E*Re)/s.bc,Fe=Aa(ve,ce,xe,k),it=Pe.signedDistanceFromCamera>0?Rh(Xe,C,_.lineOffsetX*Xe,_.lineOffsetY*Xe,!1,Fe,de,_,B,k,{},ne&&!V?ye:null,V&&!!ne,he,ae,V):null;let rt=!1,Bt=!1,Ve=!0;if(it&&!Pe.occluded){const et=.5*te*Re+le,ke=new s.P(-100,-100),Ze=new s.P(this.screenRightBoundary,this.screenBottomBoundary),bt=new da,{first:Pt,last:At}=it,Ft=Pt.path.length;let tr=[];for(let sr=Ft-1;sr>=1;sr--)tr.push(Pt.path[sr]);for(let sr=1;sr<At.path.length;sr++)tr.push(At.path[sr]);const hr=2.5*et;F&&(tr=tr.map(([sr,Lr,Cr],Pr)=>(ye&&!Ee&&(Cr=ye(Pr<Ft-1?Pt.tilePath[Ft-1-Pr]:At.tilePath[Pr-Ft+2])[2]),Aa(sr,Lr,Cr,F))),tr.some(sr=>sr[3]<=0)&&(tr=[]));let ir=[];if(tr.length>0){let sr=1/0,Lr=-1/0,Cr=1/0,Pr=-1/0;for(const Dr of tr)sr=Math.min(sr,Dr[0]),Cr=Math.min(Cr,Dr[1]),Lr=Math.max(Lr,Dr[0]),Pr=Math.max(Pr,Dr[1]);Lr>=ke.x&&sr<=Ze.x&&Pr>=ke.y&&Cr<=Ze.y&&(ir=[tr.map(Dr=>new s.P(Dr[0],Dr[1]))],(sr<ke.x||Lr>Ze.x||Cr<ke.y||Pr>Ze.y)&&(ir=s.ba(ir,ke.x,ke.y,Ze.x,Ze.y)))}for(const sr of ir){bt.reset(sr,.25*et);let Lr=0;Lr=bt.length<=.5*et?1:Math.ceil(bt.paddedLength/hr)+1;for(let Cr=0;Cr<Lr;Cr++){const Pr=Cr/Math.max(Lr-1,1),Dr=bt.lerp(Pr),un=Dr.x+pa,qn=Dr.y+pa;ue.push(un,qn,et,0);const Yr=un-et,gi=qn-et,Jr=un+et,gn=qn+et;if(Ve=Ve&&this.isOffscreen(Yr,gi,Jr,gn),Bt=Bt||this.isInsideGrid(Yr,gi,Jr,gn),!h&&this.grid.hitTestCircle(un,qn,et,Y)&&(rt=!0,!j))return{circles:[],offscreen:!1,collisionDetected:rt,occluded:!1}}}}return{circles:!j&&rt||!Bt?[]:ue,offscreen:Ve,collisionDetected:rt,occluded:Pe.occluded}}queryRenderedSymbols(l){if(l.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const h=[];let _=1/0,B=1/0,C=-1/0,E=-1/0;for(const j of l){const V=new s.P(j.x+pa,j.y+pa);_=Math.min(_,V.x),B=Math.min(B,V.y),C=Math.max(C,V.x),E=Math.max(E,V.y),h.push(V)}const M=this.grid.query(_,B,C,E).concat(this.ignoredGrid.query(_,B,C,E)),k={},F={};for(const j of M){const V=j.key;if(k[V.bucketInstanceId]===void 0&&(k[V.bucketInstanceId]={}),k[V.bucketInstanceId][V.featureIndex])continue;const Y=[new s.P(j.x1,j.y1),new s.P(j.x2,j.y1),new s.P(j.x2,j.y2),new s.P(j.x1,j.y2)];s.bb(h,Y)&&(k[V.bucketInstanceId][V.featureIndex]=!0,F[V.bucketInstanceId]===void 0&&(F[V.bucketInstanceId]=[]),F[V.bucketInstanceId].push(V.featureIndex))}return F}insertCollisionBox(l,h,_,B,C){(h?this.ignoredGrid:this.grid).insert({bucketInstanceId:_,featureIndex:B,collisionGroupID:C},l[0],l[1],l[2],l[3])}insertCollisionCircles(l,h,_,B,C){const E=h?this.ignoredGrid:this.grid,M={bucketInstanceId:_,featureIndex:B,collisionGroupID:C};for(let k=0;k<l.length;k+=4)E.insertCircle(M,l[k],l[k+1],l[k+2])}projectAndGetPerspectiveRatio(l,h,_,B,C,E,M){const k=[h,_,B,1];let F=!1;B||this.transform.pitch>0?(s.a7.transformMat4(k,k,l),this.fogState&&C&&M.name!=="globe"&&(F=function(Y,te,le,ae,ue,ne){const he=ne.calculateFogTileMatrix(ue),ye=[te,le,ae];return s.N.transformMat4(ye,ye,he),Bn(Y,s.N.length(ye),ne.pitch,ne._fov)}(this.fogState,h,_,B,C.toUnwrapped(),this.transform)>.9)):Fh(k,k,l);const j=k[3];return{point:new s.P((k[0]/j+1)/2*this.transform.width+pa,(-k[1]/j+1)/2*this.transform.height+pa),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(M)/j*.5,1.5),signedDistanceFromCamera:j,occluded:E&&k[2]>j||F}}isOffscreen(l,h,_,B){return _<pa||l>=this.screenRightBoundary||B<pa||h>this.screenBottomBoundary}isInsideGrid(l,h,_,B){return _>=0&&l<this.gridRightBoundary&&B>=0&&h<this.gridBottomBoundary}getViewportMatrix(){const l=s.a6.identity([]);return s.a6.translate(l,l,[-100,-100,0]),l}}function Nu(g,l,h){const _=l.createTileMatrix(g,g.worldSize,h.toUnwrapped());return s.a6.multiply(new Float32Array(16),g.projMatrix,_)}function Ic(g,l,h){if(l.projection.name===h.projection.name)return g.projMatrix;const _=h.clone();return _.setProjection(l.projection),Nu(_,l.getProjection(),g)}function Oc(g,l,h){return l.name===h.projection.name?g.projMatrix:Nu(h,l,g)}class md{constructor(l,h,_,B){this.opacity=l?Math.max(0,Math.min(1,l.opacity+(l.placed?h:-h))):B&&_?1:0,this.placed=_}isHidden(){return this.opacity===0&&!this.placed}}class ks{constructor(l,h,_,B,C,E=!1){this.text=new md(l?l.text:null,h,_,C),this.icon=new md(l?l.icon:null,h,B,C),this.clipped=E}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Xa{constructor(l,h,_,B=!1){this.text=l,this.icon=h,this.skipFade=_,this.clipped=B}}class ma{constructor(){this.invProjMatrix=s.a6.create(),this.viewportMatrix=s.a6.create(),this.circles=[]}}class Da{constructor(l,h,_,B,C){this.bucketInstanceId=l,this.featureIndex=h,this.sourceLayerIndex=_,this.bucketIndex=B,this.tileID=C}}class jh{constructor(l){this.crossSourceCollisions=l,this.maxGroupID=0,this.collisionGroups={}}get(l){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[l]){const h=++this.maxGroupID;this.collisionGroups[l]={ID:h,predicate:_=>_.collisionGroupID===h}}return this.collisionGroups[l]}}function jo(g,l,h,_,B){const{horizontalAlign:C,verticalAlign:E}=s.bf(g),M=-(C-.5)*l,k=-(E-.5)*h,F=s.bd(g,_);return new s.P(M+F[0]*B,k+F[1]*B)}function gd(g,l,h,_,B){const C=new s.P(g,l);return h&&C._rotate(_?B:-B),C}class Fu{constructor(l,h,_,B,C,E){this.transform=l.clone(),this.projection=l.projection.name,this.collisionIndex=new Ut(this.transform,C),this.buildingIndex=E,this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=h,this.retainedQueryData={},this.collisionGroups=new jh(_),this.collisionCircleArrays={},this.prevPlacement=B,B&&(B.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(l,h,_,B){const C=_.getBucket(h),E=_.latestFeatureIndex;if(!C||!E||h.fqid!==C.layerIds[0])return;const M=C.layers[0].layout,k=_.collisionBoxArray,F=Math.pow(2,this.transform.zoom-_.tileID.overscaledZ),j=_.tileSize/s.V,V=_.tileID.toUnwrapped();this.transform.setProjection(C.projection);const Y=(te=_.tileID,le=C.getProjection(),ae=this.transform,le.name===this.projection?ae.calculateProjMatrix(te.toUnwrapped()):Nu(ae,le,te));var te,le,ae;const ue=M.get("text-pitch-alignment")==="map",ne=M.get("text-rotation-alignment")==="map";h.compileFilter();const he=h.dynamicFilter(),ye=h.dynamicFilterNeedsFeature(),de=this.transform.calculatePixelsToTileUnitsMatrix(_),ve=kh(Y,_.tileID.canonical,ue,ne,this.transform,C.getProjection(),de);let ce=null;if(ue){const Pe=Lh(Y,_.tileID.canonical,ue,ne,this.transform,C.getProjection(),de);ce=s.a6.multiply([],this.transform.labelPlaneMatrix,Pe)}let xe=null;he&&_.latestFeatureIndex&&(xe={unwrappedTileID:V,dynamicFilter:he,dynamicFilterNeedsFeature:ye,featureIndex:_.latestFeatureIndex}),this.retainedQueryData[C.bucketInstanceId]=new Da(C.bucketInstanceId,E,C.sourceLayerIndex,C.index,_.tileID);const Ee={bucket:C,layout:M,posMatrix:Y,textLabelPlaneMatrix:ve,labelToScreenMatrix:ce,clippingData:xe,scale:F,textPixelRatio:j,holdingForFade:_.holdingForFade(),collisionBoxArray:k,partiallyEvaluatedTextSize:s.b5(C.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:s.b5(C.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(C.sourceID)};if(B)for(const Pe of C.sortKeyRanges){const{sortKey:Re,symbolInstanceStart:Xe,symbolInstanceEnd:Fe}=Pe;l.push({sortKey:Re,symbolInstanceStart:Xe,symbolInstanceEnd:Fe,parameters:Ee})}else l.push({symbolInstanceStart:0,symbolInstanceEnd:C.symbolInstances.length,parameters:Ee})}attemptAnchorPlacement(l,h,_,B,C,E,M,k,F,j,V,Y,te,le,ae,ue,ne,he){const{textOffset0:ye,textOffset1:de,crossTileID:ve}=Y,ce=[ye,de],xe=jo(l,_,B,ce,C),Ee=this.collisionIndex.placeCollisionBox(le,C,h,gd(xe.x,xe.y,E,M,this.transform.angle),V,k,F,j.predicate);if(ue){const Pe=le.getSymbolInstanceIconSize(he,this.transform.zoom,Y.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(le,Pe,ue,gd(xe.x,xe.y,E,M,this.transform.angle),V,k,F,j.predicate).box.length===0)return}if(Ee.box.length>0){let Pe;return this.prevPlacement&&this.prevPlacement.variableOffsets[ve]&&this.prevPlacement.placements[ve]&&this.prevPlacement.placements[ve].text&&(Pe=this.prevPlacement.variableOffsets[ve].anchor),this.variableOffsets[ve]={textOffset:ce,width:_,height:B,anchor:l,textScale:C,prevAnchor:Pe},this.markUsedJustification(le,l,Y,ae),le.allowVerticalPlacement&&(this.markUsedOrientation(le,ae,Y),this.placedOrientations[ve]=ae),{shift:xe,placedGlyphBoxes:Ee}}}placeLayerBucketPart(l,h,_,B){const{bucket:C,layout:E,posMatrix:M,textLabelPlaneMatrix:k,labelToScreenMatrix:F,clippingData:j,textPixelRatio:V,holdingForFade:Y,collisionBoxArray:te,partiallyEvaluatedTextSize:le,partiallyEvaluatedIconSize:ae,collisionGroup:ue}=l.parameters,ne=E.get("text-optional"),he=E.get("icon-optional"),ye=E.get("text-allow-overlap"),de=E.get("icon-allow-overlap"),ve=E.get("text-rotation-alignment")==="map",ce=E.get("text-pitch-alignment")==="map",xe=E.get("symbol-z-order")==="viewport-y",Ee=E.get("symbol-z-elevate");this.transform.setProjection(C.projection);let Pe=ye&&(de||!C.hasIconData()||he),Re=de&&(ye||!C.hasTextData()||ne);!C.collisionArrays&&te&&C.deserializeCollisionBoxes(te),_&&B&&C.updateCollisionDebugBuffers(this.transform.zoom,te);const Xe=(Fe,it,rt)=>{const{crossTileID:Bt,numVerticalGlyphVertices:Ve}=Fe;if(j){const Jr={zoom:this.transform.zoom,pitch:this.transform.pitch};let gn=null;if(j.dynamicFilterNeedsFeature){const Qr=this.retainedQueryData[C.bucketInstanceId];gn=j.featureIndex.loadFeature({featureIndex:Fe.featureIndex,bucketIndex:Qr.bucketIndex,sourceLayerIndex:Qr.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,j.dynamicFilter)(Jr,gn,this.retainedQueryData[C.bucketInstanceId].tileID.canonical,new s.P(Fe.tileAnchorX,Fe.tileAnchorY),this.transform.calculateDistanceTileData(j.unwrappedTileID)))return this.placements[Bt]=new Xa(!1,!1,!1,!0),void h.add(Bt)}if(h.has(Bt))return;if(Y)return void(this.placements[Bt]=new Xa(!1,!1,!1));let et=!1,ke=!1,Ze=!0,bt=!1,Pt=!1,At=null,Ft={box:null,offscreen:null,occluded:null},tr={box:null,offscreen:null,occluded:null},hr=null,ir=null,sr=null,Lr=0,Cr=0,Pr=0;rt.textFeatureIndex?Lr=rt.textFeatureIndex:Fe.useRuntimeCollisionCircles&&(Lr=Fe.featureIndex),rt.verticalTextFeatureIndex&&(Cr=rt.verticalTextFeatureIndex);const Dr=Jr=>{Jr.tileID=this.retainedQueryData[C.bucketInstanceId].tileID;const gn=this.transform.elevation;Jr.elevation=Fe.zOffset+(gn?gn.getAtTileOffset(Jr.tileID,Jr.tileAnchorX,Jr.tileAnchorY):0)},un=rt.textBox;if(un){Dr(un);const Jr=Qr=>{let fn=s.b6.horizontal;if(C.allowVerticalPlacement&&!Qr&&this.prevPlacement){const Jn=this.prevPlacement.placedOrientations[Bt];Jn&&(this.placedOrientations[Bt]=Jn,fn=Jn,this.markUsedOrientation(C,fn,Fe))}return fn},gn=(Qr,fn)=>{if(C.allowVerticalPlacement&&Ve>0&&rt.verticalTextBox){for(const Jn of C.writingModes)if(Jn===s.b6.vertical?(Ft=fn(),tr=Ft):Ft=Qr(),Ft&&Ft.box&&Ft.box.length)break}else Ft=Qr()};if(E.get("text-variable-anchor")){let Qr=E.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Bt]){const Cn=this.prevPlacement.variableOffsets[Bt];Qr.indexOf(Cn.anchor)>0&&(Qr=Qr.filter(mo=>mo!==Cn.anchor),Qr.unshift(Cn.anchor))}const fn=(Cn,mo,Oo)=>{const ka=C.getSymbolInstanceTextSize(le,Fe,this.transform.zoom,it),Tl=(Cn.x2-Cn.x1)*ka+2*Cn.padding,La=(Cn.y2-Cn.y1)*ka+2*Cn.padding,go=Fe.hasIconTextFit&&!de?mo:null;go&&Dr(go);let to={box:[],offscreen:!1,occluded:!1};const na=ye?2*Qr.length:Qr.length;for(let ya=0;ya<na;++ya){const Ra=this.attemptAnchorPlacement(Qr[ya%Qr.length],Cn,Tl,La,ka,ve,ce,V,M,ue,ya>=Qr.length,Fe,it,C,Oo,go,le,ae);if(Ra&&(to=Ra.placedGlyphBoxes,to&&to.box&&to.box.length)){et=!0,At=Ra.shift;break}}return to};gn(()=>fn(un,rt.iconBox,s.b6.horizontal),()=>{const Cn=rt.verticalTextBox;return Cn&&Dr(Cn),C.allowVerticalPlacement&&!(Ft&&Ft.box&&Ft.box.length)&&Ve>0&&Cn?fn(Cn,rt.verticalIconBox,s.b6.vertical):{box:null,offscreen:null,occluded:null}}),Ft&&(et=Ft.box,Ze=Ft.offscreen,bt=Ft.occluded);const Jn=Jr(!(!Ft||!Ft.box));if(!et&&this.prevPlacement){const Cn=this.prevPlacement.variableOffsets[Bt];Cn&&(this.variableOffsets[Bt]=Cn,this.markUsedJustification(C,Cn.anchor,Fe,Jn))}}else{const Qr=(fn,Jn)=>{const Cn=C.getSymbolInstanceTextSize(le,Fe,this.transform.zoom,it),mo=this.collisionIndex.placeCollisionBox(C,Cn,fn,new s.P(0,0),ye,V,M,ue.predicate);return mo&&mo.box&&mo.box.length&&(this.markUsedOrientation(C,Jn,Fe),this.placedOrientations[Bt]=Jn),mo};gn(()=>Qr(un,s.b6.horizontal),()=>{const fn=rt.verticalTextBox;return C.allowVerticalPlacement&&Ve>0&&fn?(Dr(fn),Qr(fn,s.b6.vertical)):{box:null,offscreen:null,occluded:null}}),Jr(!!(Ft&&Ft.box&&Ft.box.length))}}if(hr=Ft,et=hr&&hr.box&&hr.box.length>0,Ze=hr&&hr.offscreen,bt=hr&&hr.occluded,Fe.useRuntimeCollisionCircles){const Jr=C.text.placedSymbolArray.get(Fe.centerJustifiedTextSymbolIndex>=0?Fe.centerJustifiedTextSymbolIndex:Fe.verticalPlacedTextSymbolIndex),gn=s.b7(C.textSizeData,le,Jr),Qr=E.get("text-padding");ir=this.collisionIndex.placeCollisionCircles(C,ye,Jr,C.lineVertexArray,C.glyphOffsetArray,gn,M,k,F,_,ce,ue.predicate,Fe.collisionCircleDiameter*gn/s.bc,Qr,this.retainedQueryData[C.bucketInstanceId].tileID),et=ye||ir.circles.length>0&&!ir.collisionDetected,Ze=Ze&&ir.offscreen,bt=ir.occluded}if(rt.iconFeatureIndex&&(Pr=rt.iconFeatureIndex),rt.iconBox){const Jr=gn=>{Dr(gn);const Qr=Fe.hasIconTextFit&&At?gd(At.x,At.y,ve,ce,this.transform.angle):new s.P(0,0),fn=C.getSymbolInstanceIconSize(ae,this.transform.zoom,Fe.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(C,fn,gn,Qr,de,V,M,ue.predicate)};tr&&tr.box&&tr.box.length&&rt.verticalIconBox?(sr=Jr(rt.verticalIconBox),ke=sr.box.length>0):(sr=Jr(rt.iconBox),ke=sr.box.length>0),Ze=Ze&&sr.offscreen,Pt=sr.occluded}const qn=ne||Fe.numHorizontalGlyphVertices===0&&Ve===0,Yr=he||Fe.numIconVertices===0;if(qn||Yr?Yr?qn||(ke=ke&&et):et=ke&&et:ke=et=ke&&et,et&&hr&&hr.box&&this.collisionIndex.insertCollisionBox(hr.box,E.get("text-ignore-placement"),C.bucketInstanceId,tr&&tr.box&&Cr?Cr:Lr,ue.ID),ke&&sr&&this.collisionIndex.insertCollisionBox(sr.box,E.get("icon-ignore-placement"),C.bucketInstanceId,Pr,ue.ID),ir&&(et&&this.collisionIndex.insertCollisionCircles(ir.circles,E.get("text-ignore-placement"),C.bucketInstanceId,Lr,ue.ID),_)){const Jr=C.bucketInstanceId;let gn=this.collisionCircleArrays[Jr];gn===void 0&&(gn=this.collisionCircleArrays[Jr]=new ma);for(let Qr=0;Qr<ir.circles.length;Qr+=4)gn.circles.push(ir.circles[Qr+0]),gn.circles.push(ir.circles[Qr+1]),gn.circles.push(ir.circles[Qr+2]),gn.circles.push(ir.collisionDetected?1:0)}const gi=C.projection.name!=="globe";Pe=Pe&&(gi||!bt),Re=Re&&(gi||!Pt),this.placements[Bt]=new Xa(et||Pe,ke||Re,Ze||C.justReloaded),h.add(Bt)};if(Ee&&this.buildingIndex&&(this.buildingIndex.updateZOffset(C,this.retainedQueryData[C.bucketInstanceId].tileID),C.updateZOffset()),xe){const Fe=C.getSortedSymbolIndexes(this.transform.angle);for(let it=Fe.length-1;it>=0;--it){const rt=Fe[it];Xe(C.symbolInstances.get(rt),rt,C.collisionArrays[rt])}C.hasAnyZOffset&&s.w(`${C.layerIds[0]} layer symbol-z-elevate: symbols are not sorted by elevation if symbol-z-order is evaluated to viewport-y`)}else if(C.hasAnyZOffset){const Fe=C.getSortedIndexesByZOffset();for(let it=0;it<Fe.length;++it){const rt=Fe[it];Xe(C.symbolInstances.get(rt),rt,C.collisionArrays[rt])}}else for(let Fe=l.symbolInstanceStart;Fe<l.symbolInstanceEnd;Fe++)Xe(C.symbolInstances.get(Fe),Fe,C.collisionArrays[Fe]);if(_&&C.bucketInstanceId in this.collisionCircleArrays){const Fe=this.collisionCircleArrays[C.bucketInstanceId];s.a6.invert(Fe.invProjMatrix,M),Fe.viewportMatrix=this.collisionIndex.getViewportMatrix()}C.justReloaded=!1}markUsedJustification(l,h,_,B){const{leftJustifiedTextSymbolIndex:C,centerJustifiedTextSymbolIndex:E,rightJustifiedTextSymbolIndex:M,verticalPlacedTextSymbolIndex:k,crossTileID:F}=_,j=s.be(h),V=B===s.b6.vertical?k:j==="left"?C:j==="center"?E:j==="right"?M:-1;C>=0&&(l.text.placedSymbolArray.get(C).crossTileID=V>=0&&C!==V?0:F),E>=0&&(l.text.placedSymbolArray.get(E).crossTileID=V>=0&&E!==V?0:F),M>=0&&(l.text.placedSymbolArray.get(M).crossTileID=V>=0&&M!==V?0:F),k>=0&&(l.text.placedSymbolArray.get(k).crossTileID=V>=0&&k!==V?0:F)}markUsedOrientation(l,h,_){const B=h===s.b6.horizontal||h===s.b6.horizontalOnly?h:0,C=h===s.b6.vertical?h:0,{leftJustifiedTextSymbolIndex:E,centerJustifiedTextSymbolIndex:M,rightJustifiedTextSymbolIndex:k,verticalPlacedTextSymbolIndex:F}=_,j=l.text.placedSymbolArray;E>=0&&(j.get(E).placedOrientation=B),M>=0&&(j.get(M).placedOrientation=B),k>=0&&(j.get(k).placedOrientation=B),F>=0&&(j.get(F).placedOrientation=C)}commit(l){this.commitTime=l,this.zoomAtLastRecencyCheck=this.transform.zoom;const h=this.prevPlacement;let _=!1;this.prevZoomAdjustment=h?h.zoomAdjustment(this.transform.zoom):0;const B=h?h.symbolFadeChange(l):1,C=h?h.opacities:{},E=h?h.variableOffsets:{},M=h?h.placedOrientations:{};for(const k in this.placements){const F=this.placements[k],j=C[k];j?(this.opacities[k]=new ks(j,B,F.text,F.icon,null,F.clipped),_=_||F.text!==j.text.placed||F.icon!==j.icon.placed):(this.opacities[k]=new ks(null,B,F.text,F.icon,F.skipFade,F.clipped),_=_||F.text||F.icon)}for(const k in C){const F=C[k];if(!this.opacities[k]){const j=new ks(F,B,!1,!1);j.isHidden()||(this.opacities[k]=j,_=_||F.text.placed||F.icon.placed)}}for(const k in E)this.variableOffsets[k]||!this.opacities[k]||this.opacities[k].isHidden()||(this.variableOffsets[k]=E[k]);for(const k in M)this.placedOrientations[k]||!this.opacities[k]||this.opacities[k].isHidden()||(this.placedOrientations[k]=M[k]);_?this.lastPlacementChangeTime=l:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=h?h.lastPlacementChangeTime:l)}updateLayerOpacities(l,h){const _=new Set;for(const B of h){const C=B.getBucket(l);C&&B.latestFeatureIndex&&l.fqid===C.layerIds[0]&&(this.updateBucketOpacities(C,_,B.collisionBoxArray),C.layers[0].layout.get("symbol-z-elevate")&&this.buildingIndex&&(this.buildingIndex.updateZOffset(C,B.tileID),C.updateZOffset()))}}updateBucketOpacities(l,h,_){l.hasTextData()&&l.text.opacityVertexArray.clear(),l.hasIconData()&&l.icon.opacityVertexArray.clear(),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexArray.clear(),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexArray.clear();const B=l.layers[0].layout,C=!!l.layers[0].dynamicFilter(),E=new ks(null,0,!1,!1,!0),M=B.get("text-allow-overlap"),k=B.get("icon-allow-overlap"),F=B.get("text-variable-anchor"),j=B.get("text-rotation-alignment")==="map",V=B.get("text-pitch-alignment")==="map",Y=new ks(null,0,M&&(k||!l.hasIconData()||B.get("icon-optional")),k&&(M||!l.hasTextData()||B.get("text-optional")),!0);!l.collisionArrays&&_&&(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData())&&l.deserializeCollisionBoxes(_);const te=(ae,ue,ne)=>{for(let he=0;he<ue/4;he++)ae.opacityVertexArray.emplaceBack(ne)};let le=0;for(let ae=0;ae<l.symbolInstances.length;ae++){const ue=l.symbolInstances.get(ae),{numHorizontalGlyphVertices:ne,numVerticalGlyphVertices:he,crossTileID:ye,numIconVertices:de}=ue,ve=h.has(ye);let ce=this.opacities[ye];ve?ce=E:ce||(ce=Y,this.opacities[ye]=ce),h.add(ye);const xe=ne>0||he>0,Ee=de>0,Pe=this.placedOrientations[ye],Re=Pe===s.b6.vertical,Xe=Pe===s.b6.horizontal||Pe===s.b6.horizontalOnly;if(!xe&&!Ee||ce.isHidden()||le++,xe){const Fe=Uh(ce.text);te(l.text,ne,Re?Rc:Fe),te(l.text,he,Xe?Rc:Fe);const it=ce.text.isHidden(),{leftJustifiedTextSymbolIndex:rt,centerJustifiedTextSymbolIndex:Bt,rightJustifiedTextSymbolIndex:Ve,verticalPlacedTextSymbolIndex:et}=ue,ke=l.text.placedSymbolArray,Ze=it||Re?1:0;rt>=0&&(ke.get(rt).hidden=Ze),Bt>=0&&(ke.get(Bt).hidden=Ze),Ve>=0&&(ke.get(Ve).hidden=Ze),et>=0&&(ke.get(et).hidden=it||Xe?1:0);const bt=this.variableOffsets[ye];bt&&this.markUsedJustification(l,bt.anchor,ue,Pe);const Pt=this.placedOrientations[ye];Pt&&(this.markUsedJustification(l,"left",ue,Pt),this.markUsedOrientation(l,Pt,ue))}if(Ee){const Fe=Uh(ce.icon),{placedIconSymbolIndex:it,verticalPlacedIconSymbolIndex:rt}=ue,Bt=l.icon.placedSymbolArray,Ve=ce.icon.isHidden()?1:0;it>=0&&(te(l.icon,de,Re?Rc:Fe),Bt.get(it).hidden=Ve),rt>=0&&(te(l.icon,ue.numVerticalIconVertices,Xe?Rc:Fe),Bt.get(rt).hidden=Ve)}if(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData()){const Fe=l.collisionArrays[ae];if(Fe){let it=new s.P(0,0),rt=!0;if(Fe.textBox||Fe.verticalTextBox){if(F){const Ve=this.variableOffsets[ye];Ve?(it=jo(Ve.anchor,Ve.width,Ve.height,Ve.textOffset,Ve.textScale),j&&it._rotate(V?this.transform.angle:-this.transform.angle)):rt=!1}C&&(rt=!ce.clipped),Fe.textBox&&ju(l.textCollisionBox.collisionVertexArray,ce.text.placed,!rt||Re,it.x,it.y),Fe.verticalTextBox&&ju(l.textCollisionBox.collisionVertexArray,ce.text.placed,!rt||Xe,it.x,it.y)}const Bt=rt&&!!(!Xe&&Fe.verticalIconBox);Fe.iconBox&&ju(l.iconCollisionBox.collisionVertexArray,ce.icon.placed,Bt,ue.hasIconTextFit?it.x:0,ue.hasIconTextFit?it.y:0),Fe.verticalIconBox&&ju(l.iconCollisionBox.collisionVertexArray,ce.icon.placed,!Bt,ue.hasIconTextFit?it.x:0,ue.hasIconTextFit?it.y:0)}}}if(l.fullyClipped=le===0,l.sortFeatures(this.transform.angle),this.retainedQueryData[l.bucketInstanceId]&&(this.retainedQueryData[l.bucketInstanceId].featureSortOrder=l.featureSortOrder),l.hasTextData()&&l.text.opacityVertexBuffer&&l.text.opacityVertexBuffer.updateData(l.text.opacityVertexArray),l.hasIconData()&&l.icon.opacityVertexBuffer&&l.icon.opacityVertexBuffer.updateData(l.icon.opacityVertexArray),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexBuffer&&l.iconCollisionBox.collisionVertexBuffer.updateData(l.iconCollisionBox.collisionVertexArray),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexBuffer&&l.textCollisionBox.collisionVertexBuffer.updateData(l.textCollisionBox.collisionVertexArray),l.bucketInstanceId in this.collisionCircleArrays){const ae=this.collisionCircleArrays[l.bucketInstanceId];l.placementInvProjMatrix=ae.invProjMatrix,l.placementViewportMatrix=ae.viewportMatrix,l.collisionCircleArray=ae.circles,delete this.collisionCircleArrays[l.bucketInstanceId]}}symbolFadeChange(l){return this.fadeDuration===0?1:(l-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(l){return Math.max(0,(this.transform.zoom-l)/1.5)}hasTransitions(l){return this.stale||l-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(l,h){const _=this.zoomAtLastRecencyCheck===h?1-this.zoomAdjustment(h):1;return this.zoomAtLastRecencyCheck=h,this.commitTime+this.fadeDuration*_>l}setStale(){this.stale=!0}}function ju(g,l,h,_,B){g.emplaceBack(l?1:0,h?1:0,_||0,B||0),g.emplaceBack(l?1:0,h?1:0,_||0,B||0),g.emplaceBack(l?1:0,h?1:0,_||0,B||0),g.emplaceBack(l?1:0,h?1:0,_||0,B||0)}const kc=Math.pow(2,25),_d=Math.pow(2,24),Lc=Math.pow(2,17),yd=Math.pow(2,16),yl=Math.pow(2,9),$h=Math.pow(2,8),F_=Math.pow(2,1);function Uh(g){if(g.opacity===0&&!g.placed)return 0;if(g.opacity===1&&g.placed)return 4294967295;const l=g.placed?1:0,h=Math.floor(127*g.opacity);return h*kc+l*_d+h*Lc+l*yd+h*yl+l*$h+h*F_+l}const Rc=0;class Ls{constructor(l){this._sortAcrossTiles=l.layout.get("symbol-z-order")!=="viewport-y"&&l.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(l,h,_,B,C){const E=this._bucketParts;for(;this._currentTileIndex<l.length;)if(h.getBucketParts(E,B,l[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,C())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,E.sort((M,k)=>M.sortKey-k.sortKey));this._currentPartIndex<E.length;){const M=E[this._currentPartIndex];if(h.placeLayerBucketPart(M,this._seenCrossTileIDs,_,M.symbolInstanceStart===0),this._currentPartIndex++,C())return!0}return!1}}class Vh{constructor(l,h,_,B,C,E,M,k,F){this.placement=new Fu(l,C,E,M,k,F),this._currentPlacementIndex=h.length-1,this._forceFullPlacement=_,this._showCollisionBoxes=B,this._done=!1}isDone(){return this._done}continuePlacement(l,h,_,B){const C=s.f.now(),E=()=>{const M=s.f.now()-C;return!this._forceFullPlacement&&M>2};for(;this._currentPlacementIndex>=0;){const M=h[l[this._currentPlacementIndex]],k=this.placement.collisionIndex.transform.zoom;if(M.type==="symbol"&&(!M.minzoom||M.minzoom<=k)&&(!M.maxzoom||M.maxzoom>k)){const F=M,j=F.layout.get("symbol-z-elevate"),V=this._inProgressLayer=this._inProgressLayer||new Ls(F),Y=s.ag(M.source,M.scope);if(V.continuePlacement(j?B[Y]:_[Y],this.placement,this._showCollisionBoxes,M,E))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(l){return this.placement.commit(l),this.placement}}const vl=512/s.V/2;class om{constructor(l,h,_){this.tileID=l,this.bucketInstanceId=_,this.index=new s.bg(h.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const B=l.canonical.x*s.V,C=l.canonical.y*s.V;for(let E=0;E<h.length;E++){const{key:M,crossTileID:k,tileAnchorX:F,tileAnchorY:j}=h.get(E),V=Math.floor((B+F)*vl),Y=Math.floor((C+j)*vl);this.index.add(V,Y),this.keys.push(M),this.crossTileIDs.push(k)}this.index.finish()}findMatches(l,h,_){const B=this.tileID.canonical.z<h.canonical.z?1:Math.pow(2,this.tileID.canonical.z-h.canonical.z),C=vl/Math.pow(2,h.canonical.z-this.tileID.canonical.z),E=h.canonical.x*s.V,M=h.canonical.y*s.V;for(let k=0;k<l.length;k++){const F=l.get(k);if(F.crossTileID)continue;const{key:j,tileAnchorX:V,tileAnchorY:Y}=F,te=Math.floor((E+V)*C),le=Math.floor((M+Y)*C),ae=this.index.range(te-B,le-B,te+B,le+B);for(const ue of ae){const ne=this.crossTileIDs[ue];if(this.keys[ue]===j&&!_.has(ne)){_.add(ne),F.crossTileID=ne;break}}}}}class Ya{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class ql{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(l){const h=Math.round((l-this.lng)/360);if(h!==0)for(const _ in this.indexes){const B=this.indexes[_],C={};for(const E in B){const M=B[E];M.tileID=M.tileID.unwrapTo(M.tileID.wrap+h),C[M.tileID.key]=M}this.indexes[_]=C}this.lng=l}addBucket(l,h,_){if(this.indexes[l.overscaledZ]&&this.indexes[l.overscaledZ][l.key]){if(this.indexes[l.overscaledZ][l.key].bucketInstanceId===h.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(l.overscaledZ,this.indexes[l.overscaledZ][l.key])}for(let C=0;C<h.symbolInstances.length;C++)h.symbolInstances.get(C).crossTileID=0;this.usedCrossTileIDs[l.overscaledZ]||(this.usedCrossTileIDs[l.overscaledZ]=new Set);const B=this.usedCrossTileIDs[l.overscaledZ];for(const C in this.indexes){const E=this.indexes[C];if(Number(C)>l.overscaledZ)for(const M in E){const k=E[M];k.tileID.isChildOf(l)&&k.findMatches(h.symbolInstances,l,B)}else{const M=E[l.scaledTo(Number(C)).key];M&&M.findMatches(h.symbolInstances,l,B)}}for(let C=0;C<h.symbolInstances.length;C++){const E=h.symbolInstances.get(C);E.crossTileID||(E.crossTileID=_.generate(),B.add(E.crossTileID))}return this.indexes[l.overscaledZ]===void 0&&(this.indexes[l.overscaledZ]={}),this.indexes[l.overscaledZ][l.key]=new om(l,h.symbolInstances,h.bucketInstanceId),!0}removeBucketCrossTileIDs(l,h){for(const _ of h.crossTileIDs)this.usedCrossTileIDs[l].delete(_)}removeStaleBuckets(l){let h=!1;for(const _ in this.indexes){const B=this.indexes[_];for(const C in B)l[B[C].bucketInstanceId]||(this.removeBucketCrossTileIDs(_,B[C]),delete B[C],h=!0)}return h}}class Gh{constructor(){this.layerIndexes={},this.crossTileIDs=new Ya,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(l,h,_,B){let C=this.layerIndexes[l.fqid];C===void 0&&(C=this.layerIndexes[l.fqid]=new ql);let E=!1;const M={};B.name!=="globe"&&C.handleWrapJump(_);for(const k of h){const F=k.getBucket(l);F&&l.fqid===F.layerIds[0]&&(F.bucketInstanceId||(F.bucketInstanceId=++this.maxBucketInstanceId),C.addBucket(k.tileID,F,this.crossTileIDs)&&(E=!0),M[F.bucketInstanceId]=!0)}return C.removeStaleBuckets(M)&&(E=!0),E}pruneUnusedLayers(l){const h={};l.forEach(_=>{h[_]=!0});for(const _ in this.layerIndexes)h[_]||delete this.layerIndexes[_]}}class Rs{constructor(l=0,h=0,_=0,B=0){if(isNaN(l)||l<0||isNaN(h)||h<0||isNaN(_)||_<0||isNaN(B)||B<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=l,this.bottom=h,this.left=_,this.right=B}interpolate(l,h,_){return h.top!=null&&l.top!=null&&(this.top=s.U(l.top,h.top,_)),h.bottom!=null&&l.bottom!=null&&(this.bottom=s.U(l.bottom,h.bottom,_)),h.left!=null&&l.left!=null&&(this.left=s.U(l.left,h.left,_)),h.right!=null&&l.right!=null&&(this.right=s.U(l.right,h.right,_)),this}getCenter(l,h){const _=s.aa((this.left+l-this.right)/2,0,l),B=s.aa((this.top+h-this.bottom)/2,0,h);return new s.P(_,B)}equals(l){return this.top===l.top&&this.bottom===l.bottom&&this.left===l.left&&this.right===l.right}clone(){return new Rs(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Kl(g,l){const h=s.bk(g,3);s.a6.fromQuat(g,l),s.bm(g,3,h)}function Xl(g,l){const h=s.bi.identity([]);return s.bi.rotateZ(h,h,-l),s.bi.rotateX(h,h,-g),h}function $u(g,l){const h=[g[0],g[1],0],_=[l[0],l[1],0];if(s.N.length(h)>=1e-15){const E=s.N.normalize([],h);s.N.scale(_,E,s.N.dot(_,E)),l[0]=_[0],l[1]=_[1]}const B=s.N.cross([],l,g);if(s.N.len(B)<1e-15)return null;const C=Math.atan2(-B[1],B[0]);return Xl(Math.atan2(Math.sqrt(g[0]*g[0]+g[1]*g[1]),-g[2]),C)}class ps{constructor(l,h){this.position=l,this.orientation=h}get position(){return this._position}set position(l){if(l){const h=l instanceof s.L?l:new s.L(l[0],l[1],l[2]);this._renderWorldCopies&&(h.x=s.bh(h.x,0,1)),this._position=h}else this._position=null}lookAtPoint(l,h){if(this.orientation=null,!this.position)return;const _=this.position,B=this._elevation?this._elevation.getAtPointOrZero(s.L.fromLngLat(l)):0,C=s.L.fromLngLat(l,B),E=[C.x-_.x,C.y-_.y,C.z-_.z];h||(h=[0,0,1]),h[2]=Math.abs(h[2]),this.orientation=$u(E,h)}setPitchBearing(l,h){this.orientation=Xl(s.bj(l),s.bj(-h))}}class zs{constructor(l,h){this._transform=s.a6.identity([]),this.orientation=h,this.position=l}get mercatorPosition(){const l=this.position;return new s.L(l[0],l[1],l[2])}get position(){const l=s.bk(this._transform,3);return[l[0],l[1],l[2]]}set position(l){var h;l&&s.bm(this._transform,3,[(h=l)[0],h[1],h[2],1])}get orientation(){return this._orientation}set orientation(l){this._orientation=l||s.bi.identity([]),l&&Kl(this._transform,this._orientation)}getPitchBearing(){const l=this.forward(),h=this.right();return{bearing:Math.atan2(-h[1],h[0]),pitch:Math.atan2(Math.sqrt(l[0]*l[0]+l[1]*l[1]),-l[2])}}setPitchBearing(l,h){this._orientation=Xl(l,h),Kl(this._transform,this._orientation)}forward(){const l=s.bk(this._transform,2);return[-l[0],-l[1],-l[2]]}up(){const l=s.bk(this._transform,1);return[-l[0],-l[1],-l[2]]}right(){const l=s.bk(this._transform,0);return[l[0],l[1],l[2]]}getCameraToWorld(l,h){const _=new Float64Array(16);return s.a6.invert(_,this.getWorldToCamera(l,h)),_}getCameraToWorldMercator(){return this._transform}getWorldToCameraPosition(l,h,_){const B=this.position;s.N.scale(B,B,-l);const C=new Float64Array(16);return s.a6.fromScaling(C,[_,_,_]),s.a6.translate(C,C,B),C[10]*=h,C}getWorldToCamera(l,h){const _=new Float64Array(16),B=new Float64Array(4),C=this.position;return s.bi.conjugate(B,this._orientation),s.N.scale(C,C,-l),s.a6.fromQuat(_,B),s.a6.translate(_,_,C),_[1]*=-1,_[5]*=-1,_[9]*=-1,_[13]*=-1,_[8]*=h,_[9]*=h,_[10]*=h,_[11]*=h,_}getCameraToClipPerspective(l,h,_,B){const C=new Float64Array(16);return s.a6.perspective(C,l,h,_,B),C}getCameraToClipOrthographic(l,h,_,B,C,E){const M=new Float64Array(16);return s.a6.ortho(M,l,h,_,B,C,E),M}getDistanceToElevation(l,h=!1){const _=l===0?0:s.bl(l,h?s.au(this.position[1]):this.position[1]),B=this.forward();return(_-this.position[2])/B[2]}clone(){return new zs([...this.position],[...this.orientation])}}const Bl=(g,l,h)=>(1-h)*g+h*l,Uu=g=>g*g*g*g*g;class zc{constructor(l,h,_,B,C,E,M){this.tileSize=512,this._renderWorldCopies=C===void 0||C,this._minZoom=l||0,this._maxZoom=h||22,this._minPitch=_??0,this._maxPitch=B??60,this.setProjection(E),this.setMaxBounds(M),this.width=0,this.height=0,this._center=new s.bn(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Rs,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._expandedProjMatrixCache={},this._distanceTileDataCache={},this._camera=new zs,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._tileCoverLift=0,this._horizonShift=.1,this._orthographicProjectionAtLowPitch=!1}clone(){const l=new zc(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return l._elevation=this._elevation,l._centerAltitude=this._centerAltitude,l._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,l.tileSize=this.tileSize,l.mercatorFromTransition=this.mercatorFromTransition,l.width=this.width,l.height=this.height,l.cameraElevationReference=this.cameraElevationReference,l._center=this._center,l._setZoom(this.zoom),l._seaLevelZoom=this._seaLevelZoom,l.angle=this.angle,l._fov=this._fov,l._pitch=this._pitch,l._nearZ=this._nearZ,l._farZ=this._farZ,l._averageElevation=this._averageElevation,l._orthographicProjectionAtLowPitch=this._orthographicProjectionAtLowPitch,l._unmodified=this._unmodified,l._edgeInsets=this._edgeInsets.clone(),l._camera=this._camera.clone(),l._calcMatrices(),l.freezeTileCoverage=this.freezeTileCoverage,l.frustumCorners=this.frustumCorners,l}get isOrthographic(){return this.projection.name!=="globe"&&this._orthographicProjectionAtLowPitch&&this.pitch<15}get elevation(){return this._elevation}set elevation(l){this._elevation!==l&&(this._elevation=l,this._updateCameraOnTerrain(),this._calcMatrices())}get depthOcclusionForSymbolsAndCircles(){return this.projection.name!=="globe"&&!this.isOrthographic}updateElevation(l,h=!1){const _=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||_)&&this._updateCameraOnTerrain(),(l||_)&&this._constrainCamera(h),this._calcMatrices()}getProjection(){return s.ac(this.projection,["name","center","parallels"])}setProjection(l){this.projectionOptions=l||{name:"mercator"};const h=this.projection?this.getProjection():void 0;this.projection=s.bo(this.projectionOptions);const _=!w(h,this.getProjection());return _&&this._calcMatrices(),this.mercatorFromTransition=!1,_}setOrthographicProjectionAtLowPitch(l){return this._orthographicProjectionAtLowPitch!==l&&(this._orthographicProjectionAtLowPitch=l,this._calcMatrices(),!0)}setMercatorFromTransition(){const l=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=s.bo({name:"mercator"});const h=l!==this.projection.name;return h&&this._calcMatrices(),h}get minZoom(){return this._minZoom}set minZoom(l){this._minZoom!==l&&(this._minZoom=l,this.zoom=Math.max(this.zoom,l))}get maxZoom(){return this._maxZoom}set maxZoom(l){this._maxZoom!==l&&(this._maxZoom=l,this.zoom=Math.min(this.zoom,l))}get minPitch(){return this._minPitch}set minPitch(l){this._minPitch!==l&&(this._minPitch=l,this.pitch=Math.max(this.pitch,l))}get maxPitch(){return this._maxPitch}set maxPitch(l){this._maxPitch!==l&&(this._maxPitch=l,this.pitch=Math.min(this.pitch,l))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(l){l===void 0?l=!0:l===null&&(l=!1),this._renderWorldCopies=l}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const l=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(l))}get cameraWorldSize(){const l=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(l))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return s.bl(1,this.center.lat)*this.cameraWorldSizeForFog}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.P(this.width,this.height)}get bearing(){return s.bh(this.rotation,-180,180)}set bearing(l){this.rotation=l}get rotation(){return-this.angle/Math.PI*180}set rotation(l){const h=-l*Math.PI/180;this.angle!==h&&(this._unmodified=!1,this.angle=h,this._calcMatrices(),this.rotationMatrix=s.b4.create(),s.b4.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(l){const h=s.aa(l,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==h&&(this._unmodified=!1,this._pitch=h,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const l=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/l)}set fov(l){l=Math.max(.01,Math.min(60,l)),this._fov!==l&&(this._unmodified=!1,this._fov=s.bj(l),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(l){this._averageElevation=l,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(l){const h=Math.min(Math.max(l,this.minZoom),this.maxZoom);this._zoom!==h&&(this._unmodified=!1,this._setZoom(h),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(l){this._zoom=l,this.scale=this.zoomScale(l),this.tileZoom=Math.floor(l),this.zoomFraction=l-this.tileZoom}get tileCoverLift(){return this._tileCoverLift}set tileCoverLift(l){this._tileCoverLift!==l&&(this._tileCoverLift=l)}_updateCameraOnTerrain(){const l=this.elevation?this.elevation.getAtPoint(this.locationCoordinate(this.center),Number.NEGATIVE_INFINITY):Number.NEGATIVE_INFINITY,h=this.elevation&&l===Number.NEGATIVE_INFINITY&&this.elevation.visibleDemTiles.length>0&&this.elevation.exaggeration()>0&&this._centerAltitudeValidForExaggeration;if(!this._elevation||l===Number.NEGATIVE_INFINITY&&(!h||!this._centerAltitude))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const _=this._elevation;h||this._centerAltitude&&this._centerAltitudeValidForExaggeration&&_.exaggeration()&&this._centerAltitudeValidForExaggeration!==_.exaggeration()?(this._centerAltitude=this._centerAltitude/this._centerAltitudeValidForExaggeration*_.exaggeration(),this._centerAltitudeValidForExaggeration=_.exaggeration()):(this._centerAltitude=l||0,this._centerAltitudeValidForExaggeration=_.exaggeration()),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const l=this._elevation,h=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],_=this.horizonLineFromTop();let B=0,C=0;for(let E=0;E<h.length;E++){const M=new s.P(h[E][0]*this.width,_+h[E][1]*(this.height-_)),k=l.pointCoordinate(M);if(!k)continue;const F=1/Math.hypot(k[0]-this._camera.position[0],k[1]-this._camera.position[1]);B+=k[3]*F,C+=F}return C===0?NaN:B/C}get center(){return this._center}set center(l){l.lat===this._center.lat&&l.lng===this._center.lng||(this._unmodified=!1,this._center=l,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const l=this._seaLevelZoom,h=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),_=this.pixelsPerMeter/this.worldSize*h,B=this._mercatorZfromZoom(l),C=this._mercatorZfromZoom(this._maxZoom),E=Math.max(B-_,C);this._setZoom(this._zoomFromMercatorZ(E))}get padding(){return this._edgeInsets.toJSON()}set padding(l){this._edgeInsets.equals(l)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,l,1),this._calcMatrices())}computeZoomRelativeTo(l){const h=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,l.toAltitude()));let _;_=l.z<this._camera.position[2]?[h.x,h.y,h.z]:[l.x,l.y,l.z];const B=s.N.length(s.N.sub([],this._camera.position,_));return s.aa(this._zoomFromMercatorZ(B),this._minZoom,this._maxZoom)}setFreeCameraOptions(l){if(!this.height||!l.position&&!l.orientation)return;this._updateCameraState();let h=!1;if(l.orientation&&!s.bi.exactEquals(l.orientation,this._camera.orientation)&&(h=this._setCameraOrientation(l.orientation)),l.position){const _=[l.position.x,l.position.y,l.position.z];s.N.exactEquals(_,this._camera.position)||(this._setCameraPosition(_),h=!0)}h&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const l=this._camera.position,h=new ps;return h.position=new s.L(l[0],l[1],l[2]),h.orientation=this._camera.orientation,h._elevation=this.elevation,h._renderWorldCopies=this.renderWorldCopies,h}_setCameraOrientation(l){if(!s.bi.length(l))return!1;s.bi.normalize(l,l);const h=s.N.transformQuat([],[0,0,-1],l),_=s.N.transformQuat([],[0,-1,0],l);if(_[2]<0)return!1;const B=$u(h,_);return!!B&&(this._camera.orientation=B,!0)}_setCameraPosition(l){const h=this.zoomScale(this.minZoom)*this.tileSize,_=this.zoomScale(this.maxZoom)*this.tileSize,B=this.cameraToCenterDistance;l[2]=s.aa(l[2],B/_,B/h),this._camera.position=l}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(l){return this._edgeInsets.equals(l)}interpolatePadding(l,h,_){this._unmodified=!1,this._edgeInsets.interpolate(l,h,_),this._constrain(),this._calcMatrices()}coveringZoomLevel(l){const h=(l.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/l.tileSize));return Math.max(0,h)}getVisibleUnwrappedCoordinates(l){const h=[new s.bp(0,l)];if(this.renderWorldCopies){const _=this.pointCoordinate(new s.P(0,0)),B=this.pointCoordinate(new s.P(this.width,0)),C=this.pointCoordinate(new s.P(this.width,this.height)),E=this.pointCoordinate(new s.P(0,this.height)),M=Math.floor(Math.min(_.x,B.x,C.x,E.x)),k=Math.floor(Math.max(_.x,B.x,C.x,E.x)),F=1;for(let j=M-F;j<=k+F;j++)j!==0&&h.push(new s.bp(j,l))}return h}isLODDisabled(l){return(!l||this.pitch<=60)&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace}extendTileCoverForShadows(l,h,_){let B=[];if(h[0]===0&&h[1]===0)return B;for(const E of l){const M=E.canonical,k=E.overscaledZ,F=E.wrap,j=1<<M.z,V=M.x+1<j,Y=M.x>0,te=M.y+1<j,le=M.y>0,ae=E.wrap-(Y?0:1),ue=E.wrap+(V?0:1),ne=Y?M.x-1:j-1,he=V?M.x+1:0;h[0]<0?(B.push(new s.am(k,ue,M.z,he,M.y)),h[1]<0&&te&&(B.push(new s.am(k,F,M.z,M.x,M.y+1)),B.push(new s.am(k,ue,M.z,he,M.y+1))),h[1]>0&&le&&(B.push(new s.am(k,F,M.z,M.x,M.y-1)),B.push(new s.am(k,ue,M.z,he,M.y-1)))):h[0]>0?(B.push(new s.am(k,ae,M.z,ne,M.y)),h[1]<0&&te&&(B.push(new s.am(k,F,M.z,M.x,M.y+1)),B.push(new s.am(k,ae,M.z,ne,M.y+1))),h[1]>0&&le&&(B.push(new s.am(k,F,M.z,M.x,M.y-1)),B.push(new s.am(k,ae,M.z,ne,M.y-1)))):h[1]<0&&te?B.push(new s.am(k,F,M.z,M.x,M.y+1)):le&&B.push(new s.am(k,F,M.z,M.x,M.y-1))}if(B.length>1){B.sort((k,F)=>k.overscaledZ-F.overscaledZ||k.wrap-F.wrap||k.canonical.z-F.canonical.z||k.canonical.x-F.canonical.x||k.canonical.y-F.canonical.y);let E=0,M=0;for(;M<B.length;)B[M].equals(B[E])?++M:B[++E]=B[M++];B.length=E+1}const C=[];for(const E of B)B.some(M=>E.isChildOf(M))||C.push(E);return B=C.filter(E=>!l.some(M=>!!(E.overscaledZ<_&&M.isChildOf(E))||E.equals(M)||E.isChildOf(M))),B}coveringTiles(l){let h=this.coveringZoomLevel(l);const _=h,B=this.elevation&&this.elevation.exaggeration(),C=B&&!l.isTerrainDEM,E=this.projection.name==="mercator";if(l.minzoom!==void 0&&h<l.minzoom)return[];l.maxzoom!==void 0&&h>l.maxzoom&&(h=l.maxzoom);const M=this.locationCoordinate(this.center),k=this.center.lat,F=1<<h,j=[F*M.x,F*M.y,0],V=this.projection.name==="globe",Y=!V,te=s.bq.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,h,Y),le=V?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),ae=F*s.bl(1,this.center.lat),ue=this._camera.position[2]/s.bl(1,this.center.lat),ne=[F*le.x,F*le.y,ue*(Y?1:ae)],he=V||B,ye=this.cameraToCenterDistance/l.tileSize*(l.roundZoom?1:.502),de=this.isLODDisabled(!0)?h:0;let ve;if(this._elevation&&l.isTerrainDEM)ve=1e4*this._elevation.exaggeration();else if(this._elevation){const ke=this._elevation.getMinMaxForVisibleTiles();ve=ke?ke.max:this._centerAltitude}else ve=this._centerAltitude;const ce=l.isTerrainDEM?-ve:this._elevation?this._elevation.getMinElevationBelowMSL():0,xe=this.projection.isReprojectedInTileSpace?s.br(this):1,Ee=ke=>{const bt=new s.L(ke.x+25e-6,ke.y,ke.z),Pt=new s.L(ke.x,ke.y+25e-6,ke.z),At=ke.toLngLat(),Ft=bt.toLngLat(),tr=Pt.toLngLat(),hr=this.locationCoordinate(At),ir=this.locationCoordinate(Ft),sr=this.locationCoordinate(tr),Lr=Math.hypot(ir.x-hr.x,ir.y-hr.y),Cr=Math.hypot(sr.x-hr.x,sr.y-hr.y);return Math.sqrt(Lr*Cr)*xe/25e-6},Pe=ke=>{const Ze=ve,bt=ce;return{aabb:s.bu(this,F,0,0,0,ke,bt,Ze,this.projection),zoom:0,x:0,y:0,minZ:bt,maxZ:Ze,wrap:ke,fullyVisible:!1}},Re=[];let Xe=[];const Fe=h,it=l.reparseOverscaled?_:h,rt=ke=>ke*ke,Bt=rt((ue-this._centerAltitude)*ae),Ve=ke=>{if(!this._elevation||!ke.tileID||!E)return;const Ze=this._elevation.getMinMaxForTile(ke.tileID),bt=ke.aabb;Ze?(bt.min[2]=Ze.min,bt.max[2]=Ze.max,bt.center[2]=(bt.min[2]+bt.max[2])/2):(ke.shouldSplit=et(ke),ke.shouldSplit||(bt.min[2]=bt.max[2]=bt.center[2]=this._centerAltitude))},et=ke=>{if(ke.zoom<de)return!0;if(ke.zoom===Fe)return!1;if(ke.shouldSplit!=null)return ke.shouldSplit;const Ze=ke.aabb.distanceX(ne),bt=ke.aabb.distanceY(ne);let Pt=Bt,At=1;if(V){Pt=rt(ke.aabb.distanceZ(ne));const hr=Math.pow(2,ke.zoom),ir=s.au((ke.y+1)/hr),sr=s.au(ke.y/hr),Lr=Math.min(Math.max(k,ir),sr),Cr=s.bJ(Lr)/s.bJ(k);if(At=Lr===k?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,Cr/this._mercatorScaleRatio),this.zoom<=s.bG&&ke.zoom===Fe-1&&Cr>=.9)return!0}else if(C&&(Pt=rt(ke.aabb.distanceZ(ne)*ae)),this.projection.isReprojectedInTileSpace&&_<=5){const hr=Math.pow(2,ke.zoom),ir=Ee(new s.L((ke.x+.5)/hr,(ke.y+.5)/hr));At=ir>.85?1:ir}const Ft=Ze*Ze+bt*bt+Pt,tr=rt((1<<Fe-ke.zoom)*ye*At*((hr,ir)=>{if(ir*rt(.707)<hr)return 1;const sr=Math.sqrt(ir/hr);return sr/(1.4144271570014144+(Math.pow(1.1,sr-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(Pt,Bt),Ft));return Ft<tr};if(this.renderWorldCopies)for(let ke=1;ke<=3;ke++)Re.push(Pe(-ke)),Re.push(Pe(ke));for(Re.push(Pe(0));Re.length>0;){const ke=Re.pop(),Ze=ke.x,bt=ke.y;let Pt=ke.fullyVisible;const At=()=>this.projection.name==="globe"&&(ke.y===0||ke.y===(1<<ke.zoom)-1);if(!Pt){let Ft=he?ke.aabb.intersects(te):ke.aabb.intersectsFlat(te);if(Ft===0&&At()){const tr=new s.bs(ke.zoom,Ze,bt);Ft=s.bt(this,F,tr,!0).intersects(te)}if(Ft===0)continue;Pt=Ft===2}if(ke.zoom!==Fe&&et(ke))for(let Ft=0;Ft<4;Ft++){const tr=(Ze<<1)+Ft%2,hr=(bt<<1)+(Ft>>1),ir={aabb:E?ke.aabb.quadrant(Ft):s.bu(this,F,ke.zoom+1,tr,hr,ke.wrap,ke.minZ,ke.maxZ,this.projection),zoom:ke.zoom+1,x:tr,y:hr,wrap:ke.wrap,fullyVisible:Pt,tileID:void 0,shouldSplit:void 0,minZ:ke.minZ,maxZ:ke.maxZ};C&&!V&&(ir.tileID=new s.am(ke.zoom+1===Fe?it:ke.zoom+1,ke.wrap,ke.zoom+1,tr,hr),Ve(ir)),Re.push(ir)}else{const Ft=ke.zoom===Fe?it:ke.zoom;if(l.minzoom&&l.minzoom>Ft)continue;if(!Pt){let sr=he?ke.aabb.intersectsPrecise(te):ke.aabb.intersectsPreciseFlat(te);if(sr===0&&At()){const Lr=new s.bs(ke.zoom,Ze,bt);sr=s.bt(this,F,Lr,!0).intersectsPrecise(te)}if(sr===0)continue}const tr=j[0]-(.5+Ze+(ke.wrap<<ke.zoom))*(1<<h-ke.zoom),hr=j[1]-.5-bt,ir=ke.tileID?ke.tileID:new s.am(Ft,ke.wrap,ke.zoom,Ze,bt);Xe.push({tileID:ir,distanceSq:tr*tr+hr*hr})}}if(this.fogCullDistSq){const ke=this.fogCullDistSq,Ze=this.horizonLineFromTop();Xe=Xe.filter(bt=>{const Pt=[0,0,0,1],At=[s.V,s.V,0,1],Ft=this.calculateFogTileMatrix(bt.tileID.toUnwrapped());s.a7.transformMat4(Pt,Pt,Ft),s.a7.transformMat4(At,At,Ft);const tr=s.a7.min([],Pt,At),hr=s.a7.max([],Pt,At),ir=s.bv(tr,hr);if(ir===0)return!0;let sr=!1;const Lr=this._elevation;if(Lr&&ir>ke&&Ze!==0){const Cr=this.calculateProjMatrix(bt.tileID.toUnwrapped());let Pr;l.isTerrainDEM||(Pr=Lr.getMinMaxForTile(bt.tileID)),Pr||(Pr={min:ce,max:ve});const Dr=s.bH(this.rotation),un=[Dr[0]*s.V,Dr[1]*s.V,Pr.max];s.N.transformMat4(un,un,Cr),sr=(1-un[1])*this.height*.5<Ze}return ir<ke||sr})}return Xe.sort((ke,Ze)=>ke.distanceSq-Ze.distanceSq).map(ke=>ke.tileID)}resize(l,h){this.width=l,this.height=h,this.pixelsToGLUnits=[2/l,-2/h],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(l){return Math.pow(2,l)}scaleZoom(l){return Math.log(l)/Math.LN2}project(l){const h=s.aa(l.lat,-s.bw,s.bw),_=this.projection.project(l.lng,h);return new s.P(_.x*this.worldSize,_.y*this.worldSize)}unproject(l){return this.projection.unproject(l.x/this.worldSize,l.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/s.bl(1,this.center.lat)/this.worldSize}setLocationAtPoint(l,h){let _,B;const C=this.centerPoint;if(this.projection.name==="globe"){const M=this.worldSize;_=(h.x-C.x)/M,B=(h.y-C.y)/M}else{const M=this.pointCoordinate(h),k=this.pointCoordinate(C);_=M.x-k.x,B=M.y-k.y}const E=this.locationCoordinate(l);this.setLocation(new s.L(E.x-_,E.y-B))}setLocation(l){this.center=this.coordinateLocation(l),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(l){return this.projection.locationPoint(this,l)}locationPoint3D(l){return this.projection.locationPoint(this,l,!0)}pointLocation(l){return this.coordinateLocation(this.pointCoordinate(l))}pointLocation3D(l){return this.coordinateLocation(this.pointCoordinate3D(l))}locationCoordinate(l,h){const _=h?s.bl(h,l.lat):void 0,B=this.projection.project(l.lng,l.lat);return new s.L(B.x,B.y,_)}coordinateLocation(l){return this.projection.unproject(l.x,l.y)}pointRayIntersection(l,h){const _=h??this._centerAltitude,B=[l.x,l.y,0,1],C=[l.x,l.y,1,1];s.a7.transformMat4(B,B,this.pixelMatrixInverse),s.a7.transformMat4(C,C,this.pixelMatrixInverse);const E=C[3];s.a7.scale(B,B,1/B[3]),s.a7.scale(C,C,1/E);const M=B[2],k=C[2];return{p0:B,p1:C,t:M===k?0:(_-M)/(k-M)}}screenPointToMercatorRay(l){const h=[l.x,l.y,0,1],_=[l.x,l.y,1,1];return s.a7.transformMat4(h,h,this.pixelMatrixInverse),s.a7.transformMat4(_,_,this.pixelMatrixInverse),s.a7.scale(h,h,1/h[3]),s.a7.scale(_,_,1/_[3]),h[2]=s.bl(h[2],this._center.lat)*this.worldSize,_[2]=s.bl(_[2],this._center.lat)*this.worldSize,s.a7.scale(h,h,1/this.worldSize),s.a7.scale(_,_,1/this.worldSize),new s.a2([h[0],h[1],h[2]],s.N.normalize([],s.N.sub([],_,h)))}rayIntersectionCoordinate(l){const{p0:h,p1:_,t:B}=l,C=s.bl(h[2],this._center.lat),E=s.bl(_[2],this._center.lat);return new s.L(s.U(h[0],_[0],B)/this.worldSize,s.U(h[1],_[1],B)/this.worldSize,s.U(C,E,B))}pointCoordinate(l,h=this._centerAltitude){return this.projection.pointCoordinate(this,l.x,l.y,h)}pointCoordinate3D(l){if(!this.elevation)return this.pointCoordinate(l);let h=this.projection.pointCoordinate3D(this,l.x,l.y);if(h)return new s.L(h[0],h[1],h[2]);let _=0,B=this.horizonLineFromTop();if(l.y>B)return this.pointCoordinate(l);const C=.02*B,E=l.clone();for(let M=0;M<10&&B-_>C;M++){E.y=s.U(_,B,.66);const k=this.projection.pointCoordinate3D(this,E.x,E.y);k?(B=E.y,h=k):_=E.y}return h?new s.L(h[0],h[1],h[2]):this.pointCoordinate(l)}isPointAboveHorizon(l){return this.projection.isPointAboveHorizon(this,l)}isPointOnSurface(l){if(l.y<0||l.y>this.height||l.x<0||l.x>this.width)return!1;if(this.elevation||this.zoom>=s.bx)return!this.isPointAboveHorizon(l);const h=this.pointCoordinate(l);return h.y>=0&&h.y<=1}_coordinatePoint(l,h){const _=h&&this.elevation?this.elevation.getAtPointOrZero(l,this._centerAltitude):this._centerAltitude,B=[l.x*this.worldSize,l.y*this.worldSize,_+l.toAltitude(),1];return s.a7.transformMat4(B,B,this.pixelMatrix),B[3]>0?new s.P(B[0]/B[3],B[1]/B[3]):new s.P(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:l,left:h}=this._edgeInsets,_=this.height-this._edgeInsets.bottom,B=this.width-this._edgeInsets.right,C=this.pointLocation3D(new s.P(h,l)),E=this.pointLocation3D(new s.P(B,l)),M=this.pointLocation3D(new s.P(B,_)),k=this.pointLocation3D(new s.P(h,_));let F=Math.min(C.lng,E.lng,M.lng,k.lng),j=Math.max(C.lng,E.lng,M.lng,k.lng),V=Math.min(C.lat,E.lat,M.lat,k.lat),Y=Math.max(C.lat,E.lat,M.lat,k.lat);const te=Math.pow(2,-this.zoom)/16*270,le=this.projection.name==="globe"?1:4,ae=(ue,ne,he,ye,de)=>{const ve=(ue+he)/2,ce=(ne+ye)/2,xe=new s.P(ve,ce),{lng:Ee,lat:Pe}=this.pointLocation3D(xe),Re=Math.max(0,F-Ee,V-Pe,Ee-j,Pe-Y);F=Math.min(F,Ee),j=Math.max(j,Ee),V=Math.min(V,Pe),Y=Math.max(Y,Pe),(de<le||Re>te)&&(ae(ue,ne,ve,ce,de+1),ae(ve,ce,he,ye,de+1))};if(ae(h,l,B,l,1),ae(B,l,B,_,1),ae(B,_,h,_,1),ae(h,_,h,l,1),this.projection.name==="globe"){const[ue,ne]=s.by(this);ue?(Y=90,j=180,F=-180):ne&&(V=-90,j=180,F=-180)}return new s.ad(new s.bn(F,V),new s.bn(j,Y))}_getBoundsRectangular(l,h){const{top:_,left:B}=this._edgeInsets,C=this.height-this._edgeInsets.bottom,E=this.width-this._edgeInsets.right,M=new s.P(B,_),k=new s.P(E,_),F=new s.P(E,C),j=new s.P(B,C);let V=this.pointCoordinate(M,l),Y=this.pointCoordinate(k,l);const te=this.pointCoordinate(F,h),le=this.pointCoordinate(j,h),ae=(ue,ne)=>(ne.y-ue.y)/(ne.x-ue.x);return V.y>1&&Y.y>=0?V=new s.L((1-le.y)/ae(le,V)+le.x,1):V.y<0&&Y.y<=1&&(V=new s.L(-le.y/ae(le,V)+le.x,0)),Y.y>1&&V.y>=0?Y=new s.L((1-te.y)/ae(te,Y)+te.x,1):Y.y<0&&V.y<=1&&(Y=new s.L(-te.y/ae(te,Y)+te.x,0)),new s.ad().extend(this.coordinateLocation(V)).extend(this.coordinateLocation(Y)).extend(this.coordinateLocation(le)).extend(this.coordinateLocation(te))}_getBoundsRectangularTerrain(){const l=this.elevation;if(!l.visibleDemTiles.length||l.isUsingMockSource())return this._getBoundsRectangular(0,0);const h=l.visibleDemTiles.reduce((_,B)=>{if(B.dem){const C=B.dem.tree;_.min=Math.min(_.min,C.minimums[0]),_.max=Math.max(_.max,C.maximums[0])}return _},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(h.min*l.exaggeration(),h.max*l.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(l=!0){const h=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))-this.centerOffset.y,_=this.height/2-h*(1-this._horizonShift);return l?Math.max(0,_):_}getMaxBounds(){return this.maxBounds}setMaxBounds(l){this.maxBounds=l,this.minLat=-s.bw,this.maxLat=s.bw,this.minLng=-180,this.maxLng=180,l&&(this.minLat=l.getSouth(),this.maxLat=l.getNorth(),this.minLng=l.getWest(),this.maxLng=l.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=s.a5(this.minLng)*this.tileSize,this.worldMaxX=s.a5(this.maxLng)*this.tileSize,this.worldMinY=s.ae(this.maxLat)*this.tileSize,this.worldMaxY=s.ae(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(l,h){return this.projection.createTileMatrix(this,h,l)}calculateDistanceTileData(l){const h=l.key,_=this._distanceTileDataCache;if(_[h])return _[h];const B=l.canonical,C=1/this.height,E=this.cameraWorldSize,M=E/this.zoomScale(B.z),k=(B.x+Math.pow(2,B.z)*l.wrap)*M,F=B.y*M,j=this.point;j.x*=E/this.worldSize,j.y*=E/this.worldSize;const V=this.angle,Y=Math.sin(-V),te=-Math.cos(-V);return _[h]={bearing:[Y,te],center:[(j.x-k)*C,(j.y-F)*C],scale:M/s.V*C},_[h]}calculateFogTileMatrix(l){const h=l.key,_=this._fogTileMatrixCache;if(_[h])return _[h];const B=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,l);return s.a6.multiply(B,this.worldToFogMatrix,B),_[h]=new Float32Array(B),_[h]}calculateProjMatrix(l,h=!1,_=!1){const B=l.key;let C;if(C=_?this._expandedProjMatrixCache:h?this._alignedProjMatrixCache:this._projMatrixCache,C[B])return C[B];const E=this.calculatePosMatrix(l,this.worldSize);let M;return M=this.projection.isReprojectedInTileSpace?this.mercatorMatrix:_?this.expandedFarZProjMatrix:h?this.alignedProjMatrix:this.projMatrix,s.a6.multiply(E,M,E),C[B]=new Float32Array(E),C[B]}calculatePixelsToTileUnitsMatrix(l){const h=l.tileID.key,_=this._pixelsToTileUnitsCache;if(_[h])return _[h];const B=s.bz(l,this);return _[h]=B,_[h]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const l=1/this.worldSize,h=s.a6.fromScaling([],[l,l,l]);return s.a6.multiply(h,h,this.globeMatrix),h}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const l=this._elevation;this._updateCameraState();const h=s.bl(1,this._center.lat)*this.worldSize,_=this._computeCameraPosition(h),B=this._camera.forward(),C=s.bl(1,this._center.lat);_[2]/=C,B[2]/=C,s.N.normalize(B,B);const E=l.raycast(_,B,l.exaggeration());if(E){const M=s.N.scaleAndAdd([],_,B,E),k=new s.L(M[0],M[1],s.bl(M[2],s.au(M[1]))),F=(k.z+s.N.length([k.x-_[0],k.y-_[1],k.z-_[2]*C]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(F),this._centerAltitude=k.toAltitude(),this._center=this.coordinateLocation(k),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(l=!1){if(!this._elevation)return;const h=this._elevation,_=s.bl(1,this._center.lat)*this.worldSize,B=this._computeCameraPosition(_),C=h.getAtPointOrZero(new s.L(...B)),E=this.pixelsPerMeter/this.worldSize*C,M=this._minimumHeightOverTerrain(),k=B[2]-E;if(k<=M)if(k<0||l){const F=this.locationCoordinate(this._center,this._centerAltitude),j=[B[0],B[1],F.z-B[2]],V=s.N.length(j);j[2]-=(M-k)/this._pixelsPerMercatorPixel;const Y=s.N.length(j);if(Y===0)return;s.N.scale(j,j,V/Y*this._pixelsPerMercatorPixel),this._camera.position=[B[0],B[1],F.z*this._pixelsPerMercatorPixel-j[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const l=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||l){const Y=this.center;return Y.lat=s.aa(Y.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!l)&&(Y.lng=s.aa(Y.lng,this.minLng,this.maxLng)),this.center=Y,void(this._constraining=!1)}const h=this._unmodified,{x:_,y:B}=this.point;let C=0,E=_,M=B;const k=this.width/2,F=this.height/2,j=this.worldMinY*this.scale,V=this.worldMaxY*this.scale;if(B-F<j&&(M=j+F),B+F>V&&(M=V-F),V-j<this.height&&(C=Math.max(C,this.height/(V-j)),M=(V+j)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const Y=this.worldMinX*this.scale,te=this.worldMaxX*this.scale,le=this.worldSize/2-(Y+te)/2;E=(_+le+this.worldSize)%this.worldSize-le,E-k<Y&&(E=Y+k),E+k>te&&(E=te-k),te-Y<this.width&&(C=Math.max(C,this.width/(te-Y)),E=(te+Y)/2)}E===_&&M===B||(this.center=this.unproject(new s.P(E,M))),C&&(this.zoom+=this.scaleZoom(C)),this._constrainCamera(),this._unmodified=h,this._constraining=!1}_minZoomForBounds(){let l=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(l=Math.max(l,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),l}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const l=this.centerOffset,h=this.projection.name==="globe",_=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=s.bl(1,this.center.lat)/s.bl(1,s.bI));const B=s.bA(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,B),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const C=this.projection.zAxisUnit==="meters"?_:1,E=this._camera.getWorldToCamera(this.worldSize,C);let M;const k=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);if(k[8]=2*-l.x/this.width,k[9]=2*l.y/this.height,this.isOrthographic){let Pe=.5*this.height/Math.tan(this._fov/2)*1*Math.tan(.5*this._fov),Re=Pe*this.aspect,Xe=-Re,Fe=-Pe;Re-=l.x,Xe-=l.x,Pe+=l.y,Fe+=l.y,M=this._camera.getCameraToClipOrthographic(Xe,Re,Fe,Pe,this._nearZ,this._farZ),((it,rt,Bt,Ve)=>{for(let et=0;et<16;et++)it[et]=Bl(rt[et],Bt[et],Ve)})(M,M,k,Uu(this.pitch>=15?1:this.pitch/15))}else M=k;const F=s.a6.mul([],k,E);let j=s.a6.mul([],M,E);if(this.projection.isReprojectedInTileSpace){const Pe=this.locationCoordinate(this.center),Re=s.a6.identity([]);s.a6.translate(Re,Re,[Pe.x*this.worldSize,Pe.y*this.worldSize,0]),s.a6.multiply(Re,Re,s.bB(this)),s.a6.translate(Re,Re,[-Pe.x*this.worldSize,-Pe.y*this.worldSize,0]),s.a6.multiply(j,j,Re),s.a6.multiply(F,F,Re),this.inverseAdjustmentMatrix=s.bC(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];if(this.mercatorMatrix=s.a6.scale([],j,[this.worldSize,this.worldSize,this.worldSize/C,1]),this.projMatrix=j,this.invProjMatrix=s.a6.invert(new Float64Array(16),this.projMatrix),h){const Pe=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,1/0);Pe[8]=2*-l.x/this.width,Pe[9]=2*l.y/this.height,this.expandedFarZProjMatrix=s.a6.mul([],Pe,E)}else this.expandedFarZProjMatrix=this.projMatrix;const V=s.a6.invert([],M);this.frustumCorners=s.bD.fromInvProjectionMatrix(V,this.horizonLineFromTop(),this.height),this.cameraFrustum=s.bq.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,0,!h);const Y=new Float32Array(16);s.a6.identity(Y),s.a6.scale(Y,Y,[1,-1,1]),s.a6.rotateX(Y,Y,this._pitch),s.a6.rotateZ(Y,Y,this.angle);const te=s.a6.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ);this.starsProjMatrix=s.a6.clone(te);const le=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;te[8]=2*-l.x/this.width,te[9]=2*(l.y+le)/this.height,this.skyboxMatrix=s.a6.multiply(Y,te,Y);const ae=this.point,ue=ae.x,ne=ae.y,he=this.width%2/2,ye=this.height%2/2,de=Math.cos(this.angle),ve=Math.sin(this.angle),ce=ue-Math.round(ue)+de*he+ve*ye,xe=ne-Math.round(ne)+de*ye+ve*he,Ee=new Float64Array(j);if(s.a6.translate(Ee,Ee,[ce>.5?ce-1:ce,xe>.5?xe-1:xe,0]),this.alignedProjMatrix=Ee,j=s.a6.create(),s.a6.scale(j,j,[this.width/2,-this.height/2,1]),s.a6.translate(j,j,[1,-1,0]),this.labelPlaneMatrix=j,j=s.a6.create(),s.a6.scale(j,j,[1,-1,1]),s.a6.translate(j,j,[-1,-1,0]),s.a6.scale(j,j,[2/this.width,2/this.height,1]),this.glCoordMatrix=j,this.pixelMatrix=s.a6.multiply(new Float64Array(16),this.labelPlaneMatrix,F),this._calcFogMatrices(),this._distanceTileDataCache={},j=s.a6.invert(new Float64Array(16),this.pixelMatrix),!j)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=j,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=s.bE(this);const Pe=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=s.N.transformMat4(Pe,Pe,E),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=j;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={},this._expandedProjMatrixCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const l=this.cameraWorldSizeForFog,h=this.cameraPixelsPerMeter,_=this._camera.position,B=1/this.height/this._pixelsPerMercatorPixel,C=[l,l,h];s.N.scale(C,C,B),s.N.scale(_,_,-1),s.N.multiply(_,_,C);const E=s.a6.create();s.a6.translate(E,E,_),s.a6.scale(E,E,C),this.mercatorFogMatrix=E,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(l,h,B)}_computeCameraPosition(l){const h=(l=l||this.pixelsPerMeter)/this.pixelsPerMeter,_=this._camera.forward(),B=this.point,C=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*h-l/this.worldSize*this._centerAltitude;return[B.x/this.worldSize-_[0]*C,B.y/this.worldSize-_[1]*C,l/this.worldSize*this._centerAltitude-_[2]*C]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(l){const h=this._maxCameraBoundsDistance()*Math.cos(this._pitch),_=this._camera.position[2],B=l[2];let C=1;this.projection.wrap&&(this.center=this.center.wrap()),B>0&&(C=Math.min((h-_)/B,1)),this._camera.position=s.N.scaleAndAdd([],this._camera.position,l,C),this._updateStateFromCamera()}_updateStateFromCamera(){const l=this._camera.position,h=this._camera.forward(),{pitch:_,bearing:B}=this._camera.getPitchBearing(),C=s.bl(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,E=this._mercatorZfromZoom(this._maxZoom)*Math.cos(s.bj(this._maxPitch)),M=Math.max((l[2]-C)/Math.cos(_),E),k=this._zoomFromMercatorZ(M);s.N.scaleAndAdd(l,l,h,M),this._pitch=s.aa(_,s.bj(this.minPitch),s.bj(this.maxPitch)),this.angle=s.bh(B,-Math.PI,Math.PI),this._setZoom(s.aa(k,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new s.L(l[0],l[1],l[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(l){return Math.pow(2,l)*this.tileSize}_mercatorZfromZoom(l){return this.cameraToCenterDistance/this._worldSizeFromZoom(l)}_minimumHeightOverTerrain(){const l=Math.min(this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom,this._maxZoom)+4;return this._mercatorZfromZoom(l)}_zoomFromMercatorZ(l){return this.scaleZoom(this.cameraToCenterDistance/(l*this.tileSize))}zoomFromMercatorZAdjusted(l){let h=0,_=s.bx,B=0,C=1/0;for(;_-h>1e-6&&_>h;){const E=h+.5*(_-h),M=this.tileSize*Math.pow(2,E),k=this.getCameraToCenterDistance(this.projection,E,M),F=this.scaleZoom(k/(l*this.tileSize)),j=Math.abs(E-F);j<C&&(C=j,B=E),E<F?h=E:_=E}return B}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(s.w("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(l,h){const _=Math.min(l.x,h.x),B=Math.max(l.x,h.x),C=Math.min(l.y,h.y),E=Math.max(l.y,h.y);if(C<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const M=[new s.P(_,C),new s.P(B,E),new s.P(_,E),new s.P(B,C)],k=this.renderWorldCopies?-3:0,F=this.renderWorldCopies?4:1;for(const j of M){const V=this.pointRayIntersection(j);if(V.t<0)return!0;const Y=this.rayIntersectionCoordinate(V);if(Y.x<k||Y.y<0||Y.x>F||Y.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+s.bF(this.fovAboveCenter)>88||this.anyCornerOffEdge(new s.P(0,0),new s.P(this.width,this.height))}zoomDeltaToMovement(l,h){const _=s.N.length(s.N.sub([],this._camera.position,l)),B=this._zoomFromMercatorZ(_)+h;return _-this._mercatorZfromZoom(B)}getCameraPoint(){if(this.projection.name==="globe"){const l=function([h,_,B],C){const E=[h,_,B,1];s.a7.transformMat4(E,E,C);const M=E[3]=Math.max(E[3],1e-6);return E[0]/=M,E[1]/=M,E[2]/=M,E}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new s.P(l[0],l[1])}{const l=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.P(0,l))}}getCameraToCenterDistance(l,h=this.zoom,_=this.worldSize){const B=s.bA(l,h,this.width,this.height,1024),C=l.pixelSpaceConversion(this.center.lat,_,B);let E=.5/Math.tan(.5*this._fov)*this.height*C;return this.isOrthographic&&(E=Bl(1,E,Uu(this.pitch>=15?1:this.pitch/15))),E}getWorldToCameraMatrix(){const l=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&s.a6.multiply(l,l,this.globeMatrix),l}getFrustum(l){return s.bq.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,l,this.projection.zAxisUnit==="meters")}}const Gi={BaseColor:5,MetallicRoughness:6,Normal:7,Occlusion:8,Emission:9,ShadowMap0:10},xl=(g,l)=>{if(l>0&&g.terrain&&s.w("Cutoff is currently disabled on terrain"),l<=0||g.terrain)return{shouldRenderCutoff:!1,uniformValues:{u_cutoff_params:[0,0,0,1]}};const h=g.transform,_=Math.max(Math.abs(h._zoom-(g.minCutoffZoom-1)),1),B=h.isLODDisabled(!1)?s.O(60,45,h.pitch):s.O(30,15,h.pitch),C=h._farZ-h._nearZ,E=l*h.height,M=((1-(k=B))*h.cameraToCenterDistance+k*(h._farZ+E))*_;var k;return{shouldRenderCutoff:B<1,uniformValues:{u_cutoff_params:[h._nearZ,h._farZ,(M-h._nearZ)/C,(M-E-h._nearZ)/C]}}},Mo={cascadeCount:2,shadowMapResolution:2048};class vd{constructor(l,h){this.aabb=l,this.lastCascade=h}}class Bd{add(l,h){const _=this.receivers[l.key];_!==void 0?(_.aabb.min[0]=Math.min(_.aabb.min[0],h.min[0]),_.aabb.min[1]=Math.min(_.aabb.min[1],h.min[1]),_.aabb.min[2]=Math.min(_.aabb.min[2],h.min[2]),_.aabb.max[0]=Math.max(_.aabb.max[0],h.max[0]),_.aabb.max[1]=Math.max(_.aabb.max[1],h.max[1]),_.aabb.max[2]=Math.max(_.aabb.max[2],h.max[2])):this.receivers[l.key]=new vd(h,null)}clear(){this.receivers={}}get(l){return this.receivers[l.key]}computeRequiredCascades(l,h,_){const B=s.bS.fromPoints(l.points);let C=0;for(const E in this.receivers){const M=this.receivers[E];if(!M||!B.intersectsAabb(M.aabb))continue;M.aabb.min=B.closestPoint(M.aabb.min),M.aabb.max=B.closestPoint(M.aabb.max);const k=M.aabb.getCorners();for(let F=0;F<_.length;F++){let j=!0;for(const V of k){const Y=[V[0]*h,V[1]*h,V[2]];if(s.N.transformMat4(Y,Y,_[F].matrix),Y[0]<-1||Y[0]>1||Y[1]<-1||Y[1]>1){j=!1;break}}if(M.lastCascade=F,C=Math.max(C,F),j)break}}return C+1}}class xd{constructor(l){this.painter=l,this._enabled=!1,this._shadowLayerCount=0,this._numCascadesToRender=0,this._cascades=[],this._groundShadowTiles=[],this._receivers=new Bd,this._depthMode=new dr(l.context.gl.LEQUAL,dr.ReadWrite,[0,1]),this._uniformValues={u_light_matrix_0:new Float32Array(16),u_light_matrix_1:new Float32Array(16),u_shadow_intensity:0,u_fade_range:[0,0],u_shadow_normal_offset:[1,1,1],u_shadow_texel_size:1,u_shadow_map_resolution:1,u_shadow_direction:[0,0,1],u_shadow_bias:[36e-5,.0012,.012],u_shadowmap_0:0,u_shadowmap_1:0},this.useNormalOffset=!1,l.tp.registerParameter(Mo,["Shadows"],"cascadeCount",{min:1,max:2,step:1}),l.tp.registerParameter(Mo,["Shadows"],"shadowMapResolution",{min:32,max:2048,step:32})}destroy(){for(const l of this._cascades)l.texture.destroy(),l.framebuffer.destroy();this._cascades=[]}updateShadowParameters(l,h){const _=this.painter;if(this._enabled=!1,this._shadowLayerCount=0,this._receivers.clear(),!h||!h.properties)return;const B=h.properties.get("shadow-intensity");if(!h.shadowsEnabled()||B<=0||(this._shadowLayerCount=_.style.order.reduce((le,ae)=>{const ue=_.style._mergedLayers[ae];return le+(ue.hasShadowPass()&&!ue.isHidden(l.zoom)?1:0)},0),this._enabled=this._shadowLayerCount>0,!this._enabled))return;const C=_.context,E=Mo.shadowMapResolution,M=Mo.shadowMapResolution;if(this._cascades.length===0||Mo.shadowMapResolution!==this._cascades[0].texture.size[0]){this._cascades=[];for(let le=0;le<Mo.cascadeCount;++le){const ae=_._shadowMapDebug,ue=C.gl,ne=C.createFramebuffer(E,M,ae,"texture"),he=new s.T(C,{width:E,height:M,data:null},ue.DEPTH_COMPONENT);if(ne.depthAttachment.set(he.texture),ae){const ye=new s.T(C,{width:E,height:M,data:null},ue.RGBA);ne.colorAttachment.set(ye.texture)}this._cascades.push({framebuffer:ne,texture:he,matrix:[],far:0,boundingSphereRadius:0,frustum:new s.bq,scale:0})}}this.shadowDirection=Yl(h);let k=0;if(l.elevation){const le=l.elevation,ae=[1e4,-1e4];le.visibleDemTiles.filter(ue=>ue.dem).forEach(ue=>{const ne=ue.dem.tree;ae[0]=Math.min(ae[0],ne.minimums[0]),ae[1]=Math.max(ae[1],ne.maximums[0])}),ae[0]!==1e4&&(k=(ae[1]-ae[0])*le.exaggeration())}const F=1.5*l.cameraToCenterDistance,j=3*F,V=new Float64Array(16);for(let le=0;le<this._cascades.length;++le){const ae=this._cascades[le];let ue=l.height/50,ne=1;Mo.cascadeCount===1?ne=j:le===0?ne=F:(ue=F,ne=j);const[he,ye]=Fc(l,this.shadowDirection,ue,ne,Mo.shadowMapResolution,k);ae.scale=l.scale,ae.matrix=he,ae.boundingSphereRadius=ye,s.a6.invert(V,ae.matrix),ae.frustum=s.bq.fromInvProjectionMatrix(V,1,0,!0),ae.far=ne}const Y=this._cascades.length-1;this._uniformValues.u_fade_range=[.75*this._cascades[Y].far,this._cascades[Y].far],this._uniformValues.u_shadow_intensity=B,this._uniformValues.u_shadow_direction=[this.shadowDirection[0],this.shadowDirection[1],this.shadowDirection[2]],this._uniformValues.u_shadow_texel_size=1/Mo.shadowMapResolution,this._uniformValues.u_shadow_map_resolution=Mo.shadowMapResolution,this._uniformValues.u_shadowmap_0=Gi.ShadowMap0,this._uniformValues.u_shadowmap_1=Gi.ShadowMap0+1,this._groundShadowTiles=_.transform.coveringTiles({tileSize:512,renderWorldCopies:!0});const te=_.transform.elevation;for(const le of this._groundShadowTiles){let ae={min:0,max:0};if(te){const ue=te.getMinMaxForTile(le);ue&&(ae=ue)}this.addShadowReceiver(le.toUnwrapped(),ae.min,ae.max)}}get enabled(){return this._enabled}set enabled(l){this._enabled=l}drawShadowPass(l,h){if(!this._enabled)return;const _=this.painter,B=_.context;this._numCascadesToRender=this._receivers.computeRequiredCascades(_.transform.getFrustum(0),_.transform.worldSize,this._cascades),B.viewport.set([0,0,Mo.shadowMapResolution,Mo.shadowMapResolution]);for(let C=0;C<this._numCascadesToRender;++C){_.currentShadowCascade=C,B.bindFramebuffer.set(this._cascades[C].framebuffer.framebuffer),B.clear({color:s.ax.white,depth:1});for(const E of l.order){const M=l._mergedLayers[E];if(!M.hasShadowPass()||M.isHidden(_.transform.zoom))continue;const k=l.getLayerSourceCache(M),F=k?h[k.id]:void 0;(M.type==="model"||F&&F.length)&&_.renderLayer(_,k,M,F)}}_.currentShadowCascade=0}drawGroundShadows(){if(!this._enabled)return;const l=this.painter,h=l.style,_=l.context,B=h.directionalLight,C=h.ambientLight;if(!B||!C)return;const E=[],M=xl(l,l.longestCutoffRange);M.shouldRenderCutoff&&E.push("RENDER_CUTOFF");const k=Nc(B,C),F=new dr(_.gl.LEQUAL,dr.ReadOnly,l.depthRangeFor3D);for(const j of this._groundShadowTiles){const V=j.toUnwrapped(),Y=l.isTileAffectedByFog(j),te=l.getOrCreateProgram("groundShadow",{defines:E,overrideFog:Y});this.setupShadows(V,te),l.uploadCommonUniforms(_,te,V,null,M);const le={u_matrix:l.transform.calculateProjMatrix(V),u_ground_shadow_factor:k};te.draw(l,_.gl.TRIANGLES,F,yr.disabled,Nr.multiply,cr.disabled,le,"ground_shadow",l.tileExtentBuffer,l.quadTriangleIndexBuffer,l.tileExtentSegments,{},l.transform.zoom,null,null)}}getShadowPassColorMode(){return this.painter._shadowMapDebug?Nr.unblended:Nr.disabled}getShadowPassDepthMode(){return this._depthMode}getShadowCastingLayerCount(){return this._shadowLayerCount}calculateShadowPassMatrixFromTile(l){const h=this.painter.transform,_=h.calculatePosMatrix(l,h.worldSize);return s.a6.multiply(_,this._cascades[this.painter.currentShadowCascade].matrix,_),Float32Array.from(_)}calculateShadowPassMatrixFromMatrix(l){return s.a6.multiply(l,this._cascades[this.painter.currentShadowCascade].matrix,l),Float32Array.from(l)}setupShadows(l,h,_,B=0){if(!this._enabled)return;const C=this.painter.transform,E=this.painter.context,M=E.gl,k=this._uniformValues,F=new Float64Array(16),j=C.calculatePosMatrix(l,C.worldSize);for(let V=0;V<this._cascades.length;V++)s.a6.multiply(F,this._cascades[V].matrix,j),k[V===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(F),E.activeTexture.set(M.TEXTURE0+Gi.ShadowMap0+V),this._cascades[V].texture.bind(M.NEAREST,M.CLAMP_TO_EDGE);if(this.useNormalOffset=!!_,this.useNormalOffset){const V=s.bR(l.canonical),Y=2/C.tileSize*s.V/Mo.shadowMapResolution,te=Y*this._cascades[0].boundingSphereRadius,le=Y*this._cascades[this._cascades.length-1].boundingSphereRadius,ae=(_==="vector-tile"?1:3)/Math.pow(2,B-l.canonical.z-(1-C.zoom+Math.floor(C.zoom)));k.u_shadow_normal_offset=[V,te*ae,le*ae],k.u_shadow_bias=[6e-5,.0012,.012]}else k.u_shadow_bias=[36e-5,.0012,.012];h.setShadowUniformValues(E,k)}setupShadowsFromMatrix(l,h,_=!1){if(!this._enabled)return;const B=this.painter.context,C=B.gl,E=this._uniformValues,M=new Float64Array(16);for(let k=0;k<Mo.cascadeCount;k++)s.a6.multiply(M,this._cascades[k].matrix,l),E[k===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(M),B.activeTexture.set(C.TEXTURE0+Gi.ShadowMap0+k),this._cascades[k].texture.bind(C.NEAREST,C.CLAMP_TO_EDGE);this.useNormalOffset=_,_?(E.u_shadow_normal_offset=[1,5,5],E.u_shadow_bias=[6e-5,.0012,.012]):E.u_shadow_bias=[36e-5,.0012,.012],h.setShadowUniformValues(B,E)}getShadowUniformValues(){return this._uniformValues}getCurrentCascadeFrustum(){return this._cascades[this.painter.currentShadowCascade].frustum}computeSimplifiedTileShadowVolume(l,h,_,B){if(B[2]>=0)return{};const C=function(k,F,j){const V=j/(1<<k.canonical.z);return new s.bS([k.canonical.x*V+k.wrap*j,k.canonical.y*V+k.wrap*j,0],[(k.canonical.x+1)*V+k.wrap*j,(k.canonical.y+1)*V+k.wrap*j,F])}(l,h,_).getCorners(),E=h/-B[2];B[0]<0?(s.N.add(C[0],C[0],[B[0]*E,0,0]),s.N.add(C[3],C[3],[B[0]*E,0,0])):B[0]>0&&(s.N.add(C[1],C[1],[B[0]*E,0,0]),s.N.add(C[2],C[2],[B[0]*E,0,0])),B[1]<0?(s.N.add(C[0],C[0],[0,B[1]*E,0]),s.N.add(C[1],C[1],[0,B[1]*E,0])):B[1]>0&&(s.N.add(C[2],C[2],[0,B[1]*E,0]),s.N.add(C[3],C[3],[0,B[1]*E,0]));const M={};return M.vertices=C,M.planes=[Io(C[1],C[0],C[4]),Io(C[2],C[1],C[5]),Io(C[3],C[2],C[6]),Io(C[0],C[3],C[7])],M}addShadowReceiver(l,h,_){this._receivers.add(l,s.bS.fromTileIdAndHeight(l,h,_))}getMaxCascadeForTile(l){const h=this._receivers.get(l);return h&&h.lastCascade?h.lastCascade:0}}function Io(g,l,h){const _=s.N.sub([],h,l),B=s.N.sub([],g,l),C=s.N.cross([],_,B),E=s.N.length(C);return E===0?[0,0,1,0]:(s.N.scale(C,C,1/E),[C[0],C[1],C[2],-s.N.dot(C,l)])}function Yl(g){const l=g.properties.get("direction"),h=s.bQ(l.x,l.y,l.z);h[2]=s.aa(h[2],0,75);const _=s.bT([h[0],h[1],h[2]]);return s.N.fromValues(_.x,_.y,_.z)}function Nc(g,l){const h=g.properties.get("color"),_=g.properties.get("intensity"),B=g.properties.get("direction"),C=[B.x,B.y,B.z],E=l.properties.get("color"),M=l.properties.get("intensity"),k=Math.max(s.N.dot([0,0,1],C),0),F=[0,0,0];s.N.scale(F,E.toArray01Linear().slice(0,3),M);const j=[0,0,0];return s.N.scale(j,h.toArray01Linear().slice(0,3),k*_),s.bU([F[0]>0?F[0]/(F[0]+j[0]):0,F[1]>0?F[1]/(F[1]+j[1]):0,F[2]>0?F[2]/(F[2]+j[2]):0])}function Fc(g,l,h,_,B,C){const E=g.zoom,M=g.scale,k=g.worldSize,F=1/k,j=g.aspect,V=Math.sqrt(1+j*j)*Math.tan(.5*g.fovX),Y=V*V,te=_-h,le=_+h;let ae,ue;Y>te/le?(ae=_,ue=_*V):(ae=.5*le*(1+Y),ue=.5*Math.sqrt(te*te+2*(_*_+h*h)*Y+le*le*Y*Y));const ne=g.projection.pixelsPerMeter(g.center.lat,k),he=g._camera.getCameraToWorldMercator(),ye=[0,0,-ae*F];s.N.transformMat4(ye,ye,he);let de=ue*F;const ve=g._edgeInsets;if(!(ve.left===0&&ve.top===0&&ve.right===0&&ve.bottom===0||ve.left===ve.right&&ve.top===ve.bottom)){const Pt=g._camera.getWorldToCamera(g.worldSize,g.projection.zAxisUnit==="meters"?ne:1),At=g._camera.getCameraToClipPerspective(g._fov,g.width/g.height,h,_);At[8]=2*-g.centerOffset.x/g.width,At[9]=2*g.centerOffset.y/g.height;const Ft=new Float64Array(16);s.a6.mul(Ft,At,Pt);const tr=new Float64Array(16);s.a6.invert(tr,Ft);const hr=s.bq.fromInvProjectionMatrix(tr,k,E,!0);for(const ir of hr.points){const sr=((ce=ir)[0]/=M,ce[1]/=M,ce[2]=s.bl(ce[2],g._center.lat),ce);de=Math.max(de,s.N.len(s.N.subtract([],ye,sr)))}}var ce;de*=B/(B-1);const xe=Math.acos(l[2]),Ee=Math.atan2(-l[0],-l[1]),Pe=new zs;Pe.position=ye,Pe.setPitchBearing(xe,Ee);const Re=Pe.getWorldToCamera(k,ne),Xe=de*k,Fe=Math.min(g._mercatorZfromZoom(17)*k*-2,-2*Xe),it=Pe.getCameraToClipOrthographic(-Xe,Xe,-Xe,Xe,Fe,(Xe+C*ne)/l[2]),rt=new Float64Array(16);s.a6.multiply(rt,it,Re);const Bt=s.N.fromValues(Math.floor(1e6*ye[0])/1e6*k,Math.floor(1e6*ye[1])/1e6*k,0),Ve=.5*B,et=[0,0,0];s.N.transformMat4(et,Bt,rt),s.N.scale(et,et,Ve);const ke=[Math.floor(et[0]),Math.floor(et[1]),Math.floor(et[2])],Ze=[0,0,0];s.N.sub(Ze,et,ke),s.N.scale(Ze,Ze,-1/Ve);const bt=new Float64Array(16);return s.a6.identity(bt),s.a6.translate(bt,bt,Ze),s.a6.multiply(rt,bt,rt),[rt,Xe]}const bl=(g,l)=>Qt(g,l&&l.filter(h=>h.identifier!=="source.canvas")),bd=s.ac(rn,["addLayer","removeLayer","setLights","setPaintProperty","setLayoutProperty","setSlot","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection","setCamera","addImport","removeImport","updateImport"]),Vu=s.ac(rn,["setCenter","setZoom","setBearing","setPitch"]),Jl={version:8,layers:[],sources:{}},am={duration:300,delay:0},Gu=new Set(["fill","line","background","hillshade","raster"]);class Pa extends s.E{constructor(l,h={}){super(),this.map=l,this.scope=h.scope||"",this.fragments=[],this.importDepth=h.importDepth||0,this.importsCache=h.importsCache||new Map,this.resolvedImports=h.resolvedImports||new Set,this.transition=s.e({},am),this._buildingIndex=new rm(this),this.crossTileSymbolIndex=new Gh,this._mergedOrder=[],this._drapedFirstOrder=[],this._mergedLayers={},this._mergedSourceCaches={},this._mergedOtherSourceCaches={},this._mergedSymbolSourceCaches={},this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this._changes=h.styleChanges||new qe,this.dispatcher=h.dispatcher?h.dispatcher:new s.bW(s.bX(),this),h.imageManager?this.imageManager=h.imageManager:(this.imageManager=new ht,this.imageManager.setEventedParent(this)),this.imageManager.createScope(this.scope),this.glyphManager=h.glyphManager?h.glyphManager:new s.bY(l._requestManager,h.localFontFamily?s.bZ.all:h.localIdeographFontFamily?s.bZ.ideographs:s.bZ.none,h.localFontFamily||h.localIdeographFontFamily),h.modelManager?this.modelManager=h.modelManager:(this.modelManager=new je(l._requestManager),this.modelManager.setEventedParent(this)),this._layers={},this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._precompileDone=!1,this._shouldPrecompile=!1,this._availableImages=[],this._order=[],this._markersNeedUpdate=!1,this.options=h.configOptions?h.configOptions:new Map,this._configDependentLayers=h.configDependentLayers?h.configDependentLayers:new Set,this._config=h.config,this.dispatcher.broadcast("setReferrer",s.b_());const _=this;this._rtlTextPluginCallback=Pa.registerForPluginStateChange(B=>{_.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:B.pluginStatus,pluginURL:B.pluginURL},(C,E)=>{if(s.b$(C),E&&E.every(M=>M))for(const M in _._sourceCaches){const k=_._sourceCaches[M],F=k.getSource().type;F!=="vector"&&F!=="geojson"||k.reload()}})}),this.on("data",B=>{if(B.dataType!=="source"||B.sourceDataType!=="metadata")return;const C=this.getOwnSource(B.sourceId);if(C&&C.vectorLayerIds)for(const E in this._layers){const M=this._layers[E];M.source===C.id&&this._validateLayer(M)}})}loadURL(l,h={}){this.fire(new s.b("dataloading",{dataType:"style"}));const _=typeof h.validate=="boolean"?h.validate:!s.c0(l);l=this.map._requestManager.normalizeStyleURL(l,h.accessToken),this.resolvedImports.add(l);const B=this.importsCache.get(l);if(B)return this._load(B,_);const C=this.map._requestManager.transformRequest(l,s.R.Style);this._request=s.g(C,(E,M)=>{if(this._request=null,E)this.fire(new s.a(E));else if(M)return this.importsCache.set(l,M),this._load(M,_)})}loadJSON(l,h={}){this.fire(new s.b("dataloading",{dataType:"style"})),this._request=s.f.frame(()=>{this._request=null,this._load(l,h.validate!==!1)})}loadEmpty(){this.fire(new s.b("dataloading",{dataType:"style"})),this._load(Jl,!1)}_loadImports(l,h,_){if(this.importDepth>=4)return s.w("Style doesn't support nesting deeper than 5"),Promise.resolve();const B=[];for(const C of l){const E=this._createFragmentStyle(C),M=new Promise(j=>{E.once("style.import.load",j),E.once("error",j)}).then(()=>this.mergeAll());if(B.push(M),this.resolvedImports.has(C.url)){E.loadEmpty();continue}const k=C.data||this.importsCache.get(C.url);k?E.loadJSON(k,{validate:h}):C.url?E.loadURL(C.url,{validate:h}):E.loadEmpty();const F={style:E,id:C.id,config:C.config};if(_){const j=this.fragments.findIndex(({id:V})=>V===_);this.fragments=this.fragments.slice(0,j).concat(F).concat(this.fragments.slice(j))}else this.fragments.push(F)}return Promise.allSettled(B)}_createFragmentStyle(l){const h=this.scope?s.ag(l.id,this.scope):l.id,_=new Pa(this.map,{scope:h,styleChanges:this._changes,importDepth:this.importDepth+1,importsCache:this.importsCache,resolvedImports:new Set(this.resolvedImports),dispatcher:this.dispatcher,imageManager:this.imageManager,glyphManager:this.glyphManager,modelManager:this.modelManager,config:l.config,configOptions:this.options,configDependentLayers:this._configDependentLayers});return _.setEventedParent(this.map,{style:_}),_}_reloadImports(){this.mergeAll(),this._updateMapProjection(),this.updateConfigDependencies(),this.map._triggerCameraUpdate(this.camera),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options});const l=this.isRootStyle();this._shouldPrecompile=l,this.fire(new s.b(l?"style.load":"style.import.load"))}_load(l,h){const _=l.schema;if(this.isRootStyle()&&(l.fragment||_&&l.fragment!==!1)){const E=s.e({},Jl,{imports:[{id:"basemap",data:l,url:""}]});return void this._load(E,h)}if(this.setConfig(this._config,_),h&&bl(this,Do(l)))return;this._loaded=!0,this.stylesheet=s.c1(l);for(const E in l.sources)this.addSource(E,l.sources[E],{validate:!1,isInitialLoad:!0});l.sprite?this._loadSprite(l.sprite):(this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0})),this.glyphManager.setURL(l.glyphs,this.scope);const B=nm(this.stylesheet.layers);if(this._order=B.map(E=>E.id),this.stylesheet.light&&s.w("The `light` root property is deprecated, prefer using `lights` with `flat` light type instead."),this.stylesheet.lights)if(this.stylesheet.lights.length===1&&this.stylesheet.lights[0].type==="flat"){const E=this.stylesheet.lights[0];this.light=new er(E.properties,E.id)}else this.setLights(this.stylesheet.lights);this.light||(this.light=new er(this.stylesheet.light)),this._layers={},this._serializedLayers={};for(const E of B){const M=s.c2(E,this.scope,this.options);M.isConfigDependent&&this._configDependentLayers.add(M.fqid),M.setEventedParent(this,{layer:{id:M.id}}),this._layers[M.id]=M,this._serializedLayers[M.id]=M.serialize();const k=this.getOwnLayerSourceCache(M),F=!!this.directionalLight&&this.directionalLight.shadowsEnabled();k&&M.canCastShadows()&&F&&(k.castsShadows=!0)}this.stylesheet.models&&this.modelManager.addModels(this.stylesheet.models,this.scope);const C=this.stylesheet.terrain;C&&(this.disableElevatedTerrain===void 0&&(this.disableElevatedTerrain=s.f.hasCanvasFingerprintNoise()),this.disableElevatedTerrain?s.w("Terrain and hillshade are disabled because of Canvas2D limitations when fingerprinting protection is enabled (e.g. in private browsing mode)."):this.terrainSetForDrapingOnly()||this._createTerrain(C,1)),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this.stylesheet.transition&&this.setTransition(this.stylesheet.transition),this.fire(new s.b("data",{dataType:"style"})),l.imports?this._loadImports(l.imports,h).then(()=>this._reloadImports()):this._reloadImports()}isRootStyle(){return this.importDepth===0}mergeAll(){let l,h,_,B,C,E,M,k;this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(F=>{if(F.stylesheet){if(F.light!=null&&(l=F.light),F.stylesheet.lights)for(const j of F.stylesheet.lights)j.type==="ambient"&&F.ambientLight!=null&&(h=F.ambientLight),j.type==="directional"&&F.directionalLight!=null&&(_=F.directionalLight);B=this._prioritizeTerrain(B,F.terrain,F.stylesheet.terrain),F.stylesheet.fog&&F.fog!=null&&(C=F.fog),F.stylesheet.camera!=null&&(k=F.stylesheet.camera),F.stylesheet.projection!=null&&(E=F.stylesheet.projection),F.stylesheet.transition!=null&&(M=F.stylesheet.transition)}}),this.light=l,this.ambientLight=h,this.directionalLight=_,this.fog=C,B===null?delete this.terrain:this.terrain=B,this.camera=k||{"camera-projection":"perspective"},this.projection=E||{name:"mercator"},this.transition=s.e({},am,M),this.mergeSources(),this.mergeLayers()}forEachFragmentStyle(l){const h=_=>{for(const B of _.fragments)h(B.style);l(_)};h(this)}_prioritizeTerrain(l,h,_){const B=l&&l.drapeRenderMode===0;return _===null?h&&h.drapeRenderMode===0?h:B?l:null:h!=null&&(!l||B||h&&h.drapeRenderMode===1)?h:l}mergeTerrain(){let l;this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(h=>{l=this._prioritizeTerrain(l,h.terrain,h.stylesheet.terrain)}),l===null?delete this.terrain:this.terrain=l}mergeProjection(){let l;this.forEachFragmentStyle(h=>{h.stylesheet.projection!=null&&(l=h.stylesheet.projection)}),this.projection=l||{name:"mercator"}}mergeSources(){const l={},h={},_={};this.forEachFragmentStyle(B=>{for(const C in B._sourceCaches){const E=s.ag(C,B.scope);l[E]=B._sourceCaches[C]}for(const C in B._otherSourceCaches){const E=s.ag(C,B.scope);h[E]=B._otherSourceCaches[C]}for(const C in B._symbolSourceCaches){const E=s.ag(C,B.scope);_[E]=B._symbolSourceCaches[C]}}),this._mergedSourceCaches=l,this._mergedOtherSourceCaches=h,this._mergedSymbolSourceCaches=_}mergeLayers(){const l={},h=[],_={};this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this.forEachFragmentStyle(C=>{for(const E of C._order){const M=C._layers[E];if(M.type==="slot"){const k=s.c3(E);if(l[k])continue;l[k]=[]}M.slot&&l[M.slot]?l[M.slot].push(M):h.push(M)}}),this._mergedOrder=[];const B=(C=[])=>{for(const E of C)if(E.type==="slot"){const M=s.c3(E.id);l[M]&&B(l[M])}else{const M=s.ag(E.id,E.scope);this._mergedOrder.push(M),_[M]=E,E.is3D()&&(this._has3DLayers=!0),E.type==="circle"&&(this._hasCircleLayers=!0),E.type==="symbol"&&(this._hasSymbolLayers=!0)}};B(h),this._mergedLayers=_,this.updateDrapeFirstLayers(),this._buildingIndex.processLayersChanged()}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}getCamera(){return this.stylesheet.camera}setCamera(l){return this.stylesheet.camera=s.e({},this.stylesheet.camera,l),this.camera=this.stylesheet.camera,this}setProjection(l){l?this.stylesheet.projection=l:delete this.stylesheet.projection,this.mergeProjection(),this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?(this.getTerrain()||this.stylesheet.terrain)&&!this.disableElevatedTerrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null,0))}_updateMapProjection(){this.isRootStyle()&&(this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.projection))}_loadSprite(l){this._spriteRequest=function(h,_,B){let C,E,M;const k=s.f.devicePixelRatio>1?"@2x":"";let F=s.g(_.transformRequest(_.normalizeSpriteURL(h,k,".json"),s.R.SpriteJSON),(Y,te)=>{F=null,M||(M=Y,C=te,V())}),j=s.d(_.transformRequest(_.normalizeSpriteURL(h,k,".png"),s.R.SpriteImage),(Y,te)=>{j=null,M||(M=Y,E=te,V())});function V(){if(M)B(M);else if(C&&E){const Y=s.f.getImageData(E),te={};for(const le in C){const{width:ae,height:ue,x:ne,y:he,sdf:ye,pixelRatio:de,stretchX:ve,stretchY:ce,content:xe}=C[le],Ee=new s.h({width:ae,height:ue});s.h.copy(Y,Ee,{x:ne,y:he},{x:0,y:0},{width:ae,height:ue}),te[le]={data:Ee,pixelRatio:de,sdf:ye,stretchX:ve,stretchY:ce,content:xe}}B(null,te)}}return{cancel(){F&&(F.cancel(),F=null),j&&(j.cancel(),j=null)}}}(l,this.map._requestManager,(h,_)=>{if(this._spriteRequest=null,h)this.fire(new s.a(h));else if(_)for(const B in _)this.imageManager.addImage(B,this.scope,_[B]);this.imageManager.setLoaded(!0,this.scope),this._availableImages=this.imageManager.listImages(this.scope),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages}),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new s.b("data",{dataType:"style"}))})}_validateLayer(l){const h=this.getOwnSource(l.source);if(!h)return;const _=l.sourceLayer;_&&(h.type==="geojson"||h.vectorLayerIds&&h.vectorLayerIds.indexOf(_)===-1)&&this.fire(new s.a(new Error(`Source layer "${_}" does not exist on source "${h.id}" as specified by style layer "${l.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._changes.getUpdatedSourceCaches()).length)return!1;for(const l in this._sourceCaches)if(!this._sourceCaches[l].loaded())return!1;if(!this.imageManager.isLoaded()||!this.modelManager.isLoaded())return!1;for(const{style:l}of this.fragments)if(!l.loaded())return!1;return!0}_serializeImports(){if(this.stylesheet.imports)return this.stylesheet.imports.map((l,h)=>{const _=this.fragments[h];return _&&_.style&&(l.data=_.style.serialize()),l})}_serializeSources(){const l={};for(const h in this._sourceCaches){const _=this._sourceCaches[h].getSource();l[_.id]||(l[_.id]=_.serialize())}return l}_serializeLayers(l){const h=[];for(const _ of l){const B=this._layers[_];B&&B.type!=="custom"&&h.push(B.serialize())}return h}hasLightTransitions(){return!(!this.light||!this.light.hasTransition())||!(!this.ambientLight||!this.ambientLight.hasTransition())||!(!this.directionalLight||!this.directionalLight.hasTransition())}hasFogTransition(){return!!this.fog&&this.fog.hasTransition()}hasTransitions(){if(this.hasLightTransitions()||this.hasFogTransition())return!0;for(const l in this._sourceCaches)if(this._sourceCaches[l].hasTransition())return!0;for(const l in this._layers)if(this._layers[l].hasTransition())return!0;return!1}get order(){return this.terrain?this._drapedFirstOrder:this._mergedOrder}isLayerDraped(l){return!!this.terrain&&(typeof l.isLayerDraped=="function"?l.isLayerDraped(this.getLayerSourceCache(l)):Gu.has(l.type))}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}_checkLayer(l){const h=this.getOwnLayer(l);if(h)return h;this.fire(new s.a(new Error(`The layer '${l}' does not exist in the map's style.`)))}_checkSource(l){const h=this.getOwnSource(l);if(h)return h;this.fire(new s.a(new Error(`The source '${l}' does not exist in the map's style.`)))}update(l){if(!this._loaded)return;this.ambientLight&&this.ambientLight.recalculate(l),this.directionalLight&&this.directionalLight.recalculate(l);const h=this.calculateLightsBrightness();l.brightness=h||0,h!==this._brightness&&(this._brightness=h,this.dispatcher.broadcast("setBrightness",h));const _=this._changes.isDirty();if(this._changes.isDirty()){const C=this._changes.getLayerUpdatesByScope();for(const E in C){const{updatedIds:M,removedIds:k}=C[E];(M||k)&&this._updateWorkerLayers(E,M,k)}this.updateSourceCaches(),this._updateTilesForChangedImages(),this.updateLayers(l),this.light&&this.light.updateTransitions(l),this.ambientLight&&this.ambientLight.updateTransitions(l),this.directionalLight&&this.directionalLight.updateTransitions(l),this.fog&&this.fog.updateTransitions(l),this._changes.reset()}const B={};for(const C in this._mergedSourceCaches){const E=this._mergedSourceCaches[C];B[C]=E.used,E.used=!1,E.tileCoverLift=0}for(const C of this._mergedOrder){const E=this._mergedLayers[C];if(E.recalculate(l,this._availableImages),!E.isHidden(l.zoom)){const M=this.getLayerSourceCache(E);M&&(M.used=!0,M.tileCoverLift=Math.max(M.tileCoverLift,E.tileCoverLift()))}if(!this._precompileDone&&this._shouldPrecompile)for(let M=E.minzoom||0;M<(E.maxzoom||25.5);M++){const k=this.map.painter;if(k){const F=E.getProgramIds();if(!F)continue;for(const j of F){const V=E.getDefaultProgramParams(j,l.zoom);V&&(k.style=this,this.fog&&(k._fogVisible=!0,V.overrideFog=!0,k.getOrCreateProgram(j,V)),k._fogVisible=!1,V.overrideFog=!1,k.getOrCreateProgram(j,V),(this.stylesheet.terrain||this.stylesheet.projection&&this.stylesheet.projection.name==="globe")&&(V.overrideRtt=!0,k.getOrCreateProgram(j,V)))}}}}this._shouldPrecompile&&(this._precompileDone=!0);for(const C in B){const E=this._mergedSourceCaches[C];B[C]!==E.used&&E.getSource().fire(new s.b("data",{sourceDataType:"visibility",dataType:"source",sourceId:E.getSource().id}))}this.light&&this.light.recalculate(l),this.terrain&&this.terrain.recalculate(l),this.fog&&this.fog.recalculate(l),this.z=l.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),_&&this.fire(new s.b("data",{dataType:"style"}))}_updateTilesForChangedImages(){const l=this._changes.getUpdatedImages();if(l.length){for(const h in this._sourceCaches)this._sourceCaches[h].reloadTilesForDependencies(["icons","patterns"],l);this._changes.resetUpdatedImages()}}_updateWorkerLayers(l,h,_){const B=this.getFragmentStyle(l);B&&this.dispatcher.broadcast("updateLayers",{layers:h?B._serializeLayers(h):[],scope:l,removedIds:_||[],options:B.options})}setState(l){if(this._checkLoaded(),bl(this,Do(l)))return!1;(l=s.c1(l)).layers=nm(l.layers);const h=function(B,C){if(!B)return[{command:rn.setStyle,args:[C]}];let E=[];try{if(!w(B.version,C.version))return[{command:rn.setStyle,args:[C]}];w(B.center,C.center)||E.push({command:rn.setCenter,args:[C.center]}),w(B.zoom,C.zoom)||E.push({command:rn.setZoom,args:[C.zoom]}),w(B.bearing,C.bearing)||E.push({command:rn.setBearing,args:[C.bearing]}),w(B.pitch,C.pitch)||E.push({command:rn.setPitch,args:[C.pitch]}),w(B.sprite,C.sprite)||E.push({command:rn.setSprite,args:[C.sprite]}),w(B.glyphs,C.glyphs)||E.push({command:rn.setGlyphs,args:[C.glyphs]}),w(B.imports,C.imports)||function(V=[],Y=[],te){Y=Y||[];const le=(V=V||[]).map(_l),ae=Y.map(_l),ue=V.reduce(Dc,{}),ne=Y.reduce(Dc,{}),he=le.slice();let ye,de,ve,ce;for(ye=0,de=0;ye<le.length;ye++)ve=le[ye],ne.hasOwnProperty(ve)?de++:(te.push({command:rn.removeImport,args:[ve]}),he.splice(he.indexOf(ve,de),1));for(ye=0,de=0;ye<ae.length;ye++)ve=ae[ae.length-1-ye],he[he.length-1-ye]!==ve&&(ue.hasOwnProperty(ve)?(te.push({command:rn.removeImport,args:[ve]}),he.splice(he.lastIndexOf(ve,he.length-de),1)):de++,ce=he[he.length-ye],te.push({command:rn.addImport,args:[ne[ve],ce]}),he.splice(he.length-ye,0,ve));for(const xe of Y){const Ee=ue[xe.id];Ee&&!w(Ee,xe)&&te.push({command:rn.updateImport,args:[xe.id,xe]})}}(B.imports,C.imports,E),w(B.transition,C.transition)||E.push({command:rn.setTransition,args:[C.transition]}),w(B.light,C.light)||E.push({command:rn.setLight,args:[C.light]}),w(B.fog,C.fog)||E.push({command:rn.setFog,args:[C.fog]}),w(B.projection,C.projection)||E.push({command:rn.setProjection,args:[C.projection]}),w(B.lights,C.lights)||E.push({command:rn.setLights,args:[C.lights]}),w(B.camera,C.camera)||E.push({command:rn.setCamera,args:[C.camera]});const M={},k=[];(function(V,Y,te,le){let ae;for(ae in Y=Y||{},V=V||{})V.hasOwnProperty(ae)&&(Y.hasOwnProperty(ae)||fd(ae,te,le));for(ae in Y){if(!Y.hasOwnProperty(ae))continue;const ue=Y[ae];V.hasOwnProperty(ae)?w(V[ae],ue)||(V[ae].type==="geojson"&&ue.type==="geojson"&&N_(V,Y,ae)?te.push({command:rn.setGeoJSONSourceData,args:[ae,ue.data]}):dd(ae,Y,te,le)):Ec(ae,Y,te)}})(B.sources,C.sources,k,M);const F=[];B.layers&&B.layers.forEach(V=>{V.source&&M[V.source]?E.push({command:rn.removeLayer,args:[V.id]}):F.push(V)});let j=B.terrain;j&&M[j.source]&&(E.push({command:rn.setTerrain,args:[void 0]}),j=void 0),E=E.concat(k),w(j,C.terrain)||E.push({command:rn.setTerrain,args:[C.terrain]}),function(V,Y,te){Y=Y||[];const le=(V=V||[]).map(_l),ae=Y.map(_l),ue=V.reduce(Dc,{}),ne=Y.reduce(Dc,{}),he=le.slice(),ye=Object.create(null);let de,ve,ce,xe,Ee,Pe,Re;for(de=0,ve=0;de<le.length;de++)ce=le[de],ne.hasOwnProperty(ce)?ve++:(te.push({command:rn.removeLayer,args:[ce]}),he.splice(he.indexOf(ce,ve),1));for(de=0,ve=0;de<ae.length;de++)ce=ae[ae.length-1-de],he[he.length-1-de]!==ce&&(ue.hasOwnProperty(ce)?(te.push({command:rn.removeLayer,args:[ce]}),he.splice(he.lastIndexOf(ce,he.length-ve),1)):ve++,Pe=he[he.length-de],te.push({command:rn.addLayer,args:[ne[ce],Pe]}),he.splice(he.length-de,0,ce),ye[ce]=!0);for(de=0;de<ae.length;de++)if(ce=ae[de],xe=ue[ce],Ee=ne[ce],!ye[ce]&&!w(xe,Ee))if(w(xe.source,Ee.source)&&w(xe["source-layer"],Ee["source-layer"])&&w(xe.type,Ee.type)){for(Re in Bo(xe.layout,Ee.layout,te,ce,null,rn.setLayoutProperty),Bo(xe.paint,Ee.paint,te,ce,null,rn.setPaintProperty),w(xe.slot,Ee.slot)||te.push({command:rn.setSlot,args:[ce,Ee.slot]}),w(xe.filter,Ee.filter)||te.push({command:rn.setFilter,args:[ce,Ee.filter]}),w(xe.minzoom,Ee.minzoom)&&w(xe.maxzoom,Ee.maxzoom)||te.push({command:rn.setLayerZoomRange,args:[ce,Ee.minzoom,Ee.maxzoom]}),xe)xe.hasOwnProperty(Re)&&Re!=="layout"&&Re!=="paint"&&Re!=="filter"&&Re!=="metadata"&&Re!=="minzoom"&&Re!=="maxzoom"&&Re!=="slot"&&(Re.indexOf("paint.")===0?Bo(xe[Re],Ee[Re],te,ce,Re.slice(6),rn.setPaintProperty):w(xe[Re],Ee[Re])||te.push({command:rn.setLayerProperty,args:[ce,Re,Ee[Re]]}));for(Re in Ee)Ee.hasOwnProperty(Re)&&!xe.hasOwnProperty(Re)&&Re!=="layout"&&Re!=="paint"&&Re!=="filter"&&Re!=="metadata"&&Re!=="minzoom"&&Re!=="maxzoom"&&Re!=="slot"&&(Re.indexOf("paint.")===0?Bo(xe[Re],Ee[Re],te,ce,Re.slice(6),rn.setPaintProperty):w(xe[Re],Ee[Re])||te.push({command:rn.setLayerProperty,args:[ce,Re,Ee[Re]]}))}else te.push({command:rn.removeLayer,args:[ce]}),Pe=he[he.lastIndexOf(ce)+1],te.push({command:rn.addLayer,args:[Ee,Pe]})}(F,C.layers,E)}catch(M){console.warn("Unable to compute style diff:",M),E=[{command:rn.setStyle,args:[C]}]}return E}(this.serialize(),l).filter(B=>!(B.command in Vu));if(h.length===0)return!1;const _=h.filter(B=>!(B.command in bd));if(_.length>0)throw new Error(`Unimplemented: ${_.map(B=>B.command).join(", ")}.`);return h.forEach(B=>{this[B.command].apply(this,B.args)}),this.stylesheet=l,this.mergeAll(),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),!0}addImage(l,h){return this.getImage(l)?this.fire(new s.a(new Error("An image with this name already exists."))):(this.imageManager.addImage(l,this.scope,h),this._afterImageUpdated(l),this)}updateImage(l,h){this.imageManager.updateImage(l,this.scope,h)}getImage(l){return this.imageManager.getImage(l,this.scope)}removeImage(l){return this.getImage(l)?(this.imageManager.removeImage(l,this.scope),this._afterImageUpdated(l),this):this.fire(new s.a(new Error("No image with this name exists.")))}_afterImageUpdated(l){this._availableImages=this.imageManager.listImages(this.scope),this._changes.updateImage(l),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages}),this.fire(new s.b("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addModel(l,h,_={}){return this._checkLoaded(),this._validate(Xt,`models.${l}`,h,null,_)||(this.modelManager.addModel(l,h,this.scope),this._changes.setDirty()),this}hasModel(l){return this.modelManager.hasModel(l,this.scope)}removeModel(l){return this.hasModel(l)?(this.modelManager.removeModel(l,this.scope),this):this.fire(new s.a(new Error("No model with this ID exists.")))}listModels(){return this._checkLoaded(),this.modelManager.listModels(this.scope)}addSource(l,h,_={}){if(this._checkLoaded(),this.getOwnSource(l)!==void 0)throw new Error(`There is already a source with ID "${l}".`);if(!h.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(h).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(h.type)>=0&&this._validate(Ta,`sources.${l}`,h,null,_))return;this.map&&this.map._collectResourceTiming&&(h.collectResourceTiming=!0);const B=Oi(l,h,this.dispatcher,this);B.scope=this.scope,B.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(B.id),source:B.serialize(),sourceId:B.id}));const C=E=>{const M=(E?"symbol:":"other:")+B.id,k=s.ag(M,this.scope),F=this._sourceCaches[M]=new Ka(k,B,E);(E?this._symbolSourceCaches:this._otherSourceCaches)[B.id]=F,F.onAdd(this.map)};C(!1),h.type!=="vector"&&h.type!=="geojson"||C(!0),B.onAdd&&B.onAdd(this.map),_.isInitialLoad||(this.mergeSources(),this._changes.setDirty())}removeSource(l){this._checkLoaded();const h=this.getOwnSource(l);if(!h)throw new Error("There is no source with this ID");for(const B in this._layers)if(this._layers[B].source===l)return this.fire(new s.a(new Error(`Source "${l}" cannot be removed while layer "${B}" is using it.`)));if(this.terrain&&this.terrain.scope===this.scope&&this.terrain.get().source===l)return this.fire(new s.a(new Error(`Source "${l}" cannot be removed while terrain is using it.`)));const _=this.getOwnSourceCaches(l);for(const B of _){const C=s.c3(B.id);delete this._sourceCaches[C],this._changes.discardSourceCacheUpdate(B.id),B.fire(new s.b("data",{sourceDataType:"metadata",dataType:"source",sourceId:B.getSource().id})),B.setEventedParent(null),B.clearTiles()}return delete this._otherSourceCaches[l],delete this._symbolSourceCaches[l],this.mergeSources(),h.setEventedParent(null),h.onRemove&&h.onRemove(this.map),this._changes.setDirty(),this}setGeoJSONSourceData(l,h){this._checkLoaded(),this.getOwnSource(l).setData(h),this._changes.setDirty()}getOwnSource(l){const h=this.getOwnSourceCache(l);return h&&h.getSource()}getOwnSources(){const l=[];for(const h in this._otherSourceCaches){const _=this.getOwnSourceCache(h);_&&l.push(_.getSource())}return l}areTilesLoaded(){const l=this._mergedSourceCaches;for(const h in l){const _=l[h]._tiles;for(const B in _){const C=_[B];if(C.state!=="loaded"&&C.state!=="errored")return!1}}return!0}setLights(l){if(this._checkLoaded(),!l)return delete this.ambientLight,void delete this.directionalLight;const h=this._getTransitionParameters();for(const B of l){if(this._validate(dt,"lights",B))return;switch(B.type){case"ambient":if(this.ambientLight){const C=this.ambientLight;C.set(B),C.updateTransitions(h)}else this.ambientLight=new co(B,Xo,this.scope,this.options);break;case"directional":if(this.directionalLight){const C=this.directionalLight;C.set(B),C.updateTransitions(h)}else this.directionalLight=new co(B,zi,this.scope,this.options)}}const _=new s.K(this.z||0,h);this.ambientLight&&this.ambientLight.recalculate(_),this.directionalLight&&this.directionalLight.recalculate(_),this._brightness=this.calculateLightsBrightness(),this.dispatcher.broadcast("setBrightness",this._brightness)}calculateLightsBrightness(){const l=this.directionalLight,h=this.ambientLight;if(!l||!h)return;const _=V=>.2126*(V[0]<=.03928?V[0]/12.92:Math.pow((V[0]+.055)/1.055,2.4))+.7152*(V[1]<=.03928?V[1]/12.92:Math.pow((V[1]+.055)/1.055,2.4))+.0722*(V[2]<=.03928?V[2]/12.92:Math.pow((V[2]+.055)/1.055,2.4)),B=l.properties.get("color").toArray01(),C=l.properties.get("intensity"),E=l.properties.get("direction"),M=1-s.bQ(E.x,E.y,E.z)[2]/90,k=_(B)*C*M,F=h.properties.get("color").toArray01(),j=h.properties.get("intensity");return(k+_(F)*j)/2}getBrightness(){return this._brightness}getLights(){if(!this.enable3dLights())return null;const l=[];return this.directionalLight&&l.push(this.directionalLight.get()),this.ambientLight&&l.push(this.ambientLight.get()),l}enable3dLights(){return!!this.ambientLight&&!!this.directionalLight}getFragmentStyle(l){if(!l)return this;if(s.c4(l)){const h=s.c5(l),_=this.fragments.find(({id:C})=>C===h);if(!_)throw new Error(`Style import not found: ${l}`);const B=s.c3(l);return _.style.getFragmentStyle(B)}{const h=this.fragments.find(({id:_})=>_===l);if(!h)throw new Error(`Style import not found: ${l}`);return h.style}}getConfigProperty(l,h){const _=this.getFragmentStyle(l);if(!_)return null;const B=s.ag(h,_.scope),C=_.options.get(B),E=C?C.value||C.default:null;return E?E.serialize():null}setConfigProperty(l,h,_){const B=s.r(_);if(B.result!=="success")return void bl(this,B.value);const C=B.value.expression,E=this.getFragmentStyle(l);if(!E)return;const M=s.ag(h,E.scope),k=E.options.get(M);k&&(this.options.set(M,{...k,value:C}),this.updateConfigDependencies())}setConfig(l,h){if(this._config=l,l||h)if(h)for(const _ in h){let B,C;const E=s.r(h[_].default);if(E.result==="success"&&(B=E.value.expression),l&&l[_]!==void 0){const Y=s.r(l[_]);Y.result==="success"&&(C=Y.value.expression)}const{minValue:M,maxValue:k,stepValue:F,type:j,values:V}=h[_];if(B){const Y=s.ag(_,this.scope);this.options.set(Y,{default:B,value:C,minValue:M,maxValue:k,stepValue:F,type:j,values:V})}else this.fire(new s.a(new Error(`No schema defined for config option "${_}".`)))}else this.fire(new s.a(new Error("Attempting to set config for a style without schema.")))}updateConfigDependencies(){for(const l of this._configDependentLayers){const h=this.getLayer(l);h&&(h.possiblyEvaluateVisibility(),this._updateLayer(h))}this.ambientLight&&this.ambientLight.updateConfig(this.options),this.directionalLight&&this.directionalLight.updateConfig(this.options),this.fog&&this.fog.updateConfig(this.options),this._changes.setDirty()}addLayer(l,h,_={}){this._checkLoaded();const B=l.id;if(this._layers[B])return void this.fire(new s.a(new Error(`Layer with id "${B}" already exists on this map`)));let C;if(l.type==="custom"){if(bl(this,s.c6(l)))return;C=s.c2(l,this.scope,this.options)}else{if(typeof l.source=="object"&&(this.addSource(B,l.source),l=s.c1(l),l=s.e(l,{source:B})),this._validate(ze,`layers.${B}`,l,{arrayIndex:-1},_))return;C=s.c2(l,this.scope,this.options),this._validateLayer(C),C.setEventedParent(this,{layer:{id:B}}),this._serializedLayers[C.id]=C.serialize()}C.isConfigDependent&&this._configDependentLayers.add(C.fqid);let E=this._order.length;if(h){const j=this._order.indexOf(h);if(j===-1)return void this.fire(new s.a(new Error(`Layer with id "${h}" does not exist on this map.`)));C.slot===this._layers[h].slot?E=j:s.w(`Layer with id "${h}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(E,0,B),this._layerOrderChanged=!0,this._layers[B]=C;const M=this.getOwnLayerSourceCache(C),k=!!this.directionalLight&&this.directionalLight.shadowsEnabled();M&&C.canCastShadows()&&k&&(M.castsShadows=!0);const F=this._changes.getRemovedLayer(C);if(F&&C.source&&M&&C.type!=="custom"){this._changes.discardLayerRemoval(C);const j=s.ag(C.source,C.scope);F.type!==C.type?this._changes.updateSourceCache(j,"clear"):(this._changes.updateSourceCache(j,"reload"),M.pause())}this._updateLayer(C),C.onAdd&&C.onAdd(this.map),C.scope=this.scope,this.mergeLayers()}moveLayer(l,h){this._checkLoaded();const _=this._checkLayer(l);if(!_||l===h)return;const B=this._order.indexOf(l);this._order.splice(B,1);let C=this._order.length;if(h){const E=this._order.indexOf(h);if(E===-1)return void this.fire(new s.a(new Error(`Layer with id "${h}" does not exist on this map.`)));_.slot===this._layers[h].slot?C=E:s.w(`Layer with id "${h}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(C,0,l),this._changes.setDirty(),this._layerOrderChanged=!0,this.mergeLayers()}removeLayer(l){this._checkLoaded();const h=this._checkLayer(l);if(!h)return;h.setEventedParent(null);const _=this._order.indexOf(l);this._order.splice(_,1),delete this._layers[l],delete this._serializedLayers[l],this._changes.setDirty(),this._layerOrderChanged=!0,this._configDependentLayers.delete(h.fqid),this._changes.removeLayer(h);const B=this.getOwnLayerSourceCache(h);if(B&&B.castsShadows){let C=!1;for(const E in this._layers)if(this._layers[E].source===h.source&&this._layers[E].canCastShadows()){C=!0;break}B.castsShadows=C}h.onRemove&&h.onRemove(this.map),this.mergeLayers()}getOwnLayer(l){return this._layers[l]}hasLayer(l){return l in this._mergedLayers}hasLayerType(l){for(const h in this._layers)if(this._layers[h].type===l)return!0;return!1}setLayerZoomRange(l,h,_){this._checkLoaded();const B=this._checkLayer(l);B&&(B.minzoom===h&&B.maxzoom===_||(h!=null&&(B.minzoom=h),_!=null&&(B.maxzoom=_),this._updateLayer(B)))}setSlot(l,h){this._checkLoaded();const _=this._checkLayer(l);_&&_.slot!==h&&(_.slot=h,this._updateLayer(_))}setFilter(l,h,_={}){this._checkLoaded();const B=this._checkLayer(l);if(B&&!w(B.filter,h))return h==null?(B.filter=void 0,void this._updateLayer(B)):void(this._validate(ut,`layers.${B.id}.filter`,h,{layerType:B.type},_)||(B.filter=s.c1(h),this._updateLayer(B)))}getFilter(l){const h=this._checkLayer(l);if(h)return s.c1(h.filter)}setLayoutProperty(l,h,_,B={}){this._checkLoaded();const C=this._checkLayer(l);if(C&&!w(C.getLayoutProperty(h),_)){if(_!=null&&(!B||B.validate!==!1)&&bl(C,Tt.call(Do,{key:`layers.${l}.layout.${h}`,layerType:C.type,objectKey:h,value:_,styleSpec:s.D,style:{glyphs:!0,sprite:!0}})))return;C.setLayoutProperty(h,_),C.isConfigDependent&&this._configDependentLayers.add(C.fqid),this._updateLayer(C)}}getLayoutProperty(l,h){const _=this._checkLayer(l);if(_)return _.getLayoutProperty(h)}setPaintProperty(l,h,_,B={}){this._checkLoaded();const C=this._checkLayer(l);if(!C||w(C.getPaintProperty(h),_)||_!=null&&(!B||B.validate!==!1)&&bl(C,gt.call(Do,{key:`layers.${l}.paint.${h}`,layerType:C.type,objectKey:h,value:_,styleSpec:s.D})))return;const E=C.setPaintProperty(h,_);C.isConfigDependent&&this._configDependentLayers.add(C.fqid),E&&this._updateLayer(C),this._changes.updatePaintProperties(C)}getPaintProperty(l,h){const _=this._checkLayer(l);if(_)return _.getPaintProperty(h)}setFeatureState(l,h){this._checkLoaded();const _=l.source,B=l.sourceLayer,C=this._checkSource(_);if(!C)return;const E=C.type;if(E==="geojson"&&B)return void this.fire(new s.a(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(E==="vector"&&!B)return void this.fire(new s.a(new Error("The sourceLayer parameter must be provided for vector source types.")));l.id===void 0&&this.fire(new s.a(new Error("The feature id parameter must be provided.")));const M=this.getOwnSourceCaches(_);for(const k of M)k.setFeatureState(B,l.id,h)}removeFeatureState(l,h){this._checkLoaded();const _=l.source,B=this._checkSource(_);if(!B)return;const C=B.type,E=C==="vector"?l.sourceLayer:void 0;if(C==="vector"&&!E)return void this.fire(new s.a(new Error("The sourceLayer parameter must be provided for vector source types.")));if(h&&typeof l.id!="string"&&typeof l.id!="number")return void this.fire(new s.a(new Error("A feature id is required to remove its specific state property.")));const M=this.getOwnSourceCaches(_);for(const k of M)k.removeFeatureState(E,l.id,h)}getFeatureState(l){this._checkLoaded();const h=l.source,_=l.sourceLayer,B=this._checkSource(h);if(B){if(B.type!=="vector"||_)return l.id===void 0&&this.fire(new s.a(new Error("The feature id parameter must be provided."))),this.getOwnSourceCaches(h)[0].getFeatureState(_,l.id);this.fire(new s.a(new Error("The sourceLayer parameter must be provided for vector source types.")))}}setTransition(l){return this.stylesheet.transition=s.e({},this.stylesheet.transition,l),this.transition=this.stylesheet.transition,this}getTransition(){return s.e({},this.stylesheet.transition)}serialize(){this._checkLoaded();const l=this.getTerrain(),h=l&&this.terrain&&this.terrain.scope===this.scope?l:this.stylesheet.terrain;return s.c7({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,imports:this._serializeImports(),schema:this.stylesheet.schema,camera:this.stylesheet.camera,light:this.stylesheet.light,lights:this.stylesheet.lights,terrain:h,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:this._serializeSources(),layers:this._serializeLayers(this._order)},_=>_!==void 0)}_updateLayer(l){this._changes.updateLayer(l);const h=this.getLayerSourceCache(l),_=s.ag(l.source,l.scope),B=this._changes.getUpdatedSourceCaches();l.source&&!B[_]&&h&&h.getSource().type!=="raster"&&(this._changes.updateSourceCache(_,"reload"),h.pause()),l.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(l){const h=M=>this._mergedLayers[M].type==="fill-extrusion"||this._mergedLayers[M].type==="model",_=this.order,B={},C=[];for(let M=_.length-1;M>=0;M--){const k=_[M];if(h(k)){B[k]=M;for(const F of l){const j=F[k];if(j)for(const V of j)C.push(V)}}}C.sort((M,k)=>k.intersectionZ-M.intersectionZ);const E=[];for(let M=_.length-1;M>=0;M--){const k=_[M];if(h(k))for(let F=C.length-1;F>=0;F--){const j=C[F].feature;if(B[j.layer.id]<M)break;E.push(j),C.pop()}else for(const F of l){const j=F[k];if(j)for(const V of j)E.push(V.feature)}}return E}queryRenderedFeatures(l,h,_){h&&h.filter&&this._validate(ut,"queryRenderedFeatures.filter",h.filter,null,h),h.scope=this.scope,h.availableImages=this._availableImages,h.serializedLayers=this._serializedLayers;const B={};if(h&&h.layers){if(!Array.isArray(h.layers))return this.fire(new s.a(new Error("parameters.layers must be an Array."))),[];for(const F of h.layers){const j=this._mergedLayers[F];if(!j)return this.fire(new s.a(new Error(`The layer '${F}' does not exist in the map's style and cannot be queried for features.`))),[];B[j.source]=!0}}const C=[],E=h.serializedLayers||{},M=h&&h.layers?h.layers.some(F=>{const j=this.getLayer(F);return j&&j.is3D()}):this.has3DLayers(),k=Ii.createFromScreenPoints(l,_);for(const F in this._mergedSourceCaches){const j=this._mergedSourceCaches[F].getSource();if(!j||j.scope!==h.scope)continue;const V=this._mergedSourceCaches[F].getSource().id;h.layers&&!B[V]||C.push(Ih(this._mergedSourceCaches[F],this._mergedLayers,E,k,h,_,M,!!this.map._showQueryGeometry))}return this.placement&&C.push(function(F,j,V,Y,te,le,ae){const ue={},ne=le.queryRenderedSymbols(Y),he=[];for(const ye of Object.keys(ne).map(Number))he.push(ae[ye]);he.sort(Lu);for(const ye of he){const de=ye.featureIndex.lookupSymbolFeatures(ne[ye.bucketInstanceId],j,ye.bucketIndex,ye.sourceLayerIndex,te.filter,te.layers,te.availableImages,F);for(const ve in de){const ce=ue[ve]=ue[ve]||[],xe=de[ve];xe.sort((Ee,Pe)=>{const Re=ye.featureSortOrder;if(Re){const Xe=Re.indexOf(Ee.featureIndex);return Re.indexOf(Pe.featureIndex)-Xe}return Pe.featureIndex-Ee.featureIndex});for(const Ee of xe)ce.push(Ee)}}for(const ye in ue)ue[ye].forEach(de=>{const ve=de.feature,ce=V(F[ye]);if(!ce)return;const xe=ce.getFeatureState(ve.layer["source-layer"],ve.id);ve.source=ve.layer.source,ve.layer["source-layer"]&&(ve.sourceLayer=ve.layer["source-layer"]),ve.state=xe});return ue}(this._mergedLayers,E,this.getLayerSourceCache.bind(this),k.screenGeometry,h,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(C)}querySourceFeatures(l,h){h&&h.filter&&this._validate(ut,"querySourceFeatures.filter",h.filter,null,h);const _=this.getOwnSourceCaches(l);let B=[];for(const C of _)B=B.concat(qa(C,h));return B}addSourceType(l,h,_){return Pa.getSourceType(l)?_(new Error(`A source type called "${l}" already exists.`)):(Pa.setSourceType(l,h),h.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:l,url:h.workerSourceURL},_):_(null,null))}getFlatLight(){return this.light.getLight()}setFlatLight(l,h,_={}){this._checkLoaded();const B=this.light.getLight();let C=!1;for(const M in l)if(!w(l[M],B[M])){C=!0;break}if(!C)return;const E=this._getTransitionParameters();this.light.setLight(l,h,_),this.light.updateTransitions(E)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(l,h=1){if(this._checkLoaded(),!l)return this.terrainSetForDrapingOnly()&&h!==0||delete this.terrain,l===null?this.stylesheet.terrain=null:delete this.stylesheet.terrain,this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let _=l;const B=l.source==null;if(h===1){if(typeof _.source=="object"){const M="terrain-dem-src";this.addSource(M,_.source),_=s.c1(_),_=s.e(_,{source:M})}const C=s.e({},_),E={};if(this.terrain&&B){C.source=this.terrain.get().source;const M=this.terrain?this.getFragmentStyle(this.terrain.scope):null;M&&(E.style=M.serialize())}if(this._validate(pe,"terrain",C,E))return}if(!this.terrain||this.terrain.scope!==this.scope&&!B||this.terrain&&h!==this.terrain.drapeRenderMode){if(!_)return;this._createTerrain(_,h),this.fire(new s.b("data",{dataType:"style"}))}else{const C=this.terrain,E=C.get();for(const M of Object.keys(s.D.terrain))!_.hasOwnProperty(M)&&s.D.terrain[M].default&&(_[M]=s.D.terrain[M].default);for(const M in l)if(!w(l[M],E[M])){C.set(l,this.options),this.stylesheet.terrain=l;const k=this._getTransitionParameters({duration:0});C.updateTransitions(k),this.fire(new s.b("data",{dataType:"style"}));break}}this.mergeTerrain(),this.updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(l){const h=this.fog=new zo(l,this.map.transform,this.scope,this.options);this.stylesheet.fog=h.get();const _=this._getTransitionParameters({duration:0});h.updateTransitions(_)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const l of this.map._markers)l._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(l){if(this._checkLoaded(),!l)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const h=this.fog;if(!w(h.get(),l)){h.set(l,this.options),this.stylesheet.fog=h.get();const _=this._getTransitionParameters({duration:0});h.updateTransitions(_)}}else this._createFog(l);this._markersNeedUpdate=!0}_getTransitionParameters(l){return{now:s.f.now(),transition:s.e(this.transition,l)}}updateDrapeFirstLayers(){if(!this.terrain)return;const l=[],h=[];for(const _ in this._mergedLayers)this.isLayerDraped(this._mergedLayers[_])?l.push(_):h.push(_);this._drapedFirstOrder=[],this._drapedFirstOrder.push(...l),this._drapedFirstOrder.push(...h)}_createTerrain(l,h){const _=this.terrain=new Rn(l,h,this.scope,this.options);h===1&&(this.stylesheet.terrain=l),this.mergeTerrain(),this.updateDrapeFirstLayers(),this._force3DLayerUpdate();const B=this._getTransitionParameters({duration:0});_.updateTransitions(B)}_force3DLayerUpdate(){for(const l in this._layers){const h=this._layers[l];h.type==="fill-extrusion"&&this._updateLayer(h)}}_forceSymbolLayerUpdate(){for(const l in this._layers){const h=this._layers[l];h.type==="symbol"&&this._updateLayer(h)}}_validate(l,h,_,B,C={}){if(C&&C.validate===!1)return!1;const E=s.e({},this.serialize());return bl(this,l.call(Do,s.e({key:h,style:E,value:_,styleSpec:s.D},B)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),s.c8.off("pluginStateChange",this._rtlTextPluginCallback);for(const l in this._mergedLayers)this._mergedLayers[l].setEventedParent(null);for(const l in this._mergedSourceCaches)this._mergedSourceCaches[l].clearTiles(),this._mergedSourceCaches[l].setEventedParent(null);this.setEventedParent(null),delete this.fog,delete this.terrain,delete this.ambientLight,delete this.directionalLight,this.isRootStyle()&&(this.imageManager.setEventedParent(null),this.modelManager.setEventedParent(null),this.dispatcher.remove())}clearSource(l){const h=this.getSourceCaches(l);for(const _ of h)_.clearTiles()}clearSources(){for(const l in this._mergedSourceCaches)this._mergedSourceCaches[l].clearTiles()}reloadSource(l){const h=this.getSourceCaches(l);for(const _ of h)_.resume(),_.reload()}reloadSources(){for(const l of this.getSources())l.reload&&l.reload()}updateSources(l){let h;this.directionalLight&&(h=Yl(this.directionalLight));for(const _ in this._mergedSourceCaches)this._mergedSourceCaches[_].update(l,void 0,void 0,h)}_generateCollisionBoxes(){for(const l in this._sourceCaches){const h=this._sourceCaches[l];h.resume(),h.reload()}}_updatePlacement(l,h,_,B,C=!1){let E=!1,M=!1;const k={},F={};for(const j of this._mergedOrder){const V=this._mergedLayers[j];if(V.type!=="symbol")continue;const Y=s.ag(V.source,V.scope);let te=k[Y];if(!te){const ae=this.getLayerSourceCache(V);if(!ae)continue;const ue=ae.getRenderableIds(!0).map(ne=>ae.getTileByID(ne));F[Y]=ue.slice(),te=k[Y]=ue.sort((ne,he)=>he.tileID.overscaledZ-ne.tileID.overscaledZ||(ne.tileID.isLessThan(he.tileID)?-1:1))}const le=this.crossTileSymbolIndex.addLayer(V,te,l.center.lng,l.projection);E=E||le}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._mergedOrder),C=C||this._layerOrderChanged||_===0,this._layerOrderChanged&&this.fire(new s.b("neworder")),(C||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(s.f.now(),l.zoom))&&(this.pauseablePlacement=new Vh(l,this._mergedOrder,C,h,_,B,this.placement,this.fog&&l.projection.supportsFog?this.fog.state:null,this._buildingIndex),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._mergedOrder,this._mergedLayers,k,F),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(s.f.now()),M=!0),E&&this.pauseablePlacement.placement.setStale()),M||E){this._buildingIndex.onNewFrame(l.zoom);for(const j of this._mergedOrder){const V=this._mergedLayers[j];V.type==="symbol"&&this.placement.updateLayerOpacities(V,k[s.ag(V.source,V.scope)])}}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(s.f.now())}_releaseSymbolFadeTiles(){for(const l in this._sourceCaches)this._sourceCaches[l].releaseSymbolFadeTiles()}addImport(l,h){this._checkLoaded();const _=this.stylesheet.imports=this.stylesheet.imports||[];if(_.findIndex(({id:C})=>C===l.id)!==-1)return this.fire(new s.a(new Error(`Import with id '${l.id}' already exists in the map's style.`)));if(!h)return _.push(l),this._loadImports([l],!0),this;const B=_.findIndex(({id:C})=>C===h);return B===-1?this.fire(new s.a(new Error(`Import with id "${h}" does not exist on this map.`))):(this.stylesheet.imports=_.slice(0,B).concat(l).concat(_.slice(B)),this._loadImports([l],!0,h),this)}updateImport(l,h){this._checkLoaded();const _=this.stylesheet.imports||[],B=this.getImportIndex(l);return B===-1?this:typeof h=="string"?(this.setImportUrl(l,h),this):(h.url&&h.url!==_[B].url&&this.setImportUrl(l,h.url),w(h.config,_[B].config)||this.setImportConfig(l,h.config),w(h.data,_[B].data)||this.setImportData(l,h.data),this)}moveImport(l,h){this._checkLoaded();let _=this.stylesheet.imports||[];const B=this.getImportIndex(l);if(B===-1)return this;const C=this.getImportIndex(h);if(C===-1)return this;const E=_[B],M=this.fragments[B];return _=_.filter(({id:k})=>k!==l),this.fragments=this.fragments.filter(({id:k})=>k!==l),this.stylesheet.imports=_.slice(0,C).concat(E).concat(_.slice(C)),this.fragments=this.fragments.slice(0,C).concat(M).concat(this.fragments.slice(C)),this.mergeLayers(),this}setImportUrl(l,h){this._checkLoaded();const _=this.stylesheet.imports||[],B=this.getImportIndex(l);if(B===-1)return this;_[B].url=h;const C=this.fragments[B];return C.style=this._createFragmentStyle(_[B]),C.style.on("style.import.load",()=>this.mergeAll()),C.style.loadURL(h),this}setImportData(l,h){this._checkLoaded();const _=this.getImportIndex(l),B=this.stylesheet.imports||[];return _===-1?this:h?(this.fragments[_].style.setState(h),this._reloadImports(),this):(delete B[_].data,this.setImportUrl(l,B[_].url))}setImportConfig(l,h){this._checkLoaded();const _=this.getImportIndex(l),B=this.stylesheet.imports||[];if(_===-1)return this;h?B[_].config=h:delete B[_].config;const C=this.fragments[_],E=C.style.stylesheet&&C.style.stylesheet.schema;return C.config=h,C.style.setConfig(h,E),this.updateConfigDependencies(),this}removeImport(l){this._checkLoaded();const h=this.stylesheet.imports||[],_=this.getImportIndex(l);return _===-1||(h.splice(_,1),this.fragments[_].style._remove(),this.fragments.splice(_,1),this._reloadImports()),this}getImportIndex(l){const h=(this.stylesheet.imports||[]).findIndex(_=>_.id===l);return h===-1&&this.fire(new s.a(new Error(`Import '${l}' does not exist in the map's style and cannot be updated.`))),h}getLayer(l){return this._mergedLayers[l]}getSources(){const l=[];for(const h in this._mergedOtherSourceCaches){const _=this._mergedOtherSourceCaches[h];_&&l.push(_.getSource())}return l}getSource(l,h){const _=this.getSourceCache(l,h);return _&&_.getSource()}getLayerSource(l){const h=this.getLayerSourceCache(l);return h&&h.getSource()}getSourceCache(l,h){const _=s.ag(l,h);return this._mergedOtherSourceCaches[_]}getLayerSourceCache(l){const h=s.ag(l.source,l.scope);return l.type==="symbol"?this._mergedSymbolSourceCaches[h]:this._mergedOtherSourceCaches[h]}getSourceCaches(l){const h=[];return this._mergedOtherSourceCaches[l]&&h.push(this._mergedOtherSourceCaches[l]),this._mergedSymbolSourceCaches[l]&&h.push(this._mergedSymbolSourceCaches[l]),h}updateSourceCaches(){const l=this._changes.getUpdatedSourceCaches();for(const h in l){const _=l[h];_==="reload"?this.reloadSource(h):_==="clear"&&this.clearSource(h)}}updateLayers(l){const h=this._changes.getUpdatedPaintProperties();for(const _ of h){const B=this.getLayer(_);B&&B.updateTransitions(l)}}getImages(l,h,_){this.imageManager.getImages(h.icons,h.scope,_),this._updateTilesForChangedImages();const B=C=>{C&&C.setDependencies(h.tileID.key,h.type,h.icons)};B(this._otherSourceCaches[h.source]),B(this._symbolSourceCaches[h.source])}getGlyphs(l,h,_){this.glyphManager.getGlyphs(h.stacks,h.scope,_)}getResource(l,h,_){return s.c9(h,_)}getOwnSourceCache(l){return this._otherSourceCaches[l]}getOwnLayerSourceCache(l){return l.type==="symbol"?this._symbolSourceCaches[l.source]:this._otherSourceCaches[l.source]}getOwnSourceCaches(l){const h=[];return this._otherSourceCaches[l]&&h.push(this._otherSourceCaches[l]),this._symbolSourceCaches[l]&&h.push(this._symbolSourceCaches[l]),h}_isSourceCacheLoaded(l){const h=this.getOwnSourceCaches(l);return h.length===0?(this.fire(new s.a(new Error(`There is no source with ID '${l}'`))),!1):h.every(_=>_.loaded())}has3DLayers(){return this._has3DLayers}hasSymbolLayers(){return this._hasSymbolLayers}hasCircleLayers(){return this._hasCircleLayers}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.fragments.forEach(l=>{l.style._remove()}),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}Pa.getSourceType=function(g){return hs[g]},Pa.setSourceType=function(g,l){hs[g]=l},Pa.registerForPluginStateChange=s.bV;var jc=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#ifdef RENDER_CUTOFF
float cutoff_opacity(vec4 cutoff_params,float depth) {float near=cutoff_params.x;float far=cutoff_params.y;float cutoffStart=cutoff_params.z;float cutoffEnd=cutoff_params.w;float linearDepth=(depth-near)/(far-near);return clamp((linearDepth-cutoffStart)/(cutoffEnd-cutoffStart),0.0,1.0);}
#endif`,Hh=`
out vec4 glFragColor;highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}
#ifdef INDICATOR_CUTOUT
uniform vec2 u_indicator_cutout_centers;uniform vec4 u_indicator_cutout_params;
#endif
vec4 applyCutout(vec4 color) {
#ifdef INDICATOR_CUTOUT
float holeMinOpacity=u_indicator_cutout_params.x;float holeRadius=max(u_indicator_cutout_params.y,0.0);float holeAspectRatio=u_indicator_cutout_params.z;float fadeStart=u_indicator_cutout_params.w;float distA=distance(vec2(gl_FragCoord.x,gl_FragCoord.y*holeAspectRatio),vec2(u_indicator_cutout_centers[0],u_indicator_cutout_centers[1]*holeAspectRatio));return color*min(smoothstep(fadeStart,holeRadius,distA)+holeMinOpacity,1.0);
#else
return color;
#endif
}
#ifdef DEBUG_WIREFRAME
#define HANDLE_WIREFRAME_DEBUG \\
glFragColor=vec4(0.7,0.0,0.0,0.7); \\
gl_FragDepth=gl_FragCoord.z-0.0001;
#else
#define HANDLE_WIREFRAME_DEBUG
#endif
#ifdef RENDER_CUTOFF
uniform highp vec4 u_cutoff_params;in float v_cutoff_opacity;
#endif
vec4 textureLodCustom(sampler2D image,vec2 pos,vec2 lod_coord) {vec2 size=vec2(textureSize(image,0));vec2 dx=dFdx(lod_coord.xy*size);vec2 dy=dFdy(lod_coord.xy*size);float delta_max_sqr=max(dot(dx,dx),dot(dy,dy));float lod=0.5*log2(delta_max_sqr);return textureLod(image,pos,lod);}`,Ma=`
#define EXTENT 8192.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(PI/4.0+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}
#ifdef RENDER_CUTOFF
uniform vec4 u_cutoff_params;out float v_cutoff_opacity;
#endif
const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}`,$c="in highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;out highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",Wh=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
#ifdef TERRAIN
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(dd,0)).r;float bl=texture(u_dem,pos+vec2(0,dd)).r;float br=texture(u_dem,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem_prev,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem_prev,pos).r;float tr=texture(u_dem_prev,pos+vec2(dd,0)).r;float bl=texture(u_dem_prev,pos+vec2(0,dd)).r;float br=texture(u_dem_prev,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture(u_depth,uv-df.xz)),unpack_depth(texture(u_depth,uv+df.xz)),unpack_depth(texture(u_depth,uv-df.zy)),unpack_depth(texture(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(off.x,0.0)).r;float bl=texture(u_dem,pos+vec2(0.0,off.y)).r;float br=texture(u_dem,pos+off).r;return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,Ql=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;out vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,sm=`highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}
#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump vec2 u_fog_vertical_limit;uniform mediump float u_fog_temporal_offset;in vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos,float opacity_limit) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,min(opacity,opacity_limit));}vec3 fog_apply(vec3 color,vec3 pos) {return fog_apply(color,pos,1.0);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec4 fog_apply_premultiplied(vec4 color,vec3 pos,float heightMeters) {float verticalProgress=(u_fog_vertical_limit.x > 0.0 || u_fog_vertical_limit.y > 0.0) ? smoothstep(u_fog_vertical_limit.x,u_fog_vertical_limit.y,heightMeters) : 0.0;float opacityLimit=1.0-smoothstep(0.9,1.0,fog_opacity(pos));return mix(fog_apply_premultiplied(color,pos),color,min(verticalProgress,opacityLimit));}vec3 fog_dither(vec3 color) {
#ifdef FOG_DITHERING
vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);
#else
return color;
#endif
}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`,Ns=`#ifdef RASTER_ARRAY
uniform sampler2D u_image0;uniform sampler2D u_image1;const vec4 NODATA=vec4(1);ivec4 _raTexLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}vec2 _raTexLinearMix(highp vec2 fxy,highp vec4 colorMix,highp float colorOffset,highp vec4 t00,highp vec4 t10,highp vec4 t01,highp vec4 t11) {vec2 c00=t00==NODATA ? vec2(0) : vec2(colorOffset+dot(t00,colorMix),1);vec2 c10=t10==NODATA ? vec2(0) : vec2(colorOffset+dot(t10,colorMix),1);vec2 c01=t01==NODATA ? vec2(0) : vec2(colorOffset+dot(t01,colorMix),1);vec2 c11=t11==NODATA ? vec2(0) : vec2(colorOffset+dot(t11,colorMix),1);return mix(mix(c01,c11,fxy.x),mix(c00,c10,fxy.x),fxy.y);}vec2 raTexture2D_image0_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image0,c.yz,0),texelFetch(u_image0,c.xz,0),texelFetch(u_image0,c.yw,0),texelFetch(u_image0,c.xw,0)
);}vec2 raTexture2D_image1_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image1,c.yz,0),texelFetch(u_image1,c.xz,0),texelFetch(u_image1,c.yw,0),texelFetch(u_image1,c.xw,0)
);}vec2 raTexture2D_image0_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image0,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}vec2 raTexture2D_image1_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image1,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}
#endif`,ms=`#ifdef RASTER_ARRAY
uniform sampler2D u_velocity;uniform vec2 u_velocity_res;uniform float u_max_speed;const vec2 INVALID_VELOCITY=vec2(-1);uniform vec2 u_texture_offset;uniform float u_data_offset;uniform vec4 u_data_scale;vec2 lookup_velocity(vec2 uv) {uv=u_texture_offset.x+u_texture_offset.y*uv;vec2 fxy;ivec4 c=_raTexLinearCoord(uv,u_velocity_res,fxy);vec4 tl=texelFetch(u_velocity,c.yz,0);vec4 tr=texelFetch(u_velocity,c.xz,0);vec4 bl=texelFetch(u_velocity,c.yw,0);vec4 br=texelFetch(u_velocity,c.xw,0);if (tl==NODATA) {return INVALID_VELOCITY;}if (tr==NODATA) {return INVALID_VELOCITY;}if (bl==NODATA) {return INVALID_VELOCITY;}if (br==NODATA) {return INVALID_VELOCITY;}vec4 t=mix(mix(bl,br,fxy.x),mix(tl,tr,fxy.x),fxy.y);
#ifdef DATA_FORMAT_UINT32
vec2 velocity=vec2(u_data_offset+dot(t,u_data_scale),0);return velocity;
#else
vec2 velocity=vec2(u_data_offset+dot(t.rg,u_data_scale.yx),-(u_data_offset+dot(t.ba,u_data_scale.yx)));
#endif
return velocity/max(u_max_speed,length(velocity));}
#endif`,Zh=`#ifdef RENDER_SHADOWS
uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_normal_offset;vec3 shadow_normal_offset(vec3 normal) {float tileInMeters=u_shadow_normal_offset[0];vec3 n=vec3(-normal.xy,tileInMeters*normal.z);float dotScale=min(1.0-dot(normal,u_shadow_direction),1.0)*0.5+0.5;return n*dotScale;}vec3 shadow_normal_offset_model(vec3 normal) {float dotScale=min(1.0-dot(normal,u_shadow_direction),1.0)*0.5+0.5;return normal*dotScale;}float shadow_normal_offset_multiplier0() {return u_shadow_normal_offset[1];}float shadow_normal_offset_multiplier1() {return u_shadow_normal_offset[2];}
#endif//RENDER_SHADOWS`,Hu=`#ifdef RENDER_SHADOWS
#ifdef DEPTH_TEXTURE
uniform highp sampler2D u_shadowmap_0;uniform highp sampler2D u_shadowmap_1;
#else
uniform sampler2D u_shadowmap_0;uniform sampler2D u_shadowmap_1;
#endif
uniform float u_shadow_intensity;uniform float u_shadow_map_resolution;uniform float u_shadow_texel_size;uniform highp vec3 u_shadow_normal_offset;uniform vec2 u_fade_range;uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_bias;highp float shadow_sample_1(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_1,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_1,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}highp float shadow_sample_0(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_0,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_0,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}float shadow_occlusion_1(highp vec4 pos,highp float bias) {highp vec2 uv=pos.xy;return shadow_sample_1(uv,pos.z-bias);}float shadow_occlusion_0(highp vec4 pos,highp float bias) {highp float compare0=pos.z-bias;
#ifdef NATIVE
highp vec2 uv=pos.xy;highp vec4 samples=textureGather(u_shadowmap_0,uv,0);lowp vec4 stepSamples=step(samples,vec4(compare0));
#else
highp vec2 uv00=pos.xy-vec2(0.5*u_shadow_texel_size);highp vec2 uv10=uv00+vec2(u_shadow_texel_size,0.0);highp vec2 uv01=uv00+vec2(0.0,u_shadow_texel_size);highp vec2 uv11=uv01+vec2(u_shadow_texel_size,0.0);lowp vec4 stepSamples=vec4(
shadow_sample_0(uv01,compare0),shadow_sample_0(uv11,compare0),shadow_sample_0(uv10,compare0),shadow_sample_0(uv00,compare0)
);
#endif
vec2 f=fract(pos.xy*u_shadow_map_resolution-vec2(0.5));lowp vec2 lerpx=mix(stepSamples.wx,stepSamples.zy,f.xx);return mix(lerpx.x,lerpx.y,f.y);}float shadow_occlusion(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,highp float bias) {
#ifdef SHADOWS_SINGLE_CASCADE
light_view_pos0.xyz=light_view_pos0.xyz/light_view_pos0.w*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);
#else
light_view_pos0.xyz/=light_view_pos0.w;light_view_pos1.xyz/=light_view_pos1.w;vec4 uv=vec4(light_view_pos0.xy,light_view_pos1.xy);vec4 abs_bounds=abs(uv);if (abs_bounds.x < 1.0 && abs_bounds.y < 1.0) {light_view_pos0.xyz=light_view_pos0.xyz*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);}if (abs_bounds.z >=1.0 || abs_bounds.w >=1.0) {return 0.0;}light_view_pos1.xyz=light_view_pos1.xyz*0.5+0.5;float occlusion1=shadow_occlusion_1(light_view_pos1,bias);return mix(occlusion1,0.0,smoothstep(u_fade_range.x,u_fade_range.y,view_depth));
#endif
}highp float calculate_shadow_bias(float NDotL) {
#ifdef NORMAL_OFFSET
return 0.5*u_shadow_bias.x;
#else
return 0.5*(u_shadow_bias.x+clamp(u_shadow_bias.y*tan(acos(NDotL)),0.0,u_shadow_bias.z));
#endif
}float shadowed_light_factor_normal(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_unbiased(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadow_occlusion(float ndotl,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=calculate_shadow_bias(ndotl);return shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);}
#endif`;const Wu=[];Cl(jc,Wu),Cl(Ma,Wu),Cl(Hh,Wu);const ea={"_prelude_fog.vertex.glsl":Ql,"_prelude_terrain.vertex.glsl":Wh,"_prelude_shadow.vertex.glsl":Zh,"_prelude_fog.fragment.glsl":sm,"_prelude_shadow.fragment.glsl":Hu,"_prelude_lighting.glsl":`
#ifdef LIGHTING_3D_MODE
uniform mediump vec3 u_lighting_ambient_color;uniform mediump vec3 u_lighting_directional_dir;uniform mediump vec3 u_lighting_directional_color;uniform mediump vec3 u_ground_radiance;float calculate_ambient_directional_factor(vec3 normal) {float NdotL=dot(normal,u_lighting_directional_dir);const float factor_reduction_max=0.3;float dir_luminance=dot(u_lighting_directional_color,vec3(0.2126,0.7152,0.0722));float directional_factor_min=1.0-factor_reduction_max*min(dir_luminance,1.0);float ambient_directional_factor=mix(directional_factor_min,1.0,min((NdotL+1.0),1.0));const float vertical_factor_min=0.92;float vertical_factor=mix(vertical_factor_min,1.0,normal.z*0.5+0.5);return vertical_factor*ambient_directional_factor;}vec3 linearProduct(vec3 srgbIn,vec3 k) {return srgbIn*pow(k,vec3(1./2.2));}vec3 apply_lighting(vec3 color,vec3 normal,float dir_factor) {float ambient_directional_factor=calculate_ambient_directional_factor(normal);vec3 ambient_contrib=ambient_directional_factor*u_lighting_ambient_color;vec3 directional_contrib=u_lighting_directional_color*dir_factor;return linearProduct(color,ambient_contrib+directional_contrib);}vec4 apply_lighting(vec4 color,vec3 normal,float dir_factor) {return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting(vec3 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return apply_lighting(color.rgb,normal,dir_factor);}vec4 apply_lighting(vec4 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting_ground(vec3 color) {return color*u_ground_radiance;}vec4 apply_lighting_ground(vec4 color) {return vec4(apply_lighting_ground(color.rgb),color.a);}float calculate_NdotL(vec3 normal) {const float ext=0.70710678118;return (clamp(dot(normal,u_lighting_directional_dir),-ext,1.0)+ext)/(1.0+ext);}vec4 apply_lighting_with_emission_ground(vec4 color,float emissive_strength) {return mix(apply_lighting_ground(color),color,emissive_strength);}vec3 compute_flood_lighting(vec3 flood_light_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=flood_light_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);float occlusion_ramp=smoothstep(0.0,0.2,1.0-occlusion);return mix(fully_occluded_color,flood_light_color,occlusion_ramp);}vec3 compute_emissive_draped(vec3 unlit_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=unlit_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);return mix(fully_occluded_color,unlit_color,1.0-occlusion);}
#endif//LIGHTING_3D_MODE`,"_prelude_raster_array.glsl":Ns,"_prelude_raster_particle.glsl":ms},eu={};an("",Wh),an(sm,Ql),an(Hu,Zh),an(Ns,""),an(ms,"");const qh=an(Hh,Ma),Uc=jc;var Kh={background:an(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
in vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_lighting.glsl"
in vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform mediump vec4 u_color;out vec4 v_color;uniform float u_emissive_strength;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting_with_emission_ground(u_color,u_emissive_strength);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:an(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform float u_emissive_strength;uniform sampler2D u_image;in vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=textureLodCustom(u_image,pos,v_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:an(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
uniform float u_emissive_strength;void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
glFragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:an("void main() {glFragColor=vec4(1.0);}","in vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:an(`#include "_prelude_fog.fragment.glsl"
uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);glFragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {glFragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:an(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));glFragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(0.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,"in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:an("in float v_placed;in float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);glFragColor =mix(red,blue,step(0.5,v_placed))*0.5;glFragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`#include "_prelude_terrain.vertex.glsl"
in vec3 a_pos;in vec2 a_anchor_pos;in vec2 a_extrude;in vec2 a_placed;in vec2 a_shift;in float a_size_scale;in vec2 a_padding;in float a_z_offset;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;out float v_placed;out float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*(a_z_offset+elevation(a_anchor_pos)),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:an("in float v_radius;in vec2 v_extrude;in float v_perspective_ratio;in float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);glFragColor=color*alpha*opacity_t;}",`in vec2 a_pos_2f;in float a_radius;in vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;out float v_radius;out vec2 v_extrude;out float v_perspective_ratio;out float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:an("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);glFragColor=mix(u_color,overlay_color,overlay_color.a);}",`#include "_prelude_terrain.vertex.glsl"
in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;
#endif
out vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:an(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
uniform float u_emissive_strength;void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
in vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:an(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
in highp vec2 v_pos;uniform float u_emissive_strength;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
in vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;out highp vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:an(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_emissive_strength;in highp vec2 v_pos;in highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;out highp vec2 v_pos;out highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:an(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;in vec2 v_pos;uniform float u_emissive_strength;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:an(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec4 v_color;in vec4 v_flat;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;
#endif
uniform lowp float u_opacity;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec2 v_ao;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
in vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
in highp vec3 v_normal;
#endif
uniform vec3 u_flood_light_color;uniform highp float u_vertical_scale;uniform float u_flood_light_intensity;uniform vec3 u_ground_shadow_factor;
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
in float v_flood_radius;in float v_has_floodlight;
#endif
uniform float u_emissive_strength;in float v_height;void main() {
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
vec3 normal=normalize(v_normal);
#endif
float z;vec4 color=v_color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);
#ifdef LIGHTING_3D_MODE
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#else
color=mix(v_color,v_roof_color,z);
#endif
#endif
float h=max(0.0,v_height);float ao_shade=1.0;
#ifdef FAUX_AO
float intensity=u_ao[0];float h_floors=h/(u_ao[1]*u_vertical_scale);float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);ao_shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);ao_shade*=mix(1.0,x_shade*x_shade*x_shade,concave);
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
color.rgb*=mix(ao_shade,1.0,v_has_floodlight);
#else
color.rgb*=ao_shade;
#endif
#else
color.rgb*=ao_shade;
#endif
#endif
#ifdef LIGHTING_3D_MODE
float flood_radiance=0.0;
#ifdef FLOOD_LIGHT
flood_radiance=(1.0-min(h/v_flood_radius,1.0))*u_flood_light_intensity*v_has_floodlight;
#endif
#ifdef RENDER_SHADOWS
#ifdef FLOOD_LIGHT
float ndotl_unclamped=dot(normal,u_shadow_direction);float ndotl=max(0.0,ndotl_unclamped);float occlusion=ndotl_unclamped < 0.0 ? 1.0 : shadow_occlusion(ndotl,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 litColor=apply_lighting(color.rgb,normal,(1.0-u_shadow_intensity*occlusion)*ndotl);vec3 floodLitColor=compute_flood_lighting(u_flood_light_color*u_opacity,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=mix(litColor,floodLitColor,flood_radiance);
#else
float shadowed_lighting_factor=shadowed_light_factor_normal(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);color.rgb=apply_lighting(color.rgb,normal,shadowed_lighting_factor);
#endif
#else
color.rgb=apply_lighting(color.rgb,normal);
#ifdef FLOOD_LIGHT
color.rgb=mix(color.rgb,u_flood_light_color*u_opacity,flood_radiance);
#endif
#endif
color.rgb=mix(color.rgb,v_flat.rgb,u_emissive_strength);color*=u_opacity;
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos,h));
#endif
#ifdef INDICATOR_CUTOUT
color=applyCutout(color);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
uniform highp float u_vertical_scale;out vec4 v_color;out vec4 v_flat;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
out vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
out highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec2 v_ao;
#endif
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
out float v_flood_radius;out float v_has_floodlight;
#endif
out float v_height;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
#pragma mapbox: define highp float flood_light_wall_radius
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize highp float flood_light_wall_radius
base*=u_vertical_scale;height*=u_vertical_scale;vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
v_normal=normal;
#endif
base=max(0.0,base);float attr_height=height;height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele=0.0;vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float cutoff=1.0;vec3 scaled_pos=pos;
#ifdef RENDER_CUTOFF
vec3 centroid_random=vec3(centroid_pos.xy,centroid_pos.x+centroid_pos.y+1.0);vec3 ground_pos=centroid_pos.x==0.0 ? pos.xyz : (centroid_random/8.0);vec4 ground=u_matrix*vec4(ground_pos.xy,ele,1.0);cutoff=max(0.01,cutoff_opacity(u_cutoff_params,ground.z));if (centroid_pos.y !=0.0 && centroid_pos.x !=0.0) {vec3 g=floor(ground_pos);vec3 mod_=centroid_random-g*8.0;float seed=min(1.0,0.1*(min(3.5,max(mod_.x+mod_.y,0.2*attr_height))*0.35+mod_.z));if (cutoff < 0.8-seed) {cutoff=0.0;}}float cutoff_scale=cutoff;scaled_pos.z=mix(c_ele,h,cutoff_scale);
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (cutoff < 0.01 && centroid_pos.x !=0.0));gl_Position=mix(u_matrix*vec4(scaled_pos,1),AWAY,hidden);h=h-ele;v_height=h;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=pos;vec3 shd_pos1=pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(normal);shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifndef LIGHTING_3D_MODE
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);if (normal.y !=0.0) {float r=0.84;r=mix(0.7,0.98,1.0-u_lightintensity);NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#endif
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec2(mix(concave,-concave,start),y_ground);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
float is_wall=1.0-float(t > 0.0 && top_up_ny.y > 0.0);v_has_floodlight=float(flood_light_wall_radius > 0.0 && is_wall > 0.0);v_flood_radius=flood_light_wall_radius*u_vertical_scale;
#endif
v_color=vec4(color.rgb,1.0);v_flat=vec4(linearProduct(color.rgb,vec3(calculate_NdotL(normal))),1.0);
#else
v_color=vec4(0.0,0.0,0.0,1.0);v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color=vec4(0.0,0.0,0.0,1.0);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionDepth:an(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_edge_radius;uniform float u_vertical_scale;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
out highp float v_depth;void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
base*=u_vertical_scale;height*=u_vertical_scale;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;float ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base);pos=vec3(pos_nx.xy,h);
#else
pos=vec3(pos_nx.xy,t > 0.0 ? height : base);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);v_depth=gl_Position.z/gl_Position.w;}`),fillExtrusionPattern:an(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
in vec3 v_normal;
#endif
in vec2 v_pos;in vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define highp float pixel_ratio
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize highp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,normalize(v_normal))*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
out vec2 v_pos;out vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
out vec3 v_normal;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define highp float pixel_ratio
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize highp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_normal=normal;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),groundShadow:an(`#include "_prelude_shadow.fragment.glsl"
precision highp float;uniform vec3 u_ground_shadow_factor;in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#ifdef FOG
in float v_fog_opacity;
#endif
void main() {float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 shadow=mix(u_ground_shadow_factor,vec3(1.0),light);
#ifdef RENDER_CUTOFF
shadow=mix(vec3(1.0),shadow,cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w));
#endif
#ifdef FOG
shadow=mix(shadow,vec3(1.0),v_fog_opacity);
#endif
#ifdef INDICATOR_CUTOUT
shadow=mix(shadow,vec3(1.0),1.0-applyCutout(vec4(1.0)).r);
#endif
glFragColor=vec4(shadow,1.0);}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;in vec2 a_pos;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;
#ifdef FOG
out float v_fog_opacity;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0.0,1.0);v_pos_light_view_0=u_light_matrix_0*vec4(a_pos,0.0,1.0);v_pos_light_view_1=u_light_matrix_1*vec4(a_pos,0.0,1.0);
#ifdef FOG
v_fog_pos=fog_position(a_pos);v_fog_opacity=fog(v_fog_pos);
#endif
}`),fillExtrusionGroundEffect:an(`uniform highp float u_ao_pass;uniform highp float u_opacity;uniform highp float u_flood_light_intensity;uniform highp vec3 u_flood_light_color;uniform highp float u_attenuation;uniform sampler2D u_fb;uniform float u_fb_size;
#ifdef SDF_SUBPASS
in highp vec2 v_pos;in highp vec4 v_line_segment;in highp float v_flood_light_radius_tile;in highp vec2 v_ao;float line_df(highp vec2 a,highp vec2 b,highp vec2 p) {highp vec2 ba=b-a;highp vec2 pa=p-a;highp float r=clamp(dot(pa,ba)/dot(ba,ba),0.0,1.0);return length(pa-r*ba);}
#ifdef FOG
in highp float v_fog;
#endif
#endif
void main() {
#ifdef CLEAR_SUBPASS
vec4 color=vec4(1.0);
#ifdef CLEAR_FROM_TEXTURE
color=texture(u_fb,gl_FragCoord.xy/vec2(u_fb_size));
#endif
glFragColor=color;
#else
#ifdef SDF_SUBPASS
highp float d=line_df(v_line_segment.xy,v_line_segment.zw,v_pos);highp float effect_radius=mix(v_flood_light_radius_tile,v_ao.y,u_ao_pass);d/=effect_radius;d=min(d,1.0);d=1.0-pow(1.0-d,u_attenuation);highp float effect_intensity=mix(u_flood_light_intensity,v_ao.x,u_ao_pass);highp float fog=1.0;
#ifdef FOG
fog=v_fog;
#endif
#ifdef RENDER_CUTOFF
fog*=v_cutoff_opacity;
#endif
glFragColor=vec4(vec3(0.0),mix(1.0,d,effect_intensity*u_opacity*fog));
#else
vec4 color=mix(vec4(u_flood_light_color,1.0),vec4(vec3(0.0),1.0),u_ao_pass);
#ifdef OVERDRAW_INSPECTOR
color=vec4(1.0);
#endif
glFragColor=color;
#endif
HANDLE_WIREFRAME_DEBUG;
#endif
}`,`#include "_prelude_fog.vertex.glsl"
in highp vec4 a_pos_end;in highp float a_angular_offset_factor;in highp float a_hidden_by_landmark;
#ifdef SDF_SUBPASS
out highp vec2 v_pos;out highp vec4 v_line_segment;out highp float v_flood_light_radius_tile;out highp vec2 v_ao;
#ifdef FOG
out highp float v_fog;
#endif
#endif
uniform highp float u_flood_light_intensity;uniform highp mat4 u_matrix;uniform highp float u_ao_pass;uniform highp float u_meter_to_tile;uniform highp float u_edge_radius;uniform highp vec2 u_ao;
#pragma mapbox: define highp float flood_light_ground_radius
const float TANGENT_CUTOFF=4.0;const float NORM=32767.0;void main() {
#pragma mapbox: initialize highp float flood_light_ground_radius
vec2 p=a_pos_end.xy;vec2 q=floor(a_pos_end.zw*0.5);vec2 start_bottom=a_pos_end.zw-q*2.0;float fl_ground_radius=flood_light_ground_radius;fl_ground_radius=abs(flood_light_ground_radius);float direction=flood_light_ground_radius < 0.0 ?-1.0 : 1.0;float flood_radius_tile=fl_ground_radius*u_meter_to_tile;vec2 v=normalize(q-p);float ao_radius=u_ao.y/3.5;float effect_radius=mix(flood_radius_tile,ao_radius,u_ao_pass)+u_edge_radius;float angular_offset_factor=a_angular_offset_factor/NORM*TANGENT_CUTOFF;float angular_offset=direction*angular_offset_factor*effect_radius;float top=1.0-start_bottom.y;float side=(0.5-start_bottom.x)*2.0;vec2 extrusion_parallel=v*side*mix(1.0,angular_offset,top);vec2 perp=vec2(v.y,-v.x);vec2 extrusion_perp=direction*perp*effect_radius*top;vec3 pos=vec3(mix(q,p,start_bottom.x),0.0);pos.xy+=extrusion_parallel+extrusion_perp;
#ifdef SDF_SUBPASS
v_pos=pos.xy;v_line_segment=vec4(p,q)+perp.xyxy*u_edge_radius;v_flood_light_radius_tile=flood_radius_tile;v_ao=vec2(u_ao.x,ao_radius);
#ifdef FOG
v_fog_pos=fog_position(pos);v_fog=1.0-fog(v_fog_pos);
#endif
#endif
float hidden_by_landmark=0.0;
#ifdef HAS_CENTROID
hidden_by_landmark=a_hidden_by_landmark;
#endif
float isFloodlit=float(fl_ground_radius > 0.0 && u_flood_light_intensity > 0.0);float hidden=mix(1.0-isFloodlit,isFloodlit,u_ao_pass);hidden+=hidden_by_landmark;gl_Position=mix(u_matrix*vec4(pos,1.0),AWAY,float(hidden > 0.0));
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
}`),hillshadePrepare:an(`precision highp float;uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;float getElevation(vec2 coord) {return texture(u_image,coord).r/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));glFragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:an(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;uniform float u_emissive_strength;void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);glFragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
glFragColor=apply_lighting_with_emission_ground(glFragColor,u_emissive_strength);
#endif
#ifdef FOG
glFragColor=fog_dither(fog_apply_premultiplied(glFragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:an(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;in vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}uniform float u_emissive_strength;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture(u_dash_image,v_tex).r;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trimmed=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}
#endif
if (u_alpha_discard_threshold !=0.0) {if (alpha < u_alpha_discard_threshold) {discard;}}
#ifdef RENDER_LINE_BORDER
float edgeBlur=(border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);if (border_color.a==0.0) {    
float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}} else {out_color.rgb=mix(border_color.rgb*border_color.a*trimmed,out_color.rgb,smoothAlpha);}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
out_color*=(alpha*opacity);
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#define EXTRUDE_SCALE 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
in highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
in float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;out vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:an(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform highp vec2 u_trim_offset;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec4 v_uv;
#endif
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float pattern_x=v_linesofar/pattern_size.x*aspect;float x=mod(pattern_x,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec2 lod_pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(pattern_x,y));vec4 color=textureLodCustom(u_image,pos,lod_pos);
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {color=vec4(0,0,0,0);}}
#endif
#ifdef LIGHTING_3D_MODE
color=apply_lighting_ground(color);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=(alpha*opacity);
#ifdef INDICATOR_CUTOUT
color=applyCutout(color);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec4 a_packed;
#endif
in float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
out highp vec4 v_uv;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
float a_uv_x=a_packed[0];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:an(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_raster_array.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;uniform highp float u_zoom_transition;in vec2 v_pos0;in vec2 v_pos1;in float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
in float v_split_fade;
#endif
uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;uniform float u_emissive_strength;
#ifndef RASTER_ARRAY
uniform sampler2D u_image0;uniform sampler2D u_image1;
#endif
#ifdef RASTER_COLOR
uniform sampler2D u_color_ramp;uniform highp vec4 u_colorization_mix;uniform highp float u_colorization_offset;uniform vec2 u_texture_res;
#endif
void main() {vec4 color0,color1,color;vec2 value;
#ifdef RASTER_COLOR
#ifdef RASTER_ARRAY
#ifdef RASTER_ARRAY_LINEAR
value=mix(
raTexture2D_image0_linear(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_linear(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#else
value=mix(
raTexture2D_image0_nearest(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_nearest(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#endif
if (value.y > 0.0) value.x/=value.y;
#else
color=mix(texture(u_image0,v_pos0),texture(u_image1,v_pos1),u_fade_t);value=vec2(u_colorization_offset+dot(color.rgb,u_colorization_mix.rgb),color.a);
#endif
color=texture(u_color_ramp,vec2(value.x,0.5));if (color.a > 0.0) color.rgb/=color.a;color.a*=value.y;
#else
color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);
#endif
color.a*=u_opacity;
#ifdef GLOBE_POLES
color.a*=1.0-smoothstep(0.0,0.05,u_zoom_transition);
#endif
vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),u_emissive_strength).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef PROJECTION_GLOBE_VIEW
glFragColor*=mix(1.0,1.0-smoothstep(0.0,0.05,u_zoom_transition),smoothstep(0.8,0.9,v_split_fade));
#endif
#ifdef RENDER_CUTOFF
glFragColor=glFragColor*cutoff_opacity(u_cutoff_params,v_depth);
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;uniform vec2 u_texture_offset;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;in vec2 a_texture_pos;
#endif
out vec2 v_pos0;out vec2 v_pos1;out float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
out float v_split_fade;
#endif
void main() {vec2 uv;
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;gl_Position=u_matrix*u_globe_matrix*vec4(globe_pos   ,1.0);uv=a_uv;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(a_globe_pos,1.0)).xyz);
#endif
#else
float w=1.0+dot(a_texture_pos,u_perspective_transform);uv=a_texture_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);    
v_split_fade=0.0;if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;float opposite_merc_center=mod(u_merc_center.x+0.5,1.0);float dist_from_poles=(abs(mercatorY-0.5)*2.0);float range=0.1;v_split_fade=abs(opposite_merc_center-mercatorX);v_split_fade=clamp(1.0-v_split_fade,0.0,1.0);v_split_fade=max(smoothstep(1.0-range,1.0,dist_from_poles),max(smoothstep(1.0-range,1.0,v_split_fade),smoothstep(1.0-range,1.0,1.0-v_split_fade)));}float tiles=u_grid_matrix[0][2];if (tiles > 0.0) {float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvY=mercatorY*tiles-idy;float uvX=mercatorX*tiles-idx;uv=vec2(uvX,uvY);}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;v_pos0=u_texture_offset.x+u_texture_offset.y*v_pos0;v_pos1=u_texture_offset.x+u_texture_offset.y*v_pos1;
#ifdef RENDER_CUTOFF
v_depth=gl_Position.z;
#endif
}`),rasterParticle:an(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;in vec2 v_pos0;in vec2 v_pos1;uniform sampler2D u_image0;uniform sampler2D u_image1;void main() {vec4 color0,color1,color;color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 out_color=color.rgb;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),0.0).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {float w=1.0;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvX=mercatorX*tiles-idx;float uvY=mercatorY*tiles-idy;vec2 uv=vec2(uvX,uvY);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
vec2 uv=a_texture_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),rasterParticleDraw:an("precision highp float;uniform sampler2D u_color_ramp;in float v_particle_speed;void main() {glFragColor=texture(u_color_ramp,vec2(v_particle_speed,0.5));}",`precision highp float;
#include "_prelude_raster_array.glsl"
#include "_prelude_raster_particle.glsl"
in vec3 a_pos;uniform vec2 u_tile_offset;out float v_particle_speed;void main() {vec2 pos=a_pos.xy+u_tile_offset;vec2 tex_coords=fract(pos);gl_PointSize=1.0;vec2 velocity=lookup_velocity(tex_coords);if (velocity==INVALID_VELOCITY) {v_particle_speed=0.0;gl_Position=vec4(2.0,2.0,2.0,1.0);} else {v_particle_speed=length(velocity);gl_Position=vec4(2.0*pos-vec2(1.0),0.0,1.0);}}`),rasterParticleTexture:an("uniform sampler2D u_texture;uniform float u_opacity;in vec2 v_tex_pos;void main() {vec4 color=texture(u_texture,v_tex_pos);glFragColor=vec4(floor(255.0*color*u_opacity)/255.0);}","in vec2 a_pos;out vec2 v_tex_pos;void main() {v_tex_pos=0.5*a_pos+vec2(0.5);gl_Position=vec4(a_pos,0.0,1.0);}"),rasterParticleUpdate:an("void main() {}",`#include "_prelude_raster_array.glsl"
#include "_prelude_raster_particle.glsl"
in vec3 a_pos;uniform float u_speed_factor;uniform float u_lifetime_delta;uniform float u_rand_seed;out vec3 v_new_particle;const vec3 rand_constants=vec3(12.9898,78.233,4375.85453);float rand(const vec2 co) {float t=dot(rand_constants.xy,co);return fract(sin(t)*(rand_constants.z+t));}void main() {float lifetime=a_pos.z;vec2 pos=a_pos.xy;vec2 uv=clamp(pos,vec2(0.0),vec2(1.0));vec2 velocity=lookup_velocity(uv);float next_lifetime=lifetime-u_lifetime_delta;float t=step(0.0,next_lifetime);
#ifdef DATA_FORMAT_UINT32
vec2 dp=vec2(0);
#else
vec2 dp=velocity==INVALID_VELOCITY ? vec2(0) : velocity*u_speed_factor;
#endif
vec2 seed=pos*u_rand_seed;vec2 next_pos=pos+dp;vec2 random_pos=vec2(rand(seed+1.3),rand(seed+2.1));v_new_particle=vec3(
vec2(mix(random_pos,next_pos,t)),mix(1.0,next_lifetime,t)
);}`),symbolIcon:an(`#include "_prelude_lighting.glsl"
uniform sampler2D u_texture;
#ifdef ICON_TRANSITION
uniform float u_icon_transition;
#endif
in float v_fade_opacity;in vec2 v_tex_a;
#ifdef ICON_TRANSITION
in vec2 v_tex_b;
#endif
uniform mediump float u_icon_saturation;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float emissive_strength
lowp float alpha=opacity*v_fade_opacity;vec4 out_color;
#ifdef ICON_TRANSITION
vec4 a=texture(u_texture,v_tex_a)*(1.0-u_icon_transition);vec4 b=texture(u_texture,v_tex_b)*u_icon_transition;out_color=(a+b)*alpha;
#else
out_color=texture(u_texture,v_tex_a)*alpha;
#endif
#ifdef SATURATION
vec3 luma=vec3(dot(out_color.rgb,vec3(0.2126,0.7152,0.0722)));out_color.rgb=mix(luma,out_color.rgb,u_icon_saturation);
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,emissive_strength);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
in vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_pixeloffset;in vec4 a_projected_pos;in float a_fade_opacity;
#ifdef Z_OFFSET
in float a_z_offset;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_globe_anchor;in vec3 a_globe_normal;
#endif
#ifdef ICON_TRANSITION
in vec2 a_texb;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
out vec2 v_tex_a;
#ifdef ICON_TRANSITION
out vec2 v_tex_b;
#endif
out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float emissive_strength
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=elevation(tile_anchor);
#ifdef Z_OFFSET
e+=a_z_offset;
#endif
vec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float out_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,hidden);
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,hidden);
#endif
v_tex_a=a_tex/u_texsize;
#ifdef ICON_TRANSITION
v_tex_b=a_texb/u_texsize;
#endif
v_fade_opacity=out_fade_opacity;}`),symbolSDF:an(`#include "_prelude_lighting.glsl"
#define SDF_PX 8.0
uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;uniform bool u_is_halo;in float v_draw_halo;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;bool draw_halo=v_draw_halo > 0.0;if (draw_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).r;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);vec4 out_color=color*(alpha*opacity*fade_opacity);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,emissive_strength);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
in vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_pixeloffset;in vec4 a_projected_pos;in float a_fade_opacity;
#ifdef Z_OFFSET
in float a_z_offset;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_globe_anchor;in vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform bool u_is_halo;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
out float v_draw_halo;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=elevation(tile_anchor);
#ifdef Z_OFFSET
e+=a_z_offset;
#endif
vec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float out_fade_opacity=interpolated_fade_opacity*projection_transition_fade;float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,hidden);
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,hidden);
#endif
float gamma_scale=gl_Position.w;v_draw_halo=(u_is_halo && float(gl_InstanceID)==0.0) ? 1.0 : 0.0;v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,out_fade_opacity);}`),symbolTextAndIcon:an(`#include "_prelude_lighting.glsl"
#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_halo;in float v_draw_halo;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;glFragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;bool draw_halo=v_draw_halo > 0.0;if (draw_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).r;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);vec4 out_color=color*(alpha*opacity*fade_opacity);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,emissive_strength);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
in vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_projected_pos;in float a_fade_opacity;
#ifdef Z_OFFSET
in float a_z_offset;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_globe_anchor;in vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;uniform bool u_is_halo;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
out float v_draw_halo;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=elevation(tile_anchor);
#ifdef Z_OFFSET
e+=a_z_offset;
#endif
vec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
float out_fade_opacity=interpolated_fade_opacity*projection_transition_fade;float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,hidden);
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,hidden);
#endif
float gamma_scale=gl_Position.w;v_draw_halo=(u_is_halo && float(gl_InstanceID)==0.0) ? 1.0 : 0.0;v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,out_fade_opacity,is_sdf);}`),terrainRaster:an(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;in vec2 v_pos0;
#ifdef FOG
in float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#endif
uniform vec3 u_ground_shadow_factor;void main() {vec4 image_color=texture(u_image0,v_pos0);vec4 color;
#ifdef LIGHTING_3D_MODE
const vec3 normal=vec3(0.0,0.0,1.0);
#ifdef RENDER_SHADOWS
float cutoffOpacity=1.0;
#ifdef RENDER_CUTOFF
cutoffOpacity=cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w);
#endif
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
vec3 unlit_base=image_color.rgb*(1.0-image_color.a);vec3 emissive_base=image_color.rgb*image_color.a;float ndotl=u_shadow_direction.z;float occlusion=ndotl < 0.0 ? 1.0 : shadow_occlusion(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,0.0);ndotl=max(0.0,ndotl);vec3 lit=apply_lighting(unlit_base,normal,mix(1.0,(1.0-(u_shadow_intensity*occlusion))*ndotl,cutoffOpacity));vec3 emissive=compute_emissive_draped(emissive_base,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=lit+emissive;color.a=1.0;
#else
float lighting_factor=shadowed_light_factor_normal_unbiased(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);color=apply_lighting(image_color,normal,mix(1.0,lighting_factor,cutoffOpacity));
#endif
#else
float lighting_factor=u_lighting_directional_dir.z;color=apply_lighting(image_color,normal,lighting_factor);
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color.rgb=mix(color.rgb,image_color.rgb,image_color.a);color.a=1.0;
#endif
#endif
#else
color=image_color;
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_skirt_height;in vec2 a_pos;out vec2 v_pos0;
#ifdef FOG
out float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;out float v_depth;
#endif
void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);
#endif
}`),terrainDepth:an("precision highp float;in float v_depth;void main() {glFragColor=pack_depth(v_depth);}",`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;out float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}`),skybox:an(`#include "_prelude_fog.fragment.glsl"
in lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=texture(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);glFragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,$c),skyboxGradient:an(`#include "_prelude_fog.fragment.glsl"
in highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,$c),skyboxCapture:an(`
in highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;precision highp float;
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;glFragColor=vec4(color,1.0);}`,"in highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;out highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:an(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;uniform float u_far_z_cutoff;in vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
raster=apply_lighting_with_emission_ground(raster,raster.a);color=vec4(raster.rgb*antialias,antialias);
#else
raster=apply_lighting_ground(raster);color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color=apply_lighting_with_emission_ground(color,color.a);color.a=1.0;
#else
color=apply_lighting_ground(color);
#endif
#endif
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=1.0-step(u_far_z_cutoff,1.0/gl_FragCoord.w);glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;
#endif
out vec2 v_pos0;void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:an(`#include "_prelude_fog.fragment.glsl"
uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec4 u_color;uniform vec4 u_high_color;uniform vec4 u_space_color;uniform float u_horizon_angle;in highp vec3 v_ray_dir;in highp vec3 v_horizon_dir;void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {
#ifdef ALPHA_PASS
glFragColor=vec4(0,0,0,0);return;
#else
#ifdef NATIVE
glFragColor=vec4(1,1,1,1);
#else
glFragColor=vec4(0,0,0,1);
#endif
return;
#endif
}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(clamp(dot(dir,horizon_dir),-1.0,1.0)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;highp float closest_point_to_center=length(closest_point-u_globe_pos);highp float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;
#ifdef ALPHA_PASS
float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);glFragColor=vec4(1.0,1.0,1.0,a);
#else
vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c=c2;
#ifndef NATIVE
c=dither(c,gl_FragCoord.xy+u_temporal_offset);
#endif
glFragColor=vec4(c*t,t);
#endif
}`,`in vec3 a_pos;in vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;out highp vec3 v_ray_dir;out highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`),model:an(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_opacity;uniform vec3 u_lightcolor;uniform vec3 u_lightpos;uniform float u_lightintensity;uniform vec4 u_baseColorFactor;uniform vec4 u_emissiveFactor;uniform float u_metallicFactor;uniform float u_roughnessFactor;uniform float u_emissive_strength;in highp vec4 v_position_height;in lowp vec4 v_color_mix;
#ifdef RENDER_SHADOWS
in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;in float v_depth_shadows;
#endif
#ifdef OCCLUSION_TEXTURE_TRANSFORM
uniform vec4 u_occlusionTextureTransform;
#endif
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#ifdef HAS_ATTRIBUTE_a_pbr
in lowp vec4 v_roughness_metallic_emissive_alpha;in mediump vec4 v_height_based_emission_params;
#endif
#ifdef HAS_TEXTURE_u_baseColorTexture
uniform sampler2D u_baseColorTexture;uniform bool u_baseTextureIsAlpha;uniform bool u_alphaMask;uniform float u_alphaCutoff;
#endif
#ifdef HAS_TEXTURE_u_metallicRoughnessTexture
uniform sampler2D u_metallicRoughnessTexture;
#endif
#ifdef HAS_TEXTURE_u_occlusionTexture
uniform sampler2D u_occlusionTexture;uniform float u_aoIntensity;
#endif
#ifdef HAS_TEXTURE_u_normalTexture
uniform sampler2D u_normalTexture;
#endif
#ifdef HAS_TEXTURE_u_emissionTexture
uniform sampler2D u_emissionTexture;
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
in highp float v_depth;uniform sampler2D u_depthTexture;uniform vec2 u_inv_depth_size;bool isOccluded() {vec2 coord=gl_FragCoord.xy*u_inv_depth_size;highp float depth=unpack_depth(texture(u_depthTexture,coord));return v_depth > depth+0.0005;}
#endif
#define saturate(_x) clamp(_x,0.,1.)
vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}float calculate_NdotL(vec3 normal,vec3 lightDir) {const float ext=0.70710678118;return (clamp(dot(normal,lightDir),-ext,1.0)+ext)/(1.0+ext);}vec3 getDiffuseShadedColor(vec3 albedo,vec3 normal,vec3 lightDir,vec3 lightColor)
{
#ifdef LIGHTING_3D_MODE
vec3 transformed_normal=vec3(-normal.xy,normal.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=saturate(dot(transformed_normal,u_lighting_directional_dir));
#endif
return apply_lighting(albedo,transformed_normal,lighting_factor);
#else
vec3 n=normal;float colorvalue=((albedo.x*0.2126)+(albedo.y*0.7152))+(albedo.z*0.0722);vec3 c=vec3(0.03,0.03,0.03);float directional=clamp(dot(n,vec3(lightDir)),0.0,1.0);directional=mix(1.0-u_lightintensity,max((1.0-colorvalue)+u_lightintensity,1.0),directional);vec3 c3=c+clamp((albedo*directional)*lightColor,mix(vec3(0.0),vec3(0.3),vec3(1.0)-lightColor),vec3(1.0));return c3;
#endif
}vec4 getBaseColor() {vec4 albedo=u_baseColorFactor;
#ifdef HAS_ATTRIBUTE_a_color_3f
albedo*=vec4(color_3f,1.0);
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#else
#ifdef HAS_ATTRIBUTE_a_color_4f
albedo*=color_4f;
#endif
#endif
#if defined (HAS_TEXTURE_u_baseColorTexture) && defined (HAS_ATTRIBUTE_a_uv_2f)
vec4 texColor=texture(u_baseColorTexture,uv_2f);if(u_alphaMask) {if (texColor.w < u_alphaCutoff) {discard;}}
#ifdef UNPREMULT_TEXTURE_IN_SHADER
if(texColor.w > 0.0) {texColor.rgb/=texColor.w;}texColor.w=1.0;
#endif
if(u_baseTextureIsAlpha) {if (texColor.r < 0.5) {discard;}} else {texColor.rgb=sRGBToLinear(texColor.rgb);albedo*=texColor;}
#endif
return vec4(mix(albedo.rgb,v_color_mix.rgb,v_color_mix.a),albedo.a);}highp mat3 cotangentFrame(highp vec3 N,highp vec3 p,highp vec2 uv ) {
#ifdef HAS_TEXTURE_u_normalTexture
highp vec3 dp1=vec3(dFdx(p.x),dFdx(p.y),dFdx(p.z));highp vec3 dp2=vec3(dFdy(p.x),dFdy(p.y),dFdy(p.z));highp vec2 duv1=vec2(dFdx(uv.x),dFdx(uv.y));highp vec2 duv2=vec2(dFdy(uv.x),dFdy(uv.y));highp vec3 dp2perp=cross( dp2,N );highp vec3 dp1perp=cross( N,dp1 );highp vec3 T=dp2perp*duv1.x+dp1perp*duv2.x;highp vec3 B=dp2perp*duv1.y+dp1perp*duv2.y;highp float lengthT=dot(T,T);highp float lengthB=dot(B,B);highp float maxLength=max(lengthT,lengthB);highp float invmax=inversesqrt( maxLength );highp mat3 res=mat3( T*invmax,B*invmax,N );return res;
#else
return mat3(1.0);
#endif
}highp vec3 getNormal(){highp vec3 n;
#ifdef HAS_ATTRIBUTE_a_normal_3f
n=normalize(normal_3f);
#else
highp vec3 fdx=vec3(dFdx(v_position_height.x),dFdx(v_position_height.y),dFdx(v_position_height.z));highp vec3 fdy=vec3(dFdy(v_position_height.x),dFdy(v_position_height.y),dFdy(v_position_height.z));n=normalize(cross(fdx,fdy))*-1.0;
#endif
#if defined(HAS_TEXTURE_u_normalTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
vec3 nMap=texture( u_normalTexture,uv_2f).xyz;nMap=normalize(2.0*nMap-vec3(1.0));highp vec3 v=normalize(-v_position_height.xyz);highp mat3 TBN=cotangentFrame(n,v,uv_2f);n=normalize(TBN*nMap);
#endif
return n;}struct Material {float perceptualRoughness;float alphaRoughness;float metallic;vec3 f90;vec4 baseColor;vec3 diffuseColor;vec3 specularColor;highp vec3 normal;};Material getPBRMaterial() {Material mat;mat.baseColor=getBaseColor();mat.perceptualRoughness=u_roughnessFactor;mat.metallic=u_metallicFactor;
#ifdef HAS_ATTRIBUTE_a_pbr
mat.perceptualRoughness=v_roughness_metallic_emissive_alpha.x;mat.metallic=v_roughness_metallic_emissive_alpha.y;mat.baseColor.w*=v_roughness_metallic_emissive_alpha.w;
#endif
#if defined(HAS_TEXTURE_u_metallicRoughnessTexture) && defined(HAS_ATTRIBUTE_a_uv_2f) 
vec4 mrSample=texture(u_metallicRoughnessTexture,uv_2f);mat.perceptualRoughness*=mrSample.g;mat.metallic*=mrSample.b;
#endif
const float c_minRoughness=0.04;mat.perceptualRoughness=clamp(mat.perceptualRoughness,c_minRoughness,1.0);mat.metallic=saturate(mat.metallic);mat.alphaRoughness=mat.perceptualRoughness*mat.perceptualRoughness;const vec3 f0=vec3(0.04);mat.diffuseColor=mat.baseColor.rgb*(vec3(1.0)-f0);mat.diffuseColor*=1.0-mat.metallic;mat.specularColor=mix(f0,mat.baseColor.rgb,mat.metallic);highp float reflectance=max(max(mat.specularColor.r,mat.specularColor.g),mat.specularColor.b);highp float reflectance90=saturate(reflectance*25.0);mat.f90=vec3(reflectance90);mat.normal=getNormal();return mat;}float V_GGX(float NdotL,float NdotV,float roughness)
{float a2=roughness*roughness;float GGXV=NdotL*sqrt(NdotV*NdotV*(1.0-a2)+a2);float GGXL=NdotV*sqrt(NdotL*NdotL*(1.0-a2)+a2);return 0.5/(GGXV+GGXL);}float V_GGXFast(float NdotL,float NdotV,float roughness) {float a=roughness;float GGXV=NdotL*(NdotV*(1.0-a)+a);float GGXL=NdotV*(NdotL*(1.0-a)+a);return 0.5/(GGXV+GGXL);}vec3 F_Schlick(vec3 specularColor,vec3 f90,float VdotH)
{return specularColor+(f90-specularColor)*pow(clamp(1.0-VdotH,0.0,1.0),5.0);}vec3 F_SchlickFast(vec3 specularColor,float VdotH)
{float x=1.0-VdotH;float x4=x*x*x*x;return specularColor+(1.0-specularColor)*x4*x;}float D_GGX(highp float NdotH,float alphaRoughness)
{highp float a4=alphaRoughness*alphaRoughness;highp float f=(NdotH*a4-NdotH)*NdotH+1.0;return a4/(PI*f*f);}vec3 diffuseBurley(Material mat,float LdotH,float NdotL,float NdotV)
{float f90=2.0*LdotH*LdotH*mat.alphaRoughness-0.5;return (mat.diffuseColor/PI)*(1.0+f90*pow((1.0-NdotL),5.0))*(1.0+f90*pow((1.0-NdotV),5.0));}vec3 diffuseLambertian(Material mat)
{
#ifdef LIGHTING_3D_MODE
return mat.diffuseColor;
#else
return mat.diffuseColor/PI;
#endif
}vec3 EnvBRDFApprox(vec3 specularColor,float roughness,highp float NdotV)
{vec4 c0=vec4(-1,-0.0275,-0.572,0.022);vec4 c1=vec4(1,0.0425,1.04,-0.04);highp vec4 r=roughness*c0+c1;highp float a004=min(r.x*r.x,exp2(-9.28*NdotV))*r.x+r.y;vec2 AB=vec2(-1.04,1.04)*a004+r.zw;return specularColor*AB.x+AB.y;}vec3 computeIndirectLightContribution(Material mat,float NdotV,vec3 normal)
{vec3 env_light=vec3(0.65,0.65,0.65);
#ifdef LIGHTING_3D_MODE
float ambient_factor=calculate_ambient_directional_factor(normal);env_light=u_lighting_ambient_color*ambient_factor;
#endif
vec3 envBRDF=EnvBRDFApprox(mat.specularColor,mat.perceptualRoughness,NdotV);vec3 indirectSpecular= envBRDF*env_light;vec3 indirectDiffuse=mat.diffuseColor*env_light;return indirectSpecular+indirectDiffuse;}vec3 computeLightContribution(Material mat,vec3 lightPosition,vec3 lightColor)
{highp vec3 n=mat.normal;highp vec3 v=normalize(-v_position_height.xyz);highp vec3 l=normalize(lightPosition);highp vec3 h=normalize(v+l);float NdotV=clamp(abs(dot(n,v)),0.001,1.0);float NdotL=saturate(dot(n,l));highp float NdotH=saturate(dot(n,h));float VdotH=saturate(dot(v,h));vec3 f=F_SchlickFast(mat.specularColor,VdotH);float g=V_GGXFast(NdotL,NdotV,mat.alphaRoughness);float d=D_GGX(NdotH,mat.alphaRoughness);vec3 diffuseTerm=(1.0-f)*diffuseLambertian(mat);vec3 specularTerm=f*g*d;vec3 transformed_normal=vec3(-n.xy,n.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=NdotL;
#endif
vec3 directLightColor=(specularTerm+diffuseTerm)*lighting_factor*lightColor;vec3 indirectLightColor=computeIndirectLightContribution(mat,NdotV,transformed_normal);vec3 color=(saturate(directLightColor)+indirectLightColor);float intensityFactor=1.0;
#if !defined(LIGHTING_3D_MODE)
const vec3 luminosityFactor=vec3(0.2126,0.7152,0.0722);float luminance=dot(diffuseTerm,luminosityFactor);intensityFactor=mix((1.0-u_lightintensity),max((1.0-luminance+u_lightintensity),1.0),NdotL);
#endif
color*=intensityFactor;return color;}void main() {
#ifdef TERRAIN_FRAGMENT_OCCLUSION
if (isOccluded()) {discard;}
#endif
vec3 lightDir=u_lightpos;vec3 lightColor=u_lightcolor;
#ifdef LIGHTING_3D_MODE
lightDir=u_lighting_directional_dir;lightDir.xy=-lightDir.xy;lightColor=u_lighting_directional_color;
#endif
vec4 finalColor;
#ifdef DIFFUSE_SHADED
vec3 N=getNormal();vec3 baseColor=getBaseColor().rgb;vec3 diffuse=getDiffuseShadedColor(baseColor,N,lightDir,lightColor);
#ifdef HAS_TEXTURE_u_occlusionTexture
float ao=(texture(u_occlusionTexture,uv_2f).r-1.0)*u_aoIntensity+1.0;diffuse*=ao;
#endif
finalColor=vec4(mix(diffuse,baseColor,u_emissive_strength),1.0)*u_opacity;
#else
Material mat=getPBRMaterial();vec3 color=computeLightContribution(mat,lightDir,lightColor);float ao=1.0;
#if defined (HAS_TEXTURE_u_occlusionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
#ifdef OCCLUSION_TEXTURE_TRANSFORM
vec2 uv=uv_2f.xy*u_occlusionTextureTransform.zw+u_occlusionTextureTransform.xy;
#else
vec2 uv=uv_2f;
#endif
ao=(texture(u_occlusionTexture,uv).x-1.0)*u_aoIntensity+1.0;color*=ao;
#endif
vec4 emissive=u_emissiveFactor;
#if defined(HAS_TEXTURE_u_emissionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
emissive.rgb*=sRGBToLinear(texture(u_emissionTexture,uv_2f).rgb);
#endif
color+=emissive.rgb;float opacity=mat.baseColor.w*u_opacity;
#ifdef HAS_ATTRIBUTE_a_pbr
float resEmission=v_roughness_metallic_emissive_alpha.z;resEmission*=v_height_based_emission_params.z+v_height_based_emission_params.w*pow(clamp(v_height_based_emission_params.x,0.0,1.0),v_height_based_emission_params.y);color=mix(color,v_color_mix.rgb,min(1.0,resEmission));
#ifdef HAS_ATTRIBUTE_a_color_4f
float distance=length(vec2(1.3*max(0.0,abs(color_4f.x)-color_4f.z),color_4f.y));distance+= mix(0.5,0.0,clamp(resEmission-1.0,0.0,1.0));opacity*=v_roughness_metallic_emissive_alpha.w*saturate(1.0-distance*distance);
#endif
#endif
vec3 unlitColor=mat.baseColor.rgb*ao+emissive.rgb;color=mix(color,unlitColor,u_emissive_strength);color=linearTosRGB(color);color*=opacity;finalColor=vec4(color,opacity);
#endif
#ifdef FOG
finalColor=fog_dither(fog_apply_premultiplied(finalColor,v_fog_pos,v_position_height.w));
#endif
#ifdef RENDER_CUTOFF
finalColor*=v_cutoff_opacity;
#endif
#ifdef INDICATOR_CUTOUT
finalColor=applyCutout(finalColor);
#endif
glFragColor=finalColor;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec3 a_pos_3f;
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute-vertex-shader-only highp vec4 pbr
#pragma mapbox: define-attribute-vertex-shader-only highp vec3 heightBasedEmissiveStrength
uniform mat4 u_matrix;uniform mat4 u_lighting_matrix;uniform vec3 u_camera_pos;uniform vec4 u_color_mix;
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_normal_matrix;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;out float v_depth_shadows;
#endif
out vec4 v_position_height;out lowp vec4 v_color_mix;
#ifdef TERRAIN_FRAGMENT_OCCLUSION
out highp float v_depth;
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
out lowp vec4 v_roughness_metallic_emissive_alpha;out mediump vec4 v_height_based_emission_params;
#endif
vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}void main() {
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute-custom highp vec4 pbr
#pragma mapbox: initialize-attribute-custom highp vec3 heightBasedEmissiveStrength
highp mat4 normal_matrix;
#ifdef INSTANCED_ARRAYS
normal_matrix=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
normal_matrix=u_normal_matrix;
#endif
vec3 local_pos;mat3 rs;
#ifdef MODEL_POSITION_ON_GPU
vec3 pos_color=normal_matrix[0].xyz;vec4 translate=normal_matrix[1];vec3 pos_a=floor(pos_color);vec3 rgb=1.05*(pos_color-pos_a);float color_mix=pos_a.z/100.0;v_color_mix=vec4(sRGBToLinear(rgb),color_mix);float meter_to_tile=normal_matrix[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);rs[0].x=normal_matrix[1].w;rs[0].yz=normal_matrix[2].xy;rs[1].xy=normal_matrix[2].zw;rs[1].z=normal_matrix[3].x;rs[2].xyz=normal_matrix[3].yzw;vec4 pos_node=u_lighting_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;local_pos=pos.xyz;gl_Position=u_matrix*pos;pos.z*=meter_to_tile;v_position_height.xyz=pos.xyz-u_camera_pos;
#else
local_pos=a_pos_3f;gl_Position=u_matrix*vec4(a_pos_3f,1);v_position_height.xyz=vec3(u_lighting_matrix*vec4(a_pos_3f,1));v_color_mix=vec4(sRGBToLinear(u_color_mix.rgb),u_color_mix.a);
#endif
v_position_height.w=a_pos_3f.z;
#ifdef HAS_ATTRIBUTE_a_pbr
vec4 albedo_c=decode_color(pbr.xy);vec2 e_r_m=unpack_float(pbr.z);vec2 r_m= unpack_float(e_r_m.y*16.0);r_m.r=r_m.r*16.0;v_color_mix=vec4(albedo_c.rgb,1.0);v_roughness_metallic_emissive_alpha=vec4(vec3(r_m,e_r_m.x)/255.0,albedo_c.a);v_roughness_metallic_emissive_alpha.z*=2.0;float heightBasedRelativeIntepolation=a_pos_3f.z*heightBasedEmissiveStrength.x+heightBasedEmissiveStrength.y;v_height_based_emission_params.x=heightBasedRelativeIntepolation;v_height_based_emission_params.y=heightBasedEmissiveStrength.z;vec2 emissionMultiplierValues=unpack_float(pbr.w)/256.0;v_height_based_emission_params.z=emissionMultiplierValues.x;v_height_based_emission_params.w=emissionMultiplierValues.y-emissionMultiplierValues.x;
#endif
#ifdef FOG
v_fog_pos=fog_position(local_pos);
#endif
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
float x_squared_scale=dot(rs[0],rs[0]);float y_squared_scale=dot(rs[1],rs[1]);float z_squared_scale=dot(rs[2],rs[2]);vec3 squared_scale=vec3(x_squared_scale,y_squared_scale,z_squared_scale);normal_3f=rs*((u_lighting_matrix*vec4(normal_3f,0.0)).xyz/squared_scale);normal_3f=normalize(normal_3f);
#else
normal_3f=vec3(normal_matrix*vec4(normal_3f,0));
#endif
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#ifdef HAS_ATTRIBUTE_a_color_4f
v_roughness_metallic_emissive_alpha.w=clamp(color_4f.a*v_roughness_metallic_emissive_alpha.w*(v_roughness_metallic_emissive_alpha.z-1.0),0.0,1.0);
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 shadow_pos=local_pos;
#ifdef NORMAL_OFFSET
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
vec3 offset=shadow_normal_offset(vec3(-normal_3f.xy,normal_3f.z));shadow_pos+=offset*shadow_normal_offset_multiplier0();
#else
vec3 offset=shadow_normal_offset_model(normalize(normal_3f));shadow_pos+=offset*shadow_normal_offset_multiplier0();
#endif
#endif
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shadow_pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(shadow_pos,1);v_depth_shadows=gl_Position.w;
#endif
}`),modelDepth:an(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`in vec3 a_pos_3f;uniform mat4 u_matrix;out highp float v_depth;
#ifdef MODEL_POSITION_ON_GPU
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_instance;
#endif
uniform highp mat4 u_node_matrix;
#endif
void main() {
#ifdef MODEL_POSITION_ON_GPU
highp mat4 instance;
#ifdef INSTANCED_ARRAYS
instance=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
instance=u_instance;
#endif
vec3 pos_color=instance[0].xyz;vec4 translate=instance[1];vec3 pos_a=floor(pos_color);float meter_to_tile=instance[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);mat3 rs;rs[0].x=instance[1].w;rs[0].yz=instance[2].xy;rs[1].xy=instance[2].zw;rs[1].z=instance[3].x;rs[2].xyz=instance[3].yzw;vec4 pos_node=u_node_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;gl_Position=u_matrix*pos;
#else
gl_Position=u_matrix*vec4(a_pos_3f,1);
#endif
v_depth=gl_Position.z/gl_Position.w;}`),stars:an(`in highp vec2 v_uv;in mediump float v_intensity;float shapeCircle(in vec2 uv)
{float beginFade=0.6;float lengthFromCenter=length(v_uv);return 1.0-clamp((lengthFromCenter-beginFade)/(1.0-beginFade),0.0,1.0);}void main() {float alpha=shapeCircle(v_uv);vec3 color=vec3(1.0,1.0,1.0);alpha*=v_intensity;glFragColor=vec4(color*alpha,alpha);HANDLE_WIREFRAME_DEBUG;}`,`
in vec3 a_pos_3f;in vec2 a_uv;in float a_size_scale;in float a_fade_opacity;uniform mat4 u_matrix;uniform vec3 u_up;uniform vec3 u_right;uniform float u_intensity_multiplier;out highp vec2 v_uv;out mediump float v_intensity;void main() {v_uv=a_uv;v_intensity=a_fade_opacity*u_intensity_multiplier;vec3 pos=a_pos_3f;pos+=a_uv.x*u_right*a_size_scale;pos+=a_uv.y*u_up*a_size_scale;gl_Position=u_matrix*vec4(pos,1.0);}`)};function Cl(g,l){const h=g.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let _ of h)if(_=_.trim(),_[0]==="#"&&_.includes("if")&&!_.includes("endif")){_=_.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const B=_.split(" ");for(const C of B)l.includes(C)||l.push(C)}}function an(g,l){const h=/#include\s+"([^"]+)"/g,_=/#pragma mapbox: ([\w\-]+) ([\w]+) ([\w]+) ([\w]+)/g;let B=l.match(/(attribute(\S*)|(^\s*|;)in) (highp |mediump |lowp )?([\w]+) ([\w]+)/gm);B&&(B=B.map(F=>{const j=F.split(" ");return j[j.length-1]}),B=[...new Set(B)]);const C={},E=[],M=[];if(g=g.replace(h,(F,j)=>(M.push(j),"")),(l=l.replace(h,(F,j)=>(E.push(j),""))).includes("flat out"))return void console.error('The usage of "flat" qualifier is disallowed, see: https://bugs.webkit.org/show_bug.cgi?id=268071');let k=[...Wu];Cl(g,k),Cl(l,k);for(const F of[...E,...M])ea[F]||console.error(`Undefined include: ${F}`),eu[F]||(eu[F]=[],Cl(ea[F],eu[F])),k=[...k,...eu[F]];return{fragmentSource:g=g.replace(_,(F,j,V,Y,te)=>(C[te]=!0,j==="define"?`
#ifndef HAS_UNIFORM_u_${te}
in ${V} ${Y} ${te};
#else
uniform ${V} ${Y} u_${te};
#endif
`:j==="initialize"?`
#ifdef HAS_UNIFORM_u_${te}
    ${V} ${Y} ${te} = u_${te};
#endif
`:j==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${te}
    in ${V} ${Y} ${te};
#endif
`:j==="initialize-attribute"?"":void 0)),vertexSource:l=l.replace(_,(F,j,V,Y,te)=>{const le=Y==="float"?"vec2":Y,ae=te.match(/color/)?"color":le;return j==="define-attribute-vertex-shader-only"?`
#ifdef HAS_ATTRIBUTE_a_${te}
in ${V} ${Y} a_${te};
#endif
`:C[te]?j==="define"?`
#ifndef HAS_UNIFORM_u_${te}
uniform lowp float u_${te}_t;
in ${V} ${le} a_${te};
out ${V} ${Y} ${te};
#else
uniform ${V} ${Y} u_${te};
#endif
`:j==="initialize"?ae==="vec4"?`
#ifndef HAS_UNIFORM_u_${te}
    ${te} = a_${te};
#else
    ${V} ${Y} ${te} = u_${te};
#endif
`:`
#ifndef HAS_UNIFORM_u_${te}
    ${te} = unpack_mix_${ae}(a_${te}, u_${te}_t);
#else
    ${V} ${Y} ${te} = u_${te};
#endif
`:j==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${te}
    in ${V} ${Y} a_${te};
    out ${V} ${Y} ${te};
#endif
`:j==="initialize-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${te}
    ${te} = a_${te};
#endif
`:void 0:j==="define"?`
#ifndef HAS_UNIFORM_u_${te}
uniform lowp float u_${te}_t;
in ${V} ${le} a_${te};
#else
uniform ${V} ${Y} u_${te};
#endif
`:j==="define-instanced"?ae==="mat4"?`
#ifdef INSTANCED_ARRAYS
in vec4 a_${te}0;
in vec4 a_${te}1;
in vec4 a_${te}2;
in vec4 a_${te}3;
#else
uniform ${V} ${Y} u_${te};
#endif
`:`
#ifdef INSTANCED_ARRAYS
in ${V} ${le} a_${te};
#else
uniform ${V} ${Y} u_${te};
#endif
`:j==="initialize-attribute-custom"?`
#ifdef HAS_ATTRIBUTE_a_${te}
    ${V} ${Y} ${te} = a_${te};
#endif
`:ae==="vec4"?`
#ifndef HAS_UNIFORM_u_${te}
    ${V} ${Y} ${te} = a_${te};
#else
    ${V} ${Y} ${te} = u_${te};
#endif
`:`
#ifndef HAS_UNIFORM_u_${te}
    ${V} ${Y} ${te} = unpack_mix_${ae}(a_${te}, u_${te}_t);
#else
    ${V} ${Y} ${te} = u_${te};
#endif
`}),staticAttributes:B,usedDefines:k,vertexIncludes:E,fragmentIncludes:M}}class Xh{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(l,h,_,B,C,E,M,k){this.context=l;let F=this.boundPaintVertexBuffers.length!==B.length;for(let V=0;!F&&V<B.length;V++)this.boundPaintVertexBuffers[V]!==B[V]&&(F=!0);let j=this.boundDynamicVertexBuffers.length!==M.length;for(let V=0;!j&&V<M.length;V++)this.boundDynamicVertexBuffers[V]!==M[V]&&(j=!0);if(!this.vao||this.boundProgram!==h||this.boundLayoutVertexBuffer!==_||F||j||this.boundIndexBuffer!==C||this.boundVertexOffset!==E)this.freshBind(h,_,B,C,E,M,k);else{l.bindVertexArrayOES.set(this.vao);for(const V of M)V&&(V.bind(),k&&V.instanceCount&&V.setVertexAttribDivisor(l.gl,h,k));C&&C.dynamicDraw&&C.bind()}}freshBind(l,h,_,B,C,E,M){const k=l.numAttributes,F=this.context,j=F.gl;this.vao&&this.destroy(),this.vao=F.gl.createVertexArray(),F.bindVertexArrayOES.set(this.vao),this.boundProgram=l,this.boundLayoutVertexBuffer=h,this.boundPaintVertexBuffers=_,this.boundIndexBuffer=B,this.boundVertexOffset=C,this.boundDynamicVertexBuffers=E,h.enableAttributes(j,l),h.bind(),h.setVertexAttribPointers(j,l,C);for(const V of _)V.enableAttributes(j,l),V.bind(),V.setVertexAttribPointers(j,l,C);for(const V of E)V&&(V.enableAttributes(j,l),V.bind(),V.setVertexAttribPointers(j,l,C),M&&V.instanceCount&&V.setVertexAttribDivisor(j,l,M));B&&B.bind(),F.currentNumAttributes=k}destroy(){this.vao&&(this.context.gl.deleteVertexArray(this.vao),this.vao=null)}}function j_(g,l){const h=Math.pow(2,l.canonical.z),_=l.canonical.y;return[new s.L(0,_/h).toLngLat().lat,new s.L(0,(_+1)/h).toLngLat().lat]}function v(g,l,h,_,B,C,E){const M=g.context,k=M.gl,F=h.hillshadeFBO;if(!F)return;g.prepareDrawTile();const j=g.isTileAffectedByFog(l),V=g.getOrCreateProgram("hillshade",{overrideFog:j});M.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,F.colorAttachment.get());const Y=((ue,ne,he,ye)=>{const de=he.paint.get("hillshade-shadow-color"),ve=he.paint.get("hillshade-highlight-color"),ce=he.paint.get("hillshade-accent-color"),xe=he.paint.get("hillshade-emissive-strength");let Ee=s.bj(he.paint.get("hillshade-illumination-direction"));if(he.paint.get("hillshade-illumination-anchor")==="viewport")Ee-=ue.transform.angle;else if(ue.style&&ue.style.enable3dLights()&&ue.style.directionalLight){const Re=ue.style.directionalLight.properties.get("direction"),Xe=s.bQ(Re.x,Re.y,Re.z);Ee=s.bj(Xe[1])}const Pe=!ue.options.moving;return{u_matrix:ye||ue.transform.calculateProjMatrix(ne.tileID.toUnwrapped(),Pe),u_image:0,u_latrange:j_(0,ne.tileID),u_light:[he.paint.get("hillshade-exaggeration"),Ee],u_shadow:de,u_highlight:ve,u_emissive_strength:xe,u_accent:ce}})(g,h,_,g.terrain?l.projMatrix:null);g.uploadCommonUniforms(M,V,l.toUnwrapped());const{tileBoundsBuffer:te,tileBoundsIndexBuffer:le,tileBoundsSegments:ae}=g.getTileBoundsBuffers(h);V.draw(g,k.TRIANGLES,B,C,E,cr.disabled,Y,_.id,te,le,ae)}function A(g,l,h){if(!l.needsDEMTextureUpload)return;const _=g.context,B=_.gl;_.pixelStoreUnpackPremultiplyAlpha.set(!1),l.demTexture=l.demTexture||g.getTileTexture(h.stride);const C=h.getPixels();l.demTexture?l.demTexture.update(C,{premultiply:!1}):l.demTexture=new s.T(_,C,B.R32F,{premultiply:!1}),l.needsDEMTextureUpload=!1}function R(g,l,h){const _=g.context,B=_.gl;if(!l.dem)return;const C=l.dem;if(_.activeTexture.set(B.TEXTURE1),A(g,l,C),!l.demTexture)return;l.demTexture.bind(B.NEAREST,B.CLAMP_TO_EDGE);const E=C.dim;_.activeTexture.set(B.TEXTURE0);let M=l.hillshadeFBO;if(!M){const Y=new s.T(_,{width:E,height:E,data:null},B.RGBA);Y.bind(B.LINEAR,B.CLAMP_TO_EDGE),M=l.hillshadeFBO=_.createFramebuffer(E,E,!0,"renderbuffer"),M.colorAttachment.set(Y.texture)}_.bindFramebuffer.set(M.framebuffer),_.viewport.set([0,0,E,E]);const{tileBoundsBuffer:k,tileBoundsIndexBuffer:F,tileBoundsSegments:j}=g.getMercatorTileBoundsBuffers(),V=[];g.linearFloatFilteringSupported()&&V.push("TERRAIN_DEM_FLOAT_FORMAT"),g.getOrCreateProgram("hillshadePrepare",{defines:V}).draw(g,B.TRIANGLES,dr.disabled,yr.disabled,Nr.unblended,cr.disabled,((Y,te)=>{const le=te.stride,ae=s.a6.create();return s.a6.ortho(ae,0,s.V,-s.V,0,0,1),s.a6.translate(ae,ae,[0,-s.V,0]),{u_matrix:ae,u_image:1,u_dimension:[le,le],u_zoom:Y.overscaledZ}})(l.tileID,C),h.id,k,F,j),l.needsHillshadePrepare=!1}const W=g=>({u_matrix:new s.bK(g),u_image0:new s.bO(g),u_skirt_height:new s.bN(g),u_ground_shadow_factor:new s.bM(g)}),oe=(g,l,h)=>({u_matrix:g,u_image0:0,u_skirt_height:l,u_ground_shadow_factor:h}),Be=(g,l,h,_,B,C,E,M,k,F,j,V,Y,te,le,ae)=>({u_proj_matrix:Float32Array.from(g),u_globe_matrix:l,u_normalize_matrix:Float32Array.from(_),u_merc_matrix:h,u_zoom_transition:B,u_merc_center:C,u_image0:0,u_frustum_tl:E,u_frustum_tr:M,u_frustum_br:k,u_frustum_bl:F,u_globe_pos:j,u_globe_radius:V,u_viewport:Y,u_grid_matrix:ae?Float32Array.from(ae):new Float32Array(9),u_skirt_height:te,u_far_z_cutoff:le});function $e(g,l){return g!=null&&l!=null&&!(!g.hasData()||!l.hasData())&&g.demTexture!=null&&l.demTexture!=null&&g.tileID.key!==l.tileID.key}const ot=new class{constructor(){this.operations={}}newMorphing(g,l,h,_,B){if(g in this.operations){const C=this.operations[g];C.to.tileID.key!==h.tileID.key&&(C.queued=h)}else this.operations[g]={startTime:_,phase:0,duration:B,from:l,to:h,queued:null}}getMorphValuesForProxy(g){if(!(g in this.operations))return null;const l=this.operations[g];return{from:l.from,to:l.to,phase:l.phase}}update(g){for(const l in this.operations){const h=this.operations[l];for(h.phase=(g-h.startTime)/h.duration;h.phase>=1||!this._validOp(h);)if(!this._nextOp(h,g)){delete this.operations[l];break}}}_nextOp(g,l){return!!g.queued&&(g.from=g.to,g.to=g.queued,g.queued=null,g.phase=0,g.startTime=l,!0)}_validOp(g){return g.from.hasData()&&g.to.hasData()}},_t={0:null,1:"TERRAIN_VERTEX_MORPHING"};function Vt(g,l,h){if(l===0)return 0;const _=l<1&&h===514?.25/l:1;return 6*Math.pow(1.5,22-g)*Math.max(l,1)*_}function mr(g,l){const h=1<<g.z;return!l&&(g.x===0||g.x===h-1)||g.y===0||g.y===h-1}const qr=g=>({u_matrix:g});function Sn(g,l,h,_,B){if(B>0){const C=s.f.now(),E=(C-g.timeAdded)/B,M=l?(C-l.timeAdded)/B:-1,k=h.getSource(),F=_.coveringZoomLevel({tileSize:k.tileSize,roundZoom:k.roundZoom}),j=!l||Math.abs(l.tileID.overscaledZ-F)>Math.abs(g.tileID.overscaledZ-F),V=j&&g.refreshedUponExpiration?1:s.aa(j?E:1-M,0,1);return g.refreshedUponExpiration&&E>=1&&(g.refreshedUponExpiration=!1),l?{opacity:1,mix:1-V}:{opacity:V,mix:0}}return{opacity:1,mix:0}}class $o extends Ka{constructor(l){const h={type:"raster-dem",maxzoom:l.transform.maxZoom},_=new s.bW(s.bX(),null),B=Oi("mock-dem",h,_,l.style);super("mock-dem",B,!1),B.setEventedParent(this),this._sourceLoaded=!0}_loadTile(l,h){l.state="loaded",h(null)}}class fo extends Ka{constructor(l){const h=Oi("proxy",{type:"geojson",maxzoom:l.transform.maxZoom},new s.bW(s.bX(),null),l.style);super("proxy",h,!1),h.setEventedParent(this),this.map=this.getSource().map=l,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(l,h,_){if(l.freezeTileCoverage)return;this.transform=l;const B=l.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((C,E)=>{if(C[E.key]="",!this._tiles[E.key]){const M=new Jo(E,this._source.tileSize*E.overscaleFactor(),l.tileZoom);M.state="loaded",this._tiles[E.key]=M}return C},{});for(const C in this._tiles)C in B||(this.freeFBO(C),this._tiles[C].unloadVectorData(),delete this._tiles[C])}freeFBO(l){const h=this.proxyCachedFBO[l];if(h!==void 0){const _=Object.values(h);this.renderCachePool.push(..._),delete this.proxyCachedFBO[l]}}deallocRenderCache(){this.renderCache.forEach(l=>l.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class ga extends s.am{constructor(l,h,_){super(l.overscaledZ,l.wrap,l.canonical.z,l.canonical.x,l.canonical.y),this.proxyTileKey=h,this.projMatrix=_}}class ta extends s.ck{constructor(l,h){super(),this._debugParams={sortTilesHiZFirst:!0,disableRenderCache:!1},l.tp.registerParameter(this._debugParams,["Terrain"],"sortTilesHiZFirst",{},()=>{this._style.map.triggerRepaint()}),l.tp.registerParameter(this._debugParams,["Terrain"],"disableRenderCache",{},()=>{this._style.map.triggerRepaint()}),l.tp.registerButton(["Terrain"],"Invalidate Render Cache",()=>{this.invalidateRenderCache=!0,this._style.map.triggerRepaint()}),this.painter=l,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[_,B,C]=function(k){const F=new s.aN,j=new s.aw,V=131;F.reserve(17161),j.reserve(33800);const Y=s.V/128,te=s.V+Y/2,le=te+Y;for(let ue=-Y;ue<le;ue+=Y)for(let ne=-Y;ne<le;ne+=Y){const he=ne<0||ne>te||ue<0||ue>te?24575:0,ye=s.aa(Math.round(ne),0,s.V),de=s.aa(Math.round(ue),0,s.V);F.emplaceBack(ye+he,de)}const ae=(ue,ne)=>{const he=ne*V+ue;j.emplaceBack(he+1,he,he+V),j.emplaceBack(he+V,he+V+1,he+1)};for(let ue=1;ue<129;ue++)for(let ne=1;ne<129;ne++)ae(ne,ue);return[0,129].forEach(ue=>{for(let ne=0;ne<130;ne++)ae(ne,ue),ae(ue,ne)}),[F,j,32768]}(),E=l.context;this.gridBuffer=E.createVertexBuffer(_,s.aP.members),this.gridIndexBuffer=E.createIndexBuffer(B),this.gridSegments=s.aB.simpleSegment(0,0,_.length,B.length),this.gridNoSkirtSegments=s.aB.simpleSegment(0,0,_.length,C),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new fo(h.map),this.orthoMatrix=s.a6.create(),s.a6.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,s.V,0,s.V,0,1);const M=E.gl;this._overlapStencilMode=new yr({func:M.GEQUAL,mask:255},0,255,M.KEEP,M.KEEP,M.REPLACE),this._previousZoom=l.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=h,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new $o(h.map),this._pendingGroundEffectLayers=[]}set style(l){l.on("data",this._onStyleDataEvent.bind(this)),this._style=l,this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(l,h,_){if(l&&l.terrain){this._style!==l&&(this.style=l,this._evaluationZoom=void 0);const B=l.terrain.properties,C=l.terrain.drapeRenderMode===0,E=l.terrain.isZoomDependent();this._previousUpdateTimestamp=this.enabled?this._updateTimestamp:void 0,this._updateTimestamp=s.f.now();const M=l.terrain&&l.terrain.scope,k=B.get("source"),F=C?this._mockSourceCache:l.getSourceCache(k,M);if(!F)return void s.w(`Couldn't find terrain source "${k}".`);if(this.sourceCache=F,this._exaggeration=E?this.calculateExaggeration(h):B.get("exaggeration"),!h.projection.requiresDraping&&E&&this._exaggeration===0)return void this._disable();this.enabled=!0;const j=()=>{this.sourceCache.used&&s.w(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const V=this.getScaledDemTileSize();this.sourceCache.update(h,V,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,j(),this._initializing=!0),j(),h.updateElevation(!0,_),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(h),this._emptyDEMTextureDirty=!0,this._previousZoom=h.zoom}else this._disable()}calculateExaggeration(l){const h=this._previousCameraAltitude,_=l.getFreeCameraOptions().position.z/l.pixelsPerMeter*l.worldSize;this._previousCameraAltitude=_;const B=h!=null?_-h:Number.MAX_VALUE;if(Math.abs(B)<2)return this._exaggeration;const C=l.zoom,E=this._style.terrain;if(!this._previousUpdateTimestamp)return E.getExaggeration(C);let M=C-this._previousZoom;const k=this._previousUpdateTimestamp;let F=C;this._evaluationZoom!=null&&(F=this._evaluationZoom,Math.abs(C-F)>.5&&(M=.5*(C-F+M)),M*B<0&&(F+=M)),this._evaluationZoom=F;const j=E.getExaggeration(F),V=j===E.getExaggeration(Math.max(0,F-.1));if(V&&Math.abs(j-this._exaggeration)<.01)return j;let Y=Math.min(.1,.00375*(this._updateTimestamp-k));return(V||j<.1||Math.abs(M)<1e-4)&&(Y=Math.min(.2,4*Y)),s.U(this._exaggeration,j,Y)}resetTileLookupCache(l){this._findCoveringTileCache[l]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_onStyleDataEvent(l){l.coord&&l.dataType==="source"?this._clearRenderCacheForTile(l.sourceCacheId,l.coord):l.dataType==="style"&&(this.invalidateRenderCache=!0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this._previousCameraAltitude=void 0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const l in this._style._mergedSourceCaches)this._style._mergedSourceCaches[l].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(l=>l.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),this.framebufferCopyTexture&&this.framebufferCopyTexture.destroy()}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const l=2*this.proxySourceCache.getSource().tileSize;return[l,l]}set useVertexMorphing(l){this._useVertexMorphing=l}updateTileBinding(l){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const h=this.proxySourceCache,_=this.painter.transform;this._initializing&&(this._initializing=_._centerAltitude===0&&this.getAtPointOrZero(s.L.fromLngLat(_.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const B=this.proxyCoords=h.getIds().map(k=>{const F=h.getTileByID(k).tileID;return F.projMatrix=_.calculateProjMatrix(F.toUnwrapped()),F});(function(k,F){const j=F.transform.pointCoordinate(F.transform.getCameraPoint()),V=new s.P(j.x,j.y);k.sort((Y,te)=>{if(te.overscaledZ-Y.overscaledZ)return te.overscaledZ-Y.overscaledZ;const le=new s.P(Y.canonical.x+(1<<Y.canonical.z)*Y.wrap,Y.canonical.y),ae=new s.P(te.canonical.x+(1<<te.canonical.z)*te.wrap,te.canonical.y),ue=V.mult(1<<Y.canonical.z);return ue.x-=.5,ue.y-=.5,ue.distSqr(le)-ue.distSqr(ae)})})(B,this.painter);const C=this.proxyToSource||{};this.proxyToSource={},B.forEach(k=>{this.proxyToSource[k.key]={}}),this.terrainTileForTile={};const E=this._style._mergedSourceCaches;for(const k in E){const F=E[k];if(!F.used||(F!==this.sourceCache&&this.resetTileLookupCache(F.id),this._setupProxiedCoordsForOrtho(F,l[k],C),F.usedForTerrain))continue;const j=l[k];F.getSource().reparseOverscaled&&this._assignTerrainTiles(j)}this.proxiedCoords[h.id]=B.map(k=>new ga(k,k.key,this.orthoMatrix)),this._assignTerrainTiles(B),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(C),this.renderingToTexture=!1;const M={};this._visibleDemTiles=[];for(const k of this.proxyCoords){const F=this.terrainTileForTile[k.key];if(!F)continue;const j=F.tileID.key;j in M||(this._visibleDemTiles.push(F),M[j]=j)}}_assignTerrainTiles(l){this._initializing||l.forEach(h=>{if(this.terrainTileForTile[h.key])return;const _=this._findTileCoveringTileID(h,this.sourceCache);_&&(this.terrainTileForTile[h.key]=_)})}_prepareDEMTextures(){const l=this.painter.context,h=l.gl;for(const _ in this.terrainTileForTile){const B=this.terrainTileForTile[_],C=B.dem;!C||B.demTexture&&!B.needsDEMTextureUpload||(l.activeTexture.set(h.TEXTURE1),A(this.painter,B,C))}}_prepareDemTileUniforms(l,h,_,B){if(!h||h.demTexture==null)return!1;const C=l.tileID.canonical,E=Math.pow(2,h.tileID.canonical.z-C.z),M=B||"";return _[`u_dem_tl${M}`]=[C.x*E%1,C.y*E%1],_[`u_dem_scale${M}`]=E,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const l=this.painter.context,h=l.gl;if(!this._emptyDepthBufferTexture){const _=new s.h({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new s.T(l,_,h.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let l=0;const h=this._visibleDemTiles.reduce((_,B)=>{if(!B.dem)return _;const C=B.dem.tree.minimums[0];return C>0&&l++,_+C},0);return l?h/l:0}_updateEmptyDEMTexture(){const l=this.painter.context,h=l.gl;l.activeTexture.set(h.TEXTURE2);const _=this._getLoadedAreaMinimum(),[B,C]=(()=>{const M=new s.cm({width:1,height:1},new Float32Array([_]));return[h.R32F,M]})();this._emptyDEMTextureDirty=!1;let E=this._emptyDEMTexture;return E?E.update(C,{premultiply:!1}):E=this._emptyDEMTexture=new s.T(l,C,B,{premultiply:!1}),E}setupElevationDraw(l,h,_){const B=this.painter.context,C=B.gl,E={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0};E.u_exaggeration=this.exaggeration();let M=null,k=null,F=1;if(_&&_.morphing&&this._useVertexMorphing){const Y=_.morphing.srcDemTile,te=_.morphing.dstDemTile;F=_.morphing.phase,Y&&te&&(this._prepareDemTileUniforms(l,Y,E,"_prev")&&(k=Y),this._prepareDemTileUniforms(l,te,E)&&(M=te))}const j=Y=>Y&&Y.demTexture&&this.painter.linearFloatFilteringSupported()?C.LINEAR:C.NEAREST,V=Y=>{E.u_dem_size=Y.size[0]===1?1:Y.size[0]-2};if(k&&M)B.activeTexture.set(C.TEXTURE2),M.demTexture.bind(j(M),C.CLAMP_TO_EDGE),B.activeTexture.set(C.TEXTURE4),k.demTexture.bind(j(k),C.CLAMP_TO_EDGE),M.demTexture&&V(M.demTexture),E.u_dem_lerp=F;else{M=this.terrainTileForTile[l.tileID.key],B.activeTexture.set(C.TEXTURE2);const Y=this._prepareDemTileUniforms(l,M,E)?M.demTexture:this.emptyDEMTexture;Y.bind(j(M),C.CLAMP_TO_EDGE),V(Y)}if(B.activeTexture.set(C.TEXTURE3),_&&_.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(C.NEAREST,C.CLAMP_TO_EDGE),this._depthFBO&&(E.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(C.NEAREST,C.CLAMP_TO_EDGE),E.u_depth_size_inv=[1,1]),_&&_.useMeterToDem&&M){const Y=(1<<M.tileID.canonical.z)*s.bl(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;E.u_meter_to_dem=Y}if(_&&_.labelPlaneMatrixInv&&(E.u_label_plane_matrix_inv=_.labelPlaneMatrixInv),h.setTerrainUniformValues(B,E),this.painter.transform.projection.name==="globe"){const Y=this.globeUniformValues(this.painter.transform,l.tileID.canonical,_&&_.useDenormalizedUpVectorScale);h.setGlobeUniformValues(B,Y)}}globeUniformValues(l,h,_){const B=l.projection;return{u_tile_tl_up:B.upVector(h,0,0),u_tile_tr_up:B.upVector(h,s.V,0),u_tile_br_up:B.upVector(h,s.V,s.V),u_tile_bl_up:B.upVector(h,0,s.V),u_tile_up_scale:_?s.cl(1):B.upVectorScale(h,l.center.lat,l.worldSize).metersToTile}}renderToBackBuffer(l){const h=this.painter,_=this.painter.context;l.length!==0&&(_.bindFramebuffer.set(null),_.viewport.set([0,0,h.width,h.height]),h.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(B,C,E,M,k){if(B.transform.projection.name==="globe")(function(F,j,V,Y,te){const le=F.context,ae=le.gl;let ue,ne;const he=F.transform,ye=s.cd(F,le,he),de=(it,rt)=>{if(ne===rt)return;const Bt=[_t[rt],"PROJECTION_GLOBE_VIEW"];ye&&Bt.push("CUSTOM_ANTIALIASING");const Ve=F.isTileAffectedByFog(it);ue=F.getOrCreateProgram("globeRaster",{defines:Bt,overrideFog:Ve}),ne=rt},ve=F.colorModeForRenderPass(),ce=new dr(ae.LEQUAL,dr.ReadWrite,F.depthRangeFor3D);ot.update(te);const xe=s.ce(he),Ee=[s.a5(he.center.lng),s.ae(he.center.lat)],Pe=F.globeSharedBuffers,Re=[he.width*s.f.devicePixelRatio,he.height*s.f.devicePixelRatio],Xe=Float32Array.from(he.globeMatrix),Fe={useDenormalizedUpVectorScale:!0};{const it=F.transform,rt=Vt(it.zoom,j.exaggeration(),j.sourceCache._source.tileSize);ne=-1;const Bt=ae.TRIANGLES;for(const Ve of Y){const et=V.getTile(Ve),ke=yr.disabled,Ze=j.prevTerrainTileForTile[Ve.key],bt=j.terrainTileForTile[Ve.key];$e(Ze,bt)&&ot.newMorphing(Ve.key,Ze,bt,te,250),le.activeTexture.set(ae.TEXTURE0),et.texture&&et.texture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE);const Pt=ot.getMorphValuesForProxy(Ve.key),At=Pt?1:0;Pt&&s.j(Fe,{morphing:{srcDemTile:Pt.from,dstDemTile:Pt.to,phase:s.cc(Pt.phase)}});const Ft=s.cf(Ve.canonical),tr=s.cg(Ft.getCenter().lat),hr=s.ch(Ve.canonical,Ft,tr,it.worldSize/it._pixelsPerMercatorPixel),ir=s.aT(s.ci(Ve.canonical)),sr=Be(it.expandedFarZProjMatrix,Xe,xe,ir,s.S(it.zoom),Ee,it.frustumCorners.TL,it.frustumCorners.TR,it.frustumCorners.BR,it.frustumCorners.BL,it.globeCenterInViewSpace,it.globeRadius,Re,rt,it._farZ,hr);if(de(Ve,At),ue&&(j.setupElevationDraw(et,ue,Fe),F.uploadCommonUniforms(le,ue,Ve.toUnwrapped()),Pe)){const[Lr,Cr,Pr]=Pe.getGridBuffers(tr,rt!==0);ue.draw(F,Bt,ce,ke,ve,cr.backCCW,sr,"globe_raster",Lr,Cr,Pr)}}}if(Pe&&(F.renderDefaultNorthPole||F.renderDefaultSouthPole)){const it=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];ye&&it.push("CUSTOM_ANTIALIASING"),ue=F.getOrCreateProgram("globeRaster",{defines:it});for(const rt of Y){const{x:Bt,y:Ve,z:et}=rt.canonical,ke=Ve===0,Ze=Ve===(1<<et)-1,[bt,Pt,At,Ft]=Pe.getPoleBuffers(et,!1);if(Ft&&(ke||Ze)){const tr=V.getTile(rt);le.activeTexture.set(ae.TEXTURE0),tr.texture&&tr.texture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE);let hr=s.cj(et,Bt,he);const ir=s.aT(s.ci(rt.canonical)),sr=(Lr,Cr)=>Lr.draw(F,ae.TRIANGLES,ce,yr.disabled,ve,cr.disabled,Be(he.expandedFarZProjMatrix,hr,hr,ir,0,Ee,he.frustumCorners.TL,he.frustumCorners.TR,he.frustumCorners.BR,he.frustumCorners.BL,he.globeCenterInViewSpace,he.globeRadius,Re,0,he._farZ),"globe_pole_raster",Cr,At,Ft);j.setupElevationDraw(tr,ue,Fe),F.uploadCommonUniforms(le,ue,rt.toUnwrapped()),ke&&F.renderDefaultNorthPole&&sr(ue,bt),Ze&&F.renderDefaultSouthPole&&(hr=s.a6.scale(s.a6.create(),hr,[1,-1,1]),sr(ue,Pt))}}}})(B,C,E,M,k);else{const F=B.context,j=F.gl;let V,Y;const te=B.shadowRenderer,le=xl(B,B.longestCutoffRange),ae=ve=>{if(Y===ve)return;const ce=[];ce.push(_t[ve]),le.shouldRenderCutoff&&ce.push("RENDER_CUTOFF"),V=B.getOrCreateProgram("terrainRaster",{defines:ce}),Y=ve},ue=B.colorModeForRenderPass(),ne=new dr(j.LEQUAL,dr.ReadWrite,B.depthRangeFor3D);ot.update(k);const he=B.transform,ye=Vt(he.zoom,C.exaggeration(),C.sourceCache._source.tileSize);let de=[0,0,0];if(te){const ve=B.style.directionalLight,ce=B.style.ambientLight;ve&&ce&&(de=Nc(ve,ce))}{Y=-1;const ve=j.TRIANGLES,[ce,xe]=[C.gridIndexBuffer,C.gridSegments];for(const Ee of M){const Pe=E.getTile(Ee),Re=yr.disabled,Xe=C.prevTerrainTileForTile[Ee.key],Fe=C.terrainTileForTile[Ee.key];$e(Xe,Fe)&&ot.newMorphing(Ee.key,Xe,Fe,k,250),F.activeTexture.set(j.TEXTURE0),Pe.texture&&Pe.texture.bind(j.LINEAR,j.CLAMP_TO_EDGE);const it=ot.getMorphValuesForProxy(Ee.key),rt=it?1:0;let Bt;it&&(Bt={morphing:{srcDemTile:it.from,dstDemTile:it.to,phase:s.cc(it.phase)}});const Ve=oe(Ee.projMatrix,mr(Ee.canonical,he.renderWorldCopies)?ye/10:ye,de);if(ae(rt),!V)continue;C.setupElevationDraw(Pe,V,Bt);const et=Ee.toUnwrapped();te&&te.setupShadows(et,V),B.uploadCommonUniforms(F,V,et,null,le),V.draw(B,ve,ne,Re,ue,cr.backCCW,Ve,"terrain_raster",C.gridBuffer,ce,xe)}}}}(h,this,this.proxySourceCache,l,this._updateTimestamp),this.renderingToTexture=!0,h.gpuTimingDeferredRenderEnd(),l.splice(0,l.length))}renderBatch(l){if(this._drapedRenderBatches.length===0)return l+1;this.renderingToTexture=!0;const h=this.painter,_=this.painter.context,B=this.proxySourceCache,C=this.proxiedCoords[B.id],E=this._drapedRenderBatches.shift(),M=h.style.order,k=[];let F=0;for(const j of C){const V=B.getTileByID(j.proxyTileKey),Y=B.proxyCachedFBO[j.key]?B.proxyCachedFBO[j.key][l]:void 0,te=Y!==void 0?B.renderCache[Y]:this.pool[F++],le=Y!==void 0;if(V.texture=te.tex,le&&!te.dirty){k.push(V.tileID);continue}let ae;_.bindFramebuffer.set(te.fb.framebuffer),this.renderedToTile=!1,te.dirty&&(_.clear({color:s.ax.transparent,stencil:0}),te.dirty=!1);for(let ue=E.start;ue<=E.end;++ue){const ne=h.style._mergedLayers[M[ue]];if(ne.isHidden(h.transform.zoom))continue;const he=h.style.getLayerSourceCache(ne),ye=he?this.proxyToSource[j.key][he.id]:[j];if(!ye)continue;const de=ye;_.viewport.set([0,0,te.fb.width,te.fb.height]),ae!==(he?he.id:null)&&(this._setupStencil(te,ye,ne,he),ae=he?he.id:null),h.renderLayer(h,he,ne,de)}if(this._drapedRenderBatches.length===0)for(const ue of this._pendingGroundEffectLayers){const ne=h.style._mergedLayers[M[ue]];if(ne.isHidden(h.transform.zoom))continue;const he=h.style.getLayerSourceCache(ne),ye=he?this.proxyToSource[j.key][he.id]:[j];if(!ye)continue;const de=ye;_.viewport.set([0,0,te.fb.width,te.fb.height]),ae!==(he?he.id:null)&&(this._setupStencil(te,ye,ne,he),ae=he?he.id:null),h.renderLayer(h,he,ne,de)}this.renderedToTile?(te.dirty=!0,k.push(V.tileID)):le||--F,F===5&&(F=0,this.renderToBackBuffer(k))}return this.renderToBackBuffer(k),this.renderingToTexture=!1,_.bindFramebuffer.set(null),_.viewport.set([0,0,h.width,h.height]),E.end+1}postRender(){}isLayerOrderingCorrect(l){const h=l.order.length;let _=-1,B=h;for(let C=0;C<h;++C)this._style.isLayerDraped(l._mergedLayers[l.order[C]])?_=Math.max(_,C):B=Math.min(B,C);return B>_}getMinElevationBelowMSL(){let l=0;return this._visibleDemTiles.filter(h=>h.dem).forEach(h=>{l=Math.min(l,h.dem.tree.minimums[0])}),l===0?l:(l-30)*this._exaggeration}raycast(l,h,_){if(!this._visibleDemTiles)return null;const B=this._visibleDemTiles.filter(C=>C.dem).map(C=>{const E=C.tileID,M=1<<E.overscaledZ,{x:k,y:F}=E.canonical,j=k/M,V=(k+1)/M,Y=F/M,te=(F+1)/M;return{minx:j,miny:Y,maxx:V,maxy:te,t:C.dem.tree.raycastRoot(j,Y,V,te,l,h,_),tile:C}});B.sort((C,E)=>(C.t!==null?C.t:Number.MAX_VALUE)-(E.t!==null?E.t:Number.MAX_VALUE));for(const C of B){if(C.t==null)return null;const E=C.tile.dem.tree.raycast(C.minx,C.miny,C.maxx,C.maxy,l,h,_);if(E!=null)return E}return null}_createFBO(){const l=this.painter.context,h=l.gl,_=this.drapeBufferSize;l.activeTexture.set(h.TEXTURE0);const B=new s.T(l,{width:_[0],height:_[1],data:null},h.RGBA);B.bind(h.LINEAR,h.CLAMP_TO_EDGE);const C=l.createFramebuffer(_[0],_[1],!0,null);return C.colorAttachment.set(B.texture),C.depthAttachment=new Fo(l,C.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=l.createRenderbuffer(l.gl.DEPTH_STENCIL,_[0],_[1]),this._stencilRef=0,C.depthAttachment.set(this._sharedDepthStencil),l.clear({stencil:0})):C.depthAttachment.set(this._sharedDepthStencil),l.extTextureFilterAnisotropic&&h.texParameterf(h.TEXTURE_2D,l.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,l.extTextureFilterAnisotropicMax),{fb:C,tex:B,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._debugParams.disableRenderCache||this._style.hasLightTransitions())return!0;for(const l in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[l].hasTransition())return!0;return this._style.order.some(l=>{const h=this._style._mergedLayers[l],_=h.isHidden(this.painter.transform.zoom);return h.type==="custom"?!_&&h.shouldRedrape():!_&&h.hasTransition()})}_clearLineLayersFromRenderCache(){let l=!1;for(const _ of this._style.getSources())if(_ instanceof Rt){l=!0;break}if(!l)return;const h={};for(let _=0;_<this._style.order.length;++_){const B=this._style._mergedLayers[this._style.order[_]],C=this._style.getLayerSourceCache(B);if(C&&!h[C.id]&&!B.isHidden(this.painter.transform.zoom)&&B.type==="line"&&B.widthExpression()instanceof s.Z){h[C.id]=!0;for(const E of this.proxyCoords){const M=this.proxyToSource[E.key][C.id];if(M)for(const k of M)this._clearRenderCacheForTile(C.id,k)}}}}_clearRasterLayersFromRenderCache(){let l=!1;for(const _ in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[_]._source instanceof zt){l=!0;break}if(!l)return;const h={};for(let _=0;_<this._style.order.length;++_){const B=this._style._mergedLayers[this._style.order[_]],C=this._style.getLayerSourceCache(B);if(!C||h[C.id]||B.isHidden(this.painter.transform.zoom)||B.type!=="raster")continue;const E=B.paint.get("raster-fade-duration");for(const M of this.proxyCoords){const k=this.proxyToSource[M.key][C.id];if(k)for(const F of k){const j=Sn(C.getTile(F),C.findLoadedParent(F,0),C,this.painter.transform,E);(j.opacity!==1||j.mix!==0)&&this._clearRenderCacheForTile(C.id,F)}}}}_setupDrapedRenderBatches(){const l=this._style.order,h=l.length;if(h===0)return;const _=[];this._pendingGroundEffectLayers=[];let B,C=0,E=this._style._mergedLayers[l[C]];for(;!this._style.isLayerDraped(E)&&E.isHidden(this.painter.transform.zoom)&&++C<h;)E=this._style._mergedLayers[l[C]];for(;C<h;++C){const M=this._style._mergedLayers[l[C]];M.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(M)?B===void 0&&(B=C):(M.type==="fill-extrusion"&&this._pendingGroundEffectLayers.push(C),B!==void 0&&(_.push({start:B,end:C-1}),B=void 0)))}if(B!==void 0&&_.push({start:B,end:C-1}),_.length!==0){const M=_[_.length-1];this._pendingGroundEffectLayers.every(k=>k>M.end)||s.w("fill-extrusion with flood lighting and/or ground ambient occlusion should be moved to be on top of all draped layers.")}this._drapedRenderBatches=_}_setupRenderCache(l){const h=this.proxySourceCache;if(this._shouldDisableRenderCache()||this.invalidateRenderCache){if(this.invalidateRenderCache=!1,h.renderCache.length>h.renderCachePool.length){const E=Object.values(h.proxyCachedFBO);h.proxyCachedFBO={};for(let M=0;M<E.length;++M){const k=Object.values(E[M]);h.renderCachePool.push(...k)}}return}this._clearRasterLayersFromRenderCache();const _=this.proxyCoords,B=this._tilesDirty;for(let E=_.length-1;E>=0;E--){const M=_[E];if(h.getTileByID(M.key),h.proxyCachedFBO[M.key]!==void 0){const k=l[M.key],F=this.proxyToSource[M.key];let j=0;for(const V in F){const Y=F[V],te=k[V];if(!te||te.length!==Y.length||Y.some((le,ae)=>le!==te[ae]||B[V]&&B[V].hasOwnProperty(le.key))){j=-1;break}++j}for(const V in h.proxyCachedFBO[M.key])h.renderCache[h.proxyCachedFBO[M.key][V]].dirty=j<0||j!==Object.values(k).length}}const C=[...this._drapedRenderBatches];C.sort((E,M)=>M.end-M.start-(E.end-E.start));for(const E of C)for(const M of _){if(h.proxyCachedFBO[M.key])continue;let k=h.renderCachePool.pop();k===void 0&&h.renderCache.length<50&&(k=h.renderCache.length,h.renderCache.push(this._createFBO())),k!==void 0&&(h.proxyCachedFBO[M.key]={},h.proxyCachedFBO[M.key][E.start]=k,h.renderCache[k].dirty=!0)}this._tilesDirty={}}_setupStencil(l,h,_,B){if(!B||!this._sourceTilesOverlap[B.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const C=this.painter.context,E=C.gl;if(h.length<=1)return void(this._overlapStencilType=!1);let M;if(_.isTileClipped())M=h.length,this._overlapStencilMode.test={func:E.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(h[0].overscaledZ>h[h.length-1].overscaledZ))return void(this._overlapStencilType=!1);M=1,this._overlapStencilMode.test={func:E.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+M>255&&(C.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=M,this._overlapStencilMode.ref=this._stencilRef,_.isTileClipped()&&this._renderTileClippingMasks(h,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(l){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[l.key]),this._overlapStencilMode):yr.disabled}_renderTileClippingMasks(l,h){const _=this.painter,B=this.painter.context,C=B.gl;_._tileClippingMaskIDs={},B.setColorMode(Nr.disabled),B.setDepthMode(dr.disabled);const E=_.getOrCreateProgram("clippingMask");for(const M of l){const k=_._tileClippingMaskIDs[M.key]=--h;E.draw(_,C.TRIANGLES,dr.disabled,new yr({func:C.ALWAYS,mask:0},k,255,C.KEEP,C.KEEP,C.REPLACE),Nr.disabled,cr.disabled,qr(M.projMatrix),"$clipping",_.tileExtentBuffer,_.quadTriangleIndexBuffer,_.tileExtentSegments)}}pointCoordinate(l){const h=this.painter.transform;if(l.x<0||l.x>h.width||l.y<0||l.y>h.height)return null;const _=[l.x,l.y,1,1];s.a7.transformMat4(_,_,h.pixelMatrixInverse),s.a7.scale(_,_,1/_[3]),_[0]/=h.worldSize,_[1]/=h.worldSize;const B=h._camera.position,C=s.bl(1,h.center.lat),E=[B[0],B[1],B[2]/C,0],M=s.N.subtract([],_.slice(0,3),E);s.N.normalize(M,M);const k=this.raycast(E,M,this._exaggeration);return k!==null&&k?(s.N.scaleAndAdd(E,E,M,k),E[3]=E[2],E[2]*=C,E):null}drawDepth(){const l=this.painter,h=l.context,_=this.proxySourceCache,B=Math.ceil(l.width),C=Math.ceil(l.height);if(!this._depthFBO||this._depthFBO.width===B&&this._depthFBO.height===C||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const E=h.gl,M=h.createFramebuffer(B,C,!0,"renderbuffer");h.activeTexture.set(E.TEXTURE0);const k=new s.T(h,{width:B,height:C,data:null},E.RGBA);k.bind(E.NEAREST,E.CLAMP_TO_EDGE),M.colorAttachment.set(k.texture);const F=h.createRenderbuffer(h.gl.DEPTH_COMPONENT16,B,C);M.depthAttachment.set(F),this._depthFBO=M,this._depthTexture=k}h.bindFramebuffer.set(this._depthFBO.framebuffer),h.viewport.set([0,0,B,C]),function(E,M,k,F){if(E.transform.projection.name==="globe")return;const j=E.context,V=j.gl;j.clear({depth:1});const Y=E.getOrCreateProgram("terrainDepth"),te=new dr(V.LESS,dr.ReadWrite,E.depthRangeFor3D);for(const le of F){const ae=k.getTile(le),ue=oe(le.projMatrix,0,[0,0,0]);M.setupElevationDraw(ae,Y),Y.draw(E,V.TRIANGLES,te,yr.disabled,Nr.unblended,cr.backCCW,ue,"terrain_depth",M.gridBuffer,M.gridIndexBuffer,M.gridNoSkirtSegments)}}(l,this,_,this.proxyCoords)}_setupProxiedCoordsForOrtho(l,h,_){if(l.getSource()instanceof s.ap)return this._setupProxiedCoordsForImageSource(l,h,_);this._findCoveringTileCache[l.id]=this._findCoveringTileCache[l.id]||{};const B=this.proxiedCoords[l.id]=[],C=this.proxyCoords;for(let k=0;k<C.length;k++){const F=C[k],j=this._findTileCoveringTileID(F,l);if(j){const V=this._createProxiedId(F,j,_[F.key]&&_[F.key][l.id]);B.push(V),this.proxyToSource[F.key][l.id]=[V]}}let E=!1;const M=new Set;for(let k=0;k<h.length;k++){const F=l.getTile(h[k]);if(!F||!F.hasData())continue;const j=this._findTileCoveringTileID(F.tileID,this.proxySourceCache);if(j&&j.tileID.canonical.z!==F.tileID.canonical.z){const V=this.proxyToSource[j.tileID.key][l.id],Y=this._createProxiedId(j.tileID,F,_[j.tileID.key]&&_[j.tileID.key][l.id]);V?V.splice(V.length-1,0,Y):this.proxyToSource[j.tileID.key][l.id]=[Y];const te=this.proxyToSource[j.tileID.key][l.id];M.has(te)||M.add(te),B.push(Y),E=!0}}if(this._sourceTilesOverlap[l.id]=E,E&&this._debugParams.sortTilesHiZFirst)for(const k of M)k.sort((F,j)=>j.overscaledZ-F.overscaledZ)}_setupProxiedCoordsForImageSource(l,h,_){if(!l.getSource().loaded())return;const B=this.proxiedCoords[l.id]=[],C=this.proxyCoords,E=l.getSource(),M=E.tileID;if(!M)return;const k=new s.P(M.x,M.y)._div(1<<M.z),F=E.coordinates.map(s.L.fromLngLat).reduce((V,Y)=>(V.min.x=Math.min(V.min.x,Y.x-k.x),V.min.y=Math.min(V.min.y,Y.y-k.y),V.max.x=Math.max(V.max.x,Y.x-k.x),V.max.y=Math.max(V.max.y,Y.y-k.y),V),{min:new s.P(Number.MAX_VALUE,Number.MAX_VALUE),max:new s.P(-Number.MAX_VALUE,-Number.MAX_VALUE)}),j=(V,Y)=>{const te=V.wrap+V.canonical.x/(1<<V.canonical.z),le=V.canonical.y/(1<<V.canonical.z),ae=s.V/(1<<V.canonical.z),ue=Y.wrap+Y.canonical.x/(1<<Y.canonical.z),ne=Y.canonical.y/(1<<Y.canonical.z);return te+ae<ue+F.min.x||te>ue+F.max.x||le+ae<ne+F.min.y||le>ne+F.max.y};for(let V=0;V<C.length;V++){const Y=C[V];for(let te=0;te<h.length;te++){const le=l.getTile(h[te]);if(!le||!le.hasData()||j(Y,le.tileID))continue;const ae=this._createProxiedId(Y,le,_[Y.key]&&_[Y.key][l.id]),ue=this.proxyToSource[Y.key][l.id];ue?ue.push(ae):this.proxyToSource[Y.key][l.id]=[ae],B.push(ae)}}}_createProxiedId(l,h,_){let B=this.orthoMatrix;if(_){const C=_.find(E=>E.key===h.tileID.key);if(C)return C}if(h.tileID.key!==l.key){const C=l.canonical.z-h.tileID.canonical.z;let E,M,k;B=s.a6.create();const F=h.tileID.wrap-l.wrap<<l.overscaledZ;C>0?(E=s.V>>C,M=E*((h.tileID.canonical.x<<C)-l.canonical.x+F),k=E*((h.tileID.canonical.y<<C)-l.canonical.y)):(E=s.V<<-C,M=s.V*(h.tileID.canonical.x-(l.canonical.x+F<<-C)),k=s.V*(h.tileID.canonical.y-(l.canonical.y<<-C))),s.a6.ortho(B,0,E,0,E,0,1),s.a6.translate(B,B,[M,k,0])}return new ga(h.tileID,l.key,B)}_findTileCoveringTileID(l,h){let _=h.getTile(l);if(_&&_.hasData())return _;const B=this._findCoveringTileCache[h.id],C=B[l.key];if(_=C?h.getTileByID(C):null,_&&_.hasData()||C===null)return _;let E=_?_.tileID:l,M=E.overscaledZ;const k=h.getSource().minzoom,F=[];if(!C){const V=h.getSource().maxzoom;if(l.canonical.z>=V){const Y=l.canonical.z-V;h.getSource().reparseOverscaled?(M=Math.max(l.canonical.z+2,h.transform.tileZoom),E=new s.am(M,l.wrap,V,l.canonical.x>>Y,l.canonical.y>>Y)):Y!==0&&(M=V,E=new s.am(M,l.wrap,V,l.canonical.x>>Y,l.canonical.y>>Y))}E.key!==l.key&&(F.push(E.key),_=h.getTile(E))}const j=V=>{F.forEach(Y=>{B[Y]=V}),F.length=0};for(M-=1;M>=k&&(!_||!_.hasData());M--){_&&j(_.tileID.key);const V=E.calculateScaledKey(M);if(_=h.getTileByID(V),_&&_.hasData())break;const Y=B[V];if(Y===null)break;Y===void 0?F.push(V):_=h.getTileByID(Y)}return j(_?_.tileID.key:null),_&&_.hasData()?_:null}findDEMTileFor(l){return this.enabled?this._findTileCoveringTileID(l,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(l,h){let _=this._tilesDirty[l];_||(_=this._tilesDirty[l]={}),_[h.key]=!0}}function wl(g,l,h){const _=function(M,k,F){const j=s.N.dot(k,M),V=s.N.dot(F,[.2126,.7152,.0722]),Y=(le,ae,ue)=>(1-ue)*le+ue*ae,te=Y(1-.3*Math.min(V,1),1,Math.min(j+1,1));return Y(.92,1,Math.asin(s.aa(k[2],-1,1))/Math.PI+.5)*te}(g,[0,0,1],l),B=[0,0,0];s.N.scale(B,h.slice(0,3),_);const C=[0,0,0];s.N.scale(C,l.slice(0,3),g[2]);const E=[0,0,0];return s.N.add(E,B,C),s.bU(E)}const Cd=["fill","fillOutline","fillPattern","line","linePattern","background","backgroundPattern","hillshade","raster"],lm=["stars","fillExtrusion","fillExtrusionGroundEffect","model","symbolSDF","symbolIcon","symbolTextAndIcon"];class wd{static cacheKey(l,h,_,B){let C=`${h}${B?B.cacheKey:""}`;for(const E of _)l.usedDefines.includes(E)&&(C+=`/${E}`);return C}constructor(l,h,_,B,C,E,M){const k=l.gl;this.program=k.createProgram(),this.configuration=B,this.name=h,this.fixedDefines=[...E];const F=B?B.getBinderAttributes():[],j=(_.staticAttributes||[]).concat(F);let V=B?B.defines():[];V=V.concat(E.map(ne=>`#define ${ne}`));const Y=`#version 300 es
`;let te=Y+V.concat("precision mediump float;",Uc,qh.fragmentSource).join(`
`);for(const ne of _.fragmentIncludes)te+=`
${ea[ne]}`;te+=`
${_.fragmentSource}`;let le=Y+V.concat("precision highp float;",Uc,qh.vertexSource).join(`
`);for(const ne of _.vertexIncludes)le+=`
${ea[ne]}`;le+=`
${_.vertexSource}`;const ae=k.createShader(k.FRAGMENT_SHADER);if(k.isContextLost())return void(this.failedToCreate=!0);k.shaderSource(ae,te),k.compileShader(ae),k.attachShader(this.program,ae);const ue=k.createShader(k.VERTEX_SHADER);if(k.isContextLost())this.failedToCreate=!0;else{k.shaderSource(ue,le),k.compileShader(ue),k.attachShader(this.program,ue),this.attributes={},this.numAttributes=j.length;for(let ne=0;ne<this.numAttributes;ne++)if(j[ne]){const he=j[ne].startsWith("a_")?j[ne]:`a_${j[ne]}`;k.bindAttribLocation(this.program,ne,he),this.attributes[he]=ne}M&&M.shaderVaryings.length>0&&k.transformFeedbackVaryings(this.program,M.shaderVaryings,M.bufferMode),k.linkProgram(this.program),k.deleteShader(ue),k.deleteShader(ae),this.fixedUniforms=C(l),this.binderUniforms=B?B.getUniforms(l):[],E.includes("TERRAIN")&&(this.terrainUniforms=(ne=>({u_dem:new s.bO(ne),u_dem_prev:new s.bO(ne),u_dem_tl:new s.bL(ne),u_dem_scale:new s.bN(ne),u_dem_tl_prev:new s.bL(ne),u_dem_scale_prev:new s.bN(ne),u_dem_size:new s.bN(ne),u_dem_lerp:new s.bN(ne),u_exaggeration:new s.bN(ne),u_depth:new s.bO(ne),u_depth_size_inv:new s.bL(ne),u_meter_to_dem:new s.bN(ne),u_label_plane_matrix_inv:new s.bK(ne)}))(l)),E.includes("GLOBE")&&(this.globeUniforms=(ne=>({u_tile_tl_up:new s.bM(ne),u_tile_tr_up:new s.bM(ne),u_tile_br_up:new s.bM(ne),u_tile_bl_up:new s.bM(ne),u_tile_up_scale:new s.bN(ne)}))(l)),E.includes("FOG")&&(this.fogUniforms=(ne=>({u_fog_matrix:new s.bK(ne),u_fog_range:new s.bL(ne),u_fog_color:new s.bP(ne),u_fog_horizon_blend:new s.bN(ne),u_fog_vertical_limit:new s.bL(ne),u_fog_temporal_offset:new s.bN(ne),u_frustum_tl:new s.bM(ne),u_frustum_tr:new s.bM(ne),u_frustum_br:new s.bM(ne),u_frustum_bl:new s.bM(ne),u_globe_pos:new s.bM(ne),u_globe_radius:new s.bN(ne),u_globe_transition:new s.bN(ne),u_is_globe:new s.bO(ne),u_viewport:new s.bL(ne)}))(l)),E.includes("RENDER_CUTOFF")&&(this.cutoffUniforms=(ne=>({u_cutoff_params:new s.bP(ne)}))(l)),E.includes("LIGHTING_3D_MODE")&&(this.lightsUniforms=(ne=>({u_lighting_ambient_color:new s.bM(ne),u_lighting_directional_dir:new s.bM(ne),u_lighting_directional_color:new s.bM(ne),u_ground_radiance:new s.bM(ne)}))(l)),E.includes("RENDER_SHADOWS")&&(this.shadowUniforms=(ne=>({u_light_matrix_0:new s.bK(ne),u_light_matrix_1:new s.bK(ne),u_fade_range:new s.bL(ne),u_shadow_normal_offset:new s.bM(ne),u_shadow_intensity:new s.bN(ne),u_shadow_texel_size:new s.bN(ne),u_shadow_map_resolution:new s.bN(ne),u_shadow_direction:new s.bM(ne),u_shadow_bias:new s.bM(ne),u_shadowmap_0:new s.bO(ne),u_shadowmap_1:new s.bO(ne)}))(l))}}setTerrainUniformValues(l,h){if(!this.terrainUniforms)return;const _=this.terrainUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const B in h)_[B]&&_[B].set(this.program,B,h[B])}}setGlobeUniformValues(l,h){if(!this.globeUniforms)return;const _=this.globeUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const B in h)_[B]&&_[B].set(this.program,B,h[B])}}setFogUniformValues(l,h){if(!this.fogUniforms)return;const _=this.fogUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const B in h)_[B].set(this.program,B,h[B])}}setCutoffUniformValues(l,h){if(!this.cutoffUniforms)return;const _=this.cutoffUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const B in h)_[B].set(this.program,B,h[B])}}setLightsUniformValues(l,h){if(!this.lightsUniforms)return;const _=this.lightsUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const B in h)_[B].set(this.program,B,h[B])}}setShadowUniformValues(l,h){if(this.failedToCreate||!this.shadowUniforms)return;const _=this.shadowUniforms;l.program.set(this.program);for(const B in h)_[B].set(this.program,B,h[B])}_drawDebugWireframe(l,h,_,B,C,E,M,k,F,j){const V=l.options.wireframe;if(V.terrain===!1&&V.layers2D===!1&&V.layers3D===!1)return;const Y=l.context;if(!(!(!V.terrain||this.name!=="terrainRaster"&&this.name!=="globeRaster")||!(!V.layers2D||l._terrain&&l._terrain.renderingToTexture||!Cd.includes(this.name))||!(!V.layers3D||!lm.includes(this.name))))return;const te=Y.gl,le=l.wireframeDebugCache.getLinesFromTrianglesBuffer(l.frameCounter,C,Y);if(!le)return;const ae=[...this.fixedDefines];ae.push("DEBUG_WIREFRAME");const ue=l.getOrCreateProgram(this.name,{config:this.configuration,defines:ae});Y.program.set(ue.program);const ne=(de,ve,ce)=>{if(ve[de]&&ce[de])for(const xe in ve[de])ce[de][xe]&&ce[de][xe].set(ce.program,xe,ve[de][xe].current)};F&&F.setUniforms(ue.program,Y,ue.binderUniforms,M,{zoom:k}),ne("fixedUniforms",this,ue),ne("terrainUniforms",this,ue),ne("globeUniforms",this,ue),ne("fogUniforms",this,ue),ne("lightsUniforms",this,ue),ne("shadowUniforms",this,ue),le.bind(),Y.setColorMode(new Nr([te.ONE,te.ONE_MINUS_SRC_ALPHA,te.ZERO,te.ONE],s.ax.transparent,[!0,!0,!0,!1])),Y.setDepthMode(new dr(h.func===te.LESS?te.LEQUAL:h.func,dr.ReadOnly,h.range)),Y.setStencilMode(yr.disabled);const he=3*E.primitiveLength*2,ye=3*E.primitiveOffset*2*2;j&&j>1?te.drawElementsInstanced(te.LINES,he,te.UNSIGNED_SHORT,ye,j):te.drawElements(te.LINES,he,te.UNSIGNED_SHORT,ye),C.bind(),Y.program.set(this.program),Y.setDepthMode(h),Y.setStencilMode(_),Y.setColorMode(B)}draw(l,h,_,B,C,E,M,k,F,j,V,Y,te,le,ae,ue,ne){const he=l.context,ye=he.gl;if(this.failedToCreate)return;he.program.set(this.program),he.setDepthMode(_),he.setStencilMode(B),he.setColorMode(C),he.setCullFace(E);for(const xe of Object.keys(this.fixedUniforms))this.fixedUniforms[xe].set(this.program,xe,M[xe]);le&&le.setUniforms(this.program,he,this.binderUniforms,Y,{zoom:te});const de={[ye.POINTS]:1,[ye.LINES]:2,[ye.TRIANGLES]:3,[ye.LINE_STRIP]:1}[h],ve=ne&&ne.length>0;if(ve){for(const xe of ne)ye.bindBufferBase(ye.TRANSFORM_FEEDBACK_BUFFER,xe.targetIndex,xe.buffer.buffer);ye.beginTransformFeedback(h)}const ce=ue&&ue>0?1:void 0;for(const xe of V.get()){const Ee=xe.vaos||(xe.vaos={});(Ee[k]||(Ee[k]=new Xh)).bind(he,this,F,le?le.getPaintVertexBuffers():[],j,xe.vertexOffset,ae||[],ce),ue&&ue>1?ye.drawElementsInstanced(h,xe.primitiveLength*de,ye.UNSIGNED_SHORT,xe.primitiveOffset*de*2,ue):j?ye.drawElements(h,xe.primitiveLength*de,ye.UNSIGNED_SHORT,xe.primitiveOffset*de*2):ye.drawArrays(h,xe.vertexOffset,xe.vertexLength),h===ye.TRIANGLES&&j&&this._drawDebugWireframe(l,_,B,C,j,xe,Y,te,le,ue)}ve&&ye.endTransformFeedback()}}function Yh(g,l){const h=Math.pow(2,l.tileID.overscaledZ),_=l.tileSize*Math.pow(2,g.transform.tileZoom)/h,B=_*(l.tileID.canonical.x+l.tileID.wrap*h),C=_*l.tileID.canonical.y;return{u_image:0,u_texsize:l.imageAtlasTexture?l.imageAtlasTexture.size:[0,0],u_tile_units_to_pixels:1/s.a3(l,1,g.transform.tileZoom),u_pixel_coord_upper:[B>>16,C>>16],u_pixel_coord_lower:[65535&B,65535&C]}}const um=s.a6.create(),Jh=(g,l,h,_,B,C,E,M,k,F,j,V,Y,te,le,ae)=>{const ue=l.style.light,ne=ue.properties.get("position"),he=[ne.x,ne.y,ne.z],ye=s.co.create();ue.properties.get("anchor")==="viewport"&&(s.co.fromRotation(ye,-l.transform.angle),s.N.transformMat3(he,he,ye));const de=ue.properties.get("color"),ve=l.transform,ce={u_matrix:g,u_lightpos:he,u_lightintensity:ue.properties.get("intensity"),u_lightcolor:[de.r,de.g,de.b],u_vertical_gradient:+h,u_opacity:_,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:um,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:B,u_edge_radius:C,u_flood_light_color:V,u_vertical_scale:Y,u_flood_light_intensity:te,u_ground_shadow_factor:le,u_emissive_strength:ae};return ve.projection.name==="globe"&&(ce.u_tile_id=[E.canonical.x,E.canonical.y,1<<E.canonical.z],ce.u_zoom_transition=k,ce.u_inv_rot_matrix=j,ce.u_merc_center=F,ce.u_up_dir=ve.projection.upVector(new s.bs(0,0,0),F[0]*s.V,F[1]*s.V),ce.u_height_lift=M),ce},ji=(g,l,h)=>({u_matrix:g,u_edge_radius:l,u_vertical_scale:h}),gs=(g,l,h,_,B,C,E,M,k,F,j,V,Y,te)=>{const le=Jh(g,l,h,_,B,C,E,k,F,j,V,Y,te,1,[0,0,0],0),ae={u_height_factor:-Math.pow(2,E.overscaledZ)/M.tileSize/8};return s.e(le,Yh(l,M),ae)},Zu=(g,l)=>({u_matrix:g,u_emissive_strength:l}),Sd=(g,l,h,_)=>s.e(Zu(g,l),Yh(h,_)),tu=(g,l,h)=>({u_matrix:g,u_world:h,u_emissive_strength:l}),Qh=(g,l,h,_,B)=>s.e(Sd(g,l,h,_),{u_world:B}),Vc=(g,l,h,_)=>{const B=s.V/h.tileSize;return{u_matrix:g,u_camera_to_center_distance:l.getCameraToCenterDistance(_),u_extrude_scale:[l.pixelsToGLUnits[0]/B,l.pixelsToGLUnits[1]/B]}},Td=(g,l,h=1)=>({u_matrix:g,u_color:l,u_overlay:0,u_overlay_scale:h}),WB=s.a6.create(),$_=(g,l,h,_,B,C,E)=>{const M=g.transform,k=M.projection.name==="globe",F=k?s.cp(M.zoom,l.canonical)*M._pixelsPerMercatorPixel:s.a3(h,1,C),j={u_matrix:l.projMatrix,u_extrude_scale:F,u_intensity:E,u_inv_rot_matrix:WB,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(k){j.u_inv_rot_matrix=_,j.u_merc_center=B,j.u_tile_id=[l.canonical.x,l.canonical.y,1<<l.canonical.z],j.u_zoom_transition=s.S(M.zoom);const V=B[0]*s.V,Y=B[1]*s.V;j.u_up_dir=M.projection.upVector(new s.bs(0,0,0),V,Y)}return j};function cm(g,[l,h,_,B],[C,E]){if(C===E)return[0,0,0,0];const M=255*(g-1)/(g*(E-C));return[l*M,h*M,_*M,B*M]}function ZB(g,l,[h,_]){return h===_?0:.5/g+(l-h)*(g-1)/(g*(_-h))}const U_=(g,l,h,_,B,C,E,M,k,F,j,V,Y,te,le,ae,ue,ne,he,ye,de)=>{return{u_matrix:g,u_normalize_matrix:l,u_globe_matrix:h,u_merc_matrix:_,u_grid_matrix:B,u_tl_parent:C,u_scale_parent:F,u_fade_t:j.mix,u_opacity:j.opacity*V.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:V.paint.get("raster-brightness-min"),u_brightness_high:V.paint.get("raster-brightness-max"),u_saturation_factor:(ce=V.paint.get("raster-saturation"),ce>0?1-1/(1.001-ce):-ce),u_contrast_factor:(ve=V.paint.get("raster-contrast"),ve>0?1/(1-ve):1+ve),u_spin_weights:Ad(V.paint.get("raster-hue-rotate")),u_perspective_transform:Y,u_raster_elevation:te,u_zoom_transition:E,u_merc_center:M,u_cutoff_params:k,u_colorization_mix:cm(s.cq,ae,ne),u_colorization_offset:ZB(s.cq,ue,ne),u_color_ramp:le,u_texture_offset:[ye/(he+2*ye),he/(he+2*ye)],u_texture_res:[he+2*ye,he+2*ye],u_emissive_strength:de};var ve,ce};function Ad(g){g*=Math.PI/180;const l=Math.sin(g),h=Math.cos(g);return[(2*h+1)/3,(-Math.sqrt(3)*l-h+1)/3,(Math.sqrt(3)*l-h+1)/3]}const zS=(g,l,h,_,B,C,E,M,k,F,j,V)=>({u_matrix:g,u_normalize_matrix:l,u_globe_matrix:h,u_merc_matrix:_,u_grid_matrix:B,u_tl_parent:C,u_scale_parent:F,u_fade_t:j.mix,u_opacity:j.opacity,u_image0:0,u_image1:1,u_raster_elevation:V,u_zoom_transition:E,u_merc_center:M,u_cutoff_params:k}),NS=(g,l,h,_,B,C,E,M)=>({u_tile_offset:g,u_velocity:l,u_color_ramp:_,u_velocity_res:h,u_max_speed:B,u_texture_offset:C,u_data_scale:E,u_data_offset:M}),qB=(g,l,h,_,B,C,E,M)=>({u_velocity:g,u_velocity_res:l,u_max_speed:h,u_speed_factor:_,u_lifetime_delta:B,u_rand_seed:Math.random(),u_texture_offset:C,u_data_scale:E,u_data_offset:M}),KB=s.a6.create(),hm=(g,l,h,_,B,C,E,M,k,F,j,V,Y,te,le,ae,ue,ne)=>{const he=B.transform,ye={u_is_size_zoom_constant:+(g==="constant"||g==="source"),u_is_size_feature_constant:+(g==="constant"||g==="camera"),u_size_t:l?l.uSizeT:0,u_size:l?l.uSize:0,u_camera_to_center_distance:he.getCameraToCenterDistance(ae),u_rotate_symbol:+h,u_aspect_ratio:he.width/he.height,u_fade_change:B.options.fadeDuration?B.symbolFadeChange:1,u_matrix:C,u_label_plane_matrix:E,u_coord_matrix:M,u_is_text:+k,u_pitch_with_map:+_,u_texsize:F,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:KB,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:KB,u_up_vector:[0,-1,0],u_icon_transition:ne||0,u_icon_saturation:ue};return ae.name==="globe"&&(ye.u_tile_id=[j.canonical.x,j.canonical.y,1<<j.canonical.z],ye.u_zoom_transition=V,ye.u_inv_rot_matrix=te,ye.u_merc_center=Y,ye.u_camera_forward=he._camera.forward(),ye.u_ecef_origin=s.cr(he.globeMatrix,j.toUnwrapped()),ye.u_tile_matrix=Float32Array.from(he.globeMatrix),ye.u_up_vector=le),ye},Ed=(g,l,h,_,B,C,E,M,k,F,j,V,Y,te,le,ae,ue)=>s.e(hm(g,l,h,_,B,C,E,M,k,F,V,Y,te,le,ae,ue,1),{u_gamma_scale:_?B.transform.getCameraToCenterDistance(ue)*Math.cos(B.terrain?0:B.transform._pitch):1,u_device_pixel_ratio:s.f.devicePixelRatio,u_is_halo:+j,undefined:void 0}),fm=(g,l,h,_,B,C,E,M,k,F,j,V,Y,te,le,ae)=>s.e(Ed(g,l,h,_,B,C,E,M,!0,k,!0,j,V,Y,te,le,ae),{u_texsize_icon:F,u_texture_icon:1}),V_=(g,l,h,_)=>({u_matrix:g,u_emissive_strength:l,u_opacity:h,u_color:_}),Dd=(g,l,h,_,B,C,E)=>s.e(function(M,k,F,j){const V=F.imageManager.getPattern(M.toString(),k),{width:Y,height:te}=F.imageManager.getPixelSize(k),le=Math.pow(2,j.tileID.overscaledZ),ae=j.tileSize*Math.pow(2,F.transform.tileZoom)/le,ue=ae*(j.tileID.canonical.x+j.tileID.wrap*le),ne=ae*j.tileID.canonical.y;return{u_image:0,u_pattern_tl:V.tl,u_pattern_br:V.br,u_texsize:[Y,te],u_pattern_size:V.displaySize,u_tile_units_to_pixels:1/s.a3(j,1,F.transform.tileZoom),u_pixel_coord_upper:[ue>>16,ne>>16],u_pixel_coord_lower:[65535&ue,65535&ne]}}(B,C,_,E),{u_matrix:g,u_emissive_strength:l,u_opacity:h}),dm=(g,l,h,_,B,C,E,M,k,F,j,V,Y=[0,0,0],te)=>{const le=_.style.light,ae=le.properties.get("position"),ue=[-ae.x,-ae.y,ae.z],ne=s.co.create();le.properties.get("anchor")==="viewport"&&(s.co.fromRotation(ne,-_.transform.angle),s.N.transformMat3(ue,ue,ne));const he=F.alphaMode==="MASK",ye=le.properties.get("color"),de=V.paint.get("model-ambient-occlusion-intensity"),ve=V.paint.get("model-color").constantOr(s.ax.white),ce=V.paint.get("model-color-mix-intensity").constantOr(0);return{u_matrix:g,u_lighting_matrix:l,u_normal_matrix:h,u_lightpos:ue,u_lightintensity:le.properties.get("intensity"),u_lightcolor:[ye.r,ye.g,ye.b],u_camera_pos:Y,u_opacity:B,u_baseTextureIsAlpha:0,u_alphaMask:+he,u_alphaCutoff:F.alphaCutoff,u_baseColorFactor:[C.r,C.g,C.b,C.a],u_emissiveFactor:[E[0],E[1],E[2],1],u_metallicFactor:M,u_roughnessFactor:k,u_baseColorTexture:Gi.BaseColor,u_metallicRoughnessTexture:Gi.MetallicRoughness,u_normalTexture:Gi.Normal,u_occlusionTexture:Gi.Occlusion,u_emissionTexture:Gi.Emission,u_color_mix:[ve.r,ve.g,ve.b,ce],u_aoIntensity:de,u_emissive_strength:j,u_occlusionTextureTransform:te||[0,0,0,0]}},Pd=new Float32Array(16),Md=(g,l=Pd,h=Pd)=>({u_matrix:g,u_instance:l,u_node_matrix:h}),FS={fillExtrusion:g=>({u_matrix:new s.bK(g),u_lightpos:new s.bM(g),u_lightintensity:new s.bN(g),u_lightcolor:new s.bM(g),u_vertical_gradient:new s.bN(g),u_opacity:new s.bN(g),u_edge_radius:new s.bN(g),u_ao:new s.bL(g),u_tile_id:new s.bM(g),u_zoom_transition:new s.bN(g),u_inv_rot_matrix:new s.bK(g),u_merc_center:new s.bL(g),u_up_dir:new s.bM(g),u_height_lift:new s.bN(g),u_flood_light_color:new s.bM(g),u_vertical_scale:new s.bN(g),u_flood_light_intensity:new s.bN(g),u_ground_shadow_factor:new s.bM(g),u_emissive_strength:new s.bN(g)}),fillExtrusionDepth:g=>({u_matrix:new s.bK(g),u_edge_radius:new s.bN(g),u_vertical_scale:new s.bN(g)}),fillExtrusionPattern:g=>({u_matrix:new s.bK(g),u_lightpos:new s.bM(g),u_lightintensity:new s.bN(g),u_lightcolor:new s.bM(g),u_vertical_gradient:new s.bN(g),u_height_factor:new s.bN(g),u_edge_radius:new s.bN(g),u_ao:new s.bL(g),u_tile_id:new s.bM(g),u_zoom_transition:new s.bN(g),u_inv_rot_matrix:new s.bK(g),u_merc_center:new s.bL(g),u_up_dir:new s.bM(g),u_height_lift:new s.bN(g),u_image:new s.bO(g),u_texsize:new s.bL(g),u_pixel_coord_upper:new s.bL(g),u_pixel_coord_lower:new s.bL(g),u_tile_units_to_pixels:new s.bN(g),u_opacity:new s.bN(g)}),fillExtrusionGroundEffect:g=>({u_matrix:new s.bK(g),u_opacity:new s.bN(g),u_ao_pass:new s.bN(g),u_meter_to_tile:new s.bN(g),u_ao:new s.bL(g),u_flood_light_intensity:new s.bN(g),u_flood_light_color:new s.bM(g),u_attenuation:new s.bN(g),u_edge_radius:new s.bN(g),u_fb:new s.bO(g),u_fb_size:new s.bN(g)}),fill:g=>({u_matrix:new s.bK(g),u_emissive_strength:new s.bN(g)}),fillPattern:g=>({u_matrix:new s.bK(g),u_emissive_strength:new s.bN(g),u_image:new s.bO(g),u_texsize:new s.bL(g),u_pixel_coord_upper:new s.bL(g),u_pixel_coord_lower:new s.bL(g),u_tile_units_to_pixels:new s.bN(g)}),fillOutline:g=>({u_matrix:new s.bK(g),u_emissive_strength:new s.bN(g),u_world:new s.bL(g)}),fillOutlinePattern:g=>({u_matrix:new s.bK(g),u_emissive_strength:new s.bN(g),u_world:new s.bL(g),u_image:new s.bO(g),u_texsize:new s.bL(g),u_pixel_coord_upper:new s.bL(g),u_pixel_coord_lower:new s.bL(g),u_tile_units_to_pixels:new s.bN(g)}),circle:s.cs,collisionBox:g=>({u_matrix:new s.bK(g),u_camera_to_center_distance:new s.bN(g),u_extrude_scale:new s.bL(g)}),collisionCircle:g=>({u_matrix:new s.bK(g),u_inv_matrix:new s.bK(g),u_camera_to_center_distance:new s.bN(g),u_viewport_size:new s.bL(g)}),debug:g=>({u_color:new s.ca(g),u_matrix:new s.bK(g),u_overlay:new s.bO(g),u_overlay_scale:new s.bN(g)}),clippingMask:g=>({u_matrix:new s.bK(g)}),heatmap:g=>({u_extrude_scale:new s.bN(g),u_intensity:new s.bN(g),u_matrix:new s.bK(g),u_inv_rot_matrix:new s.bK(g),u_merc_center:new s.bL(g),u_tile_id:new s.bM(g),u_zoom_transition:new s.bN(g),u_up_dir:new s.bM(g)}),heatmapTexture:g=>({u_image:new s.bO(g),u_color_ramp:new s.bO(g),u_opacity:new s.bN(g)}),hillshade:g=>({u_matrix:new s.bK(g),u_image:new s.bO(g),u_latrange:new s.bL(g),u_light:new s.bL(g),u_shadow:new s.ca(g),u_highlight:new s.ca(g),u_emissive_strength:new s.bN(g),u_accent:new s.ca(g)}),hillshadePrepare:g=>({u_matrix:new s.bK(g),u_image:new s.bO(g),u_dimension:new s.bL(g),u_zoom:new s.bN(g)}),line:s.ct,linePattern:s.cu,raster:g=>({u_matrix:new s.bK(g),u_normalize_matrix:new s.bK(g),u_globe_matrix:new s.bK(g),u_merc_matrix:new s.bK(g),u_grid_matrix:new s.cb(g),u_tl_parent:new s.bL(g),u_scale_parent:new s.bN(g),u_fade_t:new s.bN(g),u_opacity:new s.bN(g),u_image0:new s.bO(g),u_image1:new s.bO(g),u_brightness_low:new s.bN(g),u_brightness_high:new s.bN(g),u_saturation_factor:new s.bN(g),u_contrast_factor:new s.bN(g),u_spin_weights:new s.bM(g),u_perspective_transform:new s.bL(g),u_raster_elevation:new s.bN(g),u_zoom_transition:new s.bN(g),u_merc_center:new s.bL(g),u_cutoff_params:new s.bP(g),u_colorization_mix:new s.bP(g),u_colorization_offset:new s.bN(g),u_color_ramp:new s.bO(g),u_texture_offset:new s.bL(g),u_texture_res:new s.bL(g),u_emissive_strength:new s.bN(g)}),rasterParticle:g=>({u_matrix:new s.bK(g),u_normalize_matrix:new s.bK(g),u_globe_matrix:new s.bK(g),u_merc_matrix:new s.bK(g),u_grid_matrix:new s.cb(g),u_tl_parent:new s.bL(g),u_scale_parent:new s.bN(g),u_fade_t:new s.bN(g),u_opacity:new s.bN(g),u_image0:new s.bO(g),u_image1:new s.bO(g),u_raster_elevation:new s.bN(g),u_zoom_transition:new s.bN(g),u_merc_center:new s.bL(g),u_cutoff_params:new s.bP(g)}),rasterParticleTexture:g=>({u_texture:new s.bO(g),u_opacity:new s.bN(g)}),rasterParticleDraw:g=>({u_tile_offset:new s.bL(g),u_velocity:new s.bO(g),u_color_ramp:new s.bO(g),u_velocity_res:new s.bL(g),u_max_speed:new s.bN(g),u_texture_offset:new s.bL(g),u_data_scale:new s.bP(g),u_data_offset:new s.bN(g)}),rasterParticleUpdate:g=>({u_velocity:new s.bO(g),u_velocity_res:new s.bL(g),u_max_speed:new s.bN(g),u_speed_factor:new s.bN(g),u_lifetime_delta:new s.bN(g),u_rand_seed:new s.bN(g),u_texture_offset:new s.bL(g),u_data_scale:new s.bP(g),u_data_offset:new s.bN(g)}),symbolIcon:g=>({u_is_size_zoom_constant:new s.bO(g),u_is_size_feature_constant:new s.bO(g),u_size_t:new s.bN(g),u_size:new s.bN(g),u_camera_to_center_distance:new s.bN(g),u_rotate_symbol:new s.bO(g),u_aspect_ratio:new s.bN(g),u_fade_change:new s.bN(g),u_matrix:new s.bK(g),u_label_plane_matrix:new s.bK(g),u_coord_matrix:new s.bK(g),u_is_text:new s.bO(g),u_pitch_with_map:new s.bO(g),u_texsize:new s.bL(g),u_tile_id:new s.bM(g),u_zoom_transition:new s.bN(g),u_inv_rot_matrix:new s.bK(g),u_merc_center:new s.bL(g),u_camera_forward:new s.bM(g),u_tile_matrix:new s.bK(g),u_up_vector:new s.bM(g),u_ecef_origin:new s.bM(g),u_texture:new s.bO(g),u_icon_transition:new s.bN(g),u_icon_saturation:new s.bN(g)}),symbolSDF:g=>({u_is_size_zoom_constant:new s.bO(g),u_is_size_feature_constant:new s.bO(g),u_size_t:new s.bN(g),u_size:new s.bN(g),u_camera_to_center_distance:new s.bN(g),u_rotate_symbol:new s.bO(g),u_aspect_ratio:new s.bN(g),u_fade_change:new s.bN(g),u_matrix:new s.bK(g),u_label_plane_matrix:new s.bK(g),u_coord_matrix:new s.bK(g),u_is_text:new s.bO(g),u_pitch_with_map:new s.bO(g),u_texsize:new s.bL(g),u_texture:new s.bO(g),u_gamma_scale:new s.bN(g),u_device_pixel_ratio:new s.bN(g),u_tile_id:new s.bM(g),u_zoom_transition:new s.bN(g),u_inv_rot_matrix:new s.bK(g),u_merc_center:new s.bL(g),u_camera_forward:new s.bM(g),u_tile_matrix:new s.bK(g),u_up_vector:new s.bM(g),u_ecef_origin:new s.bM(g),u_is_halo:new s.bO(g)}),symbolTextAndIcon:g=>({u_is_size_zoom_constant:new s.bO(g),u_is_size_feature_constant:new s.bO(g),u_size_t:new s.bN(g),u_size:new s.bN(g),u_camera_to_center_distance:new s.bN(g),u_rotate_symbol:new s.bO(g),u_aspect_ratio:new s.bN(g),u_fade_change:new s.bN(g),u_matrix:new s.bK(g),u_label_plane_matrix:new s.bK(g),u_coord_matrix:new s.bK(g),u_is_text:new s.bO(g),u_pitch_with_map:new s.bO(g),u_texsize:new s.bL(g),u_texsize_icon:new s.bL(g),u_texture:new s.bO(g),u_texture_icon:new s.bO(g),u_gamma_scale:new s.bN(g),u_device_pixel_ratio:new s.bN(g),u_is_halo:new s.bO(g)}),background:g=>({u_matrix:new s.bK(g),u_emissive_strength:new s.bN(g),u_opacity:new s.bN(g),u_color:new s.ca(g)}),backgroundPattern:g=>({u_matrix:new s.bK(g),u_emissive_strength:new s.bN(g),u_opacity:new s.bN(g),u_image:new s.bO(g),u_pattern_tl:new s.bL(g),u_pattern_br:new s.bL(g),u_texsize:new s.bL(g),u_pattern_size:new s.bL(g),u_pixel_coord_upper:new s.bL(g),u_pixel_coord_lower:new s.bL(g),u_tile_units_to_pixels:new s.bN(g)}),terrainRaster:W,terrainDepth:W,skybox:g=>({u_matrix:new s.bK(g),u_sun_direction:new s.bM(g),u_cubemap:new s.bO(g),u_opacity:new s.bN(g),u_temporal_offset:new s.bN(g)}),skyboxGradient:g=>({u_matrix:new s.bK(g),u_color_ramp:new s.bO(g),u_center_direction:new s.bM(g),u_radius:new s.bN(g),u_opacity:new s.bN(g),u_temporal_offset:new s.bN(g)}),skyboxCapture:g=>({u_matrix_3f:new s.cb(g),u_sun_direction:new s.bM(g),u_sun_intensity:new s.bN(g),u_color_tint_r:new s.bP(g),u_color_tint_m:new s.bP(g),u_luminance:new s.bN(g)}),globeRaster:g=>({u_proj_matrix:new s.bK(g),u_globe_matrix:new s.bK(g),u_normalize_matrix:new s.bK(g),u_merc_matrix:new s.bK(g),u_zoom_transition:new s.bN(g),u_merc_center:new s.bL(g),u_image0:new s.bO(g),u_grid_matrix:new s.cb(g),u_skirt_height:new s.bN(g),u_far_z_cutoff:new s.bN(g),u_frustum_tl:new s.bM(g),u_frustum_tr:new s.bM(g),u_frustum_br:new s.bM(g),u_frustum_bl:new s.bM(g),u_globe_pos:new s.bM(g),u_globe_radius:new s.bN(g),u_viewport:new s.bL(g)}),globeAtmosphere:g=>({u_frustum_tl:new s.bM(g),u_frustum_tr:new s.bM(g),u_frustum_br:new s.bM(g),u_frustum_bl:new s.bM(g),u_horizon:new s.bN(g),u_transition:new s.bN(g),u_fadeout_range:new s.bN(g),u_color:new s.bP(g),u_high_color:new s.bP(g),u_space_color:new s.bP(g),u_temporal_offset:new s.bN(g),u_horizon_angle:new s.bN(g)}),model:g=>({u_matrix:new s.bK(g),u_lighting_matrix:new s.bK(g),u_normal_matrix:new s.bK(g),u_lightpos:new s.bM(g),u_lightintensity:new s.bN(g),u_lightcolor:new s.bM(g),u_camera_pos:new s.bM(g),u_opacity:new s.bN(g),u_baseColorFactor:new s.bP(g),u_emissiveFactor:new s.bP(g),u_metallicFactor:new s.bN(g),u_roughnessFactor:new s.bN(g),u_baseTextureIsAlpha:new s.bO(g),u_alphaMask:new s.bO(g),u_alphaCutoff:new s.bN(g),u_baseColorTexture:new s.bO(g),u_metallicRoughnessTexture:new s.bO(g),u_normalTexture:new s.bO(g),u_occlusionTexture:new s.bO(g),u_emissionTexture:new s.bO(g),u_color_mix:new s.bP(g),u_aoIntensity:new s.bN(g),u_emissive_strength:new s.bN(g),u_occlusionTextureTransform:new s.bP(g)}),modelDepth:g=>({u_matrix:new s.bK(g),u_instance:new s.bK(g),u_node_matrix:new s.bK(g)}),groundShadow:g=>({u_matrix:new s.bK(g),u_ground_shadow_factor:new s.bM(g)}),stars:g=>({u_matrix:new s.bK(g),u_up:new s.bM(g),u_right:new s.bM(g),u_intensity_multiplier:new s.bN(g)})};let Fs;function js(g,l,h,_,B,C,E){const M=g.context,k=M.gl,F=g.transform,j=g.getOrCreateProgram("collisionBox"),V=[];let Y=0,te=0;for(let de=0;de<_.length;de++){const ve=_[de],ce=l.getTile(ve),xe=ce.getBucket(h);if(!xe)continue;const Ee=Ic(ve,xe,F);let Pe=Ee;B[0]===0&&B[1]===0||(Pe=g.translatePosMatrix(Ee,ce,B,C));const Re=E?xe.textCollisionBox:xe.iconCollisionBox,Xe=xe.collisionCircleArray;if(Xe.length>0){const Fe=s.a6.create(),it=Pe;s.a6.mul(Fe,xe.placementInvProjMatrix,F.glCoordMatrix),s.a6.mul(Fe,Fe,xe.placementViewportMatrix),V.push({circleArray:Xe,circleOffset:te,transform:it,invTransform:Fe,projection:xe.getProjection()}),Y+=Xe.length/4,te=Y}Re&&(g.terrain&&g.terrain.setupElevationDraw(ce,j),j.draw(g,k.LINES,dr.disabled,yr.disabled,g.colorModeForRenderPass(),cr.disabled,Vc(Pe,F,ce,xe.getProjection()),h.id,Re.layoutVertexBuffer,Re.indexBuffer,Re.segments,null,F.zoom,null,[Re.collisionVertexBuffer,Re.collisionVertexBufferExt]))}if(!E||!V.length)return;const le=g.getOrCreateProgram("collisionCircle"),ae=new s.cv;ae.resize(4*Y),ae._trim();let ue=0;for(const de of V)for(let ve=0;ve<de.circleArray.length/4;ve++){const ce=4*ve,xe=de.circleArray[ce+0],Ee=de.circleArray[ce+1],Pe=de.circleArray[ce+2],Re=de.circleArray[ce+3];ae.emplace(ue++,xe,Ee,Pe,Re,0),ae.emplace(ue++,xe,Ee,Pe,Re,1),ae.emplace(ue++,xe,Ee,Pe,Re,2),ae.emplace(ue++,xe,Ee,Pe,Re,3)}(!Fs||Fs.length<2*Y)&&(Fs=function(de){const ve=2*de,ce=new s.aw;ce.resize(ve),ce._trim();for(let xe=0;xe<ve;xe++){const Ee=6*xe;ce.uint16[Ee+0]=4*xe+0,ce.uint16[Ee+1]=4*xe+1,ce.uint16[Ee+2]=4*xe+2,ce.uint16[Ee+3]=4*xe+2,ce.uint16[Ee+4]=4*xe+3,ce.uint16[Ee+5]=4*xe+0}return ce}(Y));const ne=M.createIndexBuffer(Fs,!0),he=M.createVertexBuffer(ae,s.cw.members,!0);for(const de of V){const ve={u_matrix:de.transform,u_inv_matrix:de.invTransform,u_camera_to_center_distance:(ye=F).getCameraToCenterDistance(de.projection),u_viewport_size:[ye.width,ye.height]};le.draw(g,k.TRIANGLES,dr.disabled,yr.disabled,g.colorModeForRenderPass(),cr.disabled,ve,h.id,he,ne,s.aB.simpleSegment(0,2*de.circleOffset,de.circleArray.length,de.circleArray.length/2),null,F.zoom)}var ye;he.destroy(),ne.destroy()}const ru=s.a6.create();function Id(g){const l=g._camera.getWorldToCamera(g.worldSize,1),h=s.a6.multiply([],l,g.globeMatrix);s.a6.invert(h,h);const _=[0,0,0],B=[0,1,0,0];return s.a7.transformMat4(B,B,h),_[0]=B[0],_[1]=B[1],_[2]=B[2],s.N.normalize(_,_),_}function Kt({width:g,height:l,anchor:h,textOffset:_,textScale:B},C){const{horizontalAlign:E,verticalAlign:M}=s.bf(h),k=-(E-.5)*g,F=-(M-.5)*l,j=s.bd(h,_);return new s.P((k/B+j[0])*C,(F/B+j[1])*C)}function XB(g,l,h,_,B,C,E,M,k,F,j){const V=g.text.placedSymbolArray,Y=g.text.dynamicLayoutVertexArray,te=g.icon.dynamicLayoutVertexArray,le={},ae=g.getProjection(),ue=Oc(M,ae,C),ne=C.elevation,he=ae.upVectorScale(M.canonical,C.center.lat,C.worldSize).metersToTile;Y.clear();for(let ye=0;ye<V.length;ye++){const de=V.get(ye),{tileAnchorX:ve,tileAnchorY:ce,numGlyphs:xe}=de,Ee=de.hidden||!de.crossTileID||g.allowVerticalPlacement&&!de.placedOrientation?null:_[de.crossTileID];if(Ee){let Pe=0,Re=0,Xe=0;if(ne){const bt=ne?ne.getAtTileOffset(M,ve,ce):0,[Pt,At,Ft]=ae.upVector(M.canonical,ve,ce);Pe=bt*Pt*he,Re=bt*At*he,Xe=bt*Ft*he}let[Fe,it,rt,Bt]=Aa(de.projectedAnchorX+Pe,de.projectedAnchorY+Re,de.projectedAnchorZ+Xe,h?ue:E);const Ve=im(C.getCameraToCenterDistance(ae),Bt);let et=B.evaluateSizeForFeature(g.textSizeData,F,de)*Ve/s.bc;h&&(et*=g.tilePixelRatio/k);const ke=Kt(Ee,et);h?({x:Fe,y:it,z:rt}=ae.projectTilePoint(ve+ke.x,ce+ke.y,M.canonical),[Fe,it,rt]=Aa(Fe+Pe,it+Re,rt+Xe,E)):(l&&ke._rotate(-C.angle),Fe+=ke.x,it+=ke.y,rt=0);const Ze=g.allowVerticalPlacement&&de.placedOrientation===s.b6.vertical?Math.PI/2:0;for(let bt=0;bt<xe;bt++)s.b9(Y,Fe,it,rt,Ze);j&&de.associatedIconIndex>=0&&(le[de.associatedIconIndex]={x:Fe,y:it,z:rt,angle:Ze})}else io(xe,Y)}if(j){te.clear();const ye=g.icon.placedSymbolArray;for(let de=0;de<ye.length;de++){const ve=ye.get(de),{numGlyphs:ce}=ve,xe=le[de];if(ve.hidden||!xe)io(ce,te);else{const{x:Ee,y:Pe,z:Re,angle:Xe}=xe;for(let Fe=0;Fe<ce;Fe++)s.b9(te,Ee,Pe,Re,Xe)}}g.icon.dynamicLayoutVertexBuffer.updateData(te)}g.text.dynamicLayoutVertexBuffer.updateData(Y)}function pm(g,l,h,_,B,C,E={}){const M=h.paint.get("icon-translate"),k=h.paint.get("text-translate"),F=h.paint.get("icon-translate-anchor"),j=h.paint.get("text-translate-anchor"),V=h.layout.get("icon-rotation-alignment"),Y=h.layout.get("text-rotation-alignment"),te=h.layout.get("icon-pitch-alignment"),le=h.layout.get("text-pitch-alignment"),ae=h.layout.get("icon-keep-upright"),ue=h.layout.get("text-keep-upright"),ne=h.paint.get("icon-color-saturation"),he=g.context,ye=he.gl,de=g.transform,ve=V==="map",ce=Y==="map",xe=te==="map",Ee=le==="map",Pe=h.layout.get("symbol-sort-key").constantOr(1)!==void 0;let Re=!1;const Xe=g.depthModeForSublayer(0,dr.ReadOnly),Fe=[s.a5(de.center.lng),s.ae(de.center.lat)],it=h.layout.get("text-variable-anchor"),rt=de.projection.name==="globe",Bt=[],Ve=[0,-1,0];for(const et of _){const ke=l.getTile(et),Ze=ke.getBucket(h);if(!Ze||Ze.projection.name==="mercator"&&rt||Ze.fullyClipped)continue;const bt=Ze.projection.name==="globe",Pt=bt?s.S(de.zoom):0,At=Oc(et,Ze.getProjection(),de),Ft=de.calculatePixelsToTileUnitsMatrix(ke),tr=it&&Ze.hasTextData(),hr=Ze.hasIconTextFit()&&tr&&Ze.hasIconData(),ir=Ze.getProjection().createInversionMatrix(de,et.canonical),sr=()=>{const gi=ve&&h.layout.get("symbol-placement")!=="point",Jr=[],gn=gi||hr,Qr=h.paint.get("icon-image-cross-fade").constantOr(0);g.terrainRenderModeElevated()&&xe&&Jr.push("PITCH_WITH_MAP_TERRAIN"),bt&&(Jr.push("PROJECTION_GLOBE_VIEW"),gn&&Jr.push("PROJECTED_POS_ON_VIEWPORT")),Qr>0&&Jr.push("ICON_TRANSITION"),Ze.icon.zOffsetVertexBuffer&&Jr.push("Z_OFFSET"),ne<1&&Jr.push("SATURATION");const fn=Ze.icon.programConfigurations.get(h.id),Jn=g.getOrCreateProgram(Ze.sdfIcons?"symbolSDF":"symbolIcon",{config:fn,defines:Jr});let Cn;const mo=ke.imageAtlasTexture?ke.imageAtlasTexture.size:[0,0],Oo=Ze.iconSizeData,ka=s.b5(Oo,de.zoom),Tl=xe||de.pitch!==0,La=Pc(At,ke.tileID.canonical,xe,ve,de,Ze.getProjection(),Ft),go=Lh(At,ke.tileID.canonical,xe,ve,de,Ze.getProjection(),Ft),to=g.translatePosMatrix(go,ke,M,F,!0),na=g.translatePosMatrix(At,ke,M,F),ya=gn?ru:La,Ra=ve&&!xe&&!gi;let Al=Ve;!rt&&!de.mercatorFromTransition||ve||(Al=Id(de));const rc=bt?Al:Ve;Cn=Ze.sdfIcons&&!Ze.iconsInText?Ed(Oo.kind,ka,Ra,xe,g,na,ya,to,!1,mo,!0,et,Pt,Fe,ir,rc,Ze.getProjection()):hm(Oo.kind,ka,Ra,xe,g,na,ya,to,!1,mo,et,Pt,Fe,ir,rc,Ze.getProjection(),ne,Qr);const qc=ke.imageAtlasTexture?ke.imageAtlasTexture:null,Yd=h.layout.get("icon-size").constantOr(0)!==1||Ze.iconsNeedLinear,Jd=Ze.sdfIcons||g.options.rotating||g.options.zooming||Yd||Tl?ye.LINEAR:ye.NEAREST,vy=Ze.sdfIcons&&h.paint.get("icon-halo-width").constantOr(1)!==0,Qd=g.terrain&&xe&&gi?s.a6.invert(s.a6.create(),La):ru;if(gi&&Ze.icon){const of=de.elevation,wm=of?of.getAtTileOffsetFunc(et,de.center.lat,de.worldSize,Ze.getProjection()):null,au=kh(At,ke.tileID.canonical,xe,ve,de,Ze.getProjection(),Ft);pd(Ze,At,g,!1,au,go,xe,ae,wm,et)}return{program:Jn,buffers:Ze.icon,uniformValues:Cn,atlasTexture:qc,atlasTextureIcon:null,atlasInterpolation:Jd,atlasInterpolationIcon:null,isSDF:Ze.sdfIcons,hasHalo:vy,tile:ke,labelPlaneMatrixInv:Qd}},Lr=()=>{const gi=ce&&h.layout.get("symbol-placement")!=="point",Jr=[],gn=gi||it||hr;g.terrainRenderModeElevated()&&Ee&&Jr.push("PITCH_WITH_MAP_TERRAIN"),bt&&(Jr.push("PROJECTION_GLOBE_VIEW"),gn&&Jr.push("PROJECTED_POS_ON_VIEWPORT")),Ze.text.zOffsetVertexBuffer&&Jr.push("Z_OFFSET");const Qr=Ze.text.programConfigurations.get(h.id),fn=g.getOrCreateProgram(Ze.iconsInText?"symbolTextAndIcon":"symbolSDF",{config:Qr,defines:Jr});let Jn,Cn=[0,0],mo=null;const Oo=Ze.textSizeData;Ze.iconsInText&&(Cn=ke.imageAtlasTexture?ke.imageAtlasTexture.size:[0,0],mo=ke.imageAtlasTexture?ke.imageAtlasTexture:null,Jn=Ee||de.pitch!==0||g.options.rotating||g.options.zooming||Oo.kind==="composite"||Oo.kind==="camera"?ye.LINEAR:ye.NEAREST);const ka=ke.glyphAtlasTexture?ke.glyphAtlasTexture.size:[0,0],Tl=s.b5(Oo,de.zoom),La=Pc(At,ke.tileID.canonical,Ee,ce,de,Ze.getProjection(),Ft),go=Lh(At,ke.tileID.canonical,Ee,ce,de,Ze.getProjection(),Ft),to=g.translatePosMatrix(go,ke,k,j,!0),na=g.translatePosMatrix(At,ke,k,j),ya=gn?ru:La,Ra=ce&&!Ee&&!gi;let Al=Ve;!rt&&!de.mercatorFromTransition||ce||(Al=Id(de));const rc=bt?Al:Ve;let qc;qc=Ze.iconsInText?fm(Oo.kind,Tl,Ra,Ee,g,na,ya,to,ka,Cn,et,Pt,Fe,ir,rc,Ze.getProjection()):Ed(Oo.kind,Tl,Ra,Ee,g,na,ya,to,!0,ka,!0,et,Pt,Fe,ir,rc,Ze.getProjection());const Yd=ke.glyphAtlasTexture?ke.glyphAtlasTexture:null,Jd=ye.LINEAR,vy=h.paint.get("text-halo-width").constantOr(1)!==0,Qd=g.terrain&&Ee&&gi?s.a6.invert(s.a6.create(),La):ru;if(gi&&Ze.text){const of=de.elevation,wm=of?of.getAtTileOffsetFunc(et,de.center.lat,de.worldSize,Ze.getProjection()):null,au=kh(At,ke.tileID.canonical,Ee,ce,de,Ze.getProjection(),Ft);pd(Ze,At,g,!0,au,go,Ee,ue,wm,et)}return{program:fn,buffers:Ze.text,uniformValues:qc,atlasTexture:Yd,atlasTextureIcon:mo,atlasInterpolation:Jd,atlasInterpolationIcon:Jn,isSDF:!0,hasHalo:vy,tile:ke,labelPlaneMatrixInv:Qd}},Cr=Ze.icon.segments.get().length,Pr=Ze.text.segments.get().length,Dr=Cr&&!E.onlyText?sr():null,un=Pr&&!E.onlyIcons?Lr():null,qn=h.paint.get("icon-opacity").constantOr(1),Yr=h.paint.get("text-opacity").constantOr(1);if(Pe&&Ze.canOverlap){Re=!0;const gi=qn&&!E.onlyText?Ze.icon.segments.get():[],Jr=Yr&&!E.onlyIcons?Ze.text.segments.get():[];for(const gn of gi)Bt.push({segments:new s.aB([gn]),sortKey:gn.sortKey,state:Dr});for(const gn of Jr)Bt.push({segments:new s.aB([gn]),sortKey:gn.sortKey,state:un})}else E.onlyText||Bt.push({segments:qn?Ze.icon.segments:new s.aB([]),sortKey:0,state:Dr}),E.onlyIcons||Bt.push({segments:Yr?Ze.text.segments:new s.aB([]),sortKey:0,state:un})}Re&&Bt.sort((et,ke)=>et.sortKey-ke.sortKey);for(const et of Bt){const ke=et.state;if(ke)if(g.terrain&&g.terrain.setupElevationDraw(ke.tile,ke.program,{useDepthForOcclusion:de.depthOcclusionForSymbolsAndCircles,labelPlaneMatrixInv:ke.labelPlaneMatrixInv}),he.activeTexture.set(ye.TEXTURE0),ke.atlasTexture&&ke.atlasTexture.bind(ke.atlasInterpolation,ye.CLAMP_TO_EDGE,!0),ke.atlasTextureIcon&&(he.activeTexture.set(ye.TEXTURE1),ke.atlasTextureIcon&&ke.atlasTextureIcon.bind(ke.atlasInterpolationIcon,ye.CLAMP_TO_EDGE,!0)),g.uploadCommonLightUniforms(g.context,ke.program),ke.hasHalo){const Ze=ke.uniformValues;Ze.u_is_halo=1,qu(ke.buffers,et.segments,h,g,ke.program,Xe,B,C,Ze,2),Ze.u_is_halo=0}else{if(ke.isSDF){const Ze=ke.uniformValues;ke.hasHalo&&(Ze.u_is_halo=1,qu(ke.buffers,et.segments,h,g,ke.program,Xe,B,C,Ze,1)),Ze.u_is_halo=0}qu(ke.buffers,et.segments,h,g,ke.program,Xe,B,C,ke.uniformValues,1)}}}function qu(g,l,h,_,B,C,E,M,k,F){const j=[g.dynamicLayoutVertexBuffer,g.opacityVertexBuffer,g.iconTransitioningVertexBuffer,g.globeExtVertexBuffer,g.zOffsetVertexBuffer];B.draw(_,_.context.gl.TRIANGLES,C,E,M,cr.disabled,k,h.id,g.layoutVertexBuffer,g.indexBuffer,l,h.paint,_.transform.zoom,g.programConfigurations.get(h.id),j,F)}function Gc(g,l,h,_,B,C,E){const M=g.context.gl,k=h.paint.get("fill-pattern"),F=k&&k.constantOr(1);let j,V,Y,te,le;E?(V=F&&!h.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",j=M.LINES):(V=F?"fillPattern":"fill",j=M.TRIANGLES);for(const ae of _){const ue=l.getTile(ae);if(F&&!ue.patternsLoaded())continue;const ne=ue.getBucket(h);if(!ne)continue;g.prepareDrawTile();const he=ne.programConfigurations.get(h.id),ye=g.isTileAffectedByFog(ae),de=g.getOrCreateProgram(V,{config:he,overrideFog:ye});F&&(g.context.activeTexture.set(M.TEXTURE0),ue.imageAtlasTexture&&ue.imageAtlasTexture.bind(M.LINEAR,M.CLAMP_TO_EDGE),he.updatePaintBuffers());const ve=k.constantOr(null);if(ve&&ue.imageAtlas){const Ee=ue.imageAtlas.patternPositions[ve.toString()];Ee&&he.setConstantPatternPositions(Ee)}const ce=g.translatePosMatrix(ae.projMatrix,ue,h.paint.get("fill-translate"),h.paint.get("fill-translate-anchor")),xe=h.paint.get("fill-emissive-strength");if(E){te=ne.indexBuffer2,le=ne.segments2;const Ee=g.terrain&&g.terrain.renderingToTexture?g.terrain.drapeBufferSize:[M.drawingBufferWidth,M.drawingBufferHeight];Y=V==="fillOutlinePattern"&&F?Qh(ce,xe,g,ue,Ee):tu(ce,xe,Ee)}else te=ne.indexBuffer,le=ne.segments,Y=F?Sd(ce,xe,g,ue):Zu(ce,xe);g.uploadCommonUniforms(g.context,de,ae.toUnwrapped()),de.draw(g,j,B,g.stencilModeForClipping(ae),C,cr.disabled,Y,h.id,ne.layoutVertexBuffer,te,le,h.paint,g.transform.zoom,he,void 0)}}function nr(g,l,h,_,B,C,E,M){h.resetLayerRenderingStats(g);const k=g.context,F=k.gl,j=g.transform,V=h.paint.get("fill-extrusion-pattern"),Y=V.constantOr(1),te=h.paint.get("fill-extrusion-opacity"),le=g.style.enable3dLights(),ae=h.paint.get(le&&!Y?"fill-extrusion-ambient-occlusion-wall-radius":"fill-extrusion-ambient-occlusion-radius"),ue=[h.paint.get("fill-extrusion-ambient-occlusion-intensity"),ae],ne=h.layout.get("fill-extrusion-edge-radius"),he=ne>0&&!h.paint.get("fill-extrusion-rounded-roof"),ye=he?0:ne,de=j.projection.name==="globe"?s.cF():0,ve=j.projection.name==="globe",ce=ve?s.S(j.zoom):0,xe=[s.a5(j.center.lng),s.ae(j.center.lat)],Ee=h.paint.get("fill-extrusion-flood-light-color").toArray01().slice(0,3),Pe=h.paint.get("fill-extrusion-flood-light-intensity"),Re=h.paint.get("fill-extrusion-vertical-scale"),Xe=xl(g,h.paint.get("fill-extrusion-cutoff-fade-range")),Fe=h.paint.get("fill-extrusion-emissive-strength"),it=[];let rt;ve&&it.push("PROJECTION_GLOBE_VIEW"),ue[0]>0&&it.push("FAUX_AO"),he&&it.push("ZERO_ROOF_RADIUS"),M&&it.push("HAS_CENTROID"),Pe>0&&it.push("FLOOD_LIGHT"),Xe.shouldRenderCutoff&&it.push("RENDER_CUTOFF");const Bt=g.renderPass==="shadow",Ve=g.shadowRenderer,et=Bt&&!!Ve;g.shadowRenderer&&(g.shadowRenderer.useNormalOffset=!0);let ke=[0,0,0];if(Ve){const Pt=g.style.directionalLight,At=g.style.ambientLight;Pt&&At&&(ke=Nc(Pt,At)),rt=it.concat(["SHADOWS_SINGLE_CASCADE"])}const Ze=et?"fillExtrusionDepth":Y?"fillExtrusionPattern":"fillExtrusion",bt=h.getLayerRenderingStats();for(const Pt of _){const At=l.getTile(Pt),Ft=At.getBucket(h);if(!Ft||Ft.projection.name!==j.projection.name)continue;let tr=!1;Ve&&(tr=Ve.getMaxCascadeForTile(Pt.toUnwrapped())===0);const hr=g.isTileAffectedByFog(Pt),ir=Ft.programConfigurations.get(h.id),sr=g.getOrCreateProgram(Ze,{config:ir,defines:tr?rt:it,overrideFog:hr});if(g.terrain&&g.terrain.setupElevationDraw(At,sr,{useMeterToDem:!0}),!Ft.centroidVertexBuffer){const qn=sr.attributes.a_centroid_pos;qn!==void 0&&F.vertexAttrib2f(qn,0,0)}!Bt&&Ve&&Ve.setupShadows(At.tileID.toUnwrapped(),sr,"vector-tile",At.tileID.overscaledZ),Y&&(g.context.activeTexture.set(F.TEXTURE0),At.imageAtlasTexture&&At.imageAtlasTexture.bind(F.LINEAR,F.CLAMP_TO_EDGE),ir.updatePaintBuffers());const Lr=V.constantOr(null);if(Lr&&At.imageAtlas){const qn=At.imageAtlas.patternPositions[Lr.toString()];qn&&ir.setConstantPatternPositions(qn)}const Cr=h.paint.get("fill-extrusion-vertical-gradient");let Pr;if(Bt&&Ve){if(JB(At.tileID,Ft,g))continue;const qn=Ve.calculateShadowPassMatrixFromTile(At.tileID.toUnwrapped());Pr=ji(qn,ye,Re)}else{const qn=g.translatePosMatrix(Pt.expandedProjMatrix,At,h.paint.get("fill-extrusion-translate"),h.paint.get("fill-extrusion-translate-anchor")),Yr=j.projection.createInversionMatrix(j,Pt.canonical);Pr=Y?gs(qn,g,Cr,te,ue,ye,Pt,At,de,ce,xe,Yr,Ee,Re):Jh(qn,g,Cr,te,ue,ye,Pt,de,ce,xe,Yr,Ee,Re,Pe,ke,Fe)}g.uploadCommonUniforms(k,sr,Pt.toUnwrapped(),null,Xe);let Dr=Ft.segments;if(j.projection.name==="mercator"&&!Bt&&(Dr=Ft.getVisibleSegments(At.tileID,g.terrain,g.transform.getFrustum(0)),!Dr.get().length))continue;if(bt)if(Bt)for(const qn of Dr.get())bt.numRenderedVerticesInShadowPass+=qn.primitiveLength;else for(const qn of Dr.get())bt.numRenderedVerticesInTransparentPass+=qn.primitiveLength;const un=[];(g.terrain||M)&&un.push(Ft.centroidVertexBuffer),ve&&un.push(Ft.layoutVertexExtBuffer),sr.draw(g,k.gl.TRIANGLES,B,C,E,cr.backCCW,Pr,h.id,Ft.layoutVertexBuffer,Ft.indexBuffer,Dr,h.paint,g.transform.zoom,ir,un)}g.shadowRenderer&&(g.shadowRenderer.useNormalOffset=!1)}function Ku(g,l,h,_,B,C,E,M,k,F,j,V,Y,te,le,ae,ue,ne,he){const ye=g.context,de=ye.gl,ve=g.transform,ce=g.transform.zoom,xe=[],Ee=xl(g,h.paint.get("fill-extrusion-cutoff-fade-range"));F==="clear"?(xe.push("CLEAR_SUBPASS"),he&&(xe.push("CLEAR_FROM_TEXTURE"),ye.activeTexture.set(de.TEXTURE0),he.bind(de.LINEAR,de.CLAMP_TO_EDGE))):F==="sdf"&&xe.push("SDF_SUBPASS"),ue&&xe.push("HAS_CENTROID"),Ee.shouldRenderCutoff&&xe.push("RENDER_CUTOFF");const Pe=h.layout.get("fill-extrusion-edge-radius"),Re=(Xe,Fe,it,rt,Bt)=>{const Ve=Fe.programConfigurations.get(h.id),et=g.isTileAffectedByFog(Xe),ke=g.getOrCreateProgram("fillExtrusionGroundEffect",{config:Ve,defines:xe,overrideFog:et}),Ze=((Pt,At,Ft,tr,hr,ir,sr,Lr,Cr,Pr,Dr)=>({u_matrix:At,u_opacity:Ft,u_ao_pass:tr?1:0,u_meter_to_tile:hr,u_ao:ir,u_flood_light_intensity:sr,u_flood_light_color:Lr,u_attenuation:Cr,u_edge_radius:Pr,u_fb:0,u_fb_size:Dr}))(0,rt,j,k,Bt,[V,Y*Bt],te,le,ae,ce>=17?0:Pe*Bt,he?he.size[0]:0),bt=[];ue&&bt.push(Fe.hiddenByLandmarkVertexBuffer),g.uploadCommonUniforms(ye,ke,Xe.toUnwrapped(),null,Ee),ke.draw(g,ye.gl.TRIANGLES,B,C,E,M,Ze,h.id,Fe.vertexBuffer,Fe.indexBuffer,it,h.paint,ce,Ve,bt)};for(const Xe of _){const Fe=l.getTile(Xe),it=Fe.getBucket(h);if(!it||it.projection.name!==ve.projection.name||!it.groundEffect||it.groundEffect&&!it.groundEffect.hasData())continue;const rt=it.groundEffect,Bt=1/it.tileToMeter;{const Ve=g.translatePosMatrix(Xe.projMatrix,Fe,h.paint.get("fill-extrusion-translate"),h.paint.get("fill-extrusion-translate-anchor")),et=rt.getDefaultSegment();Re(Xe,rt,et,Ve,Bt)}if(ne)for(let Ve=0;Ve<4;Ve++){const et=s.cG[Ve](Xe),ke=l.getTile(et);if(!ke)continue;const Ze=ke.getBucket(h);if(!Ze||Ze.projection.name!==ve.projection.name||!Ze.groundEffect||Ze.groundEffect&&!Ze.groundEffect.hasData())continue;const bt=Ze.groundEffect;let Pt,At;Ve===0?(Pt=[-s.V,0,0],At=1):Ve===1?(Pt=[s.V,0,0],At=0):Ve===2?(Pt=[0,-s.V,0],At=3):(Pt=[0,s.V,0],At=2);const Ft=bt.regionSegments[At];if(!Ft)continue;const tr=new Float32Array(16);s.a6.translate(tr,Xe.projMatrix,Pt),Re(Xe,bt,Ft,g.translatePosMatrix(tr,Fe,h.paint.get("fill-extrusion-translate"),h.paint.get("fill-extrusion-translate-anchor")),Bt)}}}function jS(g,l,h,_,B,C,E){_.centroidVertexArray.length===0&&_.createCentroidsBuffer();const M=C?C.findDEMTileFor(h):null;if(!(M&&M.dem||E))return;const k=ne=>new s.P(Math.ceil((ne+s.cJ)*s.cK),0),F=ne=>{const he=l.getSource().minzoom,ye=ve=>{const ce=l.getTileByID(ve);if(ce&&ce.hasData())return ce.getBucket(B)},de=[0,-1,1];for(const ve of de){if(ne.overscaledZ+ve<he)continue;const ce=ye(ne.calculateScaledKey(ne.overscaledZ+ve));if(ce)return ce}},j=[0,0,0],V=(ne,he)=>(j[0]=Math.min(ne.min.y,he.min.y),j[1]=Math.max(ne.max.y,he.max.y),j[2]=s.V-he.min.x>ne.max.x?he.min.x-s.V:ne.max.x,j),Y=(ne,he)=>(j[0]=Math.min(ne.min.x,he.min.x),j[1]=Math.max(ne.max.x,he.max.x),j[2]=s.V-he.min.y>ne.max.y?he.min.y-s.V:ne.max.y,j),te=[(ne,he)=>V(ne,he),(ne,he)=>V(he,ne),(ne,he)=>Y(ne,he),(ne,he)=>Y(he,ne)],le=(ne,he,ye,de,ve,ce,xe)=>{if(!C)return 0;const Ee=[[ce?ye:ne,ce?ne:ye,0],[ce?ye:he,ce?he:ye,0]],Pe=xe<0?s.V+xe:xe,Re=[ce?Pe:(ne+he)/2,ce?(ne+he)/2:Pe,0];return ye===0&&xe<0||ye!==0&&xe>0?C.getForTilePoints(ve,[Re],!0,de):Ee.push(Re),C.getForTilePoints(h,Ee,!0,M),Math.max(Ee[0][2],Ee[1][2],Re[2])/C.exaggeration()};for(let ne=0;ne<4;ne++){const he=_.borderFeatureIndices[ne];if(he.length===0)continue;const ye=s.cG[ne](h),de=F(ye);if(!(de&&de instanceof s.cH)||_.borderDoneWithNeighborZ[ne]===de.canonical.z)continue;de.centroidVertexArray.length===0&&de.createCentroidsBuffer();const ve=C?C.findDEMTileFor(ye):null;if(!(ve&&ve.dem||E))continue;const ce=(ne<2?1:5)-ne,xe=de.borderDoneWithNeighborZ[ce]!==_.canonical.z,Ee=de.borderFeatureIndices[ce];let Pe=0;if(_.canonical.z!==de.canonical.z){for(const Re of he)_.showCentroid(_.featuresOnBorder[Re]);if(xe)for(const Re of Ee)de.showCentroid(de.featuresOnBorder[Re]);_.borderDoneWithNeighborZ[ne]=de.canonical.z,de.borderDoneWithNeighborZ[ce]=_.canonical.z}for(const Re of he){const Xe=_.featuresOnBorder[Re],Fe=_.centroidData[Xe.centroidDataIndex],it=Xe.borders[ne];let rt;for(;Pe<Ee.length;){rt=de.featuresOnBorder[Ee[Pe]];const Bt=rt.borders[ce];if(Bt[1]>it[0]+3||Bt[0]>it[0]-3)break;de.showCentroid(rt),Pe++}if(rt&&Pe<Ee.length){const Bt=Pe;let Ve=0;for(;!(rt.borders[ce][0]>it[1]-3)&&(Ve++,++Pe!==Ee.length);)rt=de.featuresOnBorder[Ee[Pe]];if(rt=de.featuresOnBorder[Ee[Bt]],Ve>1){const Ze=rt.borders[ce];Math.abs(it[0]-Ze[0])<3&&Math.abs(it[1]-Ze[1])<3&&(Ve=1,Pe=Bt+1)}else if(Ve===0){_.showCentroid(Xe);continue}const et=de.centroidData[rt.centroidDataIndex];E&&Ve===1&&(((ae=Fe).flags|(ue=et).flags)&s.cI?(ae.flags|=s.cI,ue.flags|=s.cI):(ae.flags&=~s.cI,ue.flags&=~s.cI));const ke=Xe.intersectsCount()>1||rt.intersectsCount()>1;if(Ve>1)Pe=Bt,Fe.centroidXY=et.centroidXY=new s.P(0,0);else if(ve&&ve.dem&&!ke){const Ze=te[ne](Fe,et),bt=ne%2?s.V-1:0,Pt=le(Ze[0],Math.min(s.V-1,Ze[1]),bt,ve,ye,ne<2,Ze[2]);Fe.centroidXY=et.centroidXY=k(Pt)}else ke?Fe.centroidXY=et.centroidXY=new s.P(0,0):(Fe.centroidXY=_.encodeBorderCentroid(Xe),et.centroidXY=de.encodeBorderCentroid(rt));_.writeCentroidToBuffer(Fe),de.writeCentroidToBuffer(et)}else _.showCentroid(Xe)}_.borderDoneWithNeighborZ[ne]=de.canonical.z,de.borderDoneWithNeighborZ[ce]=_.canonical.z}var ae,ue;(_.needsCentroidUpdate||!_.centroidVertexBuffer&&_.centroidVertexArray.length!==0)&&_.uploadCentroid(g)}const $S=[1,0,0],G_=[0,1,0],YB=[0,0,1];function JB(g,l,h){const _=h.transform,B=h.shadowRenderer;if(!B)return!0;const C=g.toUnwrapped(),E=_.tileSize*B._cascades[h.currentShadowCascade].scale;let M=l.maxHeight;if(_.elevation){const ae=_.elevation.getMinMaxForTile(g);ae&&(M+=ae.max)}const k=[...B.shadowDirection];k[2]=-k[2];const F=B.computeSimplifiedTileShadowVolume(C,M,E,k);if(!F)return!1;const j=[$S,G_,YB,k,[k[0],0,k[2]],[0,k[1],k[2]]],V=_.projection.name==="globe",Y=_.scaleZoom(E),te=s.bq.fromInvProjectionMatrix(_.invProjMatrix,_.worldSize,Y,!V),le=B.getCurrentCascadeFrustum();return te.intersectsPrecise(F.vertices,F.planes,j)===0||le.intersectsPrecise(F.vertices,F.planes,j)===0}function QB(g){return[g[0]*s.cL,g[1]*s.cL,g[2]*s.cL,0]}function H_(g,l,h,_,B,C,E,M,k){const F=_.getSource(),j=h.globeSharedBuffers;if(!j)return;let V,Y,te;if(l&&(V=_.getTile(l)),F instanceof s.ap?(Y=F.texture,te=s.cj(0,0,h.transform)):V&&l&&(Y=V.texture,te=s.cj(l.canonical.z,l.canonical.x,h.transform)),!Y||!te)return;g||(te=s.a6.scale(s.a6.create(),te,[1,-1,1]));const le=h.context,ae=le.gl,ue=B.paint.get("raster-resampling")==="nearest"?ae.NEAREST:ae.LINEAR,ne=h.colorModeForDrapableLayerRenderPass(C),he=E.defines;he.push("GLOBE_POLES");const ye=new dr(ae.LEQUAL,dr.ReadWrite,h.depthRangeFor3D),de=Float32Array.from(h.transform.expandedFarZProjMatrix),ve=Float32Array.from(s.aT(s.ci(new s.bs(0,0,0))));h.terrain&&h.terrain.prepareDrawTile(),le.activeTexture.set(ae.TEXTURE0),Y.bind(ue,ae.CLAMP_TO_EDGE),le.activeTexture.set(ae.TEXTURE1),Y.bind(ue,ae.CLAMP_TO_EDGE),Y.useMipmap&&le.extTextureFilterAnisotropic&&h.transform.pitch>20&&ae.texParameterf(ae.TEXTURE_2D,le.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,le.extTextureFilterAnisotropicMax);const[ce,xe,Ee,Pe]=l?j.getPoleBuffers(l.canonical.z,!1):j.getPoleBuffers(0,!0),Re=B.paint.get("raster-elevation");let Xe;g?(Xe=ce,h.renderDefaultNorthPole=Re!==0):(Xe=xe,h.renderDefaultSouthPole=Re!==0);const Fe=QB(E.mix),it=((Bt,Ve,et,ke,Ze,bt,Pt,At,Ft,tr,hr,ir,sr)=>U_(Bt,Ve,et,new Float32Array(16),new Float32Array(9),[0,0],ke,[0,0],[0,0,0,0],1,{opacity:1,mix:0},bt,[0,0],At,2,tr,hr,ir,1,0,sr))(de,ve,te,s.S(h.transform.zoom),0,B,0,Re,0,Fe,E.offset,E.range,C),rt=h.getOrCreateProgram("raster",{defines:he});h.uploadCommonUniforms(le,rt,null),rt.draw(h,ae.TRIANGLES,ye,k,ne,M,it,B.id,Xe,Ee,Pe)}function W_(g){const l=g._nearZ,h=g.projection.farthestPixelDistance(g),_=h-l,B=.2*g.height,C=l+B;return[l,h,(C-B-l)/_,(C-l)/_]}function Z_(g,l,h,_){if(g)return l instanceof Dt&&g instanceof gl?l.getTextureDescriptor(g,h,!0):{texture:g.texture,mix:QB(_.mix),offset:_.offset,buffer:0,tileSize:1}}function q_(g,l,h){if(!g)return null;const _=l.getTextureDescriptor(g,h,!0);if(!_)return null;let{texture:B,mix:C,offset:E,tileSize:M,buffer:k,format:F}=_;if(!B||!F)return null;let j=!1;return F==="uint32"&&(j=!0,C[3]=0,C=cm(s.cM,C,[0,h.paint.get("raster-particle-max-speed")]),E=ZB(s.cM,E,[0,h.paint.get("raster-particle-max-speed")])),{texture:B,textureOffset:[k/(M+2*k),M/(M+2*k)],tileSize:M,scalarData:j,scale:C,offset:E,defines:["RASTER_ARRAY",{uint8:"DATA_FORMAT_UINT8",uint16:"DATA_FORMAT_UINT16",uint32:"DATA_FORMAT_UINT32"}[F]]}}function K_(g){const l=g._nearZ,h=g.projection.farthestPixelDistance(g),_=h-l,B=.2*g.height,C=l+B;return[l,h,(C-B-l)/_,(C-l)/_]}const Ia=new s.ax(1,0,0,1),Xu=new s.ax(0,1,0,1),e1=new s.ax(0,0,1,1),X_=new s.ax(1,0,1,1),Y_=new s.ax(0,1,1,1);function Yu(g,l,h,_,B,C,E){const M=g.context,k=g.transform,F=M.gl,j=k.projection.name==="globe",V=j?["PROJECTION_GLOBE_VIEW"]:[];let Y=s.a6.clone(h.projMatrix);if(j&&s.S(k.zoom)>0){const Fe=s.aS(h.canonical,k),it=s.cN(Fe);Y=s.a6.multiply(new Float32Array(16),k.globeMatrix,it),s.a6.multiply(Y,k.projMatrix,Y)}const te=s.a6.create();te[12]+=2*B/(s.f.devicePixelRatio*k.width),te[13]+=2*C/(s.f.devicePixelRatio*k.height),s.a6.multiply(Y,te,Y);const le=g.getOrCreateProgram("debug",{defines:V}),ae=l.getTileByID(h.key);g.terrain&&g.terrain.setupElevationDraw(ae,le);const ue=dr.disabled,ne=yr.disabled,he=g.colorModeForRenderPass(),ye="$debug";M.activeTexture.set(F.TEXTURE0),g.emptyTexture.bind(F.LINEAR,F.CLAMP_TO_EDGE),j?ae._makeGlobeTileDebugBuffers(g.context,k):ae._makeDebugTileBoundsBuffers(g.context,k.projection);const de=ae._tileDebugBuffer||g.debugBuffer,ve=ae._tileDebugIndexBuffer||g.debugIndexBuffer,ce=ae._tileDebugSegments||g.debugSegments;if(le.draw(g,F.LINE_STRIP,ue,ne,he,cr.disabled,Td(Y,_),ye,de,ve,ce,null,null,null,[ae._globeTileDebugBorderBuffer]),E){const Fe=ae.latestRawTileData,it=Math.floor((Fe&&Fe.byteLength||0)/1024);let rt=h.canonical.toString();h.overscaledZ!==h.canonical.z&&(rt+=` => ${h.overscaledZ}`),rt+=` ${ae.state}`,rt+=` ${it}kb`,function(Bt,Ve){Bt.initDebugOverlayCanvas();const et=Bt.debugOverlayCanvas,ke=Bt.context.gl,Ze=Bt.debugOverlayCanvas.getContext("2d");Ze.clearRect(0,0,et.width,et.height),Ze.shadowColor="white",Ze.shadowBlur=2,Ze.lineWidth=1.5,Ze.strokeStyle="white",Ze.textBaseline="top",Ze.font="bold 36px Open Sans, sans-serif",Ze.fillText(Ve,5,5),Ze.strokeText(Ve,5,5),Bt.debugOverlayTexture.update(et),Bt.debugOverlayTexture.bind(ke.LINEAR,ke.CLAMP_TO_EDGE)}(g,rt)}const xe=l.getTile(h).tileSize,Ee=512/Math.min(xe,512)*(h.overscaledZ/k.zoom)*.5,Pe=ae._tileDebugTextBuffer||g.debugBuffer,Re=ae._tileDebugTextIndexBuffer||g.quadTriangleIndexBuffer,Xe=ae._tileDebugTextSegments||g.debugSegments;le.draw(g,F.TRIANGLES,ue,ne,Nr.alphaBlended,cr.disabled,Td(Y,s.ax.transparent,Ee),ye,Pe,Re,Xe,null,null,null,[ae._globeTileDebugTextBuffer])}function J_(g,l,h,_){pi(g,0,l+h/2,g.transform.width,h,_)}function Ja(g,l,h,_){pi(g,l-h/2,0,h,g.transform.height,_)}function pi(g,l,h,_,B,C){const E=g.context,M=E.gl;M.enable(M.SCISSOR_TEST),M.scissor(l*s.f.devicePixelRatio,h*s.f.devicePixelRatio,_*s.f.devicePixelRatio,B*s.f.devicePixelRatio),E.clear({color:C}),M.disable(M.SCISSOR_TEST)}const mm=s.ay([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Q_}=mm;function nu(g,l,h,_){g.emplaceBack(l,h,_)}class ey{constructor(l){this.vertexArray=new s.az,this.indices=new s.aw,nu(this.vertexArray,-1,-1,1),nu(this.vertexArray,1,-1,1),nu(this.vertexArray,-1,1,1),nu(this.vertexArray,1,1,1),nu(this.vertexArray,-1,-1,-1),nu(this.vertexArray,1,-1,-1),nu(this.vertexArray,-1,1,-1),nu(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=l.createVertexBuffer(this.vertexArray,Q_),this.indexBuffer=l.createIndexBuffer(this.indices),this.segment=s.aB.simpleSegment(0,0,36,12)}}function Hc(g,l,h,_,B,C){const E=g.context.gl,M=l.paint.get("sky-atmosphere-color"),k=l.paint.get("sky-atmosphere-halo-color"),F=l.paint.get("sky-atmosphere-sun-intensity"),j=((V,Y,te,le,ae)=>({u_matrix_3f:V,u_sun_direction:Y,u_sun_intensity:te,u_color_tint_r:[le.r,le.g,le.b,le.a],u_color_tint_m:[ae.r,ae.g,ae.b,ae.a],u_luminance:5e-5}))(s.co.fromMat4(s.co.create(),_),B,F,M,k);E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.TEXTURE_CUBE_MAP_POSITIVE_X+C,l.skyboxTexture,0),h.draw(g,E.TRIANGLES,dr.disabled,yr.disabled,Nr.unblended,cr.frontCW,j,"skyboxCapture",l.skyboxGeometry.vertexBuffer,l.skyboxGeometry.indexBuffer,l.skyboxGeometry.segment)}const US=s.ay([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class ef{constructor(l){const h=new s.cO;h.emplaceBack(-1,1,1,0,0),h.emplaceBack(1,1,1,1,0),h.emplaceBack(1,-1,1,1,1),h.emplaceBack(-1,-1,1,0,1);const _=new s.aw;_.emplaceBack(0,1,2),_.emplaceBack(2,3,0),this.vertexBuffer=l.createVertexBuffer(h,US.members),this.indexBuffer=l.createIndexBuffer(_),this.segments=s.aB.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const Od=s.ay([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_size_scale",components:1},{type:"Float32",name:"a_fade_opacity",components:1}]);class Ot{constructor(){this.starsCount=16e3,this.sizeMultiplier=.15,this.sizeRange=100,this.intensityRange=200}}class pr{constructor(l){this.colorModeAlphaBlendedWriteRGB=new Nr([1,Un,1,Un],s.ax.transparent,[!0,!0,!0,!1]),this.colorModeWriteAlpha=new Nr([1,0,1,0],s.ax.transparent,[!1,!1,!1,!0]),this.params=new Ot,this.updateNeeded=!0,l.tp.registerParameter(this.params,["Stars"],"starsCount",{min:100,max:16e3,step:1},()=>{this.updateNeeded=!0}),l.tp.registerParameter(this.params,["Stars"],"sizeMultiplier",{min:.01,max:2,step:.01}),l.tp.registerParameter(this.params,["Stars"],"sizeRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0}),l.tp.registerParameter(this.params,["Stars"],"intensityRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0})}update(l){const h=l.context;if(!this.atmosphereBuffer||this.updateNeeded){this.updateNeeded=!1,this.atmosphereBuffer=new ef(h);const _=this.params.sizeRange,B=this.params.intensityRange,C=function(j){const V=s.aA(30),Y=[];for(let te=0;te<j;++te){const le=2*Math.PI*V(),ae=Math.acos(1-2*V())-.5*Math.PI;Y.push(s.N.fromValues(Math.cos(ae)*Math.cos(le),Math.cos(ae)*Math.sin(le),Math.sin(ae)))}return Y}(this.params.starsCount),E=s.aA(300),M=new s.cP,k=new s.aw;let F=0;for(let j=0;j<C.length;++j){const V=s.N.scale([],C[j],200),Y=Math.max(0,1+.01*_*(1*E()-.5)),te=Math.max(0,1+.01*B*(1*E()-.5));M.emplaceBack(V[0],V[1],V[2],-1,-1,Y,te),M.emplaceBack(V[0],V[1],V[2],1,-1,Y,te),M.emplaceBack(V[0],V[1],V[2],1,1,Y,te),M.emplaceBack(V[0],V[1],V[2],-1,1,Y,te),k.emplaceBack(F+0,F+1,F+2),k.emplaceBack(F+0,F+2,F+3),F+=4}this.starsVx=h.createVertexBuffer(M,Od.members),this.starsIdx=h.createIndexBuffer(k),this.starsSegments=s.aB.simpleSegment(0,0,M.length,k.length)}}destroy(){this.atmosphereBuffer&&this.atmosphereBuffer.destroy(),this.starsVx&&this.starsVx.destroy(),this.starsIdx&&this.starsIdx.destroy()}drawAtmosphereGlow(l,h){const _=l.context,B=_.gl,C=l.transform,E=new dr(B.LEQUAL,dr.ReadOnly,[0,1]),M=s.S(C.zoom),k=h.properties.get("color").toArray01(),F=h.properties.get("high-color").toArray01(),j=h.properties.get("space-color").toArray01PremultipliedAlpha(),V=5e-4,Y=s.cQ(h.properties.get("horizon-blend"),0,1,V,.25),te=s.cd(l,_,C)&&Y===V?C.worldSize/(2*Math.PI*1.025)-1:C.globeRadius,le=l.frameCounter/1e3%1,ae=s.N.length(C.globeCenterInViewSpace),ue=Math.sqrt(Math.pow(ae,2)-Math.pow(te,2)),ne=Math.acos(ue/ae),he=ye=>{const de=C.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"];ye&&de.push("ALPHA_PASS");const ve=l.getOrCreateProgram("globeAtmosphere",{defines:de}),ce=((Ee,Pe,Re,Xe,Fe,it,rt,Bt,Ve,et,ke,Ze)=>({u_frustum_tl:Ee,u_frustum_tr:Pe,u_frustum_br:Re,u_frustum_bl:Xe,u_horizon:Fe,u_transition:it,u_fadeout_range:rt,u_color:Bt,u_high_color:Ve,u_space_color:et,u_temporal_offset:ke,u_horizon_angle:Ze}))(C.frustumCorners.TL,C.frustumCorners.TR,C.frustumCorners.BR,C.frustumCorners.BL,C.frustumCorners.horizon,M,Y,k,F,j,le,ne);l.uploadCommonUniforms(_,ve);const xe=this.atmosphereBuffer;xe&&ve.draw(l,B.TRIANGLES,E,yr.disabled,ye?this.colorModeWriteAlpha:this.colorModeAlphaBlendedWriteRGB,cr.backCW,ce,ye?"atmosphere_glow_alpha":"atmosphere_glow",xe.vertexBuffer,xe.indexBuffer,xe.segments)};he(!1),he(!0)}drawStars(l,h){const _=s.aa(h.properties.get("star-intensity"),0,1);if(_===0)return;const B=l.context,C=B.gl,E=l.transform,M=l.getOrCreateProgram("stars"),k=s.bi.identity([]);s.bi.rotateX(k,k,-E._pitch),s.bi.rotateZ(k,k,-E.angle),s.bi.rotateX(k,k,s.bj(E._center.lat)),s.bi.rotateY(k,k,-s.bj(E._center.lng));const F=s.a6.fromQuat(new Float32Array(16),k),j=s.a6.multiply([],E.starsProjMatrix,F),V=s.co.fromMat4([],F),Y=s.co.invert([],V),te=[0,1,0];s.N.transformMat3(te,te,Y),s.N.scale(te,te,this.params.sizeMultiplier);const le=[1,0,0];s.N.transformMat3(le,le,Y),s.N.scale(le,le,this.params.sizeMultiplier);const ae=(ue=te,ne=le,he=_,{u_matrix:Float32Array.from(j),u_up:ue,u_right:ne,u_intensity_multiplier:he});var ue,ne,he;l.uploadCommonUniforms(B,M),this.starsVx&&this.starsIdx&&M.draw(l,C.TRIANGLES,dr.disabled,yr.disabled,this.colorModeAlphaBlendedWriteRGB,cr.disabled,ae,"atmosphere_stars",this.starsVx,this.starsIdx,this.starsSegments)}}function Wc(g,l){const h=[...g],_=l.cameraWorldSizeForFog/l.worldSize,B=s.a6.identity([]);return s.a6.scale(B,B,[_,_,1]),s.a6.multiply(h,B,h),s.a6.multiply(h,l.worldToFogMatrix,h),h}function mi(g,l,h,_){const B=h.material,C=_.context,{baseColorTexture:E,metallicRoughnessTexture:M}=B.pbrMetallicRoughness,{normalTexture:k,occlusionTexture:F,emissionTexture:j}=B;function V(Y,te,le){if(Y&&(g.push(te),C.activeTexture.set(C.gl.TEXTURE0+le),Y.gfxTexture)){const{minFilter:ae,magFilter:ue,wrapS:ne,wrapT:he}=Y.sampler;Y.gfxTexture.bindExtraParam(ae,ue,ne,he)}}V(E,"HAS_TEXTURE_u_baseColorTexture",Gi.BaseColor),V(M,"HAS_TEXTURE_u_metallicRoughnessTexture",Gi.MetallicRoughness),V(k,"HAS_TEXTURE_u_normalTexture",Gi.Normal),V(F,"HAS_TEXTURE_u_occlusionTexture",Gi.Occlusion),V(j,"HAS_TEXTURE_u_emissionTexture",Gi.Emission),h.texcoordBuffer&&(g.push("HAS_ATTRIBUTE_a_uv_2f"),l.push(h.texcoordBuffer)),h.colorBuffer&&(g.push(h.colorBuffer.itemSize===12?"HAS_ATTRIBUTE_a_color_3f":"HAS_ATTRIBUTE_a_color_4f"),l.push(h.colorBuffer)),h.normalBuffer&&(g.push("HAS_ATTRIBUTE_a_normal_3f"),l.push(h.normalBuffer)),h.pbrBuffer&&(g.push("HAS_ATTRIBUTE_a_pbr"),g.push("HAS_ATTRIBUTE_a_heightBasedEmissiveStrength"),l.push(h.pbrBuffer)),B.alphaMode!=="OPAQUE"&&B.alphaMode!=="MASK"||g.push("UNPREMULT_TEXTURE_IN_SHADER"),B.defined||g.push("DIFFUSE_SHADED"),g.push("USE_STANDARD_DERIVATIVES")}function kd(g,l,h,_,B,C){const E=h.paint.get("model-opacity"),M=l.context,k=new dr(l.context.gl.LEQUAL,dr.ReadWrite,l.depthRangeFor3D),F=l.transform,j=g.mesh,V=j.material,Y=V.pbrMetallicRoughness,te=l.style.fog;let le;le=l.transform.projection.zAxisUnit==="pixels"?[...g.nodeModelMatrix]:s.a6.multiply([],_.zScaleMatrix,g.nodeModelMatrix),s.a6.multiply(le,_.negCameraPosMatrix,le);const ae=s.a6.invert([],le);s.a6.transpose(ae,ae);const ue=h.paint.get("model-emissive-strength").constantOr(0),ne=dm(new Float32Array(g.worldViewProjection),new Float32Array(le),new Float32Array(ae),l,E,Y.baseColorFactor,V.emissiveFactor,Y.metallicFactor,Y.roughnessFactor,V,ue,h),he={defines:[]},ye=[];mi(he.defines,ye,j,l);const de=l.shadowRenderer;de&&(de.useNormalOffset=!1);let ve=null;if(te){const Ee=Wc(g.nodeModelMatrix,l.transform);if(ve=new Float32Array(Ee),F.projection.name!=="globe"){const Pe=j.aabb.min,Re=j.aabb.max,[Xe,Fe]=te.getOpacityForBounds(Ee,Pe[0],Pe[1],Re[0],Re[1]);he.overrideFog=Xe>=vn||Fe>=vn}}const ce=xl(l,h.paint.get("model-cutoff-fade-range"));ce.shouldRenderCutoff&&he.defines.push("RENDER_CUTOFF");const xe=l.getOrCreateProgram("model",he);l.uploadCommonUniforms(M,xe,null,ve,ce),l.renderPass!=="shadow"&&de&&de.setupShadowsFromMatrix(g.nodeModelMatrix,xe),xe.draw(l,M.gl.TRIANGLES,k,B,C,j.material.doubleSided?cr.disabled:cr.backCCW,ne,h.id,j.vertexBuffer,j.indexBuffer,j.segments,h.paint,l.transform.zoom,void 0,ye)}function Ld(g,l,h,_,B,C,E){let M;M=g.projection.name==="globe"?s.cS(h,g):[...h],s.a6.multiply(M,M,l.matrix);const k=s.a6.multiply([],_,M);if(l.meshes)for(const F of l.meshes){if(F.material.alphaMode!=="BLEND"){E.push({mesh:F,depth:0,modelIndex:B,worldViewProjection:k,nodeModelMatrix:M});continue}const j=s.N.transformMat4([],F.centroid,k);j[2]>0&&C.push({mesh:F,depth:j[2],modelIndex:B,worldViewProjection:k,nodeModelMatrix:M})}if(l.children)for(const F of l.children)Ld(g,F,h,_,B,C,E)}function Ke(g,l,h,_){const B=h.shadowRenderer;if(!B)return;const C=B.getShadowPassDepthMode(),E=B.getShadowPassColorMode(),M=B.calculateShadowPassMatrixFromMatrix(l),k=Md(M);h.getOrCreateProgram("modelDepth",{defines:h._shadowMapDebug?[]:["DEPTH_TEXTURE"]}).draw(h,h.context.gl.TRIANGLES,C,yr.disabled,E,cr.backCCW,k,_.id,g.vertexBuffer,g.indexBuffer,g.segments,_.paint,h.transform.zoom,void 0,void 0)}function ty(g,l,h){const _=l.updateZoomBasedPaintProperties(),B=function(C,E,M){let k,F,j,V=C.terrain?C.terrain.exaggeration():0;if(C.terrain&&V>0){const Y=C.terrain,te=Y.findDEMTileFor(M);te&&te.dem?k=s.cU.create(Y,M,te):V=0}if(V===0&&(E.terrainElevationMin=0,E.terrainElevationMax=0),V===E.validForExaggeration&&(V===0||k&&k._demTile&&k._demTile.tileID===E.validForDEMTile.id&&k._dem._timestamp===E.validForDEMTile.timestamp))return!1;for(const Y in E.instancesPerModel){const te=E.instancesPerModel[Y];for(let le=0;le<te.instancedDataArray.length;++le){const ae=(k?V*k.getElevationAt(0|te.instancedDataArray.float32[16*le],0|te.instancedDataArray.float32[16*le+1],!0,!0):0)+te.instancesEvaluatedElevation[le];te.instancedDataArray.float32[16*le+6]=ae,F=F?Math.min(E.terrainElevationMin,ae):ae,j=j?Math.max(E.terrainElevationMax,ae):ae}}return E.terrainElevationMin=F||0,E.terrainElevationMax=j||0,E.validForExaggeration=V,E.validForDEMTile=k&&k._demTile?{id:k._demTile.tileID,timestamp:k._dem._timestamp}:{id:void 0,timestamp:0},!0}(g,l,h);(_||B)&&(l.uploaded=!1,l.upload(g.context))}const Qa={shadowUniformsInitialized:!1,useSingleShadowCascade:!1,tileMatrix:new Float64Array(16),shadowTileMatrix:new Float32Array(16),aabb:new s.bS([0,0,0],[s.V,s.V,0])};function t1(g,l){const h=1<<g.canonical.z,_=l.getFreeCameraOptions().position,B=l.elevation,C=g.canonical.x/h,E=(g.canonical.x+1)/h,M=g.canonical.y/h,k=(g.canonical.y+1)/h;let F=l._centerAltitude;if(B){const te=B.getMinMaxForTile(g);te&&te.max>F&&(F=te.max)}const j=s.aa(_.x,C,E)-_.x,V=s.aa(_.y,M,k)-_.y,Y=s.bl(F,l.center.lat)-_.z;return l._zoomFromMercatorZ(Math.sqrt(j*j+V*V+Y*Y))}function ry(g,l,h,_,B,C,E){const M=g.context,k=g.renderPass==="shadow",F=g.shadowRenderer,j=k&&F?F.getShadowPassDepthMode():new dr(M.gl.LEQUAL,dr.ReadWrite,g.depthRangeFor3D),V=g.isTileAffectedByFog(C);if(h.meshes)for(const Y of h.meshes){const te=["MODEL_POSITION_ON_GPU"],le=[];let ae,ue,ne;_.instancedDataArray.length>20&&te.push("INSTANCED_ARRAYS");const he=xl(g,l.paint.get("model-cutoff-fade-range"));if(he.shouldRenderCutoff&&te.push("RENDER_CUTOFF"),k&&F)ae=g.getOrCreateProgram("modelDepth",{defines:te}),ue=Md(E.shadowTileMatrix,E.shadowTileMatrix,Float32Array.from(h.matrix)),ne=F.getShadowPassColorMode();else{mi(te,le,Y,g),ae=g.getOrCreateProgram("model",{defines:te,overrideFog:V});const de=Y.material,ve=de.pbrMetallicRoughness,ce=l.paint.get("model-opacity"),xe=l.paint.get("model-emissive-strength").constantOr(0);ue=dm(C.expandedProjMatrix,Float32Array.from(h.matrix),new Float32Array(16),g,ce,ve.baseColorFactor,de.emissiveFactor,ve.metallicFactor,ve.roughnessFactor,de,xe,l,B),F&&(E.shadowUniformsInitialized?ae.setShadowUniformValues(M,F.getShadowUniformValues()):(F.setupShadows(C.toUnwrapped(),ae,"model-tile",C.overscaledZ),E.shadowUniformsInitialized=!0)),ne=he.shouldRenderCutoff||ce<1||de.alphaMode!=="OPAQUE"?Nr.alphaBlended:Nr.unblended}g.uploadCommonUniforms(M,ae,C.toUnwrapped(),null,he);const ye=Y.material.doubleSided?cr.disabled:cr.backCCW;if(_.instancedDataArray.length>20)le.push(_.instancedDataBuffer),ae.draw(g,M.gl.TRIANGLES,j,yr.disabled,ne,ye,ue,l.id,Y.vertexBuffer,Y.indexBuffer,Y.segments,l.paint,g.transform.zoom,void 0,le,_.instancedDataArray.length);else{const de=k?"u_instance":"u_normal_matrix";for(let ve=0;ve<_.instancedDataArray.length;++ve)ue[de]=new Float32Array(_.instancedDataArray.arrayBuffer,64*ve,16),ae.draw(g,M.gl.TRIANGLES,j,yr.disabled,ne,ye,ue,l.id,Y.vertexBuffer,Y.indexBuffer,Y.segments,l.paint,g.transform.zoom,void 0,le)}}if(h.children)for(const Y of h.children)ry(g,l,Y,_,B,C,E)}const tf=[1,-1,1];function VS(g,l,h,_){if(!h.modelManager)return!0;const B=h.modelManager;if(!h.shadowRenderer)return!0;const C=h.shadowRenderer,E=l.aabb;let M=!0,k=g.maxHeight;if(k===0){let j=0;for(const V in g.instancesPerModel){const Y=B.getModel(V,_);Y?j=Math.max(j,Math.max(Math.max(Y.aabb.max[0],Y.aabb.max[1]),Y.aabb.max[2])):M=!1}k=g.maxScale*j*1.41+g.maxVerticalOffset,M&&(g.maxHeight=k)}E.max[2]=k,E.min[2]+=g.terrainElevationMin,E.max[2]+=g.terrainElevationMax,s.N.transformMat4(E.min,E.min,l.tileMatrix),s.N.transformMat4(E.max,E.max,l.tileMatrix);const F=E.intersects(C.getCurrentCascadeFrustum());return h.currentShadowCascade===0&&(g.isInsideFirstShadowMapFrustum=F===2),F===0}class GS{}class r1{constructor(){this._storage=new Map}getLinesFromTrianglesBuffer(l,h,_){{const V=this._storage.get(h.id);if(V)return V.lastUsedFrameIdx=l,V.buf}const B=_.gl,C=B.getBufferParameter(B.ELEMENT_ARRAY_BUFFER,B.BUFFER_SIZE),E=new ArrayBuffer(C),M=new Int16Array(E);B.getBufferSubData(B.ELEMENT_ARRAY_BUFFER,0,new Int16Array(E));const k=new s.cW;for(let V=0;V<C/2;V+=3){const Y=M[V],te=M[V+1],le=M[V+2];k.emplaceBack(Y,te),k.emplaceBack(te,le),k.emplaceBack(le,Y)}const F=_.bindVertexArrayOES.current,j=new GS;return j.buf=new Fn(_,k),j.lastUsedFrameIdx=l,this._storage.set(h.id,j),_.bindVertexArrayOES.set(F),j.buf}update(l){for(const[h,_]of this._storage)l-_.lastUsedFrameIdx>30&&(_.buf.destroy(),this._storage.delete(h))}destroy(){for(const[l,h]of this._storage)h.buf.destroy(),this._storage.delete(l)}}class Rd{registerParameter(l,h,_,B,C){}registerButton(l,h,_){}}const zd={symbol:function(g,l,h,_,B){if(g.renderPass!=="translucent")return;const C=yr.disabled,E=g.colorModeForRenderPass();h.layout.get("text-variable-anchor")&&function(F,j,V,Y,te,le,ae){const ue=j.transform,ne=te==="map",he=le==="map";for(const ye of F){const de=Y.getTile(ye),ve=de.getBucket(V);if(!ve||!ve.text||!ve.text.segments.get().length)continue;const ce=s.b5(ve.textSizeData,ue.zoom),xe=Oc(ye,ve.getProjection(),ue),Ee=ue.calculatePixelsToTileUnitsMatrix(de),Pe=Pc(xe,de.tileID.canonical,he,ne,ue,ve.getProjection(),Ee),Re=ve.hasIconTextFit()&&ve.hasIconData();if(ce){const Xe=Math.pow(2,ue.zoom-de.tileID.overscaledZ);XB(ve,ne,he,ae,s.cx,ue,Pe,ye,Xe,ce,Re)}}}(_,g,h,l,h.layout.get("text-rotation-alignment"),h.layout.get("text-pitch-alignment"),B);const M=h.paint.get("icon-opacity").constantOr(1)!==0,k=h.paint.get("text-opacity").constantOr(1)!==0;h.layout.get("symbol-sort-key").constantOr(1)!==void 0&&(M||k)?pm(g,l,h,_,C,E):(M&&pm(g,l,h,_,C,E,{onlyIcons:!0}),k&&pm(g,l,h,_,C,E,{onlyText:!0})),l.map.showCollisionBoxes&&(js(g,l,h,_,h.paint.get("text-translate"),h.paint.get("text-translate-anchor"),!0),js(g,l,h,_,h.paint.get("icon-translate"),h.paint.get("icon-translate-anchor"),!1))},circle:function(g,l,h,_){if(g.renderPass!=="translucent")return;const B=h.paint.get("circle-opacity"),C=h.paint.get("circle-stroke-width"),E=h.paint.get("circle-stroke-opacity"),M=h.layout.get("circle-sort-key").constantOr(1)!==void 0,k=h.paint.get("circle-emissive-strength");if(B.constantOr(1)===0&&(C.constantOr(1)===0||E.constantOr(1)===0))return;const F=g.context,j=F.gl,V=g.transform,Y=g.depthModeForSublayer(0,dr.ReadOnly),te=yr.disabled,le=g.colorModeForDrapableLayerRenderPass(k),ae=V.projection.name==="globe",ue=[s.a5(V.center.lng),s.ae(V.center.lat)],ne=[];for(let ye=0;ye<_.length;ye++){const de=_[ye],ve=l.getTile(de),ce=ve.getBucket(h);if(!ce||ce.projection.name!==V.projection.name)continue;const xe=ce.programConfigurations.get(h.id),Ee=s.cy(h),Pe=g.isTileAffectedByFog(de);ae&&Ee.push("PROJECTION_GLOBE_VIEW");const Re=g.getOrCreateProgram("circle",{config:xe,defines:Ee,overrideFog:Pe}),Xe=ce.layoutVertexBuffer,Fe=ce.globeExtVertexBuffer,it=ce.indexBuffer,rt=V.projection.createInversionMatrix(V,de.canonical),Bt={programConfiguration:xe,program:Re,layoutVertexBuffer:Xe,globeExtVertexBuffer:Fe,indexBuffer:it,uniformValues:s.cz(g,de,ve,rt,ue,h),tile:ve};if(M){const Ve=ce.segments.get();for(const et of Ve)ne.push({segments:new s.aB([et]),sortKey:et.sortKey,state:Bt})}else ne.push({segments:ce.segments,sortKey:0,state:Bt})}M&&ne.sort((ye,de)=>ye.sortKey-de.sortKey);const he={useDepthForOcclusion:V.depthOcclusionForSymbolsAndCircles};for(const ye of ne){const{programConfiguration:de,program:ve,layoutVertexBuffer:ce,globeExtVertexBuffer:xe,indexBuffer:Ee,uniformValues:Pe,tile:Re}=ye.state,Xe=ye.segments;g.terrain&&g.terrain.setupElevationDraw(Re,ve,he),g.uploadCommonUniforms(F,ve,Re.tileID.toUnwrapped()),ve.draw(g,j.TRIANGLES,Y,te,le,cr.disabled,Pe,h.id,ce,Ee,Xe,h.paint,V.zoom,de,[xe])}},heatmap:function(g,l,h,_){if(h.paint.get("heatmap-opacity")!==0)if(g.renderPass==="offscreen"){const B=g.context,C=B.gl,E=yr.disabled,M=new Nr([C.ONE,C.ONE,C.ONE,C.ONE],s.ax.transparent,[!0,!0,!0,!0]);(function(te,le,ae,ue){const ne=te.gl,he=le.width*ue,ye=le.height*ue;te.activeTexture.set(ne.TEXTURE1),te.viewport.set([0,0,he,ye]);let de=ae.heatmapFbo;if(!de||de&&(de.width!==he||de.height!==ye)){de&&de.destroy();const ve=ne.createTexture();ne.bindTexture(ne.TEXTURE_2D,ve),ne.texParameteri(ne.TEXTURE_2D,ne.TEXTURE_WRAP_S,ne.CLAMP_TO_EDGE),ne.texParameteri(ne.TEXTURE_2D,ne.TEXTURE_WRAP_T,ne.CLAMP_TO_EDGE),ne.texParameteri(ne.TEXTURE_2D,ne.TEXTURE_MIN_FILTER,ne.LINEAR),ne.texParameteri(ne.TEXTURE_2D,ne.TEXTURE_MAG_FILTER,ne.LINEAR),de=ae.heatmapFbo=te.createFramebuffer(he,ye,!0,null),function(ce,xe,Ee,Pe,Re,Xe){const Fe=ce.gl;Fe.texImage2D(Fe.TEXTURE_2D,0,ce.extRenderToTextureHalfFloat?Fe.RGBA16F:Fe.RGBA,Re,Xe,0,Fe.RGBA,ce.extRenderToTextureHalfFloat?Fe.HALF_FLOAT:Fe.UNSIGNED_BYTE,null),Pe.colorAttachment.set(Ee)}(te,0,ve,de,he,ye)}else ne.bindTexture(ne.TEXTURE_2D,de.colorAttachment.get()),te.bindFramebuffer.set(de.framebuffer)})(B,g,h,g.transform.projection.name==="globe"?.5:.25),B.clear({color:s.ax.transparent});const k=g.transform,F=k.projection.name==="globe",j=F?["PROJECTION_GLOBE_VIEW"]:[],V=F?cr.frontCCW:cr.disabled,Y=[s.a5(k.center.lng),s.ae(k.center.lat)];for(let te=0;te<_.length;te++){const le=_[te];if(l.hasRenderableParent(le))continue;const ae=l.getTile(le),ue=ae.getBucket(h);if(!ue||ue.projection.name!==k.projection.name)continue;const ne=g.isTileAffectedByFog(le),he=ue.programConfigurations.get(h.id),ye=g.getOrCreateProgram("heatmap",{config:he,defines:j,overrideFog:ne}),{zoom:de}=g.transform;g.terrain&&g.terrain.setupElevationDraw(ae,ye),g.uploadCommonUniforms(B,ye,le.toUnwrapped());const ve=k.projection.createInversionMatrix(k,le.canonical);ye.draw(g,C.TRIANGLES,dr.disabled,E,M,V,$_(g,le,ae,ve,Y,de,h.paint.get("heatmap-intensity")),h.id,ue.layoutVertexBuffer,ue.indexBuffer,ue.segments,h.paint,g.transform.zoom,he,F?[ue.globeExtVertexBuffer]:null)}B.viewport.set([0,0,g.width,g.height])}else g.renderPass==="translucent"&&(g.context.setColorMode(g.colorModeForRenderPass()),function(B,C){const E=B.context,M=E.gl,k=C.heatmapFbo;if(!k)return;E.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,k.colorAttachment.get()),E.activeTexture.set(M.TEXTURE1);let F=C.colorRampTexture;F||(F=C.colorRampTexture=new s.T(E,C.colorRamp,M.RGBA)),F.bind(M.LINEAR,M.CLAMP_TO_EDGE),B.getOrCreateProgram("heatmapTexture").draw(B,M.TRIANGLES,dr.disabled,yr.disabled,B.colorModeForRenderPass(),cr.disabled,((j,V,Y,te)=>({u_image:0,u_color_ramp:1,u_opacity:V.paint.get("heatmap-opacity")}))(0,C),C.id,B.viewportBuffer,B.quadTriangleIndexBuffer,B.viewportSegments,C.paint,B.transform.zoom)}(g,h))},line:function(g,l,h,_){if(g.renderPass!=="translucent")return;const B=h.paint.get("line-opacity"),C=h.paint.get("line-width");if(B.constantOr(1)===0||C.constantOr(1)===0)return;const E=h.paint.get("line-emissive-strength"),M=g.depthModeForSublayer(0,dr.ReadOnly),k=g.colorModeForDrapableLayerRenderPass(E),F=g.terrain&&g.terrain.renderingToTexture?1:s.f.devicePixelRatio,j=h.paint.get("line-dasharray"),V=j.constantOr(1),Y=h.layout.get("line-cap"),te=h.paint.get("line-pattern"),le=te.constantOr(1),ae=h.paint.get("line-pattern").constantOr(1),ue=h.paint.get("line-opacity").constantOr(1)!==1;let ne=!ae&&ue;const he=h.paint.get("line-gradient"),ye=le?"linePattern":"line",de=g.context,ve=de.gl,ce=s.cA(h);g.terrain&&g.terrain.clipOrMaskOverlapStencilType()&&(ne=!1);for(const xe of _){const Ee=l.getTile(xe);if(le&&!Ee.patternsLoaded())continue;const Pe=Ee.getBucket(h);if(!Pe)continue;g.prepareDrawTile();const Re=Pe.programConfigurations.get(h.id),Xe=g.isTileAffectedByFog(xe),Fe=g.getOrCreateProgram(ye,{config:Re,defines:ce,overrideFog:Xe}),it=te.constantOr(null);if(it&&Ee.imageAtlas){const Pt=Ee.imageAtlas.patternPositions[it.toString()];Pt&&Re.setConstantPatternPositions(Pt)}const rt=j.constantOr(null),Bt=Y.constantOr(null);if(!le&&rt&&Bt&&Ee.lineAtlas){const Pt=Ee.lineAtlas.getDash(rt,Bt);Pt&&Re.setConstantPatternPositions(Pt)}let[Ve,et]=h.paint.get("line-trim-offset");(Bt==="round"||Bt==="square")&&Ve!==et&&(Ve===0&&(Ve-=1),et===1&&(et+=1));const ke=g.terrain?xe.projMatrix:null,Ze=le?s.cB(g,Ee,h,ke,F,[Ve,et]):s.cC(g,Ee,h,ke,Pe.lineClipsArray.length,F,[Ve,et]);if(he){const Pt=Pe.gradients[h.id];let At=Pt.texture;if(h.gradientVersion!==Pt.version){let Ft=256;if(h.stepInterpolant){const tr=l.getSource().maxzoom,hr=xe.canonical.z===tr?Math.ceil(1<<g.transform.maxZoom-xe.canonical.z):1;Ft=s.aa(s.cD(Pe.maxLineLength/s.V*1024*hr),256,de.maxTextureSize)}Pt.gradient=s.cE({expression:h.gradientExpression(),evaluationKey:"lineProgress",resolution:Ft,image:Pt.gradient||void 0,clips:Pe.lineClipsArray}),Pt.texture?Pt.texture.update(Pt.gradient):Pt.texture=new s.T(de,Pt.gradient,ve.RGBA),Pt.version=h.gradientVersion,At=Pt.texture}de.activeTexture.set(ve.TEXTURE1),At.bind(h.stepInterpolant?ve.NEAREST:ve.LINEAR,ve.CLAMP_TO_EDGE)}V&&(de.activeTexture.set(ve.TEXTURE0),Ee.lineAtlasTexture&&Ee.lineAtlasTexture.bind(ve.LINEAR,ve.REPEAT),Re.updatePaintBuffers()),le&&(de.activeTexture.set(ve.TEXTURE0),Ee.imageAtlasTexture&&Ee.imageAtlasTexture.bind(ve.LINEAR,ve.CLAMP_TO_EDGE),Re.updatePaintBuffers()),g.uploadCommonUniforms(de,Fe,xe.toUnwrapped());const bt=Pt=>{Fe.draw(g,ve.TRIANGLES,M,Pt,k,cr.disabled,Ze,h.id,Pe.layoutVertexBuffer,Pe.indexBuffer,Pe.segments,h.paint,g.transform.zoom,Re,[Pe.layoutVertexBuffer2])};if(ne){const Pt=g.stencilModeForClipping(xe).ref;Pt===0&&g.terrain&&de.clear({stencil:0});const At={func:ve.EQUAL,mask:255};Ze.u_alpha_discard_threshold=.8,bt(new yr(At,Pt,255,ve.KEEP,ve.KEEP,ve.INVERT)),Ze.u_alpha_discard_threshold=0,bt(new yr(At,Pt,255,ve.KEEP,ve.KEEP,ve.KEEP))}else bt(g.stencilModeForClipping(xe))}ne&&(g.resetStencilClippingMasks(),g.terrain&&de.clear({stencil:0}))},fill:function(g,l,h,_){const B=h.paint.get("fill-color"),C=h.paint.get("fill-opacity");if(C.constantOr(1)===0)return;const E=h.paint.get("fill-emissive-strength"),M=g.colorModeForDrapableLayerRenderPass(E),k=h.paint.get("fill-pattern"),F=g.opaquePassEnabledForLayer()&&!k.constantOr(1)&&B.constantOr(s.ax.transparent).a===1&&C.constantOr(0)===1?"opaque":"translucent";if(g.renderPass===F){const j=g.depthModeForSublayer(1,g.renderPass==="opaque"?dr.ReadWrite:dr.ReadOnly);Gc(g,l,h,_,j,M,!1)}if(g.renderPass==="translucent"&&h.paint.get("fill-antialias")){const j=g.depthModeForSublayer(h.getPaintProperty("fill-outline-color")?2:0,dr.ReadOnly);Gc(g,l,h,_,j,M,!0)}},"fill-extrusion":function(g,l,h,_){const B=h.paint.get("fill-extrusion-opacity"),C=g.context,E=C.gl,M=g.terrain,k=M&&M.renderingToTexture;if(B===0)return;const F=g.conflationActive&&g.layerUsedInConflation(h,l.getSource());if(F&&function(j,V,Y,te){for(const le of te){const ae=V.getTile(le).getBucket(Y);ae&&(ae.updateReplacement(le,j.replacementSource),ae.uploadCentroid(j.context))}}(g,l,h,_),M||F)for(const j of _){const V=l.getTile(j).getBucket(h);V&&jS(g.context,l,j,V,h,M,F)}if(g.renderPass==="shadow"&&g.shadowRenderer){const j=g.shadowRenderer;if(M&&B<.65&&h._transitionablePaint._values["fill-extrusion-opacity"].value.expression instanceof s.Z)return;const V=j.getShadowPassDepthMode(),Y=j.getShadowPassColorMode();nr(g,l,h,_,V,yr.disabled,Y,F)}else if(g.renderPass==="translucent"){const j=!h.paint.get("fill-extrusion-pattern").constantOr(1),V=h.paint.get("fill-extrusion-color").constantOr(s.ax.white);if(!k&&V.a!==0){const Y=new dr(g.context.gl.LEQUAL,dr.ReadWrite,g.depthRangeFor3D);B===1&&j?nr(g,l,h,_,Y,yr.disabled,Nr.unblended,F):(nr(g,l,h,_,Y,yr.disabled,Nr.disabled,F),nr(g,l,h,_,Y,g.stencilModeFor3D(),g.colorModeForRenderPass(),F),g.resetStencilClippingMasks())}if(g.style.enable3dLights()&&j&&(!M&&g.transform.projection.name!=="globe"||k)){const Y=h.paint.get("fill-extrusion-opacity"),te=h.paint.get("fill-extrusion-ambient-occlusion-intensity"),le=h.paint.get("fill-extrusion-ambient-occlusion-ground-radius"),ae=h.paint.get("fill-extrusion-flood-light-intensity"),ue=h.paint.get("fill-extrusion-flood-light-color").toArray01().slice(0,3),ne=te>0&&le>0,he=ae>0,ye=(ve,ce,xe)=>(1-xe)*ve+xe*ce,de=ve=>{const ce=g.depthModeForSublayer(1,dr.ReadOnly,E.LEQUAL,!0),xe=h.paint.get(ve?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),Ee=ye(.1,3,xe),Pe=g._showOverdrawInspector;if(!Pe){const Re=new yr({func:E.ALWAYS,mask:255},255,255,E.KEEP,E.KEEP,E.REPLACE),Xe=new Nr([E.ONE,E.ONE,E.ONE,E.ONE],s.ax.transparent,[!1,!1,!1,!0],E.MIN);Ku(g,l,h,_,ce,Re,Xe,cr.disabled,ve,"sdf",Y,te,le,ae,ue,Ee,F,!1)}{const Re=Pe?yr.disabled:new yr({func:E.EQUAL,mask:255},255,255,E.KEEP,E.DECR,E.DECR),Xe=Pe?g.colorModeForRenderPass():new Nr([E.ONE_MINUS_DST_ALPHA,E.DST_ALPHA,E.ONE,E.ONE],s.ax.transparent,[!0,!0,!0,!0]);Ku(g,l,h,_,ce,Re,Xe,cr.disabled,ve,"color",Y,te,le,ae,ue,Ee,F,!1)}};if(k){const ve=(ce,xe,Ee)=>{const Pe=g.depthModeForSublayer(1,dr.ReadOnly,E.LEQUAL,!1),Re=h.paint.get(ce?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),Xe=ye(.1,3,Re);{const Fe=new Nr([E.ONE,E.ONE,E.ONE,E.ONE],s.ax.transparent,[!1,!1,!1,!0]);Ku(g,l,h,_,Pe,yr.disabled,Fe,cr.disabled,ce,"clear",Y,te,le,ae,ue,Xe,F,xe)}{const Fe=new yr({func:E.ALWAYS,mask:255},255,255,E.KEEP,E.KEEP,E.REPLACE),it=new Nr([E.ONE,E.ONE,E.ONE,E.ONE],s.ax.transparent,[!1,!1,!1,!0],E.MIN);Ku(g,l,h,_,Pe,Fe,it,cr.disabled,ce,"sdf",Y,te,le,ae,ue,Xe,F,xe)}{const Fe=ce?E.ZERO:E.ONE_MINUS_DST_ALPHA,it=new yr({func:E.EQUAL,mask:255},255,255,E.KEEP,E.DECR,E.DECR),rt=new Nr([Fe,E.DST_ALPHA,E.ONE_MINUS_DST_ALPHA,E.ZERO],s.ax.transparent,[!0,!0,!0,!0]);Ku(g,l,h,_,Pe,it,rt,cr.disabled,ce,"color",Y,te,le,ae,ue,Xe,F,xe)}{const Fe=new Nr([E.ONE,E.ONE,E.ONE,ce?E.ZERO:E.ONE],s.ax.transparent,[!1,!1,!1,!0],ce?E.FUNC_ADD:E.MAX);Ku(g,l,h,_,Pe,yr.disabled,Fe,cr.disabled,ce,"clear",Y,te,le,ae,ue,Xe,F,xe,Ee)}};if(ne||he){let ce;if(g.prepareDrawTile(),M){const xe=M.drapeBufferSize[0],Ee=M.drapeBufferSize[1];ce=M.framebufferCopyTexture,ce&&(!ce||ce.size[0]===xe&&ce.size[1]===Ee)||(ce&&ce.destroy(),ce=M.framebufferCopyTexture=new s.T(C,new s.h({width:xe,height:Ee}),E.RGBA)),ce.bind(E.LINEAR,E.CLAMP_TO_EDGE),E.copyTexImage2D(E.TEXTURE_2D,0,E.RGBA,0,0,xe,Ee,0)}ne&&ve(!0,!1,ce),he&&ve(!1,!0,ce)}}else ne&&de(!0),he&&de(!1)}}},hillshade:function(g,l,h,_){if(g.renderPass!=="offscreen"&&g.renderPass!=="translucent"||g.style.disableElevatedTerrain)return;const B=g.context,C=g.terrain&&g.terrain.renderingToTexture,[E,M]=g.renderPass!=="translucent"||C?[{},_]:g.stencilConfigForOverlap(_);for(const k of M){const F=l.getTile(k);if(F.needsHillshadePrepare&&g.renderPass==="offscreen")R(g,F,h);else if(g.renderPass==="translucent"){const j=g.depthModeForSublayer(0,dr.ReadOnly),V=h.paint.get("hillshade-emissive-strength"),Y=g.colorModeForDrapableLayerRenderPass(V),te=C&&g.terrain?g.terrain.stencilModeForRTTOverlap(k):E[k.overscaledZ];v(g,k,F,h,j,te,Y)}}B.viewport.set([0,0,g.width,g.height]),g.resetStencilClippingMasks()},raster:function(g,l,h,_,B,C){if(g.renderPass!=="translucent"||h.paint.get("raster-opacity")===0)return;const E=g.transform.projection.name==="globe",M=h.paint.get("raster-elevation")!==0,k=M&&E;if(g.renderElevatedRasterBackface&&!k)return;const F=g.context,j=F.gl,V=l.getSource(),Y=function(ce,xe,Ee,Pe){const Re=xe.paint.get("raster-color"),Xe=ce.type==="raster-array",Fe=[],it=xe.paint.get("raster-resampling"),rt=xe.paint.get("raster-color-mix");let Bt=xe.paint.get("raster-color-range");const Ve=[rt[0],rt[1],rt[2],0],et=rt[3];let ke=it==="nearest"?Pe.NEAREST:Pe.LINEAR;if(Xe&&(Fe.push("RASTER_ARRAY"),Re||Fe.push("RASTER_COLOR"),it==="linear"&&Fe.push("RASTER_ARRAY_LINEAR"),ke=Pe.NEAREST,!Bt&&ce.rasterLayers)){const Ze=ce.rasterLayers.find(({id:bt})=>bt===xe.sourceLayer);Ze&&Ze.fields&&Ze.fields.range&&(Bt=Ze.fields.range)}if(Bt=Bt||[0,1],Re){Fe.push("RASTER_COLOR"),Ee.activeTexture.set(Pe.TEXTURE2),xe.updateColorRamp(Bt);let Ze=xe.colorRampTexture;Ze||(Ze=xe.colorRampTexture=new s.T(Ee,xe.colorRamp,Pe.RGBA)),Ze.bind(Pe.LINEAR,Pe.CLAMP_TO_EDGE)}return{mix:Ve,range:Bt,offset:et,defines:Fe,resampling:ke}}(V,h,F,j);if(V instanceof s.ap&&!_.length&&!E)return;const te=h.paint.get("raster-emissive-strength"),le=g.colorModeForDrapableLayerRenderPass(te),ae=g.terrain&&g.terrain.renderingToTexture,ue=!g.options.moving,ne=h.paint.get("raster-resampling")==="nearest"?j.NEAREST:j.LINEAR;if(V instanceof s.ap&&!_.length&&(V.onNorthPole||V.onSouthPole)){const ce=M?g.stencilModeFor3D():yr.disabled;return void H_(!!V.onNorthPole,null,g,l,h,te,Y,cr.disabled,ce)}if(!_.length)return;const[he,ye]=V instanceof s.ap||ae?[{},_]:g.stencilConfigForOverlap(_),de=ye[ye.length-1].overscaledZ;k&&Y.defines.push("PROJECTION_GLOBE_VIEW"),M&&Y.defines.push("RENDER_CUTOFF");const ve=(ce,xe,Ee)=>{for(const Pe of ce){const Re=Pe.toUnwrapped(),Xe=l.getTile(Pe);if(ae&&(!Xe||!Xe.hasData()))continue;F.activeTexture.set(j.TEXTURE0);const Fe=Z_(Xe,V,h,Y);if(!Fe||!Fe.texture)continue;const{texture:it,mix:rt,offset:Bt,tileSize:Ve,buffer:et}=Fe;let ke,Ze;ae?(ke=dr.disabled,Ze=Pe.projMatrix):M?(ke=new dr(j.LEQUAL,dr.ReadWrite,g.depthRangeFor3D),Ze=E?Float32Array.from(g.transform.expandedFarZProjMatrix):g.transform.calculateProjMatrix(Re,ue)):(ke=g.depthModeForSublayer(Pe.overscaledZ-de,h.paint.get("raster-opacity")===1?dr.ReadWrite:dr.ReadOnly,j.LESS),Ze=g.transform.calculateProjMatrix(Re,ue));const bt=g.terrain&&ae?g.terrain.stencilModeForRTTOverlap(Pe):he[Pe.overscaledZ],Pt=C?0:h.paint.get("raster-fade-duration");Xe.registerFadeDuration(Pt);const At=l.findLoadedParent(Pe,0),Ft=Sn(Xe,At,l,g.transform,Pt);let tr,hr;g.terrain&&g.terrain.prepareDrawTile(),F.activeTexture.set(j.TEXTURE0),it.bind(ne,j.CLAMP_TO_EDGE),F.activeTexture.set(j.TEXTURE1),At?(At.texture&&At.texture.bind(ne,j.CLAMP_TO_EDGE),tr=Math.pow(2,At.tileID.overscaledZ-Xe.tileID.overscaledZ),hr=[Xe.tileID.canonical.x*tr%1,Xe.tileID.canonical.y*tr%1]):it.bind(ne,j.CLAMP_TO_EDGE),it.useMipmap&&F.extTextureFilterAnisotropic&&g.transform.pitch>20&&j.texParameterf(j.TEXTURE_2D,F.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,F.extTextureFilterAnisotropicMax);const ir=g.transform;let sr;const Lr=M?W_(ir):[0,0,0,0];let Cr,Pr,Dr,un,qn,Yr=0;if(k&&V instanceof s.ap&&V.coordinates.length>3)Cr=Float32Array.from(s.aT(s.ci(new s.bs(0,0,0)))),Pr=Float32Array.from(ir.globeMatrix),Dr=Float32Array.from(s.ce(ir)),un=[s.a5(ir.center.lng),s.ae(ir.center.lat)],sr=V.elevatedGlobePerspectiveTransform,qn=V.elevatedGlobeGridMatrix||new Float32Array(9);else if(k){const Qr=s.cf(Pe.canonical);Yr=s.cg(Qr.getCenter().lat),Cr=Float32Array.from(s.aT(s.ci(Pe.canonical))),Pr=Float32Array.from(ir.globeMatrix),Dr=Float32Array.from(s.ce(ir)),un=[s.a5(ir.center.lng),s.ae(ir.center.lat)],sr=[0,0],qn=Float32Array.from(s.ch(Pe.canonical,Qr,Yr,ir.worldSize/ir._pixelsPerMercatorPixel))}else sr=V instanceof s.ap?V.perspectiveTransform:[0,0],Cr=new Float32Array(16),Pr=new Float32Array(9),Dr=new Float32Array(16),un=[0,0],qn=new Float32Array(9);const gi=U_(Ze,Cr,Pr,Dr,qn,hr||[0,0],s.S(g.transform.zoom),un,Lr,tr||1,Ft,h,sr,M?h.paint.get("raster-elevation"):0,2,rt,Bt,Y.range,Ve,et,te),Jr=g.isTileAffectedByFog(Pe),gn=g.getOrCreateProgram("raster",{defines:Y.defines,overrideFog:Jr});if(g.uploadCommonUniforms(F,gn,Re),V instanceof s.ap){const Qr=V.elevatedGlobeVertexBuffer,fn=V.elevatedGlobeIndexBuffer;if(ae||!E)V.boundsBuffer&&V.boundsSegments&&gn.draw(g,j.TRIANGLES,ke,yr.disabled,le,cr.disabled,gi,h.id,V.boundsBuffer,g.quadTriangleIndexBuffer,V.boundsSegments);else if(Qr&&fn){const Jn=ir.zoom<=s.bG?V.elevatedGlobeSegments:V.getSegmentsForLongitude(ir.center.lng);Jn&&gn.draw(g,j.TRIANGLES,ke,yr.disabled,le,xe,gi,h.id,Qr,fn,Jn)}}else if(k){ke=new dr(j.LEQUAL,dr.ReadOnly,g.depthRangeFor3D);const Qr=g.globeSharedBuffers;if(Qr){const[fn,Jn,Cn]=Qr.getGridBuffers(Yr,!1);gn.draw(g,j.TRIANGLES,ke,Ee||bt,g.colorModeForRenderPass(),xe,gi,h.id,fn,Jn,Cn)}}else{const{tileBoundsBuffer:Qr,tileBoundsIndexBuffer:fn,tileBoundsSegments:Jn}=g.getTileBoundsBuffers(Xe);gn.draw(g,j.TRIANGLES,ke,bt,le,cr.disabled,gi,h.id,Qr,fn,Jn)}}if(!(V instanceof s.ap)&&k)for(const Pe of ce){const Re=Pe.canonical.y===(1<<Pe.canonical.z)-1;Pe.canonical.y===0&&H_(!0,Pe,g,l,h,te,Y,xe,Ee||yr.disabled),Re&&H_(!1,Pe,g,l,h,te,Y,xe===cr.frontCW?cr.backCW:cr.frontCW,Ee||yr.disabled)}};k?ve(ye,g.renderElevatedRasterBackface?cr.backCW:cr.frontCW,g.stencilModeFor3D()):ve(ye,cr.disabled,void 0),g.resetStencilClippingMasks()},"raster-particle":function(g,l,h,_,B,C){g.renderPass==="offscreen"&&function(E,M,k,F){if(!F.length)return;const j=E.context,V=j.gl,Y=M.getSource();if(!(Y instanceof Dt))return;const te=[];for(const ue of F){const ne=M.getTile(ue);if(!(ne instanceof gl))continue;const he=q_(ne,Y,k);if(!he)continue;const ye=[he.tileSize,he.tileSize];let de=k.tileFramebuffer;de||(de=k.tileFramebuffer=j.createFramebuffer(ye[0],ye[1],!0,null));let ve=ne.rasterParticleState;const ce=k.paint.get("raster-particle-count");ve||(ve=ne.rasterParticleState=new di(j,ue,ye,ce));const xe=ve.update(k.lastInvalidatedAt);ve.numParticles!==ce&&ve.setNumParticles(ue,ce);const Ee=ve.targetColorTexture;ve.targetColorTexture=ve.backgroundColorTexture,ve.backgroundColorTexture=Ee;const Pe=ve.particleVertices0;ve.particleVertices0=ve.particleVertices1,ve.particleVertices1=Pe,te.push([ue,he,ve,xe])}if(te.length===0)return;const le=s.f.now(),ae=k.previousDrawTimestamp?.001*(le-k.previousDrawTimestamp):.0167;if(k.previousDrawTimestamp=le,k.hasColorMap()){j.activeTexture.set(V.TEXTURE0+2);let ue=k.colorRampTexture;ue||(ue=k.colorRampTexture=new s.T(j,k.colorRamp,V.RGBA)),ue.bind(V.LINEAR,V.CLAMP_TO_EDGE)}j.bindFramebuffer.set(k.tileFramebuffer.framebuffer),j.activeTexture.set(V.TEXTURE0),function(ue,ne,he){const ye=ue.context,de=ye.gl,ve=ne.tileFramebuffer;ye.activeTexture.set(de.TEXTURE0);const ce={u_texture:0,u_opacity:1.05*(Ee=ne.paint.get("raster-particle-fade-opacity-factor"))/(Ee+.05)},xe=ue.getOrCreateProgram("rasterParticleTexture",{defines:[],overrideFog:!1});var Ee;for(const Pe of he){const[,,Re,Xe]=Pe;ve.colorAttachment.set(Re.targetColorTexture.texture),ye.viewport.set([0,0,ve.width,ve.height]),ye.clear({color:s.ax.transparent}),Xe&&(Re.backgroundColorTexture.bind(de.NEAREST,de.CLAMP_TO_EDGE),xe.draw(ue,de.TRIANGLES,dr.disabled,yr.disabled,Nr.alphaBlended,cr.disabled,ce,ne.id,ue.viewportBuffer,ue.quadTriangleIndexBuffer,ue.viewportSegments))}}(E,k,te),function(ue,ne,he,ye){const de=ue.context.gl,ve=he.tileFramebuffer,ce=ue.transform.projection.name==="globe",xe=he.paint.get("raster-particle-max-speed");for(const Ee of ye){const[Pe,Re,Xe]=Ee;Re.texture.bind(de.LINEAR,de.CLAMP_TO_EDGE),ve.colorAttachment.set(Xe.targetColorTexture.texture);const Fe=ue.getOrCreateProgram("rasterParticleDraw",{defines:Re.defines,overrideFog:!1}),it=Re.scalarData?[]:[0,1,2,3].map(Ve=>s.cG[Ve](Pe));it.push(Pe);const rt=Pe.canonical.x,Bt=Pe.canonical.y;for(const Ve of it){const et=ne.getTile(ce?Ve.wrapped():Ve);if(!et)continue;const ke=et.rasterParticleState;if(!ke)continue;const Ze=NS([Ve.canonical.x+(1<<Ve.canonical.z)*(Ve.wrap-Pe.wrap)-rt,Ve.canonical.y-Bt],0,Re.texture.size,2,xe,Re.textureOffset,Re.scale,Re.offset);Fe.draw(ue,de.POINTS,dr.disabled,yr.disabled,Nr.alphaBlended,cr.disabled,Ze,he.id,ke.particleVertices0,void 0,ke.particleSegment)}}}(E,M,k,te),function(ue,ne,he,ye){const de=ue.context.gl;let ve=ne.transformFeedbackObject;ve||(ve=ne.transformFeedbackObject=de.createTransformFeedback()),de.bindTransformFeedback(de.TRANSFORM_FEEDBACK,ne.transformFeedbackObject);const ce=ne.paint.get("raster-particle-max-speed"),xe=ye*ne.paint.get("raster-particle-speed-factor")*.3,Ee=(Pe=ne.paint.get("raster-particle-reset-rate-factor"),Math.pow(Pe,6));var Pe;for(const Re of he){const[,Xe,Fe]=Re;Xe.texture.bind(de.LINEAR,de.CLAMP_TO_EDGE);const it=qB(0,Xe.texture.size,ce,xe,Ee,Xe.textureOffset,Xe.scale,Xe.offset);ue.getOrCreateProgram("rasterParticleUpdate",{defines:Xe.defines,transformFeedback:{bufferMode:de.SEPARATE_ATTRIBS,shaderVaryings:["v_new_particle"]}}).draw(ue,de.POINTS,dr.disabled,yr.disabled,Nr.disabled,cr.disabled,it,ne.id,Fe.particleVertices0,void 0,Fe.particleSegment,{},void 0,void 0,void 0,void 0,[{buffer:Fe.particleVertices1,targetIndex:0}])}de.bindTransformFeedback(de.TRANSFORM_FEEDBACK,null)}(E,k,te,ae)}(g,l,h,_),g.renderPass==="translucent"&&(function(E,M,k,F,j){const V=E.context,Y=V.gl,te=!E.options.moving,le=E.transform.projection.name==="globe";if(!F.length)return;const[ae,ue]=E.stencilConfigForOverlap(F),ne=[];le&&ne.push("PROJECTION_GLOBE_VIEW");for(const he of ue){const ye=he.toUnwrapped(),de=M.getTile(he);if(!de.rasterParticleState)continue;const ve=de.rasterParticleState,ce=100;de.registerFadeDuration(ce);const xe=M.findLoadedParent(he,0),Ee=Sn(de,xe,M,E.transform,ce);let Pe,Re;E.terrain&&E.terrain.prepareDrawTile(),V.activeTexture.set(Y.TEXTURE0),ve.targetColorTexture.bind(Y.LINEAR,Y.CLAMP_TO_EDGE),V.activeTexture.set(Y.TEXTURE1),xe&&xe.rasterParticleState?(xe.rasterParticleState.targetColorTexture.bind(Y.LINEAR,Y.CLAMP_TO_EDGE),Pe=Math.pow(2,xe.tileID.overscaledZ-de.tileID.overscaledZ),Re=[de.tileID.canonical.x*Pe%1,de.tileID.canonical.y*Pe%1]):ve.targetColorTexture.bind(Y.LINEAR,Y.CLAMP_TO_EDGE);const Xe=le?Float32Array.from(E.transform.expandedFarZProjMatrix):E.transform.calculateProjMatrix(ye,te),Fe=E.transform,it=K_(Fe),rt=s.cf(he.canonical),Bt=s.cg(rt.getCenter().lat);let Ve,et,ke,Ze,bt;le?(Ve=Float32Array.from(s.aT(s.ci(he.canonical))),et=Float32Array.from(Fe.globeMatrix),ke=Float32Array.from(s.ce(Fe)),Ze=[s.a5(Fe.center.lng),s.ae(Fe.center.lat)],bt=Float32Array.from(s.ch(he.canonical,rt,Bt,Fe.worldSize/Fe._pixelsPerMercatorPixel))):(Ve=new Float32Array(16),et=new Float32Array(9),ke=new Float32Array(16),Ze=[0,0],bt=new Float32Array(9));const Pt=zS(Xe,Ve,et,ke,bt,Re||[0,0],s.S(E.transform.zoom),Ze,it,Pe||1,Ee,250),At=E.isTileAffectedByFog(he),Ft=E.getOrCreateProgram("rasterParticle",{defines:ne,overrideFog:At});if(E.uploadCommonUniforms(V,Ft,ye),le){const tr=new dr(Y.LEQUAL,dr.ReadWrite,E.depthRangeFor3D),hr=0,ir=E.globeSharedBuffers;if(ir){const[sr,Lr,Cr]=ir.getGridBuffers(Bt,hr!==0);Ft.draw(E,Y.TRIANGLES,tr,yr.disabled,Nr.alphaBlended,cr.backCCW,Pt,k.id,sr,Lr,Cr)}}else{const tr=E.depthModeForSublayer(0,dr.ReadOnly),hr=ae[he.overscaledZ],{tileBoundsBuffer:ir,tileBoundsIndexBuffer:sr,tileBoundsSegments:Lr}=E.getTileBoundsBuffers(de);Ft.draw(E,Y.TRIANGLES,tr,hr,Nr.alphaBlended,cr.disabled,Pt,k.id,ir,sr,Lr)}}E.resetStencilClippingMasks()}(g,l,h,_),g.style.map.triggerRepaint())},background:function(g,l,h,_){const B=h.paint.get("background-color"),C=h.paint.get("background-opacity"),E=h.paint.get("background-emissive-strength");if(C===0)return;const M=g.context,k=M.gl,F=g.transform,j=F.tileSize,V=h.paint.get("background-pattern");if(g.isPatternMissing(V,h.scope))return;const Y=!V&&B.a===1&&C===1&&g.opaquePassEnabledForLayer()?"opaque":"translucent";if(g.renderPass!==Y)return;const te=yr.disabled,le=g.depthModeForSublayer(0,Y==="opaque"?dr.ReadWrite:dr.ReadOnly),ae=g.colorModeForDrapableLayerRenderPass(E),ue=V?"backgroundPattern":"background";let ne,he=_;he||(ne=g.getBackgroundTiles(),he=Object.values(ne).map(ye=>ye.tileID)),V&&(M.activeTexture.set(k.TEXTURE0),g.imageManager.bind(g.context,h.scope));for(const ye of he){const de=g.isTileAffectedByFog(ye),ve=g.getOrCreateProgram(ue,{overrideFog:de}),ce=ye.toUnwrapped(),xe=_?ye.projMatrix:g.transform.calculateProjMatrix(ce);g.prepareDrawTile();const Ee=l?l.getTile(ye):ne?ne[ye.key]:new Jo(ye,j,F.zoom,g),Pe=V?Dd(xe,E,C,g,V,h.scope,{tileID:ye,tileSize:j}):V_(xe,E,C,B);g.uploadCommonUniforms(M,ve,ce);const{tileBoundsBuffer:Re,tileBoundsIndexBuffer:Xe,tileBoundsSegments:Fe}=g.getTileBoundsBuffers(Ee);ve.draw(g,k.TRIANGLES,le,te,ae,cr.disabled,Pe,h.id,Re,Xe,Fe)}},sky:function(g,l,h){const _=g._atmosphere?s.S(g.transform.zoom):1,B=h.paint.get("sky-opacity")*_;if(B===0)return;const C=g.context,E=h.paint.get("sky-type"),M=new dr(C.gl.LEQUAL,dr.ReadOnly,[0,1]),k=g.frameCounter/1e3%1;E==="atmosphere"?g.renderPass==="offscreen"?h.needsSkyboxCapture(g)&&(function(F,j,V,Y){const te=F.context,le=te.gl;let ae=j.skyboxFbo;if(!ae){ae=j.skyboxFbo=te.createFramebuffer(32,32,!0,null),j.skyboxGeometry=new ey(te),j.skyboxTexture=te.gl.createTexture(),le.bindTexture(le.TEXTURE_CUBE_MAP,j.skyboxTexture),le.texParameteri(le.TEXTURE_CUBE_MAP,le.TEXTURE_WRAP_S,le.CLAMP_TO_EDGE),le.texParameteri(le.TEXTURE_CUBE_MAP,le.TEXTURE_WRAP_T,le.CLAMP_TO_EDGE),le.texParameteri(le.TEXTURE_CUBE_MAP,le.TEXTURE_MIN_FILTER,le.LINEAR),le.texParameteri(le.TEXTURE_CUBE_MAP,le.TEXTURE_MAG_FILTER,le.LINEAR);for(let ye=0;ye<6;++ye)le.texImage2D(le.TEXTURE_CUBE_MAP_POSITIVE_X+ye,0,le.RGBA,32,32,0,le.RGBA,le.UNSIGNED_BYTE,null)}te.bindFramebuffer.set(ae.framebuffer),te.viewport.set([0,0,32,32]);const ue=j.getCenter(F,!0),ne=F.getOrCreateProgram("skyboxCapture"),he=new Float64Array(16);s.a6.identity(he),s.a6.rotateY(he,he,.5*-Math.PI),Hc(F,j,ne,he,ue,0),s.a6.identity(he),s.a6.rotateY(he,he,.5*Math.PI),Hc(F,j,ne,he,ue,1),s.a6.identity(he),s.a6.rotateX(he,he,.5*-Math.PI),Hc(F,j,ne,he,ue,2),s.a6.identity(he),s.a6.rotateX(he,he,.5*Math.PI),Hc(F,j,ne,he,ue,3),s.a6.identity(he),Hc(F,j,ne,he,ue,4),s.a6.identity(he),s.a6.rotateY(he,he,Math.PI),Hc(F,j,ne,he,ue,5),te.viewport.set([0,0,F.width,F.height])}(g,h),h.markSkyboxValid(g)):g.renderPass==="sky"&&function(F,j,V,Y,te){const le=F.context,ae=le.gl,ue=F.transform,ne=F.getOrCreateProgram("skybox");le.activeTexture.set(ae.TEXTURE0),ae.bindTexture(ae.TEXTURE_CUBE_MAP,j.skyboxTexture);const he=((ye,de,ve,ce,xe)=>({u_matrix:ye,u_sun_direction:de,u_cubemap:0,u_opacity:ce,u_temporal_offset:xe}))(ue.skyboxMatrix,j.getCenter(F,!1),0,Y,te);F.uploadCommonUniforms(le,ne),ne.draw(F,ae.TRIANGLES,V,yr.disabled,F.colorModeForRenderPass(),cr.backCW,he,"skybox",j.skyboxGeometry.vertexBuffer,j.skyboxGeometry.indexBuffer,j.skyboxGeometry.segment)}(g,h,M,B,k):E==="gradient"&&g.renderPass==="sky"&&function(F,j,V,Y,te){const le=F.context,ae=le.gl,ue=F.transform,ne=F.getOrCreateProgram("skyboxGradient");j.skyboxGeometry||(j.skyboxGeometry=new ey(le)),le.activeTexture.set(ae.TEXTURE0);let he=j.colorRampTexture;he||(he=j.colorRampTexture=new s.T(le,j.colorRamp,ae.RGBA)),he.bind(ae.LINEAR,ae.CLAMP_TO_EDGE);const ye=((de,ve,ce,xe,Ee)=>({u_matrix:de,u_color_ramp:0,u_center_direction:ve,u_radius:s.bj(ce),u_opacity:xe,u_temporal_offset:Ee}))(ue.skyboxMatrix,j.getCenter(F,!1),j.paint.get("sky-gradient-radius"),Y,te);F.uploadCommonUniforms(le,ne),ne.draw(F,ae.TRIANGLES,V,yr.disabled,F.colorModeForRenderPass(),cr.backCW,ye,"skyboxGradient",j.skyboxGeometry.vertexBuffer,j.skyboxGeometry.indexBuffer,j.skyboxGeometry.segment)}(g,h,M,B,k)},debug:function(g,l,h,_,B,C){for(let E=0;E<h.length;E++)if(B){const F=new s.ax(_.r*.8,_.g*.8,_.b*.8,1);Yu(g,l,h[E],_,-1,-1,C),Yu(g,l,h[E],_,-1,1,C),Yu(g,l,h[E],_,1,1,C),Yu(g,l,h[E],_,1,-1,C),Yu(g,l,h[E],F,0,0,C)}else Yu(g,l,h[E],_,0,0,C)},custom:function(g,l,h,_){const B=g.context,C=h.implementation;if(!g.transform.projection.unsupportedLayers||!g.transform.projection.unsupportedLayers.includes("custom")||g.terrain&&(g.terrain.renderingToTexture||g.renderPass==="offscreen")&&h.isLayerDraped(l)){if(g.renderPass==="offscreen"){const E=C.prerender;if(E){if(g.setCustomLayerDefaults(),B.setColorMode(g.colorModeForRenderPass()),g.transform.projection.name==="globe"){const M=g.transform.pointMerc;E.call(C,B.gl,g.transform.customLayerMatrix(),g.transform.getProjection(),g.transform.globeToMercatorMatrix(),s.S(g.transform.zoom),[M.x,M.y],g.transform.pixelsPerMeterRatio)}else E.call(C,B.gl,g.transform.customLayerMatrix());B.setDirty(),g.setBaseState()}}else if(g.renderPass==="translucent"){if(g.terrain&&g.terrain.renderingToTexture){const M=C.renderToTile;if(M){const k=_[0].canonical,F=new s.L(k.x+_[0].wrap*(1<<k.z),k.y,k.z);B.setDepthMode(dr.disabled),B.setStencilMode(yr.disabled),B.setColorMode(g.colorModeForRenderPass()),g.setCustomLayerDefaults(),M.call(C,B.gl,F),B.setDirty(),g.setBaseState()}return}g.setCustomLayerDefaults(),B.setColorMode(g.colorModeForRenderPass()),B.setStencilMode(yr.disabled);const E=C.renderingMode==="3d"?new dr(g.context.gl.LEQUAL,dr.ReadWrite,g.depthRangeFor3D):g.depthModeForSublayer(0,dr.ReadOnly);if(B.setDepthMode(E),g.transform.projection.name==="globe"){const M=g.transform.pointMerc;C.render(B.gl,g.transform.customLayerMatrix(),g.transform.getProjection(),g.transform.globeToMercatorMatrix(),s.S(g.transform.zoom),[M.x,M.y],g.transform.pixelsPerMeterRatio)}else C.render(B.gl,g.transform.customLayerMatrix());B.setDirty(),g.setBaseState(),B.bindFramebuffer.set(null)}}else s.w("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")},model:function(g,l,h,_){if(g.renderPass==="opaque")return;const B=h.paint.get("model-opacity");if(B===0)return;const C=h.paint.get("model-cast-shadows");if(g.renderPass==="shadow"&&(!C||g.terrain&&B<.65&&h._transitionablePaint._values["model-opacity"].value.expression instanceof s.Z))return;const E=g.shadowRenderer,M=h.paint.get("model-receive-shadows");E&&(E.useNormalOffset=!0,M||(E.enabled=!1));const k=()=>{E&&(E.useNormalOffset=!0,M||(E.enabled=!0))},F=l.getSource();if(g.renderPass==="light-beam"&&F.type!=="batched-model")return;if(F.type==="vector"||F.type==="geojson")return function(ne,he,ye,de){const ve=ne.transform;if(ve.projection.name!=="mercator")return void s.w(`Drawing 3D models for ${ve.projection.name} projection is not yet implemented`);const ce=ve.getFreeCameraOptions().position;if(!ne.modelManager)return;const xe=ne.modelManager;ye.modelManager=xe;const Ee=ne.shadowRenderer;if(!ye._unevaluatedLayout._values.hasOwnProperty("model-id"))return;const Pe=ye._unevaluatedLayout._values["model-id"],Re={...ye.layout.get("model-id").parameters};for(const Xe of de){const Fe=he.getTile(Xe).getBucket(ye);if(!Fe||Fe.projection.name!==ve.projection.name)continue;const it=t1(Xe,ve);Re.zoom=it;const rt=Pe.possiblyEvaluate(Re);if(ty(ne,Fe,Xe),Qa.shadowUniformsInitialized=!1,Qa.useSingleShadowCascade=!!Ee&&Ee.getMaxCascadeForTile(Xe.toUnwrapped())===0,ne.renderPass==="shadow"&&Ee){if(ne.currentShadowCascade===1&&Fe.isInsideFirstShadowMapFrustum)continue;const et=ve.calculatePosMatrix(Xe.toUnwrapped(),ve.worldSize);if(Qa.tileMatrix.set(et),Qa.shadowTileMatrix=Float32Array.from(Ee.calculateShadowPassMatrixFromMatrix(et)),Qa.aabb.min.fill(0),Qa.aabb.max[0]=Qa.aabb.max[1]=s.V,Qa.aabb.max[2]=0,VS(Fe,Qa,ne,ye.scope))continue}const Bt=1<<Xe.canonical.z,Ve=[((ce.x-Xe.wrap)*Bt-Xe.canonical.x)*s.V,(ce.y*Bt-Xe.canonical.y)*s.V,ce.z*Bt*s.V];for(let et in Fe.instancesPerModel){const ke=Fe.instancesPerModel[et];ke.features.length>0&&(et=rt.evaluate(ke.features[0].feature,{}));const Ze=xe.getModel(et,ye.scope);if(Ze&&Ze.uploaded)for(const bt of Ze.nodes)ry(ne,ye,bt,ke,Ve,Xe,Qa)}}}(g,l,h,_),void k();if(!F.loaded())return;if(F.type==="batched-model")return function(ne,he,ye,de){ye.resetLayerRenderingStats(ne);const ve=ne.context,ce=ne.transform,xe=ne.style.fog,Ee=ne.shadowRenderer;if(ce.projection.name!=="mercator")return void s.w(`Drawing 3D landmark models for ${ce.projection.name} projection is not yet implemented`);const Pe=ne.transform.getFreeCameraOptions().position,Re=s.N.scale([],[Pe.x,Pe.y,Pe.z],ne.transform.worldSize);s.N.negate(Re,Re);const Xe=s.a6.identity([]),Fe=s.cR(ce.center.lat,ce.zoom),it=s.a6.fromScaling([],[1,1,1/Fe]);s.a6.translate(Xe,Xe,Re);const rt=ye.paint.get("model-opacity"),Bt=new dr(ve.gl.LEQUAL,dr.ReadWrite,ne.depthRangeFor3D),Ve=new dr(ve.gl.LEQUAL,dr.ReadOnly,ne.depthRangeFor3D),et=new s.bS([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),ke=ne.renderPass==="shadow",Ze=ke&&Ee?Ee.getCurrentCascadeFrustum():ce.getFrustum(ce.scaleZoom(ce.worldSize)),bt=ye.getLayerRenderingStats(),Pt=function(At,Ft){for(const tr of de){const hr=he.getTile(tr).getBucket(ye);if(!hr||!hr.uploaded)continue;let ir=!1;Ee&&(ir=Ee.getMaxCascadeForTile(tr.toUnwrapped())===0);const sr=ce.calculatePosMatrix(tr.toUnwrapped(),ce.worldSize),Lr=hr.modelTraits;for(const Cr of hr.getNodesInfo()){if(Cr.hiddenByReplacement||!Cr.node.meshes)continue;const Pr=Cr.evaluatedScale,Dr=Cr.node;let un=0;if(ne.terrain&&Dr.elevation&&(un=Dr.elevation*ne.terrain.exaggeration()),Pr[0]<=1&&Pr[1]<=1&&Pr[2]<=1&&(()=>{const Jn=Cr.getLocalBounds();return et.min=[...Jn.min],et.max=[...Jn.max],et.min[2]+=un,et.max[2]+=un,s.N.transformMat4(et.min,et.min,sr),s.N.transformMat4(et.max,et.max,sr),et})().intersects(Ze)===0)continue;const qn=ne.renderPass==="light-beam",Yr=[...sr];s.a6.translate(Yr,Yr,[(Dr.anchor?Dr.anchor[0]:0)*(Pr[0]-1),(Dr.anchor?Dr.anchor[1]:0)*(Pr[1]-1),un]),s.N.exactEquals(Pr,s.cT)||s.a6.scale(Yr,Yr,Pr),s.a6.multiply(Yr,Yr,Dr.matrix);const gi=s.a6.multiply([],it,Yr);s.a6.multiply(gi,Xe,gi);const Jr=s.a6.invert([],gi);s.a6.transpose(Jr,Jr),s.a6.scale(Jr,Jr,tf);const gn=s.a6.multiply([],ce.expandedFarZProjMatrix,Yr),Qr=Lr&s.cV.HasMapboxMeshFeatures,fn=Qr?0:Cr.evaluatedRMEA[0][2];for(let Jn=0;Jn<Dr.meshes.length;++Jn){const Cn=Dr.meshes[Jn],mo=Jn===Dr.lightMeshIndex;if(mo){if(!qn&&!ne.terrain&&ne.shadowRenderer){ne.currentLayer<ne.firstLightBeamLayer&&(ne.firstLightBeamLayer=ne.currentLayer);continue}}else if(qn)continue;const Oo={defines:[]},ka=[];if(mi(Oo.defines,ka,Cn,ne),Qr||Oo.defines.push("DIFFUSE_SHADED"),ir&&Oo.defines.push("SHADOWS_SINGLE_CASCADE"),bt&&(ke?bt.numRenderedVerticesInShadowPass+=Cn.vertexArray.length:bt.numRenderedVerticesInTransparentPass+=Cn.vertexArray.length),ke){Ke(Cn,Yr,ne,ye);continue}let Tl=null;if(xe){const Ra=Wc(Yr,ne.transform);if(Tl=new Float32Array(Ra),ce.projection.name!=="globe"){const Al=Cn.aabb.min,rc=Cn.aabb.max,[qc,Yd]=xe.getOpacityForBounds(Ra,Al[0],Al[1],rc[0],rc[1]);Oo.overrideFog=qc>=vn||Yd>=vn}}const La=Cn.material;let go;La.occlusionTexture&&La.occlusionTexture.offsetScale&&(go=La.occlusionTexture.offsetScale,Oo.defines.push("OCCLUSION_TEXTURE_TRANSFORM")),!ke&&Ee&&(Ee.useNormalOffset=!!Cn.normalBuffer);const to=ne.getOrCreateProgram("model",Oo);!ke&&Ee&&Ee.setupShadowsFromMatrix(Yr,to,Ee.useNormalOffset),ne.uploadCommonUniforms(ve,to,tr.toUnwrapped(),Tl);const na=La.pbrMetallicRoughness;na.metallicFactor=.9,na.roughnessFactor=.5;const ya=dm(new Float32Array(gn),new Float32Array(gi),new Float32Array(Jr),ne,rt,na.baseColorFactor,La.emissiveFactor,na.metallicFactor,na.roughnessFactor,La,fn,ye,[0,0,0],go);to.draw(ne,ve.gl.TRIANGLES,Ft&&!mo?Bt:Ve,yr.disabled,At?mo||rt<1||Cr.hasTranslucentParts?Nr.alphaBlended:Nr.unblended:Nr.disabled,cr.backCCW,ya,ye.id,Cn.vertexBuffer,Cn.indexBuffer,Cn.segments,ye.paint,ne.transform.zoom,void 0,ka)}}}};(function(At,Ft,tr,hr){const ir=At.terrain?At.terrain.exaggeration():0,sr=At.transform.zoom;for(const Lr of hr){const Cr=Ft.getTile(Lr).getBucket(tr);Cr&&(At.conflationActive&&Cr.updateReplacement(Lr,At.replacementSource),Cr.evaluateScale(At,tr),At.terrain&&ir>0&&Cr.elevationUpdate(At.terrain,ir,Lr,tr.source),Cr.needsReEvaluation(At,sr,tr)&&Cr.evaluate(tr))}})(ne,he,ye,de),rt===1?Pt(!0,!0):(Pt(!1,!0),Pt(!0,!1))}(g,l,h,_),void k();const j=F.getModels(),V=[],Y=g.transform.getFreeCameraOptions().position,te=s.N.scale([],[Y.x,Y.y,Y.z],g.transform.worldSize);s.N.negate(te,te);const le=[],ae=[];let ue=0;for(const ne of j){const he=h.paint.get("model-rotation").constantOr(null),ye=h.paint.get("model-scale").constantOr(null),de=h.paint.get("model-translation").constantOr(null);ne.computeModelMatrix(g,he,ye,de,!0,!0,!1);const ve=s.a6.identity([]),ce=s.cR(ne.position.lat,g.transform.zoom),xe=s.a6.fromScaling([],[1,1,1/ce]);s.a6.translate(ve,ve,te),V.push({zScaleMatrix:xe,negCameraPosMatrix:ve});for(const Ee of ne.nodes)Ld(g.transform,Ee,ne.matrix,g.transform.expandedFarZProjMatrix,ue,le,ae);ue++}if(le.sort((ne,he)=>he.depth-ne.depth),g.renderPass!=="shadow"){if(B===1)for(const ne of ae)kd(ne,g,h,V[ne.modelIndex],yr.disabled,g.colorModeForRenderPass());else{for(const ne of ae)kd(ne,g,h,V[ne.modelIndex],yr.disabled,Nr.disabled);for(const ne of ae)kd(ne,g,h,V[ne.modelIndex],g.stencilModeFor3D(),g.colorModeForRenderPass());g.resetStencilClippingMasks()}for(const ne of le)kd(ne,g,h,V[ne.modelIndex],yr.disabled,g.colorModeForRenderPass());k()}else{for(const ne of ae)Ke(ne.mesh,ne.nodeModelMatrix,g,h);for(const ne of le)Ke(ne.mesh,ne.nodeModelMatrix,g,h);k()}}},ny={model:function(g,l,h){const _=g.scope,B=l.getSource();if(!B.loaded())return;if(B.type==="vector"||B.type==="geojson")return void(h.modelManager&&h.modelManager.upload(h,_));if(B.type==="batched-model")return;const C=B.getModels();for(const E of C)E.upload(h.context)},raster:function(g,l,h){const _=l.getSource();if(!(_ instanceof Dt&&_.loaded()))return;const B=g.sourceLayer||_.rasterLayerIds&&_.rasterLayerIds[0];if(!B)return;const C=g.paint.get("raster-array-band")||_.getInitialBand(B);if(C==null)return;const E=l.getIds().map(M=>l.getTileByID(M));for(const M of E)M.updateNeeded(B,C)&&_.prepareTile(M,B,C)},"raster-particle":function(g,l,h){const _=l.getSource();if(!(_ instanceof Dt&&_.loaded()))return;const B=g.sourceLayer||_.rasterLayerIds&&_.rasterLayerIds[0];if(!B)return;const C=g.paint.get("raster-particle-array-band")||_.getInitialBand(B);if(C==null)return;const E=l.getIds().map(M=>l.getTileByID(M));for(const M of E)M.updateNeeded(B,C)&&_.prepareTile(M,B,C)}};class n1{constructor(l,h,_,B){this.context=new ml(l,h),this.transform=_,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.tp=B,this._debugParams={showTerrainProxyTiles:!1},B.registerParameter(this._debugParams,["Terrain"],"showTerrainProxyTiles",{},()=>{this.style.map.triggerRepaint()}),this.setup(),this.numSublayers=Ka.maxUnderzooming+Ka.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={},this.conflationActive=!1,this.replacementSource=new s.cX,this.longestCutoffRange=0,this.minCutoffZoom=0,this._fogVisible=!1,this._cachedTileFogOpacities={},this._shadowRenderer=new xd(this),this._wireframeDebugCache=new r1,this.renderDefaultNorthPole=!0,this.renderDefaultSouthPole=!0}updateTerrain(l,h){const _=!!l&&!!l.terrain&&this.transform.projection.supportsTerrain;if(!(_||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new ta(this,l));const B=this._terrain;this.transform.elevation=_?B:null,B.update(l,this.transform,h),this.transform.elevation&&!B.enabled&&(this.transform.elevation=null)}_updateFog(l){const h=l.fog;if(!h||this.transform.projection.name==="globe"||h.getOpacity(this.transform.pitch)<1||h.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[_,B]=h.getFovAdjustedRange(this.transform._fov);if(_>B)return void(this.transform.fogCullDistSq=null);const C=_+.78*(B-_);this.transform.fogCullDistSq=C*C}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}get shadowRenderer(){return this._shadowRenderer&&this._shadowRenderer.enabled?this._shadowRenderer:null}get wireframeDebugCache(){return this._wireframeDebugCache}resize(l,h){if(this.width=l*s.f.devicePixelRatio,this.height=h*s.f.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const _ of this.style.order)this.style._mergedLayers[_].resize()}setup(){const l=this.context,h=new s.aN;h.emplaceBack(0,0),h.emplaceBack(s.V,0),h.emplaceBack(0,s.V),h.emplaceBack(s.V,s.V),this.tileExtentBuffer=l.createVertexBuffer(h,s.aP.members),this.tileExtentSegments=s.aB.simpleSegment(0,0,4,2);const _=new s.aN;_.emplaceBack(0,0),_.emplaceBack(s.V,0),_.emplaceBack(0,s.V),_.emplaceBack(s.V,s.V),this.debugBuffer=l.createVertexBuffer(_,s.aP.members),this.debugSegments=s.aB.simpleSegment(0,0,4,5);const B=new s.aN;B.emplaceBack(-1,-1),B.emplaceBack(1,-1),B.emplaceBack(-1,1),B.emplaceBack(1,1),this.viewportBuffer=l.createVertexBuffer(B,s.aP.members),this.viewportSegments=s.aB.simpleSegment(0,0,4,2);const C=new s.av;C.emplaceBack(0,0,0,0),C.emplaceBack(s.V,0,s.V,0),C.emplaceBack(0,s.V,0,s.V),C.emplaceBack(s.V,s.V,s.V,s.V),this.mercatorBoundsBuffer=l.createVertexBuffer(C,s.aR.members),this.mercatorBoundsSegments=s.aB.simpleSegment(0,0,4,2);const E=new s.aw;E.emplaceBack(0,1,2),E.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=l.createIndexBuffer(E);const M=new s.aO;for(const F of[0,1,3,2,0])M.emplaceBack(F);this.debugIndexBuffer=l.createIndexBuffer(M),this.emptyTexture=new s.T(l,new s.h({width:1,height:1},Uint8Array.of(0,0,0,0)),l.gl.RGBA),this.identityMat=s.a6.create();const k=this.context.gl;this.stencilClearMode=new yr({func:k.ALWAYS,mask:0},0,255,k.ZERO,k.ZERO,k.ZERO),this.loadTimeStamps.push(performance.now())}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(l){return l._makeTileBoundsBuffers(this.context,this.transform.projection),l._tileBoundsBuffer?{tileBoundsBuffer:l._tileBoundsBuffer,tileBoundsIndexBuffer:l._tileBoundsIndexBuffer,tileBoundsSegments:l._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const l=this.context.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.getOrCreateProgram("clippingMask").draw(this,l.TRIANGLES,dr.disabled,this.stencilClearMode,Nr.disabled,cr.disabled,qr(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(l,h,_){if(!h||this.currentStencilSource===h.id||!l.isTileClipped()||!_||_.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let M=!1;for(const k of _)if(this._tileClippingMaskIDs[k.key]===void 0){M=!0;break}if(!M)return}this.currentStencilSource=h.id;const B=this.context,C=B.gl;this.nextStencilID+_.length>256&&this.clearStencil(),B.setColorMode(Nr.disabled),B.setDepthMode(dr.disabled);const E=this.getOrCreateProgram("clippingMask");this._tileClippingMaskIDs={};for(const M of _){const k=h.getTile(M),F=this._tileClippingMaskIDs[M.key]=this.nextStencilID++,{tileBoundsBuffer:j,tileBoundsIndexBuffer:V,tileBoundsSegments:Y}=this.getTileBoundsBuffers(k);E.draw(this,C.TRIANGLES,dr.disabled,new yr({func:C.ALWAYS,mask:0},F,255,C.KEEP,C.KEEP,C.REPLACE),Nr.disabled,cr.disabled,qr(M.projMatrix),"$clipping",j,V,Y)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const l=this.nextStencilID++,h=this.context.gl;return new yr({func:h.NOTEQUAL,mask:255},l,255,h.KEEP,h.KEEP,h.REPLACE)}stencilModeForClipping(l){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(l);const h=this.context.gl;return new yr({func:h.EQUAL,mask:255},this._tileClippingMaskIDs[l.key],0,h.KEEP,h.KEEP,h.REPLACE)}stencilConfigForOverlap(l){const h=this.context.gl,_=l.sort((E,M)=>M.overscaledZ-E.overscaledZ),B=_[_.length-1].overscaledZ,C=_[0].overscaledZ-B+1;if(C>1){this.currentStencilSource=void 0,this.nextStencilID+C>256&&this.clearStencil();const E={};for(let M=0;M<C;M++)E[M+B]=new yr({func:h.GEQUAL,mask:255},M+this.nextStencilID,255,h.KEEP,h.KEEP,h.REPLACE);return this.nextStencilID+=C,[E,_]}return[{[B]:yr.disabled},_]}colorModeForRenderPass(){const l=this.context.gl;return this._showOverdrawInspector?new Nr([l.CONSTANT_COLOR,l.ONE,l.CONSTANT_COLOR,l.ONE],new s.ax(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Nr.unblended:Nr.alphaBlended}colorModeForDrapableLayerRenderPass(l){const h=this.context.gl;return this.style&&this.style.enable3dLights()&&this.terrain&&this.terrain.renderingToTexture&&this.renderPass==="translucent"?new Nr([h.ONE,h.ONE_MINUS_SRC_ALPHA,h.CONSTANT_ALPHA,h.ONE_MINUS_SRC_ALPHA],new s.ax(0,0,0,l===void 0?0:l),[!0,!0,!0,!0]):this.colorModeForRenderPass()}depthModeForSublayer(l,h,_,B=!1){if(!this.opaquePassEnabledForLayer()&&!B)return dr.disabled;const C=1-((1+this.currentLayer)*this.numSublayers+l)*this.depthEpsilon;return new dr(_||this.context.gl.LEQUAL,h,[C,C])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(l,h){this._wireframeDebugCache.update(this.frameCounter),this.style=l,this.options=h;const _=this.style._mergedLayers,B=this.style.order,C=B.map(ce=>_[ce]),E=this.style._mergedSourceCaches;this.imageManager=l.imageManager,this.modelManager=l.modelManager,this.symbolFadeChange=l.placement.symbolFadeChange(s.f.now()),this.imageManager.beginFrame();let M=0,k=!1;for(const ce in E){const xe=E[ce];xe.used&&(xe.prepare(this.context),xe.getSource().usedInConflation&&++M)}for(const ce of C)ce.isHidden(this.transform.zoom)||this.prepareLayer(ce);const F={},j={},V={},Y={},te={};for(const ce in E){const xe=E[ce];F[ce]=xe.getVisibleCoordinates(),j[ce]=F[ce].slice().reverse(),V[ce]=xe.getVisibleCoordinates(!0).reverse(),Y[ce]=xe.getShadowCasterCoordinates(),te[ce]=xe.sortCoordinatesByDistance(F[ce])}const le=ce=>{const xe=this.style.getLayerSourceCache(ce);return xe&&xe.used?xe.getSource():null};if(M){const ce=[];for(const xe of C)this.layerUsedInConflation(xe,le(xe))&&ce.push(xe);if(ce&&ce.length>1){const xe=[];for(const Ee of ce){const Pe=this.style.getLayerSourceCache(Ee);Pe&&Pe.used&&Pe.getSource().usedInConflation&&xe.push({layer:Ee.fqid,cache:Pe})}this.replacementSource.setSources(xe),k=!0}}k||this.replacementSource.clear(),this.conflationActive=k,this.minCutoffZoom=0,this.longestCutoffRange=0;for(const ce of C){const xe=ce.cutoffRange();if(this.longestCutoffRange=Math.max(xe,this.longestCutoffRange),xe>0){const Ee=le(ce);Ee&&(this.minCutoffZoom=Math.max(Ee.minzoom,this.minCutoffZoom)),ce.minzoom&&(this.minCutoffZoom=Math.max(ce.minzoom,this.minCutoffZoom))}}this.opaquePassCutoff=1/0;for(let ce=0;ce<C.length;ce++)if(C[ce].is3D()){this.opaquePassCutoff=ce;break}const ae=this.style&&this.style.fog;ae?(this._fogVisible=ae.getOpacity(this.transform.pitch)!==0,this._fogVisible&&this.transform.projection.name!=="globe"&&(this._fogVisible=ae.isVisibleOnFrustum(this.transform.cameraFrustum))):this._fogVisible=!1,this._cachedTileFogOpacities={},this.terrain&&(this.terrain.updateTileBinding(V),this.opaquePassCutoff=0);const ue=this._shadowRenderer;if(ue){ue.updateShadowParameters(this.transform,this.style.directionalLight);for(const ce in E)for(const xe of F[ce]){let Ee={min:0,max:0};this.terrain&&(Ee=this.terrain.getMinMaxForTile(xe)||Ee),ue.addShadowReceiver(xe.toUnwrapped(),Ee.min,Ee.max)}}if(this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new s.cY(this.context)),this.style.fog&&this.transform.projection.supportsFog?(this._atmosphere||(this._atmosphere=new pr(this)),this._atmosphere.update(this)):this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),!s.cZ(this.context.gl))return;this.renderPass="offscreen";for(const ce of C){const xe=l.getLayerSourceCache(ce);if(!ce.hasOffscreenPass()||ce.isHidden(this.transform.zoom))continue;const Ee=xe?j[xe.id]:void 0;(ce.type==="custom"||ce.type==="raster"||ce.type==="raster-particle"||ce.isSky()||Ee&&Ee.length)&&this.renderLayer(this,xe,ce,Ee)}this.depthRangeFor3D=[0,1-(C.length+2)*this.numSublayers*this.depthEpsilon];const ne=this.terrain;ne&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&!this.transform.isOrthographic&&ne.drawDepth(),this._shadowRenderer&&(this.renderPass="shadow",this._shadowRenderer.drawShadowPass(this.style,Y)),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]);const he=this.transform.projection.name==="globe"||this.transform.isHorizonVisible(),ye=(()=>{if(h.showOverdrawInspector)return s.ax.black;if(this.style.fog&&this.transform.projection.supportsFog&&!he){const ce=this.style.fog.properties.get("color").toArray01();return new s.ax(...ce)}if(this.style.fog&&this.transform.projection.supportsFog&&he){const ce=this.style.fog.properties.get("space-color").toArray01();return new s.ax(...ce)}return s.ax.transparent})();if(this.context.clear({color:ye,depth:1}),this.clearStencil(),this._showOverdrawInspector=h.showOverdrawInspector,this.renderPass="opaque",this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&he&&this._atmosphere.drawStars(this,this.style.fog),!this.terrain)for(this.currentLayer=B.length-1;this.currentLayer>=0;this.currentLayer--){const ce=C[this.currentLayer],xe=l.getLayerSourceCache(ce);if(ce.isSky())continue;const Ee=xe?(ce.is3D()?te:j)[xe.id]:void 0;this._renderTileClippingMasks(ce,xe,Ee),this.renderLayer(this,xe,ce,Ee)}if(this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&he&&this._atmosphere.drawAtmosphereGlow(this,this.style.fog),this.renderPass="sky",(!this._atmosphere||s.S(this.transform.zoom)>0)&&(this.transform.projection.name==="globe"||this.transform.isHorizonVisible()))for(this.currentLayer=0;this.currentLayer<B.length;this.currentLayer++){const ce=C[this.currentLayer],xe=l.getLayerSourceCache(ce);ce.isSky()&&this.renderLayer(this,xe,ce,xe?j[xe.id]:void 0)}function de(ce,xe){let Ee;return xe&&(Ee=(ce.type==="symbol"?V:ce.is3D()?te:j)[xe.id]),Ee}if(this.renderPass="translucent",this.transform.projection.name==="globe"){for(this.renderElevatedRasterBackface=!0,this.currentLayer=0;this.currentLayer<B.length;){const ce=C[this.currentLayer];if(ce.type==="raster"){const xe=l.getLayerSourceCache(ce);this.renderLayer(this,xe,ce,de(ce,xe))}++this.currentLayer}this.renderElevatedRasterBackface=!1}this.currentLayer=0,this.firstLightBeamLayer=Number.MAX_SAFE_INTEGER;let ve=0;for(ue&&(ve=ue.getShadowCastingLayerCount());this.currentLayer<B.length;){const ce=C[this.currentLayer],xe=l.getLayerSourceCache(ce);if(ce.isSky())++this.currentLayer;else if(ne&&this.style.isLayerDraped(ce)){if(ce.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=ne.renderBatch(this.currentLayer)}else{if(this._renderTileClippingMasks(ce,xe,xe?F[xe.id]:void 0),this.renderLayer(this,xe,ce,de(ce,xe)),!ne&&ue&&ve>0&&ce.hasShadowPass()&&--ve==0&&(ue.drawGroundShadows(),this.firstLightBeamLayer<=this.currentLayer)){const Ee=this.currentLayer;for(this.renderPass="light-beam",this.currentLayer=this.firstLightBeamLayer;this.currentLayer<=Ee;this.currentLayer++){const Pe=C[this.currentLayer];if(!Pe.hasLightBeamPass())continue;const Re=l.getLayerSourceCache(Pe);this.renderLayer(this,Re,Pe,Re?j[Re.id]:void 0)}this.currentLayer=Ee,this.renderPass="translucent"}++this.currentLayer}}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let ce=null;C.forEach(xe=>{const Ee=l.getLayerSourceCache(xe);Ee&&!xe.isHidden(this.transform.zoom)&&Ee.getVisibleCoordinates().length&&(!ce||ce.getSource().maxzoom<Ee.getSource().maxzoom)&&(ce=Ee)}),ce&&this.options.showTileBoundaries&&zd.debug(this,ce,ce.getVisibleCoordinates(),s.ax.red,!1,this.options.showParseStatus)}this.terrain&&this._debugParams.showTerrainProxyTiles&&zd.debug(this,this.terrain.proxySourceCache,this.terrain.proxyCoords,new s.ax(1,.8,.1,1),!0,this.options.showParseStatus),this.options.showPadding&&function(ce){const xe=ce.transform.padding;J_(ce,ce.transform.height-(xe.top||0),3,Ia),J_(ce,xe.bottom||0,3,Xu),Ja(ce,xe.left||0,3,e1),Ja(ce,ce.transform.width-(xe.right||0),3,X_);const Ee=ce.transform.centerPoint;(function(Pe,Re,Xe,Fe){pi(Pe,Re-1,Xe-10,2,20,Fe),pi(Pe,Re-10,Xe-1,20,2,Fe)})(ce,Ee.x,ce.transform.height-Ee.y,Y_)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(performance.now()),this.saveCanvasCopy()),k||(this.conflationActive=!1)}prepareLayer(l){this.gpuTimingStart(l);const{unsupportedLayers:h}=this.transform.projection,_=!h||!h.includes(l.type);if(ny[l.type]&&(_||this.terrain&&l.type==="custom")){const B=this.style.getLayerSourceCache(l);ny[l.type](l,B,this)}this.gpuTimingEnd()}renderLayer(l,h,_,B){_.isHidden(this.transform.zoom)||(_.type==="background"||_.type==="sky"||_.type==="custom"||_.type==="model"||_.type==="raster"||_.type==="raster-particle"||B&&B.length)&&(this.id=_.id,this.gpuTimingStart(_),(!l.transform.projection.unsupportedLayers||!l.transform.projection.unsupportedLayers.includes(_.type)||l.terrain&&_.type==="custom")&&zd[_.type](l,h,_,B,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(l){if(!this.options.gpuTiming)return;const h=this.context.extTimerQuery,_=this.context.gl;let B=this.gpuTimers[l.id];B||(B=this.gpuTimers[l.id]={calls:0,cpuTime:0,query:_.createQuery()}),B.calls++,_.beginQuery(h.TIME_ELAPSED_EXT,B.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const l=this.context.extTimerQuery,h=this.context.gl,_=h.createQuery();this.deferredRenderGpuTimeQueries.push(_),h.beginQuery(l.TIME_ELAPSED_EXT,_)}}gpuTimingDeferredRenderEnd(){this.options.gpuTimingDeferredRender&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}gpuTimingEnd(){this.options.gpuTiming&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}collectGpuTimers(){const l=this.gpuTimers;return this.gpuTimers={},l}collectDeferredRenderGpuQueries(){const l=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],l}queryGpuTimers(l){const h={};for(const _ in l){const B=l[_],C=this.context.extTimerQuery,E=C.getQueryParameter(B.query,this.context.gl.QUERY_RESULT)/1e6;C.deleteQueryEXT(B.query),h[_]=E}return h}queryGpuTimeDeferredRender(l){if(!this.options.gpuTimingDeferredRender)return 0;const h=this.context.extTimerQuery,_=this.context.gl;let B=0;for(const C of l)B+=h.getQueryParameter(C,_.QUERY_RESULT)/1e6,h.deleteQueryEXT(C);return B}translatePosMatrix(l,h,_,B,C){if(!_[0]&&!_[1])return l;const E=C?B==="map"?this.transform.angle:0:B==="viewport"?-this.transform.angle:0;if(E){const F=Math.sin(E),j=Math.cos(E);_=[_[0]*j-_[1]*F,_[0]*F+_[1]*j]}const M=[C?_[0]:s.a3(h,_[0],this.transform.zoom),C?_[1]:s.a3(h,_[1],this.transform.zoom),0],k=new Float32Array(16);return s.a6.translate(k,l,M),k}saveTileTexture(l){const h=l.size[0],_=this._tileTextures[h];_?_.push(l):this._tileTextures[h]=[l]}getTileTexture(l){const h=this._tileTextures[l];return h&&h.length>0?h.pop():null}isPatternMissing(l,h){return l===null||l!==void 0&&!this.imageManager.getPattern(l.toString(),h)}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}linearFloatFilteringSupported(){return this.context.extTextureFloatLinear!=null}currentGlobalDefines(l,h,_){const B=_===void 0?this.terrain&&this.terrain.renderingToTexture:_,C=this.terrain&&this.terrain.exaggeration()===0,E=[];return this.style&&this.style.enable3dLights()&&(l==="globeRaster"||l==="terrainRaster"?(E.push("LIGHTING_3D_MODE"),E.push("LIGHTING_3D_ALPHA_EMISSIVENESS")):B||E.push("LIGHTING_3D_MODE")),this.renderPass==="shadow"?this._shadowMapDebug||E.push("DEPTH_TEXTURE"):this.shadowRenderer&&(this.shadowRenderer.useNormalOffset?E.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET"):E.push("RENDER_SHADOWS","DEPTH_TEXTURE")),this.terrainRenderModeElevated()&&(E.push("TERRAIN"),this.linearFloatFilteringSupported()&&E.push("TERRAIN_DEM_FLOAT_FORMAT"),C&&E.push("ZERO_EXAGGERATION")),this.transform.projection.name==="globe"&&E.push("GLOBE"),!this._fogVisible||B||h!==void 0&&!h||E.push("FOG","FOG_DITHERING"),B&&E.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&E.push("OVERDRAW_INSPECTOR"),E}getOrCreateProgram(l,h){this.cache=this.cache||{};const _=h&&h.defines||[],B=h&&h.config,C=h&&h.transformFeedback,E=this.currentGlobalDefines(l,h&&h.overrideFog,h&&h.overrideRtt).concat(_),M=wd.cacheKey(Kh[l],l,E,B);return this.cache[M]||(this.cache[M]=new wd(this.context,l,Kh[l],B,FS[l],E,C)),this.cache[M]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const l=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(l.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new s.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this._wireframeDebugCache.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}uploadCommonLightUniforms(l,h){if(this.style.enable3dLights()){const _=this.style.directionalLight,B=this.style.ambientLight;if(_&&B){const C=((E,M)=>{const k=E.properties.get("direction"),F=E.properties.get("color").toArray01(),j=E.properties.get("intensity"),V=M.properties.get("color").toArray01(),Y=M.properties.get("intensity"),te=[k.x,k.y,k.z],le=s.cn(V,Y),ae=s.cn(F,j);return{u_lighting_ambient_color:le,u_lighting_directional_dir:te,u_lighting_directional_color:ae,u_ground_radiance:wl(te,ae,le)}})(_,B);h.setLightsUniformValues(l,C)}}}uploadCommonUniforms(l,h,_,B,C){if(this.uploadCommonLightUniforms(l,h),this.terrain&&this.terrain.renderingToTexture)return;const E=this.style.fog;if(E){const M=E.getOpacity(this.transform.pitch),k=((F,j,V,Y,te,le,ae,ue,ne,he,ye,de)=>{const ve=F.transform,ce=j.properties.get("color").toArray01();ce[3]=Y;const xe=F.frameCounter/1e3%1,[Ee,Pe]=j.properties.get("vertical-range");return{u_fog_matrix:V?ve.calculateFogTileMatrix(V):de||F.identityMat,u_fog_range:j.getFovAdjustedRange(ve._fov),u_fog_color:ce,u_fog_horizon_blend:j.properties.get("horizon-blend"),u_fog_vertical_limit:[Math.min(Ee,Pe),Pe],u_fog_temporal_offset:xe,u_frustum_tl:te,u_frustum_tr:le,u_frustum_br:ae,u_frustum_bl:ue,u_globe_pos:ne,u_globe_radius:he,u_viewport:ye,u_globe_transition:s.S(ve.zoom),u_is_globe:+(ve.projection.name==="globe")}})(this,E,_,M,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*s.f.devicePixelRatio,this.transform.height*s.f.devicePixelRatio],B);h.setFogUniformValues(l,k)}C&&h.setCutoffUniformValues(l,C.uniformValues)}setTileLoadedFlag(l){this.tileLoaded=l}saveCanvasCopy(){const l=this.canvasCopy();l&&(this.frameCopies.push(l),this.tileLoaded=!1)}canvasCopy(){const l=this.context.gl,h=l.createTexture();return l.bindTexture(l.TEXTURE_2D,h),l.copyTexImage2D(l.TEXTURE_2D,0,l.RGBA,0,0,l.drawingBufferWidth,l.drawingBufferHeight,0),h}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const l=this.style&&this.style.fog;return!!l&&l.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const l=this._backgroundTiles,h=this._backgroundTiles={},_=this.transform.coveringTiles({tileSize:512});for(const B of _)h[B.key]=l[B.key]||new Jo(B,512,this.transform.tileZoom,this);return h}clearBackgroundTiles(){this._backgroundTiles={}}layerUsedInConflation(l,h){return!(!l.is3D()||l.minzoom&&l.minzoom>this.transform.zoom||l.sourceLayer!=="building"&&(!h||h.type!=="batched-model"))}isTileAffectedByFog(l){if(!this.style||!this.style.fog)return!1;if(this.transform.projection.name==="globe")return!0;let h=this._cachedTileFogOpacities[l.key];return h||(this._cachedTileFogOpacities[l.key]=h=this.style.fog.getOpacityForTile(l)),h[0]>=vn||h[1]>=vn}}function Nd(g,l){let h=!1,_=null;const B=()=>{_=null,h&&(g(),_=setTimeout(B,l),h=!1)};return()=>(h=!0,_||B(),_)}class gm{constructor(l){this._hashName=l&&encodeURIComponent(l),s.aY(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Nd(this._updateHashUnthrottled.bind(this),300)}addTo(l){return this._map=l,window.addEventListener("hashchange",this._onHashChange,!1),l.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const l=this._map;if(!l)return"";const h=iy(l);if(this._hashName){const _=this._hashName;let B=!1;const C=location.hash.slice(1).split("&").map(E=>{const M=E.split("=")[0];return M===_?(B=!0,`${M}=${h}`):E}).filter(E=>E);return B||C.push(`${_}=${h}`),`#${C.join("&")}`}return`#${h}`}_getCurrentHash(){const l=location.hash.replace("#","");if(this._hashName){let h;return l.split("&").map(_=>_.split("=")).forEach(_=>{_[0]===this._hashName&&(h=_)}),(h&&h[1]||"").split("/")}return l.split("/")}_onHashChange(){const l=this._map;if(!l)return!1;const h=this._getCurrentHash();if(h.length>=3&&!h.some(_=>isNaN(_))){const _=l.dragRotate.isEnabled()&&l.touchZoomRotate.isEnabled()?+(h[3]||0):l.getBearing();return l.jumpTo({center:[+h[2],+h[1]],zoom:+h[0],bearing:_,pitch:+(h[4]||0)}),!0}return!1}_updateHashUnthrottled(){history.replaceState(history.state,"",location.href.replace(/(#.+)?$/,this.getHashString()))}}function iy(g,l){const h=g.getCenter(),_=Math.round(100*g.getZoom())/100,B=Math.ceil((_*Math.LN2+Math.log(512/360/.5))/Math.LN10),C=Math.pow(10,B),E=Math.round(h.lng*C)/C,M=Math.round(h.lat*C)/C,k=g.getBearing(),F=g.getPitch();let j=l?`/${E}/${M}/${_}`:`${_}/${M}/${E}`;return(k||F)&&(j+="/"+Math.round(10*k)/10),F&&(j+=`/${Math.round(F)}`),j}const Fd={linearity:.3,easing:s.c_(0,0,.3,1)},Oa=s.e({deceleration:2500,maxSpeed:1400},Fd),HS=s.e({deceleration:20,maxSpeed:1400},Fd),_m=s.e({deceleration:1e3,maxSpeed:360},Fd),ai=s.e({deceleration:1e3,maxSpeed:90},Fd);class Mn{constructor(l){this._map=l,this.clear()}clear(){this._inertiaBuffer=[]}record(l){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:s.f.now(),settings:l})}_drainInertiaBuffer(){const l=this._inertiaBuffer,h=s.f.now();for(;l.length>0&&h-l[0].time>160;)l.shift()}_onMoveEnd(l){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const h={zoom:0,bearing:0,pitch:0,pan:new s.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:C}of this._inertiaBuffer)h.zoom+=C.zoomDelta||0,h.bearing+=C.bearingDelta||0,h.pitch+=C.pitchDelta||0,C.panDelta&&h.pan._add(C.panDelta),C.around&&(h.around=C.around),C.pinchAround&&(h.pinchAround=C.pinchAround);const _=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,B={};if(h.pan.mag()){const C=$s(h.pan.mag(),_,s.e({},Oa,l||{}));B.offset=h.pan.mult(C.amount/h.pan.mag()),B.center=this._map.transform.center,jd(B,C)}if(h.zoom){const C=$s(h.zoom,_,HS);B.zoom=this._map.transform.zoom+C.amount,jd(B,C)}if(h.bearing){const C=$s(h.bearing,_,_m);B.bearing=this._map.transform.bearing+s.aa(C.amount,-179,179),jd(B,C)}if(h.pitch){const C=$s(h.pitch,_,ai);B.pitch=this._map.transform.pitch+C.amount,jd(B,C)}if(B.zoom||B.bearing){const C=h.pinchAround===void 0?h.around:h.pinchAround;B.around=C?this._map.unproject(C):this._map.getCenter()}return this.clear(),B.noMoveStart=!0,B}}function jd(g,l){(!g.duration||g.duration<l.duration)&&(g.duration=l.duration,g.easing=l.easing)}function $s(g,l,h){const{maxSpeed:_,linearity:B,deceleration:C}=h,E=s.aa(g*B/(l/1e3),-_,_),M=Math.abs(E)/(C*B);return{easing:h.easing,duration:1e3*M,amount:E*(M/2)}}class _a extends s.b{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,h,_,B={}){const C=me(h.getCanvasContainer(),_),E=h.unproject(C);super(l,s.e({point:C,lngLat:E,originalEvent:_},B)),this._defaultPrevented=!1,this.target=h}}class iu extends s.b{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,h,_){const B=l==="touchend"?_.changedTouches:_.touches,C=Ce(h.getCanvasContainer(),B),E=C.map(k=>h.unproject(k)),M=C.reduce((k,F,j,V)=>k.add(F.div(V.length)),new s.P(0,0));super(l,{points:C,point:M,lngLats:E,lngLat:h.unproject(M),originalEvent:_}),this._defaultPrevented=!1}}class oy extends s.b{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,h,_){super(l,{originalEvent:_}),this._defaultPrevented=!1}}class ay{constructor(l,h){this._map=l,this._clickTolerance=h.clickTolerance}reset(){this._mousedownPos=void 0}wheel(l){return this._firePreventable(new oy(l.type,this._map,l))}mousedown(l,h){return this._mousedownPos=h,this._firePreventable(new _a(l.type,this._map,l))}mouseup(l){this._map.fire(new _a(l.type,this._map,l))}preclick(l){const h=s.e({},l);h.type="preclick",this._map.fire(new _a(h.type,this._map,h))}click(l,h){this._mousedownPos&&this._mousedownPos.dist(h)>=this._clickTolerance||(this.preclick(l),this._map.fire(new _a(l.type,this._map,l)))}dblclick(l){return this._firePreventable(new _a(l.type,this._map,l))}mouseover(l){this._map.fire(new _a(l.type,this._map,l))}mouseout(l){this._map.fire(new _a(l.type,this._map,l))}touchstart(l){return this._firePreventable(new iu(l.type,this._map,l))}touchmove(l){this._map.fire(new iu(l.type,this._map,l))}touchend(l){this._map.fire(new iu(l.type,this._map,l))}touchcancel(l){this._map.fire(new iu(l.type,this._map,l))}_firePreventable(l){if(this._map.fire(l),l.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ju{constructor(l){this._map=l}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(l){this._map.fire(new _a(l.type,this._map,l))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new _a("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(l){this._delayContextMenu?this._contextMenuEvent=l:this._map.fire(new _a(l.type,this._map,l)),this._map.listens("contextmenu")&&l.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Qu{constructor(l,h){this._map=l,this._el=l.getCanvasContainer(),this._container=l.getContainer(),this._clickTolerance=h.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(l,h){this.isEnabled()&&l.shiftKey&&l.button===0&&(H(),this._startPos=this._lastPos=h,this._active=!0)}mousemoveWindow(l,h){if(!this._active)return;const _=h,B=this._startPos,C=this._lastPos;if(!B||!C||C.equals(_)||!this._box&&_.dist(B)<this._clickTolerance)return;this._lastPos=_,this._box||(this._box=U("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",l));const E=Math.min(B.x,_.x),M=Math.max(B.x,_.x),k=Math.min(B.y,_.y),F=Math.max(B.y,_.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${E}px,${k}px)`,this._box.style.width=M-E+"px",this._box.style.height=F-k+"px")})}mouseupWindow(l,h){if(!this._active)return;const _=this._startPos,B=h;if(_&&l.button===0){if(this.reset(),se(),_.x!==B.x||_.y!==B.y)return this._map.fire(new s.b("boxzoomend",{originalEvent:l})),{cameraAnimation:C=>C.fitScreenCoordinates(_,B,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",l)}}keydown(l){this._active&&l.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",l))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),K(),delete this._startPos,delete this._lastPos}_fireEvent(l,h){return this._map.fire(new s.b(l,{originalEvent:h}))}}function rf(g,l){const h={};for(let _=0;_<g.length;_++)h[g[_].identifier]=l[_];return h}class ym{constructor(l){this.reset(),this.numTouches=l.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(l,h,_){(this.centroid||_.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=l.timeStamp),_.length===this.numTouches&&(this.centroid=function(B){const C=new s.P(0,0);for(const E of B)C._add(E);return C.div(B.length)}(h),this.touches=rf(_,h)))}touchmove(l,h,_){if(this.aborted||!this.centroid)return;const B=rf(_,h);for(const C in this.touches){const E=B[C];(!E||E.dist(this.touches[C])>30)&&(this.aborted=!0)}}touchend(l,h,_){if((!this.centroid||l.timeStamp-this.startTime>500)&&(this.aborted=!0),_.length===0){const B=!this.aborted&&this.centroid;if(this.reset(),B)return B}}}class $d{constructor(l){this.singleTap=new ym(l),this.numTaps=l.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(l,h,_){this.singleTap.touchstart(l,h,_)}touchmove(l,h,_){this.singleTap.touchmove(l,h,_)}touchend(l,h,_){const B=this.singleTap.touchend(l,h,_);if(B){const C=l.timeStamp-this.lastTime<500,E=!this.lastTap||this.lastTap.dist(B)<30;if(C&&E||this.reset(),this.count++,this.lastTime=l.timeStamp,this.lastTap=B,this.count===this.numTaps)return this.reset(),B}}}class sy{constructor(){this._zoomIn=new $d({numTouches:1,numTaps:2}),this._zoomOut=new $d({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(l,h,_){this._zoomIn.touchstart(l,h,_),this._zoomOut.touchstart(l,h,_)}touchmove(l,h,_){this._zoomIn.touchmove(l,h,_),this._zoomOut.touchmove(l,h,_)}touchend(l,h,_){const B=this._zoomIn.touchend(l,h,_),C=this._zoomOut.touchend(l,h,_);return B?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:E.getZoom()+1,around:E.unproject(B)},{originalEvent:l})}):C?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:E.getZoom()-1,around:E.unproject(C)},{originalEvent:l})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const ly={0:1,2:2};class Sl{constructor(l){this.reset(),this._clickTolerance=l.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(l,h){return!1}_move(l,h){return{}}mousedown(l,h){if(this._lastPoint)return;const _=Ae(l);this._correctButton(l,_)&&(this._lastPoint=h,this._eventButton=_)}mousemoveWindow(l,h){const _=this._lastPoint;if(_){if(l.preventDefault(),this._eventButton!=null&&function(B,C){const E=ly[C];return B.buttons===void 0||(B.buttons&E)!==E}(l,this._eventButton))this.reset();else if(this._moved||!(h.dist(_)<this._clickTolerance))return this._moved=!0,this._lastPoint=h,this._move(_,h)}}mouseupWindow(l){this._lastPoint&&Ae(l)===this._eventButton&&(this._moved&&se(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class uy extends Sl{mousedown(l,h){super.mousedown(l,h),this._lastPoint&&(this._active=!0)}_correctButton(l,h){return h===0&&!l.ctrlKey}_move(l,h){return{around:h,panDelta:h.sub(l)}}}class Ud extends Sl{_correctButton(l,h){return h===0&&l.ctrlKey||h===2}_move(l,h){const _=.8*(h.x-l.x);if(_)return this._active=!0,{bearingDelta:_}}contextmenu(l){l.preventDefault()}}class vm extends Sl{_correctButton(l,h){return h===0&&l.ctrlKey||h===2}_move(l,h){const _=-.5*(h.y-l.y);if(_)return this._active=!0,{pitchDelta:_}}contextmenu(l){l.preventDefault()}}class cy{constructor(l,h){this._map=l,this._el=l.getCanvasContainer(),this._minTouches=1,this._clickTolerance=h.clickTolerance||1,this.reset(),s.aY(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new s.P(0,0)}touchstart(l,h,_){return this._calculateTransform(l,h,_)}touchmove(l,h,_){if(this._active&&!(_.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(_.length===1&&!s.c$())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return l.cancelable&&l.preventDefault(),this._calculateTransform(l,h,_)}}touchend(l,h,_){this._calculateTransform(l,h,_),this._active&&_.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(l,h,_){_.length>0&&(this._active=!0);const B=rf(_,h),C=new s.P(0,0),E=new s.P(0,0);let M=0;for(const F in B){const j=B[F],V=this._touches[F];V&&(C._add(j),E._add(j.sub(V)),M++,B[F]=j)}if(this._touches=B,M<this._minTouches||!E.mag())return;const k=E.div(M);return this._sum._add(k),this._sum.mag()<this._clickTolerance?void 0:{around:C.div(M),panDelta:k}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=U("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.removeAttribute("role")},500)}}class po{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(l){}_move(l,h,_){return{}}touchstart(l,h,_){this._firstTwoTouches||_.length<2||(this._firstTwoTouches=[_[0].identifier,_[1].identifier],this._start([h[0],h[1]]))}touchmove(l,h,_){const B=this._firstTwoTouches;if(!B)return;l.preventDefault();const[C,E]=B,M=nf(_,h,C),k=nf(_,h,E);if(!M||!k)return;const F=this._aroundCenter?null:M.add(k).div(2);return this._move([M,k],F,l)}touchend(l,h,_){if(!this._firstTwoTouches)return;const[B,C]=this._firstTwoTouches,E=nf(_,h,B),M=nf(_,h,C);E&&M||(this._active&&se(),this.reset())}touchcancel(){this.reset()}enable(l){this._enabled=!0,this._aroundCenter=!!l&&l.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function nf(g,l,h){for(let _=0;_<g.length;_++)if(g[_].identifier===h)return l[_]}function Bm(g,l){return Math.log(g/l)/Math.LN2}class Vd extends po{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(l){this._startDistance=this._distance=l[0].dist(l[1])}_move(l,h){const _=this._distance;if(this._distance=l[0].dist(l[1]),this._active||!(Math.abs(Bm(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Bm(this._distance,_),pinchAround:h}}}function ec(g,l){return 180*g.angleWith(l)/Math.PI}class hy extends po{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(l){this._startVector=this._vector=l[0].sub(l[1]),this._minDiameter=l[0].dist(l[1])}_move(l,h){const _=this._vector;if(this._vector=l[0].sub(l[1]),_&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:ec(this._vector,_),pinchAround:h}}_isBelowThreshold(l){this._minDiameter=Math.min(this._minDiameter,l.mag());const h=25/(Math.PI*this._minDiameter)*360,_=this._startVector;if(!_)return!1;const B=ec(l,_);return Math.abs(B)<h}}function Gd(g){return Math.abs(g.y)>Math.abs(g.x)}class fy extends po{constructor(l){super(),this._map=l}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(l){this._lastPoints=l,Gd(l[0].sub(l[1]))&&(this._valid=!1)}_move(l,h,_){const B=this._lastPoints;if(!B)return;const C=l[0].sub(B[0]),E=l[1].sub(B[1]);return this._map._cooperativeGestures&&!s.c$()&&_.touches.length<3||(this._valid=this.gestureBeginsVertically(C,E,_.timeStamp),!this._valid)?void 0:(this._lastPoints=l,this._active=!0,{pitchDelta:(C.y+E.y)/2*-.5})}gestureBeginsVertically(l,h,_){if(this._valid!==void 0)return this._valid;const B=l.mag()>=2,C=h.mag()>=2;if(!B&&!C)return;if(!B||!C)return this._firstMove==null&&(this._firstMove=_),_-this._firstMove<100&&void 0;const E=l.y>0==h.y>0;return Gd(l)&&Gd(h)&&E}}const Zc={panStep:100,bearingStep:15,pitchStep:10};class Hd{constructor(){const l=Zc;this._panStep=l.panStep,this._bearingStep=l.bearingStep,this._pitchStep=l.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(l){if(l.altKey||l.ctrlKey||l.metaKey)return;let h=0,_=0,B=0,C=0,E=0;switch(l.keyCode){case 61:case 107:case 171:case 187:h=1;break;case 189:case 109:case 173:h=-1;break;case 37:l.shiftKey?_=-1:(l.preventDefault(),C=-1);break;case 39:l.shiftKey?_=1:(l.preventDefault(),C=1);break;case 38:l.shiftKey?B=1:(l.preventDefault(),E=-1);break;case 40:l.shiftKey?B=-1:(l.preventDefault(),E=1);break;default:return}return this._rotationDisabled&&(_=0,B=0),{cameraAnimation:M=>{const k=M.getZoom();M.easeTo({duration:300,easeId:"keyboardHandler",easing:dy,zoom:h?Math.round(k)+h*(l.shiftKey?2:1):k,bearing:M.getBearing()+_*this._bearingStep,pitch:M.getPitch()+B*this._pitchStep,offset:[-C*this._panStep,-E*this._panStep],center:M.getCenter()},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function dy(g){return g*(2-g)}const Wd=4.000244140625,py=1/450;class i1{constructor(l,h){this._map=l,this._el=l.getCanvasContainer(),this._handler=h,this._delta=0,this._lastDelta=0,this._defaultZoomRate=.01,this._wheelZoomRate=py,s.aY(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(l){this._defaultZoomRate=l}setWheelZoomRate(l){this._wheelZoomRate=l}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(l){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!l&&l.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(l){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(l.ctrlKey||l.metaKey||this.isZooming()||s.c$()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let h=l.deltaMode===WheelEvent.DOM_DELTA_LINE?40*l.deltaY:l.deltaY;const _=s.f.now(),B=_-(this._lastWheelEventTime||0);this._lastWheelEventTime=_,h!==0&&h%Wd==0?this._type="wheel":h!==0&&Math.abs(h)<4?this._type="trackpad":B>400?(this._type=null,this._lastValue=h,this._timeout=setTimeout(this._onTimeout,40,l)):this._type||(this._type=Math.abs(B*h)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,h+=this._lastValue)),l.shiftKey&&h&&(h/=4),this._type&&(this._lastWheelEvent=l,this._delta-=h,this._active||this._start(l)),l.preventDefault()}_onTimeout(l){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(l)}_start(l){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const h=me(this._el,l);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:h,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const l=this._map.transform;this._type==="wheel"&&l.projection.wrap&&(l._center.lng>=180||l._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const h=()=>l._terrainEnabled()&&this._aroundCoord?l.computeZoomRelativeTo(this._aroundCoord):l.zoom;if(this._delta!==0){const F=this._type==="wheel"&&Math.abs(this._delta)>Wd?this._wheelZoomRate:this._defaultZoomRate;let j=2/(1+Math.exp(-Math.abs(this._delta*F)));this._delta<0&&j!==0&&(j=1/j);const V=h(),Y=Math.pow(2,V),te=typeof this._targetZoom=="number"?l.zoomScale(this._targetZoom):Y;this._targetZoom=Math.min(l.maxZoom,Math.max(l.minZoom,l.scaleZoom(te*j))),this._type==="wheel"&&(this._startZoom=V,this._easing=this._smoothOutEasing(200)),this._lastDelta=this._delta,this._delta=0}const _=typeof this._targetZoom=="number"?this._targetZoom:h(),B=this._startZoom,C=this._easing;let E,M=!1;if(this._type==="wheel"&&B&&C){const F=Math.min((s.f.now()-this._lastWheelEventTime)/200,1),j=C(F);E=s.U(B,_,j),F<1?this._frameId||(this._frameId=!0):M=!0}else E=_,M=!0;this._active=!0,M&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200));let k=E-h();return k*this._lastDelta<0&&(k=0),{noInertia:!0,needsRenderFrame:!M,zoomDelta:k,around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(l){let h=s.d0;if(this._prevEase){const _=this._prevEase,B=(s.f.now()-_.start)/_.duration,C=_.easing(B+.01)-_.easing(B),E=.27/Math.sqrt(C*C+1e-4)*.01,M=Math.sqrt(.0729-E*E);h=s.c_(E,M,.25,1)}return this._prevEase={start:s.f.now(),duration:l,easing:h},h}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=U("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.removeAttribute("role")},200)}}class o1{constructor(l,h){this._clickZoom=l,this._tapZoom=h}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class a1{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(l,h){return l.preventDefault(),{cameraAnimation:_=>{_.easeTo({duration:300,zoom:_.getZoom()+(l.shiftKey?-1:1),around:_.unproject(h)},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class s1{constructor(){this._tap=new $d({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(l,h,_){this._swipePoint||(this._tapTime&&l.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?_.length>0&&(this._swipePoint=h[0],this._swipeTouch=_[0].identifier):this._tap.touchstart(l,h,_))}touchmove(l,h,_){if(this._tapTime){if(this._swipePoint){if(_[0].identifier!==this._swipeTouch)return;const B=h[0],C=B.y-this._swipePoint.y;return this._swipePoint=B,l.preventDefault(),this._active=!0,{zoomDelta:C/128}}}else this._tap.touchmove(l,h,_)}touchend(l,h,_){this._tapTime?this._swipePoint&&_.length===0&&this.reset():this._tap.touchend(l,h,_)&&(this._tapTime=l.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class l1{constructor(l,h,_){this._el=l,this._mousePan=h,this._touchPan=_}enable(l){this._inertiaOptions=l||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class u1{constructor(l,h,_){this._pitchWithRotate=l.pitchWithRotate,this._mouseRotate=h,this._mousePitch=_}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class c1{constructor(l,h,_,B){this._el=l,this._touchZoom=h,this._touchRotate=_,this._tapDragZoom=B,this._rotationDisabled=!1,this._enabled=!0}enable(l){this._touchZoom.enable(l),this._rotationDisabled||this._touchRotate.enable(l),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Zd=g=>g.zoom||g.drag||g.pitch||g.rotate;class h1 extends s.b{}class f1{constructor(){this.constants=[1,1,.01],this.radius=0}setup(l,h){const _=s.N.sub([],h,l);this.radius=s.N.length(_[2]<0?s.N.div([],_,this.constants):[_[0],_[1],0])}projectRay(l){s.N.div(l,l,this.constants),s.N.normalize(l,l),s.N.mul(l,l,this.constants);const h=s.N.scale([],l,this.radius);if(h[2]>0){const _=s.N.scale([],[0,0,1],s.N.dot(h,[0,0,1])),B=s.N.scale([],s.N.normalize([],[h[0],h[1],0]),this.radius),C=s.N.add([],h,s.N.scale([],s.N.sub([],s.N.add([],B,_),h),2));h[0]=C[0],h[1]=C[1]}return h}}function qd(g){return g.panDelta&&g.panDelta.mag()||g.zoomDelta||g.bearingDelta||g.pitchDelta}class WS{constructor(l,h){this._map=l,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Mn(l),this._bearingSnap=h.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new f1,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(h),s.aY(["handleEvent","handleWindowEvent"],this);const _=this._el;this._listeners=[[_,"touchstart",{passive:!0}],[_,"touchmove",{passive:!1}],[_,"touchend",void 0],[_,"touchcancel",void 0],[_,"mousedown",void 0],[_,"mousemove",void 0],[_,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[_,"mouseover",void 0],[_,"mouseout",void 0],[_,"dblclick",void 0],[_,"click",void 0],[_,"keydown",{capture:!1}],[_,"keyup",void 0],[_,"wheel",{passive:!1}],[_,"contextmenu",void 0],[window,"blur",void 0]];for(const[B,C,E]of this._listeners){const M=B===document?this.handleWindowEvent:this.handleEvent;B.addEventListener(C,M,E)}}destroy(){for(const[l,h,_]of this._listeners){const B=l===document?this.handleWindowEvent:this.handleEvent;l.removeEventListener(h,B,_)}}_addDefaultHandlers(l){const h=this._map,_=h.getCanvasContainer();this._add("mapEvent",new ay(h,l));const B=h.boxZoom=new Qu(h,l);this._add("boxZoom",B);const C=new sy,E=new a1;h.doubleClickZoom=new o1(E,C),this._add("tapZoom",C),this._add("clickZoom",E);const M=new s1;this._add("tapDragZoom",M);const k=h.touchPitch=new fy(h);this._add("touchPitch",k);const F=new Ud(l),j=new vm(l);h.dragRotate=new u1(l,F,j),this._add("mouseRotate",F,["mousePitch"]),this._add("mousePitch",j,["mouseRotate"]);const V=new uy(l),Y=new cy(h,l);h.dragPan=new l1(_,V,Y),this._add("mousePan",V),this._add("touchPan",Y,["touchZoom","touchRotate"]);const te=new hy,le=new Vd;h.touchZoomRotate=new c1(_,le,te,M),this._add("touchRotate",te,["touchPan","touchZoom"]),this._add("touchZoom",le,["touchPan","touchRotate"]),this._add("blockableMapEvent",new Ju(h));const ae=h.scrollZoom=new i1(h,this);this._add("scrollZoom",ae,["mousePan"]);const ue=h.keyboard=new Hd;this._add("keyboard",ue);for(const ne of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])l.interactive&&l[ne]&&h[ne].enable(l[ne])}_add(l,h,_){this._handlers.push({handlerName:l,handler:h,allowed:_}),this._handlersById[l]=h}stop(l){if(!this._updatingCamera){for(const{handler:h}of this._handlers)h.reset();this._inertia.clear(),this._fireEvents({},{},l),this._changes=[],this._originalZoom=void 0}}isActive(){for(const{handler:l}of this._handlers)if(l.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Zd(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(l,h,_){for(const B in l)if(B!==_&&(!h||h.indexOf(B)<0))return!0;return!1}handleWindowEvent(l){this.handleEvent(l,`${l.type}Window`)}_getMapTouches(l){const h=[];for(const _ of l)this._el.contains(_.target)&&h.push(_);return h}handleEvent(l,h){this._updatingCamera=!0;const _=l.type==="renderFrame",B=_?void 0:l,C={needsRenderFrame:!1},E={},M={},k=l.touches?this._getMapTouches(l.touches):void 0,F=k?Ce(this._el,k):_?void 0:me(this._el,l);for(const{handlerName:Y,handler:te,allowed:le}of this._handlers){if(!te.isEnabled())continue;let ae;this._blockedByActive(M,le,Y)?te.reset():te[h||l.type]&&(ae=te[h||l.type](l,F,k),this.mergeHandlerResult(C,E,ae,Y,B),ae&&ae.needsRenderFrame&&this._triggerRenderFrame()),(ae||te.isActive())&&(M[Y]=te)}const j={};for(const Y in this._previousActiveHandlers)M[Y]||(j[Y]=B);this._previousActiveHandlers=M,(Object.keys(j).length||qd(C))&&(this._changes.push([C,E,j]),this._triggerRenderFrame()),(Object.keys(M).length||qd(C))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:V}=C;V&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],V(this._map))}mergeHandlerResult(l,h,_,B,C){if(!_)return;s.e(l,_);const E={handlerName:B,originalEvent:_.originalEvent||C};_.zoomDelta!==void 0&&(h.zoom=E),_.panDelta!==void 0&&(h.drag=E),_.pitchDelta!==void 0&&(h.pitch=E),_.bearingDelta!==void 0&&(h.rotate=E)}_applyChanges(){const l={},h={},_={};for(const[B,C,E]of this._changes)B.panDelta&&(l.panDelta=(l.panDelta||new s.P(0,0))._add(B.panDelta)),B.zoomDelta&&(l.zoomDelta=(l.zoomDelta||0)+B.zoomDelta),B.bearingDelta&&(l.bearingDelta=(l.bearingDelta||0)+B.bearingDelta),B.pitchDelta&&(l.pitchDelta=(l.pitchDelta||0)+B.pitchDelta),B.around!==void 0&&(l.around=B.around),B.aroundCoord!==void 0&&(l.aroundCoord=B.aroundCoord),B.pinchAround!==void 0&&(l.pinchAround=B.pinchAround),B.noInertia&&(l.noInertia=B.noInertia),s.e(h,C),s.e(_,E);this._updateMapTransform(l,h,_),this._changes=[]}_updateMapTransform(l,h,_){const B=this._map,C=B.transform,E=he=>[he.x,he.y,he.z];if((he=>{const ye=this._eventsInProgress.drag;return ye&&!this._handlersById[ye.handlerName].isActive()})()&&!qd(l)){const he=C.zoom;C.cameraElevationReference="sea",this._originalZoom!=null&&C._orthographicProjectionAtLowPitch&&C.projection.name!=="globe"&&C.pitch===0?(C.cameraElevationReference="ground",C.zoom=this._originalZoom):(C.recenterOnTerrain(),C.cameraElevationReference="ground"),he!==C.zoom&&this._map._update(!0)}if(C._isCameraConstrained&&B._stop(!0),!qd(l))return void this._fireEvents(h,_,!0);let{panDelta:M,zoomDelta:k,bearingDelta:F,pitchDelta:j,around:V,aroundCoord:Y,pinchAround:te}=l;C._isCameraConstrained&&(k>0&&(k=0),C._isCameraConstrained=!1),te!==void 0&&(V=te),(k||(he=>h[he]&&!this._eventsInProgress[he])("drag"))&&V&&(this._dragOrigin=E(C.pointCoordinate3D(V)),this._originalZoom=C.zoom,this._trackingEllipsoid.setup(C._camera.position,this._dragOrigin)),C.cameraElevationReference="sea",B._stop(!0),V=V||B.transform.centerPoint,F&&(C.bearing+=F),j&&(C.pitch+=j),C._updateCameraState();const le=[0,0,0];if(M)if(C.projection.name==="mercator"){const he=this._trackingEllipsoid.projectRay(C.screenPointToMercatorRay(V).dir),ye=this._trackingEllipsoid.projectRay(C.screenPointToMercatorRay(V.sub(M)).dir);le[0]=ye[0]-he[0],le[1]=ye[1]-he[1]}else{const he=C.pointCoordinate(V);if(C.projection.name==="globe"){M=M.rotate(-C.angle);const ye=C._pixelsPerMercatorPixel/C.worldSize;le[0]=-M.x*s.d1(s.au(he.y))*ye,le[1]=-M.y*s.d1(C.center.lat)*ye}else{const ye=C.pointCoordinate(V.sub(M));he&&ye&&(le[0]=ye.x-he.x,le[1]=ye.y-he.y)}}const ae=C.zoom,ue=[0,0,0];if(k){const he=E(Y||C.pointCoordinate3D(V)),ye={dir:s.N.normalize([],s.N.sub([],he,C._camera.position))};if(ye.dir[2]<0){const de=C.zoomDeltaToMovement(he,k);s.N.scale(ue,ye.dir,de)}}const ne=s.N.add(le,le,ue);C._translateCameraConstrained(ne),k&&Math.abs(C.zoom-ae)>1e-4&&C.recenterOnTerrain(),C.cameraElevationReference="ground",this._map._update(),l.noInertia||this._inertia.record(l),this._fireEvents(h,_,!0)}_fireEvents(l,h,_){const B=Zd(this._eventsInProgress),C=Zd(l),E={};for(const j in l){const{originalEvent:V}=l[j];this._eventsInProgress[j]||(E[`${j}start`]=V),this._eventsInProgress[j]=l[j]}!B&&C&&this._fireEvent("movestart",C.originalEvent);for(const j in E)this._fireEvent(j,E[j]);C&&this._fireEvent("move",C.originalEvent);for(const j in l){const{originalEvent:V}=l[j];this._fireEvent(j,V)}const M={};let k;for(const j in this._eventsInProgress){const{handlerName:V,originalEvent:Y}=this._eventsInProgress[j];this._handlersById[V].isActive()||(delete this._eventsInProgress[j],k=h[V]||Y,M[`${j}end`]=k)}for(const j in M)this._fireEvent(j,M[j]);const F=Zd(this._eventsInProgress);if(_&&(B||C)&&!F){this._updatingCamera=!0;const j=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),V=Y=>Y!==0&&-this._bearingSnap<Y&&Y<this._bearingSnap;j?(V(j.bearing||this._map.getBearing())&&(j.bearing=0),this._map.easeTo(j,{originalEvent:k})):(this._map.fire(new s.b("moveend",{originalEvent:k})),V(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(l,h){this._map.fire(new s.b(l,h?{originalEvent:h}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(l=>{this._frameId=void 0,this.handleEvent(new h1("renderFrame",{timeStamp:l})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const d1="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class Ei extends s.E{constructor(l,h){super(),this._moving=!1,this._zooming=!1,this.transform=l,this._bearingSnap=h.bearingSnap,this._respectPrefersReducedMotion=h.respectPrefersReducedMotion!==!1,s.aY(["_renderFrameCallback"],this)}getCenter(){return new s.bn(this.transform.center.lng,this.transform.center.lat)}setCenter(l,h){return this.jumpTo({center:l},h)}panBy(l,h,_){return l=s.P.convert(l).mult(-1),this.panTo(this.transform.center,s.e({offset:l},h),_)}panTo(l,h,_){return this.easeTo(s.e({center:l},h),_)}getZoom(){return this.transform.zoom}setZoom(l,h){return this.jumpTo({zoom:l},h),this}zoomTo(l,h,_){return this.easeTo(s.e({zoom:l},h),_)}zoomIn(l,h){return this.zoomTo(this.getZoom()+1,l,h),this}zoomOut(l,h){return this.zoomTo(this.getZoom()-1,l,h),this}getBearing(){return this.transform.bearing}setBearing(l,h){return this.jumpTo({bearing:l},h),this}getPadding(){return this.transform.padding}setPadding(l,h){return this.jumpTo({padding:l},h),this}rotateTo(l,h,_){return this.easeTo(s.e({bearing:l},h),_)}resetNorth(l,h){return this.rotateTo(0,s.e({duration:1e3},l),h),this}resetNorthPitch(l,h){return this.easeTo(s.e({bearing:0,pitch:0,duration:1e3},l),h),this}snapToNorth(l,h){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(l,h):this}getPitch(){return this.transform.pitch}setPitch(l,h){return this.jumpTo({pitch:l},h),this}cameraForBounds(l,h){l=s.ad.convert(l);const _=h&&h.bearing||0,B=h&&h.pitch||0,C=l.getNorthWest(),E=l.getSouthEast();return this._cameraForBounds(this.transform,C,E,_,B,h)}_extendCameraOptions(l){const h={top:0,bottom:0,right:0,left:0};if(typeof(l=s.e({padding:h,offset:[0,0],maxZoom:this.transform.maxZoom},l)).padding=="number"){const _=l.padding;l.padding={top:_,bottom:_,right:_,left:_}}return l.padding=s.e(h,l.padding),l}_minimumAABBFrustumDistance(l,h){const _=h.max[0]-h.min[0],B=h.max[1]-h.min[1];return _/B>l.aspect?_/(2*Math.tan(.5*l.fovX)*l.aspect):B/(2*Math.tan(.5*l.fovY)*l.aspect)}_cameraForBoundsOnGlobe(l,h,_,B,C,E){const M=l.clone(),k=this._extendCameraOptions(E);M.bearing=B,M.pitch=C;const F=s.bn.convert(h),j=s.bn.convert(_),V=.5*(F.lat+j.lat),Y=.5*(F.lng+j.lng),te=s.d2(V,Y),le=s.N.normalize([],te),ae=s.N.normalize([],s.N.cross([],le,[0,1,0])),ue=s.N.cross([],ae,le),ne=[ae[0],ae[1],ae[2],0,ue[0],ue[1],ue[2],0,le[0],le[1],le[2],0,0,0,0,1],he=[te,s.d2(F.lat,F.lng),s.d2(j.lat,F.lng),s.d2(j.lat,j.lng),s.d2(F.lat,j.lng),s.d2(V,F.lng),s.d2(V,j.lng),s.d2(F.lat,Y),s.d2(j.lat,Y)];let ye=s.bS.fromPoints(he.map(Ze=>[s.N.dot(ae,Ze),s.N.dot(ue,Ze),s.N.dot(le,Ze)]));const de=s.N.transformMat4([],ye.center,ne);s.N.squaredLength(de)===0&&s.N.set(de,0,0,1),s.N.normalize(de,de),s.N.scale(de,de,s.ab),M.center=s.d3(de);const ve=M.getWorldToCameraMatrix(),ce=s.a6.invert(new Float64Array(16),ve);ye=s.bS.applyTransform(ye,s.a6.multiply([],ve,ne)),s.N.transformMat4(de,de,ve);const xe=.5*(ye.max[2]-ye.min[2]),Ee=this._minimumAABBFrustumDistance(M,ye),Pe=s.N.scale([],[0,0,1],xe),Re=s.N.add(Pe,de,Pe),Xe=Ee+(M.pitch===0?0:s.N.distance(de,Re)),Fe=M.globeCenterInViewSpace,it=s.N.sub([],de,[Fe[0],Fe[1],Fe[2]]);s.N.normalize(it,it),s.N.scale(it,it,Xe);const rt=s.N.add([],de,it);s.N.transformMat4(rt,rt,ce);const Bt=s.d4/s.ab,Ve=s.N.length(rt),et=s.bl(Math.max(Ve*Bt-s.d4,Number.EPSILON),0),ke=Math.min(M.zoomFromMercatorZAdjusted(et),k.maxZoom);return ke>.5*(s.bG+s.bx)?(M.setProjection({name:"mercator"}),M.zoom=ke,this._cameraForBounds(M,h,_,B,C,E)):{center:M.center,zoom:ke,bearing:B,pitch:C}}queryTerrainElevation(l,h){const _=this.transform.elevation;return _?(h=s.e({},{exaggerated:!0},h),_.getAtPoint(s.L.fromLngLat(l),null,h.exaggerated)):null}_cameraForBounds(l,h,_,B,C,E){if(l.projection.name==="globe")return this._cameraForBoundsOnGlobe(l,h,_,B,C,E);const M=l.clone(),k=this._extendCameraOptions(E),F=M.padding;M.bearing=B,M.pitch=C;const j=s.bn.convert(h),V=s.bn.convert(_),Y=new s.bn(j.lng,V.lat),te=new s.bn(V.lng,j.lat),le=M.project(j),ae=M.project(V),ue=this.queryTerrainElevation(j),ne=this.queryTerrainElevation(V),he=this.queryTerrainElevation(Y),ye=this.queryTerrainElevation(te),de=[[le.x,le.y,Math.min(ue||0,ne||0,he||0,ye||0)],[ae.x,ae.y,Math.max(ue||0,ne||0,he||0,ye||0)]];let ve=s.bS.fromPoints(de);const ce=M.getWorldToCameraMatrix(),xe=s.a6.invert(new Float64Array(16),ce);ve=s.bS.applyTransform(ve,ce);const Ee=s.N.sub([],ve.max,ve.min),Pe=F.left||0,Re=F.right||0,Xe=F.bottom||0,Fe=F.top||0,{left:it,right:rt,top:Bt,bottom:Ve}=k.padding,et=.5*(Pe+Re),ke=.5*(Fe+Xe),Ze=Math.min(M.scaleZoom(M.scale*Math.min((M.width-(Pe+Re+it+rt))/Ee[0],(M.height-(Xe+Fe+Ve+Bt))/Ee[1])),k.maxZoom),bt=M.scale/M.zoomScale(Ze);ve=new s.bS([ve.min[0]-(it+et)*bt,ve.min[1]-(Ve+ke)*bt,ve.min[2]],[ve.max[0]+(rt+et)*bt,ve.max[1]+(Bt+ke)*bt,ve.max[2]]);const Pt=.5*Ee[2],At=this._minimumAABBFrustumDistance(M,ve),Ft=[0,0,1,0];s.a7.transformMat4(Ft,Ft,ce),s.a7.normalize(Ft,Ft);const tr=s.N.scale([],Ft,At+Pt),hr=s.N.add([],ve.center,tr),ir=(typeof k.offset.x=="number"&&typeof k.offset.y=="number"?new s.P(k.offset.x,k.offset.y):s.P.convert(k.offset)).rotate(-s.bj(B));ve.center[0]-=ir.x*bt,ve.center[1]+=ir.y*bt,s.N.transformMat4(ve.center,ve.center,xe),s.N.transformMat4(hr,hr,xe);const sr=[ve.center[0],ve.center[1],hr[2]*M.pixelsPerMeter];s.N.scale(sr,sr,1/M.worldSize);const Lr=s.at(sr[0]),Cr=s.au(sr[1]),Pr=Math.min(M._zoomFromMercatorZ(sr[2]),k.maxZoom),Dr=new s.bn(Lr,Cr);return M.mercatorFromTransition&&Pr<.5*(s.bG+s.bx)?(M.setProjection({name:"globe"}),M.zoom=Pr,this._cameraForBounds(M,h,_,B,C,E)):{center:Dr,zoom:Pr,bearing:B,pitch:C}}fitBounds(l,h,_){const B=this.cameraForBounds(l,h);return this._fitInternal(B,h,_)}fitScreenCoordinates(l,h,_,B,C){const E=s.P.convert(l),M=s.P.convert(h),k=new s.P(Math.min(E.x,M.x),Math.min(E.y,M.y)),F=new s.P(Math.max(E.x,M.x),Math.max(E.y,M.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(E,M))return this;const j=this.transform.pointLocation3D(k),V=this.transform.pointLocation3D(F),Y=this.transform.pointLocation3D(new s.P(k.x,F.y)),te=this.transform.pointLocation3D(new s.P(F.x,k.y)),le=[Math.min(j.lng,V.lng,Y.lng,te.lng),Math.min(j.lat,V.lat,Y.lat,te.lat)],ae=[Math.max(j.lng,V.lng,Y.lng,te.lng),Math.max(j.lat,V.lat,Y.lat,te.lat)],ue=B&&B.pitch?B.pitch:this.getPitch(),ne=this._cameraForBounds(this.transform,le,ae,_,ue,B);return this._fitInternal(ne,B,C)}_fitInternal(l,h,_){return l?(delete(h=s.e(l,h)).padding,h.linear?this.easeTo(h,_):this.flyTo(h,_)):this}jumpTo(l,h){this.stop();const _=l.preloadOnly?this.transform.clone():this.transform;let B=!1,C=!1,E=!1;return"zoom"in l&&_.zoom!==+l.zoom&&(B=!0,_.zoom=+l.zoom),l.center!==void 0&&(_.center=s.bn.convert(l.center)),"bearing"in l&&_.bearing!==+l.bearing&&(C=!0,_.bearing=+l.bearing),"pitch"in l&&_.pitch!==+l.pitch&&(E=!0,_.pitch=+l.pitch),l.padding==null||_.isPaddingEqual(l.padding)||(_.padding=l.padding),l.preloadOnly?(this._preloadTiles(_),this):(this.fire(new s.b("movestart",h)).fire(new s.b("move",h)),B&&this.fire(new s.b("zoomstart",h)).fire(new s.b("zoom",h)).fire(new s.b("zoomend",h)),C&&this.fire(new s.b("rotatestart",h)).fire(new s.b("rotate",h)).fire(new s.b("rotateend",h)),E&&this.fire(new s.b("pitchstart",h)).fire(new s.b("pitch",h)).fire(new s.b("pitchend",h)),this.fire(new s.b("moveend",h)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||s.w(d1),this.transform.getFreeCameraOptions()}setFreeCameraOptions(l,h){const _=this.transform;if(!_.projection.supportsFreeCamera)return s.w(d1),this;this.stop();const B=_.zoom,C=_.pitch,E=_.bearing;_.setFreeCameraOptions(l);const M=B!==_.zoom,k=C!==_.pitch,F=E!==_.bearing;return this.fire(new s.b("movestart",h)).fire(new s.b("move",h)),M&&this.fire(new s.b("zoomstart",h)).fire(new s.b("zoom",h)).fire(new s.b("zoomend",h)),F&&this.fire(new s.b("rotatestart",h)).fire(new s.b("rotate",h)).fire(new s.b("rotateend",h)),k&&this.fire(new s.b("pitchstart",h)).fire(new s.b("pitch",h)).fire(new s.b("pitchend",h)),this.fire(new s.b("moveend",h)),this}easeTo(l,h){this._stop(!1,l.easeId),((l=s.e({offset:[0,0],duration:500,easing:s.d0},l)).animate===!1||this._prefersReducedMotion(l))&&(l.duration=0);const _=this.transform,B=this.getZoom(),C=this.getBearing(),E=this.getPitch(),M=this.getPadding(),k="zoom"in l?+l.zoom:B,F="bearing"in l?this._normalizeBearing(l.bearing,C):C,j="pitch"in l?+l.pitch:E,V="padding"in l?l.padding:_.padding,Y=s.P.convert(l.offset);let te,le,ae;if(_.projection.name==="globe"){const Pe=s.L.fromLngLat(_.center),Re=Y.rotate(-_.angle);Pe.x+=Re.x/_.worldSize,Pe.y+=Re.y/_.worldSize;const Xe=Pe.toLngLat(),Fe=s.bn.convert(l.center||Xe);this._normalizeCenter(Fe),te=_.centerPoint.add(Re),le=new s.P(Pe.x,Pe.y).mult(_.worldSize),ae=new s.P(s.a5(Fe.lng),s.ae(Fe.lat)).mult(_.worldSize).sub(le)}else{te=_.centerPoint.add(Y);const Pe=_.pointLocation(te),Re=s.bn.convert(l.center||Pe);this._normalizeCenter(Re),le=_.project(Pe),ae=_.project(Re).sub(le)}const ue=_.zoomScale(k-B);let ne,he;l.around&&(ne=s.bn.convert(l.around),he=_.locationPoint(ne));const ye=this._zooming||k!==B,de=this._rotating||C!==F,ve=this._pitching||j!==E,ce=!_.isPaddingEqual(V),xe=Pe=>Re=>{if(ye&&(Pe.zoom=s.U(B,k,Re)),de&&(Pe.bearing=s.U(C,F,Re)),ve&&(Pe.pitch=s.U(E,j,Re)),ce&&(Pe.interpolatePadding(M,V,Re),te=Pe.centerPoint.add(Y)),ne)Pe.setLocationAtPoint(ne,he);else{const Xe=Pe.zoomScale(Pe.zoom-B),Fe=k>B?Math.min(2,ue):Math.max(.5,ue),it=Math.pow(Fe,1-Re),rt=Pe.unproject(le.add(ae.mult(Re*it)).mult(Xe));Pe.setLocationAtPoint(Pe.renderWorldCopies?rt.wrap():rt,te)}return l.preloadOnly||this._fireMoveEvents(h),Pe};if(l.preloadOnly){const Pe=this._emulate(xe,l.duration,_);return this._preloadTiles(Pe),this}const Ee={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=ye,this._rotating=de,this._pitching=ve,this._easeId=l.easeId,this._prepareEase(h,l.noMoveStart,Ee),this._ease(xe(_),Pe=>{_.cameraElevationReference==="sea"&&_.recenterOnTerrain(),this._afterEase(h,Pe)},l),this}_prepareEase(l,h,_={}){this._moving=!0,this.transform.cameraElevationReference="sea",this.transform._orthographicProjectionAtLowPitch&&this.transform.pitch===0&&this.transform.projection.name!=="globe"&&(this.transform.cameraElevationReference="ground"),h||_.moving||this.fire(new s.b("movestart",l)),this._zooming&&!_.zooming&&this.fire(new s.b("zoomstart",l)),this._rotating&&!_.rotating&&this.fire(new s.b("rotatestart",l)),this._pitching&&!_.pitching&&this.fire(new s.b("pitchstart",l))}_fireMoveEvents(l){this.fire(new s.b("move",l)),this._zooming&&this.fire(new s.b("zoom",l)),this._rotating&&this.fire(new s.b("rotate",l)),this._pitching&&this.fire(new s.b("pitch",l))}_afterEase(l,h){if(this._easeId&&h&&this._easeId===h)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const _=this._zooming,B=this._rotating,C=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,_&&this.fire(new s.b("zoomend",l)),B&&this.fire(new s.b("rotateend",l)),C&&this.fire(new s.b("pitchend",l)),this.fire(new s.b("moveend",l))}flyTo(l,h){if(this._prefersReducedMotion(l)){const Ve=s.ac(l,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Ve,h)}this.stop(),l=s.e({offset:[0,0],speed:1.2,curve:1.42,easing:s.d0},l);const _=this.transform,B=this.getZoom(),C=this.getBearing(),E=this.getPitch(),M="zoom"in l?s.aa(+l.zoom,_.minZoom,_.maxZoom):B,k="bearing"in l?this._normalizeBearing(l.bearing,C):C,F="pitch"in l?+l.pitch:E,j=_.zoomScale(M-B),V=s.P.convert(l.offset),Y=_.centerPoint.add(V),te=_.pointLocation(Y);let le=l.center;if(le&&l.padding){const Ve=this._cameraForBounds(this.transform,le,le,k,F,l);Ve&&(le=Ve.center)}le=s.bn.convert(le||te),this._normalizeCenter(le);const ae=_.project(te),ue=_.project(le).sub(ae);let ne=l.curve;const he=Math.max(_.width,_.height),ye=he/j,de=ue.mag();if("minZoom"in l){const Ve=s.aa(Math.min(l.minZoom,B,M),_.minZoom,_.maxZoom),et=he/_.zoomScale(Ve-B);ne=Math.sqrt(et/de*2)}const ve=ne*ne;function ce(Ve){const et=(ye*ye-he*he+(Ve?-1:1)*ve*ve*de*de)/(2*(Ve?ye:he)*ve*de);return Math.log(Math.sqrt(et*et+1)-et)}function xe(Ve){return(Math.exp(Ve)-Math.exp(-Ve))/2}function Ee(Ve){return(Math.exp(Ve)+Math.exp(-Ve))/2}const Pe=ce(0);let Re=function(Ve){return Ee(Pe)/Ee(Pe+ne*Ve)},Xe=function(Ve){return he*((Ee(Pe)*(xe(et=Pe+ne*Ve)/Ee(et))-xe(Pe))/ve)/de;var et},Fe=(ce(1)-Pe)/ne;if(Math.abs(de)<1e-6||!isFinite(Fe)){if(Math.abs(he-ye)<1e-6)return this.easeTo(l,h);const Ve=ye<he?-1:1;Fe=Math.abs(Math.log(ye/he))/ne,Xe=function(){return 0},Re=function(et){return Math.exp(Ve*ne*et)}}l.duration="duration"in l?+l.duration:1e3*Fe/("screenSpeed"in l?+l.screenSpeed/ne:+l.speed),l.maxDuration&&l.duration>l.maxDuration&&(l.duration=0);const it=C!==k,rt=F!==E,Bt=Ve=>et=>{const ke=et*Fe,Ze=1/Re(ke);Ve.zoom=et===1?M:B+Ve.scaleZoom(Ze),it&&(Ve.bearing=s.U(C,k,et)),rt&&(Ve.pitch=s.U(E,F,et));const bt=et===1?le:Ve.unproject(ae.add(ue.mult(Xe(ke))).mult(Ze));return Ve.setLocationAtPoint(Ve.renderWorldCopies?bt.wrap():bt,Y),Ve._updateCameraOnTerrain(),l.preloadOnly||this._fireMoveEvents(h),Ve};if(l.preloadOnly){const Ve=this._emulate(Bt,l.duration,_);return this._preloadTiles(Ve),this}return this._zooming=!0,this._rotating=it,this._pitching=rt,this._prepareEase(h,!1),this._ease(Bt(_),()=>this._afterEase(h),l),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(l,h){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const _=this._onEaseEnd;this._onEaseEnd=void 0,_.call(this,h)}if(!l){const _=this.handlers;_&&_.stop(!1)}return this}_ease(l,h,_){_.animate===!1||_.duration===0?(l(1),h()):(this._easeStart=s.f.now(),this._easeOptions=_,this._onEaseFrame=l,this._onEaseEnd=h,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const l=Math.min((s.f.now()-this._easeStart)/this._easeOptions.duration,1),h=this._onEaseFrame;h&&h(this._easeOptions.easing(l)),l<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(l,h){l=s.bh(l,-180,180);const _=Math.abs(l-h);return Math.abs(l-360-h)<_&&(l-=360),Math.abs(l+360-h)<_&&(l+=360),l}_normalizeCenter(l){const h=this.transform;if(h.maxBounds||h.projection.name!=="globe"&&!h.renderWorldCopies)return;const _=l.lng-h.center.lng;l.lng+=_>180?-360:_<-180?360:0}_prefersReducedMotion(l){return this._respectPrefersReducedMotion&&s.f.prefersReducedMotion&&!(l&&l.essential)}_emulate(l,h,_){const B=Math.ceil(15*h/1e3),C=[],E=l(_.clone());for(let M=0;M<=B;M++){const k=E(M/B);C.push(k.clone())}return C}}class my{constructor(l={}){this.options=l,s.aY(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(l){const h=this.options&&this.options.compact;return this._map=l,this._container=U("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=U("button","mapboxgl-ctrl-attrib-button",this._container),U("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=U("div","mapboxgl-ctrl-attrib-inner",this._container),h&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),h===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(l,h){const _=this._map._getUIString(`AttributionControl.${h}`);l.removeAttribute("title"),l.firstElementChild&&l.firstElementChild.setAttribute("title",_)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let l=this._editLink;l||(l=this._editLink=this._container.querySelector(".mapbox-improve-map"));const h=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||s.d5.ACCESS_TOKEN}];if(l){const _=h.reduce((B,C,E)=>(C.value&&(B+=`${C.key}=${C.value}${E<h.length-1?"&":""}`),B),"?");l.href=`${s.d5.FEEDBACK_URL}/${_}#${iy(this._map,!0)}`,l.rel="noopener nofollow",this._setElementTitle(l,"MapFeedback")}}_updateData(l){!l||l.sourceDataType!=="metadata"&&l.sourceDataType!=="visibility"&&l.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let l=[];if(this._map.style.stylesheet){const B=this._map.style.stylesheet;this.styleOwner=B.owner,this.styleId=B.id}const h=this._map.style._mergedSourceCaches;for(const B in h){const C=h[B];if(C.used){const E=C.getSource();E.attribution&&l.indexOf(E.attribution)<0&&l.push(E.attribution)}}l.sort((B,C)=>B.length-C.length),l=l.filter((B,C)=>{for(let E=C+1;E<l.length;E++)if(l[E].indexOf(B)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?l=[...this.options.customAttribution,...l]:l.unshift(this.options.customAttribution));const _=l.join(" | ");_!==this._attribHTML&&(this._attribHTML=_,l.length?(this._innerContainer.innerHTML=_,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class p1{constructor(){s.aY(["_updateLogo","_updateCompact"],this)}onAdd(l){this._map=l,this._container=U("div","mapboxgl-ctrl");const h=U("a","mapboxgl-ctrl-logo");return h.target="_blank",h.rel="noopener nofollow",h.href="https://www.mapbox.com/",h.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),h.setAttribute("rel","noopener nofollow"),this._container.appendChild(h),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(l){l&&l.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const l=this._map.style._sourceCaches;if(Object.entries(l).length===0)return!0;for(const h in l){const _=l[h].getSource();if(_.hasOwnProperty("mapbox_logo")&&!_.mapbox_logo)return!1}return!0}_updateCompact(){const l=this._container.children;if(l.length){const h=l[0];this._map.getCanvasContainer().offsetWidth<250?h.classList.add("mapboxgl-compact"):h.classList.remove("mapboxgl-compact")}}}class m1{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(l){const h=++this._id;return this._queue.push({callback:l,id:h,cancelled:!1}),h}remove(l){const h=this._currentlyRunning,_=h?this._queue.concat(h):this._queue;for(const B of _)if(B.id===l)return void(B.cancelled=!0)}run(l=0){const h=this._currentlyRunning=this._queue;this._queue=[];for(const _ of h)if(!_.cancelled&&(_.callback(l),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function Kd(g,l,h){if(g=new s.bn(g.lng,g.lat),l){const _=new s.bn(g.lng-360,g.lat),B=new s.bn(g.lng+360,g.lat),C=360*Math.ceil(Math.abs(g.lng-h.center.lng)/360),E=h.locationPoint(g).distSqr(l),M=l.x<0||l.y<0||l.x>h.width||l.y>h.height;h.locationPoint(_).distSqr(l)<E&&(M||Math.abs(_.lng-h.center.lng)<C)?g=_:h.locationPoint(B).distSqr(l)<E&&(M||Math.abs(B.lng-h.center.lng)<C)&&(g=B)}for(;Math.abs(g.lng-h.center.lng)>180;){const _=h.locationPoint(g);if(_.x>=0&&_.y>=0&&_.x<=h.width&&_.y<=h.height)break;g.lng>h.center.lng?g.lng-=360:g.lng+=360}return g}const xm={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class gy extends s.E{constructor(l,h){if(super(),(l instanceof HTMLElement||h)&&(l=s.e({element:l},h)),s.aY(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=l&&l.anchor||"center",this._color=l&&l.color||"#3FB1CE",this._scale=l&&l.scale||1,this._draggable=l&&l.draggable||!1,this._clickTolerance=l&&l.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=l&&l.rotation||0,this._rotationAlignment=l&&l.rotationAlignment||"auto",this._pitchAlignment=l&&l.pitchAlignment&&l.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=l&&l.occludedOpacity||.2,l&&l.element)this._element=l.element,this._offset=s.P.convert(l&&l.offset||[0,0]);else{this._defaultMarker=!0,this._element=U("div");const C=41,E=27,M=X("svg",{display:"block",height:C*this._scale+"px",width:E*this._scale+"px",viewBox:`0 0 ${E} ${C}`},this._element),k=X("radialGradient",{id:"shadowGradient"},X("defs",{},M));X("stop",{offset:"10%","stop-opacity":.4},k),X("stop",{offset:"100%","stop-opacity":.05},k),X("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},M),X("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},M),X("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},M),X("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},M),this._offset=s.P.convert(l&&l.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.hasAttribute("role")||this._element.setAttribute("role","img"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",C=>{C.preventDefault()}),this._element.addEventListener("mousedown",C=>{C.preventDefault()});const _=this._element.classList;for(const C in xm)_.remove(`mapboxgl-marker-anchor-${C}`);_.add(`mapboxgl-marker-anchor-${this._anchor}`);const B=l&&l.className?l.className.trim().split(/\s+/):[];_.add(...B),this._popup=null}addTo(l){return l===this._map||(this.remove(),this._map=l,l.getCanvasContainer().appendChild(this._element),l.on("move",this._updateMoving),l.on("moveend",this._update),l.on("remove",this._clearFadeTimer),l._addMarker(this),this.setDraggable(this._draggable),this._update(),l.on("click",this._onMapClick)),this}remove(){const l=this._map;return l&&(l.off("click",this._onMapClick),l.off("move",this._updateMoving),l.off("moveend",this._update),l.off("mousedown",this._addDragHandler),l.off("touchstart",this._addDragHandler),l.off("mouseup",this._onUp),l.off("touchend",this._onUp),l.off("mousemove",this._onMove),l.off("touchmove",this._onMove),l.off("remove",this._clearFadeTimer),l._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(l){return this._lngLat=s.bn.convert(l),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(l){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),l){if(!("offset"in l.options)){const B=Math.sqrt(Math.pow(13.5,2)/2);l.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[B,-1*(38.1-13.5+B)],"bottom-right":[-B,-1*(38.1-13.5+B)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=l,l._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(l){const h=l.code,_=l.charCode||l.keyCode;h!=="Space"&&h!=="Enter"&&_!==32&&_!==13||this.togglePopup()}_onMapClick(l){const h=l.originalEvent.target,_=this._element;this._popup&&(h===_||_.contains(h))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const l=this._popup;return l?(l.isOpen()?(l.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(l.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const l=this._map,h=this._pos;if(!l||!h)return!1;const _=l.unproject(h),B=l.getFreeCameraOptions();if(!B.position)return!1;const C=B.position.toLngLat();return C.distanceTo(_)<.9*C.distanceTo(this._lngLat)}_evaluateOpacity(){const l=this._map;if(!l)return;const h=this._pos;if(!h||h.x<0||h.x>l.transform.width||h.y<0||h.y>l.transform.height)return void this._clearFadeTimer();const _=l.unproject(h);let B;l._showingGlobe()&&s.d6(l.transform,this._lngLat)?B=0:(B=1-l._queryFogOpacity(_),l.transform._terrainEnabled()&&l.getTerrain()&&this._behindTerrain()&&(B*=this._occludedOpacity)),this._element.style.opacity=`${B}`,this._element.style.pointerEvents=B>0?"auto":"none",this._popup&&this._popup._setOpacity(B),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const l=this._pos;if(!l||!this._map)return;const h=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${l.x}px,${l.y}px)
            ${xm[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${h.x}px,${h.y}px)
        `}_calculateXYTransform(){const l=this._pos,h=this._map,_=this.getPitchAlignment();if(!h||!l||_!=="map")return"";if(!h._showingGlobe()){const k=h.getPitch();return k?`rotateX(${k}deg)`:""}const B=s.bF(s.d7(h.transform,this._lngLat)),C=l.sub(s.d8(h.transform)),E=Math.abs(C.x)+Math.abs(C.y);if(E===0)return"";const M=B/E;return`rotateX(${-C.y*M}deg) rotateY(${C.x*M}deg)`}_calculateZTransform(){const l=this._pos,h=this._map;if(!h||!l)return"";let _=0;const B=this.getRotationAlignment();if(B==="map")if(h._showingGlobe()){const C=h.project(new s.bn(this._lngLat.lng,this._lngLat.lat+.001)),E=h.project(new s.bn(this._lngLat.lng,this._lngLat.lat-.001)).sub(C);_=s.bF(Math.atan2(E.y,E.x))-90}else _=-h.getBearing();else if(B==="horizon"){const C=s.O(4,6,h.getZoom()),E=s.d8(h.transform);E.y+=C*h.transform.height;const M=l.sub(E),k=s.bF(Math.atan2(M.y,M.x));_=(k>90?k-270:k+90)*(1-C)}return _+=this._rotation,_?`rotateZ(${_}deg)`:""}_update(l){cancelAnimationFrame(this._updateFrameId);const h=this._map;h&&(h.transform.renderWorldCopies&&(this._lngLat=Kd(this._lngLat,this._pos,h.transform)),this._pos=h.project(this._lngLat),l===!0?this._updateFrameId=requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),h._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(h._showingGlobe()||h.getTerrain()||h.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(l){return this._offset=s.P.convert(l),this._update(),this}addClassName(l){return this._element.classList.add(l),this}removeClassName(l){return this._element.classList.remove(l),this}toggleClassName(l){return this._element.classList.toggle(l)}_onMove(l){const h=this._map;if(!h)return;const _=this._pointerdownPos,B=this._positionDelta;if(_&&B){if(!this._isDragging){const C=this._clickTolerance||h._clickTolerance;if(l.point.dist(_)<C)return;this._isDragging=!0}this._pos=l.point.sub(B),this._lngLat=h.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.b("dragstart"))),this.fire(new s.b("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const l=this._map;l&&(l.off("mousemove",this._onMove),l.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new s.b("dragend")),this._state="inactive"}_addDragHandler(l){const h=this._map,_=this._pos;h&&_&&this._element.contains(l.originalEvent.target)&&(l.preventDefault(),this._positionDelta=l.point.sub(_),this._pointerdownPos=l.point,this._state="pending",h.on("mousemove",this._onMove),h.on("touchmove",this._onMove),h.once("mouseup",this._onUp),h.once("touchend",this._onUp))}setDraggable(l){this._draggable=!!l;const h=this._map;return h&&(l?(h.on("mousedown",this._addDragHandler),h.on("touchstart",this._addDragHandler)):(h.off("mousedown",this._addDragHandler),h.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(l){return this._rotation=l||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(l){return this._rotationAlignment=l||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(l){return this._pitchAlignment=l||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(l){return this._occludedOpacity=l||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const g1={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},_1=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function y1(g=new s.P(0,0),l="bottom"){if(typeof g=="number"){const h=Math.round(Math.sqrt(.5*Math.pow(g,2)));switch(l){case"top":return new s.P(0,g);case"top-left":return new s.P(h,h);case"top-right":return new s.P(-h,h);case"bottom":return new s.P(0,-g);case"bottom-left":return new s.P(h,-h);case"bottom-right":return new s.P(-h,-h);case"left":return new s.P(g,0);case"right":return new s.P(-g,0)}return new s.P(0,0)}return g instanceof s.P||Array.isArray(g)?s.P.convert(g):s.P.convert(g[l]||[0,0])}class _y{constructor(l){this.jumpTo(l)}getValue(l){if(l<=this._startTime)return this._start;if(l>=this._endTime)return this._end;const h=s.cc((l-this._startTime)/(this._endTime-this._startTime));return this._start*(1-h)+this._end*h}isEasing(l){return l>=this._startTime&&l<=this._endTime}jumpTo(l){this._startTime=-1/0,this._endTime=-1/0,this._start=l,this._end=l}easeTo(l,h,_){this._start=this.getValue(h),this._end=l,this._startTime=h,this._endTime=h+_}}const Xd={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use  + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},v1={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,antialias:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0,collectResourceTiming:!1,testMode:!1};class yy{constructor(){this.showOverdrawInspector=!1,this.showTileBoundaries=!1,this.showParseStatus=!1,this.continuousRedraw=!1,this.showTileAABBs=!1,this.showPadding=!1,this.showTerrainWireframe=!1,this.showLayers2DWireframe=!1,this.showLayers3DWireframe=!1}}const bm={showCompass:!0,showZoom:!0,visualizePitch:!1};class ou{constructor(l,h,_=!1){this._clickTolerance=10,this.element=h,this.mouseRotate=new Ud({clickTolerance:l.dragRotate._mouseRotate._clickTolerance}),this.map=l,_&&(this.mousePitch=new vm({clickTolerance:l.dragRotate._mousePitch._clickTolerance})),s.aY(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),h.addEventListener("mousedown",this.mousedown),h.addEventListener("touchstart",this.touchstart,{passive:!1}),h.addEventListener("touchmove",this.touchmove),h.addEventListener("touchend",this.touchend),h.addEventListener("touchcancel",this.reset)}down(l,h){this.mouseRotate.mousedown(l,h),this.mousePitch&&this.mousePitch.mousedown(l,h),H()}move(l,h){const _=this.map,B=this.mouseRotate.mousemoveWindow(l,h),C=B&&B.bearingDelta;if(C&&_.setBearing(_.getBearing()+C),this.mousePitch){const E=this.mousePitch.mousemoveWindow(l,h),M=E&&E.pitchDelta;M&&_.setPitch(_.getPitch()+M)}}off(){const l=this.element;l.removeEventListener("mousedown",this.mousedown),l.removeEventListener("touchstart",this.touchstart,{passive:!1}),l.removeEventListener("touchmove",this.touchmove),l.removeEventListener("touchend",this.touchend),l.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){K(),window.removeEventListener("mousemove",this.mousemove),window.removeEventListener("mouseup",this.mouseup)}mousedown(l){this.down(s.e({},l,{ctrlKey:!0,preventDefault:()=>l.preventDefault()}),me(this.element,l)),window.addEventListener("mousemove",this.mousemove),window.addEventListener("mouseup",this.mouseup)}mousemove(l){this.move(l,me(this.element,l))}mouseup(l){this.mouseRotate.mouseupWindow(l),this.mousePitch&&this.mousePitch.mouseupWindow(l),this.offTemp()}touchstart(l){l.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=Ce(this.element,l.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>l.preventDefault()},this._startPos))}touchmove(l){l.targetTouches.length!==1?this.reset():(this._lastPos=Ce(this.element,l.targetTouches)[0],this.move({preventDefault:()=>l.preventDefault()},this._lastPos))}touchend(l){l.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const Cm={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},ra={maxWidth:100,unit:"metric"},tc={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"};return{version:s.dk,supported:I,setRTLTextPlugin:s.dm,getRTLTextPluginStatus:s.dn,Map:class extends Ei{constructor(g){const l=g;if((g=s.e({},v1,g)).minZoom!=null&&g.maxZoom!=null&&g.minZoom>g.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(g.minPitch!=null&&g.maxPitch!=null&&g.minPitch>g.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(g.minPitch!=null&&g.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(g.maxPitch!=null&&g.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(g.antialias&&s.d9(window)&&(g.antialias=!1,s.w("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new zc(g.minZoom,g.maxZoom,g.minPitch,g.maxPitch,g.renderWorldCopies),g),this._repaint=!1,this._interactive=g.interactive,this._minTileCacheSize=g.minTileCacheSize,this._maxTileCacheSize=g.maxTileCacheSize,this._failIfMajorPerformanceCaveat=g.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=g.preserveDrawingBuffer,this._antialias=g.antialias,this._trackResize=g.trackResize,this._bearingSnap=g.bearingSnap,this._refreshExpiredTiles=g.refreshExpiredTiles,this._fadeDuration=g.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=g.crossSourceCollisions,this._collectResourceTiming=g.collectResourceTiming,this._language=this._parseLanguage(g.language),this._worldview=g.worldview,this._renderTaskQueue=new m1,this._domRenderTaskQueue=new m1,this._controls=[],this._markers=[],this._popups=[],this._mapId=s.aC(),this._locale=s.e({},Xd,g.locale),this._clickTolerance=g.clickTolerance,this._cooperativeGestures=g.cooperativeGestures,this._performanceMetricsCollection=g.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._showParseStatus=!0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new _y(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new s.da(g.transformRequest,g.accessToken,g.testMode),this._silenceAuthErrors=!!g.testMode,this._contextCreateOptions=g.contextCreateOptions?{...g.contextCreateOptions}:{},typeof g.container=="string"){const h=document.getElementById(g.container);if(!h)throw new Error(`Container '${g.container.toString()}' not found.`);this._container=h}else{if(!(g.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=g.container}if(this._container.childNodes.length>0&&s.w("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),g.maxBounds&&this.setMaxBounds(g.maxBounds),s.aY(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._debugParams=new yy,this._tp=g.devtools?new Rd(this):new Rd,this._tp.registerParameter(this._debugParams,["Debug"],"showOverdrawInspector",void 0,()=>{this._update()}),this._tp.registerParameter(this._debugParams,["Debug"],"showTileBoundaries",void 0,()=>{this._update()}),this._tp.registerParameter(this._debugParams,["Debug"],"showParseStatus",void 0,()=>{this._update()}),this._tp.registerParameter(this._debugParams,["Debug"],"continuousRedraw",void 0,h=>{this.repaint=h}),this._tp.registerParameter(this._debugParams,["Debug"],"showTileAABBs",void 0,h=>{this.showTileAABBs=h}),this._tp.registerParameter(this._debugParams,["Debug"],"showPadding",void 0,h=>{this.showPadding=h}),this._tp.registerParameter(this._debugParams,["Debug","Wireframe"],"showTerrainWireframe",void 0,()=>{this._update()}),this._tp.registerParameter(this._debugParams,["Debug","Wireframe"],"showLayers2DWireframe",void 0,()=>{this._update()}),this._tp.registerParameter(this._debugParams,["Debug","Wireframe"],"showLayers3DWireframe",void 0,()=>{this._update()}),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");if(this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this._fullscreenchangeEvent="onfullscreenchange"in document?"fullscreenchange":"webkitfullscreenchange",window.addEventListener("online",this._onWindowOnline,!1),window.addEventListener("resize",this._onWindowResize,!1),window.addEventListener("orientationchange",this._onWindowResize,!1),window.addEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.addEventListener("visibilitychange",this._onVisibilityChange,!1),this.handlers=new WS(this,g),this._localFontFamily=g.localFontFamily,this._localIdeographFontFamily=g.localIdeographFontFamily,(g.style||!g.testMode)&&this.setStyle(g.style||s.d5.DEFAULT_STYLE,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),g.projection&&this.setProjection(g.projection),g.hash&&(this._hash=new gm(typeof g.hash=="string"&&g.hash||void 0).addTo(this)),!this._hash||!this._hash._onHashChange()){l.center==null&&l.zoom==null||(this.transform._unmodified=!1),this.jumpTo({center:g.center,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch});const h=g.bounds;h&&(this.resize(),this.fitBounds(h,s.e({},g.fitBoundsOptions,{duration:0})))}this.resize(),g.attributionControl&&this.addControl(new my({customAttribution:g.customAttribution})),this._logoControl=new p1,this.addControl(this._logoControl,g.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",h=>{this._update(h.dataType==="style"),this.fire(new s.b(`${h.dataType}data`,h))}),this.on("dataloading",h=>{this.fire(new s.b(`${h.dataType}dataloading`,h))})}_getMapId(){return this._mapId}addControl(g,l){if(l===void 0&&(l=g.getDefaultPosition?g.getDefaultPosition():"top-right"),!g||!g.onAdd)return this.fire(new s.a(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const h=g.onAdd(this);this._controls.push(g);const _=this._controlPositions[l];return l.indexOf("bottom")!==-1?_.insertBefore(h,_.firstChild):_.appendChild(h),this}removeControl(g){if(!g||!g.onRemove)return this.fire(new s.a(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const l=this._controls.indexOf(g);return l>-1&&this._controls.splice(l,1),g.onRemove(this),this}hasControl(g){return this._controls.indexOf(g)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(g){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const l=!this._moving;return l&&this.fire(new s.b("movestart",g)).fire(new s.b("move",g)),this.fire(new s.b("resize",g)),l&&this.fire(new s.b("moveend",g)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(g){return this.transform.setMaxBounds(s.ad.convert(g)),this._update()}setMinZoom(g){if((g=g??-2)>=-2&&g<=this.transform.maxZoom)return this.transform.minZoom=g,this._update(),this.getZoom()<g?this.setZoom(g):this.fire(new s.b("zoomstart")).fire(new s.b("zoom")).fire(new s.b("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(g){if((g=g??22)>=this.transform.minZoom)return this.transform.maxZoom=g,this._update(),this.getZoom()>g?this.setZoom(g):this.fire(new s.b("zoomstart")).fire(new s.b("zoom")).fire(new s.b("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(g){if((g=g??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(g>=0&&g<=this.transform.maxPitch)return this.transform.minPitch=g,this._update(),this.getPitch()<g?this.setPitch(g):this.fire(new s.b("pitchstart")).fire(new s.b("pitch")).fire(new s.b("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(g){if((g=g??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(g>=this.transform.minPitch)return this.transform.maxPitch=g,this._update(),this.getPitch()>g?this.setPitch(g):this.fire(new s.b("pitchstart")).fire(new s.b("pitch")).fire(new s.b("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(g){return this.transform.renderWorldCopies=g,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(g){return g==="auto"?navigator.language:Array.isArray(g)?g.length===0?void 0:g.map(l=>l==="auto"?navigator.language:l):g}setLanguage(g){const l=this._parseLanguage(g);if(!this.style||l===this._language)return this;this._language=l,this.style.reloadSources();for(const h of this._controls)h._setLanguage&&h._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(g){return this.style&&g!==this._worldview?(this._worldview=g,this.style.reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(g){return this._lazyInitEmptyStyle(),g?typeof g=="string"&&(g={name:g}):g=null,this._useExplicitProjection=!!g,this._prioritizeAndUpdateProjection(g,this.style.projection)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const g=this.transform,l=g.projection.name;let h;l==="globe"&&g.zoom>=s.bx?(g.setMercatorFromTransition(),h=!0):l==="mercator"&&g.zoom<s.bx&&(g.setProjection({name:"globe"}),h=!0),h&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(g,l){return this._updateProjection(g||l||{name:"mercator"})}_updateProjection(g){let l;return l=g.name==="globe"&&this.transform.zoom>=s.bx?this.transform.setMercatorFromTransition():this.transform.setProjection(g),this.style.applyProjectionUpdate(),l&&(this.painter.clearBackgroundTiles(),this.style.clearSources(),this._update(!0),this._forceMarkerAndPopupUpdate(!0)),this}project(g){return this.transform.locationPoint3D(s.bn.convert(g))}unproject(g){return this.transform.pointLocation3D(s.P.convert(g))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(g,l,h){if(g==="mouseenter"||g==="mouseover"){let _=!1;const B=E=>{const M=l.filter(F=>this.getLayer(F)),k=M.length?this.queryRenderedFeatures(E.point,{layers:M}):[];k.length?_||(_=!0,h.call(this,new _a(g,this,E.originalEvent,{features:k}))):_=!1},C=()=>{_=!1};return{layers:new Set(l),listener:h,delegates:{mousemove:B,mouseout:C}}}if(g==="mouseleave"||g==="mouseout"){let _=!1;const B=E=>{const M=l.filter(k=>this.getLayer(k));(M.length?this.queryRenderedFeatures(E.point,{layers:M}):[]).length?_=!0:_&&(_=!1,h.call(this,new _a(g,this,E.originalEvent)))},C=E=>{_&&(_=!1,h.call(this,new _a(g,this,E.originalEvent)))};return{layers:new Set(l),listener:h,delegates:{mousemove:B,mouseout:C}}}{const _=B=>{const C=l.filter(M=>this.getLayer(M)),E=C.length?this.queryRenderedFeatures(B.point,{layers:C}):[];E.length&&(B.features=E,h.call(this,B),delete B.features)};return{layers:new Set(l),listener:h,delegates:{[g]:_}}}}on(g,l,h){if(h===void 0)return super.on(g,l);if(Array.isArray(l)||(l=[l]),l){for(const B of l)if(!this._isValidId(B))return this}const _=this._createDelegatedListener(g,l,h);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[g]=this._delegatedListeners[g]||[],this._delegatedListeners[g].push(_);for(const B in _.delegates)this.on(B,_.delegates[B]);return this}once(g,l,h){if(h===void 0)return super.once(g,l);if(Array.isArray(l)||(l=[l]),l){for(const B of l)if(!this._isValidId(B))return this}const _=this._createDelegatedListener(g,l,h);for(const B in _.delegates)this.once(B,_.delegates[B]);return this}off(g,l,h){if(h===void 0)return super.off(g,l);l=new Set(Array.isArray(l)?l:[l]);for(const C of l)if(!this._isValidId(C))return this;const _=(C,E)=>{if(C.size!==E.size)return!1;for(const M of C)if(!E.has(M))return!1;return!0},B=this._delegatedListeners?this._delegatedListeners[g]:void 0;return B&&(C=>{for(let E=0;E<C.length;E++){const M=C[E];if(M.listener===h&&_(M.layers,l)){for(const k in M.delegates)this.off(k,M.delegates[k]);return C.splice(E,1),this}}})(B),this}queryRenderedFeatures(g,l){if(!this.style)return[];if(l!==void 0||g===void 0||g instanceof s.P||Array.isArray(g)||(l=g,g=void 0),g=g||[[0,0],[this.transform.width,this.transform.height]],(l=l||{}).layers&&Array.isArray(l.layers)){for(const h of l.layers)if(!this._isValidId(h))return[]}return this.style.queryRenderedFeatures(g,l,this.transform)}querySourceFeatures(g,l){return this._isValidId(g)?this.style.querySourceFeatures(g,l):[]}isPointOnSurface(g){const{name:l}=this.transform.projection;return l!=="globe"&&l!=="mercator"&&s.w(`${l} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(s.P.convert(g))}setStyle(g,l){return(l=s.e({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},l)).diff!==!1&&l.localIdeographFontFamily===this._localIdeographFontFamily&&l.localFontFamily===this._localFontFamily&&this.style&&g?(this._diffStyle(g,l),this):(this._localIdeographFontFamily=l.localIdeographFontFamily,this._localFontFamily=l.localFontFamily,this._updateStyle(g,l))}_getUIString(g){const l=this._locale[g];if(l==null)throw new Error(`Missing UI string '${g}'`);return l}_updateStyle(g,l){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),g&&(this.style=new Pa(this,l||{}),this.style.setEventedParent(this,{style:this.style}),typeof g=="string"?this.style.loadURL(g):this.style.loadJSON(g)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Pa(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(g,l){if(typeof g=="string"){const h=this._requestManager.normalizeStyleURL(g),_=this._requestManager.transformRequest(h,s.R.Style);s.g(_,(B,C)=>{B?this.fire(new s.a(B)):C&&this._updateDiff(C,l)})}else typeof g=="object"&&this._updateDiff(g,l)}_updateDiff(g,l){try{this.style.setState(g)&&this._update(!0)}catch(h){s.w(`Unable to perform style diff: ${h.message||h.error||h}.  Rebuilding the style from scratch.`),this._updateStyle(g,l)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(s.w("There is no style added to the map."),!1)}_isValidId(g){return g==null?(this.fire(new s.a(new Error("IDs can't be empty."))),!1):!s.c4(g)||(this.fire(new s.a(new Error(`IDs can't contain special symbols: "${g}".`))),!1)}addSource(g,l){return this._isValidId(g)?(this._lazyInitEmptyStyle(),this.style.addSource(g,l),this._update(!0)):this}isSourceLoaded(g){return!!this._isValidId(g)&&!!this.style&&this.style._isSourceCacheLoaded(g)}areTilesLoaded(){return this.style.areTilesLoaded()}addSourceType(g,l,h){this._lazyInitEmptyStyle(),this.style.addSourceType(g,l,h)}removeSource(g){return this._isValidId(g)?(this.style.removeSource(g),this._updateTerrain(),this._update(!0)):this}getSource(g){return this._isValidId(g)?this.style.getOwnSource(g):null}addImage(g,l,{pixelRatio:h=1,sdf:_=!1,stretchX:B,stretchY:C,content:E}={}){if(this._lazyInitEmptyStyle(),l instanceof HTMLImageElement||ImageBitmap&&l instanceof ImageBitmap){const{width:M,height:k,data:F}=s.f.getImageData(l);this.style.addImage(g,{data:new s.h({width:M,height:k},F),pixelRatio:h,stretchX:B,stretchY:C,content:E,sdf:_,version:0})}else if(l.width===void 0||l.height===void 0)this.fire(new s.a(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:M,height:k}=l,F=l;this.style.addImage(g,{data:new s.h({width:M,height:k},new Uint8Array(F.data)),pixelRatio:h,stretchX:B,stretchY:C,content:E,sdf:_,version:0,userImage:F}),F.onAdd&&F.onAdd(this,g)}}updateImage(g,l){this._lazyInitEmptyStyle();const h=this.style.getImage(g);if(!h)return void this.fire(new s.a(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const _=l instanceof HTMLImageElement||ImageBitmap&&l instanceof ImageBitmap?s.f.getImageData(l):l,{width:B,height:C}=_,E=_.data;if(B===void 0||C===void 0)return void this.fire(new s.a(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(B!==h.data.width||C!==h.data.height)return void this.fire(new s.a(new Error(`The width and height of the updated image (${B}, ${C})
                must be that same as the previous version of the image
                (${h.data.width}, ${h.data.height})`)));const M=!(l instanceof HTMLImageElement||ImageBitmap&&l instanceof ImageBitmap);h.data.replace(E,M),this.style.updateImage(g,h)}hasImage(g){return g?!!this.style&&!!this.style.getImage(g):(this.fire(new s.a(new Error("Missing required image id"))),!1)}removeImage(g){this.style.removeImage(g)}loadImage(g,l){s.d(this._requestManager.transformRequest(g,s.R.Image),(h,_)=>{l(h,_ instanceof HTMLImageElement?s.f.getImageData(_):_)})}listImages(){return this.style.listImages()}addModel(g,l){this._lazyInitEmptyStyle(),this.style.addModel(g,l)}hasModel(g){return g?this.style.hasModel(g):(this.fire(new s.a(new Error("Missing required model id"))),!1)}removeModel(g){this.style.removeModel(g)}listModels(){return this.style.listModels()}addLayer(g,l){return this._isValidId(g.id)?(this._lazyInitEmptyStyle(),this.style.addLayer(g,l),this._update(!0)):this}getSlot(g){const l=this.getLayer(g);return l&&l.slot||null}setSlot(g,l){return this.style.setSlot(g,l),this.style.mergeLayers(),this._update(!0)}addImport(g,l){return this.style.addImport(g,l),this}updateImport(g,l){return typeof l!="string"&&l.id!==g?(this.removeImport(g),this.addImport(l)):(this.style.updateImport(g,l),this._update(!0))}removeImport(g){return this.style.removeImport(g),this}moveImport(g,l){return this.style.moveImport(g,l),this._update(!0)}moveLayer(g,l){return this._isValidId(g)?(this.style.moveLayer(g,l),this._update(!0)):this}removeLayer(g){return this._isValidId(g)?(this.style.removeLayer(g),this._update(!0)):this}getLayer(g){return this._isValidId(g)?this.style.getOwnLayer(g):null}setLayerZoomRange(g,l,h){return this._isValidId(g)?(this.style.setLayerZoomRange(g,l,h),this._update(!0)):this}setFilter(g,l,h={}){return this._isValidId(g)?(this.style.setFilter(g,l,h),this._update(!0)):this}getFilter(g){return this._isValidId(g)?this.style.getFilter(g):null}setPaintProperty(g,l,h,_={}){return this._isValidId(g)?(this.style.setPaintProperty(g,l,h,_),this._update(!0)):this}getPaintProperty(g,l){return this._isValidId(g)?this.style.getPaintProperty(g,l):null}setLayoutProperty(g,l,h,_={}){return this._isValidId(g)?(this.style.setLayoutProperty(g,l,h,_),this._update(!0)):this}getLayoutProperty(g,l){return this._isValidId(g)?this.style.getLayoutProperty(g,l):null}getConfigProperty(g,l){return this.style.getConfigProperty(g,l)}setConfigProperty(g,l,h){return this.style.setConfigProperty(g,l,h),this._update(!0)}setLights(g){if(this._lazyInitEmptyStyle(),g&&g.length===1&&g[0].type==="flat"){const l=g[0];l.properties?this.style.setFlatLight(l.properties,l.id,{}):this.style.setFlatLight({},"flat")}else this.style.setLights(g),this.painter.terrain&&(this.painter.terrain.invalidateRenderCache=!0);return this._update(!0)}getLights(){const g=this.style.getLights()||[];return g.length===0&&g.push({id:this.style.light.id,type:"flat",properties:this.style.getFlatLight()}),g}setLight(g,l={}){return console.log("The `map.setLight` function is deprecated, prefer using `map.setLights` with `flat` light type instead."),this.setLights([{id:"flat",type:"flat",properties:g}])}getLight(){return console.log("The `map.getLight` function is deprecated, prefer using `map.getLights` instead."),this.style.getFlatLight()}setTerrain(g){return this._lazyInitEmptyStyle(),!g&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(g),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(g){return this._lazyInitEmptyStyle(),this.style.setFog(g),this._update(!0)}getFog(){return this.style?this.style.getFog():null}setCamera(g){return this.style.setCamera(g),this._triggerCameraUpdate(g)}_triggerCameraUpdate(g){return this._update(this.transform.setOrthographicProjectionAtLowPitch(g["camera-projection"]==="orthographic"))}getCamera(){return this.style.camera}_queryFogOpacity(g){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(s.bn.convert(g),this.transform):0}setFeatureState(g,l){return this._isValidId(g.source)?(this.style.setFeatureState(g,l),this._update()):this}removeFeatureState(g,l){return this._isValidId(g.source)?(this.style.removeFeatureState(g,l),this._update()):this}getFeatureState(g){return this._isValidId(g.source)?this.style.getFeatureState(g):null}_updateContainerDimensions(){if(!this._container)return;const g=this._container.getBoundingClientRect().width||400,l=this._container.getBoundingClientRect().height||300;let h,_,B,C=this._container;for(;C&&(!_||!B);){const E=window.getComputedStyle(C).transform;E&&E!=="none"&&(h=E.match(/matrix.*\((.+)\)/)[1].split(", "),h[0]&&h[0]!=="0"&&h[0]!=="1"&&(_=h[0]),h[3]&&h[3]!=="0"&&h[3]!=="1"&&(B=h[3])),C=C.parentElement}this._containerWidth=_?Math.abs(g/_):g,this._containerHeight=B?Math.abs(l/B):l}_detectMissingCSS(){window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&s.w("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const g=this._container;g.classList.add("mapboxgl-map"),(this._missingCSSCanary=U("div","mapboxgl-canary",g)).style.visibility="hidden",this._detectMissingCSS();const l=this._canvasContainer=U("div","mapboxgl-canvas-container",g);this._canvas=U("canvas","mapboxgl-canvas",l),this._interactive&&(l.classList.add("mapboxgl-interactive"),this._canvas.setAttribute("tabindex","0")),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const h=this._controlContainer=U("div","mapboxgl-control-container",g),_=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(B=>{_[B]=U("div",`mapboxgl-ctrl-${B}`,h)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(g,l){const h=s.f.devicePixelRatio||1;this._canvas.width=h*Math.ceil(g),this._canvas.height=h*Math.ceil(l),this._canvas.style.width=`${g}px`,this._canvas.style.height=`${l}px`}_addMarker(g){this._markers.push(g)}_removeMarker(g){const l=this._markers.indexOf(g);l!==-1&&this._markers.splice(l,1)}_addPopup(g){this._popups.push(g)}_removePopup(g){const l=this._popups.indexOf(g);l!==-1&&this._popups.splice(l,1)}_setupPainter(){const g=s.e({},I.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),l=this._canvas.getContext("webgl2",g);l?(s.db(l,!0),this.painter=new n1(l,this._contextCreateOptions,this.transform,this._tp),this.on("data",h=>{h.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),s.dc.testSupport(l)):this.fire(new s.a(new Error("Failed to initialize WebGL")))}_contextLost(g){g.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new s.b("webglcontextlost",{originalEvent:g}))}_contextRestored(g){this._setupPainter(),this.resize(),this._update(),this.fire(new s.b("webglcontextrestored",{originalEvent:g}))}_onMapScroll(g){if(g.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(g){return this.style?(this._styleDirty=this._styleDirty||g,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(g){return this._update(),this._renderTaskQueue.add(g)}_cancelRenderFrame(g){this._renderTaskQueue.remove(g)}_requestDomTask(g){!this.loaded()||this.loaded()&&!this.isMoving()?g():this._domRenderTaskQueue.add(g)}_render(g){let l;this.fire(new s.b("renderstart"));const h=this.painter.context.extTimerQuery,_=s.f.now(),B=this.painter.context.gl;if(this.listens("gpu-timing-frame")&&(l=B.createQuery(),B.beginQuery(h.TIME_ELAPSED_EXT,l)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],performance.now())),this._renderTaskQueue.run(g),this._domRenderTaskQueue.run(g),this._removed)return;this._updateProjectionTransition();const C=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const k=this.transform.zoom,F=this.transform.pitch,j=s.f.now(),V=new s.K(k,{now:j,fadeDuration:C,pitch:F,transition:this.style.transition});this.style.update(V)}this.style&&this.style.hasFogTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let E=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),E=this._updateAverageElevation(_),this.style.updateSources(this.transform),this._forceMarkerAndPopupUpdate()):E=this._updateAverageElevation(_),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,C,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries||this._debugParams.showTileBoundaries,showParseStatus:this.showParseStatus||this._debugParams.showParseStatus,wireframe:{terrain:this.showTerrainWireframe||this._debugParams.showTerrainWireframe,layers2D:this.showLayers2DWireframe||this._debugParams.showLayers2DWireframe,layers3D:this.showLayers3DWireframe||this._debugParams.showLayers3DWireframe},showOverdrawInspector:this._showOverdrawInspector||this._debugParams.showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs||this._debugParams.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:C,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding||this._debugParams.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new s.b("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new s.b("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),l){const k=s.f.now()-_;B.endQuery(h.TIME_ELAPSED_EXT),setTimeout(()=>{const F=B.getQueryParameter(l,B.QUERY_RESULT)/1e6;B.deleteQuery(l),this.fire(new s.b("gpu-timing-frame",{cpuTime:k,gpuTime:F}))},50)}if(this.listens("gpu-timing-layer")){const k=this.painter.collectGpuTimers();setTimeout(()=>{const F=this.painter.queryGpuTimers(k);this.fire(new s.b("gpu-timing-layer",{layerTimes:F}))},50)}if(this.listens("gpu-timing-deferred-render")){const k=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const F=this.painter.queryGpuTimeDeferredRender(k);this.fire(new s.b("gpu-timing-deferred-render",{gpuTime:F}))},50)}const M=this._sourcesDirty||this._styleDirty||this._placementDirty||E;if(M||this._repaint)this.triggerRepaint();else{const k=!this.isMoving()&&this.loaded();if(k&&(E=this._updateAverageElevation(_,!0)),E)this.triggerRepaint();else if(this._triggerFrame(!1),k&&(this.fire(new s.b("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const F=this._calculateSpeedIndex();this.fire(new s.b("speedindexcompleted",{speedIndex:F})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||M||(this._fullyLoaded=!0,this._performanceMetricsCollection&&s.dd(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(g){for(const l of this._markers)g&&!this.getRenderWorldCopies()&&(l._lngLat=l._lngLat.wrap()),l._update();for(const l of this._popups)!g||this.getRenderWorldCopies()||l._trackPointer||(l._lngLat=l._lngLat.wrap()),l._update()}_updateAverageElevation(g,l=!1){const h=B=>(this.transform.averageElevation=B,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&h(0);const _=this.transform.elevation&&this.transform.elevation.exaggeration()!==this._averageElevationExaggeration;if(_||(l||g-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(g)){const B=this.transform.averageElevation;let C=this.transform.sampleAverageElevation();this.transform.elevation&&(this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(C)?C=0:this._averageElevationLastSampledAt=g;const E=Math.abs(B-C);if(E>1){if(this._isInitialLoad||_)return this._averageElevation.jumpTo(C),h(C);this._averageElevation.easeTo(C,g,300)}else if(E>1e-4)return this._averageElevation.jumpTo(C),h(C)}return!!this._averageElevation.isEasing(g)&&h(this._averageElevation.getValue(g))}_authenticate(){s.de(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,g=>{if(g&&(g.message===s.df||g.status===401)){const l=this.painter.context.gl;s.db(l,!1),this._logoControl instanceof p1&&this._logoControl._updateLogo(),l&&l.clear(l.DEPTH_BUFFER_BIT|l.COLOR_BUFFER_BIT|l.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new s.a(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),s.dg(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){const g=this._isDragging();this.painter.updateTerrain(this.style,g)}_calculateSpeedIndex(){const g=this.painter.canvasCopy(),l=this.painter.getCanvasCopiesAndTimestamps();l.timeStamps.push(performance.now());const h=this.painter.context.gl,_=h.createFramebuffer();function B(C){h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,C,0);const E=new Uint8Array(h.drawingBufferWidth*h.drawingBufferHeight*4);return h.readPixels(0,0,h.drawingBufferWidth,h.drawingBufferHeight,h.RGBA,h.UNSIGNED_BYTE,E),E}return h.bindFramebuffer(h.FRAMEBUFFER,_),this._canvasPixelComparison(B(g),l.canvasCopies.map(B),l.timeStamps)}_canvasPixelComparison(g,l,h){let _=h[1]-h[0];const B=g.length/4;for(let C=0;C<l.length;C++){const E=l[C];let M=0;for(let k=0;k<E.length;k+=4)E[k]===g[k]&&E[k+1]===g[k+1]&&E[k+2]===g[k+2]&&E[k+3]===g[k+3]&&(M+=1);_+=(h[C+2]-h[C+1])*(1-M/B)}return _}remove(){this._hash&&this._hash.remove();for(const l of this._controls)l.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),window.removeEventListener("resize",this._onWindowResize,!1),window.removeEventListener("orientationchange",this._onWindowResize,!1),window.removeEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.removeEventListener("online",this._onWindowOnline,!1),window.removeEventListener("visibilitychange",this._onVisibilityChange,!1);const g=this.painter.context.gl.getExtension("WEBGL_lose_context");g&&g.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),s.dh(this.painter.context.gl),s.di.remove(),s.dj.remove(),this._removed=!0,this.fire(new s.b("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(g){this._renderNextFrame=this._renderNextFrame||g,this.style&&!this._frame&&(this._frame=s.f.frame(l=>{const h=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,h&&this._render(l)}))}_preloadTiles(g){const l=this.style?Object.values(this.style._sourceCaches):[];return s.b1(l,(h,_)=>h._preloadTiles(g,_),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(g){this._trackResize&&this.resize({originalEvent:g})._update()}_onVisibilityChange(){document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(g){this._showTileBoundaries!==g&&(this._showTileBoundaries=g,this._update())}get showParseStatus(){return!!this._showParseStatus}set showParseStatus(g){this._showParseStatus!==g&&(this._showParseStatus=g,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(g){this._showTerrainWireframe!==g&&(this._showTerrainWireframe=g,this._update())}get showLayers2DWireframe(){return!!this._showLayers2DWireframe}set showLayers2DWireframe(g){this._showLayers2DWireframe!==g&&(this._showLayers2DWireframe=g,this._update())}get showLayers3DWireframe(){return!!this._showLayers3DWireframe}set showLayers3DWireframe(g){this._showLayers3DWireframe!==g&&(this._showLayers3DWireframe=g,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(g){this._speedIndexTiming!==g&&(this._speedIndexTiming=g,this._update())}get showPadding(){return!!this._showPadding}set showPadding(g){this._showPadding!==g&&(this._showPadding=g,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(g){this._showCollisionBoxes!==g&&(this._showCollisionBoxes=g,g?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(g){this._showOverdrawInspector!==g&&(this._showOverdrawInspector=g,this._update())}get repaint(){return!!this._repaint}set repaint(g){this._repaint!==g&&(this._repaint=g,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(g){this._vertices=g,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(g){this._showTileAABBs!==g&&(this._showTileAABBs=g,g&&this._update())}_setCacheLimits(g,l){s.dl(g,l)}get version(){return s.dk}},NavigationControl:class{constructor(g){this.options=s.e({},bm,g),this._container=U("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",l=>l.preventDefault()),this.options.showZoom&&(s.aY(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",l=>{this._map&&this._map.zoomIn({},{originalEvent:l})}),U("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",l=>{this._map&&this._map.zoomOut({},{originalEvent:l})}),U("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(s.aY(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",l=>{const h=this._map;h&&(this.options.visualizePitch?h.resetNorthPitch({},{originalEvent:l}):h.resetNorth({},{originalEvent:l}))}),this._compassIcon=U("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const g=this._map;if(!g)return;const l=g.getZoom(),h=l===g.getMaxZoom(),_=l===g.getMinZoom();this._zoomInButton.disabled=h,this._zoomOutButton.disabled=_,this._zoomInButton.setAttribute("aria-disabled",h.toString()),this._zoomOutButton.setAttribute("aria-disabled",_.toString())}_rotateCompassArrow(){const g=this._map;if(!g)return;const l=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(g.transform.pitch*(Math.PI/180)),.5)}) rotateX(${g.transform.pitch}deg) rotateZ(${g.transform.angle*(180/Math.PI)}deg)`:`rotate(${g.transform.angle*(180/Math.PI)}deg)`;g._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=l)})}onAdd(g){return this._map=g,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),g.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&g.on("pitch",this._rotateCompassArrow),g.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ou(g,this._compass,this.options.visualizePitch)),this._container}onRemove(){const g=this._map;g&&(this._container.remove(),this.options.showZoom&&g.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&g.off("pitch",this._rotateCompassArrow),g.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(g,l){const h=U("button",g,this._container);return h.type="button",h.addEventListener("click",l),h}_setButtonTitle(g,l){if(!this._map)return;const h=this._map._getUIString(`NavigationControl.${l}`);g.setAttribute("aria-label",h),g.firstElementChild&&g.firstElementChild.setAttribute("title",h)}},GeolocateControl:class extends s.E{constructor(g){super();const l=navigator.geolocation;this.options=s.e({geolocation:l},Cm,g),s.aY(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Nd(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(g){return this._map=g,this._container=U("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(g){const l=(h=!!this.options.geolocation)=>{this._supportsGeolocation=h,g(h)};this._supportsGeolocation!==void 0?g(this._supportsGeolocation):navigator.permissions!==void 0?navigator.permissions.query({name:"geolocation"}).then(h=>l(h.state!=="denied")).catch(()=>l()):l()}_isOutOfMapMaxBounds(g){const l=this._map.getMaxBounds(),h=g.coords;return!!l&&(h.longitude<l.getWest()||h.longitude>l.getEast()||h.latitude<l.getSouth()||h.latitude>l.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(g){if(this._map){if(this._isOutOfMapMaxBounds(g))return this._setErrorState(),this.fire(new s.b("outofmaxbounds",g)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=g,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(g),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(g),this.options.showUserLocation&&this._userLocationDotMarker.removeClassName("mapboxgl-user-location-dot-stale"),this.fire(new s.b("geolocate",g)),this._finish()}}_updateCamera(g){const l=new s.bn(g.coords.longitude,g.coords.latitude),h=g.coords.accuracy,_=this._map.getBearing(),B=s.e({bearing:_},this.options.fitBoundsOptions);this._map.fitBounds(l.toBounds(h),B,{geolocateSource:!0})}_updateMarker(g){if(g){const l=new s.bn(g.coords.longitude,g.coords.latitude);this._accuracyCircleMarker.setLngLat(l).addTo(this._map),this._userLocationDotMarker.setLngLat(l).addTo(this._map),this._accuracy=g.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const g=this._map.transform,l=s.bl(1,g._center.lat)*g.worldSize,h=Math.ceil(2*this._accuracy*l);this._circleElement.style.width=`${h}px`,this._circleElement.style.height=`${h}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._userLocationDotMarker.addClassName("mapboxgl-user-location-show-heading")):(this._userLocationDotMarker.removeClassName("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(g){if(this._map){if(this.options.trackUserLocation)if(g.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(g.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._userLocationDotMarker.addClassName("mapboxgl-user-location-dot-stale"),this.fire(new s.b("error",g)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(g){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",l=>l.preventDefault()),this._geolocateButton=U("button","mapboxgl-ctrl-geolocate",this._container),U("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",g===!1){s.w("Geolocation support is not available so the GeolocateControl will be disabled.");const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l)}else{const l=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=U("div","mapboxgl-user-location"),this._dotElement.appendChild(U("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(U("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new gy({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=U("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new gy({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",l=>{l.geolocateSource||this._watchState!=="ACTIVE_LOCK"||l.originalEvent&&l.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new s.b("trackuserlocationend")))})}}_onDeviceOrientation(g){this._userLocationDotMarker&&(g.webkitCompassHeading?this._heading=g.webkitCompassHeading:g.absolute===!0&&(this._heading=-1*g.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return s.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.b("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new s.b("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.b("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let g;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(g={maximumAge:6e5,timeout:0},this._noTimeout=!0):(g=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,g),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const g=()=>{"ondeviceorientationabsolute"in window?window.addEventListener("deviceorientationabsolute",this._onDeviceOrientation):window.addEventListener("deviceorientation",this._onDeviceOrientation)};typeof DeviceMotionEvent<"u"&&typeof DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(l=>{l==="granted"&&g()}).catch(console.error):g()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),window.removeEventListener("deviceorientation",this._onDeviceOrientation),window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:my,ScaleControl:class{constructor(g){this.options=s.e({},ra,g),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),s.aY(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const g=this.options.maxWidth||100,l=this._map,h=l._containerHeight/2,_=l._containerWidth/2-g/2,B=l.unproject([_,h]),C=l.unproject([_+g,h]),E=B.distanceTo(C);if(this.options.unit==="imperial"){const M=3.2808*E;M>5280?this._setScale(g,M/5280,"mile"):this._setScale(g,M,"foot")}else this.options.unit==="nautical"?this._setScale(g,E/1852,"nautical-mile"):E>=1e3?this._setScale(g,E/1e3,"kilometer"):this._setScale(g,E,"meter")}_setScale(g,l,h){this._map._requestDomTask(()=>{const _=function(C){const E=Math.pow(10,`${Math.floor(C)}`.length-1);let M=C/E;return M=M>=10?10:M>=5?5:M>=3?3:M>=2?2:M>=1?1:function(k){const F=Math.pow(10,Math.ceil(-Math.log(k)/Math.LN10));return Math.round(k*F)/F}(M),E*M}(l),B=_/l;this._container.innerHTML=this._isNumberFormatSupported&&h!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:h}).format(_):`${_}&nbsp;${tc[h]}`,this._container.style.width=g*B+"px"})}onAdd(g){return this._map=g,this._language=g.getLanguage(),this._container=U("div","mapboxgl-ctrl mapboxgl-ctrl-scale",g.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(g){this._language=g,this._update()}setUnit(g){this.options.unit=g,this._update()}},FullscreenControl:class{constructor(g){this._fullscreen=!1,g&&g.container&&(g.container instanceof HTMLElement?this._container=g.container:s.w("Full screen control 'container' must be a DOM element.")),s.aY(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(g){return this._map=g,this._container||(this._container=this._map.getContainer()),this._controlContainer=U("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",s.w("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!document.fullscreenEnabled&&!document.webkitFullscreenEnabled)}_setupUI(){const g=this._fullscreenButton=U("button","mapboxgl-ctrl-fullscreen",this._controlContainer);U("span","mapboxgl-ctrl-icon",g).setAttribute("aria-hidden","true"),g.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const g=this._getTitle();this._fullscreenButton.setAttribute("aria-label",g),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",g)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(document.fullscreenElement||document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends s.E{constructor(g){super(),this.options=s.e(Object.create(g1),g),s.aY(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(g&&g.className?g.className.trim().split(/\s+/):[])}addTo(g){return this._map&&this.remove(),this._map=g,this.options.closeOnClick&&g.on("preclick",this._onClose),this.options.closeOnMove&&g.on("move",this._onClose),g.on("remove",this.remove),this._update(),g._addPopup(this),this._focusFirstElement(),this._trackPointer?(g.on("mousemove",this._onMouseEvent),g.on("mouseup",this._onMouseEvent),g._canvasContainer.classList.add("mapboxgl-track-pointer")):g.on("move",this._update),this.fire(new s.b("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const g=this._map;return g&&(g.off("move",this._update),g.off("move",this._onClose),g.off("preclick",this._onClose),g.off("click",this._onClose),g.off("remove",this.remove),g.off("mousemove",this._onMouseEvent),g.off("mouseup",this._onMouseEvent),g.off("drag",this._onMouseEvent),g._canvasContainer&&g._canvasContainer.classList.remove("mapboxgl-track-pointer"),g._removePopup(this),this._map=void 0),this.fire(new s.b("close")),this}getLngLat(){return this._lngLat}setLngLat(g){this._lngLat=s.bn.convert(g),this._pos=null,this._trackPointer=!1,this._update();const l=this._map;return l&&(l.on("move",this._update),l.off("mousemove",this._onMouseEvent),l._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const g=this._map;return g&&(g.off("move",this._update),g.on("mousemove",this._onMouseEvent),g.on("drag",this._onMouseEvent),g._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(g){return this.setDOMContent(document.createTextNode(g))}setHTML(g){const l=document.createDocumentFragment(),h=document.createElement("body");let _;for(h.innerHTML=g;_=h.firstChild,_;)l.appendChild(_);return this.setDOMContent(l)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(g){return this.options.maxWidth=g,this._update(),this}setDOMContent(g){let l=this._content;if(l)for(;l.hasChildNodes();)l.firstChild&&l.removeChild(l.firstChild);else l=this._content=U("div","mapboxgl-popup-content",this._container||void 0);if(l.appendChild(g),this.options.closeButton){const h=this._closeButton=U("button","mapboxgl-popup-close-button",l);h.type="button",h.setAttribute("aria-label","Close popup"),h.setAttribute("aria-hidden","true"),h.innerHTML="&#215;",h.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(g){return this._classList.add(g),this._updateClassList(),this}removeClassName(g){return this._classList.delete(g),this._updateClassList(),this}setOffset(g){return this.options.offset=g,this._update(),this}toggleClassName(g){let l;return this._classList.delete(g)?l=!1:(this._classList.add(g),l=!0),this._updateClassList(),l}_onMouseEvent(g){this._update(g.point)}_getAnchor(g){if(this.options.anchor)return this.options.anchor;const l=this._map,h=this._container,_=this._pos;if(!l||!h||!_)return"bottom";const B=h.offsetWidth,C=h.offsetHeight,E=_.x<B/2,M=_.x>l.transform.width-B/2;if(_.y+g<C)return E?"top-left":M?"top-right":"top";if(_.y>l.transform.height-C){if(E)return"bottom-left";if(M)return"bottom-right"}return E?"left":M?"right":"bottom"}_updateClassList(){const g=this._container;if(!g)return;const l=[...this._classList];l.push("mapboxgl-popup"),this._anchor&&l.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&l.push("mapboxgl-popup-track-pointer"),g.className=l.join(" ")}_update(g){const l=this._map,h=this._content;if(!l||!this._lngLat&&!this._trackPointer||!h)return;let _=this._container;if(_||(_=this._container=U("div","mapboxgl-popup",l.getContainer()),this._tip=U("div","mapboxgl-popup-tip",_),_.appendChild(h)),this.options.maxWidth&&_.style.maxWidth!==this.options.maxWidth&&(_.style.maxWidth=this.options.maxWidth),l.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Kd(this._lngLat,this._pos,l.transform)),!this._trackPointer||g){const B=this._pos=this._trackPointer&&g?g:l.project(this._lngLat),C=y1(this.options.offset),E=this._anchor=this._getAnchor(C.y),M=y1(this.options.offset,E),k=B.add(M).round();l._requestDomTask(()=>{this._container&&E&&(this._container.style.transform=`${xm[E]} translate(${k.x}px,${k.y}px)`)})}if(!this._marker&&l._showingGlobe()){const B=s.d6(l.transform,this._lngLat)?0:1;this._setOpacity(B)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const g=this._container.querySelector(_1);g&&g.focus()}_onClose(){this.remove()}_setOpacity(g){this._container&&(this._container.style.opacity=`${g}`),this._content&&(this._content.style.pointerEvents=g?"auto":"none")}},Marker:gy,Style:Pa,LngLat:s.bn,LngLatBounds:s.ad,Point:s.P,MercatorCoordinate:s.L,FreeCameraOptions:ps,Evented:s.E,config:s.d5,prewarm:s.dp,clearPrewarmedResources:s.dq,get accessToken(){return s.d5.ACCESS_TOKEN},set accessToken(g){s.d5.ACCESS_TOKEN=g},get baseApiUrl(){return s.d5.API_URL},set baseApiUrl(g){s.d5.API_URL=g},get workerCount(){return s.dr.workerCount},set workerCount(g){s.dr.workerCount=g},get maxParallelImageRequests(){return s.d5.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(g){s.d5.MAX_PARALLEL_IMAGE_REQUESTS=g},clearStorage(g){s.ds(g)},get workerUrl(){return s.dt.workerUrl},set workerUrl(g){s.dt.workerUrl=g},get workerClass(){return s.dt.workerClass},set workerClass(g){s.dt.workerClass=g},get workerParams(){return s.dt.workerParams},set workerParams(g){s.dt.workerParams=g},get dracoUrl(){return s.du()},set dracoUrl(g){s.dv(g)},get meshoptUrl(){return s.dw()},set meshoptUrl(g){s.dx(g)},setNow:s.f.setNow,restoreNow:s.f.restoreNow}});var x=f;return x})})(CG);var SG=CG.exports;const gie=wi(SG),_ie=TV({__proto__:null,default:gie},[SG]);function yie(t){const[e,r]=Te.useState(!1);return Ie.jsxs("div",{className:`fab-container gp-12 large row al-ctr jc-ctr ${e?"open":""}`,onClick:()=>{t.setIsLayersVisible(!t.isLayersVisible)},children:[Ie.jsx("md-ripple",{}),Ie.jsx("span",{className:"material-symbols-rounded layers-icon",children:"layers"})]})}function oE(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var aE={click:"onClick",focusin:"onFocus",focusout:"onFocus",mousedown:"onMouseDown",mouseup:"onMouseUp",touchstart:"onTouchStart",touchend:"onTouchEnd"},B3=function(t){var e,r=t.children,o=t.onClickAway,u=t.focusEvent,f=u===void 0?"focusin":u,p=t.mouseEvent,x=p===void 0?"click":p,s=t.touchEvent,w=s===void 0?"touchend":s,I=Te.useRef(null),P=Te.useRef(null),N=Te.useRef(!1);Te.useEffect(function(){return setTimeout(function(){N.current=!0},0),function(){N.current=!1}},[]);var U=function(Z){return function(H){P.current=H.target;var K=r==null?void 0:r.props[Z];K&&K(H)}};Te.useEffect(function(){var Z,H,K=(Z=(H=I.current)===null||H===void 0?void 0:H.ownerDocument)!==null&&Z!==void 0?Z:document,ee=function(se){N.current&&(I.current&&I.current.contains(se.target)||P.current===se.target||!K.contains(se.target)||o(se))};return K.addEventListener(x,ee),K.addEventListener(w,ee),K.addEventListener(f,ee),function(){K.removeEventListener(x,ee),K.removeEventListener(w,ee),K.removeEventListener(f,ee)}},[f,x,o,w]);var X=aE[x],Q=aE[w],J=aE[f];return Ue.Children.only(Te.cloneElement(r,(oE(e={ref:function(Z){I.current=Z;var H=r.ref;typeof H=="function"?H(Z):H&&(H.current=Z)}},J,U(J)),oE(e,X,U(X)),oE(e,Q,U(Q)),e)))};B3.displayName="ClickAwayListener";function vie({item:t}){const[e,r]=Te.useState(!1),o=()=>{r(!1)};return Ie.jsxs(Ie.Fragment,{children:[Ie.jsx(BG,{longitude:t.longitude,latitude:t.latitude,children:Ie.jsx("img",{src:"/assets/location_pin.svg",onClick:()=>r(!0)})}),e&&Ie.jsx(xG,{className:"custom-popup",longitude:t.longitude,latitude:t.latitude,anchor:"bottom",maxWidth:"200px",closeOnClick:!1,closeButton:!1,onClose:()=>r(!1),children:Ie.jsx(B3,{onClickAway:o,children:Ie.jsxs("div",{className:"col gp-4",children:[Ie.jsx("p",{style:{fontWeight:700},children:t.well_id}),Ie.jsx("p",{className:"body-medium success",children:t.well_status}),Ie.jsx("p",{children:t.primary_use}),Ie.jsx("p",{children:t.actualAddress})]})})})]})}const Bie=({selectedLocation:t})=>{const[e,r]=Te.useState(!1),o=()=>{r(!1)};return Ie.jsxs(Ie.Fragment,{children:[Ie.jsx(BG,{longitude:t.longitude,latitude:t.latitude,children:Ie.jsx("img",{src:"/assets/user_location.svg",onClick:()=>r(!0)})}),e&&Ie.jsx(xG,{className:"custom-popup",longitude:t.longitude,latitude:t.latitude,anchor:"bottom",maxWidth:"200px",closeOnClick:!1,closeButton:!1,onClose:()=>r(!1),children:Ie.jsx(B3,{onClickAway:o,children:Ie.jsx("div",{className:"col gp-4",children:Ie.jsx("p",{style:{fontWeight:700},children:"You are here"})})})})]})};function xie(){const[t,e]=Te.useContext(wB),[r,o]=Te.useState(!1),u=[[171.6339,-44.0442],[173.79,-43.1591]],[f,p]=Te.useContext(y3);Te.useEffect(()=>{t.latitude&&t.longitude&&o(!0)},[t]),Te.useState(!0);const[x,s]=Te.useState({hovered:!1,x:0,y:0});let w=N=>{N.features.length!==0&&s({hovered:!0,x:N.point.x,y:N.point.y})};const[I,P]=Te.useState(!1);return Ie.jsxs("div",{className:"map-container",children:[Ie.jsxs(sie,{mapboxAccessToken:"pk.eyJ1IjoibnJhc3RvZ2kiLCJhIjoiY2xweHRkbHU4MGRnZTJpc3Vkd2g5Znp2ZSJ9.DXCXHf-XnGSGVhvjz0mpNg",initialViewState:{longitude:-142,latitude:32,zoom:3},interactiveLayerIds:["wide_chch_circle"],onClick:w,onMouseEnter:w,onMouseLeave:()=>s({hovered:!1}),maxBounds:u,attributionControl:!1,mapStyle:"mapbox://styles/nrastogi/clw1ewogz01z501rj5ntd0ppb",children:[I&&Ie.jsx(uie,{id:"wide_chch",type:"vector",url:"mapbox://nrastogi.84tj5q3h",children:Ie.jsx(lie,{id:"wide_chch_circle","source-layer":"wide_chch-1hgcee",source:"wide_chch",type:"circle",paint:{"circle-stroke-width":3,"circle-stroke-color":"red","circle-color":"red"}})}),x.hovered&&Ie.jsx("div",{className:"custom-popup",style:{left:x.x,top:x.y},children:"Hello"}),t.latitude&&t.longitude&&Ie.jsx(Bie,{selectedLocation:t}),f.map(N=>Ie.jsx(vie,{item:N},N.well_id))]}),Ie.jsx(yie,{setIsLayersVisible:P,isLayersVisible:I})]})}function bie(){return Ie.jsxs("div",{className:"body-container mapPage row",children:[Ie.jsx(mie,{}),Ie.jsx(xie,{})]})}function Cie({item:t,handleActive:e,windowSize:r}){return Ie.jsx(ere,{to:t.link,className:"nav-item",children:Ie.jsxs("div",{className:`tab-item row al-ctr jc-ctr gp-8 ${t.icon}}`,onClick:()=>{e(t.id)},children:[r<900?Ie.jsx("span",{className:"material-symbols-rounded home-icon",children:t.icon}):"",r>900?t.name:""]})})}function wie(){const[t,e]=Te.useState(window.innerWidth),[r,o]=Te.useState([{id:1,name:"Home",icon:"home",active:!0,link:"/"},{id:2,name:"Maps",icon:"map",active:!1,link:"/map"},{id:3,name:"Metrics",icon:"monitoring",active:!1,link:"/metrics"},{id:4,name:"Read",icon:"draft",active:!1,link:"/read"}]);function u(f){o(r.map(p=>(p.id===f?p.active=!0:p.active=!1,p)))}return Te.useEffect(()=>{window.addEventListener("resize",()=>{e(window.innerWidth)})}),Ie.jsxs("div",{className:"navigation-top-bar row al-ctr jc-ctr flx-wrp jc-sb",children:[t>=800?Ie.jsx("p",{className:"title-large wb-title",children:"Should I Drink?"}):null,Ie.jsx("div",{className:"tabs-container row al-ctr",children:r.map((f,p)=>Ie.jsx(Cie,{item:f,handleActive:u,windowSize:t},p))})]})}function TG(t){var e,r,o="";if(typeof t=="string"||typeof t=="number")o+=t;else if(typeof t=="object")if(Array.isArray(t)){var u=t.length;for(e=0;e<u;e++)t[e]&&(r=TG(t[e]))&&(o&&(o+=" "),o+=r)}else for(r in t)t[r]&&(o&&(o+=" "),o+=r);return o}function Yn(){for(var t,e,r=0,o="",u=arguments.length;r<u;r++)(t=arguments[r])&&(e=TG(t))&&(o&&(o+=" "),o+=e);return o}var Sie=Array.isArray,Ds=Sie,Tie=typeof cg=="object"&&cg&&cg.Object===Object&&cg,AG=Tie,Aie=AG,Eie=typeof self=="object"&&self&&self.Object===Object&&self,Die=Aie||Eie||Function("return this")(),wc=Die,Pie=wc,Mie=Pie.Symbol,TB=Mie,Y5=TB,EG=Object.prototype,Iie=EG.hasOwnProperty,Oie=EG.toString,f0=Y5?Y5.toStringTag:void 0;function kie(t){var e=Iie.call(t,f0),r=t[f0];try{t[f0]=void 0;var o=!0}catch{}var u=Oie.call(t);return o&&(e?t[f0]=r:delete t[f0]),u}var Lie=kie,Rie=Object.prototype,zie=Rie.toString;function Nie(t){return zie.call(t)}var Fie=Nie,J5=TB,jie=Lie,$ie=Fie,Uie="[object Null]",Vie="[object Undefined]",Q5=J5?J5.toStringTag:void 0;function Gie(t){return t==null?t===void 0?Vie:Uie:Q5&&Q5 in Object(t)?jie(t):$ie(t)}var Ah=Gie;function Hie(t){return t!=null&&typeof t=="object"}var Eh=Hie,Wie=Ah,Zie=Eh,qie="[object Symbol]";function Kie(t){return typeof t=="symbol"||Zie(t)&&Wie(t)==qie}var x_=Kie,Xie=Ds,Yie=x_,Jie=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Qie=/^\w*$/;function eoe(t,e){if(Xie(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||Yie(t)?!0:Qie.test(t)||!Jie.test(t)||e!=null&&t in Object(e)}var x3=eoe;function toe(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var id=toe;const b_=wi(id);var roe=Ah,noe=id,ioe="[object AsyncFunction]",ooe="[object Function]",aoe="[object GeneratorFunction]",soe="[object Proxy]";function loe(t){if(!noe(t))return!1;var e=roe(t);return e==ooe||e==aoe||e==ioe||e==soe}var b3=loe;const Ln=wi(b3);var uoe=wc,coe=uoe["__core-js_shared__"],hoe=coe,sE=hoe,eF=function(){var t=/[^.]+$/.exec(sE&&sE.keys&&sE.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function foe(t){return!!eF&&eF in t}var doe=foe,poe=Function.prototype,moe=poe.toString;function goe(t){if(t!=null){try{return moe.call(t)}catch{}try{return t+""}catch{}}return""}var DG=goe,_oe=b3,yoe=doe,voe=id,Boe=DG,xoe=/[\\^$.*+?()[\]{}|]/g,boe=/^\[object .+?Constructor\]$/,Coe=Function.prototype,woe=Object.prototype,Soe=Coe.toString,Toe=woe.hasOwnProperty,Aoe=RegExp("^"+Soe.call(Toe).replace(xoe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Eoe(t){if(!voe(t)||yoe(t))return!1;var e=_oe(t)?Aoe:boe;return e.test(Boe(t))}var Doe=Eoe;function Poe(t,e){return t==null?void 0:t[e]}var Moe=Poe,Ioe=Doe,Ooe=Moe;function koe(t,e){var r=Ooe(t,e);return Ioe(r)?r:void 0}var Kp=koe,Loe=Kp,Roe=Loe(Object,"create"),Fw=Roe,tF=Fw;function zoe(){this.__data__=tF?tF(null):{},this.size=0}var Noe=zoe;function Foe(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var joe=Foe,$oe=Fw,Uoe="__lodash_hash_undefined__",Voe=Object.prototype,Goe=Voe.hasOwnProperty;function Hoe(t){var e=this.__data__;if($oe){var r=e[t];return r===Uoe?void 0:r}return Goe.call(e,t)?e[t]:void 0}var Woe=Hoe,Zoe=Fw,qoe=Object.prototype,Koe=qoe.hasOwnProperty;function Xoe(t){var e=this.__data__;return Zoe?e[t]!==void 0:Koe.call(e,t)}var Yoe=Xoe,Joe=Fw,Qoe="__lodash_hash_undefined__";function eae(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Joe&&e===void 0?Qoe:e,this}var tae=eae,rae=Noe,nae=joe,iae=Woe,oae=Yoe,aae=tae;function C_(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var o=t[e];this.set(o[0],o[1])}}C_.prototype.clear=rae;C_.prototype.delete=nae;C_.prototype.get=iae;C_.prototype.has=oae;C_.prototype.set=aae;var sae=C_;function lae(){this.__data__=[],this.size=0}var uae=lae;function cae(t,e){return t===e||t!==t&&e!==e}var C3=cae,hae=C3;function fae(t,e){for(var r=t.length;r--;)if(hae(t[r][0],e))return r;return-1}var jw=fae,dae=jw,pae=Array.prototype,mae=pae.splice;function gae(t){var e=this.__data__,r=dae(e,t);if(r<0)return!1;var o=e.length-1;return r==o?e.pop():mae.call(e,r,1),--this.size,!0}var _ae=gae,yae=jw;function vae(t){var e=this.__data__,r=yae(e,t);return r<0?void 0:e[r][1]}var Bae=vae,xae=jw;function bae(t){return xae(this.__data__,t)>-1}var Cae=bae,wae=jw;function Sae(t,e){var r=this.__data__,o=wae(r,t);return o<0?(++this.size,r.push([t,e])):r[o][1]=e,this}var Tae=Sae,Aae=uae,Eae=_ae,Dae=Bae,Pae=Cae,Mae=Tae;function w_(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var o=t[e];this.set(o[0],o[1])}}w_.prototype.clear=Aae;w_.prototype.delete=Eae;w_.prototype.get=Dae;w_.prototype.has=Pae;w_.prototype.set=Mae;var $w=w_,Iae=Kp,Oae=wc,kae=Iae(Oae,"Map"),w3=kae,rF=sae,Lae=$w,Rae=w3;function zae(){this.size=0,this.__data__={hash:new rF,map:new(Rae||Lae),string:new rF}}var Nae=zae;function Fae(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var jae=Fae,$ae=jae;function Uae(t,e){var r=t.__data__;return $ae(e)?r[typeof e=="string"?"string":"hash"]:r.map}var Uw=Uae,Vae=Uw;function Gae(t){var e=Vae(this,t).delete(t);return this.size-=e?1:0,e}var Hae=Gae,Wae=Uw;function Zae(t){return Wae(this,t).get(t)}var qae=Zae,Kae=Uw;function Xae(t){return Kae(this,t).has(t)}var Yae=Xae,Jae=Uw;function Qae(t,e){var r=Jae(this,t),o=r.size;return r.set(t,e),this.size+=r.size==o?0:1,this}var ese=Qae,tse=Nae,rse=Hae,nse=qae,ise=Yae,ose=ese;function S_(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var o=t[e];this.set(o[0],o[1])}}S_.prototype.clear=tse;S_.prototype.delete=rse;S_.prototype.get=nse;S_.prototype.has=ise;S_.prototype.set=ose;var S3=S_,PG=S3,ase="Expected a function";function T3(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(ase);var r=function(){var o=arguments,u=e?e.apply(this,o):o[0],f=r.cache;if(f.has(u))return f.get(u);var p=t.apply(this,o);return r.cache=f.set(u,p)||f,p};return r.cache=new(T3.Cache||PG),r}T3.Cache=PG;var MG=T3;const sse=wi(MG);var lse=MG,use=500;function cse(t){var e=lse(t,function(o){return r.size===use&&r.clear(),o}),r=e.cache;return e}var hse=cse,fse=hse,dse=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,pse=/\\(\\)?/g,mse=fse(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(dse,function(r,o,u,f){e.push(u?f.replace(pse,"$1"):o||r)}),e}),gse=mse;function _se(t,e){for(var r=-1,o=t==null?0:t.length,u=Array(o);++r<o;)u[r]=e(t[r],r,t);return u}var A3=_se,nF=TB,yse=A3,vse=Ds,Bse=x_,xse=1/0,iF=nF?nF.prototype:void 0,oF=iF?iF.toString:void 0;function IG(t){if(typeof t=="string")return t;if(vse(t))return yse(t,IG)+"";if(Bse(t))return oF?oF.call(t):"";var e=t+"";return e=="0"&&1/t==-xse?"-0":e}var bse=IG,Cse=bse;function wse(t){return t==null?"":Cse(t)}var OG=wse,Sse=Ds,Tse=x3,Ase=gse,Ese=OG;function Dse(t,e){return Sse(t)?t:Tse(t,e)?[t]:Ase(Ese(t))}var kG=Dse,Pse=x_,Mse=1/0;function Ise(t){if(typeof t=="string"||Pse(t))return t;var e=t+"";return e=="0"&&1/t==-Mse?"-0":e}var Vw=Ise,Ose=kG,kse=Vw;function Lse(t,e){e=Ose(e,t);for(var r=0,o=e.length;t!=null&&r<o;)t=t[kse(e[r++])];return r&&r==o?t:void 0}var E3=Lse,Rse=E3;function zse(t,e,r){var o=t==null?void 0:Rse(t,e);return o===void 0?r:o}var LG=zse;const Fl=wi(LG);function Nse(t){return t==null}var Fse=Nse;const En=wi(Fse);var jse=Ah,$se=Ds,Use=Eh,Vse="[object String]";function Gse(t){return typeof t=="string"||!$se(t)&&Use(t)&&jse(t)==Vse}var Hse=Gse;const AB=wi(Hse);var RG={exports:{}},Si={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ua=typeof Symbol=="function"&&Symbol.for,D3=ua?Symbol.for("react.element"):60103,P3=ua?Symbol.for("react.portal"):60106,Gw=ua?Symbol.for("react.fragment"):60107,Hw=ua?Symbol.for("react.strict_mode"):60108,Ww=ua?Symbol.for("react.profiler"):60114,Zw=ua?Symbol.for("react.provider"):60109,qw=ua?Symbol.for("react.context"):60110,M3=ua?Symbol.for("react.async_mode"):60111,Kw=ua?Symbol.for("react.concurrent_mode"):60111,Xw=ua?Symbol.for("react.forward_ref"):60112,Yw=ua?Symbol.for("react.suspense"):60113,Wse=ua?Symbol.for("react.suspense_list"):60120,Jw=ua?Symbol.for("react.memo"):60115,Qw=ua?Symbol.for("react.lazy"):60116,Zse=ua?Symbol.for("react.block"):60121,qse=ua?Symbol.for("react.fundamental"):60117,Kse=ua?Symbol.for("react.responder"):60118,Xse=ua?Symbol.for("react.scope"):60119;function al(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case D3:switch(t=t.type,t){case M3:case Kw:case Gw:case Ww:case Hw:case Yw:return t;default:switch(t=t&&t.$$typeof,t){case qw:case Xw:case Qw:case Jw:case Zw:return t;default:return e}}case P3:return e}}}function zG(t){return al(t)===Kw}Si.AsyncMode=M3;Si.ConcurrentMode=Kw;Si.ContextConsumer=qw;Si.ContextProvider=Zw;Si.Element=D3;Si.ForwardRef=Xw;Si.Fragment=Gw;Si.Lazy=Qw;Si.Memo=Jw;Si.Portal=P3;Si.Profiler=Ww;Si.StrictMode=Hw;Si.Suspense=Yw;Si.isAsyncMode=function(t){return zG(t)||al(t)===M3};Si.isConcurrentMode=zG;Si.isContextConsumer=function(t){return al(t)===qw};Si.isContextProvider=function(t){return al(t)===Zw};Si.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===D3};Si.isForwardRef=function(t){return al(t)===Xw};Si.isFragment=function(t){return al(t)===Gw};Si.isLazy=function(t){return al(t)===Qw};Si.isMemo=function(t){return al(t)===Jw};Si.isPortal=function(t){return al(t)===P3};Si.isProfiler=function(t){return al(t)===Ww};Si.isStrictMode=function(t){return al(t)===Hw};Si.isSuspense=function(t){return al(t)===Yw};Si.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Gw||t===Kw||t===Ww||t===Hw||t===Yw||t===Wse||typeof t=="object"&&t!==null&&(t.$$typeof===Qw||t.$$typeof===Jw||t.$$typeof===Zw||t.$$typeof===qw||t.$$typeof===Xw||t.$$typeof===qse||t.$$typeof===Kse||t.$$typeof===Xse||t.$$typeof===Zse)};Si.typeOf=al;RG.exports=Si;var bM=RG.exports,Yse=Ah,Jse=Eh,Qse="[object Number]";function ele(t){return typeof t=="number"||Jse(t)&&Yse(t)==Qse}var NG=ele;const tle=wi(NG);var rle=NG;function nle(t){return rle(t)&&t!=+t}var ile=nle;const T_=wi(ile);var Su=function(e){return e===0?0:e>0?1:-1},Bp=function(e){return AB(e)&&e.indexOf("%")===e.length-1},lr=function(e){return tle(e)&&!T_(e)},Zo=function(e){return lr(e)||AB(e)},ole=0,Xp=function(e){var r=++ole;return"".concat(e||"").concat(r)},Np=function(e,r){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!lr(e)&&!AB(e))return o;var f;if(Bp(e)){var p=e.indexOf("%");f=r*parseFloat(e.slice(0,p))/100}else f=+e;return T_(f)&&(f=o),u&&f>r&&(f=r),f},Pf=function(e){if(!e)return null;var r=Object.keys(e);return r&&r.length?e[r[0]]:null},ale=function(e){if(!Array.isArray(e))return!1;for(var r=e.length,o={},u=0;u<r;u++)if(!o[e[u]])o[e[u]]=!0;else return!0;return!1},Ao=function(e,r){return lr(e)&&lr(r)?function(o){return e+o*(r-e)}:function(){return r}};function yC(t,e,r){return!t||!t.length?null:t.find(function(o){return o&&(typeof e=="function"?e(o):Fl(o,e))===r})}var sle=function(e){if(!e||!e.length)return null;for(var r=e.length,o=0,u=0,f=0,p=0,x=1/0,s=-1/0,w=0,I=0,P=0;P<r;P++)w=e[P].cx||0,I=e[P].cy||0,o+=w,u+=I,f+=w*I,p+=w*w,x=Math.min(x,w),s=Math.max(s,w);var N=r*p!==o*o?(r*f-o*u)/(r*p-o*o):0;return{xmin:x,xmax:s,a:N,b:(u-N*o)/r}};function Og(t,e){for(var r in t)if({}.hasOwnProperty.call(t,r)&&(!{}.hasOwnProperty.call(e,r)||t[r]!==e[r]))return!1;for(var o in e)if({}.hasOwnProperty.call(e,o)&&!{}.hasOwnProperty.call(t,o))return!1;return!0}function CM(t){"@babel/helpers - typeof";return CM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},CM(t)}var lle=["viewBox","children"],ule=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],aF=["points","pathLength"],lE={svg:lle,polygon:aF,polyline:aF},I3=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],vC=function(e,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var o=e;if(Te.isValidElement(e)&&(o=e.props),!b_(o))return null;var u={};return Object.keys(o).forEach(function(f){I3.includes(f)&&(u[f]=r||function(p){return o[f](o,p)})}),u},cle=function(e,r,o){return function(u){return e(r,o,u),null}},wv=function(e,r,o){if(!b_(e)||CM(e)!=="object")return null;var u=null;return Object.keys(e).forEach(function(f){var p=e[f];I3.includes(f)&&typeof p=="function"&&(u||(u={}),u[f]=cle(p,r,o))}),u},hle=["children"],fle=["children"];function sF(t,e){if(t==null)return{};var r=dle(t,e),o,u;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(t);for(u=0;u<f.length;u++)o=f[u],!(e.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(t,o)&&(r[o]=t[o])}return r}function dle(t,e){if(t==null)return{};var r={},o=Object.keys(t),u,f;for(f=0;f<o.length;f++)u=o[f],!(e.indexOf(u)>=0)&&(r[u]=t[u]);return r}function wM(t){"@babel/helpers - typeof";return wM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wM(t)}var lF={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},dh=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},uF=null,uE=null,O3=function t(e){if(e===uF&&Array.isArray(uE))return uE;var r=[];return Te.Children.forEach(e,function(o){En(o)||(bM.isFragment(o)?r=r.concat(t(o.props.children)):r.push(o))}),uE=r,uF=e,r};function Es(t,e){var r=[],o=[];return Array.isArray(e)?o=e.map(function(u){return dh(u)}):o=[dh(e)],O3(t).forEach(function(u){var f=Fl(u,"type.displayName")||Fl(u,"type.name");o.indexOf(f)!==-1&&r.push(u)}),r}function Ys(t,e){var r=Es(t,e);return r&&r[0]}var cF=function(e){if(!e||!e.props)return!1;var r=e.props,o=r.width,u=r.height;return!(!lr(o)||o<=0||!lr(u)||u<=0)},ple=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],mle=function(e){return e&&e.type&&AB(e.type)&&ple.indexOf(e.type)>=0},FG=function(e){return e&&wM(e)==="object"&&"cx"in e&&"cy"in e&&"r"in e},gle=function(e,r,o,u){var f,p=(f=lE==null?void 0:lE[u])!==null&&f!==void 0?f:[];return!Ln(e)&&(u&&p.includes(r)||ule.includes(r))||o&&I3.includes(r)},An=function(e,r,o){if(!e||typeof e=="function"||typeof e=="boolean")return null;var u=e;if(Te.isValidElement(e)&&(u=e.props),!b_(u))return null;var f={};return Object.keys(u).forEach(function(p){var x;gle((x=u)===null||x===void 0?void 0:x[p],p,r,o)&&(f[p]=u[p])}),f},SM=function t(e,r){if(e===r)return!0;var o=Te.Children.count(e);if(o!==Te.Children.count(r))return!1;if(o===0)return!0;if(o===1)return hF(Array.isArray(e)?e[0]:e,Array.isArray(r)?r[0]:r);for(var u=0;u<o;u++){var f=e[u],p=r[u];if(Array.isArray(f)||Array.isArray(p)){if(!t(f,p))return!1}else if(!hF(f,p))return!1}return!0},hF=function(e,r){if(En(e)&&En(r))return!0;if(!En(e)&&!En(r)){var o=e.props||{},u=o.children,f=sF(o,hle),p=r.props||{},x=p.children,s=sF(p,fle);return u&&x?Og(f,s)&&SM(u,x):!u&&!x?Og(f,s):!1}return!1},fF=function(e,r){var o=[],u={};return O3(e).forEach(function(f,p){if(mle(f))o.push(f);else if(f){var x=dh(f.type),s=r[x]||{},w=s.handler,I=s.once;if(w&&(!I||!u[x])){var P=w(f,x,p);o.push(P),u[x]=!0}}}),o},_le=function(e){var r=e&&e.type;return r&&lF[r]?lF[r]:null},yle=function(e,r){return O3(r).indexOf(e)},vle=["children","width","height","viewBox","className","style","title","desc"];function TM(){return TM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},TM.apply(this,arguments)}function Ble(t,e){if(t==null)return{};var r=xle(t,e),o,u;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(t);for(u=0;u<f.length;u++)o=f[u],!(e.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(t,o)&&(r[o]=t[o])}return r}function xle(t,e){if(t==null)return{};var r={},o=Object.keys(t),u,f;for(f=0;f<o.length;f++)u=o[f],!(e.indexOf(u)>=0)&&(r[u]=t[u]);return r}function AM(t){var e=t.children,r=t.width,o=t.height,u=t.viewBox,f=t.className,p=t.style,x=t.title,s=t.desc,w=Ble(t,vle),I=u||{width:r,height:o,x:0,y:0},P=Yn("recharts-surface",f);return Ue.createElement("svg",TM({},An(w,!0,"svg"),{className:P,width:r,height:o,style:p,viewBox:"".concat(I.x," ").concat(I.y," ").concat(I.width," ").concat(I.height)}),Ue.createElement("title",null,x),Ue.createElement("desc",null,s),e)}var ble=["children","className"];function EM(){return EM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},EM.apply(this,arguments)}function Cle(t,e){if(t==null)return{};var r=wle(t,e),o,u;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(t);for(u=0;u<f.length;u++)o=f[u],!(e.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(t,o)&&(r[o]=t[o])}return r}function wle(t,e){if(t==null)return{};var r={},o=Object.keys(t),u,f;for(f=0;f<o.length;f++)u=o[f],!(e.indexOf(u)>=0)&&(r[u]=t[u]);return r}var hi=Ue.forwardRef(function(t,e){var r=t.children,o=t.className,u=Cle(t,ble),f=Yn("recharts-layer",o);return Ue.createElement("g",EM({className:f},An(u,!0),{ref:e}),r)}),ph=function(e,r){for(var o=arguments.length,u=new Array(o>2?o-2:0),f=2;f<o;f++)u[f-2]=arguments[f]};function Sle(t,e,r){var o=-1,u=t.length;e<0&&(e=-e>u?0:u+e),r=r>u?u:r,r<0&&(r+=u),u=e>r?0:r-e>>>0,e>>>=0;for(var f=Array(u);++o<u;)f[o]=t[o+e];return f}var Tle=Sle,Ale=Tle;function Ele(t,e,r){var o=t.length;return r=r===void 0?o:r,!e&&r>=o?t:Ale(t,e,r)}var Dle=Ele,Ple="\\ud800-\\udfff",Mle="\\u0300-\\u036f",Ile="\\ufe20-\\ufe2f",Ole="\\u20d0-\\u20ff",kle=Mle+Ile+Ole,Lle="\\ufe0e\\ufe0f",Rle="\\u200d",zle=RegExp("["+Rle+Ple+kle+Lle+"]");function Nle(t){return zle.test(t)}var jG=Nle;function Fle(t){return t.split("")}var jle=Fle,$G="\\ud800-\\udfff",$le="\\u0300-\\u036f",Ule="\\ufe20-\\ufe2f",Vle="\\u20d0-\\u20ff",Gle=$le+Ule+Vle,Hle="\\ufe0e\\ufe0f",Wle="["+$G+"]",DM="["+Gle+"]",PM="\\ud83c[\\udffb-\\udfff]",Zle="(?:"+DM+"|"+PM+")",UG="[^"+$G+"]",VG="(?:\\ud83c[\\udde6-\\uddff]){2}",GG="[\\ud800-\\udbff][\\udc00-\\udfff]",qle="\\u200d",HG=Zle+"?",WG="["+Hle+"]?",Kle="(?:"+qle+"(?:"+[UG,VG,GG].join("|")+")"+WG+HG+")*",Xle=WG+HG+Kle,Yle="(?:"+[UG+DM+"?",DM,VG,GG,Wle].join("|")+")",Jle=RegExp(PM+"(?="+PM+")|"+Yle+Xle,"g");function Qle(t){return t.match(Jle)||[]}var eue=Qle,tue=jle,rue=jG,nue=eue;function iue(t){return rue(t)?nue(t):tue(t)}var oue=iue,aue=Dle,sue=jG,lue=oue,uue=OG;function cue(t){return function(e){e=uue(e);var r=sue(e)?lue(e):void 0,o=r?r[0]:e.charAt(0),u=r?aue(r,1).join(""):e.slice(1);return o[t]()+u}}var hue=cue,fue=hue,due=fue("toUpperCase"),pue=due;const eS=wi(pue);function $i(t){return function(){return t}}const ZG=Math.cos,BC=Math.sin,Iu=Math.sqrt,xC=Math.PI,tS=2*xC,MM=Math.PI,IM=2*MM,dp=1e-6,mue=IM-dp;function qG(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function gue(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return qG;const r=10**e;return function(o){this._+=o[0];for(let u=1,f=o.length;u<f;++u)this._+=Math.round(arguments[u]*r)/r+o[u]}}class _ue{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?qG:gue(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,o,u){this._append`Q${+e},${+r},${this._x1=+o},${this._y1=+u}`}bezierCurveTo(e,r,o,u,f,p){this._append`C${+e},${+r},${+o},${+u},${this._x1=+f},${this._y1=+p}`}arcTo(e,r,o,u,f){if(e=+e,r=+r,o=+o,u=+u,f=+f,f<0)throw new Error(`negative radius: ${f}`);let p=this._x1,x=this._y1,s=o-e,w=u-r,I=p-e,P=x-r,N=I*I+P*P;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(N>dp)if(!(Math.abs(P*s-w*I)>dp)||!f)this._append`L${this._x1=e},${this._y1=r}`;else{let U=o-p,X=u-x,Q=s*s+w*w,J=U*U+X*X,Z=Math.sqrt(Q),H=Math.sqrt(N),K=f*Math.tan((MM-Math.acos((Q+N-J)/(2*Z*H)))/2),ee=K/H,se=K/Z;Math.abs(ee-1)>dp&&this._append`L${e+ee*I},${r+ee*P}`,this._append`A${f},${f},0,0,${+(P*U>I*X)},${this._x1=e+se*s},${this._y1=r+se*w}`}}arc(e,r,o,u,f,p){if(e=+e,r=+r,o=+o,p=!!p,o<0)throw new Error(`negative radius: ${o}`);let x=o*Math.cos(u),s=o*Math.sin(u),w=e+x,I=r+s,P=1^p,N=p?u-f:f-u;this._x1===null?this._append`M${w},${I}`:(Math.abs(this._x1-w)>dp||Math.abs(this._y1-I)>dp)&&this._append`L${w},${I}`,o&&(N<0&&(N=N%IM+IM),N>mue?this._append`A${o},${o},0,1,${P},${e-x},${r-s}A${o},${o},0,1,${P},${this._x1=w},${this._y1=I}`:N>dp&&this._append`A${o},${o},0,${+(N>=MM)},${P},${this._x1=e+o*Math.cos(f)},${this._y1=r+o*Math.sin(f)}`)}rect(e,r,o,u){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${o=+o}v${+u}h${-o}Z`}toString(){return this._}}function k3(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const o=Math.floor(r);if(!(o>=0))throw new RangeError(`invalid digits: ${r}`);e=o}return t},()=>new _ue(e)}function L3(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function KG(t){this._context=t}KG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function rS(t){return new KG(t)}function XG(t){return t[0]}function YG(t){return t[1]}function JG(t,e){var r=$i(!0),o=null,u=rS,f=null,p=k3(x);t=typeof t=="function"?t:t===void 0?XG:$i(t),e=typeof e=="function"?e:e===void 0?YG:$i(e);function x(s){var w,I=(s=L3(s)).length,P,N=!1,U;for(o==null&&(f=u(U=p())),w=0;w<=I;++w)!(w<I&&r(P=s[w],w,s))===N&&((N=!N)?f.lineStart():f.lineEnd()),N&&f.point(+t(P,w,s),+e(P,w,s));if(U)return f=null,U+""||null}return x.x=function(s){return arguments.length?(t=typeof s=="function"?s:$i(+s),x):t},x.y=function(s){return arguments.length?(e=typeof s=="function"?s:$i(+s),x):e},x.defined=function(s){return arguments.length?(r=typeof s=="function"?s:$i(!!s),x):r},x.curve=function(s){return arguments.length?(u=s,o!=null&&(f=u(o)),x):u},x.context=function(s){return arguments.length?(s==null?o=f=null:f=u(o=s),x):o},x}function Vx(t,e,r){var o=null,u=$i(!0),f=null,p=rS,x=null,s=k3(w);t=typeof t=="function"?t:t===void 0?XG:$i(+t),e=typeof e=="function"?e:$i(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?YG:$i(+r);function w(P){var N,U,X,Q=(P=L3(P)).length,J,Z=!1,H,K=new Array(Q),ee=new Array(Q);for(f==null&&(x=p(H=s())),N=0;N<=Q;++N){if(!(N<Q&&u(J=P[N],N,P))===Z)if(Z=!Z)U=N,x.areaStart(),x.lineStart();else{for(x.lineEnd(),x.lineStart(),X=N-1;X>=U;--X)x.point(K[X],ee[X]);x.lineEnd(),x.areaEnd()}Z&&(K[N]=+t(J,N,P),ee[N]=+e(J,N,P),x.point(o?+o(J,N,P):K[N],r?+r(J,N,P):ee[N]))}if(H)return x=null,H+""||null}function I(){return JG().defined(u).curve(p).context(f)}return w.x=function(P){return arguments.length?(t=typeof P=="function"?P:$i(+P),o=null,w):t},w.x0=function(P){return arguments.length?(t=typeof P=="function"?P:$i(+P),w):t},w.x1=function(P){return arguments.length?(o=P==null?null:typeof P=="function"?P:$i(+P),w):o},w.y=function(P){return arguments.length?(e=typeof P=="function"?P:$i(+P),r=null,w):e},w.y0=function(P){return arguments.length?(e=typeof P=="function"?P:$i(+P),w):e},w.y1=function(P){return arguments.length?(r=P==null?null:typeof P=="function"?P:$i(+P),w):r},w.lineX0=w.lineY0=function(){return I().x(t).y(e)},w.lineY1=function(){return I().x(t).y(r)},w.lineX1=function(){return I().x(o).y(e)},w.defined=function(P){return arguments.length?(u=typeof P=="function"?P:$i(!!P),w):u},w.curve=function(P){return arguments.length?(p=P,f!=null&&(x=p(f)),w):p},w.context=function(P){return arguments.length?(P==null?f=x=null:x=p(f=P),w):f},w}class QG{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function yue(t){return new QG(t,!0)}function vue(t){return new QG(t,!1)}const R3={draw(t,e){const r=Iu(e/xC);t.moveTo(r,0),t.arc(0,0,r,0,tS)}},Bue={draw(t,e){const r=Iu(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},e9=Iu(1/3),xue=e9*2,bue={draw(t,e){const r=Iu(e/xue),o=r*e9;t.moveTo(0,-r),t.lineTo(o,0),t.lineTo(0,r),t.lineTo(-o,0),t.closePath()}},Cue={draw(t,e){const r=Iu(e),o=-r/2;t.rect(o,o,r,r)}},wue=.8908130915292852,t9=BC(xC/10)/BC(7*xC/10),Sue=BC(tS/10)*t9,Tue=-ZG(tS/10)*t9,Aue={draw(t,e){const r=Iu(e*wue),o=Sue*r,u=Tue*r;t.moveTo(0,-r),t.lineTo(o,u);for(let f=1;f<5;++f){const p=tS*f/5,x=ZG(p),s=BC(p);t.lineTo(s*r,-x*r),t.lineTo(x*o-s*u,s*o+x*u)}t.closePath()}},cE=Iu(3),Eue={draw(t,e){const r=-Iu(e/(cE*3));t.moveTo(0,r*2),t.lineTo(-cE*r,-r),t.lineTo(cE*r,-r),t.closePath()}},Dl=-.5,Pl=Iu(3)/2,OM=1/Iu(12),Due=(OM/2+1)*3,Pue={draw(t,e){const r=Iu(e/Due),o=r/2,u=r*OM,f=o,p=r*OM+r,x=-f,s=p;t.moveTo(o,u),t.lineTo(f,p),t.lineTo(x,s),t.lineTo(Dl*o-Pl*u,Pl*o+Dl*u),t.lineTo(Dl*f-Pl*p,Pl*f+Dl*p),t.lineTo(Dl*x-Pl*s,Pl*x+Dl*s),t.lineTo(Dl*o+Pl*u,Dl*u-Pl*o),t.lineTo(Dl*f+Pl*p,Dl*p-Pl*f),t.lineTo(Dl*x+Pl*s,Dl*s-Pl*x),t.closePath()}};function Mue(t,e){let r=null,o=k3(u);t=typeof t=="function"?t:$i(t||R3),e=typeof e=="function"?e:$i(e===void 0?64:+e);function u(){let f;if(r||(r=f=o()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),f)return r=null,f+""||null}return u.type=function(f){return arguments.length?(t=typeof f=="function"?f:$i(f),u):t},u.size=function(f){return arguments.length?(e=typeof f=="function"?f:$i(+f),u):e},u.context=function(f){return arguments.length?(r=f??null,u):r},u}function bC(){}function CC(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function r9(t){this._context=t}r9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:CC(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:CC(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Iue(t){return new r9(t)}function n9(t){this._context=t}n9.prototype={areaStart:bC,areaEnd:bC,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:CC(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Oue(t){return new n9(t)}function i9(t){this._context=t}i9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,o=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,o):this._context.moveTo(r,o);break;case 3:this._point=4;default:CC(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function kue(t){return new i9(t)}function o9(t){this._context=t}o9.prototype={areaStart:bC,areaEnd:bC,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Lue(t){return new o9(t)}function dF(t){return t<0?-1:1}function pF(t,e,r){var o=t._x1-t._x0,u=e-t._x1,f=(t._y1-t._y0)/(o||u<0&&-0),p=(r-t._y1)/(u||o<0&&-0),x=(f*u+p*o)/(o+u);return(dF(f)+dF(p))*Math.min(Math.abs(f),Math.abs(p),.5*Math.abs(x))||0}function mF(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function hE(t,e,r){var o=t._x0,u=t._y0,f=t._x1,p=t._y1,x=(f-o)/3;t._context.bezierCurveTo(o+x,u+x*e,f-x,p-x*r,f,p)}function wC(t){this._context=t}wC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:hE(this,this._t0,mF(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,hE(this,mF(this,r=pF(this,t,e)),r);break;default:hE(this,this._t0,r=pF(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function a9(t){this._context=new s9(t)}(a9.prototype=Object.create(wC.prototype)).point=function(t,e){wC.prototype.point.call(this,e,t)};function s9(t){this._context=t}s9.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,o,u,f){this._context.bezierCurveTo(e,t,o,r,f,u)}};function Rue(t){return new wC(t)}function zue(t){return new a9(t)}function l9(t){this._context=t}l9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var o=gF(t),u=gF(e),f=0,p=1;p<r;++f,++p)this._context.bezierCurveTo(o[0][f],u[0][f],o[1][f],u[1][f],t[p],e[p]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function gF(t){var e,r=t.length-1,o,u=new Array(r),f=new Array(r),p=new Array(r);for(u[0]=0,f[0]=2,p[0]=t[0]+2*t[1],e=1;e<r-1;++e)u[e]=1,f[e]=4,p[e]=4*t[e]+2*t[e+1];for(u[r-1]=2,f[r-1]=7,p[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)o=u[e]/f[e-1],f[e]-=o,p[e]-=o*p[e-1];for(u[r-1]=p[r-1]/f[r-1],e=r-2;e>=0;--e)u[e]=(p[e]-u[e+1])/f[e];for(f[r-1]=(t[r]+u[r-1])/2,e=0;e<r-1;++e)f[e]=2*t[e+1]-u[e+1];return[u,f]}function Nue(t){return new l9(t)}function nS(t,e){this._context=t,this._t=e}nS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function Fue(t){return new nS(t,.5)}function jue(t){return new nS(t,0)}function $ue(t){return new nS(t,1)}function Wg(t,e){if((p=t.length)>1)for(var r=1,o,u,f=t[e[0]],p,x=f.length;r<p;++r)for(u=f,f=t[e[r]],o=0;o<x;++o)f[o][1]+=f[o][0]=isNaN(u[o][1])?u[o][0]:u[o][1]}function kM(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function Uue(t,e){return t[e]}function Vue(t){const e=[];return e.key=t,e}function Gue(){var t=$i([]),e=kM,r=Wg,o=Uue;function u(f){var p=Array.from(t.apply(this,arguments),Vue),x,s=p.length,w=-1,I;for(const P of f)for(x=0,++w;x<s;++x)(p[x][w]=[0,+o(P,p[x].key,w,f)]).data=P;for(x=0,I=L3(e(p));x<s;++x)p[I[x]].index=x;return r(p,I),p}return u.keys=function(f){return arguments.length?(t=typeof f=="function"?f:$i(Array.from(f)),u):t},u.value=function(f){return arguments.length?(o=typeof f=="function"?f:$i(+f),u):o},u.order=function(f){return arguments.length?(e=f==null?kM:typeof f=="function"?f:$i(Array.from(f)),u):e},u.offset=function(f){return arguments.length?(r=f??Wg,u):r},u}function Hue(t,e){if((o=t.length)>0){for(var r,o,u=0,f=t[0].length,p;u<f;++u){for(p=r=0;r<o;++r)p+=t[r][u][1]||0;if(p)for(r=0;r<o;++r)t[r][u][1]/=p}Wg(t,e)}}function Wue(t,e){if((u=t.length)>0){for(var r=0,o=t[e[0]],u,f=o.length;r<f;++r){for(var p=0,x=0;p<u;++p)x+=t[p][r][1]||0;o[r][1]+=o[r][0]=-x/2}Wg(t,e)}}function Zue(t,e){if(!(!((p=t.length)>0)||!((f=(u=t[e[0]]).length)>0))){for(var r=0,o=1,u,f,p;o<f;++o){for(var x=0,s=0,w=0;x<p;++x){for(var I=t[e[x]],P=I[o][1]||0,N=I[o-1][1]||0,U=(P-N)/2,X=0;X<x;++X){var Q=t[e[X]],J=Q[o][1]||0,Z=Q[o-1][1]||0;U+=J-Z}s+=P,w+=U*P}u[o-1][1]+=u[o-1][0]=r,s&&(r-=w/s)}u[o-1][1]+=u[o-1][0]=r,Wg(t,e)}}function Sv(t){"@babel/helpers - typeof";return Sv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sv(t)}var que=["type","size","sizeType"];function LM(){return LM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},LM.apply(this,arguments)}function _F(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),r.push.apply(r,o)}return r}function yF(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_F(Object(r),!0).forEach(function(o){Kue(t,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_F(Object(r)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(r,o))})}return t}function Kue(t,e,r){return e=Xue(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Xue(t){var e=Yue(t,"string");return Sv(e)=="symbol"?e:String(e)}function Yue(t,e){if(Sv(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var o=r.call(t,e||"default");if(Sv(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Jue(t,e){if(t==null)return{};var r=Que(t,e),o,u;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(t);for(u=0;u<f.length;u++)o=f[u],!(e.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(t,o)&&(r[o]=t[o])}return r}function Que(t,e){if(t==null)return{};var r={},o=Object.keys(t),u,f;for(f=0;f<o.length;f++)u=o[f],!(e.indexOf(u)>=0)&&(r[u]=t[u]);return r}var u9={symbolCircle:R3,symbolCross:Bue,symbolDiamond:bue,symbolSquare:Cue,symbolStar:Aue,symbolTriangle:Eue,symbolWye:Pue},ece=Math.PI/180,tce=function(e){var r="symbol".concat(eS(e));return u9[r]||R3},rce=function(e,r,o){if(r==="area")return e;switch(o){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var u=18*ece;return 1.25*e*e*(Math.tan(u)-Math.tan(u*2)*Math.pow(Math.tan(u),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},nce=function(e,r){u9["symbol".concat(eS(e))]=r},iS=function(e){var r=e.type,o=r===void 0?"circle":r,u=e.size,f=u===void 0?64:u,p=e.sizeType,x=p===void 0?"area":p,s=Jue(e,que),w=yF(yF({},s),{},{type:o,size:f,sizeType:x}),I=function(){var J=tce(o),Z=Mue().type(J).size(rce(f,x,o));return Z()},P=w.className,N=w.cx,U=w.cy,X=An(w,!0);return N===+N&&U===+U&&f===+f?Ue.createElement("path",LM({},X,{className:Yn("recharts-symbols",P),transform:"translate(".concat(N,", ").concat(U,")"),d:I()})):null};iS.registerSymbol=nce;function Zg(t){"@babel/helpers - typeof";return Zg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zg(t)}function RM(){return RM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},RM.apply(this,arguments)}function vF(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),r.push.apply(r,o)}return r}function ice(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?vF(Object(r),!0).forEach(function(o){Tv(t,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vF(Object(r)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(r,o))})}return t}function oce(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function BF(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,h9(o.key),o)}}function ace(t,e,r){return e&&BF(t.prototype,e),r&&BF(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function sce(t,e,r){return e=SC(e),lce(t,c9()?Reflect.construct(e,r||[],SC(t).constructor):e.apply(t,r))}function lce(t,e){if(e&&(Zg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uce(t)}function uce(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(c9=function(){return!!t})()}function SC(t){return SC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},SC(t)}function cce(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zM(t,e)}function zM(t,e){return zM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,u){return o.__proto__=u,o},zM(t,e)}function Tv(t,e,r){return e=h9(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function h9(t){var e=hce(t,"string");return Zg(e)=="symbol"?e:String(e)}function hce(t,e){if(Zg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var o=r.call(t,e||"default");if(Zg(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ml=32,z3=function(t){cce(e,t);function e(){return oce(this,e),sce(this,e,arguments)}return ace(e,[{key:"renderIcon",value:function(o){var u=this.props.inactiveColor,f=Ml/2,p=Ml/6,x=Ml/3,s=o.inactive?u:o.color;if(o.type==="plainline")return Ue.createElement("line",{strokeWidth:4,fill:"none",stroke:s,strokeDasharray:o.payload.strokeDasharray,x1:0,y1:f,x2:Ml,y2:f,className:"recharts-legend-icon"});if(o.type==="line")return Ue.createElement("path",{strokeWidth:4,fill:"none",stroke:s,d:"M0,".concat(f,"h").concat(x,`
            A`).concat(p,",").concat(p,",0,1,1,").concat(2*x,",").concat(f,`
            H`).concat(Ml,"M").concat(2*x,",").concat(f,`
            A`).concat(p,",").concat(p,",0,1,1,").concat(x,",").concat(f),className:"recharts-legend-icon"});if(o.type==="rect")return Ue.createElement("path",{stroke:"none",fill:s,d:"M0,".concat(Ml/8,"h").concat(Ml,"v").concat(Ml*3/4,"h").concat(-Ml,"z"),className:"recharts-legend-icon"});if(Ue.isValidElement(o.legendIcon)){var w=ice({},o);return delete w.legendIcon,Ue.cloneElement(o.legendIcon,w)}return Ue.createElement(iS,{fill:s,cx:f,cy:f,size:Ml,sizeType:"diameter",type:o.type})}},{key:"renderItems",value:function(){var o=this,u=this.props,f=u.payload,p=u.iconSize,x=u.layout,s=u.formatter,w=u.inactiveColor,I={x:0,y:0,width:Ml,height:Ml},P={display:x==="horizontal"?"inline-block":"block",marginRight:10},N={display:"inline-block",verticalAlign:"middle",marginRight:4};return f.map(function(U,X){var Q=U.formatter||s,J=Yn(Tv(Tv({"recharts-legend-item":!0},"legend-item-".concat(X),!0),"inactive",U.inactive));if(U.type==="none")return null;var Z=Ln(U.value)?null:U.value;ph(!Ln(U.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var H=U.inactive?w:U.color;return Ue.createElement("li",RM({className:J,style:P,key:"legend-item-".concat(X)},wv(o.props,U,X)),Ue.createElement(AM,{width:p,height:p,viewBox:I,style:N},o.renderIcon(U)),Ue.createElement("span",{className:"recharts-legend-item-text",style:{color:H}},Q?Q(Z,U,X):Z))})}},{key:"render",value:function(){var o=this.props,u=o.payload,f=o.layout,p=o.align;if(!u||!u.length)return null;var x={padding:0,margin:0,textAlign:f==="horizontal"?p:"left"};return Ue.createElement("ul",{className:"recharts-default-legend",style:x},this.renderItems())}}]),e}(Te.PureComponent);Tv(z3,"displayName","Legend");Tv(z3,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var fce=$w;function dce(){this.__data__=new fce,this.size=0}var pce=dce;function mce(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var gce=mce;function _ce(t){return this.__data__.get(t)}var yce=_ce;function vce(t){return this.__data__.has(t)}var Bce=vce,xce=$w,bce=w3,Cce=S3,wce=200;function Sce(t,e){var r=this.__data__;if(r instanceof xce){var o=r.__data__;if(!bce||o.length<wce-1)return o.push([t,e]),this.size=++r.size,this;r=this.__data__=new Cce(o)}return r.set(t,e),this.size=r.size,this}var Tce=Sce,Ace=$w,Ece=pce,Dce=gce,Pce=yce,Mce=Bce,Ice=Tce;function A_(t){var e=this.__data__=new Ace(t);this.size=e.size}A_.prototype.clear=Ece;A_.prototype.delete=Dce;A_.prototype.get=Pce;A_.prototype.has=Mce;A_.prototype.set=Ice;var f9=A_,Oce="__lodash_hash_undefined__";function kce(t){return this.__data__.set(t,Oce),this}var Lce=kce;function Rce(t){return this.__data__.has(t)}var zce=Rce,Nce=S3,Fce=Lce,jce=zce;function TC(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new Nce;++e<r;)this.add(t[e])}TC.prototype.add=TC.prototype.push=Fce;TC.prototype.has=jce;var d9=TC;function $ce(t,e){for(var r=-1,o=t==null?0:t.length;++r<o;)if(e(t[r],r,t))return!0;return!1}var p9=$ce;function Uce(t,e){return t.has(e)}var m9=Uce,Vce=d9,Gce=p9,Hce=m9,Wce=1,Zce=2;function qce(t,e,r,o,u,f){var p=r&Wce,x=t.length,s=e.length;if(x!=s&&!(p&&s>x))return!1;var w=f.get(t),I=f.get(e);if(w&&I)return w==e&&I==t;var P=-1,N=!0,U=r&Zce?new Vce:void 0;for(f.set(t,e),f.set(e,t);++P<x;){var X=t[P],Q=e[P];if(o)var J=p?o(Q,X,P,e,t,f):o(X,Q,P,t,e,f);if(J!==void 0){if(J)continue;N=!1;break}if(U){if(!Gce(e,function(Z,H){if(!Hce(U,H)&&(X===Z||u(X,Z,r,o,f)))return U.push(H)})){N=!1;break}}else if(!(X===Q||u(X,Q,r,o,f))){N=!1;break}}return f.delete(t),f.delete(e),N}var g9=qce,Kce=wc,Xce=Kce.Uint8Array,Yce=Xce;function Jce(t){var e=-1,r=Array(t.size);return t.forEach(function(o,u){r[++e]=[u,o]}),r}var Qce=Jce;function ehe(t){var e=-1,r=Array(t.size);return t.forEach(function(o){r[++e]=o}),r}var N3=ehe,xF=TB,bF=Yce,the=C3,rhe=g9,nhe=Qce,ihe=N3,ohe=1,ahe=2,she="[object Boolean]",lhe="[object Date]",uhe="[object Error]",che="[object Map]",hhe="[object Number]",fhe="[object RegExp]",dhe="[object Set]",phe="[object String]",mhe="[object Symbol]",ghe="[object ArrayBuffer]",_he="[object DataView]",CF=xF?xF.prototype:void 0,fE=CF?CF.valueOf:void 0;function yhe(t,e,r,o,u,f,p){switch(r){case _he:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case ghe:return!(t.byteLength!=e.byteLength||!f(new bF(t),new bF(e)));case she:case lhe:case hhe:return the(+t,+e);case uhe:return t.name==e.name&&t.message==e.message;case fhe:case phe:return t==e+"";case che:var x=nhe;case dhe:var s=o&ohe;if(x||(x=ihe),t.size!=e.size&&!s)return!1;var w=p.get(t);if(w)return w==e;o|=ahe,p.set(t,e);var I=rhe(x(t),x(e),o,u,f,p);return p.delete(t),I;case mhe:if(fE)return fE.call(t)==fE.call(e)}return!1}var vhe=yhe;function Bhe(t,e){for(var r=-1,o=e.length,u=t.length;++r<o;)t[u+r]=e[r];return t}var _9=Bhe,xhe=_9,bhe=Ds;function Che(t,e,r){var o=e(t);return bhe(t)?o:xhe(o,r(t))}var whe=Che;function She(t,e){for(var r=-1,o=t==null?0:t.length,u=0,f=[];++r<o;){var p=t[r];e(p,r,t)&&(f[u++]=p)}return f}var The=She;function Ahe(){return[]}var Ehe=Ahe,Dhe=The,Phe=Ehe,Mhe=Object.prototype,Ihe=Mhe.propertyIsEnumerable,wF=Object.getOwnPropertySymbols,Ohe=wF?function(t){return t==null?[]:(t=Object(t),Dhe(wF(t),function(e){return Ihe.call(t,e)}))}:Phe,khe=Ohe;function Lhe(t,e){for(var r=-1,o=Array(t);++r<t;)o[r]=e(r);return o}var Rhe=Lhe,zhe=Ah,Nhe=Eh,Fhe="[object Arguments]";function jhe(t){return Nhe(t)&&zhe(t)==Fhe}var $he=jhe,SF=$he,Uhe=Eh,y9=Object.prototype,Vhe=y9.hasOwnProperty,Ghe=y9.propertyIsEnumerable,Hhe=SF(function(){return arguments}())?SF:function(t){return Uhe(t)&&Vhe.call(t,"callee")&&!Ghe.call(t,"callee")},F3=Hhe,AC={exports:{}};function Whe(){return!1}var Zhe=Whe;AC.exports;(function(t,e){var r=wc,o=Zhe,u=e&&!e.nodeType&&e,f=u&&!0&&t&&!t.nodeType&&t,p=f&&f.exports===u,x=p?r.Buffer:void 0,s=x?x.isBuffer:void 0,w=s||o;t.exports=w})(AC,AC.exports);var v9=AC.exports,qhe=9007199254740991,Khe=/^(?:0|[1-9]\d*)$/;function Xhe(t,e){var r=typeof t;return e=e??qhe,!!e&&(r=="number"||r!="symbol"&&Khe.test(t))&&t>-1&&t%1==0&&t<e}var j3=Xhe,Yhe=9007199254740991;function Jhe(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Yhe}var $3=Jhe,Qhe=Ah,efe=$3,tfe=Eh,rfe="[object Arguments]",nfe="[object Array]",ife="[object Boolean]",ofe="[object Date]",afe="[object Error]",sfe="[object Function]",lfe="[object Map]",ufe="[object Number]",cfe="[object Object]",hfe="[object RegExp]",ffe="[object Set]",dfe="[object String]",pfe="[object WeakMap]",mfe="[object ArrayBuffer]",gfe="[object DataView]",_fe="[object Float32Array]",yfe="[object Float64Array]",vfe="[object Int8Array]",Bfe="[object Int16Array]",xfe="[object Int32Array]",bfe="[object Uint8Array]",Cfe="[object Uint8ClampedArray]",wfe="[object Uint16Array]",Sfe="[object Uint32Array]",Ki={};Ki[_fe]=Ki[yfe]=Ki[vfe]=Ki[Bfe]=Ki[xfe]=Ki[bfe]=Ki[Cfe]=Ki[wfe]=Ki[Sfe]=!0;Ki[rfe]=Ki[nfe]=Ki[mfe]=Ki[ife]=Ki[gfe]=Ki[ofe]=Ki[afe]=Ki[sfe]=Ki[lfe]=Ki[ufe]=Ki[cfe]=Ki[hfe]=Ki[ffe]=Ki[dfe]=Ki[pfe]=!1;function Tfe(t){return tfe(t)&&efe(t.length)&&!!Ki[Qhe(t)]}var Afe=Tfe;function Efe(t){return function(e){return t(e)}}var B9=Efe,EC={exports:{}};EC.exports;(function(t,e){var r=AG,o=e&&!e.nodeType&&e,u=o&&!0&&t&&!t.nodeType&&t,f=u&&u.exports===o,p=f&&r.process,x=function(){try{var s=u&&u.require&&u.require("util").types;return s||p&&p.binding&&p.binding("util")}catch{}}();t.exports=x})(EC,EC.exports);var Dfe=EC.exports,Pfe=Afe,Mfe=B9,TF=Dfe,AF=TF&&TF.isTypedArray,Ife=AF?Mfe(AF):Pfe,x9=Ife,Ofe=Rhe,kfe=F3,Lfe=Ds,Rfe=v9,zfe=j3,Nfe=x9,Ffe=Object.prototype,jfe=Ffe.hasOwnProperty;function $fe(t,e){var r=Lfe(t),o=!r&&kfe(t),u=!r&&!o&&Rfe(t),f=!r&&!o&&!u&&Nfe(t),p=r||o||u||f,x=p?Ofe(t.length,String):[],s=x.length;for(var w in t)(e||jfe.call(t,w))&&!(p&&(w=="length"||u&&(w=="offset"||w=="parent")||f&&(w=="buffer"||w=="byteLength"||w=="byteOffset")||zfe(w,s)))&&x.push(w);return x}var Ufe=$fe,Vfe=Object.prototype;function Gfe(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||Vfe;return t===r}var Hfe=Gfe;function Wfe(t,e){return function(r){return t(e(r))}}var b9=Wfe,Zfe=b9,qfe=Zfe(Object.keys,Object),Kfe=qfe,Xfe=Hfe,Yfe=Kfe,Jfe=Object.prototype,Qfe=Jfe.hasOwnProperty;function ede(t){if(!Xfe(t))return Yfe(t);var e=[];for(var r in Object(t))Qfe.call(t,r)&&r!="constructor"&&e.push(r);return e}var tde=ede,rde=b3,nde=$3;function ide(t){return t!=null&&nde(t.length)&&!rde(t)}var EB=ide,ode=Ufe,ade=tde,sde=EB;function lde(t){return sde(t)?ode(t):ade(t)}var oS=lde,ude=whe,cde=khe,hde=oS;function fde(t){return ude(t,hde,cde)}var dde=fde,EF=dde,pde=1,mde=Object.prototype,gde=mde.hasOwnProperty;function _de(t,e,r,o,u,f){var p=r&pde,x=EF(t),s=x.length,w=EF(e),I=w.length;if(s!=I&&!p)return!1;for(var P=s;P--;){var N=x[P];if(!(p?N in e:gde.call(e,N)))return!1}var U=f.get(t),X=f.get(e);if(U&&X)return U==e&&X==t;var Q=!0;f.set(t,e),f.set(e,t);for(var J=p;++P<s;){N=x[P];var Z=t[N],H=e[N];if(o)var K=p?o(H,Z,N,e,t,f):o(Z,H,N,t,e,f);if(!(K===void 0?Z===H||u(Z,H,r,o,f):K)){Q=!1;break}J||(J=N=="constructor")}if(Q&&!J){var ee=t.constructor,se=e.constructor;ee!=se&&"constructor"in t&&"constructor"in e&&!(typeof ee=="function"&&ee instanceof ee&&typeof se=="function"&&se instanceof se)&&(Q=!1)}return f.delete(t),f.delete(e),Q}var yde=_de,vde=Kp,Bde=wc,xde=vde(Bde,"DataView"),bde=xde,Cde=Kp,wde=wc,Sde=Cde(wde,"Promise"),Tde=Sde,Ade=Kp,Ede=wc,Dde=Ade(Ede,"Set"),C9=Dde,Pde=Kp,Mde=wc,Ide=Pde(Mde,"WeakMap"),Ode=Ide,NM=bde,FM=w3,jM=Tde,$M=C9,UM=Ode,w9=Ah,E_=DG,DF="[object Map]",kde="[object Object]",PF="[object Promise]",MF="[object Set]",IF="[object WeakMap]",OF="[object DataView]",Lde=E_(NM),Rde=E_(FM),zde=E_(jM),Nde=E_($M),Fde=E_(UM),pp=w9;(NM&&pp(new NM(new ArrayBuffer(1)))!=OF||FM&&pp(new FM)!=DF||jM&&pp(jM.resolve())!=PF||$M&&pp(new $M)!=MF||UM&&pp(new UM)!=IF)&&(pp=function(t){var e=w9(t),r=e==kde?t.constructor:void 0,o=r?E_(r):"";if(o)switch(o){case Lde:return OF;case Rde:return DF;case zde:return PF;case Nde:return MF;case Fde:return IF}return e});var jde=pp,dE=f9,$de=g9,Ude=vhe,Vde=yde,kF=jde,LF=Ds,RF=v9,Gde=x9,Hde=1,zF="[object Arguments]",NF="[object Array]",Gx="[object Object]",Wde=Object.prototype,FF=Wde.hasOwnProperty;function Zde(t,e,r,o,u,f){var p=LF(t),x=LF(e),s=p?NF:kF(t),w=x?NF:kF(e);s=s==zF?Gx:s,w=w==zF?Gx:w;var I=s==Gx,P=w==Gx,N=s==w;if(N&&RF(t)){if(!RF(e))return!1;p=!0,I=!1}if(N&&!I)return f||(f=new dE),p||Gde(t)?$de(t,e,r,o,u,f):Ude(t,e,s,r,o,u,f);if(!(r&Hde)){var U=I&&FF.call(t,"__wrapped__"),X=P&&FF.call(e,"__wrapped__");if(U||X){var Q=U?t.value():t,J=X?e.value():e;return f||(f=new dE),u(Q,J,r,o,f)}}return N?(f||(f=new dE),Vde(t,e,r,o,u,f)):!1}var qde=Zde,Kde=qde,jF=Eh;function S9(t,e,r,o,u){return t===e?!0:t==null||e==null||!jF(t)&&!jF(e)?t!==t&&e!==e:Kde(t,e,r,o,S9,u)}var U3=S9,Xde=f9,Yde=U3,Jde=1,Qde=2;function epe(t,e,r,o){var u=r.length,f=u,p=!o;if(t==null)return!f;for(t=Object(t);u--;){var x=r[u];if(p&&x[2]?x[1]!==t[x[0]]:!(x[0]in t))return!1}for(;++u<f;){x=r[u];var s=x[0],w=t[s],I=x[1];if(p&&x[2]){if(w===void 0&&!(s in t))return!1}else{var P=new Xde;if(o)var N=o(w,I,s,t,e,P);if(!(N===void 0?Yde(I,w,Jde|Qde,o,P):N))return!1}}return!0}var tpe=epe,rpe=id;function npe(t){return t===t&&!rpe(t)}var T9=npe,ipe=T9,ope=oS;function ape(t){for(var e=ope(t),r=e.length;r--;){var o=e[r],u=t[o];e[r]=[o,u,ipe(u)]}return e}var spe=ape;function lpe(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var A9=lpe,upe=tpe,cpe=spe,hpe=A9;function fpe(t){var e=cpe(t);return e.length==1&&e[0][2]?hpe(e[0][0],e[0][1]):function(r){return r===t||upe(r,t,e)}}var dpe=fpe;function ppe(t,e){return t!=null&&e in Object(t)}var mpe=ppe,gpe=kG,_pe=F3,ype=Ds,vpe=j3,Bpe=$3,xpe=Vw;function bpe(t,e,r){e=gpe(e,t);for(var o=-1,u=e.length,f=!1;++o<u;){var p=xpe(e[o]);if(!(f=t!=null&&r(t,p)))break;t=t[p]}return f||++o!=u?f:(u=t==null?0:t.length,!!u&&Bpe(u)&&vpe(p,u)&&(ype(t)||_pe(t)))}var Cpe=bpe,wpe=mpe,Spe=Cpe;function Tpe(t,e){return t!=null&&Spe(t,e,wpe)}var Ape=Tpe,Epe=U3,Dpe=LG,Ppe=Ape,Mpe=x3,Ipe=T9,Ope=A9,kpe=Vw,Lpe=1,Rpe=2;function zpe(t,e){return Mpe(t)&&Ipe(e)?Ope(kpe(t),e):function(r){var o=Dpe(r,t);return o===void 0&&o===e?Ppe(r,t):Epe(e,o,Lpe|Rpe)}}var Npe=zpe;function Fpe(t){return t}var D_=Fpe;function jpe(t){return function(e){return e==null?void 0:e[t]}}var $pe=jpe,Upe=E3;function Vpe(t){return function(e){return Upe(e,t)}}var Gpe=Vpe,Hpe=$pe,Wpe=Gpe,Zpe=x3,qpe=Vw;function Kpe(t){return Zpe(t)?Hpe(qpe(t)):Wpe(t)}var Xpe=Kpe,Ype=dpe,Jpe=Npe,Qpe=D_,eme=Ds,tme=Xpe;function rme(t){return typeof t=="function"?t:t==null?Qpe:typeof t=="object"?eme(t)?Jpe(t[0],t[1]):Ype(t):tme(t)}var od=rme;function nme(t,e,r,o){for(var u=t.length,f=r+(o?1:-1);o?f--:++f<u;)if(e(t[f],f,t))return f;return-1}var E9=nme;function ime(t){return t!==t}var ome=ime;function ame(t,e,r){for(var o=r-1,u=t.length;++o<u;)if(t[o]===e)return o;return-1}var sme=ame,lme=E9,ume=ome,cme=sme;function hme(t,e,r){return e===e?cme(t,e,r):lme(t,ume,r)}var fme=hme,dme=fme;function pme(t,e){var r=t==null?0:t.length;return!!r&&dme(t,e,0)>-1}var mme=pme;function gme(t,e,r){for(var o=-1,u=t==null?0:t.length;++o<u;)if(r(e,t[o]))return!0;return!1}var _me=gme;function yme(){}var vme=yme,pE=C9,Bme=vme,xme=N3,bme=1/0,Cme=pE&&1/xme(new pE([,-0]))[1]==bme?function(t){return new pE(t)}:Bme,wme=Cme,Sme=d9,Tme=mme,Ame=_me,Eme=m9,Dme=wme,Pme=N3,Mme=200;function Ime(t,e,r){var o=-1,u=Tme,f=t.length,p=!0,x=[],s=x;if(r)p=!1,u=Ame;else if(f>=Mme){var w=e?null:Dme(t);if(w)return Pme(w);p=!1,u=Eme,s=new Sme}else s=e?[]:x;e:for(;++o<f;){var I=t[o],P=e?e(I):I;if(I=r||I!==0?I:0,p&&P===P){for(var N=s.length;N--;)if(s[N]===P)continue e;e&&s.push(P),x.push(I)}else u(s,P,r)||(s!==x&&s.push(P),x.push(I))}return x}var Ome=Ime,kme=od,Lme=Ome;function Rme(t,e){return t&&t.length?Lme(t,kme(e)):[]}var zme=Rme;const $F=wi(zme);function D9(t,e,r){return e===!0?$F(t,r):Ln(e)?$F(t,e):t}function qg(t){"@babel/helpers - typeof";return qg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qg(t)}var Nme=["ref"];function UF(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),r.push.apply(r,o)}return r}function cp(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?UF(Object(r),!0).forEach(function(o){aS(t,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):UF(Object(r)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(r,o))})}return t}function Fme(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function VF(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,I9(o.key),o)}}function jme(t,e,r){return e&&VF(t.prototype,e),r&&VF(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function $me(t,e,r){return e=DC(e),Ume(t,P9()?Reflect.construct(e,r||[],DC(t).constructor):e.apply(t,r))}function Ume(t,e){if(e&&(qg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return M9(t)}function P9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(P9=function(){return!!t})()}function DC(t){return DC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},DC(t)}function M9(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Vme(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&VM(t,e)}function VM(t,e){return VM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,u){return o.__proto__=u,o},VM(t,e)}function aS(t,e,r){return e=I9(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function I9(t){var e=Gme(t,"string");return qg(e)=="symbol"?e:String(e)}function Gme(t,e){if(qg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var o=r.call(t,e||"default");if(qg(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Hme(t,e){if(t==null)return{};var r=Wme(t,e),o,u;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(t);for(u=0;u<f.length;u++)o=f[u],!(e.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(t,o)&&(r[o]=t[o])}return r}function Wme(t,e){if(t==null)return{};var r={},o=Object.keys(t),u,f;for(f=0;f<o.length;f++)u=o[f],!(e.indexOf(u)>=0)&&(r[u]=t[u]);return r}function Zme(t){return t.value}function qme(t,e){if(Ue.isValidElement(t))return Ue.cloneElement(t,e);if(typeof t=="function")return Ue.createElement(t,e);e.ref;var r=Hme(e,Nme);return Ue.createElement(z3,r)}var GF=1,Kg=function(t){Vme(e,t);function e(){var r;Fme(this,e);for(var o=arguments.length,u=new Array(o),f=0;f<o;f++)u[f]=arguments[f];return r=$me(this,e,[].concat(u)),aS(M9(r),"lastBoundingBox",{width:-1,height:-1}),r}return jme(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var o=this.wrapperNode.getBoundingClientRect();return o.height=this.wrapperNode.offsetHeight,o.width=this.wrapperNode.offsetWidth,o}return null}},{key:"updateBBox",value:function(){var o=this.props.onBBoxUpdate,u=this.getBBox();u?(Math.abs(u.width-this.lastBoundingBox.width)>GF||Math.abs(u.height-this.lastBoundingBox.height)>GF)&&(this.lastBoundingBox.width=u.width,this.lastBoundingBox.height=u.height,o&&o(u)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,o&&o(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?cp({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(o){var u=this.props,f=u.layout,p=u.align,x=u.verticalAlign,s=u.margin,w=u.chartWidth,I=u.chartHeight,P,N;if(!o||(o.left===void 0||o.left===null)&&(o.right===void 0||o.right===null))if(p==="center"&&f==="vertical"){var U=this.getBBoxSnapshot();P={left:((w||0)-U.width)/2}}else P=p==="right"?{right:s&&s.right||0}:{left:s&&s.left||0};if(!o||(o.top===void 0||o.top===null)&&(o.bottom===void 0||o.bottom===null))if(x==="middle"){var X=this.getBBoxSnapshot();N={top:((I||0)-X.height)/2}}else N=x==="bottom"?{bottom:s&&s.bottom||0}:{top:s&&s.top||0};return cp(cp({},P),N)}},{key:"render",value:function(){var o=this,u=this.props,f=u.content,p=u.width,x=u.height,s=u.wrapperStyle,w=u.payloadUniqBy,I=u.payload,P=cp(cp({position:"absolute",width:p||"auto",height:x||"auto"},this.getDefaultPosition(s)),s);return Ue.createElement("div",{className:"recharts-legend-wrapper",style:P,ref:function(U){o.wrapperNode=U}},qme(f,cp(cp({},this.props),{},{payload:D9(I,w,Zme)})))}}],[{key:"getWithHeight",value:function(o,u){var f=o.props.layout;return f==="vertical"&&lr(o.props.height)?{height:o.props.height}:f==="horizontal"?{width:o.props.width||u}:null}}]),e}(Te.PureComponent);aS(Kg,"displayName","Legend");aS(Kg,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var HF=TB,Kme=F3,Xme=Ds,WF=HF?HF.isConcatSpreadable:void 0;function Yme(t){return Xme(t)||Kme(t)||!!(WF&&t&&t[WF])}var Jme=Yme,Qme=_9,ege=Jme;function O9(t,e,r,o,u){var f=-1,p=t.length;for(r||(r=ege),u||(u=[]);++f<p;){var x=t[f];e>0&&r(x)?e>1?O9(x,e-1,r,o,u):Qme(u,x):o||(u[u.length]=x)}return u}var k9=O9;function tge(t){return function(e,r,o){for(var u=-1,f=Object(e),p=o(e),x=p.length;x--;){var s=p[t?x:++u];if(r(f[s],s,f)===!1)break}return e}}var rge=tge,nge=rge,ige=nge(),oge=ige,age=oge,sge=oS;function lge(t,e){return t&&age(t,e,sge)}var L9=lge,uge=EB;function cge(t,e){return function(r,o){if(r==null)return r;if(!uge(r))return t(r,o);for(var u=r.length,f=e?u:-1,p=Object(r);(e?f--:++f<u)&&o(p[f],f,p)!==!1;);return r}}var hge=cge,fge=L9,dge=hge,pge=dge(fge),V3=pge,mge=V3,gge=EB;function _ge(t,e){var r=-1,o=gge(t)?Array(t.length):[];return mge(t,function(u,f,p){o[++r]=e(u,f,p)}),o}var R9=_ge;function yge(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}var vge=yge,ZF=x_;function Bge(t,e){if(t!==e){var r=t!==void 0,o=t===null,u=t===t,f=ZF(t),p=e!==void 0,x=e===null,s=e===e,w=ZF(e);if(!x&&!w&&!f&&t>e||f&&p&&s&&!x&&!w||o&&p&&s||!r&&s||!u)return 1;if(!o&&!f&&!w&&t<e||w&&r&&u&&!o&&!f||x&&r&&u||!p&&u||!s)return-1}return 0}var xge=Bge,bge=xge;function Cge(t,e,r){for(var o=-1,u=t.criteria,f=e.criteria,p=u.length,x=r.length;++o<p;){var s=bge(u[o],f[o]);if(s){if(o>=x)return s;var w=r[o];return s*(w=="desc"?-1:1)}}return t.index-e.index}var wge=Cge,mE=A3,Sge=E3,Tge=od,Age=R9,Ege=vge,Dge=B9,Pge=wge,Mge=D_,Ige=Ds;function Oge(t,e,r){e.length?e=mE(e,function(f){return Ige(f)?function(p){return Sge(p,f.length===1?f[0]:f)}:f}):e=[Mge];var o=-1;e=mE(e,Dge(Tge));var u=Age(t,function(f,p,x){var s=mE(e,function(w){return w(f)});return{criteria:s,index:++o,value:f}});return Ege(u,function(f,p){return Pge(f,p,r)})}var kge=Oge;function Lge(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var Rge=Lge,zge=Rge,qF=Math.max;function Nge(t,e,r){return e=qF(e===void 0?t.length-1:e,0),function(){for(var o=arguments,u=-1,f=qF(o.length-e,0),p=Array(f);++u<f;)p[u]=o[e+u];u=-1;for(var x=Array(e+1);++u<e;)x[u]=o[u];return x[e]=r(p),zge(t,this,x)}}var Fge=Nge;function jge(t){return function(){return t}}var $ge=jge,Uge=Kp,Vge=function(){try{var t=Uge(Object,"defineProperty");return t({},"",{}),t}catch{}}(),z9=Vge,Gge=$ge,KF=z9,Hge=D_,Wge=KF?function(t,e){return KF(t,"toString",{configurable:!0,enumerable:!1,value:Gge(e),writable:!0})}:Hge,Zge=Wge,qge=800,Kge=16,Xge=Date.now;function Yge(t){var e=0,r=0;return function(){var o=Xge(),u=Kge-(o-r);if(r=o,u>0){if(++e>=qge)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var Jge=Yge,Qge=Zge,e_e=Jge,t_e=e_e(Qge),r_e=t_e,n_e=D_,i_e=Fge,o_e=r_e;function a_e(t,e){return o_e(i_e(t,e,n_e),t+"")}var s_e=a_e,l_e=C3,u_e=EB,c_e=j3,h_e=id;function f_e(t,e,r){if(!h_e(r))return!1;var o=typeof e;return(o=="number"?u_e(r)&&c_e(e,r.length):o=="string"&&e in r)?l_e(r[e],t):!1}var sS=f_e,d_e=k9,p_e=kge,m_e=s_e,XF=sS,g_e=m_e(function(t,e){if(t==null)return[];var r=e.length;return r>1&&XF(t,e[0],e[1])?e=[]:r>2&&XF(e[0],e[1],e[2])&&(e=[e[0]]),p_e(t,d_e(e,1),[])}),__e=g_e;const G3=wi(__e);function Av(t){"@babel/helpers - typeof";return Av=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Av(t)}function GM(){return GM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},GM.apply(this,arguments)}function y_e(t,e){return b_e(t)||x_e(t,e)||B_e(t,e)||v_e()}function v_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function B_e(t,e){if(t){if(typeof t=="string")return YF(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return YF(t,e)}}function YF(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,o=new Array(e);r<e;r++)o[r]=t[r];return o}function x_e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var o,u,f,p,x=[],s=!0,w=!1;try{if(f=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;s=!1}else for(;!(s=(o=f.call(r)).done)&&(x.push(o.value),x.length!==e);s=!0);}catch(I){w=!0,u=I}finally{try{if(!s&&r.return!=null&&(p=r.return(),Object(p)!==p))return}finally{if(w)throw u}}return x}}function b_e(t){if(Array.isArray(t))return t}function JF(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),r.push.apply(r,o)}return r}function gE(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?JF(Object(r),!0).forEach(function(o){C_e(t,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):JF(Object(r)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(r,o))})}return t}function C_e(t,e,r){return e=w_e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function w_e(t){var e=S_e(t,"string");return Av(e)=="symbol"?e:String(e)}function S_e(t,e){if(Av(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var o=r.call(t,e||"default");if(Av(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function T_e(t){return Array.isArray(t)&&Zo(t[0])&&Zo(t[1])?t.join(" ~ "):t}var A_e=function(e){var r=e.separator,o=r===void 0?" : ":r,u=e.contentStyle,f=u===void 0?{}:u,p=e.itemStyle,x=p===void 0?{}:p,s=e.labelStyle,w=s===void 0?{}:s,I=e.payload,P=e.formatter,N=e.itemSorter,U=e.wrapperClassName,X=e.labelClassName,Q=e.label,J=e.labelFormatter,Z=e.accessibilityLayer,H=Z===void 0?!1:Z,K=function(){if(I&&I.length){var Oe={padding:0,margin:0},ct=(N?G3(I,N):I).map(function(ht,We){if(ht.type==="none")return null;var Je=gE({display:"block",paddingTop:4,paddingBottom:4,color:ht.color||"#000"},x),St=ht.formatter||P||T_e,Le=ht.value,Nt=ht.name,xt=Le,$t=Nt;if(St&&xt!=null&&$t!=null){var Wt=St(Le,Nt,ht,We,I);if(Array.isArray(Wt)){var Tr=y_e(Wt,2);xt=Tr[0],$t=Tr[1]}else xt=Wt}return Ue.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(We),style:Je},Zo($t)?Ue.createElement("span",{className:"recharts-tooltip-item-name"},$t):null,Zo($t)?Ue.createElement("span",{className:"recharts-tooltip-item-separator"},o):null,Ue.createElement("span",{className:"recharts-tooltip-item-value"},xt),Ue.createElement("span",{className:"recharts-tooltip-item-unit"},ht.unit||""))});return Ue.createElement("ul",{className:"recharts-tooltip-item-list",style:Oe},ct)}return null},ee=gE({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},f),se=gE({margin:0},w),me=!En(Q),Ce=me?Q:"",Ae=Yn("recharts-default-tooltip",U),De=Yn("recharts-tooltip-label",X);me&&J&&I!==void 0&&I!==null&&(Ce=J(Q,I));var qe=H?{role:"status","aria-live":"assertive"}:{};return Ue.createElement("div",GM({className:Ae,style:ee},qe),Ue.createElement("p",{className:De,style:se},Ue.isValidElement(Ce)?Ce:"".concat(Ce)),K())};function Ev(t){"@babel/helpers - typeof";return Ev=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ev(t)}function Hx(t,e,r){return e=E_e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function E_e(t){var e=D_e(t,"string");return Ev(e)=="symbol"?e:String(e)}function D_e(t,e){if(Ev(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var o=r.call(t,e||"default");if(Ev(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var d0="recharts-tooltip-wrapper",P_e={visibility:"hidden"};function M_e(t){var e=t.coordinate,r=t.translateX,o=t.translateY;return Yn(d0,Hx(Hx(Hx(Hx({},"".concat(d0,"-right"),lr(r)&&e&&lr(e.x)&&r>=e.x),"".concat(d0,"-left"),lr(r)&&e&&lr(e.x)&&r<e.x),"".concat(d0,"-bottom"),lr(o)&&e&&lr(e.y)&&o>=e.y),"".concat(d0,"-top"),lr(o)&&e&&lr(e.y)&&o<e.y))}function QF(t){var e=t.allowEscapeViewBox,r=t.coordinate,o=t.key,u=t.offsetTopLeft,f=t.position,p=t.reverseDirection,x=t.tooltipDimension,s=t.viewBox,w=t.viewBoxDimension;if(f&&lr(f[o]))return f[o];var I=r[o]-x-u,P=r[o]+u;if(e[o])return p[o]?I:P;if(p[o]){var N=I,U=s[o];return N<U?Math.max(P,s[o]):Math.max(I,s[o])}var X=P+x,Q=s[o]+w;return X>Q?Math.max(I,s[o]):Math.max(P,s[o])}function I_e(t){var e=t.translateX,r=t.translateY,o=t.useTranslate3d;return{transform:o?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function O_e(t){var e=t.allowEscapeViewBox,r=t.coordinate,o=t.offsetTopLeft,u=t.position,f=t.reverseDirection,p=t.tooltipBox,x=t.useTranslate3d,s=t.viewBox,w,I,P;return p.height>0&&p.width>0&&r?(I=QF({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:o,position:u,reverseDirection:f,tooltipDimension:p.width,viewBox:s,viewBoxDimension:s.width}),P=QF({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:o,position:u,reverseDirection:f,tooltipDimension:p.height,viewBox:s,viewBoxDimension:s.height}),w=I_e({translateX:I,translateY:P,useTranslate3d:x})):w=P_e,{cssProperties:w,cssClasses:M_e({translateX:I,translateY:P,coordinate:r})}}function Xg(t){"@babel/helpers - typeof";return Xg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xg(t)}function e6(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),r.push.apply(r,o)}return r}function t6(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?e6(Object(r),!0).forEach(function(o){ZM(t,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e6(Object(r)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(r,o))})}return t}function k_e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r6(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,F9(o.key),o)}}function L_e(t,e,r){return e&&r6(t.prototype,e),r&&r6(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function R_e(t,e,r){return e=PC(e),z_e(t,N9()?Reflect.construct(e,r||[],PC(t).constructor):e.apply(t,r))}function z_e(t,e){if(e&&(Xg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return HM(t)}function N9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(N9=function(){return!!t})()}function PC(t){return PC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},PC(t)}function HM(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function N_e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&WM(t,e)}function WM(t,e){return WM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,u){return o.__proto__=u,o},WM(t,e)}function ZM(t,e,r){return e=F9(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function F9(t){var e=F_e(t,"string");return Xg(e)=="symbol"?e:String(e)}function F_e(t,e){if(Xg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var o=r.call(t,e||"default");if(Xg(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var n6=1,j_e=function(t){N_e(e,t);function e(){var r;k_e(this,e);for(var o=arguments.length,u=new Array(o),f=0;f<o;f++)u[f]=arguments[f];return r=R_e(this,e,[].concat(u)),ZM(HM(r),"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),ZM(HM(r),"handleKeyDown",function(p){if(p.key==="Escape"){var x,s,w,I;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(x=(s=r.props.coordinate)===null||s===void 0?void 0:s.x)!==null&&x!==void 0?x:0,y:(w=(I=r.props.coordinate)===null||I===void 0?void 0:I.y)!==null&&w!==void 0?w:0}})}}),r}return L_e(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var o=this.wrapperNode.getBoundingClientRect();(Math.abs(o.width-this.state.lastBoundingBox.width)>n6||Math.abs(o.height-this.state.lastBoundingBox.height)>n6)&&this.setState({lastBoundingBox:{width:o.width,height:o.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var o,u;this.props.active&&this.updateBBox(),this.state.dismissed&&(((o=this.props.coordinate)===null||o===void 0?void 0:o.x)!==this.state.dismissedAtCoordinate.x||((u=this.props.coordinate)===null||u===void 0?void 0:u.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var o=this,u=this.props,f=u.active,p=u.allowEscapeViewBox,x=u.animationDuration,s=u.animationEasing,w=u.children,I=u.coordinate,P=u.hasPayload,N=u.isAnimationActive,U=u.offset,X=u.position,Q=u.reverseDirection,J=u.useTranslate3d,Z=u.viewBox,H=u.wrapperStyle,K=O_e({allowEscapeViewBox:p,coordinate:I,offsetTopLeft:U,position:X,reverseDirection:Q,tooltipBox:this.state.lastBoundingBox,useTranslate3d:J,viewBox:Z}),ee=K.cssClasses,se=K.cssProperties,me=t6(t6({transition:N&&f?"transform ".concat(x,"ms ").concat(s):void 0},se),{},{pointerEvents:"none",visibility:!this.state.dismissed&&f&&P?"visible":"hidden",position:"absolute",top:0,left:0},H);return Ue.createElement("div",{tabIndex:-1,className:ee,style:me,ref:function(Ae){o.wrapperNode=Ae}},w)}}]),e}(Te.PureComponent),$_e=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Du={isSsr:$_e(),get:function(e){return Du[e]},set:function(e,r){if(typeof e=="string")Du[e]=r;else{var o=Object.keys(e);o&&o.length&&o.forEach(function(u){Du[u]=e[u]})}}};function Yg(t){"@babel/helpers - typeof";return Yg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yg(t)}function i6(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),r.push.apply(r,o)}return r}function o6(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?i6(Object(r),!0).forEach(function(o){H3(t,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i6(Object(r)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(r,o))})}return t}function U_e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a6(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,$9(o.key),o)}}function V_e(t,e,r){return e&&a6(t.prototype,e),r&&a6(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function G_e(t,e,r){return e=MC(e),H_e(t,j9()?Reflect.construct(e,r||[],MC(t).constructor):e.apply(t,r))}function H_e(t,e){if(e&&(Yg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return W_e(t)}function W_e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function j9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(j9=function(){return!!t})()}function MC(t){return MC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},MC(t)}function Z_e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qM(t,e)}function qM(t,e){return qM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,u){return o.__proto__=u,o},qM(t,e)}function H3(t,e,r){return e=$9(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $9(t){var e=q_e(t,"string");return Yg(e)=="symbol"?e:String(e)}function q_e(t,e){if(Yg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var o=r.call(t,e||"default");if(Yg(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function K_e(t){return t.dataKey}function X_e(t,e){return Ue.isValidElement(t)?Ue.cloneElement(t,e):typeof t=="function"?Ue.createElement(t,e):Ue.createElement(A_e,e)}var dc=function(t){Z_e(e,t);function e(){return U_e(this,e),G_e(this,e,arguments)}return V_e(e,[{key:"render",value:function(){var o=this,u=this.props,f=u.active,p=u.allowEscapeViewBox,x=u.animationDuration,s=u.animationEasing,w=u.content,I=u.coordinate,P=u.filterNull,N=u.isAnimationActive,U=u.offset,X=u.payload,Q=u.payloadUniqBy,J=u.position,Z=u.reverseDirection,H=u.useTranslate3d,K=u.viewBox,ee=u.wrapperStyle,se=X??[];P&&se.length&&(se=D9(X.filter(function(Ce){return Ce.value!=null&&(Ce.hide!==!0||o.props.includeHidden)}),Q,K_e));var me=se.length>0;return Ue.createElement(j_e,{allowEscapeViewBox:p,animationDuration:x,animationEasing:s,isAnimationActive:N,active:f,coordinate:I,hasPayload:me,offset:U,position:J,reverseDirection:Z,useTranslate3d:H,viewBox:K,wrapperStyle:ee},X_e(w,o6(o6({},this.props),{},{payload:se})))}}]),e}(Te.PureComponent);H3(dc,"displayName","Tooltip");H3(dc,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Du.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Y_e=wc,J_e=function(){return Y_e.Date.now()},Q_e=J_e,eye=/\s/;function tye(t){for(var e=t.length;e--&&eye.test(t.charAt(e)););return e}var rye=tye,nye=rye,iye=/^\s+/;function oye(t){return t&&t.slice(0,nye(t)+1).replace(iye,"")}var aye=oye,sye=aye,s6=id,lye=x_,l6=NaN,uye=/^[-+]0x[0-9a-f]+$/i,cye=/^0b[01]+$/i,hye=/^0o[0-7]+$/i,fye=parseInt;function dye(t){if(typeof t=="number")return t;if(lye(t))return l6;if(s6(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=s6(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=sye(t);var r=cye.test(t);return r||hye.test(t)?fye(t.slice(2),r?2:8):uye.test(t)?l6:+t}var U9=dye,pye=id,_E=Q_e,u6=U9,mye="Expected a function",gye=Math.max,_ye=Math.min;function yye(t,e,r){var o,u,f,p,x,s,w=0,I=!1,P=!1,N=!0;if(typeof t!="function")throw new TypeError(mye);e=u6(e)||0,pye(r)&&(I=!!r.leading,P="maxWait"in r,f=P?gye(u6(r.maxWait)||0,e):f,N="trailing"in r?!!r.trailing:N);function U(me){var Ce=o,Ae=u;return o=u=void 0,w=me,p=t.apply(Ae,Ce),p}function X(me){return w=me,x=setTimeout(Z,e),I?U(me):p}function Q(me){var Ce=me-s,Ae=me-w,De=e-Ce;return P?_ye(De,f-Ae):De}function J(me){var Ce=me-s,Ae=me-w;return s===void 0||Ce>=e||Ce<0||P&&Ae>=f}function Z(){var me=_E();if(J(me))return H(me);x=setTimeout(Z,Q(me))}function H(me){return x=void 0,N&&o?U(me):(o=u=void 0,p)}function K(){x!==void 0&&clearTimeout(x),w=0,o=s=u=x=void 0}function ee(){return x===void 0?p:H(_E())}function se(){var me=_E(),Ce=J(me);if(o=arguments,u=this,s=me,Ce){if(x===void 0)return X(s);if(P)return clearTimeout(x),x=setTimeout(Z,e),U(s)}return x===void 0&&(x=setTimeout(Z,e)),p}return se.cancel=K,se.flush=ee,se}var vye=yye,Bye=vye,xye=id,bye="Expected a function";function Cye(t,e,r){var o=!0,u=!0;if(typeof t!="function")throw new TypeError(bye);return xye(r)&&(o="leading"in r?!!r.leading:o,u="trailing"in r?!!r.trailing:u),Bye(t,e,{leading:o,maxWait:e,trailing:u})}var wye=Cye;const V9=wi(wye);function Dv(t){"@babel/helpers - typeof";return Dv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dv(t)}function c6(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),r.push.apply(r,o)}return r}function Wx(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?c6(Object(r),!0).forEach(function(o){Sye(t,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c6(Object(r)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(r,o))})}return t}function Sye(t,e,r){return e=Tye(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Tye(t){var e=Aye(t,"string");return Dv(e)=="symbol"?e:String(e)}function Aye(t,e){if(Dv(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var o=r.call(t,e||"default");if(Dv(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Eye(t,e){return Iye(t)||Mye(t,e)||Pye(t,e)||Dye()}function Dye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pye(t,e){if(t){if(typeof t=="string")return h6(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h6(t,e)}}function h6(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,o=new Array(e);r<e;r++)o[r]=t[r];return o}function Mye(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var o,u,f,p,x=[],s=!0,w=!1;try{if(f=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;s=!1}else for(;!(s=(o=f.call(r)).done)&&(x.push(o.value),x.length!==e);s=!0);}catch(I){w=!0,u=I}finally{try{if(!s&&r.return!=null&&(p=r.return(),Object(p)!==p))return}finally{if(w)throw u}}return x}}function Iye(t){if(Array.isArray(t))return t}var Oye=Te.forwardRef(function(t,e){var r=t.aspect,o=t.initialDimension,u=o===void 0?{width:-1,height:-1}:o,f=t.width,p=f===void 0?"100%":f,x=t.height,s=x===void 0?"100%":x,w=t.minWidth,I=w===void 0?0:w,P=t.minHeight,N=t.maxHeight,U=t.children,X=t.debounce,Q=X===void 0?0:X,J=t.id,Z=t.className,H=t.onResize,K=t.style,ee=K===void 0?{}:K,se=Te.useRef(null),me=Te.useRef();me.current=H,Te.useImperativeHandle(e,function(){return Object.defineProperty(se.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),se.current},configurable:!0})});var Ce=Te.useState({containerWidth:u.width,containerHeight:u.height}),Ae=Eye(Ce,2),De=Ae[0],qe=Ae[1],je=Te.useCallback(function(ct,ht){qe(function(We){var Je=Math.round(ct),St=Math.round(ht);return We.containerWidth===Je&&We.containerHeight===St?We:{containerWidth:Je,containerHeight:St}})},[]);Te.useEffect(function(){var ct=function(Nt){var xt,$t=Nt[0].contentRect,Wt=$t.width,Tr=$t.height;je(Wt,Tr),(xt=me.current)===null||xt===void 0||xt.call(me,Wt,Tr)};Q>0&&(ct=V9(ct,Q,{trailing:!0,leading:!1}));var ht=new ResizeObserver(ct),We=se.current.getBoundingClientRect(),Je=We.width,St=We.height;return je(Je,St),ht.observe(se.current),function(){ht.disconnect()}},[je,Q]);var Oe=Te.useMemo(function(){var ct=De.containerWidth,ht=De.containerHeight;if(ct<0||ht<0)return null;ph(Bp(p)||Bp(s),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,p,s),ph(!r||r>0,"The aspect(%s) must be greater than zero.",r);var We=Bp(p)?ct:p,Je=Bp(s)?ht:s;r&&r>0&&(We?Je=We/r:Je&&(We=Je*r),N&&Je>N&&(Je=N)),ph(We>0||Je>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,We,Je,p,s,I,P,r);var St=!Array.isArray(U)&&bM.isElement(U)&&dh(U.type).endsWith("Chart");return Ue.Children.map(U,function(Le){return bM.isElement(Le)?Te.cloneElement(Le,Wx({width:We,height:Je},St?{style:Wx({height:"100%",width:"100%",maxHeight:Je,maxWidth:We},Le.props.style)}:{})):Le})},[r,U,s,N,P,I,De,p]);return Ue.createElement("div",{id:J?"".concat(J):void 0,className:Yn("recharts-responsive-container",Z),style:Wx(Wx({},ee),{},{width:p,height:s,minWidth:I,minHeight:P,maxHeight:N}),ref:se},Oe)}),W3=function(e){return null};W3.displayName="Cell";function Pv(t){"@babel/helpers - typeof";return Pv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pv(t)}function f6(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),r.push.apply(r,o)}return r}function KM(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?f6(Object(r),!0).forEach(function(o){kye(t,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f6(Object(r)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(r,o))})}return t}function kye(t,e,r){return e=Lye(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Lye(t){var e=Rye(t,"string");return Pv(e)=="symbol"?e:String(e)}function Rye(t,e){if(Pv(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var o=r.call(t,e||"default");if(Pv(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var eg={widthCache:{},cacheCount:0},zye=2e3,Nye={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},d6="recharts_measurement_span";function Fye(t){var e=KM({},t);return Object.keys(e).forEach(function(r){e[r]||delete e[r]}),e}var q0=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Du.isSsr)return{width:0,height:0};var o=Fye(r),u=JSON.stringify({text:e,copyStyle:o});if(eg.widthCache[u])return eg.widthCache[u];try{var f=document.getElementById(d6);f||(f=document.createElement("span"),f.setAttribute("id",d6),f.setAttribute("aria-hidden","true"),document.body.appendChild(f));var p=KM(KM({},Nye),o);Object.assign(f.style,p),f.textContent="".concat(e);var x=f.getBoundingClientRect(),s={width:x.width,height:x.height};return eg.widthCache[u]=s,++eg.cacheCount>zye&&(eg.cacheCount=0,eg.widthCache={}),s}catch{return{width:0,height:0}}},jye=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function Mv(t){"@babel/helpers - typeof";return Mv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mv(t)}function IC(t,e){return Gye(t)||Vye(t,e)||Uye(t,e)||$ye()}function $ye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Uye(t,e){if(t){if(typeof t=="string")return p6(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p6(t,e)}}function p6(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,o=new Array(e);r<e;r++)o[r]=t[r];return o}function Vye(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var o,u,f,p,x=[],s=!0,w=!1;try{if(f=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;s=!1}else for(;!(s=(o=f.call(r)).done)&&(x.push(o.value),x.length!==e);s=!0);}catch(I){w=!0,u=I}finally{try{if(!s&&r.return!=null&&(p=r.return(),Object(p)!==p))return}finally{if(w)throw u}}return x}}function Gye(t){if(Array.isArray(t))return t}function Hye(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m6(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,Zye(o.key),o)}}function Wye(t,e,r){return e&&m6(t.prototype,e),r&&m6(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Zye(t){var e=qye(t,"string");return Mv(e)=="symbol"?e:String(e)}function qye(t,e){if(Mv(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var o=r.call(t,e||"default");if(Mv(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var g6=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,_6=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Kye=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Xye=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,G9={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Yye=Object.keys(G9),wg="NaN";function Jye(t,e){return t*G9[e]}var Zx=function(){function t(e,r){Hye(this,t),this.num=e,this.unit=r,this.num=e,this.unit=r,Number.isNaN(e)&&(this.unit=""),r!==""&&!Kye.test(r)&&(this.num=NaN,this.unit=""),Yye.includes(r)&&(this.num=Jye(e,r),this.unit="px")}return Wye(t,[{key:"add",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var o,u=(o=Xye.exec(r))!==null&&o!==void 0?o:[],f=IC(u,3),p=f[1],x=f[2];return new t(parseFloat(p),x??"")}}]),t}();function H9(t){if(t.includes(wg))return wg;for(var e=t;e.includes("*")||e.includes("/");){var r,o=(r=g6.exec(e))!==null&&r!==void 0?r:[],u=IC(o,4),f=u[1],p=u[2],x=u[3],s=Zx.parse(f??""),w=Zx.parse(x??""),I=p==="*"?s.multiply(w):s.divide(w);if(I.isNaN())return wg;e=e.replace(g6,I.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var P,N=(P=_6.exec(e))!==null&&P!==void 0?P:[],U=IC(N,4),X=U[1],Q=U[2],J=U[3],Z=Zx.parse(X??""),H=Zx.parse(J??""),K=Q==="+"?Z.add(H):Z.subtract(H);if(K.isNaN())return wg;e=e.replace(_6,K.toString())}return e}var y6=/\(([^()]*)\)/;function Qye(t){for(var e=t;e.includes("(");){var r=y6.exec(e),o=IC(r,2),u=o[1];e=e.replace(y6,H9(u))}return e}function e0e(t){var e=t.replace(/\s+/g,"");return e=Qye(e),e=H9(e),e}function t0e(t){try{return e0e(t)}catch{return wg}}function yE(t){var e=t0e(t.slice(5,-1));return e===wg?"":e}var r0e=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],n0e=["dx","dy","angle","className","breakAll"];function XM(){return XM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},XM.apply(this,arguments)}function v6(t,e){if(t==null)return{};var r=i0e(t,e),o,u;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(t);for(u=0;u<f.length;u++)o=f[u],!(e.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(t,o)&&(r[o]=t[o])}return r}function i0e(t,e){if(t==null)return{};var r={},o=Object.keys(t),u,f;for(f=0;f<o.length;f++)u=o[f],!(e.indexOf(u)>=0)&&(r[u]=t[u]);return r}function B6(t,e){return l0e(t)||s0e(t,e)||a0e(t,e)||o0e()}function o0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function a0e(t,e){if(t){if(typeof t=="string")return x6(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return x6(t,e)}}function x6(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,o=new Array(e);r<e;r++)o[r]=t[r];return o}function s0e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var o,u,f,p,x=[],s=!0,w=!1;try{if(f=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;s=!1}else for(;!(s=(o=f.call(r)).done)&&(x.push(o.value),x.length!==e);s=!0);}catch(I){w=!0,u=I}finally{try{if(!s&&r.return!=null&&(p=r.return(),Object(p)!==p))return}finally{if(w)throw u}}return x}}function l0e(t){if(Array.isArray(t))return t}var W9=/[ \f\n\r\t\v\u2028\u2029]+/,Z9=function(e){var r=e.children,o=e.breakAll,u=e.style;try{var f=[];En(r)||(o?f=r.toString().split(""):f=r.toString().split(W9));var p=f.map(function(s){return{word:s,width:q0(s,u).width}}),x=o?0:q0("",u).width;return{wordsWithComputedWidth:p,spaceWidth:x}}catch{return null}},u0e=function(e,r,o,u,f){var p=e.maxLines,x=e.children,s=e.style,w=e.breakAll,I=lr(p),P=x,N=function(){var We=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return We.reduce(function(Je,St){var Le=St.word,Nt=St.width,xt=Je[Je.length-1];if(xt&&(u==null||f||xt.width+Nt+o<Number(u)))xt.words.push(Le),xt.width+=Nt+o;else{var $t={words:[Le],width:Nt};Je.push($t)}return Je},[])},U=N(r),X=function(We){return We.reduce(function(Je,St){return Je.width>St.width?Je:St})};if(!I)return U;for(var Q="",J=function(We){var Je=P.slice(0,We),St=Z9({breakAll:w,style:s,children:Je+Q}).wordsWithComputedWidth,Le=N(St),Nt=Le.length>p||X(Le).width>Number(u);return[Nt,Le]},Z=0,H=P.length-1,K=0,ee;Z<=H&&K<=P.length-1;){var se=Math.floor((Z+H)/2),me=se-1,Ce=J(me),Ae=B6(Ce,2),De=Ae[0],qe=Ae[1],je=J(se),Oe=B6(je,1),ct=Oe[0];if(!De&&!ct&&(Z=se+1),De&&ct&&(H=se-1),!De&&ct){ee=qe;break}K++}return ee||U},b6=function(e){var r=En(e)?[]:e.toString().split(W9);return[{words:r}]},c0e=function(e){var r=e.width,o=e.scaleToFit,u=e.children,f=e.style,p=e.breakAll,x=e.maxLines;if((r||o)&&!Du.isSsr){var s,w,I=Z9({breakAll:p,children:u,style:f});if(I){var P=I.wordsWithComputedWidth,N=I.spaceWidth;s=P,w=N}else return b6(u);return u0e({breakAll:p,children:u,maxLines:x,style:f},s,w,r,o)}return b6(u)},C6="#808080",OC=function(e){var r=e.x,o=r===void 0?0:r,u=e.y,f=u===void 0?0:u,p=e.lineHeight,x=p===void 0?"1em":p,s=e.capHeight,w=s===void 0?"0.71em":s,I=e.scaleToFit,P=I===void 0?!1:I,N=e.textAnchor,U=N===void 0?"start":N,X=e.verticalAnchor,Q=X===void 0?"end":X,J=e.fill,Z=J===void 0?C6:J,H=v6(e,r0e),K=Te.useMemo(function(){return c0e({breakAll:H.breakAll,children:H.children,maxLines:H.maxLines,scaleToFit:P,style:H.style,width:H.width})},[H.breakAll,H.children,H.maxLines,P,H.style,H.width]),ee=H.dx,se=H.dy,me=H.angle,Ce=H.className,Ae=H.breakAll,De=v6(H,n0e);if(!Zo(o)||!Zo(f))return null;var qe=o+(lr(ee)?ee:0),je=f+(lr(se)?se:0),Oe;switch(Q){case"start":Oe=yE("calc(".concat(w,")"));break;case"middle":Oe=yE("calc(".concat((K.length-1)/2," * -").concat(x," + (").concat(w," / 2))"));break;default:Oe=yE("calc(".concat(K.length-1," * -").concat(x,")"));break}var ct=[];if(P){var ht=K[0].width,We=H.width;ct.push("scale(".concat((lr(We)?We/ht:1)/ht,")"))}return me&&ct.push("rotate(".concat(me,", ").concat(qe,", ").concat(je,")")),ct.length&&(De.transform=ct.join(" ")),Ue.createElement("text",XM({},An(De,!0),{x:qe,y:je,className:Yn("recharts-text",Ce),textAnchor:U,fill:Z.includes("url")?C6:Z}),K.map(function(Je,St){var Le=Je.words.join(Ae?"":" ");return Ue.createElement("tspan",{x:qe,dy:St===0?Oe:x,key:Le},Le)}))};function Kf(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function h0e(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Z3(t){let e,r,o;t.length!==2?(e=Kf,r=(x,s)=>Kf(t(x),s),o=(x,s)=>t(x)-s):(e=t===Kf||t===h0e?t:f0e,r=t,o=t);function u(x,s,w=0,I=x.length){if(w<I){if(e(s,s)!==0)return I;do{const P=w+I>>>1;r(x[P],s)<0?w=P+1:I=P}while(w<I)}return w}function f(x,s,w=0,I=x.length){if(w<I){if(e(s,s)!==0)return I;do{const P=w+I>>>1;r(x[P],s)<=0?w=P+1:I=P}while(w<I)}return w}function p(x,s,w=0,I=x.length){const P=u(x,s,w,I-1);return P>w&&o(x[P-1],s)>-o(x[P],s)?P-1:P}return{left:u,center:p,right:f}}function f0e(){return 0}function q9(t){return t===null?NaN:+t}function*d0e(t,e){if(e===void 0)for(let r of t)r!=null&&(r=+r)>=r&&(yield r);else{let r=-1;for(let o of t)(o=e(o,++r,t))!=null&&(o=+o)>=o&&(yield o)}}const p0e=Z3(Kf),DB=p0e.right;Z3(q9).center;class w6 extends Map{constructor(e,r=_0e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[o,u]of e)this.set(o,u)}get(e){return super.get(S6(this,e))}has(e){return super.has(S6(this,e))}set(e,r){return super.set(m0e(this,e),r)}delete(e){return super.delete(g0e(this,e))}}function S6({_intern:t,_key:e},r){const o=e(r);return t.has(o)?t.get(o):r}function m0e({_intern:t,_key:e},r){const o=e(r);return t.has(o)?t.get(o):(t.set(o,r),r)}function g0e({_intern:t,_key:e},r){const o=e(r);return t.has(o)&&(r=t.get(o),t.delete(o)),r}function _0e(t){return t!==null&&typeof t=="object"?t.valueOf():t}function y0e(t=Kf){if(t===Kf)return K9;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const o=t(e,r);return o||o===0?o:(t(r,r)===0)-(t(e,e)===0)}}function K9(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const v0e=Math.sqrt(50),B0e=Math.sqrt(10),x0e=Math.sqrt(2);function kC(t,e,r){const o=(e-t)/Math.max(0,r),u=Math.floor(Math.log10(o)),f=o/Math.pow(10,u),p=f>=v0e?10:f>=B0e?5:f>=x0e?2:1;let x,s,w;return u<0?(w=Math.pow(10,-u)/p,x=Math.round(t*w),s=Math.round(e*w),x/w<t&&++x,s/w>e&&--s,w=-w):(w=Math.pow(10,u)*p,x=Math.round(t/w),s=Math.round(e/w),x*w<t&&++x,s*w>e&&--s),s<x&&.5<=r&&r<2?kC(t,e,r*2):[x,s,w]}function YM(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const o=e<t,[u,f,p]=o?kC(e,t,r):kC(t,e,r);if(!(f>=u))return[];const x=f-u+1,s=new Array(x);if(o)if(p<0)for(let w=0;w<x;++w)s[w]=(f-w)/-p;else for(let w=0;w<x;++w)s[w]=(f-w)*p;else if(p<0)for(let w=0;w<x;++w)s[w]=(u+w)/-p;else for(let w=0;w<x;++w)s[w]=(u+w)*p;return s}function JM(t,e,r){return e=+e,t=+t,r=+r,kC(t,e,r)[2]}function QM(t,e,r){e=+e,t=+t,r=+r;const o=e<t,u=o?JM(e,t,r):JM(t,e,r);return(o?-1:1)*(u<0?1/-u:u)}function T6(t,e){let r;if(e===void 0)for(const o of t)o!=null&&(r<o||r===void 0&&o>=o)&&(r=o);else{let o=-1;for(let u of t)(u=e(u,++o,t))!=null&&(r<u||r===void 0&&u>=u)&&(r=u)}return r}function A6(t,e){let r;if(e===void 0)for(const o of t)o!=null&&(r>o||r===void 0&&o>=o)&&(r=o);else{let o=-1;for(let u of t)(u=e(u,++o,t))!=null&&(r>u||r===void 0&&u>=u)&&(r=u)}return r}function X9(t,e,r=0,o=1/0,u){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),o=Math.floor(Math.min(t.length-1,o)),!(r<=e&&e<=o))return t;for(u=u===void 0?K9:y0e(u);o>r;){if(o-r>600){const s=o-r+1,w=e-r+1,I=Math.log(s),P=.5*Math.exp(2*I/3),N=.5*Math.sqrt(I*P*(s-P)/s)*(w-s/2<0?-1:1),U=Math.max(r,Math.floor(e-w*P/s+N)),X=Math.min(o,Math.floor(e+(s-w)*P/s+N));X9(t,e,U,X,u)}const f=t[e];let p=r,x=o;for(p0(t,r,e),u(t[o],f)>0&&p0(t,r,o);p<x;){for(p0(t,p,x),++p,--x;u(t[p],f)<0;)++p;for(;u(t[x],f)>0;)--x}u(t[r],f)===0?p0(t,r,x):(++x,p0(t,x,o)),x<=e&&(r=x+1),e<=x&&(o=x-1)}return t}function p0(t,e,r){const o=t[e];t[e]=t[r],t[r]=o}function b0e(t,e,r){if(t=Float64Array.from(d0e(t,r)),!(!(o=t.length)||isNaN(e=+e))){if(e<=0||o<2)return A6(t);if(e>=1)return T6(t);var o,u=(o-1)*e,f=Math.floor(u),p=T6(X9(t,f).subarray(0,f+1)),x=A6(t.subarray(f+1));return p+(x-p)*(u-f)}}function C0e(t,e,r=q9){if(!(!(o=t.length)||isNaN(e=+e))){if(e<=0||o<2)return+r(t[0],0,t);if(e>=1)return+r(t[o-1],o-1,t);var o,u=(o-1)*e,f=Math.floor(u),p=+r(t[f],f,t),x=+r(t[f+1],f+1,t);return p+(x-p)*(u-f)}}function w0e(t,e,r){t=+t,e=+e,r=(u=arguments.length)<2?(e=t,t=0,1):u<3?1:+r;for(var o=-1,u=Math.max(0,Math.ceil((e-t)/r))|0,f=new Array(u);++o<u;)f[o]=t+o*r;return f}function Gl(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Dh(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const eI=Symbol("implicit");function q3(){var t=new w6,e=[],r=[],o=eI;function u(f){let p=t.get(f);if(p===void 0){if(o!==eI)return o;t.set(f,p=e.push(f)-1)}return r[p%r.length]}return u.domain=function(f){if(!arguments.length)return e.slice();e=[],t=new w6;for(const p of f)t.has(p)||t.set(p,e.push(p)-1);return u},u.range=function(f){return arguments.length?(r=Array.from(f),u):r.slice()},u.unknown=function(f){return arguments.length?(o=f,u):o},u.copy=function(){return q3(e,r).unknown(o)},Gl.apply(u,arguments),u}function Iv(){var t=q3().unknown(void 0),e=t.domain,r=t.range,o=0,u=1,f,p,x=!1,s=0,w=0,I=.5;delete t.unknown;function P(){var N=e().length,U=u<o,X=U?u:o,Q=U?o:u;f=(Q-X)/Math.max(1,N-s+w*2),x&&(f=Math.floor(f)),X+=(Q-X-f*(N-s))*I,p=f*(1-s),x&&(X=Math.round(X),p=Math.round(p));var J=w0e(N).map(function(Z){return X+f*Z});return r(U?J.reverse():J)}return t.domain=function(N){return arguments.length?(e(N),P()):e()},t.range=function(N){return arguments.length?([o,u]=N,o=+o,u=+u,P()):[o,u]},t.rangeRound=function(N){return[o,u]=N,o=+o,u=+u,x=!0,P()},t.bandwidth=function(){return p},t.step=function(){return f},t.round=function(N){return arguments.length?(x=!!N,P()):x},t.padding=function(N){return arguments.length?(s=Math.min(1,w=+N),P()):s},t.paddingInner=function(N){return arguments.length?(s=Math.min(1,N),P()):s},t.paddingOuter=function(N){return arguments.length?(w=+N,P()):w},t.align=function(N){return arguments.length?(I=Math.max(0,Math.min(1,N)),P()):I},t.copy=function(){return Iv(e(),[o,u]).round(x).paddingInner(s).paddingOuter(w).align(I)},Gl.apply(P(),arguments)}function Y9(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Y9(e())},t}function K0(){return Y9(Iv.apply(null,arguments).paddingInner(1))}function K3(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function J9(t,e){var r=Object.create(t.prototype);for(var o in e)r[o]=e[o];return r}function PB(){}var Ov=.7,LC=1/Ov,kg="\\s*([+-]?\\d+)\\s*",kv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",vc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",S0e=/^#([0-9a-f]{3,8})$/,T0e=new RegExp(`^rgb\\(${kg},${kg},${kg}\\)$`),A0e=new RegExp(`^rgb\\(${vc},${vc},${vc}\\)$`),E0e=new RegExp(`^rgba\\(${kg},${kg},${kg},${kv}\\)$`),D0e=new RegExp(`^rgba\\(${vc},${vc},${vc},${kv}\\)$`),P0e=new RegExp(`^hsl\\(${kv},${vc},${vc}\\)$`),M0e=new RegExp(`^hsla\\(${kv},${vc},${vc},${kv}\\)$`),E6={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};K3(PB,Lv,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:D6,formatHex:D6,formatHex8:I0e,formatHsl:O0e,formatRgb:P6,toString:P6});function D6(){return this.rgb().formatHex()}function I0e(){return this.rgb().formatHex8()}function O0e(){return Q9(this).formatHsl()}function P6(){return this.rgb().formatRgb()}function Lv(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=S0e.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?M6(e):r===3?new ws(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?qx(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?qx(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=T0e.exec(t))?new ws(e[1],e[2],e[3],1):(e=A0e.exec(t))?new ws(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=E0e.exec(t))?qx(e[1],e[2],e[3],e[4]):(e=D0e.exec(t))?qx(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=P0e.exec(t))?k6(e[1],e[2]/100,e[3]/100,1):(e=M0e.exec(t))?k6(e[1],e[2]/100,e[3]/100,e[4]):E6.hasOwnProperty(t)?M6(E6[t]):t==="transparent"?new ws(NaN,NaN,NaN,0):null}function M6(t){return new ws(t>>16&255,t>>8&255,t&255,1)}function qx(t,e,r,o){return o<=0&&(t=e=r=NaN),new ws(t,e,r,o)}function k0e(t){return t instanceof PB||(t=Lv(t)),t?(t=t.rgb(),new ws(t.r,t.g,t.b,t.opacity)):new ws}function tI(t,e,r,o){return arguments.length===1?k0e(t):new ws(t,e,r,o??1)}function ws(t,e,r,o){this.r=+t,this.g=+e,this.b=+r,this.opacity=+o}K3(ws,tI,J9(PB,{brighter(t){return t=t==null?LC:Math.pow(LC,t),new ws(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Ov:Math.pow(Ov,t),new ws(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ws(Ep(this.r),Ep(this.g),Ep(this.b),RC(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:I6,formatHex:I6,formatHex8:L0e,formatRgb:O6,toString:O6}));function I6(){return`#${xp(this.r)}${xp(this.g)}${xp(this.b)}`}function L0e(){return`#${xp(this.r)}${xp(this.g)}${xp(this.b)}${xp((isNaN(this.opacity)?1:this.opacity)*255)}`}function O6(){const t=RC(this.opacity);return`${t===1?"rgb(":"rgba("}${Ep(this.r)}, ${Ep(this.g)}, ${Ep(this.b)}${t===1?")":`, ${t})`}`}function RC(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ep(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function xp(t){return t=Ep(t),(t<16?"0":"")+t.toString(16)}function k6(t,e,r,o){return o<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new wu(t,e,r,o)}function Q9(t){if(t instanceof wu)return new wu(t.h,t.s,t.l,t.opacity);if(t instanceof PB||(t=Lv(t)),!t)return new wu;if(t instanceof wu)return t;t=t.rgb();var e=t.r/255,r=t.g/255,o=t.b/255,u=Math.min(e,r,o),f=Math.max(e,r,o),p=NaN,x=f-u,s=(f+u)/2;return x?(e===f?p=(r-o)/x+(r<o)*6:r===f?p=(o-e)/x+2:p=(e-r)/x+4,x/=s<.5?f+u:2-f-u,p*=60):x=s>0&&s<1?0:p,new wu(p,x,s,t.opacity)}function R0e(t,e,r,o){return arguments.length===1?Q9(t):new wu(t,e,r,o??1)}function wu(t,e,r,o){this.h=+t,this.s=+e,this.l=+r,this.opacity=+o}K3(wu,R0e,J9(PB,{brighter(t){return t=t==null?LC:Math.pow(LC,t),new wu(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Ov:Math.pow(Ov,t),new wu(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,o=r+(r<.5?r:1-r)*e,u=2*r-o;return new ws(vE(t>=240?t-240:t+120,u,o),vE(t,u,o),vE(t<120?t+240:t-120,u,o),this.opacity)},clamp(){return new wu(L6(this.h),Kx(this.s),Kx(this.l),RC(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=RC(this.opacity);return`${t===1?"hsl(":"hsla("}${L6(this.h)}, ${Kx(this.s)*100}%, ${Kx(this.l)*100}%${t===1?")":`, ${t})`}`}}));function L6(t){return t=(t||0)%360,t<0?t+360:t}function Kx(t){return Math.max(0,Math.min(1,t||0))}function vE(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const X3=t=>()=>t;function z0e(t,e){return function(r){return t+r*e}}function N0e(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(o){return Math.pow(t+o*e,r)}}function F0e(t){return(t=+t)==1?eH:function(e,r){return r-e?N0e(e,r,t):X3(isNaN(e)?r:e)}}function eH(t,e){var r=e-t;return r?z0e(t,r):X3(isNaN(t)?e:t)}const R6=function t(e){var r=F0e(e);function o(u,f){var p=r((u=tI(u)).r,(f=tI(f)).r),x=r(u.g,f.g),s=r(u.b,f.b),w=eH(u.opacity,f.opacity);return function(I){return u.r=p(I),u.g=x(I),u.b=s(I),u.opacity=w(I),u+""}}return o.gamma=t,o}(1);function j0e(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,o=e.slice(),u;return function(f){for(u=0;u<r;++u)o[u]=t[u]*(1-f)+e[u]*f;return o}}function $0e(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function U0e(t,e){var r=e?e.length:0,o=t?Math.min(r,t.length):0,u=new Array(o),f=new Array(r),p;for(p=0;p<o;++p)u[p]=P_(t[p],e[p]);for(;p<r;++p)f[p]=e[p];return function(x){for(p=0;p<o;++p)f[p]=u[p](x);return f}}function V0e(t,e){var r=new Date;return t=+t,e=+e,function(o){return r.setTime(t*(1-o)+e*o),r}}function zC(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function G0e(t,e){var r={},o={},u;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(u in e)u in t?r[u]=P_(t[u],e[u]):o[u]=e[u];return function(f){for(u in r)o[u]=r[u](f);return o}}var rI=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,BE=new RegExp(rI.source,"g");function H0e(t){return function(){return t}}function W0e(t){return function(e){return t(e)+""}}function Z0e(t,e){var r=rI.lastIndex=BE.lastIndex=0,o,u,f,p=-1,x=[],s=[];for(t=t+"",e=e+"";(o=rI.exec(t))&&(u=BE.exec(e));)(f=u.index)>r&&(f=e.slice(r,f),x[p]?x[p]+=f:x[++p]=f),(o=o[0])===(u=u[0])?x[p]?x[p]+=u:x[++p]=u:(x[++p]=null,s.push({i:p,x:zC(o,u)})),r=BE.lastIndex;return r<e.length&&(f=e.slice(r),x[p]?x[p]+=f:x[++p]=f),x.length<2?s[0]?W0e(s[0].x):H0e(e):(e=s.length,function(w){for(var I=0,P;I<e;++I)x[(P=s[I]).i]=P.x(w);return x.join("")})}function P_(t,e){var r=typeof e,o;return e==null||r==="boolean"?X3(e):(r==="number"?zC:r==="string"?(o=Lv(e))?(e=o,R6):Z0e:e instanceof Lv?R6:e instanceof Date?V0e:$0e(e)?j0e:Array.isArray(e)?U0e:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?G0e:zC)(t,e)}function Y3(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function q0e(t,e){e===void 0&&(e=t,t=P_);for(var r=0,o=e.length-1,u=e[0],f=new Array(o<0?0:o);r<o;)f[r]=t(u,u=e[++r]);return function(p){var x=Math.max(0,Math.min(o-1,Math.floor(p*=o)));return f[x](p-x)}}function K0e(t){return function(){return t}}function NC(t){return+t}var z6=[0,1];function is(t){return t}function nI(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:K0e(isNaN(e)?NaN:.5)}function X0e(t,e){var r;return t>e&&(r=t,t=e,e=r),function(o){return Math.max(t,Math.min(e,o))}}function Y0e(t,e,r){var o=t[0],u=t[1],f=e[0],p=e[1];return u<o?(o=nI(u,o),f=r(p,f)):(o=nI(o,u),f=r(f,p)),function(x){return f(o(x))}}function J0e(t,e,r){var o=Math.min(t.length,e.length)-1,u=new Array(o),f=new Array(o),p=-1;for(t[o]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++p<o;)u[p]=nI(t[p],t[p+1]),f[p]=r(e[p],e[p+1]);return function(x){var s=DB(t,x,1,o)-1;return f[s](u[s](x))}}function MB(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function lS(){var t=z6,e=z6,r=P_,o,u,f,p=is,x,s,w;function I(){var N=Math.min(t.length,e.length);return p!==is&&(p=X0e(t[0],t[N-1])),x=N>2?J0e:Y0e,s=w=null,P}function P(N){return N==null||isNaN(N=+N)?f:(s||(s=x(t.map(o),e,r)))(o(p(N)))}return P.invert=function(N){return p(u((w||(w=x(e,t.map(o),zC)))(N)))},P.domain=function(N){return arguments.length?(t=Array.from(N,NC),I()):t.slice()},P.range=function(N){return arguments.length?(e=Array.from(N),I()):e.slice()},P.rangeRound=function(N){return e=Array.from(N),r=Y3,I()},P.clamp=function(N){return arguments.length?(p=N?!0:is,I()):p!==is},P.interpolate=function(N){return arguments.length?(r=N,I()):r},P.unknown=function(N){return arguments.length?(f=N,P):f},function(N,U){return o=N,u=U,I()}}function J3(){return lS()(is,is)}function Q0e(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function FC(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,o=t.slice(0,r);return[o.length>1?o[0]+o.slice(2):o,+t.slice(r+1)]}function Jg(t){return t=FC(Math.abs(t)),t?t[1]:NaN}function eve(t,e){return function(r,o){for(var u=r.length,f=[],p=0,x=t[0],s=0;u>0&&x>0&&(s+x+1>o&&(x=Math.max(1,o-s)),f.push(r.substring(u-=x,u+x)),!((s+=x+1)>o));)x=t[p=(p+1)%t.length];return f.reverse().join(e)}}function tve(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var rve=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Rv(t){if(!(e=rve.exec(t)))throw new Error("invalid format: "+t);var e;return new Q3({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Rv.prototype=Q3.prototype;function Q3(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Q3.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function nve(t){e:for(var e=t.length,r=1,o=-1,u;r<e;++r)switch(t[r]){case".":o=u=r;break;case"0":o===0&&(o=r),u=r;break;default:if(!+t[r])break e;o>0&&(o=0);break}return o>0?t.slice(0,o)+t.slice(u+1):t}var tH;function ive(t,e){var r=FC(t,e);if(!r)return t+"";var o=r[0],u=r[1],f=u-(tH=Math.max(-8,Math.min(8,Math.floor(u/3)))*3)+1,p=o.length;return f===p?o:f>p?o+new Array(f-p+1).join("0"):f>0?o.slice(0,f)+"."+o.slice(f):"0."+new Array(1-f).join("0")+FC(t,Math.max(0,e+f-1))[0]}function N6(t,e){var r=FC(t,e);if(!r)return t+"";var o=r[0],u=r[1];return u<0?"0."+new Array(-u).join("0")+o:o.length>u+1?o.slice(0,u+1)+"."+o.slice(u+1):o+new Array(u-o.length+2).join("0")}const F6={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Q0e,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>N6(t*100,e),r:N6,s:ive,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function j6(t){return t}var $6=Array.prototype.map,U6=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function ove(t){var e=t.grouping===void 0||t.thousands===void 0?j6:eve($6.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",o=t.currency===void 0?"":t.currency[1]+"",u=t.decimal===void 0?".":t.decimal+"",f=t.numerals===void 0?j6:tve($6.call(t.numerals,String)),p=t.percent===void 0?"%":t.percent+"",x=t.minus===void 0?"":t.minus+"",s=t.nan===void 0?"NaN":t.nan+"";function w(P){P=Rv(P);var N=P.fill,U=P.align,X=P.sign,Q=P.symbol,J=P.zero,Z=P.width,H=P.comma,K=P.precision,ee=P.trim,se=P.type;se==="n"?(H=!0,se="g"):F6[se]||(K===void 0&&(K=12),ee=!0,se="g"),(J||N==="0"&&U==="=")&&(J=!0,N="0",U="=");var me=Q==="$"?r:Q==="#"&&/[boxX]/.test(se)?"0"+se.toLowerCase():"",Ce=Q==="$"?o:/[%p]/.test(se)?p:"",Ae=F6[se],De=/[defgprs%]/.test(se);K=K===void 0?6:/[gprs]/.test(se)?Math.max(1,Math.min(21,K)):Math.max(0,Math.min(20,K));function qe(je){var Oe=me,ct=Ce,ht,We,Je;if(se==="c")ct=Ae(je)+ct,je="";else{je=+je;var St=je<0||1/je<0;if(je=isNaN(je)?s:Ae(Math.abs(je),K),ee&&(je=nve(je)),St&&+je==0&&X!=="+"&&(St=!1),Oe=(St?X==="("?X:x:X==="-"||X==="("?"":X)+Oe,ct=(se==="s"?U6[8+tH/3]:"")+ct+(St&&X==="("?")":""),De){for(ht=-1,We=je.length;++ht<We;)if(Je=je.charCodeAt(ht),48>Je||Je>57){ct=(Je===46?u+je.slice(ht+1):je.slice(ht))+ct,je=je.slice(0,ht);break}}}H&&!J&&(je=e(je,1/0));var Le=Oe.length+je.length+ct.length,Nt=Le<Z?new Array(Z-Le+1).join(N):"";switch(H&&J&&(je=e(Nt+je,Nt.length?Z-ct.length:1/0),Nt=""),U){case"<":je=Oe+je+ct+Nt;break;case"=":je=Oe+Nt+je+ct;break;case"^":je=Nt.slice(0,Le=Nt.length>>1)+Oe+je+ct+Nt.slice(Le);break;default:je=Nt+Oe+je+ct;break}return f(je)}return qe.toString=function(){return P+""},qe}function I(P,N){var U=w((P=Rv(P),P.type="f",P)),X=Math.max(-8,Math.min(8,Math.floor(Jg(N)/3)))*3,Q=Math.pow(10,-X),J=U6[8+X/3];return function(Z){return U(Q*Z)+J}}return{format:w,formatPrefix:I}}var Xx,ek,rH;ave({thousands:",",grouping:[3],currency:["$",""]});function ave(t){return Xx=ove(t),ek=Xx.format,rH=Xx.formatPrefix,Xx}function sve(t){return Math.max(0,-Jg(Math.abs(t)))}function lve(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Jg(e)/3)))*3-Jg(Math.abs(t)))}function uve(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Jg(e)-Jg(t))+1}function nH(t,e,r,o){var u=QM(t,e,r),f;switch(o=Rv(o??",f"),o.type){case"s":{var p=Math.max(Math.abs(t),Math.abs(e));return o.precision==null&&!isNaN(f=lve(u,p))&&(o.precision=f),rH(o,p)}case"":case"e":case"g":case"p":case"r":{o.precision==null&&!isNaN(f=uve(u,Math.max(Math.abs(t),Math.abs(e))))&&(o.precision=f-(o.type==="e"));break}case"f":case"%":{o.precision==null&&!isNaN(f=sve(u))&&(o.precision=f-(o.type==="%")*2);break}}return ek(o)}function ad(t){var e=t.domain;return t.ticks=function(r){var o=e();return YM(o[0],o[o.length-1],r??10)},t.tickFormat=function(r,o){var u=e();return nH(u[0],u[u.length-1],r??10,o)},t.nice=function(r){r==null&&(r=10);var o=e(),u=0,f=o.length-1,p=o[u],x=o[f],s,w,I=10;for(x<p&&(w=p,p=x,x=w,w=u,u=f,f=w);I-- >0;){if(w=JM(p,x,r),w===s)return o[u]=p,o[f]=x,e(o);if(w>0)p=Math.floor(p/w)*w,x=Math.ceil(x/w)*w;else if(w<0)p=Math.ceil(p*w)/w,x=Math.floor(x*w)/w;else break;s=w}return t},t}function jC(){var t=J3();return t.copy=function(){return MB(t,jC())},Gl.apply(t,arguments),ad(t)}function iH(t){var e;function r(o){return o==null||isNaN(o=+o)?e:o}return r.invert=r,r.domain=r.range=function(o){return arguments.length?(t=Array.from(o,NC),r):t.slice()},r.unknown=function(o){return arguments.length?(e=o,r):e},r.copy=function(){return iH(t).unknown(e)},t=arguments.length?Array.from(t,NC):[0,1],ad(r)}function oH(t,e){t=t.slice();var r=0,o=t.length-1,u=t[r],f=t[o],p;return f<u&&(p=r,r=o,o=p,p=u,u=f,f=p),t[r]=e.floor(u),t[o]=e.ceil(f),t}function V6(t){return Math.log(t)}function G6(t){return Math.exp(t)}function cve(t){return-Math.log(-t)}function hve(t){return-Math.exp(-t)}function fve(t){return isFinite(t)?+("1e"+t):t<0?0:t}function dve(t){return t===10?fve:t===Math.E?Math.exp:e=>Math.pow(t,e)}function pve(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function H6(t){return(e,r)=>-t(-e,r)}function tk(t){const e=t(V6,G6),r=e.domain;let o=10,u,f;function p(){return u=pve(o),f=dve(o),r()[0]<0?(u=H6(u),f=H6(f),t(cve,hve)):t(V6,G6),e}return e.base=function(x){return arguments.length?(o=+x,p()):o},e.domain=function(x){return arguments.length?(r(x),p()):r()},e.ticks=x=>{const s=r();let w=s[0],I=s[s.length-1];const P=I<w;P&&([w,I]=[I,w]);let N=u(w),U=u(I),X,Q;const J=x==null?10:+x;let Z=[];if(!(o%1)&&U-N<J){if(N=Math.floor(N),U=Math.ceil(U),w>0){for(;N<=U;++N)for(X=1;X<o;++X)if(Q=N<0?X/f(-N):X*f(N),!(Q<w)){if(Q>I)break;Z.push(Q)}}else for(;N<=U;++N)for(X=o-1;X>=1;--X)if(Q=N>0?X/f(-N):X*f(N),!(Q<w)){if(Q>I)break;Z.push(Q)}Z.length*2<J&&(Z=YM(w,I,J))}else Z=YM(N,U,Math.min(U-N,J)).map(f);return P?Z.reverse():Z},e.tickFormat=(x,s)=>{if(x==null&&(x=10),s==null&&(s=o===10?"s":","),typeof s!="function"&&(!(o%1)&&(s=Rv(s)).precision==null&&(s.trim=!0),s=ek(s)),x===1/0)return s;const w=Math.max(1,o*x/e.ticks().length);return I=>{let P=I/f(Math.round(u(I)));return P*o<o-.5&&(P*=o),P<=w?s(I):""}},e.nice=()=>r(oH(r(),{floor:x=>f(Math.floor(u(x))),ceil:x=>f(Math.ceil(u(x)))})),e}function aH(){const t=tk(lS()).domain([1,10]);return t.copy=()=>MB(t,aH()).base(t.base()),Gl.apply(t,arguments),t}function W6(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function Z6(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function rk(t){var e=1,r=t(W6(e),Z6(e));return r.constant=function(o){return arguments.length?t(W6(e=+o),Z6(e)):e},ad(r)}function sH(){var t=rk(lS());return t.copy=function(){return MB(t,sH()).constant(t.constant())},Gl.apply(t,arguments)}function q6(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function mve(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function gve(t){return t<0?-t*t:t*t}function nk(t){var e=t(is,is),r=1;function o(){return r===1?t(is,is):r===.5?t(mve,gve):t(q6(r),q6(1/r))}return e.exponent=function(u){return arguments.length?(r=+u,o()):r},ad(e)}function ik(){var t=nk(lS());return t.copy=function(){return MB(t,ik()).exponent(t.exponent())},Gl.apply(t,arguments),t}function _ve(){return ik.apply(null,arguments).exponent(.5)}function K6(t){return Math.sign(t)*t*t}function yve(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function lH(){var t=J3(),e=[0,1],r=!1,o;function u(f){var p=yve(t(f));return isNaN(p)?o:r?Math.round(p):p}return u.invert=function(f){return t.invert(K6(f))},u.domain=function(f){return arguments.length?(t.domain(f),u):t.domain()},u.range=function(f){return arguments.length?(t.range((e=Array.from(f,NC)).map(K6)),u):e.slice()},u.rangeRound=function(f){return u.range(f).round(!0)},u.round=function(f){return arguments.length?(r=!!f,u):r},u.clamp=function(f){return arguments.length?(t.clamp(f),u):t.clamp()},u.unknown=function(f){return arguments.length?(o=f,u):o},u.copy=function(){return lH(t.domain(),e).round(r).clamp(t.clamp()).unknown(o)},Gl.apply(u,arguments),ad(u)}function uH(){var t=[],e=[],r=[],o;function u(){var p=0,x=Math.max(1,e.length);for(r=new Array(x-1);++p<x;)r[p-1]=C0e(t,p/x);return f}function f(p){return p==null||isNaN(p=+p)?o:e[DB(r,p)]}return f.invertExtent=function(p){var x=e.indexOf(p);return x<0?[NaN,NaN]:[x>0?r[x-1]:t[0],x<r.length?r[x]:t[t.length-1]]},f.domain=function(p){if(!arguments.length)return t.slice();t=[];for(let x of p)x!=null&&!isNaN(x=+x)&&t.push(x);return t.sort(Kf),u()},f.range=function(p){return arguments.length?(e=Array.from(p),u()):e.slice()},f.unknown=function(p){return arguments.length?(o=p,f):o},f.quantiles=function(){return r.slice()},f.copy=function(){return uH().domain(t).range(e).unknown(o)},Gl.apply(f,arguments)}function cH(){var t=0,e=1,r=1,o=[.5],u=[0,1],f;function p(s){return s!=null&&s<=s?u[DB(o,s,0,r)]:f}function x(){var s=-1;for(o=new Array(r);++s<r;)o[s]=((s+1)*e-(s-r)*t)/(r+1);return p}return p.domain=function(s){return arguments.length?([t,e]=s,t=+t,e=+e,x()):[t,e]},p.range=function(s){return arguments.length?(r=(u=Array.from(s)).length-1,x()):u.slice()},p.invertExtent=function(s){var w=u.indexOf(s);return w<0?[NaN,NaN]:w<1?[t,o[0]]:w>=r?[o[r-1],e]:[o[w-1],o[w]]},p.unknown=function(s){return arguments.length&&(f=s),p},p.thresholds=function(){return o.slice()},p.copy=function(){return cH().domain([t,e]).range(u).unknown(f)},Gl.apply(ad(p),arguments)}function hH(){var t=[.5],e=[0,1],r,o=1;function u(f){return f!=null&&f<=f?e[DB(t,f,0,o)]:r}return u.domain=function(f){return arguments.length?(t=Array.from(f),o=Math.min(t.length,e.length-1),u):t.slice()},u.range=function(f){return arguments.length?(e=Array.from(f),o=Math.min(t.length,e.length-1),u):e.slice()},u.invertExtent=function(f){var p=e.indexOf(f);return[t[p-1],t[p]]},u.unknown=function(f){return arguments.length?(r=f,u):r},u.copy=function(){return hH().domain(t).range(e).unknown(r)},Gl.apply(u,arguments)}const xE=new Date,bE=new Date;function Ko(t,e,r,o){function u(f){return t(f=arguments.length===0?new Date:new Date(+f)),f}return u.floor=f=>(t(f=new Date(+f)),f),u.ceil=f=>(t(f=new Date(f-1)),e(f,1),t(f),f),u.round=f=>{const p=u(f),x=u.ceil(f);return f-p<x-f?p:x},u.offset=(f,p)=>(e(f=new Date(+f),p==null?1:Math.floor(p)),f),u.range=(f,p,x)=>{const s=[];if(f=u.ceil(f),x=x==null?1:Math.floor(x),!(f<p)||!(x>0))return s;let w;do s.push(w=new Date(+f)),e(f,x),t(f);while(w<f&&f<p);return s},u.filter=f=>Ko(p=>{if(p>=p)for(;t(p),!f(p);)p.setTime(p-1)},(p,x)=>{if(p>=p)if(x<0)for(;++x<=0;)for(;e(p,-1),!f(p););else for(;--x>=0;)for(;e(p,1),!f(p););}),r&&(u.count=(f,p)=>(xE.setTime(+f),bE.setTime(+p),t(xE),t(bE),Math.floor(r(xE,bE))),u.every=f=>(f=Math.floor(f),!isFinite(f)||!(f>0)?null:f>1?u.filter(o?p=>o(p)%f===0:p=>u.count(0,p)%f===0):u)),u}const $C=Ko(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);$C.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Ko(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):$C);$C.range;const uh=1e3,zl=uh*60,ch=zl*60,xh=ch*24,ok=xh*7,X6=xh*30,CE=xh*365,bp=Ko(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*uh)},(t,e)=>(e-t)/uh,t=>t.getUTCSeconds());bp.range;const ak=Ko(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*uh)},(t,e)=>{t.setTime(+t+e*zl)},(t,e)=>(e-t)/zl,t=>t.getMinutes());ak.range;const sk=Ko(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*zl)},(t,e)=>(e-t)/zl,t=>t.getUTCMinutes());sk.range;const lk=Ko(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*uh-t.getMinutes()*zl)},(t,e)=>{t.setTime(+t+e*ch)},(t,e)=>(e-t)/ch,t=>t.getHours());lk.range;const uk=Ko(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*ch)},(t,e)=>(e-t)/ch,t=>t.getUTCHours());uk.range;const IB=Ko(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*zl)/xh,t=>t.getDate()-1);IB.range;const uS=Ko(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/xh,t=>t.getUTCDate()-1);uS.range;const fH=Ko(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/xh,t=>Math.floor(t/xh));fH.range;function Yp(t){return Ko(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*zl)/ok)}const cS=Yp(0),UC=Yp(1),vve=Yp(2),Bve=Yp(3),Qg=Yp(4),xve=Yp(5),bve=Yp(6);cS.range;UC.range;vve.range;Bve.range;Qg.range;xve.range;bve.range;function Jp(t){return Ko(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/ok)}const hS=Jp(0),VC=Jp(1),Cve=Jp(2),wve=Jp(3),e_=Jp(4),Sve=Jp(5),Tve=Jp(6);hS.range;VC.range;Cve.range;wve.range;e_.range;Sve.range;Tve.range;const ck=Ko(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());ck.range;const hk=Ko(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());hk.range;const bh=Ko(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());bh.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ko(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});bh.range;const Ch=Ko(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Ch.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ko(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});Ch.range;function dH(t,e,r,o,u,f){const p=[[bp,1,uh],[bp,5,5*uh],[bp,15,15*uh],[bp,30,30*uh],[f,1,zl],[f,5,5*zl],[f,15,15*zl],[f,30,30*zl],[u,1,ch],[u,3,3*ch],[u,6,6*ch],[u,12,12*ch],[o,1,xh],[o,2,2*xh],[r,1,ok],[e,1,X6],[e,3,3*X6],[t,1,CE]];function x(w,I,P){const N=I<w;N&&([w,I]=[I,w]);const U=P&&typeof P.range=="function"?P:s(w,I,P),X=U?U.range(w,+I+1):[];return N?X.reverse():X}function s(w,I,P){const N=Math.abs(I-w)/P,U=Z3(([,,J])=>J).right(p,N);if(U===p.length)return t.every(QM(w/CE,I/CE,P));if(U===0)return $C.every(Math.max(QM(w,I,P),1));const[X,Q]=p[N/p[U-1][2]<p[U][2]/N?U-1:U];return X.every(Q)}return[x,s]}const[Ave,Eve]=dH(Ch,hk,hS,fH,uk,sk),[Dve,Pve]=dH(bh,ck,cS,IB,lk,ak);function wE(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function SE(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function m0(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function Mve(t){var e=t.dateTime,r=t.date,o=t.time,u=t.periods,f=t.days,p=t.shortDays,x=t.months,s=t.shortMonths,w=g0(u),I=_0(u),P=g0(f),N=_0(f),U=g0(p),X=_0(p),Q=g0(x),J=_0(x),Z=g0(s),H=_0(s),K={a:St,A:Le,b:Nt,B:xt,c:null,d:rj,e:rj,f:eBe,g:cBe,G:fBe,H:Yve,I:Jve,j:Qve,L:pH,m:tBe,M:rBe,p:$t,q:Wt,Q:oj,s:aj,S:nBe,u:iBe,U:oBe,V:aBe,w:sBe,W:lBe,x:null,X:null,y:uBe,Y:hBe,Z:dBe,"%":ij},ee={a:Tr,A:Hr,b:Wr,B:zr,c:null,d:nj,e:nj,f:_Be,g:ABe,G:DBe,H:pBe,I:mBe,j:gBe,L:gH,m:yBe,M:vBe,p:jn,q:Ti,Q:oj,s:aj,S:BBe,u:xBe,U:bBe,V:CBe,w:wBe,W:SBe,x:null,X:null,y:TBe,Y:EBe,Z:PBe,"%":ij},se={a:qe,A:je,b:Oe,B:ct,c:ht,d:ej,e:ej,f:Zve,g:Q6,G:J6,H:tj,I:tj,j:Vve,L:Wve,m:Uve,M:Gve,p:De,q:$ve,Q:Kve,s:Xve,S:Hve,u:Rve,U:zve,V:Nve,w:Lve,W:Fve,x:We,X:Je,y:Q6,Y:J6,Z:jve,"%":qve};K.x=me(r,K),K.X=me(o,K),K.c=me(e,K),ee.x=me(r,ee),ee.X=me(o,ee),ee.c=me(e,ee);function me(ur,br){return function(Ur){var kt=[],ii=-1,Er=0,$n=ur.length,ei,vi,Mi;for(Ur instanceof Date||(Ur=new Date(+Ur));++ii<$n;)ur.charCodeAt(ii)===37&&(kt.push(ur.slice(Er,ii)),(vi=Y6[ei=ur.charAt(++ii)])!=null?ei=ur.charAt(++ii):vi=ei==="e"?" ":"0",(Mi=br[ei])&&(ei=Mi(Ur,vi)),kt.push(ei),Er=ii+1);return kt.push(ur.slice(Er,ii)),kt.join("")}}function Ce(ur,br){return function(Ur){var kt=m0(1900,void 0,1),ii=Ae(kt,ur,Ur+="",0),Er,$n;if(ii!=Ur.length)return null;if("Q"in kt)return new Date(kt.Q);if("s"in kt)return new Date(kt.s*1e3+("L"in kt?kt.L:0));if(br&&!("Z"in kt)&&(kt.Z=0),"p"in kt&&(kt.H=kt.H%12+kt.p*12),kt.m===void 0&&(kt.m="q"in kt?kt.q:0),"V"in kt){if(kt.V<1||kt.V>53)return null;"w"in kt||(kt.w=1),"Z"in kt?(Er=SE(m0(kt.y,0,1)),$n=Er.getUTCDay(),Er=$n>4||$n===0?VC.ceil(Er):VC(Er),Er=uS.offset(Er,(kt.V-1)*7),kt.y=Er.getUTCFullYear(),kt.m=Er.getUTCMonth(),kt.d=Er.getUTCDate()+(kt.w+6)%7):(Er=wE(m0(kt.y,0,1)),$n=Er.getDay(),Er=$n>4||$n===0?UC.ceil(Er):UC(Er),Er=IB.offset(Er,(kt.V-1)*7),kt.y=Er.getFullYear(),kt.m=Er.getMonth(),kt.d=Er.getDate()+(kt.w+6)%7)}else("W"in kt||"U"in kt)&&("w"in kt||(kt.w="u"in kt?kt.u%7:"W"in kt?1:0),$n="Z"in kt?SE(m0(kt.y,0,1)).getUTCDay():wE(m0(kt.y,0,1)).getDay(),kt.m=0,kt.d="W"in kt?(kt.w+6)%7+kt.W*7-($n+5)%7:kt.w+kt.U*7-($n+6)%7);return"Z"in kt?(kt.H+=kt.Z/100|0,kt.M+=kt.Z%100,SE(kt)):wE(kt)}}function Ae(ur,br,Ur,kt){for(var ii=0,Er=br.length,$n=Ur.length,ei,vi;ii<Er;){if(kt>=$n)return-1;if(ei=br.charCodeAt(ii++),ei===37){if(ei=br.charAt(ii++),vi=se[ei in Y6?br.charAt(ii++):ei],!vi||(kt=vi(ur,Ur,kt))<0)return-1}else if(ei!=Ur.charCodeAt(kt++))return-1}return kt}function De(ur,br,Ur){var kt=w.exec(br.slice(Ur));return kt?(ur.p=I.get(kt[0].toLowerCase()),Ur+kt[0].length):-1}function qe(ur,br,Ur){var kt=U.exec(br.slice(Ur));return kt?(ur.w=X.get(kt[0].toLowerCase()),Ur+kt[0].length):-1}function je(ur,br,Ur){var kt=P.exec(br.slice(Ur));return kt?(ur.w=N.get(kt[0].toLowerCase()),Ur+kt[0].length):-1}function Oe(ur,br,Ur){var kt=Z.exec(br.slice(Ur));return kt?(ur.m=H.get(kt[0].toLowerCase()),Ur+kt[0].length):-1}function ct(ur,br,Ur){var kt=Q.exec(br.slice(Ur));return kt?(ur.m=J.get(kt[0].toLowerCase()),Ur+kt[0].length):-1}function ht(ur,br,Ur){return Ae(ur,e,br,Ur)}function We(ur,br,Ur){return Ae(ur,r,br,Ur)}function Je(ur,br,Ur){return Ae(ur,o,br,Ur)}function St(ur){return p[ur.getDay()]}function Le(ur){return f[ur.getDay()]}function Nt(ur){return s[ur.getMonth()]}function xt(ur){return x[ur.getMonth()]}function $t(ur){return u[+(ur.getHours()>=12)]}function Wt(ur){return 1+~~(ur.getMonth()/3)}function Tr(ur){return p[ur.getUTCDay()]}function Hr(ur){return f[ur.getUTCDay()]}function Wr(ur){return s[ur.getUTCMonth()]}function zr(ur){return x[ur.getUTCMonth()]}function jn(ur){return u[+(ur.getUTCHours()>=12)]}function Ti(ur){return 1+~~(ur.getUTCMonth()/3)}return{format:function(ur){var br=me(ur+="",K);return br.toString=function(){return ur},br},parse:function(ur){var br=Ce(ur+="",!1);return br.toString=function(){return ur},br},utcFormat:function(ur){var br=me(ur+="",ee);return br.toString=function(){return ur},br},utcParse:function(ur){var br=Ce(ur+="",!0);return br.toString=function(){return ur},br}}}var Y6={"-":"",_:" ",0:"0"},ca=/^\s*\d+/,Ive=/^%/,Ove=/[\\^$*+?|[\]().{}]/g;function li(t,e,r){var o=t<0?"-":"",u=(o?-t:t)+"",f=u.length;return o+(f<r?new Array(r-f+1).join(e)+u:u)}function kve(t){return t.replace(Ove,"\\$&")}function g0(t){return new RegExp("^(?:"+t.map(kve).join("|")+")","i")}function _0(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function Lve(t,e,r){var o=ca.exec(e.slice(r,r+1));return o?(t.w=+o[0],r+o[0].length):-1}function Rve(t,e,r){var o=ca.exec(e.slice(r,r+1));return o?(t.u=+o[0],r+o[0].length):-1}function zve(t,e,r){var o=ca.exec(e.slice(r,r+2));return o?(t.U=+o[0],r+o[0].length):-1}function Nve(t,e,r){var o=ca.exec(e.slice(r,r+2));return o?(t.V=+o[0],r+o[0].length):-1}function Fve(t,e,r){var o=ca.exec(e.slice(r,r+2));return o?(t.W=+o[0],r+o[0].length):-1}function J6(t,e,r){var o=ca.exec(e.slice(r,r+4));return o?(t.y=+o[0],r+o[0].length):-1}function Q6(t,e,r){var o=ca.exec(e.slice(r,r+2));return o?(t.y=+o[0]+(+o[0]>68?1900:2e3),r+o[0].length):-1}function jve(t,e,r){var o=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return o?(t.Z=o[1]?0:-(o[2]+(o[3]||"00")),r+o[0].length):-1}function $ve(t,e,r){var o=ca.exec(e.slice(r,r+1));return o?(t.q=o[0]*3-3,r+o[0].length):-1}function Uve(t,e,r){var o=ca.exec(e.slice(r,r+2));return o?(t.m=o[0]-1,r+o[0].length):-1}function ej(t,e,r){var o=ca.exec(e.slice(r,r+2));return o?(t.d=+o[0],r+o[0].length):-1}function Vve(t,e,r){var o=ca.exec(e.slice(r,r+3));return o?(t.m=0,t.d=+o[0],r+o[0].length):-1}function tj(t,e,r){var o=ca.exec(e.slice(r,r+2));return o?(t.H=+o[0],r+o[0].length):-1}function Gve(t,e,r){var o=ca.exec(e.slice(r,r+2));return o?(t.M=+o[0],r+o[0].length):-1}function Hve(t,e,r){var o=ca.exec(e.slice(r,r+2));return o?(t.S=+o[0],r+o[0].length):-1}function Wve(t,e,r){var o=ca.exec(e.slice(r,r+3));return o?(t.L=+o[0],r+o[0].length):-1}function Zve(t,e,r){var o=ca.exec(e.slice(r,r+6));return o?(t.L=Math.floor(o[0]/1e3),r+o[0].length):-1}function qve(t,e,r){var o=Ive.exec(e.slice(r,r+1));return o?r+o[0].length:-1}function Kve(t,e,r){var o=ca.exec(e.slice(r));return o?(t.Q=+o[0],r+o[0].length):-1}function Xve(t,e,r){var o=ca.exec(e.slice(r));return o?(t.s=+o[0],r+o[0].length):-1}function rj(t,e){return li(t.getDate(),e,2)}function Yve(t,e){return li(t.getHours(),e,2)}function Jve(t,e){return li(t.getHours()%12||12,e,2)}function Qve(t,e){return li(1+IB.count(bh(t),t),e,3)}function pH(t,e){return li(t.getMilliseconds(),e,3)}function eBe(t,e){return pH(t,e)+"000"}function tBe(t,e){return li(t.getMonth()+1,e,2)}function rBe(t,e){return li(t.getMinutes(),e,2)}function nBe(t,e){return li(t.getSeconds(),e,2)}function iBe(t){var e=t.getDay();return e===0?7:e}function oBe(t,e){return li(cS.count(bh(t)-1,t),e,2)}function mH(t){var e=t.getDay();return e>=4||e===0?Qg(t):Qg.ceil(t)}function aBe(t,e){return t=mH(t),li(Qg.count(bh(t),t)+(bh(t).getDay()===4),e,2)}function sBe(t){return t.getDay()}function lBe(t,e){return li(UC.count(bh(t)-1,t),e,2)}function uBe(t,e){return li(t.getFullYear()%100,e,2)}function cBe(t,e){return t=mH(t),li(t.getFullYear()%100,e,2)}function hBe(t,e){return li(t.getFullYear()%1e4,e,4)}function fBe(t,e){var r=t.getDay();return t=r>=4||r===0?Qg(t):Qg.ceil(t),li(t.getFullYear()%1e4,e,4)}function dBe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+li(e/60|0,"0",2)+li(e%60,"0",2)}function nj(t,e){return li(t.getUTCDate(),e,2)}function pBe(t,e){return li(t.getUTCHours(),e,2)}function mBe(t,e){return li(t.getUTCHours()%12||12,e,2)}function gBe(t,e){return li(1+uS.count(Ch(t),t),e,3)}function gH(t,e){return li(t.getUTCMilliseconds(),e,3)}function _Be(t,e){return gH(t,e)+"000"}function yBe(t,e){return li(t.getUTCMonth()+1,e,2)}function vBe(t,e){return li(t.getUTCMinutes(),e,2)}function BBe(t,e){return li(t.getUTCSeconds(),e,2)}function xBe(t){var e=t.getUTCDay();return e===0?7:e}function bBe(t,e){return li(hS.count(Ch(t)-1,t),e,2)}function _H(t){var e=t.getUTCDay();return e>=4||e===0?e_(t):e_.ceil(t)}function CBe(t,e){return t=_H(t),li(e_.count(Ch(t),t)+(Ch(t).getUTCDay()===4),e,2)}function wBe(t){return t.getUTCDay()}function SBe(t,e){return li(VC.count(Ch(t)-1,t),e,2)}function TBe(t,e){return li(t.getUTCFullYear()%100,e,2)}function ABe(t,e){return t=_H(t),li(t.getUTCFullYear()%100,e,2)}function EBe(t,e){return li(t.getUTCFullYear()%1e4,e,4)}function DBe(t,e){var r=t.getUTCDay();return t=r>=4||r===0?e_(t):e_.ceil(t),li(t.getUTCFullYear()%1e4,e,4)}function PBe(){return"+0000"}function ij(){return"%"}function oj(t){return+t}function aj(t){return Math.floor(+t/1e3)}var tg,yH,vH;MBe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function MBe(t){return tg=Mve(t),yH=tg.format,tg.parse,vH=tg.utcFormat,tg.utcParse,tg}function IBe(t){return new Date(t)}function OBe(t){return t instanceof Date?+t:+new Date(+t)}function fk(t,e,r,o,u,f,p,x,s,w){var I=J3(),P=I.invert,N=I.domain,U=w(".%L"),X=w(":%S"),Q=w("%I:%M"),J=w("%I %p"),Z=w("%a %d"),H=w("%b %d"),K=w("%B"),ee=w("%Y");function se(me){return(s(me)<me?U:x(me)<me?X:p(me)<me?Q:f(me)<me?J:o(me)<me?u(me)<me?Z:H:r(me)<me?K:ee)(me)}return I.invert=function(me){return new Date(P(me))},I.domain=function(me){return arguments.length?N(Array.from(me,OBe)):N().map(IBe)},I.ticks=function(me){var Ce=N();return t(Ce[0],Ce[Ce.length-1],me??10)},I.tickFormat=function(me,Ce){return Ce==null?se:w(Ce)},I.nice=function(me){var Ce=N();return(!me||typeof me.range!="function")&&(me=e(Ce[0],Ce[Ce.length-1],me??10)),me?N(oH(Ce,me)):I},I.copy=function(){return MB(I,fk(t,e,r,o,u,f,p,x,s,w))},I}function kBe(){return Gl.apply(fk(Dve,Pve,bh,ck,cS,IB,lk,ak,bp,yH).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function LBe(){return Gl.apply(fk(Ave,Eve,Ch,hk,hS,uS,uk,sk,bp,vH).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function fS(){var t=0,e=1,r,o,u,f,p=is,x=!1,s;function w(P){return P==null||isNaN(P=+P)?s:p(u===0?.5:(P=(f(P)-r)*u,x?Math.max(0,Math.min(1,P)):P))}w.domain=function(P){return arguments.length?([t,e]=P,r=f(t=+t),o=f(e=+e),u=r===o?0:1/(o-r),w):[t,e]},w.clamp=function(P){return arguments.length?(x=!!P,w):x},w.interpolator=function(P){return arguments.length?(p=P,w):p};function I(P){return function(N){var U,X;return arguments.length?([U,X]=N,p=P(U,X),w):[p(0),p(1)]}}return w.range=I(P_),w.rangeRound=I(Y3),w.unknown=function(P){return arguments.length?(s=P,w):s},function(P){return f=P,r=P(t),o=P(e),u=r===o?0:1/(o-r),w}}function sd(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function BH(){var t=ad(fS()(is));return t.copy=function(){return sd(t,BH())},Dh.apply(t,arguments)}function xH(){var t=tk(fS()).domain([1,10]);return t.copy=function(){return sd(t,xH()).base(t.base())},Dh.apply(t,arguments)}function bH(){var t=rk(fS());return t.copy=function(){return sd(t,bH()).constant(t.constant())},Dh.apply(t,arguments)}function dk(){var t=nk(fS());return t.copy=function(){return sd(t,dk()).exponent(t.exponent())},Dh.apply(t,arguments)}function RBe(){return dk.apply(null,arguments).exponent(.5)}function CH(){var t=[],e=is;function r(o){if(o!=null&&!isNaN(o=+o))return e((DB(t,o,1)-1)/(t.length-1))}return r.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let u of o)u!=null&&!isNaN(u=+u)&&t.push(u);return t.sort(Kf),r},r.interpolator=function(o){return arguments.length?(e=o,r):e},r.range=function(){return t.map((o,u)=>e(u/(t.length-1)))},r.quantiles=function(o){return Array.from({length:o+1},(u,f)=>b0e(t,f/o))},r.copy=function(){return CH(e).domain(t)},Dh.apply(r,arguments)}function dS(){var t=0,e=.5,r=1,o=1,u,f,p,x,s,w=is,I,P=!1,N;function U(Q){return isNaN(Q=+Q)?N:(Q=.5+((Q=+I(Q))-f)*(o*Q<o*f?x:s),w(P?Math.max(0,Math.min(1,Q)):Q))}U.domain=function(Q){return arguments.length?([t,e,r]=Q,u=I(t=+t),f=I(e=+e),p=I(r=+r),x=u===f?0:.5/(f-u),s=f===p?0:.5/(p-f),o=f<u?-1:1,U):[t,e,r]},U.clamp=function(Q){return arguments.length?(P=!!Q,U):P},U.interpolator=function(Q){return arguments.length?(w=Q,U):w};function X(Q){return function(J){var Z,H,K;return arguments.length?([Z,H,K]=J,w=q0e(Q,[Z,H,K]),U):[w(0),w(.5),w(1)]}}return U.range=X(P_),U.rangeRound=X(Y3),U.unknown=function(Q){return arguments.length?(N=Q,U):N},function(Q){return I=Q,u=Q(t),f=Q(e),p=Q(r),x=u===f?0:.5/(f-u),s=f===p?0:.5/(p-f),o=f<u?-1:1,U}}function wH(){var t=ad(dS()(is));return t.copy=function(){return sd(t,wH())},Dh.apply(t,arguments)}function SH(){var t=tk(dS()).domain([.1,1,10]);return t.copy=function(){return sd(t,SH()).base(t.base())},Dh.apply(t,arguments)}function TH(){var t=rk(dS());return t.copy=function(){return sd(t,TH()).constant(t.constant())},Dh.apply(t,arguments)}function pk(){var t=nk(dS());return t.copy=function(){return sd(t,pk()).exponent(t.exponent())},Dh.apply(t,arguments)}function zBe(){return pk.apply(null,arguments).exponent(.5)}const sj=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Iv,scaleDiverging:wH,scaleDivergingLog:SH,scaleDivergingPow:pk,scaleDivergingSqrt:zBe,scaleDivergingSymlog:TH,scaleIdentity:iH,scaleImplicit:eI,scaleLinear:jC,scaleLog:aH,scaleOrdinal:q3,scalePoint:K0,scalePow:ik,scaleQuantile:uH,scaleQuantize:cH,scaleRadial:lH,scaleSequential:BH,scaleSequentialLog:xH,scaleSequentialPow:dk,scaleSequentialQuantile:CH,scaleSequentialSqrt:RBe,scaleSequentialSymlog:bH,scaleSqrt:_ve,scaleSymlog:sH,scaleThreshold:hH,scaleTime:kBe,scaleUtc:LBe,tickFormat:nH},Symbol.toStringTag,{value:"Module"}));var NBe=x_;function FBe(t,e,r){for(var o=-1,u=t.length;++o<u;){var f=t[o],p=e(f);if(p!=null&&(x===void 0?p===p&&!NBe(p):r(p,x)))var x=p,s=f}return s}var AH=FBe;function jBe(t,e){return t>e}var $Be=jBe,UBe=AH,VBe=$Be,GBe=D_;function HBe(t){return t&&t.length?UBe(t,GBe,VBe):void 0}var WBe=HBe;const Rf=wi(WBe);function ZBe(t,e){return t<e}var qBe=ZBe,KBe=AH,XBe=qBe,YBe=D_;function JBe(t){return t&&t.length?KBe(t,YBe,XBe):void 0}var QBe=JBe;const pS=wi(QBe);var e1e=A3,t1e=od,r1e=R9,n1e=Ds;function i1e(t,e){var r=n1e(t)?e1e:r1e;return r(t,t1e(e))}var o1e=i1e,a1e=k9,s1e=o1e;function l1e(t,e){return a1e(s1e(t,e),1)}var u1e=l1e;const c1e=wi(u1e);var h1e=U3;function f1e(t,e){return h1e(t,e)}var d1e=f1e;const Fp=wi(d1e);var M_=1e9,p1e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},gk,no=!0,Ul="[DecimalError] ",Dp=Ul+"Invalid argument: ",mk=Ul+"Exponent out of range: ",I_=Math.floor,mp=Math.pow,m1e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Qs,oa=1e7,Xi=7,EH=9007199254740991,GC=I_(EH/Xi),Sr={};Sr.absoluteValue=Sr.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Sr.comparedTo=Sr.cmp=function(t){var e,r,o,u,f=this;if(t=new f.constructor(t),f.s!==t.s)return f.s||-t.s;if(f.e!==t.e)return f.e>t.e^f.s<0?1:-1;for(o=f.d.length,u=t.d.length,e=0,r=o<u?o:u;e<r;++e)if(f.d[e]!==t.d[e])return f.d[e]>t.d[e]^f.s<0?1:-1;return o===u?0:o>u^f.s<0?1:-1};Sr.decimalPlaces=Sr.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*Xi;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};Sr.dividedBy=Sr.div=function(t){return mh(this,new this.constructor(t))};Sr.dividedToIntegerBy=Sr.idiv=function(t){var e=this,r=e.constructor;return Li(mh(e,new r(t),0,1),r.precision)};Sr.equals=Sr.eq=function(t){return!this.cmp(t)};Sr.exponent=function(){return Ro(this)};Sr.greaterThan=Sr.gt=function(t){return this.cmp(t)>0};Sr.greaterThanOrEqualTo=Sr.gte=function(t){return this.cmp(t)>=0};Sr.isInteger=Sr.isint=function(){return this.e>this.d.length-2};Sr.isNegative=Sr.isneg=function(){return this.s<0};Sr.isPositive=Sr.ispos=function(){return this.s>0};Sr.isZero=function(){return this.s===0};Sr.lessThan=Sr.lt=function(t){return this.cmp(t)<0};Sr.lessThanOrEqualTo=Sr.lte=function(t){return this.cmp(t)<1};Sr.logarithm=Sr.log=function(t){var e,r=this,o=r.constructor,u=o.precision,f=u+5;if(t===void 0)t=new o(10);else if(t=new o(t),t.s<1||t.eq(Qs))throw Error(Ul+"NaN");if(r.s<1)throw Error(Ul+(r.s?"NaN":"-Infinity"));return r.eq(Qs)?new o(0):(no=!1,e=mh(zv(r,f),zv(t,f),f),no=!0,Li(e,u))};Sr.minus=Sr.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?MH(e,t):DH(e,(t.s=-t.s,t))};Sr.modulo=Sr.mod=function(t){var e,r=this,o=r.constructor,u=o.precision;if(t=new o(t),!t.s)throw Error(Ul+"NaN");return r.s?(no=!1,e=mh(r,t,0,1).times(t),no=!0,r.minus(e)):Li(new o(r),u)};Sr.naturalExponential=Sr.exp=function(){return PH(this)};Sr.naturalLogarithm=Sr.ln=function(){return zv(this)};Sr.negated=Sr.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Sr.plus=Sr.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?DH(e,t):MH(e,(t.s=-t.s,t))};Sr.precision=Sr.sd=function(t){var e,r,o,u=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Dp+t);if(e=Ro(u)+1,o=u.d.length-1,r=o*Xi+1,o=u.d[o],o){for(;o%10==0;o/=10)r--;for(o=u.d[0];o>=10;o/=10)r++}return t&&e>r?e:r};Sr.squareRoot=Sr.sqrt=function(){var t,e,r,o,u,f,p,x=this,s=x.constructor;if(x.s<1){if(!x.s)return new s(0);throw Error(Ul+"NaN")}for(t=Ro(x),no=!1,u=Math.sqrt(+x),u==0||u==1/0?(e=mc(x.d),(e.length+t)%2==0&&(e+="0"),u=Math.sqrt(e),t=I_((t+1)/2)-(t<0||t%2),u==1/0?e="5e"+t:(e=u.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),o=new s(e)):o=new s(u.toString()),r=s.precision,u=p=r+3;;)if(f=o,o=f.plus(mh(x,f,p+2)).times(.5),mc(f.d).slice(0,p)===(e=mc(o.d)).slice(0,p)){if(e=e.slice(p-3,p+1),u==p&&e=="4999"){if(Li(f,r+1,0),f.times(f).eq(x)){o=f;break}}else if(e!="9999")break;p+=4}return no=!0,Li(o,r)};Sr.times=Sr.mul=function(t){var e,r,o,u,f,p,x,s,w,I=this,P=I.constructor,N=I.d,U=(t=new P(t)).d;if(!I.s||!t.s)return new P(0);for(t.s*=I.s,r=I.e+t.e,s=N.length,w=U.length,s<w&&(f=N,N=U,U=f,p=s,s=w,w=p),f=[],p=s+w,o=p;o--;)f.push(0);for(o=w;--o>=0;){for(e=0,u=s+o;u>o;)x=f[u]+U[o]*N[u-o-1]+e,f[u--]=x%oa|0,e=x/oa|0;f[u]=(f[u]+e)%oa|0}for(;!f[--p];)f.pop();return e?++r:f.shift(),t.d=f,t.e=r,no?Li(t,P.precision):t};Sr.toDecimalPlaces=Sr.todp=function(t,e){var r=this,o=r.constructor;return r=new o(r),t===void 0?r:(bc(t,0,M_),e===void 0?e=o.rounding:bc(e,0,8),Li(r,t+Ro(r)+1,e))};Sr.toExponential=function(t,e){var r,o=this,u=o.constructor;return t===void 0?r=jp(o,!0):(bc(t,0,M_),e===void 0?e=u.rounding:bc(e,0,8),o=Li(new u(o),t+1,e),r=jp(o,!0,t+1)),r};Sr.toFixed=function(t,e){var r,o,u=this,f=u.constructor;return t===void 0?jp(u):(bc(t,0,M_),e===void 0?e=f.rounding:bc(e,0,8),o=Li(new f(u),t+Ro(u)+1,e),r=jp(o.abs(),!1,t+Ro(o)+1),u.isneg()&&!u.isZero()?"-"+r:r)};Sr.toInteger=Sr.toint=function(){var t=this,e=t.constructor;return Li(new e(t),Ro(t)+1,e.rounding)};Sr.toNumber=function(){return+this};Sr.toPower=Sr.pow=function(t){var e,r,o,u,f,p,x=this,s=x.constructor,w=12,I=+(t=new s(t));if(!t.s)return new s(Qs);if(x=new s(x),!x.s){if(t.s<1)throw Error(Ul+"Infinity");return x}if(x.eq(Qs))return x;if(o=s.precision,t.eq(Qs))return Li(x,o);if(e=t.e,r=t.d.length-1,p=e>=r,f=x.s,p){if((r=I<0?-I:I)<=EH){for(u=new s(Qs),e=Math.ceil(o/Xi+4),no=!1;r%2&&(u=u.times(x),uj(u.d,e)),r=I_(r/2),r!==0;)x=x.times(x),uj(x.d,e);return no=!0,t.s<0?new s(Qs).div(u):Li(u,o)}}else if(f<0)throw Error(Ul+"NaN");return f=f<0&&t.d[Math.max(e,r)]&1?-1:1,x.s=1,no=!1,u=t.times(zv(x,o+w)),no=!0,u=PH(u),u.s=f,u};Sr.toPrecision=function(t,e){var r,o,u=this,f=u.constructor;return t===void 0?(r=Ro(u),o=jp(u,r<=f.toExpNeg||r>=f.toExpPos)):(bc(t,1,M_),e===void 0?e=f.rounding:bc(e,0,8),u=Li(new f(u),t,e),r=Ro(u),o=jp(u,t<=r||r<=f.toExpNeg,t)),o};Sr.toSignificantDigits=Sr.tosd=function(t,e){var r=this,o=r.constructor;return t===void 0?(t=o.precision,e=o.rounding):(bc(t,1,M_),e===void 0?e=o.rounding:bc(e,0,8)),Li(new o(r),t,e)};Sr.toString=Sr.valueOf=Sr.val=Sr.toJSON=Sr[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Ro(t),r=t.constructor;return jp(t,e<=r.toExpNeg||e>=r.toExpPos)};function DH(t,e){var r,o,u,f,p,x,s,w,I=t.constructor,P=I.precision;if(!t.s||!e.s)return e.s||(e=new I(t)),no?Li(e,P):e;if(s=t.d,w=e.d,p=t.e,u=e.e,s=s.slice(),f=p-u,f){for(f<0?(o=s,f=-f,x=w.length):(o=w,u=p,x=s.length),p=Math.ceil(P/Xi),x=p>x?p+1:x+1,f>x&&(f=x,o.length=1),o.reverse();f--;)o.push(0);o.reverse()}for(x=s.length,f=w.length,x-f<0&&(f=x,o=w,w=s,s=o),r=0;f;)r=(s[--f]=s[f]+w[f]+r)/oa|0,s[f]%=oa;for(r&&(s.unshift(r),++u),x=s.length;s[--x]==0;)s.pop();return e.d=s,e.e=u,no?Li(e,P):e}function bc(t,e,r){if(t!==~~t||t<e||t>r)throw Error(Dp+t)}function mc(t){var e,r,o,u=t.length-1,f="",p=t[0];if(u>0){for(f+=p,e=1;e<u;e++)o=t[e]+"",r=Xi-o.length,r&&(f+=Tf(r)),f+=o;p=t[e],o=p+"",r=Xi-o.length,r&&(f+=Tf(r))}else if(p===0)return"0";for(;p%10===0;)p/=10;return f+p}var mh=function(){function t(o,u){var f,p=0,x=o.length;for(o=o.slice();x--;)f=o[x]*u+p,o[x]=f%oa|0,p=f/oa|0;return p&&o.unshift(p),o}function e(o,u,f,p){var x,s;if(f!=p)s=f>p?1:-1;else for(x=s=0;x<f;x++)if(o[x]!=u[x]){s=o[x]>u[x]?1:-1;break}return s}function r(o,u,f){for(var p=0;f--;)o[f]-=p,p=o[f]<u[f]?1:0,o[f]=p*oa+o[f]-u[f];for(;!o[0]&&o.length>1;)o.shift()}return function(o,u,f,p){var x,s,w,I,P,N,U,X,Q,J,Z,H,K,ee,se,me,Ce,Ae,De=o.constructor,qe=o.s==u.s?1:-1,je=o.d,Oe=u.d;if(!o.s)return new De(o);if(!u.s)throw Error(Ul+"Division by zero");for(s=o.e-u.e,Ce=Oe.length,se=je.length,U=new De(qe),X=U.d=[],w=0;Oe[w]==(je[w]||0);)++w;if(Oe[w]>(je[w]||0)&&--s,f==null?H=f=De.precision:p?H=f+(Ro(o)-Ro(u))+1:H=f,H<0)return new De(0);if(H=H/Xi+2|0,w=0,Ce==1)for(I=0,Oe=Oe[0],H++;(w<se||I)&&H--;w++)K=I*oa+(je[w]||0),X[w]=K/Oe|0,I=K%Oe|0;else{for(I=oa/(Oe[0]+1)|0,I>1&&(Oe=t(Oe,I),je=t(je,I),Ce=Oe.length,se=je.length),ee=Ce,Q=je.slice(0,Ce),J=Q.length;J<Ce;)Q[J++]=0;Ae=Oe.slice(),Ae.unshift(0),me=Oe[0],Oe[1]>=oa/2&&++me;do I=0,x=e(Oe,Q,Ce,J),x<0?(Z=Q[0],Ce!=J&&(Z=Z*oa+(Q[1]||0)),I=Z/me|0,I>1?(I>=oa&&(I=oa-1),P=t(Oe,I),N=P.length,J=Q.length,x=e(P,Q,N,J),x==1&&(I--,r(P,Ce<N?Ae:Oe,N))):(I==0&&(x=I=1),P=Oe.slice()),N=P.length,N<J&&P.unshift(0),r(Q,P,J),x==-1&&(J=Q.length,x=e(Oe,Q,Ce,J),x<1&&(I++,r(Q,Ce<J?Ae:Oe,J))),J=Q.length):x===0&&(I++,Q=[0]),X[w++]=I,x&&Q[0]?Q[J++]=je[ee]||0:(Q=[je[ee]],J=1);while((ee++<se||Q[0]!==void 0)&&H--)}return X[0]||X.shift(),U.e=s,Li(U,p?f+Ro(U)+1:f)}}();function PH(t,e){var r,o,u,f,p,x,s=0,w=0,I=t.constructor,P=I.precision;if(Ro(t)>16)throw Error(mk+Ro(t));if(!t.s)return new I(Qs);for(e==null?(no=!1,x=P):x=e,p=new I(.03125);t.abs().gte(.1);)t=t.times(p),w+=5;for(o=Math.log(mp(2,w))/Math.LN10*2+5|0,x+=o,r=u=f=new I(Qs),I.precision=x;;){if(u=Li(u.times(t),x),r=r.times(++s),p=f.plus(mh(u,r,x)),mc(p.d).slice(0,x)===mc(f.d).slice(0,x)){for(;w--;)f=Li(f.times(f),x);return I.precision=P,e==null?(no=!0,Li(f,P)):f}f=p}}function Ro(t){for(var e=t.e*Xi,r=t.d[0];r>=10;r/=10)e++;return e}function TE(t,e,r){if(e>t.LN10.sd())throw no=!0,r&&(t.precision=r),Error(Ul+"LN10 precision limit exceeded");return Li(new t(t.LN10),e)}function Tf(t){for(var e="";t--;)e+="0";return e}function zv(t,e){var r,o,u,f,p,x,s,w,I,P=1,N=10,U=t,X=U.d,Q=U.constructor,J=Q.precision;if(U.s<1)throw Error(Ul+(U.s?"NaN":"-Infinity"));if(U.eq(Qs))return new Q(0);if(e==null?(no=!1,w=J):w=e,U.eq(10))return e==null&&(no=!0),TE(Q,w);if(w+=N,Q.precision=w,r=mc(X),o=r.charAt(0),f=Ro(U),Math.abs(f)<15e14){for(;o<7&&o!=1||o==1&&r.charAt(1)>3;)U=U.times(t),r=mc(U.d),o=r.charAt(0),P++;f=Ro(U),o>1?(U=new Q("0."+r),f++):U=new Q(o+"."+r.slice(1))}else return s=TE(Q,w+2,J).times(f+""),U=zv(new Q(o+"."+r.slice(1)),w-N).plus(s),Q.precision=J,e==null?(no=!0,Li(U,J)):U;for(x=p=U=mh(U.minus(Qs),U.plus(Qs),w),I=Li(U.times(U),w),u=3;;){if(p=Li(p.times(I),w),s=x.plus(mh(p,new Q(u),w)),mc(s.d).slice(0,w)===mc(x.d).slice(0,w))return x=x.times(2),f!==0&&(x=x.plus(TE(Q,w+2,J).times(f+""))),x=mh(x,new Q(P),w),Q.precision=J,e==null?(no=!0,Li(x,J)):x;x=s,u+=2}}function lj(t,e){var r,o,u;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(o=e.search(/e/i))>0?(r<0&&(r=o),r+=+e.slice(o+1),e=e.substring(0,o)):r<0&&(r=e.length),o=0;e.charCodeAt(o)===48;)++o;for(u=e.length;e.charCodeAt(u-1)===48;)--u;if(e=e.slice(o,u),e){if(u-=o,r=r-o-1,t.e=I_(r/Xi),t.d=[],o=(r+1)%Xi,r<0&&(o+=Xi),o<u){for(o&&t.d.push(+e.slice(0,o)),u-=Xi;o<u;)t.d.push(+e.slice(o,o+=Xi));e=e.slice(o),o=Xi-e.length}else o-=u;for(;o--;)e+="0";if(t.d.push(+e),no&&(t.e>GC||t.e<-GC))throw Error(mk+r)}else t.s=0,t.e=0,t.d=[0];return t}function Li(t,e,r){var o,u,f,p,x,s,w,I,P=t.d;for(p=1,f=P[0];f>=10;f/=10)p++;if(o=e-p,o<0)o+=Xi,u=e,w=P[I=0];else{if(I=Math.ceil((o+1)/Xi),f=P.length,I>=f)return t;for(w=f=P[I],p=1;f>=10;f/=10)p++;o%=Xi,u=o-Xi+p}if(r!==void 0&&(f=mp(10,p-u-1),x=w/f%10|0,s=e<0||P[I+1]!==void 0||w%f,s=r<4?(x||s)&&(r==0||r==(t.s<0?3:2)):x>5||x==5&&(r==4||s||r==6&&(o>0?u>0?w/mp(10,p-u):0:P[I-1])%10&1||r==(t.s<0?8:7))),e<1||!P[0])return s?(f=Ro(t),P.length=1,e=e-f-1,P[0]=mp(10,(Xi-e%Xi)%Xi),t.e=I_(-e/Xi)||0):(P.length=1,P[0]=t.e=t.s=0),t;if(o==0?(P.length=I,f=1,I--):(P.length=I+1,f=mp(10,Xi-o),P[I]=u>0?(w/mp(10,p-u)%mp(10,u)|0)*f:0),s)for(;;)if(I==0){(P[0]+=f)==oa&&(P[0]=1,++t.e);break}else{if(P[I]+=f,P[I]!=oa)break;P[I--]=0,f=1}for(o=P.length;P[--o]===0;)P.pop();if(no&&(t.e>GC||t.e<-GC))throw Error(mk+Ro(t));return t}function MH(t,e){var r,o,u,f,p,x,s,w,I,P,N=t.constructor,U=N.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new N(t),no?Li(e,U):e;if(s=t.d,P=e.d,o=e.e,w=t.e,s=s.slice(),p=w-o,p){for(I=p<0,I?(r=s,p=-p,x=P.length):(r=P,o=w,x=s.length),u=Math.max(Math.ceil(U/Xi),x)+2,p>u&&(p=u,r.length=1),r.reverse(),u=p;u--;)r.push(0);r.reverse()}else{for(u=s.length,x=P.length,I=u<x,I&&(x=u),u=0;u<x;u++)if(s[u]!=P[u]){I=s[u]<P[u];break}p=0}for(I&&(r=s,s=P,P=r,e.s=-e.s),x=s.length,u=P.length-x;u>0;--u)s[x++]=0;for(u=P.length;u>p;){if(s[--u]<P[u]){for(f=u;f&&s[--f]===0;)s[f]=oa-1;--s[f],s[u]+=oa}s[u]-=P[u]}for(;s[--x]===0;)s.pop();for(;s[0]===0;s.shift())--o;return s[0]?(e.d=s,e.e=o,no?Li(e,U):e):new N(0)}function jp(t,e,r){var o,u=Ro(t),f=mc(t.d),p=f.length;return e?(r&&(o=r-p)>0?f=f.charAt(0)+"."+f.slice(1)+Tf(o):p>1&&(f=f.charAt(0)+"."+f.slice(1)),f=f+(u<0?"e":"e+")+u):u<0?(f="0."+Tf(-u-1)+f,r&&(o=r-p)>0&&(f+=Tf(o))):u>=p?(f+=Tf(u+1-p),r&&(o=r-u-1)>0&&(f=f+"."+Tf(o))):((o=u+1)<p&&(f=f.slice(0,o)+"."+f.slice(o)),r&&(o=r-p)>0&&(u+1===p&&(f+="."),f+=Tf(o))),t.s<0?"-"+f:f}function uj(t,e){if(t.length>e)return t.length=e,!0}function IH(t){var e,r,o;function u(f){var p=this;if(!(p instanceof u))return new u(f);if(p.constructor=u,f instanceof u){p.s=f.s,p.e=f.e,p.d=(f=f.d)?f.slice():f;return}if(typeof f=="number"){if(f*0!==0)throw Error(Dp+f);if(f>0)p.s=1;else if(f<0)f=-f,p.s=-1;else{p.s=0,p.e=0,p.d=[0];return}if(f===~~f&&f<1e7){p.e=0,p.d=[f];return}return lj(p,f.toString())}else if(typeof f!="string")throw Error(Dp+f);if(f.charCodeAt(0)===45?(f=f.slice(1),p.s=-1):p.s=1,m1e.test(f))lj(p,f);else throw Error(Dp+f)}if(u.prototype=Sr,u.ROUND_UP=0,u.ROUND_DOWN=1,u.ROUND_CEIL=2,u.ROUND_FLOOR=3,u.ROUND_HALF_UP=4,u.ROUND_HALF_DOWN=5,u.ROUND_HALF_EVEN=6,u.ROUND_HALF_CEIL=7,u.ROUND_HALF_FLOOR=8,u.clone=IH,u.config=u.set=g1e,t===void 0&&(t={}),t)for(o=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<o.length;)t.hasOwnProperty(r=o[e++])||(t[r]=this[r]);return u.config(t),u}function g1e(t){if(!t||typeof t!="object")throw Error(Ul+"Object expected");var e,r,o,u=["precision",1,M_,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<u.length;e+=3)if((o=t[r=u[e]])!==void 0)if(I_(o)===o&&o>=u[e+1]&&o<=u[e+2])this[r]=o;else throw Error(Dp+r+": "+o);if((o=t[r="LN10"])!==void 0)if(o==Math.LN10)this[r]=new this(o);else throw Error(Dp+r+": "+o);return this}var gk=IH(p1e);Qs=new gk(1);const Pi=gk;function _1e(t){return x1e(t)||B1e(t)||v1e(t)||y1e()}function y1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function v1e(t,e){if(t){if(typeof t=="string")return iI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iI(t,e)}}function B1e(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function x1e(t){if(Array.isArray(t))return iI(t)}function iI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,o=new Array(e);r<e;r++)o[r]=t[r];return o}var b1e=function(e){return e},OH={"@@functional/placeholder":!0},kH=function(e){return e===OH},cj=function(e){return function r(){return arguments.length===0||arguments.length===1&&kH(arguments.length<=0?void 0:arguments[0])?r:e.apply(void 0,arguments)}},C1e=function t(e,r){return e===1?r:cj(function(){for(var o=arguments.length,u=new Array(o),f=0;f<o;f++)u[f]=arguments[f];var p=u.filter(function(x){return x!==OH}).length;return p>=e?r.apply(void 0,u):t(e-p,cj(function(){for(var x=arguments.length,s=new Array(x),w=0;w<x;w++)s[w]=arguments[w];var I=u.map(function(P){return kH(P)?s.shift():P});return r.apply(void 0,_1e(I).concat(s))}))})},mS=function(e){return C1e(e.length,e)},oI=function(e,r){for(var o=[],u=e;u<r;++u)o[u-e]=u;return o},w1e=mS(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(r){return e[r]}).map(t)}),S1e=function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];if(!r.length)return b1e;var u=r.reverse(),f=u[0],p=u.slice(1);return function(){return p.reduce(function(x,s){return s(x)},f.apply(void 0,arguments))}},aI=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},LH=function(e){var r=null,o=null;return function(){for(var u=arguments.length,f=new Array(u),p=0;p<u;p++)f[p]=arguments[p];return r&&f.every(function(x,s){return x===r[s]})||(r=f,o=e.apply(void 0,f)),o}};function T1e(t){var e;return t===0?e=1:e=Math.floor(new Pi(t).abs().log(10).toNumber())+1,e}function A1e(t,e,r){for(var o=new Pi(t),u=0,f=[];o.lt(e)&&u<1e5;)f.push(o.toNumber()),o=o.add(r),u++;return f}var E1e=mS(function(t,e,r){var o=+t,u=+e;return o+r*(u-o)}),D1e=mS(function(t,e,r){var o=e-+t;return o=o||1/0,(r-t)/o}),P1e=mS(function(t,e,r){var o=e-+t;return o=o||1/0,Math.max(0,Math.min(1,(r-t)/o))});const gS={rangeStep:A1e,getDigitCount:T1e,interpolateNumber:E1e,uninterpolateNumber:D1e,uninterpolateTruncation:P1e};function sI(t){return O1e(t)||I1e(t)||RH(t)||M1e()}function M1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function I1e(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function O1e(t){if(Array.isArray(t))return lI(t)}function Nv(t,e){return R1e(t)||L1e(t,e)||RH(t,e)||k1e()}function k1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RH(t,e){if(t){if(typeof t=="string")return lI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lI(t,e)}}function lI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,o=new Array(e);r<e;r++)o[r]=t[r];return o}function L1e(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var r=[],o=!0,u=!1,f=void 0;try{for(var p=t[Symbol.iterator](),x;!(o=(x=p.next()).done)&&(r.push(x.value),!(e&&r.length===e));o=!0);}catch(s){u=!0,f=s}finally{try{!o&&p.return!=null&&p.return()}finally{if(u)throw f}}return r}}function R1e(t){if(Array.isArray(t))return t}function zH(t){var e=Nv(t,2),r=e[0],o=e[1],u=r,f=o;return r>o&&(u=o,f=r),[u,f]}function NH(t,e,r){if(t.lte(0))return new Pi(0);var o=gS.getDigitCount(t.toNumber()),u=new Pi(10).pow(o),f=t.div(u),p=o!==1?.05:.1,x=new Pi(Math.ceil(f.div(p).toNumber())).add(r).mul(p),s=x.mul(u);return e?s:new Pi(Math.ceil(s))}function z1e(t,e,r){var o=1,u=new Pi(t);if(!u.isint()&&r){var f=Math.abs(t);f<1?(o=new Pi(10).pow(gS.getDigitCount(t)-1),u=new Pi(Math.floor(u.div(o).toNumber())).mul(o)):f>1&&(u=new Pi(Math.floor(t)))}else t===0?u=new Pi(Math.floor((e-1)/2)):r||(u=new Pi(Math.floor(t)));var p=Math.floor((e-1)/2),x=S1e(w1e(function(s){return u.add(new Pi(s-p).mul(o)).toNumber()}),oI);return x(0,e)}function FH(t,e,r,o){var u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(r-1)))return{step:new Pi(0),tickMin:new Pi(0),tickMax:new Pi(0)};var f=NH(new Pi(e).sub(t).div(r-1),o,u),p;t<=0&&e>=0?p=new Pi(0):(p=new Pi(t).add(e).div(2),p=p.sub(new Pi(p).mod(f)));var x=Math.ceil(p.sub(t).div(f).toNumber()),s=Math.ceil(new Pi(e).sub(p).div(f).toNumber()),w=x+s+1;return w>r?FH(t,e,r,o,u+1):(w<r&&(s=e>0?s+(r-w):s,x=e>0?x:x+(r-w)),{step:f,tickMin:p.sub(new Pi(x).mul(f)),tickMax:p.add(new Pi(s).mul(f))})}function N1e(t){var e=Nv(t,2),r=e[0],o=e[1],u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,p=Math.max(u,2),x=zH([r,o]),s=Nv(x,2),w=s[0],I=s[1];if(w===-1/0||I===1/0){var P=I===1/0?[w].concat(sI(oI(0,u-1).map(function(){return 1/0}))):[].concat(sI(oI(0,u-1).map(function(){return-1/0})),[I]);return r>o?aI(P):P}if(w===I)return z1e(w,u,f);var N=FH(w,I,p,f),U=N.step,X=N.tickMin,Q=N.tickMax,J=gS.rangeStep(X,Q.add(new Pi(.1).mul(U)),U);return r>o?aI(J):J}function F1e(t,e){var r=Nv(t,2),o=r[0],u=r[1],f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,p=zH([o,u]),x=Nv(p,2),s=x[0],w=x[1];if(s===-1/0||w===1/0)return[o,u];if(s===w)return[s];var I=Math.max(e,2),P=NH(new Pi(w).sub(s).div(I-1),f,0),N=[].concat(sI(gS.rangeStep(new Pi(s),new Pi(w).sub(new Pi(.99).mul(P)),P)),[w]);return o>u?aI(N):N}var j1e=LH(N1e),$1e=LH(F1e),U1e="Invariant failed";function $p(t,e){if(!t)throw new Error(U1e)}var V1e=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function HC(){return HC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},HC.apply(this,arguments)}function G1e(t,e){return q1e(t)||Z1e(t,e)||W1e(t,e)||H1e()}function H1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function W1e(t,e){if(t){if(typeof t=="string")return hj(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hj(t,e)}}function hj(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,o=new Array(e);r<e;r++)o[r]=t[r];return o}function Z1e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var o,u,f,p,x=[],s=!0,w=!1;try{if(f=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;s=!1}else for(;!(s=(o=f.call(r)).done)&&(x.push(o.value),x.length!==e);s=!0);}catch(I){w=!0,u=I}finally{try{if(!s&&r.return!=null&&(p=r.return(),Object(p)!==p))return}finally{if(w)throw u}}return x}}function q1e(t){if(Array.isArray(t))return t}function K1e(t,e){if(t==null)return{};var r=X1e(t,e),o,u;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(t);for(u=0;u<f.length;u++)o=f[u],!(e.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(t,o)&&(r[o]=t[o])}return r}function X1e(t,e){if(t==null)return{};var r={},o=Object.keys(t),u,f;for(f=0;f<o.length;f++)u=o[f],!(e.indexOf(u)>=0)&&(r[u]=t[u]);return r}function O_(t){var e=t.offset,r=t.layout,o=t.width,u=t.dataKey,f=t.data,p=t.dataPointFormatter,x=t.xAxis,s=t.yAxis,w=K1e(t,V1e),I=An(w,!1);t.direction==="x"&&x.type!=="number"&&$p(!1);var P=f.map(function(N){var U=p(N,u),X=U.x,Q=U.y,J=U.value,Z=U.errorVal;if(!Z)return null;var H=[],K,ee;if(Array.isArray(Z)){var se=G1e(Z,2);K=se[0],ee=se[1]}else K=ee=Z;if(r==="vertical"){var me=x.scale,Ce=Q+e,Ae=Ce+o,De=Ce-o,qe=me(J-K),je=me(J+ee);H.push({x1:je,y1:Ae,x2:je,y2:De}),H.push({x1:qe,y1:Ce,x2:je,y2:Ce}),H.push({x1:qe,y1:Ae,x2:qe,y2:De})}else if(r==="horizontal"){var Oe=s.scale,ct=X+e,ht=ct-o,We=ct+o,Je=Oe(J-K),St=Oe(J+ee);H.push({x1:ht,y1:St,x2:We,y2:St}),H.push({x1:ct,y1:Je,x2:ct,y2:St}),H.push({x1:ht,y1:Je,x2:We,y2:Je})}return Ue.createElement(hi,HC({className:"recharts-errorBar",key:"bar-".concat(H.map(function(Le){return"".concat(Le.x1,"-").concat(Le.x2,"-").concat(Le.y1,"-").concat(Le.y2)}))},I),H.map(function(Le){return Ue.createElement("line",HC({},Le,{key:"line-".concat(Le.x1,"-").concat(Le.x2,"-").concat(Le.y1,"-").concat(Le.y2)}))}))});return Ue.createElement(hi,{className:"recharts-errorBars"},P)}O_.defaultProps={stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"};O_.displayName="ErrorBar";function Fv(t){"@babel/helpers - typeof";return Fv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fv(t)}function fj(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),r.push.apply(r,o)}return r}function AE(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?fj(Object(r),!0).forEach(function(o){Y1e(t,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fj(Object(r)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(r,o))})}return t}function Y1e(t,e,r){return e=J1e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function J1e(t){var e=Q1e(t,"string");return Fv(e)=="symbol"?e:String(e)}function Q1e(t,e){if(Fv(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var o=r.call(t,e||"default");if(Fv(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var jH=function(e){var r=e.children,o=e.formattedGraphicalItems,u=e.legendWidth,f=e.legendContent,p=Ys(r,Kg);if(!p)return null;var x;return p.props&&p.props.payload?x=p.props&&p.props.payload:f==="children"?x=(o||[]).reduce(function(s,w){var I=w.item,P=w.props,N=P.sectors||P.data||[];return s.concat(N.map(function(U){return{type:p.props.iconType||I.props.legendType,value:U.name,color:U.fill,payload:U}}))},[]):x=(o||[]).map(function(s){var w=s.item,I=w.props,P=I.dataKey,N=I.name,U=I.legendType,X=I.hide;return{inactive:X,dataKey:P,type:p.props.iconType||U||"square",color:_k(w),value:N||P,payload:w.props}}),AE(AE(AE({},p.props),Kg.getWithHeight(p,u)),{},{payload:x,item:p})};function jv(t){"@babel/helpers - typeof";return jv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jv(t)}function dj(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),r.push.apply(r,o)}return r}function Ll(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?dj(Object(r),!0).forEach(function(o){Lg(t,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dj(Object(r)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(r,o))})}return t}function Lg(t,e,r){return e=exe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function exe(t){var e=txe(t,"string");return jv(e)=="symbol"?e:String(e)}function txe(t,e){if(jv(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var o=r.call(t,e||"default");if(jv(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pj(t){return oxe(t)||ixe(t)||nxe(t)||rxe()}function rxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nxe(t,e){if(t){if(typeof t=="string")return uI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uI(t,e)}}function ixe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function oxe(t){if(Array.isArray(t))return uI(t)}function uI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,o=new Array(e);r<e;r++)o[r]=t[r];return o}function qo(t,e,r){return En(t)||En(e)?r:Zo(e)?Fl(t,e,r):Ln(e)?e(t):r}function X0(t,e,r,o){var u=c1e(t,function(x){return qo(x,e)});if(r==="number"){var f=u.filter(function(x){return lr(x)||parseFloat(x)});return f.length?[pS(f),Rf(f)]:[1/0,-1/0]}var p=o?u.filter(function(x){return!En(x)}):u;return p.map(function(x){return Zo(x)||x instanceof Date?x:""})}var axe=function(e){var r,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],u=arguments.length>2?arguments[2]:void 0,f=arguments.length>3?arguments[3]:void 0,p=-1,x=(r=o==null?void 0:o.length)!==null&&r!==void 0?r:0;if(x<=1)return 0;if(f&&f.axisType==="angleAxis"&&Math.abs(Math.abs(f.range[1]-f.range[0])-360)<=1e-6)for(var s=f.range,w=0;w<x;w++){var I=w>0?u[w-1].coordinate:u[x-1].coordinate,P=u[w].coordinate,N=w>=x-1?u[0].coordinate:u[w+1].coordinate,U=void 0;if(Su(P-I)!==Su(N-P)){var X=[];if(Su(N-P)===Su(s[1]-s[0])){U=N;var Q=P+s[1]-s[0];X[0]=Math.min(Q,(Q+I)/2),X[1]=Math.max(Q,(Q+I)/2)}else{U=I;var J=N+s[1]-s[0];X[0]=Math.min(P,(J+P)/2),X[1]=Math.max(P,(J+P)/2)}var Z=[Math.min(P,(U+P)/2),Math.max(P,(U+P)/2)];if(e>Z[0]&&e<=Z[1]||e>=X[0]&&e<=X[1]){p=u[w].index;break}}else{var H=Math.min(I,N),K=Math.max(I,N);if(e>(H+P)/2&&e<=(K+P)/2){p=u[w].index;break}}}else for(var ee=0;ee<x;ee++)if(ee===0&&e<=(o[ee].coordinate+o[ee+1].coordinate)/2||ee>0&&ee<x-1&&e>(o[ee].coordinate+o[ee-1].coordinate)/2&&e<=(o[ee].coordinate+o[ee+1].coordinate)/2||ee===x-1&&e>(o[ee].coordinate+o[ee-1].coordinate)/2){p=o[ee].index;break}return p},_k=function(e){var r=e,o=r.type.displayName,u=e.props,f=u.stroke,p=u.fill,x;switch(o){case"Line":x=f;break;case"Area":case"Radar":x=f&&f!=="none"?f:p;break;default:x=p;break}return x},sxe=function(e){var r=e.barSize,o=e.totalSize,u=e.stackGroups,f=u===void 0?{}:u;if(!f)return{};for(var p={},x=Object.keys(f),s=0,w=x.length;s<w;s++)for(var I=f[x[s]].stackGroups,P=Object.keys(I),N=0,U=P.length;N<U;N++){var X=I[P[N]],Q=X.items,J=X.cateAxisId,Z=Q.filter(function(se){return dh(se.type).indexOf("Bar")>=0});if(Z&&Z.length){var H=Z[0].props.barSize,K=Z[0].props[J];p[K]||(p[K]=[]);var ee=En(H)?r:H;p[K].push({item:Z[0],stackList:Z.slice(1),barSize:En(ee)?void 0:Np(ee,o,0)})}}return p},lxe=function(e){var r=e.barGap,o=e.barCategoryGap,u=e.bandSize,f=e.sizeList,p=f===void 0?[]:f,x=e.maxBarSize,s=p.length;if(s<1)return null;var w=Np(r,u,0,!0),I,P=[];if(p[0].barSize===+p[0].barSize){var N=!1,U=u/s,X=p.reduce(function(ee,se){return ee+se.barSize||0},0);X+=(s-1)*w,X>=u&&(X-=(s-1)*w,w=0),X>=u&&U>0&&(N=!0,U*=.9,X=s*U);var Q=(u-X)/2>>0,J={offset:Q-w,size:0};I=p.reduce(function(ee,se){var me={item:se.item,position:{offset:J.offset+J.size+w,size:N?U:se.barSize}},Ce=[].concat(pj(ee),[me]);return J=Ce[Ce.length-1].position,se.stackList&&se.stackList.length&&se.stackList.forEach(function(Ae){Ce.push({item:Ae,position:J})}),Ce},P)}else{var Z=Np(o,u,0,!0);u-2*Z-(s-1)*w<=0&&(w=0);var H=(u-2*Z-(s-1)*w)/s;H>1&&(H>>=0);var K=x===+x?Math.min(H,x):H;I=p.reduce(function(ee,se,me){var Ce=[].concat(pj(ee),[{item:se.item,position:{offset:Z+(H+w)*me+(H-K)/2,size:K}}]);return se.stackList&&se.stackList.length&&se.stackList.forEach(function(Ae){Ce.push({item:Ae,position:Ce[Ce.length-1].position})}),Ce},P)}return I},uxe=function(e,r,o,u){var f=o.children,p=o.width,x=o.margin,s=p-(x.left||0)-(x.right||0),w=jH({children:f,legendWidth:s});if(w){var I=u||{},P=I.width,N=I.height,U=w.align,X=w.verticalAlign,Q=w.layout;if((Q==="vertical"||Q==="horizontal"&&X==="middle")&&U!=="center"&&lr(e[U]))return Ll(Ll({},e),{},Lg({},U,e[U]+(P||0)));if((Q==="horizontal"||Q==="vertical"&&U==="center")&&X!=="middle"&&lr(e[X]))return Ll(Ll({},e),{},Lg({},X,e[X]+(N||0)))}return e},cxe=function(e,r,o){return En(r)?!0:e==="horizontal"?r==="yAxis":e==="vertical"||o==="x"?r==="xAxis":o==="y"?r==="yAxis":!0},$H=function(e,r,o,u,f){var p=r.props.children,x=Es(p,O_).filter(function(w){return cxe(u,f,w.props.direction)});if(x&&x.length){var s=x.map(function(w){return w.props.dataKey});return e.reduce(function(w,I){var P=qo(I,o);if(En(P))return w;var N=Array.isArray(P)?[pS(P),Rf(P)]:[P,P],U=s.reduce(function(X,Q){var J=qo(I,Q,0),Z=N[0]-Math.abs(Array.isArray(J)?J[0]:J),H=N[1]+Math.abs(Array.isArray(J)?J[1]:J);return[Math.min(Z,X[0]),Math.max(H,X[1])]},[1/0,-1/0]);return[Math.min(U[0],w[0]),Math.max(U[1],w[1])]},[1/0,-1/0])}return null},hxe=function(e,r,o,u,f){var p=r.map(function(x){return $H(e,x,o,f,u)}).filter(function(x){return!En(x)});return p&&p.length?p.reduce(function(x,s){return[Math.min(x[0],s[0]),Math.max(x[1],s[1])]},[1/0,-1/0]):null},UH=function(e,r,o,u,f){var p=r.map(function(s){var w=s.props.dataKey;return o==="number"&&w&&$H(e,s,w,u)||X0(e,w,o,f)});if(o==="number")return p.reduce(function(s,w){return[Math.min(s[0],w[0]),Math.max(s[1],w[1])]},[1/0,-1/0]);var x={};return p.reduce(function(s,w){for(var I=0,P=w.length;I<P;I++)x[w[I]]||(x[w[I]]=!0,s.push(w[I]));return s},[])},VH=function(e,r){return e==="horizontal"&&r==="xAxis"||e==="vertical"&&r==="yAxis"||e==="centric"&&r==="angleAxis"||e==="radial"&&r==="radiusAxis"},GH=function(e,r,o,u){if(u)return e.map(function(s){return s.coordinate});var f,p,x=e.map(function(s){return s.coordinate===r&&(f=!0),s.coordinate===o&&(p=!0),s.coordinate});return f||x.push(r),p||x.push(o),x},hh=function(e,r,o){if(!e)return null;var u=e.scale,f=e.duplicateDomain,p=e.type,x=e.range,s=e.realScaleType==="scaleBand"?u.bandwidth()/2:2,w=(r||o)&&p==="category"&&u.bandwidth?u.bandwidth()/s:0;if(w=e.axisType==="angleAxis"&&(x==null?void 0:x.length)>=2?Su(x[0]-x[1])*2*w:w,r&&(e.ticks||e.niceTicks)){var I=(e.ticks||e.niceTicks).map(function(P){var N=f?f.indexOf(P):P;return{coordinate:u(N)+w,value:P,offset:w}});return I.filter(function(P){return!T_(P.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(P,N){return{coordinate:u(P)+w,value:P,index:N,offset:w}}):u.ticks&&!o?u.ticks(e.tickCount).map(function(P){return{coordinate:u(P)+w,value:P,offset:w}}):u.domain().map(function(P,N){return{coordinate:u(P)+w,value:f?f[P]:P,index:N,offset:w}})},EE=new WeakMap,Yx=function(e,r){if(typeof r!="function")return e;EE.has(e)||EE.set(e,new WeakMap);var o=EE.get(e);if(o.has(r))return o.get(r);var u=function(){e.apply(void 0,arguments),r.apply(void 0,arguments)};return o.set(r,u),u},fxe=function(e,r,o){var u=e.scale,f=e.type,p=e.layout,x=e.axisType;if(u==="auto")return p==="radial"&&x==="radiusAxis"?{scale:Iv(),realScaleType:"band"}:p==="radial"&&x==="angleAxis"?{scale:jC(),realScaleType:"linear"}:f==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!o)?{scale:K0(),realScaleType:"point"}:f==="category"?{scale:Iv(),realScaleType:"band"}:{scale:jC(),realScaleType:"linear"};if(AB(u)){var s="scale".concat(eS(u));return{scale:(sj[s]||K0)(),realScaleType:sj[s]?s:"point"}}return Ln(u)?{scale:u}:{scale:K0(),realScaleType:"point"}},mj=1e-4,dxe=function(e){var r=e.domain();if(!(!r||r.length<=2)){var o=r.length,u=e.range(),f=Math.min(u[0],u[1])-mj,p=Math.max(u[0],u[1])+mj,x=e(r[0]),s=e(r[o-1]);(x<f||x>p||s<f||s>p)&&e.domain([r[0],r[o-1]])}},pxe=function(e,r){if(!e)return null;for(var o=0,u=e.length;o<u;o++)if(e[o].item===r)return e[o].position;return null},mxe=function(e,r){if(!r||r.length!==2||!lr(r[0])||!lr(r[1]))return e;var o=Math.min(r[0],r[1]),u=Math.max(r[0],r[1]),f=[e[0],e[1]];return(!lr(e[0])||e[0]<o)&&(f[0]=o),(!lr(e[1])||e[1]>u)&&(f[1]=u),f[0]>u&&(f[0]=u),f[1]<o&&(f[1]=o),f},gxe=function(e){var r=e.length;if(!(r<=0))for(var o=0,u=e[0].length;o<u;++o)for(var f=0,p=0,x=0;x<r;++x){var s=T_(e[x][o][1])?e[x][o][0]:e[x][o][1];s>=0?(e[x][o][0]=f,e[x][o][1]=f+s,f=e[x][o][1]):(e[x][o][0]=p,e[x][o][1]=p+s,p=e[x][o][1])}},_xe=function(e){var r=e.length;if(!(r<=0))for(var o=0,u=e[0].length;o<u;++o)for(var f=0,p=0;p<r;++p){var x=T_(e[p][o][1])?e[p][o][0]:e[p][o][1];x>=0?(e[p][o][0]=f,e[p][o][1]=f+x,f=e[p][o][1]):(e[p][o][0]=0,e[p][o][1]=0)}},yxe={sign:gxe,expand:Hue,none:Wg,silhouette:Wue,wiggle:Zue,positive:_xe},vxe=function(e,r,o){var u=r.map(function(x){return x.props.dataKey}),f=yxe[o],p=Gue().keys(u).value(function(x,s){return+qo(x,s,0)}).order(kM).offset(f);return p(e)},Bxe=function(e,r,o,u,f,p){if(!e)return null;var x=p?r.reverse():r,s={},w=x.reduce(function(P,N){var U=N.props,X=U.stackId,Q=U.hide;if(Q)return P;var J=N.props[o],Z=P[J]||{hasStack:!1,stackGroups:{}};if(Zo(X)){var H=Z.stackGroups[X]||{numericAxisId:o,cateAxisId:u,items:[]};H.items.push(N),Z.hasStack=!0,Z.stackGroups[X]=H}else Z.stackGroups[Xp("_stackId_")]={numericAxisId:o,cateAxisId:u,items:[N]};return Ll(Ll({},P),{},Lg({},J,Z))},s),I={};return Object.keys(w).reduce(function(P,N){var U=w[N];if(U.hasStack){var X={};U.stackGroups=Object.keys(U.stackGroups).reduce(function(Q,J){var Z=U.stackGroups[J];return Ll(Ll({},Q),{},Lg({},J,{numericAxisId:o,cateAxisId:u,items:Z.items,stackedData:vxe(e,Z.items,f)}))},X)}return Ll(Ll({},P),{},Lg({},N,U))},I)},xxe=function(e,r){var o=r.realScaleType,u=r.type,f=r.tickCount,p=r.originalDomain,x=r.allowDecimals,s=o||r.scale;if(s!=="auto"&&s!=="linear")return null;if(f&&u==="number"&&p&&(p[0]==="auto"||p[1]==="auto")){var w=e.domain();if(!w.length)return null;var I=j1e(w,f,x);return e.domain([pS(I),Rf(I)]),{niceTicks:I}}if(f&&u==="number"){var P=e.domain(),N=$1e(P,f,x);return{niceTicks:N}}return null};function t_(t){var e=t.axis,r=t.ticks,o=t.bandSize,u=t.entry,f=t.index,p=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!En(u[e.dataKey])){var x=yC(r,"value",u[e.dataKey]);if(x)return x.coordinate+o/2}return r[f]?r[f].coordinate+o/2:null}var s=qo(u,En(p)?e.dataKey:p);return En(s)?null:e.scale(s)}var gj=function(e){var r=e.axis,o=e.ticks,u=e.offset,f=e.bandSize,p=e.entry,x=e.index;if(r.type==="category")return o[x]?o[x].coordinate+u:null;var s=qo(p,r.dataKey,r.domain[x]);return En(s)?null:r.scale(s)-f/2+u},bxe=function(e){var r=e.numericAxis,o=r.scale.domain();if(r.type==="number"){var u=Math.min(o[0],o[1]),f=Math.max(o[0],o[1]);return u<=0&&f>=0?0:f<0?f:u}return o[0]},Cxe=function(e,r){var o=e.props.stackId;if(Zo(o)){var u=r[o];if(u){var f=u.items.indexOf(e);return f>=0?u.stackedData[f]:null}}return null},wxe=function(e){return e.reduce(function(r,o){return[pS(o.concat([r[0]]).filter(lr)),Rf(o.concat([r[1]]).filter(lr))]},[1/0,-1/0])},HH=function(e,r,o){return Object.keys(e).reduce(function(u,f){var p=e[f],x=p.stackedData,s=x.reduce(function(w,I){var P=wxe(I.slice(r,o+1));return[Math.min(w[0],P[0]),Math.max(w[1],P[1])]},[1/0,-1/0]);return[Math.min(s[0],u[0]),Math.max(s[1],u[1])]},[1/0,-1/0]).map(function(u){return u===1/0||u===-1/0?0:u})},_j=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,yj=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,cI=function(e,r,o){if(Ln(e))return e(r,o);if(!Array.isArray(e))return r;var u=[];if(lr(e[0]))u[0]=o?e[0]:Math.min(e[0],r[0]);else if(_j.test(e[0])){var f=+_j.exec(e[0])[1];u[0]=r[0]-f}else Ln(e[0])?u[0]=e[0](r[0]):u[0]=r[0];if(lr(e[1]))u[1]=o?e[1]:Math.max(e[1],r[1]);else if(yj.test(e[1])){var p=+yj.exec(e[1])[1];u[1]=r[1]+p}else Ln(e[1])?u[1]=e[1](r[1]):u[1]=r[1];return u},WC=function(e,r,o){if(e&&e.scale&&e.scale.bandwidth){var u=e.scale.bandwidth();if(!o||u>0)return u}if(e&&r&&r.length>=2){for(var f=G3(r,function(P){return P.coordinate}),p=1/0,x=1,s=f.length;x<s;x++){var w=f[x],I=f[x-1];p=Math.min((w.coordinate||0)-(I.coordinate||0),p)}return p===1/0?0:p}return o?void 0:0},vj=function(e,r,o){return!e||!e.length||Fp(e,Fl(o,"type.defaultProps.domain"))?r:e},WH=function(e,r){var o=e.props,u=o.dataKey,f=o.name,p=o.unit,x=o.formatter,s=o.tooltipType,w=o.chartType,I=o.hide;return Ll(Ll({},An(e,!1)),{},{dataKey:u,unit:p,formatter:x,name:f||u,color:_k(e),value:qo(r,u),type:s,payload:r,chartType:w,hide:I})};function $v(t){"@babel/helpers - typeof";return $v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$v(t)}function Bj(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),r.push.apply(r,o)}return r}function xj(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Bj(Object(r),!0).forEach(function(o){Sxe(t,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Bj(Object(r)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(r,o))})}return t}function Sxe(t,e,r){return e=Txe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Txe(t){var e=Axe(t,"string");return $v(e)=="symbol"?e:String(e)}function Axe(t,e){if($v(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var o=r.call(t,e||"default");if($v(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ZC=Math.PI/180,Exe=function(e){return e*180/Math.PI},ba=function(e,r,o,u){return{x:e+Math.cos(-ZC*u)*o,y:r+Math.sin(-ZC*u)*o}},Dxe=function(e,r){var o=e.x,u=e.y,f=r.x,p=r.y;return Math.sqrt(Math.pow(o-f,2)+Math.pow(u-p,2))},Pxe=function(e,r){var o=e.x,u=e.y,f=r.cx,p=r.cy,x=Dxe({x:o,y:u},{x:f,y:p});if(x<=0)return{radius:x};var s=(o-f)/x,w=Math.acos(s);return u>p&&(w=2*Math.PI-w),{radius:x,angle:Exe(w),angleInRadian:w}},Mxe=function(e){var r=e.startAngle,o=e.endAngle,u=Math.floor(r/360),f=Math.floor(o/360),p=Math.min(u,f);return{startAngle:r-p*360,endAngle:o-p*360}},Ixe=function(e,r){var o=r.startAngle,u=r.endAngle,f=Math.floor(o/360),p=Math.floor(u/360),x=Math.min(f,p);return e+x*360},bj=function(e,r){var o=e.x,u=e.y,f=Pxe({x:o,y:u},r),p=f.radius,x=f.angle,s=r.innerRadius,w=r.outerRadius;if(p<s||p>w)return!1;if(p===0)return!0;var I=Mxe(r),P=I.startAngle,N=I.endAngle,U=x,X;if(P<=N){for(;U>N;)U-=360;for(;U<P;)U+=360;X=U>=P&&U<=N}else{for(;U>P;)U-=360;for(;U<N;)U+=360;X=U>=N&&U<=P}return X?xj(xj({},r),{},{radius:p,angle:Ixe(U,r)}):null};function Uv(t){"@babel/helpers - typeof";return Uv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uv(t)}var Oxe=["offset"];function kxe(t){return Nxe(t)||zxe(t)||Rxe(t)||Lxe()}function Lxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rxe(t,e){if(t){if(typeof t=="string")return hI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hI(t,e)}}function zxe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Nxe(t){if(Array.isArray(t))return hI(t)}function hI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,o=new Array(e);r<e;r++)o[r]=t[r];return o}function Fxe(t,e){if(t==null)return{};var r=jxe(t,e),o,u;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(t);for(u=0;u<f.length;u++)o=f[u],!(e.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(t,o)&&(r[o]=t[o])}return r}function jxe(t,e){if(t==null)return{};var r={},o=Object.keys(t),u,f;for(f=0;f<o.length;f++)u=o[f],!(e.indexOf(u)>=0)&&(r[u]=t[u]);return r}function Cj(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),r.push.apply(r,o)}return r}function Go(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Cj(Object(r),!0).forEach(function(o){$xe(t,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Cj(Object(r)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(r,o))})}return t}function $xe(t,e,r){return e=Uxe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Uxe(t){var e=Vxe(t,"string");return Uv(e)=="symbol"?e:String(e)}function Vxe(t,e){if(Uv(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var o=r.call(t,e||"default");if(Uv(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vv(){return Vv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},Vv.apply(this,arguments)}var Gxe=function(e){var r=e.value,o=e.formatter,u=En(e.children)?r:e.children;return Ln(o)?o(u):u},Hxe=function(e,r){var o=Su(r-e),u=Math.min(Math.abs(r-e),360);return o*u},Wxe=function(e,r,o){var u=e.position,f=e.viewBox,p=e.offset,x=e.className,s=f,w=s.cx,I=s.cy,P=s.innerRadius,N=s.outerRadius,U=s.startAngle,X=s.endAngle,Q=s.clockWise,J=(P+N)/2,Z=Hxe(U,X),H=Z>=0?1:-1,K,ee;u==="insideStart"?(K=U+H*p,ee=Q):u==="insideEnd"?(K=X-H*p,ee=!Q):u==="end"&&(K=X+H*p,ee=Q),ee=Z<=0?ee:!ee;var se=ba(w,I,J,K),me=ba(w,I,J,K+(ee?1:-1)*359),Ce="M".concat(se.x,",").concat(se.y,`
    A`).concat(J,",").concat(J,",0,1,").concat(ee?0:1,`,
    `).concat(me.x,",").concat(me.y),Ae=En(e.id)?Xp("recharts-radial-line-"):e.id;return Ue.createElement("text",Vv({},o,{dominantBaseline:"central",className:Yn("recharts-radial-bar-label",x)}),Ue.createElement("defs",null,Ue.createElement("path",{id:Ae,d:Ce})),Ue.createElement("textPath",{xlinkHref:"#".concat(Ae)},r))},Zxe=function(e){var r=e.viewBox,o=e.offset,u=e.position,f=r,p=f.cx,x=f.cy,s=f.innerRadius,w=f.outerRadius,I=f.startAngle,P=f.endAngle,N=(I+P)/2;if(u==="outside"){var U=ba(p,x,w+o,N),X=U.x,Q=U.y;return{x:X,y:Q,textAnchor:X>=p?"start":"end",verticalAnchor:"middle"}}if(u==="center")return{x:p,y:x,textAnchor:"middle",verticalAnchor:"middle"};if(u==="centerTop")return{x:p,y:x,textAnchor:"middle",verticalAnchor:"start"};if(u==="centerBottom")return{x:p,y:x,textAnchor:"middle",verticalAnchor:"end"};var J=(s+w)/2,Z=ba(p,x,J,N),H=Z.x,K=Z.y;return{x:H,y:K,textAnchor:"middle",verticalAnchor:"middle"}},qxe=function(e){var r=e.viewBox,o=e.parentViewBox,u=e.offset,f=e.position,p=r,x=p.x,s=p.y,w=p.width,I=p.height,P=I>=0?1:-1,N=P*u,U=P>0?"end":"start",X=P>0?"start":"end",Q=w>=0?1:-1,J=Q*u,Z=Q>0?"end":"start",H=Q>0?"start":"end";if(f==="top"){var K={x:x+w/2,y:s-P*u,textAnchor:"middle",verticalAnchor:U};return Go(Go({},K),o?{height:Math.max(s-o.y,0),width:w}:{})}if(f==="bottom"){var ee={x:x+w/2,y:s+I+N,textAnchor:"middle",verticalAnchor:X};return Go(Go({},ee),o?{height:Math.max(o.y+o.height-(s+I),0),width:w}:{})}if(f==="left"){var se={x:x-J,y:s+I/2,textAnchor:Z,verticalAnchor:"middle"};return Go(Go({},se),o?{width:Math.max(se.x-o.x,0),height:I}:{})}if(f==="right"){var me={x:x+w+J,y:s+I/2,textAnchor:H,verticalAnchor:"middle"};return Go(Go({},me),o?{width:Math.max(o.x+o.width-me.x,0),height:I}:{})}var Ce=o?{width:w,height:I}:{};return f==="insideLeft"?Go({x:x+J,y:s+I/2,textAnchor:H,verticalAnchor:"middle"},Ce):f==="insideRight"?Go({x:x+w-J,y:s+I/2,textAnchor:Z,verticalAnchor:"middle"},Ce):f==="insideTop"?Go({x:x+w/2,y:s+N,textAnchor:"middle",verticalAnchor:X},Ce):f==="insideBottom"?Go({x:x+w/2,y:s+I-N,textAnchor:"middle",verticalAnchor:U},Ce):f==="insideTopLeft"?Go({x:x+J,y:s+N,textAnchor:H,verticalAnchor:X},Ce):f==="insideTopRight"?Go({x:x+w-J,y:s+N,textAnchor:Z,verticalAnchor:X},Ce):f==="insideBottomLeft"?Go({x:x+J,y:s+I-N,textAnchor:H,verticalAnchor:U},Ce):f==="insideBottomRight"?Go({x:x+w-J,y:s+I-N,textAnchor:Z,verticalAnchor:U},Ce):b_(f)&&(lr(f.x)||Bp(f.x))&&(lr(f.y)||Bp(f.y))?Go({x:x+Np(f.x,w),y:s+Np(f.y,I),textAnchor:"end",verticalAnchor:"end"},Ce):Go({x:x+w/2,y:s+I/2,textAnchor:"middle",verticalAnchor:"middle"},Ce)},Kxe=function(e){return"cx"in e&&lr(e.cx)};function Ua(t){var e=t.offset,r=e===void 0?5:e,o=Fxe(t,Oxe),u=Go({offset:r},o),f=u.viewBox,p=u.position,x=u.value,s=u.children,w=u.content,I=u.className,P=I===void 0?"":I,N=u.textBreakAll;if(!f||En(x)&&En(s)&&!Te.isValidElement(w)&&!Ln(w))return null;if(Te.isValidElement(w))return Te.cloneElement(w,u);var U;if(Ln(w)){if(U=Te.createElement(w,u),Te.isValidElement(U))return U}else U=Gxe(u);var X=Kxe(f),Q=An(u,!0);if(X&&(p==="insideStart"||p==="insideEnd"||p==="end"))return Wxe(u,U,Q);var J=X?Zxe(u):qxe(u);return Ue.createElement(OC,Vv({className:Yn("recharts-label",P)},Q,J,{breakAll:N}),U)}Ua.displayName="Label";var ZH=function(e){var r=e.cx,o=e.cy,u=e.angle,f=e.startAngle,p=e.endAngle,x=e.r,s=e.radius,w=e.innerRadius,I=e.outerRadius,P=e.x,N=e.y,U=e.top,X=e.left,Q=e.width,J=e.height,Z=e.clockWise,H=e.labelViewBox;if(H)return H;if(lr(Q)&&lr(J)){if(lr(P)&&lr(N))return{x:P,y:N,width:Q,height:J};if(lr(U)&&lr(X))return{x:U,y:X,width:Q,height:J}}return lr(P)&&lr(N)?{x:P,y:N,width:0,height:0}:lr(r)&&lr(o)?{cx:r,cy:o,startAngle:f||u||0,endAngle:p||u||0,innerRadius:w||0,outerRadius:I||s||x||0,clockWise:Z}:e.viewBox?e.viewBox:{}},Xxe=function(e,r){return e?e===!0?Ue.createElement(Ua,{key:"label-implicit",viewBox:r}):Zo(e)?Ue.createElement(Ua,{key:"label-implicit",viewBox:r,value:e}):Te.isValidElement(e)?e.type===Ua?Te.cloneElement(e,{key:"label-implicit",viewBox:r}):Ue.createElement(Ua,{key:"label-implicit",content:e,viewBox:r}):Ln(e)?Ue.createElement(Ua,{key:"label-implicit",content:e,viewBox:r}):b_(e)?Ue.createElement(Ua,Vv({viewBox:r},e,{key:"label-implicit"})):null:null},Yxe=function(e,r){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&o&&!e.label)return null;var u=e.children,f=ZH(e),p=Es(u,Ua).map(function(s,w){return Te.cloneElement(s,{viewBox:r||f,key:"label-".concat(w)})});if(!o)return p;var x=Xxe(e.label,r||f);return[x].concat(kxe(p))};Ua.parseViewBox=ZH;Ua.renderCallByParent=Yxe;function Jxe(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var Qxe=Jxe;const ebe=wi(Qxe);function Gv(t){"@babel/helpers - typeof";return Gv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gv(t)}var tbe=["valueAccessor"],rbe=["data","dataKey","clockWise","id","textBreakAll"];function nbe(t){return sbe(t)||abe(t)||obe(t)||ibe()}function ibe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function obe(t,e){if(t){if(typeof t=="string")return fI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fI(t,e)}}function abe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function sbe(t){if(Array.isArray(t))return fI(t)}function fI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,o=new Array(e);r<e;r++)o[r]=t[r];return o}function qC(){return qC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},qC.apply(this,arguments)}function wj(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),r.push.apply(r,o)}return r}function Sj(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?wj(Object(r),!0).forEach(function(o){lbe(t,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wj(Object(r)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(r,o))})}return t}function lbe(t,e,r){return e=ube(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ube(t){var e=cbe(t,"string");return Gv(e)=="symbol"?e:String(e)}function cbe(t,e){if(Gv(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var o=r.call(t,e||"default");if(Gv(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Tj(t,e){if(t==null)return{};var r=hbe(t,e),o,u;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(t);for(u=0;u<f.length;u++)o=f[u],!(e.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(t,o)&&(r[o]=t[o])}return r}function hbe(t,e){if(t==null)return{};var r={},o=Object.keys(t),u,f;for(f=0;f<o.length;f++)u=o[f],!(e.indexOf(u)>=0)&&(r[u]=t[u]);return r}var fbe=function(e){return Array.isArray(e.value)?ebe(e.value):e.value};function Bc(t){var e=t.valueAccessor,r=e===void 0?fbe:e,o=Tj(t,tbe),u=o.data,f=o.dataKey,p=o.clockWise,x=o.id,s=o.textBreakAll,w=Tj(o,rbe);return!u||!u.length?null:Ue.createElement(hi,{className:"recharts-label-list"},u.map(function(I,P){var N=En(f)?r(I,P):qo(I&&I.payload,f),U=En(x)?{}:{id:"".concat(x,"-").concat(P)};return Ue.createElement(Ua,qC({},An(I,!0),w,U,{parentViewBox:I.parentViewBox,value:N,textBreakAll:s,viewBox:Ua.parseViewBox(En(p)?I:Sj(Sj({},I),{},{clockWise:p})),key:"label-".concat(P),index:P}))}))}Bc.displayName="LabelList";function dbe(t,e){return t?t===!0?Ue.createElement(Bc,{key:"labelList-implicit",data:e}):Ue.isValidElement(t)||Ln(t)?Ue.createElement(Bc,{key:"labelList-implicit",data:e,content:t}):b_(t)?Ue.createElement(Bc,qC({data:e},t,{key:"labelList-implicit"})):null:null}function pbe(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var o=t.children,u=Es(o,Bc).map(function(p,x){return Te.cloneElement(p,{data:e,key:"labelList-".concat(x)})});if(!r)return u;var f=dbe(t.label,e);return[f].concat(nbe(u))}Bc.renderCallByParent=pbe;function Hv(t){"@babel/helpers - typeof";return Hv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hv(t)}function dI(){return dI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},dI.apply(this,arguments)}function Aj(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),r.push.apply(r,o)}return r}function Ej(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Aj(Object(r),!0).forEach(function(o){mbe(t,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Aj(Object(r)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(r,o))})}return t}function mbe(t,e,r){return e=gbe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gbe(t){var e=_be(t,"string");return Hv(e)=="symbol"?e:String(e)}function _be(t,e){if(Hv(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var o=r.call(t,e||"default");if(Hv(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ybe=function(e,r){var o=Su(r-e),u=Math.min(Math.abs(r-e),359.999);return o*u},Jx=function(e){var r=e.cx,o=e.cy,u=e.radius,f=e.angle,p=e.sign,x=e.isExternal,s=e.cornerRadius,w=e.cornerIsExternal,I=s*(x?1:-1)+u,P=Math.asin(s/I)/ZC,N=w?f:f+p*P,U=ba(r,o,I,N),X=ba(r,o,u,N),Q=w?f-p*P:f,J=ba(r,o,I*Math.cos(P*ZC),Q);return{center:U,circleTangency:X,lineTangency:J,theta:P}},qH=function(e){var r=e.cx,o=e.cy,u=e.innerRadius,f=e.outerRadius,p=e.startAngle,x=e.endAngle,s=ybe(p,x),w=p+s,I=ba(r,o,f,p),P=ba(r,o,f,w),N="M ".concat(I.x,",").concat(I.y,`
    A `).concat(f,",").concat(f,`,0,
    `).concat(+(Math.abs(s)>180),",").concat(+(p>w),`,
    `).concat(P.x,",").concat(P.y,`
  `);if(u>0){var U=ba(r,o,u,p),X=ba(r,o,u,w);N+="L ".concat(X.x,",").concat(X.y,`
            A `).concat(u,",").concat(u,`,0,
            `).concat(+(Math.abs(s)>180),",").concat(+(p<=w),`,
            `).concat(U.x,",").concat(U.y," Z")}else N+="L ".concat(r,",").concat(o," Z");return N},vbe=function(e){var r=e.cx,o=e.cy,u=e.innerRadius,f=e.outerRadius,p=e.cornerRadius,x=e.forceCornerRadius,s=e.cornerIsExternal,w=e.startAngle,I=e.endAngle,P=Su(I-w),N=Jx({cx:r,cy:o,radius:f,angle:w,sign:P,cornerRadius:p,cornerIsExternal:s}),U=N.circleTangency,X=N.lineTangency,Q=N.theta,J=Jx({cx:r,cy:o,radius:f,angle:I,sign:-P,cornerRadius:p,cornerIsExternal:s}),Z=J.circleTangency,H=J.lineTangency,K=J.theta,ee=s?Math.abs(w-I):Math.abs(w-I)-Q-K;if(ee<0)return x?"M ".concat(X.x,",").concat(X.y,`
        a`).concat(p,",").concat(p,",0,0,1,").concat(p*2,`,0
        a`).concat(p,",").concat(p,",0,0,1,").concat(-p*2,`,0
      `):qH({cx:r,cy:o,innerRadius:u,outerRadius:f,startAngle:w,endAngle:I});var se="M ".concat(X.x,",").concat(X.y,`
    A`).concat(p,",").concat(p,",0,0,").concat(+(P<0),",").concat(U.x,",").concat(U.y,`
    A`).concat(f,",").concat(f,",0,").concat(+(ee>180),",").concat(+(P<0),",").concat(Z.x,",").concat(Z.y,`
    A`).concat(p,",").concat(p,",0,0,").concat(+(P<0),",").concat(H.x,",").concat(H.y,`
  `);if(u>0){var me=Jx({cx:r,cy:o,radius:u,angle:w,sign:P,isExternal:!0,cornerRadius:p,cornerIsExternal:s}),Ce=me.circleTangency,Ae=me.lineTangency,De=me.theta,qe=Jx({cx:r,cy:o,radius:u,angle:I,sign:-P,isExternal:!0,cornerRadius:p,cornerIsExternal:s}),je=qe.circleTangency,Oe=qe.lineTangency,ct=qe.theta,ht=s?Math.abs(w-I):Math.abs(w-I)-De-ct;if(ht<0&&p===0)return"".concat(se,"L").concat(r,",").concat(o,"Z");se+="L".concat(Oe.x,",").concat(Oe.y,`
      A`).concat(p,",").concat(p,",0,0,").concat(+(P<0),",").concat(je.x,",").concat(je.y,`
      A`).concat(u,",").concat(u,",0,").concat(+(ht>180),",").concat(+(P>0),",").concat(Ce.x,",").concat(Ce.y,`
      A`).concat(p,",").concat(p,",0,0,").concat(+(P<0),",").concat(Ae.x,",").concat(Ae.y,"Z")}else se+="L".concat(r,",").concat(o,"Z");return se},Bbe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},KH=function(e){var r=Ej(Ej({},Bbe),e),o=r.cx,u=r.cy,f=r.innerRadius,p=r.outerRadius,x=r.cornerRadius,s=r.forceCornerRadius,w=r.cornerIsExternal,I=r.startAngle,P=r.endAngle,N=r.className;if(p<f||I===P)return null;var U=Yn("recharts-sector",N),X=p-f,Q=Np(x,X,0,!0),J;return Q>0&&Math.abs(I-P)<360?J=vbe({cx:o,cy:u,innerRadius:f,outerRadius:p,cornerRadius:Math.min(Q,X/2),forceCornerRadius:s,cornerIsExternal:w,startAngle:I,endAngle:P}):J=qH({cx:o,cy:u,innerRadius:f,outerRadius:p,startAngle:I,endAngle:P}),Ue.createElement("path",dI({},An(r,!0),{className:U,d:J,role:"img"}))};function Wv(t){"@babel/helpers - typeof";return Wv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wv(t)}function pI(){return pI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},pI.apply(this,arguments)}function Dj(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),r.push.apply(r,o)}return r}function Pj(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Dj(Object(r),!0).forEach(function(o){xbe(t,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Dj(Object(r)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(r,o))})}return t}function xbe(t,e,r){return e=bbe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bbe(t){var e=Cbe(t,"string");return Wv(e)=="symbol"?e:String(e)}function Cbe(t,e){if(Wv(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var o=r.call(t,e||"default");if(Wv(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Mj={curveBasisClosed:Oue,curveBasisOpen:kue,curveBasis:Iue,curveBumpX:yue,curveBumpY:vue,curveLinearClosed:Lue,curveLinear:rS,curveMonotoneX:Rue,curveMonotoneY:zue,curveNatural:Nue,curveStep:Fue,curveStepAfter:$ue,curveStepBefore:jue},Qx=function(e){return e.x===+e.x&&e.y===+e.y},y0=function(e){return e.x},v0=function(e){return e.y},wbe=function(e,r){if(Ln(e))return e;var o="curve".concat(eS(e));return(o==="curveMonotone"||o==="curveBump")&&r?Mj["".concat(o).concat(r==="vertical"?"Y":"X")]:Mj[o]||rS},Sbe=function(e){var r=e.type,o=r===void 0?"linear":r,u=e.points,f=u===void 0?[]:u,p=e.baseLine,x=e.layout,s=e.connectNulls,w=s===void 0?!1:s,I=wbe(o,x),P=w?f.filter(function(Q){return Qx(Q)}):f,N;if(Array.isArray(p)){var U=w?p.filter(function(Q){return Qx(Q)}):p,X=P.map(function(Q,J){return Pj(Pj({},Q),{},{base:U[J]})});return x==="vertical"?N=Vx().y(v0).x1(y0).x0(function(Q){return Q.base.x}):N=Vx().x(y0).y1(v0).y0(function(Q){return Q.base.y}),N.defined(Qx).curve(I),N(X)}return x==="vertical"&&lr(p)?N=Vx().y(v0).x1(y0).x0(p):lr(p)?N=Vx().x(y0).y1(v0).y0(p):N=JG().x(y0).y(v0),N.defined(Qx).curve(I),N(P)},Pp=function(e){var r=e.className,o=e.points,u=e.path,f=e.pathRef;if((!o||!o.length)&&!u)return null;var p=o&&o.length?Sbe(e):u;return Ue.createElement("path",pI({},An(e,!1),vC(e),{className:Yn("recharts-curve",r),d:p,ref:f}))},XH={exports:{}},Tbe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Abe=Tbe,Ebe=Abe;function YH(){}function JH(){}JH.resetWarningCache=YH;var Dbe=function(){function t(o,u,f,p,x,s){if(s!==Ebe){var w=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw w.name="Invariant Violation",w}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:JH,resetWarningCache:YH};return r.PropTypes=r,r};XH.exports=Dbe();var Pbe=XH.exports;const kn=wi(Pbe);var Mbe=Object.getOwnPropertyNames,Ibe=Object.getOwnPropertySymbols,Obe=Object.prototype.hasOwnProperty;function Ij(t,e){return function(o,u,f){return t(o,u,f)&&e(o,u,f)}}function eb(t){return function(r,o,u){if(!r||!o||typeof r!="object"||typeof o!="object")return t(r,o,u);var f=u.cache,p=f.get(r),x=f.get(o);if(p&&x)return p===o&&x===r;f.set(r,o),f.set(o,r);var s=t(r,o,u);return f.delete(r),f.delete(o),s}}function Oj(t){return Mbe(t).concat(Ibe(t))}var QH=Object.hasOwn||function(t,e){return Obe.call(t,e)};function k_(t,e){return t||e?t===e:t===e||t!==t&&e!==e}var eW="_owner",kj=Object.getOwnPropertyDescriptor,Lj=Object.keys;function kbe(t,e,r){var o=t.length;if(e.length!==o)return!1;for(;o-- >0;)if(!r.equals(t[o],e[o],o,o,t,e,r))return!1;return!0}function Lbe(t,e){return k_(t.getTime(),e.getTime())}function Rj(t,e,r){if(t.size!==e.size)return!1;for(var o={},u=t.entries(),f=0,p,x;(p=u.next())&&!p.done;){for(var s=e.entries(),w=!1,I=0;(x=s.next())&&!x.done;){var P=p.value,N=P[0],U=P[1],X=x.value,Q=X[0],J=X[1];!w&&!o[I]&&(w=r.equals(N,Q,f,I,t,e,r)&&r.equals(U,J,N,Q,t,e,r))&&(o[I]=!0),I++}if(!w)return!1;f++}return!0}function Rbe(t,e,r){var o=Lj(t),u=o.length;if(Lj(e).length!==u)return!1;for(var f;u-- >0;)if(f=o[u],f===eW&&(t.$$typeof||e.$$typeof)&&t.$$typeof!==e.$$typeof||!QH(e,f)||!r.equals(t[f],e[f],f,f,t,e,r))return!1;return!0}function B0(t,e,r){var o=Oj(t),u=o.length;if(Oj(e).length!==u)return!1;for(var f,p,x;u-- >0;)if(f=o[u],f===eW&&(t.$$typeof||e.$$typeof)&&t.$$typeof!==e.$$typeof||!QH(e,f)||!r.equals(t[f],e[f],f,f,t,e,r)||(p=kj(t,f),x=kj(e,f),(p||x)&&(!p||!x||p.configurable!==x.configurable||p.enumerable!==x.enumerable||p.writable!==x.writable)))return!1;return!0}function zbe(t,e){return k_(t.valueOf(),e.valueOf())}function Nbe(t,e){return t.source===e.source&&t.flags===e.flags}function zj(t,e,r){if(t.size!==e.size)return!1;for(var o={},u=t.values(),f,p;(f=u.next())&&!f.done;){for(var x=e.values(),s=!1,w=0;(p=x.next())&&!p.done;)!s&&!o[w]&&(s=r.equals(f.value,p.value,f.value,p.value,t,e,r))&&(o[w]=!0),w++;if(!s)return!1}return!0}function Fbe(t,e){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}var jbe="[object Arguments]",$be="[object Boolean]",Ube="[object Date]",Vbe="[object Map]",Gbe="[object Number]",Hbe="[object Object]",Wbe="[object RegExp]",Zbe="[object Set]",qbe="[object String]",Kbe=Array.isArray,Nj=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,Fj=Object.assign,Xbe=Object.prototype.toString.call.bind(Object.prototype.toString);function Ybe(t){var e=t.areArraysEqual,r=t.areDatesEqual,o=t.areMapsEqual,u=t.areObjectsEqual,f=t.arePrimitiveWrappersEqual,p=t.areRegExpsEqual,x=t.areSetsEqual,s=t.areTypedArraysEqual;return function(I,P,N){if(I===P)return!0;if(I==null||P==null||typeof I!="object"||typeof P!="object")return I!==I&&P!==P;var U=I.constructor;if(U!==P.constructor)return!1;if(U===Object)return u(I,P,N);if(Kbe(I))return e(I,P,N);if(Nj!=null&&Nj(I))return s(I,P,N);if(U===Date)return r(I,P,N);if(U===RegExp)return p(I,P,N);if(U===Map)return o(I,P,N);if(U===Set)return x(I,P,N);var X=Xbe(I);return X===Ube?r(I,P,N):X===Wbe?p(I,P,N):X===Vbe?o(I,P,N):X===Zbe?x(I,P,N):X===Hbe?typeof I.then!="function"&&typeof P.then!="function"&&u(I,P,N):X===jbe?u(I,P,N):X===$be||X===Gbe||X===qbe?f(I,P,N):!1}}function Jbe(t){var e=t.circular,r=t.createCustomConfig,o=t.strict,u={areArraysEqual:o?B0:kbe,areDatesEqual:Lbe,areMapsEqual:o?Ij(Rj,B0):Rj,areObjectsEqual:o?B0:Rbe,arePrimitiveWrappersEqual:zbe,areRegExpsEqual:Nbe,areSetsEqual:o?Ij(zj,B0):zj,areTypedArraysEqual:o?B0:Fbe};if(r&&(u=Fj({},u,r(u))),e){var f=eb(u.areArraysEqual),p=eb(u.areMapsEqual),x=eb(u.areObjectsEqual),s=eb(u.areSetsEqual);u=Fj({},u,{areArraysEqual:f,areMapsEqual:p,areObjectsEqual:x,areSetsEqual:s})}return u}function Qbe(t){return function(e,r,o,u,f,p,x){return t(e,r,x)}}function eCe(t){var e=t.circular,r=t.comparator,o=t.createState,u=t.equals,f=t.strict;if(o)return function(s,w){var I=o(),P=I.cache,N=P===void 0?e?new WeakMap:void 0:P,U=I.meta;return r(s,w,{cache:N,equals:u,meta:U,strict:f})};if(e)return function(s,w){return r(s,w,{cache:new WeakMap,equals:u,meta:void 0,strict:f})};var p={cache:void 0,equals:u,meta:void 0,strict:f};return function(s,w){return r(s,w,p)}}var tCe=ld();ld({strict:!0});ld({circular:!0});ld({circular:!0,strict:!0});ld({createInternalComparator:function(){return k_}});ld({strict:!0,createInternalComparator:function(){return k_}});ld({circular:!0,createInternalComparator:function(){return k_}});ld({circular:!0,createInternalComparator:function(){return k_},strict:!0});function ld(t){t===void 0&&(t={});var e=t.circular,r=e===void 0?!1:e,o=t.createInternalComparator,u=t.createState,f=t.strict,p=f===void 0?!1:f,x=Jbe(t),s=Ybe(x),w=o?o(s):Qbe(s);return eCe({circular:r,comparator:s,createState:u,equals:w,strict:p})}function rCe(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function jj(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,o=function u(f){r<0&&(r=f),f-r>e?(t(f),r=-1):rCe(u)};requestAnimationFrame(o)}function mI(t){"@babel/helpers - typeof";return mI=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mI(t)}function nCe(t){return sCe(t)||aCe(t)||oCe(t)||iCe()}function iCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oCe(t,e){if(t){if(typeof t=="string")return $j(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $j(t,e)}}function $j(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,o=new Array(e);r<e;r++)o[r]=t[r];return o}function aCe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function sCe(t){if(Array.isArray(t))return t}function lCe(){var t={},e=function(){return null},r=!1,o=function u(f){if(!r){if(Array.isArray(f)){if(!f.length)return;var p=f,x=nCe(p),s=x[0],w=x.slice(1);if(typeof s=="number"){jj(u.bind(null,w),s);return}u(s),jj(u.bind(null,w));return}mI(f)==="object"&&(t=f,e(t)),typeof f=="function"&&f()}};return{stop:function(){r=!0},start:function(f){r=!1,o(f)},subscribe:function(f){return e=f,function(){e=function(){return null}}}}}function Zv(t){"@babel/helpers - typeof";return Zv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zv(t)}function Uj(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),r.push.apply(r,o)}return r}function Vj(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Uj(Object(r),!0).forEach(function(o){tW(t,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Uj(Object(r)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(r,o))})}return t}function tW(t,e,r){return e=uCe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function uCe(t){var e=cCe(t,"string");return Zv(e)==="symbol"?e:String(e)}function cCe(t,e){if(Zv(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var o=r.call(t,e||"default");if(Zv(o)!=="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hCe=function(e,r){return[Object.keys(e),Object.keys(r)].reduce(function(o,u){return o.filter(function(f){return u.includes(f)})})},fCe=function(e){return e},dCe=function(e){return e.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Y0=function(e,r){return Object.keys(r).reduce(function(o,u){return Vj(Vj({},o),{},tW({},u,e(u,r[u])))},{})},Gj=function(e,r,o){return e.map(function(u){return"".concat(dCe(u)," ").concat(r,"ms ").concat(o)}).join(",")};function pCe(t,e){return _Ce(t)||gCe(t,e)||rW(t,e)||mCe()}function mCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gCe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var o,u,f,p,x=[],s=!0,w=!1;try{if(f=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;s=!1}else for(;!(s=(o=f.call(r)).done)&&(x.push(o.value),x.length!==e);s=!0);}catch(I){w=!0,u=I}finally{try{if(!s&&r.return!=null&&(p=r.return(),Object(p)!==p))return}finally{if(w)throw u}}return x}}function _Ce(t){if(Array.isArray(t))return t}function yCe(t){return xCe(t)||BCe(t)||rW(t)||vCe()}function vCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rW(t,e){if(t){if(typeof t=="string")return gI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gI(t,e)}}function BCe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function xCe(t){if(Array.isArray(t))return gI(t)}function gI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,o=new Array(e);r<e;r++)o[r]=t[r];return o}var KC=1e-4,nW=function(e,r){return[0,3*e,3*r-6*e,3*e-3*r+1]},iW=function(e,r){return e.map(function(o,u){return o*Math.pow(r,u)}).reduce(function(o,u){return o+u})},Hj=function(e,r){return function(o){var u=nW(e,r);return iW(u,o)}},bCe=function(e,r){return function(o){var u=nW(e,r),f=[].concat(yCe(u.map(function(p,x){return p*x}).slice(1)),[0]);return iW(f,o)}},Wj=function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];var u=r[0],f=r[1],p=r[2],x=r[3];if(r.length===1)switch(r[0]){case"linear":u=0,f=0,p=1,x=1;break;case"ease":u=.25,f=.1,p=.25,x=1;break;case"ease-in":u=.42,f=0,p=1,x=1;break;case"ease-out":u=.42,f=0,p=.58,x=1;break;case"ease-in-out":u=0,f=0,p=.58,x=1;break;default:{var s=r[0].split("(");if(s[0]==="cubic-bezier"&&s[1].split(")")[0].split(",").length===4){var w=s[1].split(")")[0].split(",").map(function(J){return parseFloat(J)}),I=pCe(w,4);u=I[0],f=I[1],p=I[2],x=I[3]}}}var P=Hj(u,p),N=Hj(f,x),U=bCe(u,p),X=function(Z){return Z>1?1:Z<0?0:Z},Q=function(Z){for(var H=Z>1?1:Z,K=H,ee=0;ee<8;++ee){var se=P(K)-H,me=U(K);if(Math.abs(se-H)<KC||me<KC)return N(K);K=X(K-se/me)}return N(K)};return Q.isStepper=!1,Q},CCe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.stiff,o=r===void 0?100:r,u=e.damping,f=u===void 0?8:u,p=e.dt,x=p===void 0?17:p,s=function(I,P,N){var U=-(I-P)*o,X=N*f,Q=N+(U-X)*x/1e3,J=N*x/1e3+I;return Math.abs(J-P)<KC&&Math.abs(Q)<KC?[P,0]:[J,Q]};return s.isStepper=!0,s.dt=x,s},wCe=function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];var u=r[0];if(typeof u=="string")switch(u){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Wj(u);case"spring":return CCe();default:if(u.split("(")[0]==="cubic-bezier")return Wj(u)}return typeof u=="function"?u:null};function qv(t){"@babel/helpers - typeof";return qv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qv(t)}function Zj(t){return ACe(t)||TCe(t)||oW(t)||SCe()}function SCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function TCe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ACe(t){if(Array.isArray(t))return yI(t)}function qj(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),r.push.apply(r,o)}return r}function Ba(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?qj(Object(r),!0).forEach(function(o){_I(t,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qj(Object(r)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(r,o))})}return t}function _I(t,e,r){return e=ECe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ECe(t){var e=DCe(t,"string");return qv(e)==="symbol"?e:String(e)}function DCe(t,e){if(qv(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var o=r.call(t,e||"default");if(qv(o)!=="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function PCe(t,e){return OCe(t)||ICe(t,e)||oW(t,e)||MCe()}function MCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oW(t,e){if(t){if(typeof t=="string")return yI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yI(t,e)}}function yI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,o=new Array(e);r<e;r++)o[r]=t[r];return o}function ICe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var o,u,f,p,x=[],s=!0,w=!1;try{if(f=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;s=!1}else for(;!(s=(o=f.call(r)).done)&&(x.push(o.value),x.length!==e);s=!0);}catch(I){w=!0,u=I}finally{try{if(!s&&r.return!=null&&(p=r.return(),Object(p)!==p))return}finally{if(w)throw u}}return x}}function OCe(t){if(Array.isArray(t))return t}var XC=function(e,r,o){return e+(r-e)*o},vI=function(e){var r=e.from,o=e.to;return r!==o},kCe=function t(e,r,o){var u=Y0(function(f,p){if(vI(p)){var x=e(p.from,p.to,p.velocity),s=PCe(x,2),w=s[0],I=s[1];return Ba(Ba({},p),{},{from:w,velocity:I})}return p},r);return o<1?Y0(function(f,p){return vI(p)?Ba(Ba({},p),{},{velocity:XC(p.velocity,u[f].velocity,o),from:XC(p.from,u[f].from,o)}):p},r):t(e,u,o-1)};const LCe=function(t,e,r,o,u){var f=hCe(t,e),p=f.reduce(function(J,Z){return Ba(Ba({},J),{},_I({},Z,[t[Z],e[Z]]))},{}),x=f.reduce(function(J,Z){return Ba(Ba({},J),{},_I({},Z,{from:t[Z],velocity:0,to:e[Z]}))},{}),s=-1,w,I,P=function(){return null},N=function(){return Y0(function(Z,H){return H.from},x)},U=function(){return!Object.values(x).filter(vI).length},X=function(Z){w||(w=Z);var H=Z-w,K=H/r.dt;x=kCe(r,x,K),u(Ba(Ba(Ba({},t),e),N())),w=Z,U()||(s=requestAnimationFrame(P))},Q=function(Z){I||(I=Z);var H=(Z-I)/o,K=Y0(function(se,me){return XC.apply(void 0,Zj(me).concat([r(H)]))},p);if(u(Ba(Ba(Ba({},t),e),K)),H<1)s=requestAnimationFrame(P);else{var ee=Y0(function(se,me){return XC.apply(void 0,Zj(me).concat([r(1)]))},p);u(Ba(Ba(Ba({},t),e),ee))}};return P=r.isStepper?X:Q,function(){return requestAnimationFrame(P),function(){cancelAnimationFrame(s)}}};function r_(t){"@babel/helpers - typeof";return r_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r_(t)}var RCe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function zCe(t,e){if(t==null)return{};var r=NCe(t,e),o,u;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(t);for(u=0;u<f.length;u++)o=f[u],!(e.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(t,o)&&(r[o]=t[o])}return r}function NCe(t,e){if(t==null)return{};var r={},o=Object.keys(t),u,f;for(f=0;f<o.length;f++)u=o[f],!(e.indexOf(u)>=0)&&(r[u]=t[u]);return r}function DE(t){return UCe(t)||$Ce(t)||jCe(t)||FCe()}function FCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jCe(t,e){if(t){if(typeof t=="string")return BI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return BI(t,e)}}function $Ce(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function UCe(t){if(Array.isArray(t))return BI(t)}function BI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,o=new Array(e);r<e;r++)o[r]=t[r];return o}function Kj(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),r.push.apply(r,o)}return r}function _u(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Kj(Object(r),!0).forEach(function(o){I0(t,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Kj(Object(r)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(r,o))})}return t}function I0(t,e,r){return e=aW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function VCe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Xj(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,aW(o.key),o)}}function GCe(t,e,r){return e&&Xj(t.prototype,e),r&&Xj(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function aW(t){var e=HCe(t,"string");return r_(e)==="symbol"?e:String(e)}function HCe(t,e){if(r_(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var o=r.call(t,e||"default");if(r_(o)!=="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function WCe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xI(t,e)}function xI(t,e){return xI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,u){return o.__proto__=u,o},xI(t,e)}function ZCe(t){var e=qCe();return function(){var o=YC(t),u;if(e){var f=YC(this).constructor;u=Reflect.construct(o,arguments,f)}else u=o.apply(this,arguments);return bI(this,u)}}function bI(t,e){if(e&&(r_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return CI(t)}function CI(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qCe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function YC(t){return YC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},YC(t)}var Mu=function(t){WCe(r,t);var e=ZCe(r);function r(o,u){var f;VCe(this,r),f=e.call(this,o,u);var p=f.props,x=p.isActive,s=p.attributeName,w=p.from,I=p.to,P=p.steps,N=p.children,U=p.duration;if(f.handleStyleChange=f.handleStyleChange.bind(CI(f)),f.changeStyle=f.changeStyle.bind(CI(f)),!x||U<=0)return f.state={style:{}},typeof N=="function"&&(f.state={style:I}),bI(f);if(P&&P.length)f.state={style:P[0].style};else if(w){if(typeof N=="function")return f.state={style:w},bI(f);f.state={style:s?I0({},s,w):w}}else f.state={style:{}};return f}return GCe(r,[{key:"componentDidMount",value:function(){var u=this.props,f=u.isActive,p=u.canBegin;this.mounted=!0,!(!f||!p)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(u){var f=this.props,p=f.isActive,x=f.canBegin,s=f.attributeName,w=f.shouldReAnimate,I=f.to,P=f.from,N=this.state.style;if(x){if(!p){var U={style:s?I0({},s,I):I};this.state&&N&&(s&&N[s]!==I||!s&&N!==I)&&this.setState(U);return}if(!(tCe(u.to,I)&&u.canBegin&&u.isActive)){var X=!u.canBegin||!u.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var Q=X||w?P:u.to;if(this.state&&N){var J={style:s?I0({},s,Q):Q};(s&&N[s]!==Q||!s&&N!==Q)&&this.setState(J)}this.runAnimation(_u(_u({},this.props),{},{from:Q,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var u=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),u&&u()}},{key:"handleStyleChange",value:function(u){this.changeStyle(u)}},{key:"changeStyle",value:function(u){this.mounted&&this.setState({style:u})}},{key:"runJSAnimation",value:function(u){var f=this,p=u.from,x=u.to,s=u.duration,w=u.easing,I=u.begin,P=u.onAnimationEnd,N=u.onAnimationStart,U=LCe(p,x,wCe(w),s,this.changeStyle),X=function(){f.stopJSAnimation=U()};this.manager.start([N,I,X,s,P])}},{key:"runStepAnimation",value:function(u){var f=this,p=u.steps,x=u.begin,s=u.onAnimationStart,w=p[0],I=w.style,P=w.duration,N=P===void 0?0:P,U=function(Q,J,Z){if(Z===0)return Q;var H=J.duration,K=J.easing,ee=K===void 0?"ease":K,se=J.style,me=J.properties,Ce=J.onAnimationEnd,Ae=Z>0?p[Z-1]:J,De=me||Object.keys(se);if(typeof ee=="function"||ee==="spring")return[].concat(DE(Q),[f.runJSAnimation.bind(f,{from:Ae.style,to:se,duration:H,easing:ee}),H]);var qe=Gj(De,H,ee),je=_u(_u(_u({},Ae.style),se),{},{transition:qe});return[].concat(DE(Q),[je,H,Ce]).filter(fCe)};return this.manager.start([s].concat(DE(p.reduce(U,[I,Math.max(N,x)])),[u.onAnimationEnd]))}},{key:"runAnimation",value:function(u){this.manager||(this.manager=lCe());var f=u.begin,p=u.duration,x=u.attributeName,s=u.to,w=u.easing,I=u.onAnimationStart,P=u.onAnimationEnd,N=u.steps,U=u.children,X=this.manager;if(this.unSubscribe=X.subscribe(this.handleStyleChange),typeof w=="function"||typeof U=="function"||w==="spring"){this.runJSAnimation(u);return}if(N.length>1){this.runStepAnimation(u);return}var Q=x?I0({},x,s):s,J=Gj(Object.keys(Q),p,w);X.start([I,f,_u(_u({},Q),{},{transition:J}),p,P])}},{key:"render",value:function(){var u=this.props,f=u.children;u.begin;var p=u.duration;u.attributeName,u.easing;var x=u.isActive;u.steps,u.from,u.to,u.canBegin,u.onAnimationEnd,u.shouldReAnimate,u.onAnimationReStart;var s=zCe(u,RCe),w=Te.Children.count(f),I=this.state.style;if(typeof f=="function")return f(I);if(!x||w===0||p<=0)return f;var P=function(U){var X=U.props,Q=X.style,J=Q===void 0?{}:Q,Z=X.className,H=Te.cloneElement(U,_u(_u({},s),{},{style:_u(_u({},J),I),className:Z}));return H};return w===1?P(Te.Children.only(f)):Ue.createElement("div",null,Te.Children.map(f,function(N){return P(N)}))}}]),r}(Te.PureComponent);Mu.displayName="Animate";Mu.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Mu.propTypes={from:kn.oneOfType([kn.object,kn.string]),to:kn.oneOfType([kn.object,kn.string]),attributeName:kn.string,duration:kn.number,begin:kn.number,easing:kn.oneOfType([kn.string,kn.func]),steps:kn.arrayOf(kn.shape({duration:kn.number.isRequired,style:kn.object.isRequired,easing:kn.oneOfType([kn.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),kn.func]),properties:kn.arrayOf("string"),onAnimationEnd:kn.func})),children:kn.oneOfType([kn.node,kn.func]),isActive:kn.bool,canBegin:kn.bool,onAnimationEnd:kn.func,shouldReAnimate:kn.bool,onAnimationStart:kn.func,onAnimationReStart:kn.func};kn.object,kn.object,kn.object,kn.element;kn.object,kn.object,kn.object,kn.oneOfType([kn.array,kn.element]),kn.any;function Kv(t){"@babel/helpers - typeof";return Kv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kv(t)}function JC(){return JC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},JC.apply(this,arguments)}function KCe(t,e){return QCe(t)||JCe(t,e)||YCe(t,e)||XCe()}function XCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YCe(t,e){if(t){if(typeof t=="string")return Yj(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Yj(t,e)}}function Yj(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,o=new Array(e);r<e;r++)o[r]=t[r];return o}function JCe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var o,u,f,p,x=[],s=!0,w=!1;try{if(f=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;s=!1}else for(;!(s=(o=f.call(r)).done)&&(x.push(o.value),x.length!==e);s=!0);}catch(I){w=!0,u=I}finally{try{if(!s&&r.return!=null&&(p=r.return(),Object(p)!==p))return}finally{if(w)throw u}}return x}}function QCe(t){if(Array.isArray(t))return t}function Jj(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),r.push.apply(r,o)}return r}function Qj(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Jj(Object(r),!0).forEach(function(o){ewe(t,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Jj(Object(r)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(r,o))})}return t}function ewe(t,e,r){return e=twe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function twe(t){var e=rwe(t,"string");return Kv(e)=="symbol"?e:String(e)}function rwe(t,e){if(Kv(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var o=r.call(t,e||"default");if(Kv(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var e8=function(e,r,o,u,f){var p=Math.min(Math.abs(o)/2,Math.abs(u)/2),x=u>=0?1:-1,s=o>=0?1:-1,w=u>=0&&o>=0||u<0&&o<0?1:0,I;if(p>0&&f instanceof Array){for(var P=[0,0,0,0],N=0,U=4;N<U;N++)P[N]=f[N]>p?p:f[N];I="M".concat(e,",").concat(r+x*P[0]),P[0]>0&&(I+="A ".concat(P[0],",").concat(P[0],",0,0,").concat(w,",").concat(e+s*P[0],",").concat(r)),I+="L ".concat(e+o-s*P[1],",").concat(r),P[1]>0&&(I+="A ".concat(P[1],",").concat(P[1],",0,0,").concat(w,`,
        `).concat(e+o,",").concat(r+x*P[1])),I+="L ".concat(e+o,",").concat(r+u-x*P[2]),P[2]>0&&(I+="A ".concat(P[2],",").concat(P[2],",0,0,").concat(w,`,
        `).concat(e+o-s*P[2],",").concat(r+u)),I+="L ".concat(e+s*P[3],",").concat(r+u),P[3]>0&&(I+="A ".concat(P[3],",").concat(P[3],",0,0,").concat(w,`,
        `).concat(e,",").concat(r+u-x*P[3])),I+="Z"}else if(p>0&&f===+f&&f>0){var X=Math.min(p,f);I="M ".concat(e,",").concat(r+x*X,`
            A `).concat(X,",").concat(X,",0,0,").concat(w,",").concat(e+s*X,",").concat(r,`
            L `).concat(e+o-s*X,",").concat(r,`
            A `).concat(X,",").concat(X,",0,0,").concat(w,",").concat(e+o,",").concat(r+x*X,`
            L `).concat(e+o,",").concat(r+u-x*X,`
            A `).concat(X,",").concat(X,",0,0,").concat(w,",").concat(e+o-s*X,",").concat(r+u,`
            L `).concat(e+s*X,",").concat(r+u,`
            A `).concat(X,",").concat(X,",0,0,").concat(w,",").concat(e,",").concat(r+u-x*X," Z")}else I="M ".concat(e,",").concat(r," h ").concat(o," v ").concat(u," h ").concat(-o," Z");return I},nwe=function(e,r){if(!e||!r)return!1;var o=e.x,u=e.y,f=r.x,p=r.y,x=r.width,s=r.height;if(Math.abs(x)>0&&Math.abs(s)>0){var w=Math.min(f,f+x),I=Math.max(f,f+x),P=Math.min(p,p+s),N=Math.max(p,p+s);return o>=w&&o<=I&&u>=P&&u<=N}return!1},iwe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},yk=function(e){var r=Qj(Qj({},iwe),e),o=Te.useRef(),u=Te.useState(-1),f=KCe(u,2),p=f[0],x=f[1];Te.useEffect(function(){if(o.current&&o.current.getTotalLength)try{var ee=o.current.getTotalLength();ee&&x(ee)}catch{}},[]);var s=r.x,w=r.y,I=r.width,P=r.height,N=r.radius,U=r.className,X=r.animationEasing,Q=r.animationDuration,J=r.animationBegin,Z=r.isAnimationActive,H=r.isUpdateAnimationActive;if(s!==+s||w!==+w||I!==+I||P!==+P||I===0||P===0)return null;var K=Yn("recharts-rectangle",U);return H?Ue.createElement(Mu,{canBegin:p>0,from:{width:I,height:P,x:s,y:w},to:{width:I,height:P,x:s,y:w},duration:Q,animationEasing:X,isActive:H},function(ee){var se=ee.width,me=ee.height,Ce=ee.x,Ae=ee.y;return Ue.createElement(Mu,{canBegin:p>0,from:"0px ".concat(p===-1?1:p,"px"),to:"".concat(p,"px 0px"),attributeName:"strokeDasharray",begin:J,duration:Q,isActive:Z,easing:X},Ue.createElement("path",JC({},An(r,!0),{className:K,d:e8(Ce,Ae,se,me,N),ref:o})))}):Ue.createElement("path",JC({},An(r,!0),{className:K,d:e8(s,w,I,P,N)}))};function wI(){return wI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},wI.apply(this,arguments)}var _S=function(e){var r=e.cx,o=e.cy,u=e.r,f=e.className,p=Yn("recharts-dot",f);return r===+r&&o===+o&&u===+u?Ue.createElement("circle",wI({},An(e,!1),vC(e),{className:p,cx:r,cy:o,r:u})):null};function Xv(t){"@babel/helpers - typeof";return Xv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xv(t)}var owe=["x","y","top","left","width","height","className"];function SI(){return SI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},SI.apply(this,arguments)}function t8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),r.push.apply(r,o)}return r}function awe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?t8(Object(r),!0).forEach(function(o){swe(t,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):t8(Object(r)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(r,o))})}return t}function swe(t,e,r){return e=lwe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lwe(t){var e=uwe(t,"string");return Xv(e)=="symbol"?e:String(e)}function uwe(t,e){if(Xv(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var o=r.call(t,e||"default");if(Xv(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cwe(t,e){if(t==null)return{};var r=hwe(t,e),o,u;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(t);for(u=0;u<f.length;u++)o=f[u],!(e.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(t,o)&&(r[o]=t[o])}return r}function hwe(t,e){if(t==null)return{};var r={},o=Object.keys(t),u,f;for(f=0;f<o.length;f++)u=o[f],!(e.indexOf(u)>=0)&&(r[u]=t[u]);return r}var fwe=function(e,r,o,u,f,p){return"M".concat(e,",").concat(f,"v").concat(u,"M").concat(p,",").concat(r,"h").concat(o)},dwe=function(e){var r=e.x,o=r===void 0?0:r,u=e.y,f=u===void 0?0:u,p=e.top,x=p===void 0?0:p,s=e.left,w=s===void 0?0:s,I=e.width,P=I===void 0?0:I,N=e.height,U=N===void 0?0:N,X=e.className,Q=cwe(e,owe),J=awe({x:o,y:f,top:x,left:w,width:P,height:U},Q);return!lr(o)||!lr(f)||!lr(P)||!lr(U)||!lr(x)||!lr(w)?null:Ue.createElement("path",SI({},An(J,!0),{className:Yn("recharts-cross",X),d:fwe(o,f,P,U,x,w)}))},pwe=b9,mwe=pwe(Object.getPrototypeOf,Object),gwe=mwe,_we=Ah,ywe=gwe,vwe=Eh,Bwe="[object Object]",xwe=Function.prototype,bwe=Object.prototype,sW=xwe.toString,Cwe=bwe.hasOwnProperty,wwe=sW.call(Object);function Swe(t){if(!vwe(t)||_we(t)!=Bwe)return!1;var e=ywe(t);if(e===null)return!0;var r=Cwe.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&sW.call(r)==wwe}var Twe=Swe;const Awe=wi(Twe);var Ewe=Ah,Dwe=Eh,Pwe="[object Boolean]";function Mwe(t){return t===!0||t===!1||Dwe(t)&&Ewe(t)==Pwe}var Iwe=Mwe;const Owe=wi(Iwe);function Yv(t){"@babel/helpers - typeof";return Yv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yv(t)}function QC(){return QC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},QC.apply(this,arguments)}function kwe(t,e){return Nwe(t)||zwe(t,e)||Rwe(t,e)||Lwe()}function Lwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rwe(t,e){if(t){if(typeof t=="string")return r8(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return r8(t,e)}}function r8(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,o=new Array(e);r<e;r++)o[r]=t[r];return o}function zwe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var o,u,f,p,x=[],s=!0,w=!1;try{if(f=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;s=!1}else for(;!(s=(o=f.call(r)).done)&&(x.push(o.value),x.length!==e);s=!0);}catch(I){w=!0,u=I}finally{try{if(!s&&r.return!=null&&(p=r.return(),Object(p)!==p))return}finally{if(w)throw u}}return x}}function Nwe(t){if(Array.isArray(t))return t}function n8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),r.push.apply(r,o)}return r}function i8(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?n8(Object(r),!0).forEach(function(o){Fwe(t,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n8(Object(r)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(r,o))})}return t}function Fwe(t,e,r){return e=jwe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jwe(t){var e=$we(t,"string");return Yv(e)=="symbol"?e:String(e)}function $we(t,e){if(Yv(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var o=r.call(t,e||"default");if(Yv(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var o8=function(e,r,o,u,f){var p=o-u,x;return x="M ".concat(e,",").concat(r),x+="L ".concat(e+o,",").concat(r),x+="L ".concat(e+o-p/2,",").concat(r+f),x+="L ".concat(e+o-p/2-u,",").concat(r+f),x+="L ".concat(e,",").concat(r," Z"),x},Uwe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Vwe=function(e){var r=i8(i8({},Uwe),e),o=Te.useRef(),u=Te.useState(-1),f=kwe(u,2),p=f[0],x=f[1];Te.useEffect(function(){if(o.current&&o.current.getTotalLength)try{var K=o.current.getTotalLength();K&&x(K)}catch{}},[]);var s=r.x,w=r.y,I=r.upperWidth,P=r.lowerWidth,N=r.height,U=r.className,X=r.animationEasing,Q=r.animationDuration,J=r.animationBegin,Z=r.isUpdateAnimationActive;if(s!==+s||w!==+w||I!==+I||P!==+P||N!==+N||I===0&&P===0||N===0)return null;var H=Yn("recharts-trapezoid",U);return Z?Ue.createElement(Mu,{canBegin:p>0,from:{upperWidth:0,lowerWidth:0,height:N,x:s,y:w},to:{upperWidth:I,lowerWidth:P,height:N,x:s,y:w},duration:Q,animationEasing:X,isActive:Z},function(K){var ee=K.upperWidth,se=K.lowerWidth,me=K.height,Ce=K.x,Ae=K.y;return Ue.createElement(Mu,{canBegin:p>0,from:"0px ".concat(p===-1?1:p,"px"),to:"".concat(p,"px 0px"),attributeName:"strokeDasharray",begin:J,duration:Q,easing:X},Ue.createElement("path",QC({},An(r,!0),{className:H,d:o8(Ce,Ae,ee,se,me),ref:o})))}):Ue.createElement("g",null,Ue.createElement("path",QC({},An(r,!0),{className:H,d:o8(s,w,I,P,N)})))},Gwe=["option","shapeType","propTransformer","activeClassName","isActive"];function Jv(t){"@babel/helpers - typeof";return Jv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jv(t)}function Hwe(t,e){if(t==null)return{};var r=Wwe(t,e),o,u;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(t);for(u=0;u<f.length;u++)o=f[u],!(e.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(t,o)&&(r[o]=t[o])}return r}function Wwe(t,e){if(t==null)return{};var r={},o=Object.keys(t),u,f;for(f=0;f<o.length;f++)u=o[f],!(e.indexOf(u)>=0)&&(r[u]=t[u]);return r}function a8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),r.push.apply(r,o)}return r}function ew(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?a8(Object(r),!0).forEach(function(o){Zwe(t,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a8(Object(r)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(r,o))})}return t}function Zwe(t,e,r){return e=qwe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qwe(t){var e=Kwe(t,"string");return Jv(e)=="symbol"?e:String(e)}function Kwe(t,e){if(Jv(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var o=r.call(t,e||"default");if(Jv(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Xwe(t,e){return ew(ew({},e),t)}function Ywe(t,e){return t==="symbols"}function s8(t){var e=t.shapeType,r=t.elementProps;switch(e){case"rectangle":return Ue.createElement(yk,r);case"trapezoid":return Ue.createElement(Vwe,r);case"sector":return Ue.createElement(KH,r);case"symbols":if(Ywe(e))return Ue.createElement(iS,r);break;default:return null}}function Jwe(t){return Te.isValidElement(t)?t.props:t}function TI(t){var e=t.option,r=t.shapeType,o=t.propTransformer,u=o===void 0?Xwe:o,f=t.activeClassName,p=f===void 0?"recharts-active-shape":f,x=t.isActive,s=Hwe(t,Gwe),w;if(Te.isValidElement(e))w=Te.cloneElement(e,ew(ew({},s),Jwe(e)));else if(Ln(e))w=e(s);else if(Awe(e)&&!Owe(e)){var I=u(e,s);w=Ue.createElement(s8,{shapeType:r,elementProps:I})}else{var P=s;w=Ue.createElement(s8,{shapeType:r,elementProps:P})}return x?Ue.createElement(hi,{className:p},w):w}function yS(t,e){return e!=null&&"trapezoids"in t.props}function vS(t,e){return e!=null&&"sectors"in t.props}function Qv(t,e){return e!=null&&"points"in t.props}function Qwe(t,e){var r,o,u=t.x===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.x)||t.x===e.x,f=t.y===(e==null||(o=e.labelViewBox)===null||o===void 0?void 0:o.y)||t.y===e.y;return u&&f}function eSe(t,e){var r=t.endAngle===e.endAngle,o=t.startAngle===e.startAngle;return r&&o}function tSe(t,e){var r=t.x===e.x,o=t.y===e.y,u=t.z===e.z;return r&&o&&u}function rSe(t,e){var r;return yS(t,e)?r=Qwe:vS(t,e)?r=eSe:Qv(t,e)&&(r=tSe),r}function nSe(t,e){var r;return yS(t,e)?r="trapezoids":vS(t,e)?r="sectors":Qv(t,e)&&(r="points"),r}function iSe(t,e){if(yS(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(vS(t,e)){var o;return(o=e.tooltipPayload)===null||o===void 0||(o=o[0])===null||o===void 0||(o=o.payload)===null||o===void 0?void 0:o.payload}return Qv(t,e)?e.payload:{}}function oSe(t){var e=t.activeTooltipItem,r=t.graphicalItem,o=t.itemData,u=nSe(r,e),f=iSe(r,e),p=o.filter(function(s,w){var I=Fp(f,s),P=r.props[u].filter(function(X){var Q=rSe(r,e);return Q(X,e)}),N=r.props[u].indexOf(P[P.length-1]),U=w===N;return I&&U}),x=o.indexOf(p[p.length-1]);return x}var aSe=Math.ceil,sSe=Math.max;function lSe(t,e,r,o){for(var u=-1,f=sSe(aSe((e-t)/(r||1)),0),p=Array(f);f--;)p[o?f:++u]=t,t+=r;return p}var uSe=lSe,cSe=U9,l8=1/0,hSe=17976931348623157e292;function fSe(t){if(!t)return t===0?t:0;if(t=cSe(t),t===l8||t===-l8){var e=t<0?-1:1;return e*hSe}return t===t?t:0}var lW=fSe,dSe=uSe,pSe=sS,PE=lW;function mSe(t){return function(e,r,o){return o&&typeof o!="number"&&pSe(e,r,o)&&(r=o=void 0),e=PE(e),r===void 0?(r=e,e=0):r=PE(r),o=o===void 0?e<r?1:-1:PE(o),dSe(e,r,o,t)}}var gSe=mSe,_Se=gSe,ySe=_Se(),vSe=ySe;const tw=wi(vSe);function eB(t){"@babel/helpers - typeof";return eB=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eB(t)}function u8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),r.push.apply(r,o)}return r}function c8(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?u8(Object(r),!0).forEach(function(o){uW(t,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u8(Object(r)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(r,o))})}return t}function uW(t,e,r){return e=BSe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function BSe(t){var e=xSe(t,"string");return eB(e)=="symbol"?e:String(e)}function xSe(t,e){if(eB(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var o=r.call(t,e||"default");if(eB(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bSe=["Webkit","Moz","O","ms"],CSe=function(e,r){if(!e)return null;var o=e.replace(/(\w)/,function(f){return f.toUpperCase()}),u=bSe.reduce(function(f,p){return c8(c8({},f),{},uW({},p+o,r))},{});return u[e]=r,u};function n_(t){"@babel/helpers - typeof";return n_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n_(t)}function rw(){return rw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},rw.apply(this,arguments)}function h8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),r.push.apply(r,o)}return r}function ME(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?h8(Object(r),!0).forEach(function(o){Ks(t,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h8(Object(r)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(r,o))})}return t}function wSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f8(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,hW(o.key),o)}}function SSe(t,e,r){return e&&f8(t.prototype,e),r&&f8(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function TSe(t,e,r){return e=nw(e),ASe(t,cW()?Reflect.construct(e,r||[],nw(t).constructor):e.apply(t,r))}function ASe(t,e){if(e&&(n_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cc(t)}function cW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cW=function(){return!!t})()}function nw(t){return nw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},nw(t)}function cc(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ESe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&AI(t,e)}function AI(t,e){return AI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,u){return o.__proto__=u,o},AI(t,e)}function Ks(t,e,r){return e=hW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function hW(t){var e=DSe(t,"string");return n_(e)=="symbol"?e:String(e)}function DSe(t,e){if(n_(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var o=r.call(t,e||"default");if(n_(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var PSe=function(e){var r=e.data,o=e.startIndex,u=e.endIndex,f=e.x,p=e.width,x=e.travellerWidth;if(!r||!r.length)return{};var s=r.length,w=K0().domain(tw(0,s)).range([f,f+p-x]),I=w.domain().map(function(P){return w(P)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:w(o),endX:w(u),scale:w,scaleValues:I}},d8=function(e){return e.changedTouches&&!!e.changedTouches.length},i_=function(t){ESe(e,t);function e(r){var o;return wSe(this,e),o=TSe(this,e,[r]),Ks(cc(o),"handleDrag",function(u){o.leaveTimer&&(clearTimeout(o.leaveTimer),o.leaveTimer=null),o.state.isTravellerMoving?o.handleTravellerMove(u):o.state.isSlideMoving&&o.handleSlideDrag(u)}),Ks(cc(o),"handleTouchMove",function(u){u.changedTouches!=null&&u.changedTouches.length>0&&o.handleDrag(u.changedTouches[0])}),Ks(cc(o),"handleDragEnd",function(){o.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var u=o.props,f=u.endIndex,p=u.onDragEnd,x=u.startIndex;p==null||p({endIndex:f,startIndex:x})}),o.detachDragEndListener()}),Ks(cc(o),"handleLeaveWrapper",function(){(o.state.isTravellerMoving||o.state.isSlideMoving)&&(o.leaveTimer=window.setTimeout(o.handleDragEnd,o.props.leaveTimeOut))}),Ks(cc(o),"handleEnterSlideOrTraveller",function(){o.setState({isTextActive:!0})}),Ks(cc(o),"handleLeaveSlideOrTraveller",function(){o.setState({isTextActive:!1})}),Ks(cc(o),"handleSlideDragStart",function(u){var f=d8(u)?u.changedTouches[0]:u;o.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:f.pageX}),o.attachDragEndListener()}),o.travellerDragStartHandlers={startX:o.handleTravellerDragStart.bind(cc(o),"startX"),endX:o.handleTravellerDragStart.bind(cc(o),"endX")},o.state={},o}return SSe(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(o){var u=o.startX,f=o.endX,p=this.state.scaleValues,x=this.props,s=x.gap,w=x.data,I=w.length-1,P=Math.min(u,f),N=Math.max(u,f),U=e.getIndexInRange(p,P),X=e.getIndexInRange(p,N);return{startIndex:U-U%s,endIndex:X===I?I:X-X%s}}},{key:"getTextOfTick",value:function(o){var u=this.props,f=u.data,p=u.tickFormatter,x=u.dataKey,s=qo(f[o],x,o);return Ln(p)?p(s,o):s}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(o){var u=this.state,f=u.slideMoveStartX,p=u.startX,x=u.endX,s=this.props,w=s.x,I=s.width,P=s.travellerWidth,N=s.startIndex,U=s.endIndex,X=s.onChange,Q=o.pageX-f;Q>0?Q=Math.min(Q,w+I-P-x,w+I-P-p):Q<0&&(Q=Math.max(Q,w-p,w-x));var J=this.getIndex({startX:p+Q,endX:x+Q});(J.startIndex!==N||J.endIndex!==U)&&X&&X(J),this.setState({startX:p+Q,endX:x+Q,slideMoveStartX:o.pageX})}},{key:"handleTravellerDragStart",value:function(o,u){var f=d8(u)?u.changedTouches[0]:u;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:o,brushMoveStartX:f.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(o){var u=this.state,f=u.brushMoveStartX,p=u.movingTravellerId,x=u.endX,s=u.startX,w=this.state[p],I=this.props,P=I.x,N=I.width,U=I.travellerWidth,X=I.onChange,Q=I.gap,J=I.data,Z={startX:this.state.startX,endX:this.state.endX},H=o.pageX-f;H>0?H=Math.min(H,P+N-U-w):H<0&&(H=Math.max(H,P-w)),Z[p]=w+H;var K=this.getIndex(Z),ee=K.startIndex,se=K.endIndex,me=function(){var Ae=J.length-1;return p==="startX"&&(x>s?ee%Q===0:se%Q===0)||x<s&&se===Ae||p==="endX"&&(x>s?se%Q===0:ee%Q===0)||x>s&&se===Ae};this.setState(Ks(Ks({},p,w+H),"brushMoveStartX",o.pageX),function(){X&&me()&&X(K)})}},{key:"handleTravellerMoveKeyboard",value:function(o,u){var f=this,p=this.state,x=p.scaleValues,s=p.startX,w=p.endX,I=this.state[u],P=x.indexOf(I);if(P!==-1){var N=P+o;if(!(N===-1||N>=x.length)){var U=x[N];u==="startX"&&U>=w||u==="endX"&&U<=s||this.setState(Ks({},u,U),function(){f.props.onChange(f.getIndex({startX:f.state.startX,endX:f.state.endX}))})}}}},{key:"renderBackground",value:function(){var o=this.props,u=o.x,f=o.y,p=o.width,x=o.height,s=o.fill,w=o.stroke;return Ue.createElement("rect",{stroke:w,fill:s,x:u,y:f,width:p,height:x})}},{key:"renderPanorama",value:function(){var o=this.props,u=o.x,f=o.y,p=o.width,x=o.height,s=o.data,w=o.children,I=o.padding,P=Te.Children.only(w);return P?Ue.cloneElement(P,{x:u,y:f,width:p,height:x,margin:I,compact:!0,data:s}):null}},{key:"renderTravellerLayer",value:function(o,u){var f=this,p=this.props,x=p.y,s=p.travellerWidth,w=p.height,I=p.traveller,P=p.ariaLabel,N=p.data,U=p.startIndex,X=p.endIndex,Q=Math.max(o,this.props.x),J=ME(ME({},An(this.props,!1)),{},{x:Q,y:x,width:s,height:w}),Z=P||"Min value: ".concat(N[U].name,", Max value: ").concat(N[X].name);return Ue.createElement(hi,{tabIndex:0,role:"slider","aria-label":Z,"aria-valuenow":o,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[u],onTouchStart:this.travellerDragStartHandlers[u],onKeyDown:function(K){["ArrowLeft","ArrowRight"].includes(K.key)&&(K.preventDefault(),K.stopPropagation(),f.handleTravellerMoveKeyboard(K.key==="ArrowRight"?1:-1,u))},onFocus:function(){f.setState({isTravellerFocused:!0})},onBlur:function(){f.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(I,J))}},{key:"renderSlide",value:function(o,u){var f=this.props,p=f.y,x=f.height,s=f.stroke,w=f.travellerWidth,I=Math.min(o,u)+w,P=Math.max(Math.abs(u-o)-w,0);return Ue.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:s,fillOpacity:.2,x:I,y:p,width:P,height:x})}},{key:"renderText",value:function(){var o=this.props,u=o.startIndex,f=o.endIndex,p=o.y,x=o.height,s=o.travellerWidth,w=o.stroke,I=this.state,P=I.startX,N=I.endX,U=5,X={pointerEvents:"none",fill:w};return Ue.createElement(hi,{className:"recharts-brush-texts"},Ue.createElement(OC,rw({textAnchor:"end",verticalAnchor:"middle",x:Math.min(P,N)-U,y:p+x/2},X),this.getTextOfTick(u)),Ue.createElement(OC,rw({textAnchor:"start",verticalAnchor:"middle",x:Math.max(P,N)+s+U,y:p+x/2},X),this.getTextOfTick(f)))}},{key:"render",value:function(){var o=this.props,u=o.data,f=o.className,p=o.children,x=o.x,s=o.y,w=o.width,I=o.height,P=o.alwaysShowText,N=this.state,U=N.startX,X=N.endX,Q=N.isTextActive,J=N.isSlideMoving,Z=N.isTravellerMoving,H=N.isTravellerFocused;if(!u||!u.length||!lr(x)||!lr(s)||!lr(w)||!lr(I)||w<=0||I<=0)return null;var K=Yn("recharts-brush",f),ee=Ue.Children.count(p)===1,se=CSe("userSelect","none");return Ue.createElement(hi,{className:K,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:se},this.renderBackground(),ee&&this.renderPanorama(),this.renderSlide(U,X),this.renderTravellerLayer(U,"startX"),this.renderTravellerLayer(X,"endX"),(Q||J||Z||H||P)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(o){var u=o.x,f=o.y,p=o.width,x=o.height,s=o.stroke,w=Math.floor(f+x/2)-1;return Ue.createElement(Ue.Fragment,null,Ue.createElement("rect",{x:u,y:f,width:p,height:x,fill:s,stroke:"none"}),Ue.createElement("line",{x1:u+1,y1:w,x2:u+p-1,y2:w,fill:"none",stroke:"#fff"}),Ue.createElement("line",{x1:u+1,y1:w+2,x2:u+p-1,y2:w+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(o,u){var f;return Ue.isValidElement(o)?f=Ue.cloneElement(o,u):Ln(o)?f=o(u):f=e.renderDefaultTraveller(u),f}},{key:"getDerivedStateFromProps",value:function(o,u){var f=o.data,p=o.width,x=o.x,s=o.travellerWidth,w=o.updateId,I=o.startIndex,P=o.endIndex;if(f!==u.prevData||w!==u.prevUpdateId)return ME({prevData:f,prevTravellerWidth:s,prevUpdateId:w,prevX:x,prevWidth:p},f&&f.length?PSe({data:f,width:p,x,travellerWidth:s,startIndex:I,endIndex:P}):{scale:null,scaleValues:null});if(u.scale&&(p!==u.prevWidth||x!==u.prevX||s!==u.prevTravellerWidth)){u.scale.range([x,x+p-s]);var N=u.scale.domain().map(function(U){return u.scale(U)});return{prevData:f,prevTravellerWidth:s,prevUpdateId:w,prevX:x,prevWidth:p,startX:u.scale(o.startIndex),endX:u.scale(o.endIndex),scaleValues:N}}return null}},{key:"getIndexInRange",value:function(o,u){for(var f=o.length,p=0,x=f-1;x-p>1;){var s=Math.floor((p+x)/2);o[s]>u?x=s:p=s}return u>=o[x]?x:p}}]),e}(Te.PureComponent);Ks(i_,"displayName","Brush");Ks(i_,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var MSe=V3;function ISe(t,e){var r;return MSe(t,function(o,u,f){return r=e(o,u,f),!r}),!!r}var OSe=ISe,kSe=p9,LSe=od,RSe=OSe,zSe=Ds,NSe=sS;function FSe(t,e,r){var o=zSe(t)?kSe:RSe;return r&&NSe(t,e,r)&&(e=void 0),o(t,LSe(e))}var jSe=FSe;const $Se=wi(jSe);var xc=function(e,r){var o=e.alwaysShow,u=e.ifOverflow;return o&&(u="extendDomain"),u===r},p8=z9;function USe(t,e,r){e=="__proto__"&&p8?p8(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var VSe=USe,GSe=VSe,HSe=L9,WSe=od;function ZSe(t,e){var r={};return e=WSe(e),HSe(t,function(o,u,f){GSe(r,u,e(o,u,f))}),r}var qSe=ZSe;const KSe=wi(qSe);function XSe(t,e){for(var r=-1,o=t==null?0:t.length;++r<o;)if(!e(t[r],r,t))return!1;return!0}var YSe=XSe,JSe=V3;function QSe(t,e){var r=!0;return JSe(t,function(o,u,f){return r=!!e(o,u,f),r}),r}var eTe=QSe,tTe=YSe,rTe=eTe,nTe=od,iTe=Ds,oTe=sS;function aTe(t,e,r){var o=iTe(t)?tTe:rTe;return r&&oTe(t,e,r)&&(e=void 0),o(t,nTe(e))}var sTe=aTe;const fW=wi(sTe);var lTe=["x","y"];function tB(t){"@babel/helpers - typeof";return tB=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tB(t)}function EI(){return EI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},EI.apply(this,arguments)}function m8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),r.push.apply(r,o)}return r}function x0(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?m8(Object(r),!0).forEach(function(o){uTe(t,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):m8(Object(r)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(r,o))})}return t}function uTe(t,e,r){return e=cTe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function cTe(t){var e=hTe(t,"string");return tB(e)=="symbol"?e:String(e)}function hTe(t,e){if(tB(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var o=r.call(t,e||"default");if(tB(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fTe(t,e){if(t==null)return{};var r=dTe(t,e),o,u;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(t);for(u=0;u<f.length;u++)o=f[u],!(e.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(t,o)&&(r[o]=t[o])}return r}function dTe(t,e){if(t==null)return{};var r={},o=Object.keys(t),u,f;for(f=0;f<o.length;f++)u=o[f],!(e.indexOf(u)>=0)&&(r[u]=t[u]);return r}function pTe(t,e){var r=t.x,o=t.y,u=fTe(t,lTe),f="".concat(r),p=parseInt(f,10),x="".concat(o),s=parseInt(x,10),w="".concat(e.height||u.height),I=parseInt(w,10),P="".concat(e.width||u.width),N=parseInt(P,10);return x0(x0(x0(x0(x0({},e),u),p?{x:p}:{}),s?{y:s}:{}),{},{height:I,width:N,name:e.name,radius:e.radius})}function g8(t){return Ue.createElement(TI,EI({shapeType:"rectangle",propTransformer:pTe,activeClassName:"recharts-active-bar"},t))}var mTe=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(o,u){if(typeof e=="number")return e;var f=typeof o=="number";return f?e(o,u):(f||$p(!1),r)}},gTe=["value","background"],dW;function o_(t){"@babel/helpers - typeof";return o_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o_(t)}function _Te(t,e){if(t==null)return{};var r=yTe(t,e),o,u;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(t);for(u=0;u<f.length;u++)o=f[u],!(e.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(t,o)&&(r[o]=t[o])}return r}function yTe(t,e){if(t==null)return{};var r={},o=Object.keys(t),u,f;for(f=0;f<o.length;f++)u=o[f],!(e.indexOf(u)>=0)&&(r[u]=t[u]);return r}function iw(){return iw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},iw.apply(this,arguments)}function _8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),r.push.apply(r,o)}return r}function ia(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_8(Object(r),!0).forEach(function(o){zf(t,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_8(Object(r)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(r,o))})}return t}function vTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y8(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,mW(o.key),o)}}function BTe(t,e,r){return e&&y8(t.prototype,e),r&&y8(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function xTe(t,e,r){return e=ow(e),bTe(t,pW()?Reflect.construct(e,r||[],ow(t).constructor):e.apply(t,r))}function bTe(t,e){if(e&&(o_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return O0(t)}function pW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pW=function(){return!!t})()}function ow(t){return ow=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ow(t)}function O0(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function CTe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&DI(t,e)}function DI(t,e){return DI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,u){return o.__proto__=u,o},DI(t,e)}function zf(t,e,r){return e=mW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function mW(t){var e=wTe(t,"string");return o_(e)=="symbol"?e:String(e)}function wTe(t,e){if(o_(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var o=r.call(t,e||"default");if(o_(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var L_=function(t){CTe(e,t);function e(){var r;vTe(this,e);for(var o=arguments.length,u=new Array(o),f=0;f<o;f++)u[f]=arguments[f];return r=xTe(this,e,[].concat(u)),zf(O0(r),"state",{isAnimationFinished:!1}),zf(O0(r),"id",Xp("recharts-bar-")),zf(O0(r),"handleAnimationEnd",function(){var p=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),p&&p()}),zf(O0(r),"handleAnimationStart",function(){var p=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),p&&p()}),r}return BTe(e,[{key:"renderRectanglesStatically",value:function(o){var u=this,f=this.props,p=f.shape,x=f.dataKey,s=f.activeIndex,w=f.activeBar,I=An(this.props,!1);return o&&o.map(function(P,N){var U=N===s,X=U?w:p,Q=ia(ia(ia({},I),P),{},{isActive:U,option:X,index:N,dataKey:x,onAnimationStart:u.handleAnimationStart,onAnimationEnd:u.handleAnimationEnd});return Ue.createElement(hi,iw({className:"recharts-bar-rectangle"},wv(u.props,P,N),{key:"rectangle-".concat(P==null?void 0:P.x,"-").concat(P==null?void 0:P.y,"-").concat(P==null?void 0:P.value)}),Ue.createElement(g8,Q))})}},{key:"renderRectanglesWithAnimation",value:function(){var o=this,u=this.props,f=u.data,p=u.layout,x=u.isAnimationActive,s=u.animationBegin,w=u.animationDuration,I=u.animationEasing,P=u.animationId,N=this.state.prevData;return Ue.createElement(Mu,{begin:s,duration:w,isActive:x,easing:I,from:{t:0},to:{t:1},key:"bar-".concat(P),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(U){var X=U.t,Q=f.map(function(J,Z){var H=N&&N[Z];if(H){var K=Ao(H.x,J.x),ee=Ao(H.y,J.y),se=Ao(H.width,J.width),me=Ao(H.height,J.height);return ia(ia({},J),{},{x:K(X),y:ee(X),width:se(X),height:me(X)})}if(p==="horizontal"){var Ce=Ao(0,J.height),Ae=Ce(X);return ia(ia({},J),{},{y:J.y+J.height-Ae,height:Ae})}var De=Ao(0,J.width),qe=De(X);return ia(ia({},J),{},{width:qe})});return Ue.createElement(hi,null,o.renderRectanglesStatically(Q))})}},{key:"renderRectangles",value:function(){var o=this.props,u=o.data,f=o.isAnimationActive,p=this.state.prevData;return f&&u&&u.length&&(!p||!Fp(p,u))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(u)}},{key:"renderBackground",value:function(){var o=this,u=this.props,f=u.data,p=u.dataKey,x=u.activeIndex,s=An(this.props.background,!1);return f.map(function(w,I){w.value;var P=w.background,N=_Te(w,gTe);if(!P)return null;var U=ia(ia(ia(ia(ia({},N),{},{fill:"#eee"},P),s),wv(o.props,w,I)),{},{onAnimationStart:o.handleAnimationStart,onAnimationEnd:o.handleAnimationEnd,dataKey:p,index:I,key:"background-bar-".concat(I),className:"recharts-bar-background-rectangle"});return Ue.createElement(g8,iw({option:o.props.background,isActive:I===x},U))})}},{key:"renderErrorBar",value:function(o,u){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var f=this.props,p=f.data,x=f.xAxis,s=f.yAxis,w=f.layout,I=f.children,P=Es(I,O_);if(!P)return null;var N=w==="vertical"?p[0].height/2:p[0].width/2,U=function(J,Z){var H=Array.isArray(J.value)?J.value[1]:J.value;return{x:J.x,y:J.y,value:H,errorVal:qo(J,Z)}},X={clipPath:o?"url(#clipPath-".concat(u,")"):null};return Ue.createElement(hi,X,P.map(function(Q){return Ue.cloneElement(Q,{key:"error-bar-".concat(u,"-").concat(Q.props.dataKey),data:p,xAxis:x,yAxis:s,layout:w,offset:N,dataPointFormatter:U})}))}},{key:"render",value:function(){var o=this.props,u=o.hide,f=o.data,p=o.className,x=o.xAxis,s=o.yAxis,w=o.left,I=o.top,P=o.width,N=o.height,U=o.isAnimationActive,X=o.background,Q=o.id;if(u||!f||!f.length)return null;var J=this.state.isAnimationFinished,Z=Yn("recharts-bar",p),H=x&&x.allowDataOverflow,K=s&&s.allowDataOverflow,ee=H||K,se=En(Q)?this.id:Q;return Ue.createElement(hi,{className:Z},H||K?Ue.createElement("defs",null,Ue.createElement("clipPath",{id:"clipPath-".concat(se)},Ue.createElement("rect",{x:H?w:w-P/2,y:K?I:I-N/2,width:H?P:P*2,height:K?N:N*2}))):null,Ue.createElement(hi,{className:"recharts-bar-rectangles",clipPath:ee?"url(#clipPath-".concat(se,")"):null},X?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(ee,se),(!U||J)&&Bc.renderCallByParent(this.props,f))}}],[{key:"getDerivedStateFromProps",value:function(o,u){return o.animationId!==u.prevAnimationId?{prevAnimationId:o.animationId,curData:o.data,prevData:u.curData}:o.data!==u.curData?{curData:o.data}:null}}]),e}(Te.PureComponent);dW=L_;zf(L_,"displayName","Bar");zf(L_,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Du.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});zf(L_,"getComposedData",function(t){var e=t.props,r=t.item,o=t.barPosition,u=t.bandSize,f=t.xAxis,p=t.yAxis,x=t.xAxisTicks,s=t.yAxisTicks,w=t.stackedData,I=t.dataStartIndex,P=t.displayedData,N=t.offset,U=pxe(o,r);if(!U)return null;var X=e.layout,Q=r.props,J=Q.dataKey,Z=Q.children,H=Q.minPointSize,K=X==="horizontal"?p:f,ee=w?K.scale.domain():null,se=bxe({numericAxis:K}),me=Es(Z,W3),Ce=P.map(function(Ae,De){var qe,je,Oe,ct,ht,We;w?qe=mxe(w[I+De],ee):(qe=qo(Ae,J),Array.isArray(qe)||(qe=[se,qe]));var Je=mTe(H,dW.defaultProps.minPointSize)(qe[1],De);if(X==="horizontal"){var St,Le=[p.scale(qe[0]),p.scale(qe[1])],Nt=Le[0],xt=Le[1];je=gj({axis:f,ticks:x,bandSize:u,offset:U.offset,entry:Ae,index:De}),Oe=(St=xt??Nt)!==null&&St!==void 0?St:void 0,ct=U.size;var $t=Nt-xt;if(ht=Number.isNaN($t)?0:$t,We={x:je,y:p.y,width:ct,height:p.height},Math.abs(Je)>0&&Math.abs(ht)<Math.abs(Je)){var Wt=Su(ht||Je)*(Math.abs(Je)-Math.abs(ht));Oe-=Wt,ht+=Wt}}else{var Tr=[f.scale(qe[0]),f.scale(qe[1])],Hr=Tr[0],Wr=Tr[1];if(je=Hr,Oe=gj({axis:p,ticks:s,bandSize:u,offset:U.offset,entry:Ae,index:De}),ct=Wr-Hr,ht=U.size,We={x:f.x,y:Oe,width:f.width,height:ht},Math.abs(Je)>0&&Math.abs(ct)<Math.abs(Je)){var zr=Su(ct||Je)*(Math.abs(Je)-Math.abs(ct));ct+=zr}}return ia(ia(ia({},Ae),{},{x:je,y:Oe,width:ct,height:ht,value:w?qe:qe[1],payload:Ae,background:We},me&&me[De]&&me[De].props),{},{tooltipPayload:[WH(r,Ae)],tooltipPosition:{x:je+ct/2,y:Oe+ht/2}})});return ia({data:Ce,layout:X},N)});function rB(t){"@babel/helpers - typeof";return rB=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rB(t)}function STe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v8(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,gW(o.key),o)}}function TTe(t,e,r){return e&&v8(t.prototype,e),r&&v8(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function B8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),r.push.apply(r,o)}return r}function xu(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?B8(Object(r),!0).forEach(function(o){BS(t,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):B8(Object(r)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(r,o))})}return t}function BS(t,e,r){return e=gW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gW(t){var e=ATe(t,"string");return rB(e)=="symbol"?e:String(e)}function ATe(t,e){if(rB(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var o=r.call(t,e||"default");if(rB(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ETe=function(e,r,o,u,f){var p=e.width,x=e.height,s=e.layout,w=e.children,I=Object.keys(r),P={left:o.left,leftMirror:o.left,right:p-o.right,rightMirror:p-o.right,top:o.top,topMirror:o.top,bottom:x-o.bottom,bottomMirror:x-o.bottom},N=!!Ys(w,L_);return I.reduce(function(U,X){var Q=r[X],J=Q.orientation,Z=Q.domain,H=Q.padding,K=H===void 0?{}:H,ee=Q.mirror,se=Q.reversed,me="".concat(J).concat(ee?"Mirror":""),Ce,Ae,De,qe,je;if(Q.type==="number"&&(Q.padding==="gap"||Q.padding==="no-gap")){var Oe=Z[1]-Z[0],ct=1/0,ht=Q.categoricalDomain.sort();if(ht.forEach(function(Hr,Wr){Wr>0&&(ct=Math.min((Hr||0)-(ht[Wr-1]||0),ct))}),Number.isFinite(ct)){var We=ct/Oe,Je=Q.layout==="vertical"?o.height:o.width;if(Q.padding==="gap"&&(Ce=We*Je/2),Q.padding==="no-gap"){var St=Np(e.barCategoryGap,We*Je),Le=We*Je/2;Ce=Le-St-(Le-St)/Je*St}}}u==="xAxis"?Ae=[o.left+(K.left||0)+(Ce||0),o.left+o.width-(K.right||0)-(Ce||0)]:u==="yAxis"?Ae=s==="horizontal"?[o.top+o.height-(K.bottom||0),o.top+(K.top||0)]:[o.top+(K.top||0)+(Ce||0),o.top+o.height-(K.bottom||0)-(Ce||0)]:Ae=Q.range,se&&(Ae=[Ae[1],Ae[0]]);var Nt=fxe(Q,f,N),xt=Nt.scale,$t=Nt.realScaleType;xt.domain(Z).range(Ae),dxe(xt);var Wt=xxe(xt,xu(xu({},Q),{},{realScaleType:$t}));u==="xAxis"?(je=J==="top"&&!ee||J==="bottom"&&ee,De=o.left,qe=P[me]-je*Q.height):u==="yAxis"&&(je=J==="left"&&!ee||J==="right"&&ee,De=P[me]-je*Q.width,qe=o.top);var Tr=xu(xu(xu({},Q),Wt),{},{realScaleType:$t,x:De,y:qe,scale:xt,width:u==="xAxis"?o.width:Q.width,height:u==="yAxis"?o.height:Q.height});return Tr.bandSize=WC(Tr,Wt),!Q.hide&&u==="xAxis"?P[me]+=(je?-1:1)*Tr.height:Q.hide||(P[me]+=(je?-1:1)*Tr.width),xu(xu({},U),{},BS({},X,Tr))},{})},_W=function(e,r){var o=e.x,u=e.y,f=r.x,p=r.y;return{x:Math.min(o,f),y:Math.min(u,p),width:Math.abs(f-o),height:Math.abs(p-u)}},DTe=function(e){var r=e.x1,o=e.y1,u=e.x2,f=e.y2;return _W({x:r,y:o},{x:u,y:f})},yW=function(){function t(e){STe(this,t),this.scale=e}return TTe(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=o.bandAware,f=o.position;if(r!==void 0){if(f)switch(f){case"start":return this.scale(r);case"middle":{var p=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+p}case"end":{var x=this.bandwidth?this.bandwidth():0;return this.scale(r)+x}default:return this.scale(r)}if(u){var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+s}return this.scale(r)}}},{key:"isInRange",value:function(r){var o=this.range(),u=o[0],f=o[o.length-1];return u<=f?r>=u&&r<=f:r>=f&&r<=u}}],[{key:"create",value:function(r){return new t(r)}}]),t}();BS(yW,"EPS",1e-4);var vk=function(e){var r=Object.keys(e).reduce(function(o,u){return xu(xu({},o),{},BS({},u,yW.create(e[u])))},{});return xu(xu({},r),{},{apply:function(u){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},p=f.bandAware,x=f.position;return KSe(u,function(s,w){return r[w].apply(s,{bandAware:p,position:x})})},isInRange:function(u){return fW(u,function(f,p){return r[p].isInRange(f)})}})};function PTe(t){return(t%180+180)%180}var MTe=function(e){var r=e.width,o=e.height,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,f=PTe(u),p=f*Math.PI/180,x=Math.atan(o/r),s=p>x&&p<Math.PI-x?o/Math.sin(p):r/Math.cos(p);return Math.abs(s)},ITe=od,OTe=EB,kTe=oS;function LTe(t){return function(e,r,o){var u=Object(e);if(!OTe(e)){var f=ITe(r);e=kTe(e),r=function(x){return f(u[x],x,u)}}var p=t(e,r,o);return p>-1?u[f?e[p]:p]:void 0}}var RTe=LTe,zTe=lW;function NTe(t){var e=zTe(t),r=e%1;return e===e?r?e-r:e:0}var FTe=NTe,jTe=E9,$Te=od,UTe=FTe,VTe=Math.max;function GTe(t,e,r){var o=t==null?0:t.length;if(!o)return-1;var u=r==null?0:UTe(r);return u<0&&(u=VTe(o+u,0)),jTe(t,$Te(e),u)}var HTe=GTe,WTe=RTe,ZTe=HTe,qTe=WTe(ZTe),KTe=qTe;const XTe=wi(KTe);var YTe=sse(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),Bk=Te.createContext(void 0),xk=Te.createContext(void 0),vW=Te.createContext(void 0),BW=Te.createContext({}),xW=Te.createContext(void 0),bW=Te.createContext(0),CW=Te.createContext(0),x8=function(e){var r=e.state,o=r.xAxisMap,u=r.yAxisMap,f=r.offset,p=e.clipPathId,x=e.children,s=e.width,w=e.height,I=YTe(f);return Ue.createElement(Bk.Provider,{value:o},Ue.createElement(xk.Provider,{value:u},Ue.createElement(BW.Provider,{value:f},Ue.createElement(vW.Provider,{value:I},Ue.createElement(xW.Provider,{value:p},Ue.createElement(bW.Provider,{value:w},Ue.createElement(CW.Provider,{value:s},x)))))))},JTe=function(){return Te.useContext(xW)},wW=function(e){var r=Te.useContext(Bk);r==null&&$p(!1);var o=r[e];return o==null&&$p(!1),o},QTe=function(){var e=Te.useContext(Bk);return Pf(e)},eAe=function(){var e=Te.useContext(xk),r=XTe(e,function(o){return fW(o.domain,Number.isFinite)});return r||Pf(e)},SW=function(e){var r=Te.useContext(xk);r==null&&$p(!1);var o=r[e];return o==null&&$p(!1),o},tAe=function(){var e=Te.useContext(vW);return e},rAe=function(){return Te.useContext(BW)},bk=function(){return Te.useContext(CW)},Ck=function(){return Te.useContext(bW)};function nB(t){"@babel/helpers - typeof";return nB=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nB(t)}function b8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),r.push.apply(r,o)}return r}function C8(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?b8(Object(r),!0).forEach(function(o){nAe(t,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):b8(Object(r)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(r,o))})}return t}function nAe(t,e,r){return e=iAe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function iAe(t){var e=oAe(t,"string");return nB(e)=="symbol"?e:String(e)}function oAe(t,e){if(nB(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var o=r.call(t,e||"default");if(nB(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function aAe(t,e){return cAe(t)||uAe(t,e)||lAe(t,e)||sAe()}function sAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lAe(t,e){if(t){if(typeof t=="string")return w8(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w8(t,e)}}function w8(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,o=new Array(e);r<e;r++)o[r]=t[r];return o}function uAe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var o,u,f,p,x=[],s=!0,w=!1;try{if(f=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;s=!1}else for(;!(s=(o=f.call(r)).done)&&(x.push(o.value),x.length!==e);s=!0);}catch(I){w=!0,u=I}finally{try{if(!s&&r.return!=null&&(p=r.return(),Object(p)!==p))return}finally{if(w)throw u}}return x}}function cAe(t){if(Array.isArray(t))return t}function PI(){return PI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},PI.apply(this,arguments)}var hAe=function(e,r){var o;return Ue.isValidElement(e)?o=Ue.cloneElement(e,r):Ln(e)?o=e(r):o=Ue.createElement("line",PI({},r,{className:"recharts-reference-line-line"})),o},fAe=function(e,r,o,u,f,p,x,s,w){var I=f.x,P=f.y,N=f.width,U=f.height;if(o){var X=w.y,Q=e.y.apply(X,{position:p});if(xc(w,"discard")&&!e.y.isInRange(Q))return null;var J=[{x:I+N,y:Q},{x:I,y:Q}];return s==="left"?J.reverse():J}if(r){var Z=w.x,H=e.x.apply(Z,{position:p});if(xc(w,"discard")&&!e.x.isInRange(H))return null;var K=[{x:H,y:P+U},{x:H,y:P}];return x==="top"?K.reverse():K}if(u){var ee=w.segment,se=ee.map(function(me){return e.apply(me,{position:p})});return xc(w,"discard")&&$Se(se,function(me){return!e.isInRange(me)})?null:se}return null};function wk(t){var e=t.x,r=t.y,o=t.segment,u=t.xAxisId,f=t.yAxisId,p=t.shape,x=t.className,s=t.alwaysShow,w=JTe(),I=wW(u),P=SW(f),N=tAe();if(!w||!N)return null;ph(s===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var U=vk({x:I.scale,y:P.scale}),X=Zo(e),Q=Zo(r),J=o&&o.length===2,Z=fAe(U,X,Q,J,N,t.position,I.orientation,P.orientation,t);if(!Z)return null;var H=aAe(Z,2),K=H[0],ee=K.x,se=K.y,me=H[1],Ce=me.x,Ae=me.y,De=xc(t,"hidden")?"url(#".concat(w,")"):void 0,qe=C8(C8({clipPath:De},An(t,!0)),{},{x1:ee,y1:se,x2:Ce,y2:Ae});return Ue.createElement(hi,{className:Yn("recharts-reference-line",x)},hAe(p,qe),Ua.renderCallByParent(t,DTe({x1:ee,y1:se,x2:Ce,y2:Ae})))}wk.displayName="ReferenceLine";wk.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"};function iB(t){"@babel/helpers - typeof";return iB=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iB(t)}function MI(){return MI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},MI.apply(this,arguments)}function S8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),r.push.apply(r,o)}return r}function T8(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?S8(Object(r),!0).forEach(function(o){dAe(t,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):S8(Object(r)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(r,o))})}return t}function dAe(t,e,r){return e=pAe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pAe(t){var e=mAe(t,"string");return iB(e)=="symbol"?e:String(e)}function mAe(t,e){if(iB(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var o=r.call(t,e||"default");if(iB(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var gAe=function(e){var r=e.x,o=e.y,u=e.xAxis,f=e.yAxis,p=vk({x:u.scale,y:f.scale}),x=p.apply({x:r,y:o},{bandAware:!0});return xc(e,"discard")&&!p.isInRange(x)?null:x};function OB(t){var e=t.x,r=t.y,o=t.r,u=t.alwaysShow,f=t.clipPathId,p=Zo(e),x=Zo(r);if(ph(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!p||!x)return null;var s=gAe(t);if(!s)return null;var w=s.x,I=s.y,P=t.shape,N=t.className,U=xc(t,"hidden")?"url(#".concat(f,")"):void 0,X=T8(T8({clipPath:U},An(t,!0)),{},{cx:w,cy:I});return Ue.createElement(hi,{className:Yn("recharts-reference-dot",N)},OB.renderDot(P,X),Ua.renderCallByParent(t,{x:w-o,y:I-o,width:2*o,height:2*o}))}OB.displayName="ReferenceDot";OB.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1};OB.renderDot=function(t,e){var r;return Ue.isValidElement(t)?r=Ue.cloneElement(t,e):Ln(t)?r=t(e):r=Ue.createElement(_S,MI({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),r};function oB(t){"@babel/helpers - typeof";return oB=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oB(t)}function II(){return II=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},II.apply(this,arguments)}function A8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),r.push.apply(r,o)}return r}function E8(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?A8(Object(r),!0).forEach(function(o){_Ae(t,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):A8(Object(r)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(r,o))})}return t}function _Ae(t,e,r){return e=yAe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yAe(t){var e=vAe(t,"string");return oB(e)=="symbol"?e:String(e)}function vAe(t,e){if(oB(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var o=r.call(t,e||"default");if(oB(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var BAe=function(e,r,o,u,f){var p=f.x1,x=f.x2,s=f.y1,w=f.y2,I=f.xAxis,P=f.yAxis;if(!I||!P)return null;var N=vk({x:I.scale,y:P.scale}),U={x:e?N.x.apply(p,{position:"start"}):N.x.rangeMin,y:o?N.y.apply(s,{position:"start"}):N.y.rangeMin},X={x:r?N.x.apply(x,{position:"end"}):N.x.rangeMax,y:u?N.y.apply(w,{position:"end"}):N.y.rangeMax};return xc(f,"discard")&&(!N.isInRange(U)||!N.isInRange(X))?null:_W(U,X)};function kB(t){var e=t.x1,r=t.x2,o=t.y1,u=t.y2,f=t.className,p=t.alwaysShow,x=t.clipPathId;ph(p===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var s=Zo(e),w=Zo(r),I=Zo(o),P=Zo(u),N=t.shape;if(!s&&!w&&!I&&!P&&!N)return null;var U=BAe(s,w,I,P,t);if(!U&&!N)return null;var X=xc(t,"hidden")?"url(#".concat(x,")"):void 0;return Ue.createElement(hi,{className:Yn("recharts-reference-area",f)},kB.renderRect(N,E8(E8({clipPath:X},An(t,!0)),U)),Ua.renderCallByParent(t,U))}kB.displayName="ReferenceArea";kB.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1};kB.renderRect=function(t,e){var r;return Ue.isValidElement(t)?r=Ue.cloneElement(t,e):Ln(t)?r=t(e):r=Ue.createElement(yk,II({},e,{className:"recharts-reference-area-rect"})),r};function TW(t,e,r){if(e<1)return[];if(e===1&&r===void 0)return t;for(var o=[],u=0;u<t.length;u+=e)if(r===void 0||r(t[u])===!0)o.push(t[u]);else return;return o}function xAe(t,e,r){var o={width:t.width+e.width,height:t.height+e.height};return MTe(o,r)}function bAe(t,e,r){var o=r==="width",u=t.x,f=t.y,p=t.width,x=t.height;return e===1?{start:o?u:f,end:o?u+p:f+x}:{start:o?u+p:f+x,end:o?u:f}}function aw(t,e,r,o,u){if(t*e<t*o||t*e>t*u)return!1;var f=r();return t*(e-t*f/2-o)>=0&&t*(e+t*f/2-u)<=0}function CAe(t,e){return TW(t,e+1)}function wAe(t,e,r,o,u){for(var f=(o||[]).slice(),p=e.start,x=e.end,s=0,w=1,I=p,P=function(){var X=o==null?void 0:o[s];if(X===void 0)return{v:TW(o,w)};var Q=s,J,Z=function(){return J===void 0&&(J=r(X,Q)),J},H=X.coordinate,K=s===0||aw(t,H,Z,I,x);K||(s=0,I=p,w+=1),K&&(I=H+t*(Z()/2+u),s+=w)},N;w<=f.length;)if(N=P(),N)return N.v;return[]}function aB(t){"@babel/helpers - typeof";return aB=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},aB(t)}function D8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),r.push.apply(r,o)}return r}function ja(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?D8(Object(r),!0).forEach(function(o){SAe(t,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):D8(Object(r)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(r,o))})}return t}function SAe(t,e,r){return e=TAe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function TAe(t){var e=AAe(t,"string");return aB(e)=="symbol"?e:String(e)}function AAe(t,e){if(aB(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var o=r.call(t,e||"default");if(aB(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function EAe(t,e,r,o,u){for(var f=(o||[]).slice(),p=f.length,x=e.start,s=e.end,w=function(N){var U=f[N],X,Q=function(){return X===void 0&&(X=r(U,N)),X};if(N===p-1){var J=t*(U.coordinate+t*Q()/2-s);f[N]=U=ja(ja({},U),{},{tickCoord:J>0?U.coordinate-J*t:U.coordinate})}else f[N]=U=ja(ja({},U),{},{tickCoord:U.coordinate});var Z=aw(t,U.tickCoord,Q,x,s);Z&&(s=U.tickCoord-t*(Q()/2+u),f[N]=ja(ja({},U),{},{isShow:!0}))},I=p-1;I>=0;I--)w(I);return f}function DAe(t,e,r,o,u,f){var p=(o||[]).slice(),x=p.length,s=e.start,w=e.end;if(f){var I=o[x-1],P=r(I,x-1),N=t*(I.coordinate+t*P/2-w);p[x-1]=I=ja(ja({},I),{},{tickCoord:N>0?I.coordinate-N*t:I.coordinate});var U=aw(t,I.tickCoord,function(){return P},s,w);U&&(w=I.tickCoord-t*(P/2+u),p[x-1]=ja(ja({},I),{},{isShow:!0}))}for(var X=f?x-1:x,Q=function(H){var K=p[H],ee,se=function(){return ee===void 0&&(ee=r(K,H)),ee};if(H===0){var me=t*(K.coordinate-t*se()/2-s);p[H]=K=ja(ja({},K),{},{tickCoord:me<0?K.coordinate-me*t:K.coordinate})}else p[H]=K=ja(ja({},K),{},{tickCoord:K.coordinate});var Ce=aw(t,K.tickCoord,se,s,w);Ce&&(s=K.tickCoord+t*(se()/2+u),p[H]=ja(ja({},K),{},{isShow:!0}))},J=0;J<X;J++)Q(J);return p}function Sk(t,e,r){var o=t.tick,u=t.ticks,f=t.viewBox,p=t.minTickGap,x=t.orientation,s=t.interval,w=t.tickFormatter,I=t.unit,P=t.angle;if(!u||!u.length||!o)return[];if(lr(s)||Du.isSsr)return CAe(u,typeof s=="number"&&lr(s)?s:0);var N=[],U=x==="top"||x==="bottom"?"width":"height",X=I&&U==="width"?q0(I,{fontSize:e,letterSpacing:r}):{width:0,height:0},Q=function(K,ee){var se=Ln(w)?w(K.value,ee):K.value;return U==="width"?xAe(q0(se,{fontSize:e,letterSpacing:r}),X,P):q0(se,{fontSize:e,letterSpacing:r})[U]},J=u.length>=2?Su(u[1].coordinate-u[0].coordinate):1,Z=bAe(f,J,U);return s==="equidistantPreserveStart"?wAe(J,Z,Q,u,p):(s==="preserveStart"||s==="preserveStartEnd"?N=DAe(J,Z,Q,u,p,s==="preserveStartEnd"):N=EAe(J,Z,Q,u,p),N.filter(function(H){return H.isShow}))}var PAe=["viewBox"],MAe=["viewBox"],IAe=["ticks"];function a_(t){"@babel/helpers - typeof";return a_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a_(t)}function Sg(){return Sg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},Sg.apply(this,arguments)}function P8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),r.push.apply(r,o)}return r}function ts(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?P8(Object(r),!0).forEach(function(o){Tk(t,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):P8(Object(r)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(r,o))})}return t}function IE(t,e){if(t==null)return{};var r=OAe(t,e),o,u;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(t);for(u=0;u<f.length;u++)o=f[u],!(e.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(t,o)&&(r[o]=t[o])}return r}function OAe(t,e){if(t==null)return{};var r={},o=Object.keys(t),u,f;for(f=0;f<o.length;f++)u=o[f],!(e.indexOf(u)>=0)&&(r[u]=t[u]);return r}function kAe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function M8(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,EW(o.key),o)}}function LAe(t,e,r){return e&&M8(t.prototype,e),r&&M8(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function RAe(t,e,r){return e=sw(e),zAe(t,AW()?Reflect.construct(e,r||[],sw(t).constructor):e.apply(t,r))}function zAe(t,e){if(e&&(a_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return NAe(t)}function NAe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function AW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(AW=function(){return!!t})()}function sw(t){return sw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},sw(t)}function FAe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&OI(t,e)}function OI(t,e){return OI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,u){return o.__proto__=u,o},OI(t,e)}function Tk(t,e,r){return e=EW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function EW(t){var e=jAe(t,"string");return a_(e)=="symbol"?e:String(e)}function jAe(t,e){if(a_(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var o=r.call(t,e||"default");if(a_(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var R_=function(t){FAe(e,t);function e(r){var o;return kAe(this,e),o=RAe(this,e,[r]),o.state={fontSize:"",letterSpacing:""},o}return LAe(e,[{key:"shouldComponentUpdate",value:function(o,u){var f=o.viewBox,p=IE(o,PAe),x=this.props,s=x.viewBox,w=IE(x,MAe);return!Og(f,s)||!Og(p,w)||!Og(u,this.state)}},{key:"componentDidMount",value:function(){var o=this.layerReference;if(o){var u=o.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];u&&this.setState({fontSize:window.getComputedStyle(u).fontSize,letterSpacing:window.getComputedStyle(u).letterSpacing})}}},{key:"getTickLineCoord",value:function(o){var u=this.props,f=u.x,p=u.y,x=u.width,s=u.height,w=u.orientation,I=u.tickSize,P=u.mirror,N=u.tickMargin,U,X,Q,J,Z,H,K=P?-1:1,ee=o.tickSize||I,se=lr(o.tickCoord)?o.tickCoord:o.coordinate;switch(w){case"top":U=X=o.coordinate,J=p+ +!P*s,Q=J-K*ee,H=Q-K*N,Z=se;break;case"left":Q=J=o.coordinate,X=f+ +!P*x,U=X-K*ee,Z=U-K*N,H=se;break;case"right":Q=J=o.coordinate,X=f+ +P*x,U=X+K*ee,Z=U+K*N,H=se;break;default:U=X=o.coordinate,J=p+ +P*s,Q=J+K*ee,H=Q+K*N,Z=se;break}return{line:{x1:U,y1:Q,x2:X,y2:J},tick:{x:Z,y:H}}}},{key:"getTickTextAnchor",value:function(){var o=this.props,u=o.orientation,f=o.mirror,p;switch(u){case"left":p=f?"start":"end";break;case"right":p=f?"end":"start";break;default:p="middle";break}return p}},{key:"getTickVerticalAnchor",value:function(){var o=this.props,u=o.orientation,f=o.mirror,p="end";switch(u){case"left":case"right":p="middle";break;case"top":p=f?"start":"end";break;default:p=f?"end":"start";break}return p}},{key:"renderAxisLine",value:function(){var o=this.props,u=o.x,f=o.y,p=o.width,x=o.height,s=o.orientation,w=o.mirror,I=o.axisLine,P=ts(ts(ts({},An(this.props,!1)),An(I,!1)),{},{fill:"none"});if(s==="top"||s==="bottom"){var N=+(s==="top"&&!w||s==="bottom"&&w);P=ts(ts({},P),{},{x1:u,y1:f+N*x,x2:u+p,y2:f+N*x})}else{var U=+(s==="left"&&!w||s==="right"&&w);P=ts(ts({},P),{},{x1:u+U*p,y1:f,x2:u+U*p,y2:f+x})}return Ue.createElement("line",Sg({},P,{className:Yn("recharts-cartesian-axis-line",Fl(I,"className"))}))}},{key:"renderTicks",value:function(o,u,f){var p=this,x=this.props,s=x.tickLine,w=x.stroke,I=x.tick,P=x.tickFormatter,N=x.unit,U=Sk(ts(ts({},this.props),{},{ticks:o}),u,f),X=this.getTickTextAnchor(),Q=this.getTickVerticalAnchor(),J=An(this.props,!1),Z=An(I,!1),H=ts(ts({},J),{},{fill:"none"},An(s,!1)),K=U.map(function(ee,se){var me=p.getTickLineCoord(ee),Ce=me.line,Ae=me.tick,De=ts(ts(ts(ts({textAnchor:X,verticalAnchor:Q},J),{},{stroke:"none",fill:w},Z),Ae),{},{index:se,payload:ee,visibleTicksCount:U.length,tickFormatter:P});return Ue.createElement(hi,Sg({className:"recharts-cartesian-axis-tick",key:"tick-".concat(ee.value,"-").concat(ee.coordinate,"-").concat(ee.tickCoord)},wv(p.props,ee,se)),s&&Ue.createElement("line",Sg({},H,Ce,{className:Yn("recharts-cartesian-axis-tick-line",Fl(s,"className"))})),I&&e.renderTickItem(I,De,"".concat(Ln(P)?P(ee.value,se):ee.value).concat(N||"")))});return Ue.createElement("g",{className:"recharts-cartesian-axis-ticks"},K)}},{key:"render",value:function(){var o=this,u=this.props,f=u.axisLine,p=u.width,x=u.height,s=u.ticksGenerator,w=u.className,I=u.hide;if(I)return null;var P=this.props,N=P.ticks,U=IE(P,IAe),X=N;return Ln(s)&&(X=N&&N.length>0?s(this.props):s(U)),p<=0||x<=0||!X||!X.length?null:Ue.createElement(hi,{className:Yn("recharts-cartesian-axis",w),ref:function(J){o.layerReference=J}},f&&this.renderAxisLine(),this.renderTicks(X,this.state.fontSize,this.state.letterSpacing),Ua.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(o,u,f){var p;return Ue.isValidElement(o)?p=Ue.cloneElement(o,u):Ln(o)?p=o(u):p=Ue.createElement(OC,Sg({},u,{className:"recharts-cartesian-axis-tick-value"}),f),p}}]),e}(Te.Component);Tk(R_,"displayName","CartesianAxis");Tk(R_,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var $Ae=["x1","y1","x2","y2","key"],UAe=["offset"];function Up(t){"@babel/helpers - typeof";return Up=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Up(t)}function I8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),r.push.apply(r,o)}return r}function Va(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?I8(Object(r),!0).forEach(function(o){VAe(t,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):I8(Object(r)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(r,o))})}return t}function VAe(t,e,r){return e=GAe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function GAe(t){var e=HAe(t,"string");return Up(e)=="symbol"?e:String(e)}function HAe(t,e){if(Up(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var o=r.call(t,e||"default");if(Up(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Cp(){return Cp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},Cp.apply(this,arguments)}function O8(t,e){if(t==null)return{};var r=WAe(t,e),o,u;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(t);for(u=0;u<f.length;u++)o=f[u],!(e.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(t,o)&&(r[o]=t[o])}return r}function WAe(t,e){if(t==null)return{};var r={},o=Object.keys(t),u,f;for(f=0;f<o.length;f++)u=o[f],!(e.indexOf(u)>=0)&&(r[u]=t[u]);return r}var ZAe=function(e){var r=e.fill;if(!r||r==="none")return null;var o=e.fillOpacity,u=e.x,f=e.y,p=e.width,x=e.height;return Ue.createElement("rect",{x:u,y:f,width:p,height:x,stroke:"none",fill:r,fillOpacity:o,className:"recharts-cartesian-grid-bg"})};function DW(t,e){var r;if(Ue.isValidElement(t))r=Ue.cloneElement(t,e);else if(Ln(t))r=t(e);else{var o=e.x1,u=e.y1,f=e.x2,p=e.y2,x=e.key,s=O8(e,$Ae),w=An(s,!1);w.offset;var I=O8(w,UAe);r=Ue.createElement("line",Cp({},I,{x1:o,y1:u,x2:f,y2:p,fill:"none",key:x}))}return r}function qAe(t){var e=t.x,r=t.width,o=t.horizontal,u=o===void 0?!0:o,f=t.horizontalPoints;if(!u||!f||!f.length)return null;var p=f.map(function(x,s){var w=Va(Va({},t),{},{x1:e,y1:x,x2:e+r,y2:x,key:"line-".concat(s),index:s});return DW(u,w)});return Ue.createElement("g",{className:"recharts-cartesian-grid-horizontal"},p)}function KAe(t){var e=t.y,r=t.height,o=t.vertical,u=o===void 0?!0:o,f=t.verticalPoints;if(!u||!f||!f.length)return null;var p=f.map(function(x,s){var w=Va(Va({},t),{},{x1:x,y1:e,x2:x,y2:e+r,key:"line-".concat(s),index:s});return DW(u,w)});return Ue.createElement("g",{className:"recharts-cartesian-grid-vertical"},p)}function XAe(t){var e=t.horizontalFill,r=t.fillOpacity,o=t.x,u=t.y,f=t.width,p=t.height,x=t.horizontalPoints,s=t.horizontal,w=s===void 0?!0:s;if(!w||!e||!e.length)return null;var I=x.map(function(N){return Math.round(N+u-u)}).sort(function(N,U){return N-U});u!==I[0]&&I.unshift(0);var P=I.map(function(N,U){var X=!I[U+1],Q=X?u+p-N:I[U+1]-N;if(Q<=0)return null;var J=U%e.length;return Ue.createElement("rect",{key:"react-".concat(U),y:N,x:o,height:Q,width:f,stroke:"none",fill:e[J],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return Ue.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},P)}function YAe(t){var e=t.vertical,r=e===void 0?!0:e,o=t.verticalFill,u=t.fillOpacity,f=t.x,p=t.y,x=t.width,s=t.height,w=t.verticalPoints;if(!r||!o||!o.length)return null;var I=w.map(function(N){return Math.round(N+f-f)}).sort(function(N,U){return N-U});f!==I[0]&&I.unshift(0);var P=I.map(function(N,U){var X=!I[U+1],Q=X?f+x-N:I[U+1]-N;if(Q<=0)return null;var J=U%o.length;return Ue.createElement("rect",{key:"react-".concat(U),x:N,y:p,width:Q,height:s,stroke:"none",fill:o[J],fillOpacity:u,className:"recharts-cartesian-grid-bg"})});return Ue.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},P)}var JAe=function(e,r){var o=e.xAxis,u=e.width,f=e.height,p=e.offset;return GH(Sk(Va(Va(Va({},R_.defaultProps),o),{},{ticks:hh(o,!0),viewBox:{x:0,y:0,width:u,height:f}})),p.left,p.left+p.width,r)},QAe=function(e,r){var o=e.yAxis,u=e.width,f=e.height,p=e.offset;return GH(Sk(Va(Va(Va({},R_.defaultProps),o),{},{ticks:hh(o,!0),viewBox:{x:0,y:0,width:u,height:f}})),p.top,p.top+p.height,r)},rg={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function PW(t){var e,r,o,u,f,p,x=bk(),s=Ck(),w=rAe(),I=Va(Va({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:rg.stroke,fill:(r=t.fill)!==null&&r!==void 0?r:rg.fill,horizontal:(o=t.horizontal)!==null&&o!==void 0?o:rg.horizontal,horizontalFill:(u=t.horizontalFill)!==null&&u!==void 0?u:rg.horizontalFill,vertical:(f=t.vertical)!==null&&f!==void 0?f:rg.vertical,verticalFill:(p=t.verticalFill)!==null&&p!==void 0?p:rg.verticalFill,x:lr(t.x)?t.x:w.left,y:lr(t.y)?t.y:w.top,width:lr(t.width)?t.width:w.width,height:lr(t.height)?t.height:w.height}),P=I.x,N=I.y,U=I.width,X=I.height,Q=I.syncWithTicks,J=I.horizontalValues,Z=I.verticalValues,H=QTe(),K=eAe();if(!lr(U)||U<=0||!lr(X)||X<=0||!lr(P)||P!==+P||!lr(N)||N!==+N)return null;var ee=I.verticalCoordinatesGenerator||JAe,se=I.horizontalCoordinatesGenerator||QAe,me=I.horizontalPoints,Ce=I.verticalPoints;if((!me||!me.length)&&Ln(se)){var Ae=J&&J.length,De=se({yAxis:K?Va(Va({},K),{},{ticks:Ae?J:K.ticks}):void 0,width:x,height:s,offset:w},Ae?!0:Q);ph(Array.isArray(De),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Up(De),"]")),Array.isArray(De)&&(me=De)}if((!Ce||!Ce.length)&&Ln(ee)){var qe=Z&&Z.length,je=ee({xAxis:H?Va(Va({},H),{},{ticks:qe?Z:H.ticks}):void 0,width:x,height:s,offset:w},qe?!0:Q);ph(Array.isArray(je),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Up(je),"]")),Array.isArray(je)&&(Ce=je)}return Ue.createElement("g",{className:"recharts-cartesian-grid"},Ue.createElement(ZAe,{fill:I.fill,fillOpacity:I.fillOpacity,x:I.x,y:I.y,width:I.width,height:I.height}),Ue.createElement(qAe,Cp({},I,{offset:w,horizontalPoints:me,xAxis:H,yAxis:K})),Ue.createElement(KAe,Cp({},I,{offset:w,verticalPoints:Ce,xAxis:H,yAxis:K})),Ue.createElement(XAe,Cp({},I,{horizontalPoints:me})),Ue.createElement(YAe,Cp({},I,{verticalPoints:Ce})))}PW.displayName="CartesianGrid";var eEe=["type","layout","connectNulls","ref"];function s_(t){"@babel/helpers - typeof";return s_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s_(t)}function tEe(t,e){if(t==null)return{};var r=rEe(t,e),o,u;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(t);for(u=0;u<f.length;u++)o=f[u],!(e.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(t,o)&&(r[o]=t[o])}return r}function rEe(t,e){if(t==null)return{};var r={},o=Object.keys(t),u,f;for(f=0;f<o.length;f++)u=o[f],!(e.indexOf(u)>=0)&&(r[u]=t[u]);return r}function J0(){return J0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},J0.apply(this,arguments)}function k8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),r.push.apply(r,o)}return r}function qs(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?k8(Object(r),!0).forEach(function(o){bu(t,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):k8(Object(r)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(r,o))})}return t}function ng(t){return aEe(t)||oEe(t)||iEe(t)||nEe()}function nEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iEe(t,e){if(t){if(typeof t=="string")return kI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kI(t,e)}}function oEe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function aEe(t){if(Array.isArray(t))return kI(t)}function kI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,o=new Array(e);r<e;r++)o[r]=t[r];return o}function sEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function L8(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,IW(o.key),o)}}function lEe(t,e,r){return e&&L8(t.prototype,e),r&&L8(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function uEe(t,e,r){return e=lw(e),cEe(t,MW()?Reflect.construct(e,r||[],lw(t).constructor):e.apply(t,r))}function cEe(t,e){if(e&&(s_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xf(t)}function MW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(MW=function(){return!!t})()}function lw(t){return lw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},lw(t)}function xf(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hEe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&LI(t,e)}function LI(t,e){return LI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,u){return o.__proto__=u,o},LI(t,e)}function bu(t,e,r){return e=IW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function IW(t){var e=fEe(t,"string");return s_(e)=="symbol"?e:String(e)}function fEe(t,e){if(s_(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var o=r.call(t,e||"default");if(s_(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var LB=function(t){hEe(e,t);function e(){var r;sEe(this,e);for(var o=arguments.length,u=new Array(o),f=0;f<o;f++)u[f]=arguments[f];return r=uEe(this,e,[].concat(u)),bu(xf(r),"state",{isAnimationFinished:!0,totalLength:0}),bu(xf(r),"generateSimpleStrokeDasharray",function(p,x){return"".concat(x,"px ").concat(p-x,"px")}),bu(xf(r),"getStrokeDasharray",function(p,x,s){var w=s.reduce(function(Z,H){return Z+H});if(!w)return r.generateSimpleStrokeDasharray(x,p);for(var I=Math.floor(p/w),P=p%w,N=x-p,U=[],X=0,Q=0;X<s.length;Q+=s[X],++X)if(Q+s[X]>P){U=[].concat(ng(s.slice(0,X)),[P-Q]);break}var J=U.length%2===0?[0,N]:[N];return[].concat(ng(e.repeat(s,I)),ng(U),J).map(function(Z){return"".concat(Z,"px")}).join(", ")}),bu(xf(r),"id",Xp("recharts-line-")),bu(xf(r),"pathRef",function(p){r.mainCurve=p}),bu(xf(r),"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),bu(xf(r),"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return lEe(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var o=this.getTotalLength();this.setState({totalLength:o})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var o=this.getTotalLength();o!==this.state.totalLength&&this.setState({totalLength:o})}}},{key:"getTotalLength",value:function(){var o=this.mainCurve;try{return o&&o.getTotalLength&&o.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(o,u){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var f=this.props,p=f.points,x=f.xAxis,s=f.yAxis,w=f.layout,I=f.children,P=Es(I,O_);if(!P)return null;var N=function(Q,J){return{x:Q.x,y:Q.y,value:Q.value,errorVal:qo(Q.payload,J)}},U={clipPath:o?"url(#clipPath-".concat(u,")"):null};return Ue.createElement(hi,U,P.map(function(X){return Ue.cloneElement(X,{key:"bar-".concat(X.props.dataKey),data:p,xAxis:x,yAxis:s,layout:w,dataPointFormatter:N})}))}},{key:"renderDots",value:function(o,u,f){var p=this.props.isAnimationActive;if(p&&!this.state.isAnimationFinished)return null;var x=this.props,s=x.dot,w=x.points,I=x.dataKey,P=An(this.props,!1),N=An(s,!0),U=w.map(function(Q,J){var Z=qs(qs(qs({key:"dot-".concat(J),r:3},P),N),{},{value:Q.value,dataKey:I,cx:Q.x,cy:Q.y,index:J,payload:Q.payload});return e.renderDotItem(s,Z)}),X={clipPath:o?"url(#clipPath-".concat(u?"":"dots-").concat(f,")"):null};return Ue.createElement(hi,J0({className:"recharts-line-dots",key:"dots"},X),U)}},{key:"renderCurveStatically",value:function(o,u,f,p){var x=this.props,s=x.type,w=x.layout,I=x.connectNulls;x.ref;var P=tEe(x,eEe),N=qs(qs(qs({},An(P,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:u?"url(#clipPath-".concat(f,")"):null,points:o},p),{},{type:s,layout:w,connectNulls:I});return Ue.createElement(Pp,J0({},N,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(o,u){var f=this,p=this.props,x=p.points,s=p.strokeDasharray,w=p.isAnimationActive,I=p.animationBegin,P=p.animationDuration,N=p.animationEasing,U=p.animationId,X=p.animateNewValues,Q=p.width,J=p.height,Z=this.state,H=Z.prevPoints,K=Z.totalLength;return Ue.createElement(Mu,{begin:I,duration:P,isActive:w,easing:N,from:{t:0},to:{t:1},key:"line-".concat(U),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(ee){var se=ee.t;if(H){var me=H.length/x.length,Ce=x.map(function(Oe,ct){var ht=Math.floor(ct*me);if(H[ht]){var We=H[ht],Je=Ao(We.x,Oe.x),St=Ao(We.y,Oe.y);return qs(qs({},Oe),{},{x:Je(se),y:St(se)})}if(X){var Le=Ao(Q*2,Oe.x),Nt=Ao(J/2,Oe.y);return qs(qs({},Oe),{},{x:Le(se),y:Nt(se)})}return qs(qs({},Oe),{},{x:Oe.x,y:Oe.y})});return f.renderCurveStatically(Ce,o,u)}var Ae=Ao(0,K),De=Ae(se),qe;if(s){var je="".concat(s).split(/[,\s]+/gim).map(function(Oe){return parseFloat(Oe)});qe=f.getStrokeDasharray(De,K,je)}else qe=f.generateSimpleStrokeDasharray(K,De);return f.renderCurveStatically(x,o,u,{strokeDasharray:qe})})}},{key:"renderCurve",value:function(o,u){var f=this.props,p=f.points,x=f.isAnimationActive,s=this.state,w=s.prevPoints,I=s.totalLength;return x&&p&&p.length&&(!w&&I>0||!Fp(w,p))?this.renderCurveWithAnimation(o,u):this.renderCurveStatically(p,o,u)}},{key:"render",value:function(){var o,u=this.props,f=u.hide,p=u.dot,x=u.points,s=u.className,w=u.xAxis,I=u.yAxis,P=u.top,N=u.left,U=u.width,X=u.height,Q=u.isAnimationActive,J=u.id;if(f||!x||!x.length)return null;var Z=this.state.isAnimationFinished,H=x.length===1,K=Yn("recharts-line",s),ee=w&&w.allowDataOverflow,se=I&&I.allowDataOverflow,me=ee||se,Ce=En(J)?this.id:J,Ae=(o=An(p,!1))!==null&&o!==void 0?o:{r:3,strokeWidth:2},De=Ae.r,qe=De===void 0?3:De,je=Ae.strokeWidth,Oe=je===void 0?2:je,ct=FG(p)?p:{},ht=ct.clipDot,We=ht===void 0?!0:ht,Je=qe*2+Oe;return Ue.createElement(hi,{className:K},ee||se?Ue.createElement("defs",null,Ue.createElement("clipPath",{id:"clipPath-".concat(Ce)},Ue.createElement("rect",{x:ee?N:N-U/2,y:se?P:P-X/2,width:ee?U:U*2,height:se?X:X*2})),!We&&Ue.createElement("clipPath",{id:"clipPath-dots-".concat(Ce)},Ue.createElement("rect",{x:N-Je/2,y:P-Je/2,width:U+Je,height:X+Je}))):null,!H&&this.renderCurve(me,Ce),this.renderErrorBar(me,Ce),(H||p)&&this.renderDots(me,We,Ce),(!Q||Z)&&Bc.renderCallByParent(this.props,x))}}],[{key:"getDerivedStateFromProps",value:function(o,u){return o.animationId!==u.prevAnimationId?{prevAnimationId:o.animationId,curPoints:o.points,prevPoints:u.curPoints}:o.points!==u.curPoints?{curPoints:o.points}:null}},{key:"repeat",value:function(o,u){for(var f=o.length%2!==0?[].concat(ng(o),[0]):o,p=[],x=0;x<u;++x)p=[].concat(ng(p),ng(f));return p}},{key:"renderDotItem",value:function(o,u){var f;if(Ue.isValidElement(o))f=Ue.cloneElement(o,u);else if(Ln(o))f=o(u);else{var p=Yn("recharts-line-dot",typeof o!="boolean"?o.className:"");f=Ue.createElement(_S,J0({},u,{className:p}))}return f}}]),e}(Te.PureComponent);bu(LB,"displayName","Line");bu(LB,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Du.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});bu(LB,"getComposedData",function(t){var e=t.props,r=t.xAxis,o=t.yAxis,u=t.xAxisTicks,f=t.yAxisTicks,p=t.dataKey,x=t.bandSize,s=t.displayedData,w=t.offset,I=e.layout,P=s.map(function(N,U){var X=qo(N,p);return I==="horizontal"?{x:t_({axis:r,ticks:u,bandSize:x,entry:N,index:U}),y:En(X)?null:o.scale(X),value:X,payload:N}:{x:En(X)?null:r.scale(X),y:t_({axis:o,ticks:f,bandSize:x,entry:N,index:U}),value:X,payload:N}});return qs({points:P,layout:I},w)});var dEe=["layout","type","stroke","connectNulls","isRange","ref"],OW;function l_(t){"@babel/helpers - typeof";return l_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l_(t)}function pEe(t,e){if(t==null)return{};var r=mEe(t,e),o,u;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(t);for(u=0;u<f.length;u++)o=f[u],!(e.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(t,o)&&(r[o]=t[o])}return r}function mEe(t,e){if(t==null)return{};var r={},o=Object.keys(t),u,f;for(f=0;f<o.length;f++)u=o[f],!(e.indexOf(u)>=0)&&(r[u]=t[u]);return r}function wp(){return wp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},wp.apply(this,arguments)}function R8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),r.push.apply(r,o)}return r}function bf(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?R8(Object(r),!0).forEach(function(o){gc(t,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):R8(Object(r)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(r,o))})}return t}function gEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function z8(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,LW(o.key),o)}}function _Ee(t,e,r){return e&&z8(t.prototype,e),r&&z8(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function yEe(t,e,r){return e=uw(e),vEe(t,kW()?Reflect.construct(e,r||[],uw(t).constructor):e.apply(t,r))}function vEe(t,e){if(e&&(l_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return k0(t)}function kW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kW=function(){return!!t})()}function uw(t){return uw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},uw(t)}function k0(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function BEe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&RI(t,e)}function RI(t,e){return RI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,u){return o.__proto__=u,o},RI(t,e)}function gc(t,e,r){return e=LW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function LW(t){var e=xEe(t,"string");return l_(e)=="symbol"?e:String(e)}function xEe(t,e){if(l_(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var o=r.call(t,e||"default");if(l_(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ud=function(t){BEe(e,t);function e(){var r;gEe(this,e);for(var o=arguments.length,u=new Array(o),f=0;f<o;f++)u[f]=arguments[f];return r=yEe(this,e,[].concat(u)),gc(k0(r),"state",{isAnimationFinished:!0}),gc(k0(r),"id",Xp("recharts-area-")),gc(k0(r),"handleAnimationEnd",function(){var p=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Ln(p)&&p()}),gc(k0(r),"handleAnimationStart",function(){var p=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Ln(p)&&p()}),r}return _Ee(e,[{key:"renderDots",value:function(o,u,f){var p=this.props.isAnimationActive,x=this.state.isAnimationFinished;if(p&&!x)return null;var s=this.props,w=s.dot,I=s.points,P=s.dataKey,N=An(this.props,!1),U=An(w,!0),X=I.map(function(J,Z){var H=bf(bf(bf({key:"dot-".concat(Z),r:3},N),U),{},{dataKey:P,cx:J.x,cy:J.y,index:Z,value:J.value,payload:J.payload});return e.renderDotItem(w,H)}),Q={clipPath:o?"url(#clipPath-".concat(u?"":"dots-").concat(f,")"):null};return Ue.createElement(hi,wp({className:"recharts-area-dots"},Q),X)}},{key:"renderHorizontalRect",value:function(o){var u=this.props,f=u.baseLine,p=u.points,x=u.strokeWidth,s=p[0].x,w=p[p.length-1].x,I=o*Math.abs(s-w),P=Rf(p.map(function(N){return N.y||0}));return lr(f)&&typeof f=="number"?P=Math.max(f,P):f&&Array.isArray(f)&&f.length&&(P=Math.max(Rf(f.map(function(N){return N.y||0})),P)),lr(P)?Ue.createElement("rect",{x:s<w?s:s-I,y:0,width:I,height:Math.floor(P+(x?parseInt("".concat(x),10):1))}):null}},{key:"renderVerticalRect",value:function(o){var u=this.props,f=u.baseLine,p=u.points,x=u.strokeWidth,s=p[0].y,w=p[p.length-1].y,I=o*Math.abs(s-w),P=Rf(p.map(function(N){return N.x||0}));return lr(f)&&typeof f=="number"?P=Math.max(f,P):f&&Array.isArray(f)&&f.length&&(P=Math.max(Rf(f.map(function(N){return N.x||0})),P)),lr(P)?Ue.createElement("rect",{x:0,y:s<w?s:s-I,width:P+(x?parseInt("".concat(x),10):1),height:Math.floor(I)}):null}},{key:"renderClipRect",value:function(o){var u=this.props.layout;return u==="vertical"?this.renderVerticalRect(o):this.renderHorizontalRect(o)}},{key:"renderAreaStatically",value:function(o,u,f,p){var x=this.props,s=x.layout,w=x.type,I=x.stroke,P=x.connectNulls,N=x.isRange;x.ref;var U=pEe(x,dEe);return Ue.createElement(hi,{clipPath:f?"url(#clipPath-".concat(p,")"):null},Ue.createElement(Pp,wp({},An(U,!0),{points:o,connectNulls:P,type:w,baseLine:u,layout:s,stroke:"none",className:"recharts-area-area"})),I!=="none"&&Ue.createElement(Pp,wp({},An(this.props,!1),{className:"recharts-area-curve",layout:s,type:w,connectNulls:P,fill:"none",points:o})),I!=="none"&&N&&Ue.createElement(Pp,wp({},An(this.props,!1),{className:"recharts-area-curve",layout:s,type:w,connectNulls:P,fill:"none",points:u})))}},{key:"renderAreaWithAnimation",value:function(o,u){var f=this,p=this.props,x=p.points,s=p.baseLine,w=p.isAnimationActive,I=p.animationBegin,P=p.animationDuration,N=p.animationEasing,U=p.animationId,X=this.state,Q=X.prevPoints,J=X.prevBaseLine;return Ue.createElement(Mu,{begin:I,duration:P,isActive:w,easing:N,from:{t:0},to:{t:1},key:"area-".concat(U),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(Z){var H=Z.t;if(Q){var K=Q.length/x.length,ee=x.map(function(Ae,De){var qe=Math.floor(De*K);if(Q[qe]){var je=Q[qe],Oe=Ao(je.x,Ae.x),ct=Ao(je.y,Ae.y);return bf(bf({},Ae),{},{x:Oe(H),y:ct(H)})}return Ae}),se;if(lr(s)&&typeof s=="number"){var me=Ao(J,s);se=me(H)}else if(En(s)||T_(s)){var Ce=Ao(J,0);se=Ce(H)}else se=s.map(function(Ae,De){var qe=Math.floor(De*K);if(J[qe]){var je=J[qe],Oe=Ao(je.x,Ae.x),ct=Ao(je.y,Ae.y);return bf(bf({},Ae),{},{x:Oe(H),y:ct(H)})}return Ae});return f.renderAreaStatically(ee,se,o,u)}return Ue.createElement(hi,null,Ue.createElement("defs",null,Ue.createElement("clipPath",{id:"animationClipPath-".concat(u)},f.renderClipRect(H))),Ue.createElement(hi,{clipPath:"url(#animationClipPath-".concat(u,")")},f.renderAreaStatically(x,s,o,u)))})}},{key:"renderArea",value:function(o,u){var f=this.props,p=f.points,x=f.baseLine,s=f.isAnimationActive,w=this.state,I=w.prevPoints,P=w.prevBaseLine,N=w.totalLength;return s&&p&&p.length&&(!I&&N>0||!Fp(I,p)||!Fp(P,x))?this.renderAreaWithAnimation(o,u):this.renderAreaStatically(p,x,o,u)}},{key:"render",value:function(){var o,u=this.props,f=u.hide,p=u.dot,x=u.points,s=u.className,w=u.top,I=u.left,P=u.xAxis,N=u.yAxis,U=u.width,X=u.height,Q=u.isAnimationActive,J=u.id;if(f||!x||!x.length)return null;var Z=this.state.isAnimationFinished,H=x.length===1,K=Yn("recharts-area",s),ee=P&&P.allowDataOverflow,se=N&&N.allowDataOverflow,me=ee||se,Ce=En(J)?this.id:J,Ae=(o=An(p,!1))!==null&&o!==void 0?o:{r:3,strokeWidth:2},De=Ae.r,qe=De===void 0?3:De,je=Ae.strokeWidth,Oe=je===void 0?2:je,ct=FG(p)?p:{},ht=ct.clipDot,We=ht===void 0?!0:ht,Je=qe*2+Oe;return Ue.createElement(hi,{className:K},ee||se?Ue.createElement("defs",null,Ue.createElement("clipPath",{id:"clipPath-".concat(Ce)},Ue.createElement("rect",{x:ee?I:I-U/2,y:se?w:w-X/2,width:ee?U:U*2,height:se?X:X*2})),!We&&Ue.createElement("clipPath",{id:"clipPath-dots-".concat(Ce)},Ue.createElement("rect",{x:I-Je/2,y:w-Je/2,width:U+Je,height:X+Je}))):null,H?null:this.renderArea(me,Ce),(p||H)&&this.renderDots(me,We,Ce),(!Q||Z)&&Bc.renderCallByParent(this.props,x))}}],[{key:"getDerivedStateFromProps",value:function(o,u){return o.animationId!==u.prevAnimationId?{prevAnimationId:o.animationId,curPoints:o.points,curBaseLine:o.baseLine,prevPoints:u.curPoints,prevBaseLine:u.curBaseLine}:o.points!==u.curPoints||o.baseLine!==u.curBaseLine?{curPoints:o.points,curBaseLine:o.baseLine}:null}}]),e}(Te.PureComponent);OW=ud;gc(ud,"displayName","Area");gc(ud,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Du.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});gc(ud,"getBaseValue",function(t,e,r,o){var u=t.layout,f=t.baseValue,p=e.props.baseValue,x=p??f;if(lr(x)&&typeof x=="number")return x;var s=u==="horizontal"?o:r,w=s.scale.domain();if(s.type==="number"){var I=Math.max(w[0],w[1]),P=Math.min(w[0],w[1]);return x==="dataMin"?P:x==="dataMax"||I<0?I:Math.max(Math.min(w[0],w[1]),0)}return x==="dataMin"?w[0]:x==="dataMax"?w[1]:w[0]});gc(ud,"getComposedData",function(t){var e=t.props,r=t.item,o=t.xAxis,u=t.yAxis,f=t.xAxisTicks,p=t.yAxisTicks,x=t.bandSize,s=t.dataKey,w=t.stackedData,I=t.dataStartIndex,P=t.displayedData,N=t.offset,U=e.layout,X=w&&w.length,Q=OW.getBaseValue(e,r,o,u),J=U==="horizontal",Z=!1,H=P.map(function(ee,se){var me;X?me=w[I+se]:(me=qo(ee,s),Array.isArray(me)?Z=!0:me=[Q,me]);var Ce=me[1]==null||X&&qo(ee,s)==null;return J?{x:t_({axis:o,ticks:f,bandSize:x,entry:ee,index:se}),y:Ce?null:u.scale(me[1]),value:me,payload:ee}:{x:Ce?null:o.scale(me[1]),y:t_({axis:u,ticks:p,bandSize:x,entry:ee,index:se}),value:me,payload:ee}}),K;return X||Z?K=H.map(function(ee){var se=Array.isArray(ee.value)?ee.value[0]:null;return J?{x:ee.x,y:se!=null&&ee.y!=null?u.scale(se):null}:{x:se!=null?o.scale(se):null,y:ee.y}}):K=J?u.scale(Q):o.scale(Q),bf({points:H,baseLine:K,layout:U,isRange:Z},N)});gc(ud,"renderDotItem",function(t,e){var r;if(Ue.isValidElement(t))r=Ue.cloneElement(t,e);else if(Ln(t))r=t(e);else{var o=Yn("recharts-area-dot",typeof t!="boolean"?t.className:"");r=Ue.createElement(_S,wp({},e,{className:o}))}return r});var xS=function(){return null};xS.displayName="ZAxis";xS.defaultProps={zAxisId:0,range:[64,64],scale:"auto",type:"number"};var bEe=["option","isActive"];function Q0(){return Q0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},Q0.apply(this,arguments)}function CEe(t,e){if(t==null)return{};var r=wEe(t,e),o,u;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(t);for(u=0;u<f.length;u++)o=f[u],!(e.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(t,o)&&(r[o]=t[o])}return r}function wEe(t,e){if(t==null)return{};var r={},o=Object.keys(t),u,f;for(f=0;f<o.length;f++)u=o[f],!(e.indexOf(u)>=0)&&(r[u]=t[u]);return r}function SEe(t){var e=t.option,r=t.isActive,o=CEe(t,bEe);return typeof e=="string"?Ue.createElement(TI,Q0({option:Ue.createElement(iS,Q0({type:e},o)),isActive:r,shapeType:"symbols"},o)):Ue.createElement(TI,Q0({option:e,isActive:r,shapeType:"symbols"},o))}function u_(t){"@babel/helpers - typeof";return u_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u_(t)}function ev(){return ev=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},ev.apply(this,arguments)}function N8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),r.push.apply(r,o)}return r}function Il(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?N8(Object(r),!0).forEach(function(o){Nf(t,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):N8(Object(r)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(r,o))})}return t}function TEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function F8(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,zW(o.key),o)}}function AEe(t,e,r){return e&&F8(t.prototype,e),r&&F8(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function EEe(t,e,r){return e=cw(e),DEe(t,RW()?Reflect.construct(e,r||[],cw(t).constructor):e.apply(t,r))}function DEe(t,e){if(e&&(u_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return L0(t)}function RW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RW=function(){return!!t})()}function cw(t){return cw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},cw(t)}function L0(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function PEe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zI(t,e)}function zI(t,e){return zI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,u){return o.__proto__=u,o},zI(t,e)}function Nf(t,e,r){return e=zW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zW(t){var e=MEe(t,"string");return u_(e)=="symbol"?e:String(e)}function MEe(t,e){if(u_(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var o=r.call(t,e||"default");if(u_(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bS=function(t){PEe(e,t);function e(){var r;TEe(this,e);for(var o=arguments.length,u=new Array(o),f=0;f<o;f++)u[f]=arguments[f];return r=EEe(this,e,[].concat(u)),Nf(L0(r),"state",{isAnimationFinished:!1}),Nf(L0(r),"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0})}),Nf(L0(r),"handleAnimationStart",function(){r.setState({isAnimationFinished:!1})}),Nf(L0(r),"id",Xp("recharts-scatter-")),r}return AEe(e,[{key:"renderSymbolsStatically",value:function(o){var u=this,f=this.props,p=f.shape,x=f.activeShape,s=f.activeIndex,w=An(this.props,!1);return o.map(function(I,P){var N=s===P,U=N?x:p,X=Il(Il({key:"symbol-".concat(P)},w),I);return Ue.createElement(hi,ev({className:"recharts-scatter-symbol"},wv(u.props,I,P),{key:"symbol-".concat(I==null?void 0:I.cx,"-").concat(I==null?void 0:I.cy,"-").concat(I==null?void 0:I.size,"-").concat(P),role:"img"}),Ue.createElement(SEe,ev({option:U,isActive:N},X)))})}},{key:"renderSymbolsWithAnimation",value:function(){var o=this,u=this.props,f=u.points,p=u.isAnimationActive,x=u.animationBegin,s=u.animationDuration,w=u.animationEasing,I=u.animationId,P=this.state.prevPoints;return Ue.createElement(Mu,{begin:x,duration:s,isActive:p,easing:w,from:{t:0},to:{t:1},key:"pie-".concat(I),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(N){var U=N.t,X=f.map(function(Q,J){var Z=P&&P[J];if(Z){var H=Ao(Z.cx,Q.cx),K=Ao(Z.cy,Q.cy),ee=Ao(Z.size,Q.size);return Il(Il({},Q),{},{cx:H(U),cy:K(U),size:ee(U)})}var se=Ao(0,Q.size);return Il(Il({},Q),{},{size:se(U)})});return Ue.createElement(hi,null,o.renderSymbolsStatically(X))})}},{key:"renderSymbols",value:function(){var o=this.props,u=o.points,f=o.isAnimationActive,p=this.state.prevPoints;return f&&u&&u.length&&(!p||!Fp(p,u))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(u)}},{key:"renderErrorBar",value:function(){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var u=this.props,f=u.points,p=u.xAxis,x=u.yAxis,s=u.children,w=Es(s,O_);return w?w.map(function(I,P){var N=I.props,U=N.direction,X=N.dataKey;return Ue.cloneElement(I,{key:"".concat(U,"-").concat(X,"-").concat(f[P]),data:f,xAxis:p,yAxis:x,layout:U==="x"?"vertical":"horizontal",dataPointFormatter:function(J,Z){return{x:J.cx,y:J.cy,value:U==="x"?+J.node.x:+J.node.y,errorVal:qo(J,Z)}}})}):null}},{key:"renderLine",value:function(){var o=this.props,u=o.points,f=o.line,p=o.lineType,x=o.lineJointType,s=An(this.props,!1),w=An(f,!1),I,P;if(p==="joint")I=u.map(function(K){return{x:K.cx,y:K.cy}});else if(p==="fitting"){var N=sle(u),U=N.xmin,X=N.xmax,Q=N.a,J=N.b,Z=function(ee){return Q*ee+J};I=[{x:U,y:Z(U)},{x:X,y:Z(X)}]}var H=Il(Il(Il({},s),{},{fill:"none",stroke:s&&s.fill},w),{},{points:I});return Ue.isValidElement(f)?P=Ue.cloneElement(f,H):Ln(f)?P=f(H):P=Ue.createElement(Pp,ev({},H,{type:x})),Ue.createElement(hi,{className:"recharts-scatter-line",key:"recharts-scatter-line"},P)}},{key:"render",value:function(){var o=this.props,u=o.hide,f=o.points,p=o.line,x=o.className,s=o.xAxis,w=o.yAxis,I=o.left,P=o.top,N=o.width,U=o.height,X=o.id,Q=o.isAnimationActive;if(u||!f||!f.length)return null;var J=this.state.isAnimationFinished,Z=Yn("recharts-scatter",x),H=s&&s.allowDataOverflow,K=w&&w.allowDataOverflow,ee=H||K,se=En(X)?this.id:X;return Ue.createElement(hi,{className:Z,clipPath:ee?"url(#clipPath-".concat(se,")"):null},H||K?Ue.createElement("defs",null,Ue.createElement("clipPath",{id:"clipPath-".concat(se)},Ue.createElement("rect",{x:H?I:I-N/2,y:K?P:P-U/2,width:H?N:N*2,height:K?U:U*2}))):null,p&&this.renderLine(),this.renderErrorBar(),Ue.createElement(hi,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!Q||J)&&Bc.renderCallByParent(this.props,f))}}],[{key:"getDerivedStateFromProps",value:function(o,u){return o.animationId!==u.prevAnimationId?{prevAnimationId:o.animationId,curPoints:o.points,prevPoints:u.curPoints}:o.points!==u.curPoints?{curPoints:o.points}:null}}]),e}(Te.PureComponent);Nf(bS,"displayName","Scatter");Nf(bS,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!Du.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});Nf(bS,"getComposedData",function(t){var e=t.xAxis,r=t.yAxis,o=t.zAxis,u=t.item,f=t.displayedData,p=t.xAxisTicks,x=t.yAxisTicks,s=t.offset,w=u.props.tooltipType,I=Es(u.props.children,W3),P=En(e.dataKey)?u.props.dataKey:e.dataKey,N=En(r.dataKey)?u.props.dataKey:r.dataKey,U=o&&o.dataKey,X=o?o.range:xS.defaultProps.range,Q=X&&X[0],J=e.scale.bandwidth?e.scale.bandwidth():0,Z=r.scale.bandwidth?r.scale.bandwidth():0,H=f.map(function(K,ee){var se=qo(K,P),me=qo(K,N),Ce=!En(U)&&qo(K,U)||"-",Ae=[{name:En(e.dataKey)?u.props.name:e.name||e.dataKey,unit:e.unit||"",value:se,payload:K,dataKey:P,type:w},{name:En(r.dataKey)?u.props.name:r.name||r.dataKey,unit:r.unit||"",value:me,payload:K,dataKey:N,type:w}];Ce!=="-"&&Ae.push({name:o.name||o.dataKey,unit:o.unit||"",value:Ce,payload:K,dataKey:U,type:w});var De=t_({axis:e,ticks:p,bandSize:J,entry:K,index:ee,dataKey:P}),qe=t_({axis:r,ticks:x,bandSize:Z,entry:K,index:ee,dataKey:N}),je=Ce!=="-"?o.scale(Ce):Q,Oe=Math.sqrt(Math.max(je,0)/Math.PI);return Il(Il({},K),{},{cx:De,cy:qe,x:De-Oe,y:qe-Oe,xAxis:e,yAxis:r,zAxis:o,width:2*Oe,height:2*Oe,size:je,node:{x:se,y:me,z:Ce},tooltipPayload:Ae,tooltipPosition:{x:De,y:qe},payload:K},I&&I[ee]&&I[ee].props)});return Il({points:H},s)});function NI(){return NI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},NI.apply(this,arguments)}var CS=function(e){var r=e.xAxisId,o=bk(),u=Ck(),f=wW(r);return f==null?null:Ue.createElement(R_,NI({},f,{className:Yn("recharts-".concat(f.axisType," ").concat(f.axisType),f.className),viewBox:{x:0,y:0,width:o,height:u},ticksGenerator:function(x){return hh(x,!0)}}))};CS.displayName="XAxis";CS.defaultProps={allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0};function FI(){return FI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},FI.apply(this,arguments)}var wS=function(e){var r=e.yAxisId,o=bk(),u=Ck(),f=SW(r);return f==null?null:Ue.createElement(R_,FI({},f,{className:Yn("recharts-".concat(f.axisType," ").concat(f.axisType),f.className),viewBox:{x:0,y:0,width:o,height:u},ticksGenerator:function(x){return hh(x,!0)}}))};wS.displayName="YAxis";wS.defaultProps={allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1};function j8(t){return LEe(t)||kEe(t)||OEe(t)||IEe()}function IEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OEe(t,e){if(t){if(typeof t=="string")return jI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jI(t,e)}}function kEe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function LEe(t){if(Array.isArray(t))return jI(t)}function jI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,o=new Array(e);r<e;r++)o[r]=t[r];return o}var $I=function(e,r,o,u,f){var p=Es(e,wk),x=Es(e,OB),s=[].concat(j8(p),j8(x)),w=Es(e,kB),I="".concat(u,"Id"),P=u[0],N=r;if(s.length&&(N=s.reduce(function(Q,J){if(J.props[I]===o&&xc(J.props,"extendDomain")&&lr(J.props[P])){var Z=J.props[P];return[Math.min(Q[0],Z),Math.max(Q[1],Z)]}return Q},N)),w.length){var U="".concat(P,"1"),X="".concat(P,"2");N=w.reduce(function(Q,J){if(J.props[I]===o&&xc(J.props,"extendDomain")&&lr(J.props[U])&&lr(J.props[X])){var Z=J.props[U],H=J.props[X];return[Math.min(Q[0],Z,H),Math.max(Q[1],Z,H)]}return Q},N)}return f&&f.length&&(N=f.reduce(function(Q,J){return lr(J)?[Math.min(Q[0],J),Math.max(Q[1],J)]:Q},N)),N},NW={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function o(){}Object.create&&(o.prototype=Object.create(null),new o().__proto__||(r=!1));function u(s,w,I){this.fn=s,this.context=w,this.once=I||!1}function f(s,w,I,P,N){if(typeof I!="function")throw new TypeError("The listener must be a function");var U=new u(I,P||s,N),X=r?r+w:w;return s._events[X]?s._events[X].fn?s._events[X]=[s._events[X],U]:s._events[X].push(U):(s._events[X]=U,s._eventsCount++),s}function p(s,w){--s._eventsCount===0?s._events=new o:delete s._events[w]}function x(){this._events=new o,this._eventsCount=0}x.prototype.eventNames=function(){var w=[],I,P;if(this._eventsCount===0)return w;for(P in I=this._events)e.call(I,P)&&w.push(r?P.slice(1):P);return Object.getOwnPropertySymbols?w.concat(Object.getOwnPropertySymbols(I)):w},x.prototype.listeners=function(w){var I=r?r+w:w,P=this._events[I];if(!P)return[];if(P.fn)return[P.fn];for(var N=0,U=P.length,X=new Array(U);N<U;N++)X[N]=P[N].fn;return X},x.prototype.listenerCount=function(w){var I=r?r+w:w,P=this._events[I];return P?P.fn?1:P.length:0},x.prototype.emit=function(w,I,P,N,U,X){var Q=r?r+w:w;if(!this._events[Q])return!1;var J=this._events[Q],Z=arguments.length,H,K;if(J.fn){switch(J.once&&this.removeListener(w,J.fn,void 0,!0),Z){case 1:return J.fn.call(J.context),!0;case 2:return J.fn.call(J.context,I),!0;case 3:return J.fn.call(J.context,I,P),!0;case 4:return J.fn.call(J.context,I,P,N),!0;case 5:return J.fn.call(J.context,I,P,N,U),!0;case 6:return J.fn.call(J.context,I,P,N,U,X),!0}for(K=1,H=new Array(Z-1);K<Z;K++)H[K-1]=arguments[K];J.fn.apply(J.context,H)}else{var ee=J.length,se;for(K=0;K<ee;K++)switch(J[K].once&&this.removeListener(w,J[K].fn,void 0,!0),Z){case 1:J[K].fn.call(J[K].context);break;case 2:J[K].fn.call(J[K].context,I);break;case 3:J[K].fn.call(J[K].context,I,P);break;case 4:J[K].fn.call(J[K].context,I,P,N);break;default:if(!H)for(se=1,H=new Array(Z-1);se<Z;se++)H[se-1]=arguments[se];J[K].fn.apply(J[K].context,H)}}return!0},x.prototype.on=function(w,I,P){return f(this,w,I,P,!1)},x.prototype.once=function(w,I,P){return f(this,w,I,P,!0)},x.prototype.removeListener=function(w,I,P,N){var U=r?r+w:w;if(!this._events[U])return this;if(!I)return p(this,U),this;var X=this._events[U];if(X.fn)X.fn===I&&(!N||X.once)&&(!P||X.context===P)&&p(this,U);else{for(var Q=0,J=[],Z=X.length;Q<Z;Q++)(X[Q].fn!==I||N&&!X[Q].once||P&&X[Q].context!==P)&&J.push(X[Q]);J.length?this._events[U]=J.length===1?J[0]:J:p(this,U)}return this},x.prototype.removeAllListeners=function(w){var I;return w?(I=r?r+w:w,this._events[I]&&p(this,I)):(this._events=new o,this._eventsCount=0),this},x.prototype.off=x.prototype.removeListener,x.prototype.addListener=x.prototype.on,x.prefixed=r,x.EventEmitter=x,t.exports=x})(NW);var REe=NW.exports;const zEe=wi(REe);var OE=new zEe,kE="recharts.syncMouseEvents";function sB(t){"@babel/helpers - typeof";return sB=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sB(t)}function NEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $8(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,FW(o.key),o)}}function FEe(t,e,r){return e&&$8(t.prototype,e),r&&$8(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function LE(t,e,r){return e=FW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function FW(t){var e=jEe(t,"string");return sB(e)=="symbol"?e:String(e)}function jEe(t,e){if(sB(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var o=r.call(t,e||"default");if(sB(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $Ee=function(){function t(){NEe(this,t),LE(this,"activeIndex",0),LE(this,"coordinateList",[]),LE(this,"layout","horizontal")}return FEe(t,[{key:"setDetails",value:function(r){var o,u=r.coordinateList,f=u===void 0?null:u,p=r.container,x=p===void 0?null:p,s=r.layout,w=s===void 0?null:s,I=r.offset,P=I===void 0?null:I,N=r.mouseHandlerCallback,U=N===void 0?null:N;this.coordinateList=(o=f??this.coordinateList)!==null&&o!==void 0?o:[],this.container=x??this.container,this.layout=w??this.layout,this.offset=P??this.offset,this.mouseHandlerCallback=U??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,o;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var u=this.container.getBoundingClientRect(),f=u.x,p=u.y,x=u.height,s=this.coordinateList[this.activeIndex].coordinate,w=((r=window)===null||r===void 0?void 0:r.scrollX)||0,I=((o=window)===null||o===void 0?void 0:o.scrollY)||0,P=f+s+w,N=p+this.offset.top+x/2+I;this.mouseHandlerCallback({pageX:P,pageY:N})}}}]),t}();function UEe(t,e,r){if(r==="number"&&e===!0&&Array.isArray(t)){var o=t==null?void 0:t[0],u=t==null?void 0:t[1];if(o&&u&&lr(o)&&lr(u))return!0}return!1}function VEe(t,e,r,o){var u=o/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-u:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-u,width:t==="horizontal"?o:r.width-1,height:t==="horizontal"?r.height-1:o}}function jW(t){var e=t.cx,r=t.cy,o=t.radius,u=t.startAngle,f=t.endAngle,p=ba(e,r,o,u),x=ba(e,r,o,f);return{points:[p,x],cx:e,cy:r,radius:o,startAngle:u,endAngle:f}}function GEe(t,e,r){var o,u,f,p;if(t==="horizontal")o=e.x,f=o,u=r.top,p=r.top+r.height;else if(t==="vertical")u=e.y,p=u,o=r.left,f=r.left+r.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var x=e.cx,s=e.cy,w=e.innerRadius,I=e.outerRadius,P=e.angle,N=ba(x,s,w,P),U=ba(x,s,I,P);o=N.x,u=N.y,f=U.x,p=U.y}else return jW(e);return[{x:o,y:u},{x:f,y:p}]}function lB(t){"@babel/helpers - typeof";return lB=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lB(t)}function U8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),r.push.apply(r,o)}return r}function tb(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?U8(Object(r),!0).forEach(function(o){HEe(t,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):U8(Object(r)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(r,o))})}return t}function HEe(t,e,r){return e=WEe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function WEe(t){var e=ZEe(t,"string");return lB(e)=="symbol"?e:String(e)}function ZEe(t,e){if(lB(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var o=r.call(t,e||"default");if(lB(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qEe(t){var e=t.element,r=t.tooltipEventType,o=t.isActive,u=t.activeCoordinate,f=t.activePayload,p=t.offset,x=t.activeTooltipIndex,s=t.tooltipAxisBandSize,w=t.layout,I=t.chartName;if(!e||!e.props.cursor||!o||!u||I!=="ScatterChart"&&r!=="axis")return null;var P,N=Pp;if(I==="ScatterChart")P=u,N=dwe;else if(I==="BarChart")P=VEe(w,u,p,s),N=yk;else if(w==="radial"){var U=jW(u),X=U.cx,Q=U.cy,J=U.radius,Z=U.startAngle,H=U.endAngle;P={cx:X,cy:Q,startAngle:Z,endAngle:H,innerRadius:J,outerRadius:J},N=KH}else P={points:GEe(w,u,p)},N=Pp;var K=tb(tb(tb(tb({stroke:"#ccc",pointerEvents:"none"},p),P),An(e.props.cursor,!1)),{},{payload:f,payloadIndex:x,className:Yn("recharts-tooltip-cursor",e.props.cursor.className)});return Te.isValidElement(e.props.cursor)?Te.cloneElement(e.props.cursor,K):Te.createElement(N,K)}var KEe=["item"],XEe=["children","className","width","height","style","compact","title","desc"];function c_(t){"@babel/helpers - typeof";return c_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c_(t)}function tv(){return tv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},tv.apply(this,arguments)}function V8(t,e){return QEe(t)||JEe(t,e)||UW(t,e)||YEe()}function YEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function JEe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var o,u,f,p,x=[],s=!0,w=!1;try{if(f=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;s=!1}else for(;!(s=(o=f.call(r)).done)&&(x.push(o.value),x.length!==e);s=!0);}catch(I){w=!0,u=I}finally{try{if(!s&&r.return!=null&&(p=r.return(),Object(p)!==p))return}finally{if(w)throw u}}return x}}function QEe(t){if(Array.isArray(t))return t}function G8(t,e){if(t==null)return{};var r=eDe(t,e),o,u;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(t);for(u=0;u<f.length;u++)o=f[u],!(e.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(t,o)&&(r[o]=t[o])}return r}function eDe(t,e){if(t==null)return{};var r={},o=Object.keys(t),u,f;for(f=0;f<o.length;f++)u=o[f],!(e.indexOf(u)>=0)&&(r[u]=t[u]);return r}function tDe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function H8(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,VW(o.key),o)}}function rDe(t,e,r){return e&&H8(t.prototype,e),r&&H8(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function nDe(t,e,r){return e=hw(e),iDe(t,$W()?Reflect.construct(e,r||[],hw(t).constructor):e.apply(t,r))}function iDe(t,e){if(e&&(c_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ri(t)}function $W(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($W=function(){return!!t})()}function hw(t){return hw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},hw(t)}function ri(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function oDe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&UI(t,e)}function UI(t,e){return UI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,u){return o.__proto__=u,o},UI(t,e)}function h_(t){return lDe(t)||sDe(t)||UW(t)||aDe()}function aDe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UW(t,e){if(t){if(typeof t=="string")return VI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return VI(t,e)}}function sDe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function lDe(t){if(Array.isArray(t))return VI(t)}function VI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,o=new Array(e);r<e;r++)o[r]=t[r];return o}function W8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),r.push.apply(r,o)}return r}function jt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?W8(Object(r),!0).forEach(function(o){dn(t,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):W8(Object(r)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(r,o))})}return t}function dn(t,e,r){return e=VW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function VW(t){var e=uDe(t,"string");return c_(e)=="symbol"?e:String(e)}function uDe(t,e){if(c_(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var o=r.call(t,e||"default");if(c_(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var cDe={xAxis:["bottom","top"],yAxis:["left","right"]},hDe={width:"100%",height:"100%"},GW={x:0,y:0};function rb(t){return t}var fDe=function(e,r){return r==="horizontal"?e.x:r==="vertical"?e.y:r==="centric"?e.angle:e.radius},dDe=function(e,r,o,u){var f=r.find(function(I){return I&&I.index===o});if(f){if(e==="horizontal")return{x:f.coordinate,y:u.y};if(e==="vertical")return{x:u.x,y:f.coordinate};if(e==="centric"){var p=f.coordinate,x=u.radius;return jt(jt(jt({},u),ba(u.cx,u.cy,x,p)),{},{angle:p,radius:x})}var s=f.coordinate,w=u.angle;return jt(jt(jt({},u),ba(u.cx,u.cy,s,w)),{},{angle:w,radius:s})}return GW},SS=function(e,r){var o=r.graphicalItems,u=r.dataStartIndex,f=r.dataEndIndex,p=(o??[]).reduce(function(x,s){var w=s.props.data;return w&&w.length?[].concat(h_(x),h_(w)):x},[]);return p.length>0?p:e&&e.length&&lr(u)&&lr(f)?e.slice(u,f+1):[]};function HW(t){return t==="number"?[0,"auto"]:void 0}var GI=function(e,r,o,u){var f=e.graphicalItems,p=e.tooltipAxis,x=SS(r,e);return o<0||!f||!f.length||o>=x.length?null:f.reduce(function(s,w){var I,P=(I=w.props.data)!==null&&I!==void 0?I:r;P&&e.dataStartIndex+e.dataEndIndex!==0&&(P=P.slice(e.dataStartIndex,e.dataEndIndex+1));var N;if(p.dataKey&&!p.allowDuplicatedCategory){var U=P===void 0?x:P;N=yC(U,p.dataKey,u)}else N=P&&P[o]||x[o];return N?[].concat(h_(s),[WH(w,N)]):s},[])},Z8=function(e,r,o,u){var f=u||{x:e.chartX,y:e.chartY},p=fDe(f,o),x=e.orderedTooltipTicks,s=e.tooltipAxis,w=e.tooltipTicks,I=axe(p,x,w,s);if(I>=0&&w){var P=w[I]&&w[I].value,N=GI(e,r,I,P),U=dDe(o,x,I,f);return{activeTooltipIndex:I,activeLabel:P,activePayload:N,activeCoordinate:U}}return null},pDe=function(e,r){var o=r.axes,u=r.graphicalItems,f=r.axisType,p=r.axisIdKey,x=r.stackGroups,s=r.dataStartIndex,w=r.dataEndIndex,I=e.layout,P=e.children,N=e.stackOffset,U=VH(I,f);return o.reduce(function(X,Q){var J,Z=Q.props,H=Z.type,K=Z.dataKey,ee=Z.allowDataOverflow,se=Z.allowDuplicatedCategory,me=Z.scale,Ce=Z.ticks,Ae=Z.includeHidden,De=Q.props[p];if(X[De])return X;var qe=SS(e.data,{graphicalItems:u.filter(function(Wt){return Wt.props[p]===De}),dataStartIndex:s,dataEndIndex:w}),je=qe.length,Oe,ct,ht;UEe(Q.props.domain,ee,H)&&(Oe=cI(Q.props.domain,null,ee),U&&(H==="number"||me!=="auto")&&(ht=X0(qe,K,"category")));var We=HW(H);if(!Oe||Oe.length===0){var Je,St=(Je=Q.props.domain)!==null&&Je!==void 0?Je:We;if(K){if(Oe=X0(qe,K,H),H==="category"&&U){var Le=ale(Oe);se&&Le?(ct=Oe,Oe=tw(0,je)):se||(Oe=vj(St,Oe,Q).reduce(function(Wt,Tr){return Wt.indexOf(Tr)>=0?Wt:[].concat(h_(Wt),[Tr])},[]))}else if(H==="category")se?Oe=Oe.filter(function(Wt){return Wt!==""&&!En(Wt)}):Oe=vj(St,Oe,Q).reduce(function(Wt,Tr){return Wt.indexOf(Tr)>=0||Tr===""||En(Tr)?Wt:[].concat(h_(Wt),[Tr])},[]);else if(H==="number"){var Nt=hxe(qe,u.filter(function(Wt){return Wt.props[p]===De&&(Ae||!Wt.props.hide)}),K,f,I);Nt&&(Oe=Nt)}U&&(H==="number"||me!=="auto")&&(ht=X0(qe,K,"category"))}else U?Oe=tw(0,je):x&&x[De]&&x[De].hasStack&&H==="number"?Oe=N==="expand"?[0,1]:HH(x[De].stackGroups,s,w):Oe=UH(qe,u.filter(function(Wt){return Wt.props[p]===De&&(Ae||!Wt.props.hide)}),H,I,!0);if(H==="number")Oe=$I(P,Oe,De,f,Ce),St&&(Oe=cI(St,Oe,ee));else if(H==="category"&&St){var xt=St,$t=Oe.every(function(Wt){return xt.indexOf(Wt)>=0});$t&&(Oe=xt)}}return jt(jt({},X),{},dn({},De,jt(jt({},Q.props),{},{axisType:f,domain:Oe,categoricalDomain:ht,duplicateDomain:ct,originalDomain:(J=Q.props.domain)!==null&&J!==void 0?J:We,isCategorical:U,layout:I})))},{})},mDe=function(e,r){var o=r.graphicalItems,u=r.Axis,f=r.axisType,p=r.axisIdKey,x=r.stackGroups,s=r.dataStartIndex,w=r.dataEndIndex,I=e.layout,P=e.children,N=SS(e.data,{graphicalItems:o,dataStartIndex:s,dataEndIndex:w}),U=N.length,X=VH(I,f),Q=-1;return o.reduce(function(J,Z){var H=Z.props[p],K=HW("number");if(!J[H]){Q++;var ee;return X?ee=tw(0,U):x&&x[H]&&x[H].hasStack?(ee=HH(x[H].stackGroups,s,w),ee=$I(P,ee,H,f)):(ee=cI(K,UH(N,o.filter(function(se){return se.props[p]===H&&!se.props.hide}),"number",I),u.defaultProps.allowDataOverflow),ee=$I(P,ee,H,f)),jt(jt({},J),{},dn({},H,jt(jt({axisType:f},u.defaultProps),{},{hide:!0,orientation:Fl(cDe,"".concat(f,".").concat(Q%2),null),domain:ee,originalDomain:K,isCategorical:X,layout:I})))}return J},{})},gDe=function(e,r){var o=r.axisType,u=o===void 0?"xAxis":o,f=r.AxisComp,p=r.graphicalItems,x=r.stackGroups,s=r.dataStartIndex,w=r.dataEndIndex,I=e.children,P="".concat(u,"Id"),N=Es(I,f),U={};return N&&N.length?U=pDe(e,{axes:N,graphicalItems:p,axisType:u,axisIdKey:P,stackGroups:x,dataStartIndex:s,dataEndIndex:w}):p&&p.length&&(U=mDe(e,{Axis:f,graphicalItems:p,axisType:u,axisIdKey:P,stackGroups:x,dataStartIndex:s,dataEndIndex:w})),U},_De=function(e){var r=Pf(e),o=hh(r,!1,!0);return{tooltipTicks:o,orderedTooltipTicks:G3(o,function(u){return u.coordinate}),tooltipAxis:r,tooltipAxisBandSize:WC(r,o)}},q8=function(e){var r=e.children,o=e.defaultShowTooltip,u=Ys(r,i_),f=0,p=0;return e.data&&e.data.length!==0&&(p=e.data.length-1),u&&u.props&&(u.props.startIndex>=0&&(f=u.props.startIndex),u.props.endIndex>=0&&(p=u.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:f,dataEndIndex:p,activeTooltipIndex:-1,isTooltipActive:!!o}},yDe=function(e){return!e||!e.length?!1:e.some(function(r){var o=dh(r&&r.type);return o&&o.indexOf("Bar")>=0})},K8=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},vDe=function(e,r){var o=e.props,u=e.graphicalItems,f=e.xAxisMap,p=f===void 0?{}:f,x=e.yAxisMap,s=x===void 0?{}:x,w=o.width,I=o.height,P=o.children,N=o.margin||{},U=Ys(P,i_),X=Ys(P,Kg),Q=Object.keys(s).reduce(function(se,me){var Ce=s[me],Ae=Ce.orientation;return!Ce.mirror&&!Ce.hide?jt(jt({},se),{},dn({},Ae,se[Ae]+Ce.width)):se},{left:N.left||0,right:N.right||0}),J=Object.keys(p).reduce(function(se,me){var Ce=p[me],Ae=Ce.orientation;return!Ce.mirror&&!Ce.hide?jt(jt({},se),{},dn({},Ae,Fl(se,"".concat(Ae))+Ce.height)):se},{top:N.top||0,bottom:N.bottom||0}),Z=jt(jt({},J),Q),H=Z.bottom;U&&(Z.bottom+=U.props.height||i_.defaultProps.height),X&&r&&(Z=uxe(Z,u,o,r));var K=w-Z.left-Z.right,ee=I-Z.top-Z.bottom;return jt(jt({brushBottom:H},Z),{},{width:Math.max(K,0),height:Math.max(ee,0)})},BDe=function(e,r){if(r==="xAxis")return e[r].width;if(r==="yAxis")return e[r].height},xDe=function(e){var r,o=e.chartName,u=e.GraphicalChild,f=e.defaultTooltipEventType,p=f===void 0?"axis":f,x=e.validateTooltipEventTypes,s=x===void 0?["axis"]:x,w=e.axisComponents,I=e.legendContent,P=e.formatAxisMap,N=e.defaultProps,U=function(J,Z){var H=Z.graphicalItems,K=Z.stackGroups,ee=Z.offset,se=Z.updateId,me=Z.dataStartIndex,Ce=Z.dataEndIndex,Ae=J.barSize,De=J.layout,qe=J.barGap,je=J.barCategoryGap,Oe=J.maxBarSize,ct=K8(De),ht=ct.numericAxisName,We=ct.cateAxisName,Je=yDe(H),St=[];return H.forEach(function(Le,Nt){var xt=SS(J.data,{graphicalItems:[Le],dataStartIndex:me,dataEndIndex:Ce}),$t=Le.props,Wt=$t.dataKey,Tr=$t.maxBarSize,Hr=Le.props["".concat(ht,"Id")],Wr=Le.props["".concat(We,"Id")],zr={},jn=w.reduce(function(Wn,Eo){var Wa=Z["".concat(Eo.axisType,"Map")],Do=Le.props["".concat(Eo.axisType,"Id")];Wa&&Wa[Do]||Eo.axisType==="zAxis"||$p(!1);var Ta=Wa[Do];return jt(jt({},Wn),{},dn(dn({},Eo.axisType,Ta),"".concat(Eo.axisType,"Ticks"),hh(Ta)))},zr),Ti=jn[We],ur=jn["".concat(We,"Ticks")],br=K&&K[Hr]&&K[Hr].hasStack&&Cxe(Le,K[Hr].stackGroups),Ur=dh(Le.type).indexOf("Bar")>=0,kt=WC(Ti,ur),ii=[],Er=Je&&sxe({barSize:Ae,stackGroups:K,totalSize:BDe(jn,We)});if(Ur){var $n,ei,vi=En(Tr)?Oe:Tr,Mi=($n=(ei=WC(Ti,ur,!0))!==null&&ei!==void 0?ei:vi)!==null&&$n!==void 0?$n:0;ii=lxe({barGap:qe,barCategoryGap:je,bandSize:Mi!==kt?Mi:kt,sizeList:Er[Wr],maxBarSize:vi}),Mi!==kt&&(ii=ii.map(function(Wn){return jt(jt({},Wn),{},{position:jt(jt({},Wn.position),{},{offset:Wn.position.offset-Mi/2})})}))}var Sa=Le&&Le.type&&Le.type.getComposedData;Sa&&St.push({props:jt(jt({},Sa(jt(jt({},jn),{},{displayedData:xt,props:J,dataKey:Wt,item:Le,bandSize:kt,barPosition:ii,offset:ee,stackedData:br,layout:De,dataStartIndex:me,dataEndIndex:Ce}))),{},dn(dn(dn({key:Le.key||"item-".concat(Nt)},ht,jn[ht]),We,jn[We]),"animationId",se)),childIndex:yle(Le,J.children),item:Le})}),St},X=function(J,Z){var H=J.props,K=J.dataStartIndex,ee=J.dataEndIndex,se=J.updateId;if(!cF({props:H}))return null;var me=H.children,Ce=H.layout,Ae=H.stackOffset,De=H.data,qe=H.reverseStackOrder,je=K8(Ce),Oe=je.numericAxisName,ct=je.cateAxisName,ht=Es(me,u),We=Bxe(De,ht,"".concat(Oe,"Id"),"".concat(ct,"Id"),Ae,qe),Je=w.reduce(function($t,Wt){var Tr="".concat(Wt.axisType,"Map");return jt(jt({},$t),{},dn({},Tr,gDe(H,jt(jt({},Wt),{},{graphicalItems:ht,stackGroups:Wt.axisType===Oe&&We,dataStartIndex:K,dataEndIndex:ee}))))},{}),St=vDe(jt(jt({},Je),{},{props:H,graphicalItems:ht}),Z==null?void 0:Z.legendBBox);Object.keys(Je).forEach(function($t){Je[$t]=P(H,Je[$t],St,$t.replace("Map",""),o)});var Le=Je["".concat(ct,"Map")],Nt=_De(Le),xt=U(H,jt(jt({},Je),{},{dataStartIndex:K,dataEndIndex:ee,updateId:se,graphicalItems:ht,stackGroups:We,offset:St}));return jt(jt({formattedGraphicalItems:xt,graphicalItems:ht,offset:St,stackGroups:We},Nt),Je)};return r=function(Q){oDe(J,Q);function J(Z){var H,K,ee;return tDe(this,J),ee=nDe(this,J,[Z]),dn(ri(ee),"eventEmitterSymbol",Symbol("rechartsEventEmitter")),dn(ri(ee),"accessibilityManager",new $Ee),dn(ri(ee),"handleLegendBBoxUpdate",function(se){if(se){var me=ee.state,Ce=me.dataStartIndex,Ae=me.dataEndIndex,De=me.updateId;ee.setState(jt({legendBBox:se},X({props:ee.props,dataStartIndex:Ce,dataEndIndex:Ae,updateId:De},jt(jt({},ee.state),{},{legendBBox:se}))))}}),dn(ri(ee),"handleReceiveSyncEvent",function(se,me,Ce){if(ee.props.syncId===se){if(Ce===ee.eventEmitterSymbol&&typeof ee.props.syncMethod!="function")return;ee.applySyncEvent(me)}}),dn(ri(ee),"handleBrushChange",function(se){var me=se.startIndex,Ce=se.endIndex;if(me!==ee.state.dataStartIndex||Ce!==ee.state.dataEndIndex){var Ae=ee.state.updateId;ee.setState(function(){return jt({dataStartIndex:me,dataEndIndex:Ce},X({props:ee.props,dataStartIndex:me,dataEndIndex:Ce,updateId:Ae},ee.state))}),ee.triggerSyncEvent({dataStartIndex:me,dataEndIndex:Ce})}}),dn(ri(ee),"handleMouseEnter",function(se){var me=ee.getMouseInfo(se);if(me){var Ce=jt(jt({},me),{},{isTooltipActive:!0});ee.setState(Ce),ee.triggerSyncEvent(Ce);var Ae=ee.props.onMouseEnter;Ln(Ae)&&Ae(Ce,se)}}),dn(ri(ee),"triggeredAfterMouseMove",function(se){var me=ee.getMouseInfo(se),Ce=me?jt(jt({},me),{},{isTooltipActive:!0}):{isTooltipActive:!1};ee.setState(Ce),ee.triggerSyncEvent(Ce);var Ae=ee.props.onMouseMove;Ln(Ae)&&Ae(Ce,se)}),dn(ri(ee),"handleItemMouseEnter",function(se){ee.setState(function(){return{isTooltipActive:!0,activeItem:se,activePayload:se.tooltipPayload,activeCoordinate:se.tooltipPosition||{x:se.cx,y:se.cy}}})}),dn(ri(ee),"handleItemMouseLeave",function(){ee.setState(function(){return{isTooltipActive:!1}})}),dn(ri(ee),"handleMouseMove",function(se){se.persist(),ee.throttleTriggeredAfterMouseMove(se)}),dn(ri(ee),"handleMouseLeave",function(se){ee.throttleTriggeredAfterMouseMove.cancel();var me={isTooltipActive:!1};ee.setState(me),ee.triggerSyncEvent(me);var Ce=ee.props.onMouseLeave;Ln(Ce)&&Ce(me,se)}),dn(ri(ee),"handleOuterEvent",function(se){var me=_le(se),Ce=Fl(ee.props,"".concat(me));if(me&&Ln(Ce)){var Ae,De;/.*touch.*/i.test(me)?De=ee.getMouseInfo(se.changedTouches[0]):De=ee.getMouseInfo(se),Ce((Ae=De)!==null&&Ae!==void 0?Ae:{},se)}}),dn(ri(ee),"handleClick",function(se){var me=ee.getMouseInfo(se);if(me){var Ce=jt(jt({},me),{},{isTooltipActive:!0});ee.setState(Ce),ee.triggerSyncEvent(Ce);var Ae=ee.props.onClick;Ln(Ae)&&Ae(Ce,se)}}),dn(ri(ee),"handleMouseDown",function(se){var me=ee.props.onMouseDown;if(Ln(me)){var Ce=ee.getMouseInfo(se);me(Ce,se)}}),dn(ri(ee),"handleMouseUp",function(se){var me=ee.props.onMouseUp;if(Ln(me)){var Ce=ee.getMouseInfo(se);me(Ce,se)}}),dn(ri(ee),"handleTouchMove",function(se){se.changedTouches!=null&&se.changedTouches.length>0&&ee.throttleTriggeredAfterMouseMove(se.changedTouches[0])}),dn(ri(ee),"handleTouchStart",function(se){se.changedTouches!=null&&se.changedTouches.length>0&&ee.handleMouseDown(se.changedTouches[0])}),dn(ri(ee),"handleTouchEnd",function(se){se.changedTouches!=null&&se.changedTouches.length>0&&ee.handleMouseUp(se.changedTouches[0])}),dn(ri(ee),"triggerSyncEvent",function(se){ee.props.syncId!==void 0&&OE.emit(kE,ee.props.syncId,se,ee.eventEmitterSymbol)}),dn(ri(ee),"applySyncEvent",function(se){var me=ee.props,Ce=me.layout,Ae=me.syncMethod,De=ee.state.updateId,qe=se.dataStartIndex,je=se.dataEndIndex;if(se.dataStartIndex!==void 0||se.dataEndIndex!==void 0)ee.setState(jt({dataStartIndex:qe,dataEndIndex:je},X({props:ee.props,dataStartIndex:qe,dataEndIndex:je,updateId:De},ee.state)));else if(se.activeTooltipIndex!==void 0){var Oe=se.chartX,ct=se.chartY,ht=se.activeTooltipIndex,We=ee.state,Je=We.offset,St=We.tooltipTicks;if(!Je)return;if(typeof Ae=="function")ht=Ae(St,se);else if(Ae==="value"){ht=-1;for(var Le=0;Le<St.length;Le++)if(St[Le].value===se.activeLabel){ht=Le;break}}var Nt=jt(jt({},Je),{},{x:Je.left,y:Je.top}),xt=Math.min(Oe,Nt.x+Nt.width),$t=Math.min(ct,Nt.y+Nt.height),Wt=St[ht]&&St[ht].value,Tr=GI(ee.state,ee.props.data,ht),Hr=St[ht]?{x:Ce==="horizontal"?St[ht].coordinate:xt,y:Ce==="horizontal"?$t:St[ht].coordinate}:GW;ee.setState(jt(jt({},se),{},{activeLabel:Wt,activeCoordinate:Hr,activePayload:Tr,activeTooltipIndex:ht}))}else ee.setState(se)}),dn(ri(ee),"renderCursor",function(se){var me,Ce=ee.state,Ae=Ce.isTooltipActive,De=Ce.activeCoordinate,qe=Ce.activePayload,je=Ce.offset,Oe=Ce.activeTooltipIndex,ct=Ce.tooltipAxisBandSize,ht=ee.getTooltipEventType(),We=(me=se.props.active)!==null&&me!==void 0?me:Ae,Je=ee.props.layout,St=se.key||"_recharts-cursor";return Ue.createElement(qEe,{key:St,activeCoordinate:De,activePayload:qe,activeTooltipIndex:Oe,chartName:o,element:se,isActive:We,layout:Je,offset:je,tooltipAxisBandSize:ct,tooltipEventType:ht})}),dn(ri(ee),"renderPolarAxis",function(se,me,Ce){var Ae=Fl(se,"type.axisType"),De=Fl(ee.state,"".concat(Ae,"Map")),qe=De&&De[se.props["".concat(Ae,"Id")]];return Te.cloneElement(se,jt(jt({},qe),{},{className:Yn(Ae,qe.className),key:se.key||"".concat(me,"-").concat(Ce),ticks:hh(qe,!0)}))}),dn(ri(ee),"renderPolarGrid",function(se){var me=se.props,Ce=me.radialLines,Ae=me.polarAngles,De=me.polarRadius,qe=ee.state,je=qe.radiusAxisMap,Oe=qe.angleAxisMap,ct=Pf(je),ht=Pf(Oe),We=ht.cx,Je=ht.cy,St=ht.innerRadius,Le=ht.outerRadius;return Te.cloneElement(se,{polarAngles:Array.isArray(Ae)?Ae:hh(ht,!0).map(function(Nt){return Nt.coordinate}),polarRadius:Array.isArray(De)?De:hh(ct,!0).map(function(Nt){return Nt.coordinate}),cx:We,cy:Je,innerRadius:St,outerRadius:Le,key:se.key||"polar-grid",radialLines:Ce})}),dn(ri(ee),"renderLegend",function(){var se=ee.state.formattedGraphicalItems,me=ee.props,Ce=me.children,Ae=me.width,De=me.height,qe=ee.props.margin||{},je=Ae-(qe.left||0)-(qe.right||0),Oe=jH({children:Ce,formattedGraphicalItems:se,legendWidth:je,legendContent:I});if(!Oe)return null;var ct=Oe.item,ht=G8(Oe,KEe);return Te.cloneElement(ct,jt(jt({},ht),{},{chartWidth:Ae,chartHeight:De,margin:qe,onBBoxUpdate:ee.handleLegendBBoxUpdate}))}),dn(ri(ee),"renderTooltip",function(){var se,me=ee.props,Ce=me.children,Ae=me.accessibilityLayer,De=Ys(Ce,dc);if(!De)return null;var qe=ee.state,je=qe.isTooltipActive,Oe=qe.activeCoordinate,ct=qe.activePayload,ht=qe.activeLabel,We=qe.offset,Je=(se=De.props.active)!==null&&se!==void 0?se:je;return Te.cloneElement(De,{viewBox:jt(jt({},We),{},{x:We.left,y:We.top}),active:Je,label:ht,payload:Je?ct:[],coordinate:Oe,accessibilityLayer:Ae})}),dn(ri(ee),"renderBrush",function(se){var me=ee.props,Ce=me.margin,Ae=me.data,De=ee.state,qe=De.offset,je=De.dataStartIndex,Oe=De.dataEndIndex,ct=De.updateId;return Te.cloneElement(se,{key:se.key||"_recharts-brush",onChange:Yx(ee.handleBrushChange,se.props.onChange),data:Ae,x:lr(se.props.x)?se.props.x:qe.left,y:lr(se.props.y)?se.props.y:qe.top+qe.height+qe.brushBottom-(Ce.bottom||0),width:lr(se.props.width)?se.props.width:qe.width,startIndex:je,endIndex:Oe,updateId:"brush-".concat(ct)})}),dn(ri(ee),"renderReferenceElement",function(se,me,Ce){if(!se)return null;var Ae=ri(ee),De=Ae.clipPathId,qe=ee.state,je=qe.xAxisMap,Oe=qe.yAxisMap,ct=qe.offset,ht=se.props,We=ht.xAxisId,Je=ht.yAxisId;return Te.cloneElement(se,{key:se.key||"".concat(me,"-").concat(Ce),xAxis:je[We],yAxis:Oe[Je],viewBox:{x:ct.left,y:ct.top,width:ct.width,height:ct.height},clipPathId:De})}),dn(ri(ee),"renderActivePoints",function(se){var me=se.item,Ce=se.activePoint,Ae=se.basePoint,De=se.childIndex,qe=se.isRange,je=[],Oe=me.props.key,ct=me.item.props,ht=ct.activeDot,We=ct.dataKey,Je=jt(jt({index:De,dataKey:We,cx:Ce.x,cy:Ce.y,r:4,fill:_k(me.item),strokeWidth:2,stroke:"#fff",payload:Ce.payload,value:Ce.value,key:"".concat(Oe,"-activePoint-").concat(De)},An(ht,!1)),vC(ht));return je.push(J.renderActiveDot(ht,Je)),Ae?je.push(J.renderActiveDot(ht,jt(jt({},Je),{},{cx:Ae.x,cy:Ae.y,key:"".concat(Oe,"-basePoint-").concat(De)}))):qe&&je.push(null),je}),dn(ri(ee),"renderGraphicChild",function(se,me,Ce){var Ae=ee.filterFormatItem(se,me,Ce);if(!Ae)return null;var De=ee.getTooltipEventType(),qe=ee.state,je=qe.isTooltipActive,Oe=qe.tooltipAxis,ct=qe.activeTooltipIndex,ht=qe.activeLabel,We=ee.props.children,Je=Ys(We,dc),St=Ae.props,Le=St.points,Nt=St.isRange,xt=St.baseLine,$t=Ae.item.props,Wt=$t.activeDot,Tr=$t.hide,Hr=$t.activeBar,Wr=$t.activeShape,zr=!!(!Tr&&je&&Je&&(Wt||Hr||Wr)),jn={};De!=="axis"&&Je&&Je.props.trigger==="click"?jn={onClick:Yx(ee.handleItemMouseEnter,se.props.onClick)}:De!=="axis"&&(jn={onMouseLeave:Yx(ee.handleItemMouseLeave,se.props.onMouseLeave),onMouseEnter:Yx(ee.handleItemMouseEnter,se.props.onMouseEnter)});var Ti=Te.cloneElement(se,jt(jt({},Ae.props),jn));function ur(Eo){return typeof Oe.dataKey=="function"?Oe.dataKey(Eo.payload):null}if(zr)if(ct>=0){var br,Ur;if(Oe.dataKey&&!Oe.allowDuplicatedCategory){var kt=typeof Oe.dataKey=="function"?ur:"payload.".concat(Oe.dataKey.toString());br=yC(Le,kt,ht),Ur=Nt&&xt&&yC(xt,kt,ht)}else br=Le==null?void 0:Le[ct],Ur=Nt&&xt&&xt[ct];if(Wr||Hr){var ii=se.props.activeIndex!==void 0?se.props.activeIndex:ct;return[Te.cloneElement(se,jt(jt(jt({},Ae.props),jn),{},{activeIndex:ii})),null,null]}if(!En(br))return[Ti].concat(h_(ee.renderActivePoints({item:Ae,activePoint:br,basePoint:Ur,childIndex:ct,isRange:Nt})))}else{var Er,$n=(Er=ee.getItemByXY(ee.state.activeCoordinate))!==null&&Er!==void 0?Er:{graphicalItem:Ti},ei=$n.graphicalItem,vi=ei.item,Mi=vi===void 0?se:vi,Sa=ei.childIndex,Wn=jt(jt(jt({},Ae.props),jn),{},{activeIndex:Sa});return[Te.cloneElement(Mi,Wn),null,null]}return Nt?[Ti,null,null]:[Ti,null]}),dn(ri(ee),"renderCustomized",function(se,me,Ce){return Te.cloneElement(se,jt(jt({key:"recharts-customized-".concat(Ce)},ee.props),ee.state))}),dn(ri(ee),"renderMap",{CartesianGrid:{handler:rb,once:!0},ReferenceArea:{handler:ee.renderReferenceElement},ReferenceLine:{handler:rb},ReferenceDot:{handler:ee.renderReferenceElement},XAxis:{handler:rb},YAxis:{handler:rb},Brush:{handler:ee.renderBrush,once:!0},Bar:{handler:ee.renderGraphicChild},Line:{handler:ee.renderGraphicChild},Area:{handler:ee.renderGraphicChild},Radar:{handler:ee.renderGraphicChild},RadialBar:{handler:ee.renderGraphicChild},Scatter:{handler:ee.renderGraphicChild},Pie:{handler:ee.renderGraphicChild},Funnel:{handler:ee.renderGraphicChild},Tooltip:{handler:ee.renderCursor,once:!0},PolarGrid:{handler:ee.renderPolarGrid,once:!0},PolarAngleAxis:{handler:ee.renderPolarAxis},PolarRadiusAxis:{handler:ee.renderPolarAxis},Customized:{handler:ee.renderCustomized}}),ee.clipPathId="".concat((H=Z.id)!==null&&H!==void 0?H:Xp("recharts"),"-clip"),ee.throttleTriggeredAfterMouseMove=V9(ee.triggeredAfterMouseMove,(K=Z.throttleDelay)!==null&&K!==void 0?K:1e3/60),ee.state={},ee}return rDe(J,[{key:"componentDidMount",value:function(){var H,K;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(H=this.props.margin.left)!==null&&H!==void 0?H:0,top:(K=this.props.margin.top)!==null&&K!==void 0?K:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var H=this.props,K=H.children,ee=H.data,se=H.height,me=H.layout,Ce=Ys(K,dc);if(Ce){var Ae=Ce.props.defaultIndex;if(!(typeof Ae!="number"||Ae<0||Ae>this.state.tooltipTicks.length)){var De=this.state.tooltipTicks[Ae]&&this.state.tooltipTicks[Ae].value,qe=GI(this.state,ee,Ae,De),je=this.state.tooltipTicks[Ae].coordinate,Oe=(this.state.offset.top+se)/2,ct=me==="horizontal",ht=ct?{x:je,y:Oe}:{y:je,x:Oe},We=this.state.formattedGraphicalItems.find(function(St){var Le=St.item;return Le.type.name==="Scatter"});We&&(ht=jt(jt({},ht),We.props.points[Ae].tooltipPosition),qe=We.props.points[Ae].tooltipPayload);var Je={activeTooltipIndex:Ae,isTooltipActive:!0,activeLabel:De,activePayload:qe,activeCoordinate:ht};this.setState(Je),this.renderCursor(Ce),this.accessibilityManager.setIndex(Ae)}}}},{key:"getSnapshotBeforeUpdate",value:function(H,K){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==K.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==H.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==H.margin){var ee,se;this.accessibilityManager.setDetails({offset:{left:(ee=this.props.margin.left)!==null&&ee!==void 0?ee:0,top:(se=this.props.margin.top)!==null&&se!==void 0?se:0}})}return null}},{key:"componentDidUpdate",value:function(H){SM([Ys(H.children,dc)],[Ys(this.props.children,dc)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var H=Ys(this.props.children,dc);if(H&&typeof H.props.shared=="boolean"){var K=H.props.shared?"axis":"item";return s.indexOf(K)>=0?K:p}return p}},{key:"getMouseInfo",value:function(H){if(!this.container)return null;var K=this.container,ee=K.getBoundingClientRect(),se=jye(ee),me={chartX:Math.round(H.pageX-se.left),chartY:Math.round(H.pageY-se.top)},Ce=ee.width/K.offsetWidth||1,Ae=this.inRange(me.chartX,me.chartY,Ce);if(!Ae)return null;var De=this.state,qe=De.xAxisMap,je=De.yAxisMap,Oe=this.getTooltipEventType();if(Oe!=="axis"&&qe&&je){var ct=Pf(qe).scale,ht=Pf(je).scale,We=ct&&ct.invert?ct.invert(me.chartX):null,Je=ht&&ht.invert?ht.invert(me.chartY):null;return jt(jt({},me),{},{xValue:We,yValue:Je})}var St=Z8(this.state,this.props.data,this.props.layout,Ae);return St?jt(jt({},me),St):null}},{key:"inRange",value:function(H,K){var ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,se=this.props.layout,me=H/ee,Ce=K/ee;if(se==="horizontal"||se==="vertical"){var Ae=this.state.offset,De=me>=Ae.left&&me<=Ae.left+Ae.width&&Ce>=Ae.top&&Ce<=Ae.top+Ae.height;return De?{x:me,y:Ce}:null}var qe=this.state,je=qe.angleAxisMap,Oe=qe.radiusAxisMap;if(je&&Oe){var ct=Pf(je);return bj({x:me,y:Ce},ct)}return null}},{key:"parseEventsOfWrapper",value:function(){var H=this.props.children,K=this.getTooltipEventType(),ee=Ys(H,dc),se={};ee&&K==="axis"&&(ee.props.trigger==="click"?se={onClick:this.handleClick}:se={onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd});var me=vC(this.props,this.handleOuterEvent);return jt(jt({},me),se)}},{key:"addListener",value:function(){OE.on(kE,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){OE.removeListener(kE,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(H,K,ee){for(var se=this.state.formattedGraphicalItems,me=0,Ce=se.length;me<Ce;me++){var Ae=se[me];if(Ae.item===H||Ae.props.key===H.key||K===dh(Ae.item.type)&&ee===Ae.childIndex)return Ae}return null}},{key:"renderClipPath",value:function(){var H=this.clipPathId,K=this.state.offset,ee=K.left,se=K.top,me=K.height,Ce=K.width;return Ue.createElement("defs",null,Ue.createElement("clipPath",{id:H},Ue.createElement("rect",{x:ee,y:se,height:me,width:Ce})))}},{key:"getXScales",value:function(){var H=this.state.xAxisMap;return H?Object.entries(H).reduce(function(K,ee){var se=V8(ee,2),me=se[0],Ce=se[1];return jt(jt({},K),{},dn({},me,Ce.scale))},{}):null}},{key:"getYScales",value:function(){var H=this.state.yAxisMap;return H?Object.entries(H).reduce(function(K,ee){var se=V8(ee,2),me=se[0],Ce=se[1];return jt(jt({},K),{},dn({},me,Ce.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(H){var K;return(K=this.state.xAxisMap)===null||K===void 0||(K=K[H])===null||K===void 0?void 0:K.scale}},{key:"getYScaleByAxisId",value:function(H){var K;return(K=this.state.yAxisMap)===null||K===void 0||(K=K[H])===null||K===void 0?void 0:K.scale}},{key:"getItemByXY",value:function(H){var K=this.state,ee=K.formattedGraphicalItems,se=K.activeItem;if(ee&&ee.length)for(var me=0,Ce=ee.length;me<Ce;me++){var Ae=ee[me],De=Ae.props,qe=Ae.item,je=dh(qe.type);if(je==="Bar"){var Oe=(De.data||[]).find(function(Je){return nwe(H,Je)});if(Oe)return{graphicalItem:Ae,payload:Oe}}else if(je==="RadialBar"){var ct=(De.data||[]).find(function(Je){return bj(H,Je)});if(ct)return{graphicalItem:Ae,payload:ct}}else if(yS(Ae,se)||vS(Ae,se)||Qv(Ae,se)){var ht=oSe({graphicalItem:Ae,activeTooltipItem:se,itemData:qe.props.data}),We=qe.props.activeIndex===void 0?ht:qe.props.activeIndex;return{graphicalItem:jt(jt({},Ae),{},{childIndex:We}),payload:Qv(Ae,se)?qe.props.data[ht]:Ae.props.data[ht]}}}return null}},{key:"render",value:function(){var H=this;if(!cF(this))return null;var K=this.props,ee=K.children,se=K.className,me=K.width,Ce=K.height,Ae=K.style,De=K.compact,qe=K.title,je=K.desc,Oe=G8(K,XEe),ct=An(Oe,!1);if(De)return Ue.createElement(x8,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Ue.createElement(AM,tv({},ct,{width:me,height:Ce,title:qe,desc:je}),this.renderClipPath(),fF(ee,this.renderMap)));if(this.props.accessibilityLayer){var ht,We;ct.tabIndex=(ht=this.props.tabIndex)!==null&&ht!==void 0?ht:0,ct.role=(We=this.props.role)!==null&&We!==void 0?We:"application",ct.onKeyDown=function(St){H.accessibilityManager.keyboardEvent(St)},ct.onFocus=function(){H.accessibilityManager.focus()}}var Je=this.parseEventsOfWrapper();return Ue.createElement(x8,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Ue.createElement("div",tv({className:Yn("recharts-wrapper",se),style:jt({position:"relative",cursor:"default",width:me,height:Ce},Ae)},Je,{ref:function(Le){H.container=Le}}),Ue.createElement(AM,tv({},ct,{width:me,height:Ce,title:qe,desc:je,style:hDe}),this.renderClipPath(),fF(ee,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}]),J}(Te.Component),dn(r,"displayName",o),dn(r,"defaultProps",jt({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},N)),dn(r,"getDerivedStateFromProps",function(Q,J){var Z=Q.dataKey,H=Q.data,K=Q.children,ee=Q.width,se=Q.height,me=Q.layout,Ce=Q.stackOffset,Ae=Q.margin,De=J.dataStartIndex,qe=J.dataEndIndex;if(J.updateId===void 0){var je=q8(Q);return jt(jt(jt({},je),{},{updateId:0},X(jt(jt({props:Q},je),{},{updateId:0}),J)),{},{prevDataKey:Z,prevData:H,prevWidth:ee,prevHeight:se,prevLayout:me,prevStackOffset:Ce,prevMargin:Ae,prevChildren:K})}if(Z!==J.prevDataKey||H!==J.prevData||ee!==J.prevWidth||se!==J.prevHeight||me!==J.prevLayout||Ce!==J.prevStackOffset||!Og(Ae,J.prevMargin)){var Oe=q8(Q),ct={chartX:J.chartX,chartY:J.chartY,isTooltipActive:J.isTooltipActive},ht=jt(jt({},Z8(J,H,me)),{},{updateId:J.updateId+1}),We=jt(jt(jt({},Oe),ct),ht);return jt(jt(jt({},We),X(jt({props:Q},We),J)),{},{prevDataKey:Z,prevData:H,prevWidth:ee,prevHeight:se,prevLayout:me,prevStackOffset:Ce,prevMargin:Ae,prevChildren:K})}if(!SM(K,J.prevChildren)){var Je,St,Le,Nt,xt=Ys(K,i_),$t=xt&&(Je=(St=xt.props)===null||St===void 0?void 0:St.startIndex)!==null&&Je!==void 0?Je:De,Wt=xt&&(Le=(Nt=xt.props)===null||Nt===void 0?void 0:Nt.endIndex)!==null&&Le!==void 0?Le:qe,Tr=$t!==De||Wt!==qe,Hr=!En(H),Wr=Hr&&!Tr?J.updateId:J.updateId+1;return jt(jt({updateId:Wr},X(jt(jt({props:Q},J),{},{updateId:Wr,dataStartIndex:$t,dataEndIndex:Wt}),J)),{},{prevChildren:K,dataStartIndex:$t,dataEndIndex:Wt})}return null}),dn(r,"renderActiveDot",function(Q,J){var Z;return Te.isValidElement(Q)?Z=Te.cloneElement(Q,J):Ln(Q)?Z=Q(J):Z=Ue.createElement(_S,J),Ue.createElement(hi,{className:"recharts-active-dot",key:J.key},Z)}),r},bDe=xDe({chartName:"ComposedChart",GraphicalChild:[LB,ud,L_,bS],axisComponents:[{axisType:"xAxis",AxisComp:CS},{axisType:"yAxis",AxisComp:wS},{axisType:"zAxis",AxisComp:xS}],formatAxisMap:ETe});const Ak=Te.createContext([]),CDe=({children:t})=>{const[e,r]=Te.useState(()=>{const o=localStorage.getItem("acceptableDeterminands");return o?JSON.parse(o):[]});return Te.useEffect(()=>{if(e.length===0){const o=new AbortController,u=o.signal;return fetch("http://54.206.117.183:8888/chchWater/acceptable_determinands",{method:"GET",mode:"cors",signal:u}).then(f=>f.json()).then(f=>{f=f[0];let p=[];Object.entries(f).forEach(([x,s])=>{x!=="id"&&x!=="date_recorded"&&x!=="well_id"&&p.push({name:x,value:s})}),r(p)}).catch(f=>console.log(f)),()=>{o.abort()}}},[e]),Ie.jsx(Ak.Provider,{value:[e,r],children:t})};function wDe({item:t,handleTimeSelection:e,setGraphTime:r}){return Ie.jsx("div",{className:`time-item row body-large ${t.selected?"selected":""}`,onClick:()=>{e(t.id),r(t.value)},children:t.time})}function SDe(){const[t,e]=Te.useContext(v3),[r,o]=Te.useState(4),[u,f]=Te.useState([]),[p,x]=Te.useContext(Ak),s=Zp().state.well_code;Te.useEffect(()=>{const U=new AbortController,X=U.signal;return fetch(`http://54.206.117.183:8888/chchWater/${s.replace("/","_")}/${r}`,{method:"GET",mode:"cors",signal:X}).then(Q=>Q.json()).then(Q=>{const J=[];Q.map(Z=>{J.push({name:new Date(Z.date_recorded).getFullYear(),actualValue:Z[t.name].determinand_actual_value,acceptedValue:p.find(H=>H.name===t.name).value.determinand_max_value?p.find(H=>H.name===t.name).value.determinand_max_value:""})}),f(J.reverse())}).catch(Q=>console.log(Q)),()=>{U.abort()}},[s,r,t]);const w=({active:U,payload:X,label:Q})=>U&&X&&X.length?Ie.jsxs("div",{className:"custom-tooltip col",children:[Ie.jsx("p",{className:"label body-large",children:`${Q}`}),Ie.jsx("p",{className:"intro body-large",children:`$${X[0].value}`})]}):null,[I,P]=Te.useState([{id:1,time:"4 Samples",value:4,selected:!0},{id:2,time:"7 Samples",value:7,selected:!1}]);function N(U){const X=I.map(Q=>(Q.id===U?Q.selected=!0:Q.selected=!1,Q));P(X)}return Ie.jsxs("div",{className:"graph col gp-16",children:[Ie.jsxs("div",{className:"metric-header row title-large jc-sb flx-wrp gp-12",children:[Ie.jsx("div",{className:"variables-compare-container row gp-16 flx-wrp",children:Ie.jsxs("div",{className:"multi-var col",children:[Ie.jsx("div",{className:"graph-title-container row jc-sb al-ctr",children:Ie.jsx("span",{className:"headline-small mt-name",children:t?t.value.determinand_name:""})}),Ie.jsx("div",{className:"graph-values col gp-4",children:Ie.jsxs("div",{className:"wrapper col",children:[Ie.jsx("p",{className:"title-small time",children:"Today"}),Ie.jsx("p",{className:"headline-medium cr-value",children:t?t.value.determinand_actual_value:""})]})})]})}),Ie.jsx("div",{className:"time-switcher-wrapper row",children:I.map(U=>Ie.jsx(wDe,{item:U,handleTimeSelection:N,setGraphTime:o},U.id))})]}),Ie.jsx("div",{className:"graph-container",children:Ie.jsx(Oye,{width:"100%",minWidth:300,maxHeight:"100%",children:Ie.jsxs(bDe,{data:u,margin:{top:10,right:10,left:0,bottom:10},children:[Ie.jsx("defs",{children:Ie.jsxs("linearGradient",{id:"colorUv",x1:"0",y1:"0",x2:"0",y2:"1",children:[Ie.jsx("stop",{offset:"5%",stopColor:"#069bf1",stopOpacity:.5}),Ie.jsx("stop",{offset:"95%",stopColor:"#069bf1",stopOpacity:0})]})}),Ie.jsx(CS,{dataKey:"name",fontFamily:"Manrope",axisLine:!1}),Ie.jsx(wS,{}),Ie.jsx(PW,{strokeDasharray:"5 5"}),Ie.jsx(dc,{content:Ie.jsx(w,{})}),Ie.jsx(Kg,{verticalAlign:"bottom",height:2}),Ie.jsx(LB,{type:"",dataKey:"acceptedValue",stroke:"var(--color-error)",strokeWidth:3,points:[]}),Ie.jsx(ud,{type:"",dataKey:"actualValue",stroke:"#0062a7",strokeWidth:3,fillOpacity:1,fill:"url(#colorUv)"})]})})})]})}function TDe(t){const e=t.acceptableValues.find(r=>r.name===t.item.name);return Ie.jsx(Ie.Fragment,{children:Ie.jsxs("div",{className:`re-row row jc-sb ${t.item.selected?"selected":""}`,onClick:()=>t.handleActiveTableItem(t.item.name),children:[Ie.jsx("div",{className:"title-small determinand row",children:t.item.value.determinand_name}),Ie.jsx("div",{className:"title-small actual-value",children:t.item.value.determinand_actual_value}),Ie.jsx("div",{className:"title-small acc-value",children:(e.value.determinand_max_value=="nan",e.value.determinand_ideal_value)}),Ie.jsx("div",{className:"title-small unit",children:t.item.value.determinand_units=="nan"?"-":t.item.value.determinand_units})]})})}function ADe(t){const[e,r]=Te.useContext(Ak),[o,u]=Te.useContext(v3);function f(p){t.setWellData(t.wellData.map(x=>(x.name==p?(x.selected=!0,u(x)):x.selected=!1,x)))}return Ie.jsx("div",{className:"table-container col",children:Ie.jsxs("div",{className:"re-rows-container col",children:[Ie.jsxs("div",{className:"re-table-header row",children:[Ie.jsx("div",{className:"title-small determinand row",children:"Determinand"}),Ie.jsx("div",{className:"title-small actual-value",children:"Actual Value"}),Ie.jsx("div",{className:"title-small acc-value",children:"Acceptable Value"}),Ie.jsx("div",{className:"title-small unit",children:"Unit"})]}),t.wellData.map(p=>Ie.jsx(TDe,{item:p,handleActiveTableItem:f,acceptableValues:e},p.id))]})})}function EDe(t){return Te.useState(!1),Ie.jsx("div",{className:"metrics box col gp-16 jc-str ",children:Ie.jsxs("div",{className:"box-content-wrapper col gp-12",children:[Ie.jsxs("div",{className:"box-header col gp-12 flx-wrp",children:[Ie.jsxs("div",{className:"box-title row gp-12",children:[Ie.jsx("span",{className:"material-symbols-rounded metric-count-icon",children:"rule_settings"}),Ie.jsx("p",{className:"title-large dash-card-heading",children:"Metrics Covered"})]}),Ie.jsx("div",{className:"box-content col al-end jc-end",children:Ie.jsx("p",{className:"headline-largest mt-count",children:t.metrics})})]}),Ie.jsx("div",{className:"overflow-content col"})]})})}function DDe(){return Te.useState(!1),Ie.jsx("div",{className:"metrics box col gp-16 jc-str ",children:Ie.jsxs("div",{className:"box-content-wrapper col gp-12",children:[Ie.jsxs("div",{className:"box-header col gp-12 flx-wrp",children:[Ie.jsxs("div",{className:"box-title row gp-12",children:[Ie.jsx("span",{className:"material-symbols-rounded metric-count-icon",children:"water_bottle_large"}),Ie.jsx("p",{className:"title-large dash-card-heading",children:"Drinking Score"})]}),Ie.jsx("div",{className:"box-content col al-end jc-end",children:Ie.jsx("p",{className:"headline-largest mt-count",children:"4.2/5"})})]}),Ie.jsx("div",{className:"overflow-content col"})]})})}function PDe({item:t}){return Te.useState(!1),Ie.jsx("div",{className:"metrics box col gp-16 jc-str ",children:Ie.jsxs("div",{className:"box-content-wrapper col gp-12",children:[Ie.jsxs("div",{className:"box-header col gp-12 flx-wrp",children:[Ie.jsxs("div",{className:"box-title row gp-12",children:[Ie.jsx("span",{className:"material-symbols-rounded metric-count-icon",children:"total_dissolved_solids"}),Ie.jsx("p",{className:"title-large dash-card-heading",children:"Aesthetic Score"})]}),Ie.jsx("div",{className:"box-content col al-end jc-end",children:Ie.jsx("p",{className:"headline-largest mt-count",children:"25+"})})]}),Ie.jsx("div",{className:"overflow-content col"})]})})}var Ek={exports:{}},Zi=String,WW=function(){return{isColorSupported:!1,reset:Zi,bold:Zi,dim:Zi,italic:Zi,underline:Zi,inverse:Zi,hidden:Zi,strikethrough:Zi,black:Zi,red:Zi,green:Zi,yellow:Zi,blue:Zi,magenta:Zi,cyan:Zi,white:Zi,gray:Zi,bgBlack:Zi,bgRed:Zi,bgGreen:Zi,bgYellow:Zi,bgBlue:Zi,bgMagenta:Zi,bgCyan:Zi,bgWhite:Zi}};Ek.exports=WW();Ek.exports.createColors=WW;var ZW=Ek.exports;let X8=ZW,Y8=Vl,HI=class qW extends Error{constructor(e,r,o,u,f,p){super(e),this.name="CssSyntaxError",this.reason=e,f&&(this.file=f),u&&(this.source=u),p&&(this.plugin=p),typeof r<"u"&&typeof o<"u"&&(typeof r=="number"?(this.line=r,this.column=o):(this.line=r.line,this.column=r.column,this.endLine=o.line,this.endColumn=o.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,qW)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",typeof this.line<"u"&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(e){if(!this.source)return"";let r=this.source;e==null&&(e=X8.isColorSupported),Y8&&e&&(r=Y8(r));let o=r.split(/\r?\n/),u=Math.max(this.line-3,0),f=Math.min(this.line+2,o.length),p=String(f).length,x,s;if(e){let{bold:w,gray:I,red:P}=X8.createColors(!0);x=N=>w(P(N)),s=N=>I(N)}else x=s=w=>w;return o.slice(u,f).map((w,I)=>{let P=u+1+I,N=" "+(" "+P).slice(-p)+" | ";if(P===this.line){let U=s(N.replace(/\d/g," "))+w.slice(0,this.column-1).replace(/[^\t]/g," ");return x(">")+s(N)+w+`
 `+U+x("^")}return" "+s(N)+w}).join(`
`)}toString(){let e=this.showSourceCode();return e&&(e=`

`+e+`
`),this.name+": "+this.message+e}};var Dk=HI;HI.default=HI;var RB={};RB.isClean=Symbol("isClean");RB.my=Symbol("my");const J8={after:`
`,beforeClose:`
`,beforeComment:`
`,beforeDecl:`
`,beforeOpen:" ",beforeRule:`
`,colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};function MDe(t){return t[0].toUpperCase()+t.slice(1)}let WI=class{constructor(e){this.builder=e}atrule(e,r){let o="@"+e.name,u=e.params?this.rawValue(e,"params"):"";if(typeof e.raws.afterName<"u"?o+=e.raws.afterName:u&&(o+=" "),e.nodes)this.block(e,o+u);else{let f=(e.raws.between||"")+(r?";":"");this.builder(o+u+f,e)}}beforeAfter(e,r){let o;e.type==="decl"?o=this.raw(e,null,"beforeDecl"):e.type==="comment"?o=this.raw(e,null,"beforeComment"):r==="before"?o=this.raw(e,null,"beforeRule"):o=this.raw(e,null,"beforeClose");let u=e.parent,f=0;for(;u&&u.type!=="root";)f+=1,u=u.parent;if(o.includes(`
`)){let p=this.raw(e,null,"indent");if(p.length)for(let x=0;x<f;x++)o+=p}return o}block(e,r){let o=this.raw(e,"between","beforeOpen");this.builder(r+o+"{",e,"start");let u;e.nodes&&e.nodes.length?(this.body(e),u=this.raw(e,"after")):u=this.raw(e,"after","emptyBody"),u&&this.builder(u),this.builder("}",e,"end")}body(e){let r=e.nodes.length-1;for(;r>0&&e.nodes[r].type==="comment";)r-=1;let o=this.raw(e,"semicolon");for(let u=0;u<e.nodes.length;u++){let f=e.nodes[u],p=this.raw(f,"before");p&&this.builder(p),this.stringify(f,r!==u||o)}}comment(e){let r=this.raw(e,"left","commentLeft"),o=this.raw(e,"right","commentRight");this.builder("/*"+r+e.text+o+"*/",e)}decl(e,r){let o=this.raw(e,"between","colon"),u=e.prop+o+this.rawValue(e,"value");e.important&&(u+=e.raws.important||" !important"),r&&(u+=";"),this.builder(u,e)}document(e){this.body(e)}raw(e,r,o){let u;if(o||(o=r),r&&(u=e.raws[r],typeof u<"u"))return u;let f=e.parent;if(o==="before"&&(!f||f.type==="root"&&f.first===e||f&&f.type==="document"))return"";if(!f)return J8[o];let p=e.root();if(p.rawCache||(p.rawCache={}),typeof p.rawCache[o]<"u")return p.rawCache[o];if(o==="before"||o==="after")return this.beforeAfter(e,o);{let x="raw"+MDe(o);this[x]?u=this[x](p,e):p.walk(s=>{if(u=s.raws[r],typeof u<"u")return!1})}return typeof u>"u"&&(u=J8[o]),p.rawCache[o]=u,u}rawBeforeClose(e){let r;return e.walk(o=>{if(o.nodes&&o.nodes.length>0&&typeof o.raws.after<"u")return r=o.raws.after,r.includes(`
`)&&(r=r.replace(/[^\n]+$/,"")),!1}),r&&(r=r.replace(/\S/g,"")),r}rawBeforeComment(e,r){let o;return e.walkComments(u=>{if(typeof u.raws.before<"u")return o=u.raws.before,o.includes(`
`)&&(o=o.replace(/[^\n]+$/,"")),!1}),typeof o>"u"?o=this.raw(r,null,"beforeDecl"):o&&(o=o.replace(/\S/g,"")),o}rawBeforeDecl(e,r){let o;return e.walkDecls(u=>{if(typeof u.raws.before<"u")return o=u.raws.before,o.includes(`
`)&&(o=o.replace(/[^\n]+$/,"")),!1}),typeof o>"u"?o=this.raw(r,null,"beforeRule"):o&&(o=o.replace(/\S/g,"")),o}rawBeforeOpen(e){let r;return e.walk(o=>{if(o.type!=="decl"&&(r=o.raws.between,typeof r<"u"))return!1}),r}rawBeforeRule(e){let r;return e.walk(o=>{if(o.nodes&&(o.parent!==e||e.first!==o)&&typeof o.raws.before<"u")return r=o.raws.before,r.includes(`
`)&&(r=r.replace(/[^\n]+$/,"")),!1}),r&&(r=r.replace(/\S/g,"")),r}rawColon(e){let r;return e.walkDecls(o=>{if(typeof o.raws.between<"u")return r=o.raws.between.replace(/[^\s:]/g,""),!1}),r}rawEmptyBody(e){let r;return e.walk(o=>{if(o.nodes&&o.nodes.length===0&&(r=o.raws.after,typeof r<"u"))return!1}),r}rawIndent(e){if(e.raws.indent)return e.raws.indent;let r;return e.walk(o=>{let u=o.parent;if(u&&u!==e&&u.parent&&u.parent===e&&typeof o.raws.before<"u"){let f=o.raws.before.split(`
`);return r=f[f.length-1],r=r.replace(/\S/g,""),!1}}),r}rawSemicolon(e){let r;return e.walk(o=>{if(o.nodes&&o.nodes.length&&o.last.type==="decl"&&(r=o.raws.semicolon,typeof r<"u"))return!1}),r}rawValue(e,r){let o=e[r],u=e.raws[r];return u&&u.value===o?u.raw:o}root(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}rule(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}stringify(e,r){if(!this[e.type])throw new Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,r)}};var KW=WI;WI.default=WI;let IDe=KW;function ZI(t,e){new IDe(e).stringify(t)}var TS=ZI;ZI.default=ZI;let{isClean:nb,my:ODe}=RB,kDe=Dk,LDe=KW,RDe=TS;function qI(t,e){let r=new t.constructor;for(let o in t){if(!Object.prototype.hasOwnProperty.call(t,o)||o==="proxyCache")continue;let u=t[o],f=typeof u;o==="parent"&&f==="object"?e&&(r[o]=e):o==="source"?r[o]=u:Array.isArray(u)?r[o]=u.map(p=>qI(p,r)):(f==="object"&&u!==null&&(u=qI(u)),r[o]=u)}return r}let KI=class{constructor(e={}){this.raws={},this[nb]=!1,this[ODe]=!0;for(let r in e)if(r==="nodes"){this.nodes=[];for(let o of e[r])typeof o.clone=="function"?this.append(o.clone()):this.append(o)}else this[r]=e[r]}addToError(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){let r=this.source;e.stack=e.stack.replace(/\n\s{4}at /,`$&${r.input.from}:${r.start.line}:${r.start.column}$&`)}return e}after(e){return this.parent.insertAfter(this,e),this}assign(e={}){for(let r in e)this[r]=e[r];return this}before(e){return this.parent.insertBefore(this,e),this}cleanRaws(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}clone(e={}){let r=qI(this);for(let o in e)r[o]=e[o];return r}cloneAfter(e={}){let r=this.clone(e);return this.parent.insertAfter(this,r),r}cloneBefore(e={}){let r=this.clone(e);return this.parent.insertBefore(this,r),r}error(e,r={}){if(this.source){let{end:o,start:u}=this.rangeBy(r);return this.source.input.error(e,{column:u.column,line:u.line},{column:o.column,line:o.line},r)}return new kDe(e)}getProxyProcessor(){return{get(e,r){return r==="proxyOf"?e:r==="root"?()=>e.root().toProxy():e[r]},set(e,r,o){return e[r]===o||(e[r]=o,(r==="prop"||r==="value"||r==="name"||r==="params"||r==="important"||r==="text")&&e.markDirty()),!0}}}markDirty(){if(this[nb]){this[nb]=!1;let e=this;for(;e=e.parent;)e[nb]=!1}}next(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e+1]}positionBy(e,r){let o=this.source.start;if(e.index)o=this.positionInside(e.index,r);else if(e.word){r=this.toString();let u=r.indexOf(e.word);u!==-1&&(o=this.positionInside(u,r))}return o}positionInside(e,r){let o=r||this.toString(),u=this.source.start.column,f=this.source.start.line;for(let p=0;p<e;p++)o[p]===`
`?(u=1,f+=1):u+=1;return{column:u,line:f}}prev(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e-1]}rangeBy(e){let r={column:this.source.start.column,line:this.source.start.line},o=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:r.column+1,line:r.line};if(e.word){let u=this.toString(),f=u.indexOf(e.word);f!==-1&&(r=this.positionInside(f,u),o=this.positionInside(f+e.word.length,u))}else e.start?r={column:e.start.column,line:e.start.line}:e.index&&(r=this.positionInside(e.index)),e.end?o={column:e.end.column,line:e.end.line}:typeof e.endIndex=="number"?o=this.positionInside(e.endIndex):e.index&&(o=this.positionInside(e.index+1));return(o.line<r.line||o.line===r.line&&o.column<=r.column)&&(o={column:r.column+1,line:r.line}),{end:o,start:r}}raw(e,r){return new LDe().raw(this,e,r)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...e){if(this.parent){let r=this,o=!1;for(let u of e)u===this?o=!0:o?(this.parent.insertAfter(r,u),r=u):this.parent.insertBefore(r,u);o||this.remove()}return this}root(){let e=this;for(;e.parent&&e.parent.type!=="document";)e=e.parent;return e}toJSON(e,r){let o={},u=r==null;r=r||new Map;let f=0;for(let p in this){if(!Object.prototype.hasOwnProperty.call(this,p)||p==="parent"||p==="proxyCache")continue;let x=this[p];if(Array.isArray(x))o[p]=x.map(s=>typeof s=="object"&&s.toJSON?s.toJSON(null,r):s);else if(typeof x=="object"&&x.toJSON)o[p]=x.toJSON(null,r);else if(p==="source"){let s=r.get(x.input);s==null&&(s=f,r.set(x.input,f),f++),o[p]={end:x.end,inputId:s,start:x.start}}else o[p]=x}return u&&(o.inputs=[...r.keys()].map(p=>p.toJSON())),o}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(e=RDe){e.stringify&&(e=e.stringify);let r="";return e(this,o=>{r+=o}),r}warn(e,r,o){let u={node:this};for(let f in o)u[f]=o[f];return e.warn(r,u)}get proxyOf(){return this}};var AS=KI;KI.default=KI;let zDe=AS,XI=class extends zDe{constructor(e){e&&typeof e.value<"u"&&typeof e.value!="string"&&(e={...e,value:String(e.value)}),super(e),this.type="decl"}get variable(){return this.prop.startsWith("--")||this.prop[0]==="$"}};var ES=XI;XI.default=XI;let NDe="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",FDe=(t,e=21)=>(r=e)=>{let o="",u=r;for(;u--;)o+=t[Math.random()*t.length|0];return o},jDe=(t=21)=>{let e="",r=t;for(;r--;)e+=NDe[Math.random()*64|0];return e};var $De={nanoid:jDe,customAlphabet:FDe};let{SourceMapConsumer:Q8,SourceMapGenerator:e$}=Vl,{existsSync:UDe,readFileSync:VDe}=Vl,{dirname:RE,join:GDe}=Vl;function HDe(t){return Buffer?Buffer.from(t,"base64").toString():window.atob(t)}let YI=class{constructor(e,r){if(r.map===!1)return;this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");let o=r.map?r.map.prev:void 0,u=this.loadMap(r.from,o);!this.mapFile&&r.from&&(this.mapFile=r.from),this.mapFile&&(this.root=RE(this.mapFile)),u&&(this.text=u)}consumer(){return this.consumerCache||(this.consumerCache=new Q8(this.text)),this.consumerCache}decodeInline(e){let r=/^data:application\/json;charset=utf-?8;base64,/,o=/^data:application\/json;base64,/,u=/^data:application\/json;charset=utf-?8,/,f=/^data:application\/json,/;if(u.test(e)||f.test(e))return decodeURIComponent(e.substr(RegExp.lastMatch.length));if(r.test(e)||o.test(e))return HDe(e.substr(RegExp.lastMatch.length));let p=e.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+p)}getAnnotationURL(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(e){return typeof e!="object"?!1:typeof e.mappings=="string"||typeof e._mappings=="string"||Array.isArray(e.sections)}loadAnnotation(e){let r=e.match(/\/\*\s*# sourceMappingURL=/gm);if(!r)return;let o=e.lastIndexOf(r.pop()),u=e.indexOf("*/",o);o>-1&&u>-1&&(this.annotation=this.getAnnotationURL(e.substring(o,u)))}loadFile(e){if(this.root=RE(e),UDe(e))return this.mapFile=e,VDe(e,"utf-8").toString().trim()}loadMap(e,r){if(r===!1)return!1;if(r){if(typeof r=="string")return r;if(typeof r=="function"){let o=r(e);if(o){let u=this.loadFile(o);if(!u)throw new Error("Unable to load previous source map: "+o.toString());return u}}else{if(r instanceof Q8)return e$.fromSourceMap(r).toString();if(r instanceof e$)return r.toString();if(this.isMap(r))return JSON.stringify(r);throw new Error("Unsupported previous source map format: "+r.toString())}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let o=this.annotation;return e&&(o=GDe(RE(e),o)),this.loadFile(o)}}}startWith(e,r){return e?e.substr(0,r.length)===r:!1}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}};var XW=YI;YI.default=YI;let{SourceMapConsumer:WDe,SourceMapGenerator:ZDe}=Vl,{fileURLToPath:t$,pathToFileURL:ib}=Vl,{isAbsolute:JI,resolve:QI}=Vl,{nanoid:qDe}=$De,zE=Vl,r$=Dk,KDe=XW,NE=Symbol("fromOffsetCache"),XDe=!!(WDe&&ZDe),n$=!!(QI&&JI),fw=class{constructor(e,r={}){if(e===null||typeof e>"u"||typeof e=="object"&&!e.toString)throw new Error(`PostCSS received ${e} instead of CSS string`);if(this.css=e.toString(),this.css[0]==="\uFEFF"||this.css[0]===""?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,r.from&&(!n$||/^\w+:\/\//.test(r.from)||JI(r.from)?this.file=r.from:this.file=QI(r.from)),n$&&XDe){let o=new KDe(this.css,r);if(o.text){this.map=o;let u=o.consumer().file;!this.file&&u&&(this.file=this.mapResolve(u))}}this.file||(this.id="<input css "+qDe(6)+">"),this.map&&(this.map.file=this.from)}error(e,r,o,u={}){let f,p,x;if(r&&typeof r=="object"){let w=r,I=o;if(typeof w.offset=="number"){let P=this.fromOffset(w.offset);r=P.line,o=P.col}else r=w.line,o=w.column;if(typeof I.offset=="number"){let P=this.fromOffset(I.offset);p=P.line,x=P.col}else p=I.line,x=I.column}else if(!o){let w=this.fromOffset(r);r=w.line,o=w.col}let s=this.origin(r,o,p,x);return s?f=new r$(e,s.endLine===void 0?s.line:{column:s.column,line:s.line},s.endLine===void 0?s.column:{column:s.endColumn,line:s.endLine},s.source,s.file,u.plugin):f=new r$(e,p===void 0?r:{column:o,line:r},p===void 0?o:{column:x,line:p},this.css,this.file,u.plugin),f.input={column:o,endColumn:x,endLine:p,line:r,source:this.css},this.file&&(ib&&(f.input.url=ib(this.file).toString()),f.input.file=this.file),f}fromOffset(e){let r,o;if(this[NE])o=this[NE];else{let f=this.css.split(`
`);o=new Array(f.length);let p=0;for(let x=0,s=f.length;x<s;x++)o[x]=p,p+=f[x].length+1;this[NE]=o}r=o[o.length-1];let u=0;if(e>=r)u=o.length-1;else{let f=o.length-2,p;for(;u<f;)if(p=u+(f-u>>1),e<o[p])f=p-1;else if(e>=o[p+1])u=p+1;else{u=p;break}}return{col:e-o[u]+1,line:u+1}}mapResolve(e){return/^\w+:\/\//.test(e)?e:QI(this.map.consumer().sourceRoot||this.map.root||".",e)}origin(e,r,o,u){if(!this.map)return!1;let f=this.map.consumer(),p=f.originalPositionFor({column:r,line:e});if(!p.source)return!1;let x;typeof o=="number"&&(x=f.originalPositionFor({column:u,line:o}));let s;JI(p.source)?s=ib(p.source):s=new URL(p.source,this.map.consumer().sourceRoot||ib(this.map.mapFile));let w={column:p.column,endColumn:x&&x.column,endLine:x&&x.line,line:p.line,url:s.toString()};if(s.protocol==="file:")if(t$)w.file=t$(s);else throw new Error("file: protocol is not available in this PostCSS build");let I=f.sourceContentFor(p.source);return I&&(w.source=I),w}toJSON(){let e={};for(let r of["hasBOM","css","file","id"])this[r]!=null&&(e[r]=this[r]);return this.map&&(e.map={...this.map},e.map.consumerCache&&(e.map.consumerCache=void 0)),e}get from(){return this.file||this.id}};var DS=fw;fw.default=fw;zE&&zE.registerInput&&zE.registerInput(fw);let{SourceMapConsumer:YW,SourceMapGenerator:Rb}=Vl,{dirname:zb,relative:JW,resolve:QW,sep:eZ}=Vl,{pathToFileURL:i$}=Vl,YDe=DS,JDe=!!(YW&&Rb),QDe=!!(zb&&QW&&JW&&eZ),ePe=class{constructor(e,r,o,u){this.stringify=e,this.mapOpts=o.map||{},this.root=r,this.opts=o,this.css=u,this.originalCSS=u,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let e;this.isInline()?e="data:application/json;base64,"+this.toBase64(this.map.toString()):typeof this.mapOpts.annotation=="string"?e=this.mapOpts.annotation:typeof this.mapOpts.annotation=="function"?e=this.mapOpts.annotation(this.opts.to,this.root):e=this.outputFile()+".map";let r=`
`;this.css.includes(`\r
`)&&(r=`\r
`),this.css+=r+"/*# sourceMappingURL="+e+" */"}applyPrevMaps(){for(let e of this.previous()){let r=this.toUrl(this.path(e.file)),o=e.root||zb(e.file),u;this.mapOpts.sourcesContent===!1?(u=new YW(e.text),u.sourcesContent&&(u.sourcesContent=null)):u=e.consumer(),this.map.applySourceMap(u,r,this.toUrl(this.path(o)))}}clearAnnotation(){if(this.mapOpts.annotation!==!1)if(this.root){let e;for(let r=this.root.nodes.length-1;r>=0;r--)e=this.root.nodes[r],e.type==="comment"&&e.text.indexOf("# sourceMappingURL=")===0&&this.root.removeChild(r)}else this.css&&(this.css=this.css.replace(/\n*?\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),QDe&&JDe&&this.isMap())return this.generateMap();{let e="";return this.stringify(this.root,r=>{e+=r}),[e]}}generateMap(){if(this.root)this.generateString();else if(this.previous().length===1){let e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=Rb.fromSourceMap(e,{ignoreInvalidMapping:!0})}else this.map=new Rb({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new Rb({file:this.outputFile(),ignoreInvalidMapping:!0});let e=1,r=1,o="<no source>",u={generated:{column:0,line:0},original:{column:0,line:0},source:""},f,p;this.stringify(this.root,(x,s,w)=>{if(this.css+=x,s&&w!=="end"&&(u.generated.line=e,u.generated.column=r-1,s.source&&s.source.start?(u.source=this.sourcePath(s),u.original.line=s.source.start.line,u.original.column=s.source.start.column-1,this.map.addMapping(u)):(u.source=o,u.original.line=1,u.original.column=0,this.map.addMapping(u))),f=x.match(/\n/g),f?(e+=f.length,p=x.lastIndexOf(`
`),r=x.length-p):r+=x.length,s&&w!=="start"){let I=s.parent||{raws:{}};(!(s.type==="decl"||s.type==="atrule"&&!s.nodes)||s!==I.last||I.raws.semicolon)&&(s.source&&s.source.end?(u.source=this.sourcePath(s),u.original.line=s.source.end.line,u.original.column=s.source.end.column-1,u.generated.line=e,u.generated.column=r-2,this.map.addMapping(u)):(u.source=o,u.original.line=1,u.original.column=0,u.generated.line=e,u.generated.column=r-1,this.map.addMapping(u)))}})}isAnnotation(){return this.isInline()?!0:typeof this.mapOpts.annotation<"u"?this.mapOpts.annotation:this.previous().length?this.previous().some(e=>e.annotation):!0}isInline(){if(typeof this.mapOpts.inline<"u")return this.mapOpts.inline;let e=this.mapOpts.annotation;return typeof e<"u"&&e!==!0?!1:this.previous().length?this.previous().some(r=>r.inline):!0}isMap(){return typeof this.opts.map<"u"?!!this.opts.map:this.previous().length>0}isSourcesContent(){return typeof this.mapOpts.sourcesContent<"u"?this.mapOpts.sourcesContent:this.previous().length?this.previous().some(e=>e.withContent()):!0}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(e){if(this.mapOpts.absolute||e.charCodeAt(0)===60||/^\w+:\/\//.test(e))return e;let r=this.memoizedPaths.get(e);if(r)return r;let o=this.opts.to?zb(this.opts.to):".";typeof this.mapOpts.annotation=="string"&&(o=zb(QW(o,this.mapOpts.annotation)));let u=JW(o,e);return this.memoizedPaths.set(e,u),u}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(e=>{if(e.source&&e.source.input.map){let r=e.source.input.map;this.previousMaps.includes(r)||this.previousMaps.push(r)}});else{let e=new YDe(this.originalCSS,this.opts);e.map&&this.previousMaps.push(e.map)}return this.previousMaps}setSourcesContent(){let e={};if(this.root)this.root.walk(r=>{if(r.source){let o=r.source.input.from;if(o&&!e[o]){e[o]=!0;let u=this.usesFileUrls?this.toFileUrl(o):this.toUrl(this.path(o));this.map.setSourceContent(u,r.source.input.css)}}});else if(this.css){let r=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(r,this.css)}}sourcePath(e){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(e.source.input.from):this.toUrl(this.path(e.source.input.from))}toBase64(e){return Buffer?Buffer.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}toFileUrl(e){let r=this.memoizedFileURLs.get(e);if(r)return r;if(i$){let o=i$(e).toString();return this.memoizedFileURLs.set(e,o),o}else throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(e){let r=this.memoizedURLs.get(e);if(r)return r;eZ==="\\"&&(e=e.replace(/\\/g,"/"));let o=encodeURI(e).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(e,o),o}};var tZ=ePe;let tPe=AS,eO=class extends tPe{constructor(e){super(e),this.type="comment"}};var PS=eO;eO.default=eO;let{isClean:rZ,my:nZ}=RB,iZ=ES,oZ=PS,rPe=AS,aZ,Pk,Mk,sZ;function lZ(t){return t.map(e=>(e.nodes&&(e.nodes=lZ(e.nodes)),delete e.source,e))}function uZ(t){if(t[rZ]=!1,t.proxyOf.nodes)for(let e of t.proxyOf.nodes)uZ(e)}let wh=class cZ extends rPe{append(...e){for(let r of e){let o=this.normalize(r,this.last);for(let u of o)this.proxyOf.nodes.push(u)}return this.markDirty(),this}cleanRaws(e){if(super.cleanRaws(e),this.nodes)for(let r of this.nodes)r.cleanRaws(e)}each(e){if(!this.proxyOf.nodes)return;let r=this.getIterator(),o,u;for(;this.indexes[r]<this.proxyOf.nodes.length&&(o=this.indexes[r],u=e(this.proxyOf.nodes[o],o),u!==!1);)this.indexes[r]+=1;return delete this.indexes[r],u}every(e){return this.nodes.every(e)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let e=this.lastEach;return this.indexes[e]=0,e}getProxyProcessor(){return{get(e,r){return r==="proxyOf"?e:e[r]?r==="each"||typeof r=="string"&&r.startsWith("walk")?(...o)=>e[r](...o.map(u=>typeof u=="function"?(f,p)=>u(f.toProxy(),p):u)):r==="every"||r==="some"?o=>e[r]((u,...f)=>o(u.toProxy(),...f)):r==="root"?()=>e.root().toProxy():r==="nodes"?e.nodes.map(o=>o.toProxy()):r==="first"||r==="last"?e[r].toProxy():e[r]:e[r]},set(e,r,o){return e[r]===o||(e[r]=o,(r==="name"||r==="params"||r==="selector")&&e.markDirty()),!0}}}index(e){return typeof e=="number"?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}insertAfter(e,r){let o=this.index(e),u=this.normalize(r,this.proxyOf.nodes[o]).reverse();o=this.index(e);for(let p of u)this.proxyOf.nodes.splice(o+1,0,p);let f;for(let p in this.indexes)f=this.indexes[p],o<f&&(this.indexes[p]=f+u.length);return this.markDirty(),this}insertBefore(e,r){let o=this.index(e),u=o===0?"prepend":!1,f=this.normalize(r,this.proxyOf.nodes[o],u).reverse();o=this.index(e);for(let x of f)this.proxyOf.nodes.splice(o,0,x);let p;for(let x in this.indexes)p=this.indexes[x],o<=p&&(this.indexes[x]=p+f.length);return this.markDirty(),this}normalize(e,r){if(typeof e=="string")e=lZ(aZ(e).nodes);else if(typeof e>"u")e=[];else if(Array.isArray(e)){e=e.slice(0);for(let u of e)u.parent&&u.parent.removeChild(u,"ignore")}else if(e.type==="root"&&this.type!=="document"){e=e.nodes.slice(0);for(let u of e)u.parent&&u.parent.removeChild(u,"ignore")}else if(e.type)e=[e];else if(e.prop){if(typeof e.value>"u")throw new Error("Value field is missed in node creation");typeof e.value!="string"&&(e.value=String(e.value)),e=[new iZ(e)]}else if(e.selector)e=[new Pk(e)];else if(e.name)e=[new Mk(e)];else if(e.text)e=[new oZ(e)];else throw new Error("Unknown node type in node creation");return e.map(u=>(u[nZ]||cZ.rebuild(u),u=u.proxyOf,u.parent&&u.parent.removeChild(u),u[rZ]&&uZ(u),typeof u.raws.before>"u"&&r&&typeof r.raws.before<"u"&&(u.raws.before=r.raws.before.replace(/\S/g,"")),u.parent=this.proxyOf,u))}prepend(...e){e=e.reverse();for(let r of e){let o=this.normalize(r,this.first,"prepend").reverse();for(let u of o)this.proxyOf.nodes.unshift(u);for(let u in this.indexes)this.indexes[u]=this.indexes[u]+o.length}return this.markDirty(),this}push(e){return e.parent=this,this.proxyOf.nodes.push(e),this}removeAll(){for(let e of this.proxyOf.nodes)e.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(e){e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1);let r;for(let o in this.indexes)r=this.indexes[o],r>=e&&(this.indexes[o]=r-1);return this.markDirty(),this}replaceValues(e,r,o){return o||(o=r,r={}),this.walkDecls(u=>{r.props&&!r.props.includes(u.prop)||r.fast&&!u.value.includes(r.fast)||(u.value=u.value.replace(e,o))}),this.markDirty(),this}some(e){return this.nodes.some(e)}walk(e){return this.each((r,o)=>{let u;try{u=e(r,o)}catch(f){throw r.addToError(f)}return u!==!1&&r.walk&&(u=r.walk(e)),u})}walkAtRules(e,r){return r?e instanceof RegExp?this.walk((o,u)=>{if(o.type==="atrule"&&e.test(o.name))return r(o,u)}):this.walk((o,u)=>{if(o.type==="atrule"&&o.name===e)return r(o,u)}):(r=e,this.walk((o,u)=>{if(o.type==="atrule")return r(o,u)}))}walkComments(e){return this.walk((r,o)=>{if(r.type==="comment")return e(r,o)})}walkDecls(e,r){return r?e instanceof RegExp?this.walk((o,u)=>{if(o.type==="decl"&&e.test(o.prop))return r(o,u)}):this.walk((o,u)=>{if(o.type==="decl"&&o.prop===e)return r(o,u)}):(r=e,this.walk((o,u)=>{if(o.type==="decl")return r(o,u)}))}walkRules(e,r){return r?e instanceof RegExp?this.walk((o,u)=>{if(o.type==="rule"&&e.test(o.selector))return r(o,u)}):this.walk((o,u)=>{if(o.type==="rule"&&o.selector===e)return r(o,u)}):(r=e,this.walk((o,u)=>{if(o.type==="rule")return r(o,u)}))}get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}};wh.registerParse=t=>{aZ=t};wh.registerRule=t=>{Pk=t};wh.registerAtRule=t=>{Mk=t};wh.registerRoot=t=>{sZ=t};var Qp=wh;wh.default=wh;wh.rebuild=t=>{t.type==="atrule"?Object.setPrototypeOf(t,Mk.prototype):t.type==="rule"?Object.setPrototypeOf(t,Pk.prototype):t.type==="decl"?Object.setPrototypeOf(t,iZ.prototype):t.type==="comment"?Object.setPrototypeOf(t,oZ.prototype):t.type==="root"&&Object.setPrototypeOf(t,sZ.prototype),t[nZ]=!0,t.nodes&&t.nodes.forEach(e=>{wh.rebuild(e)})};let nPe=Qp,hZ,fZ,uB=class extends nPe{constructor(e){super({type:"document",...e}),this.nodes||(this.nodes=[])}toResult(e={}){return new hZ(new fZ,this,e).stringify()}};uB.registerLazyResult=t=>{hZ=t};uB.registerProcessor=t=>{fZ=t};var Ik=uB;uB.default=uB;let tO=class{constructor(e,r={}){if(this.type="warning",this.text=e,r.node&&r.node.source){let o=r.node.rangeBy(r);this.line=o.start.line,this.column=o.start.column,this.endLine=o.end.line,this.endColumn=o.end.column}for(let o in r)this[o]=r[o]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}};var dZ=tO;tO.default=tO;let iPe=dZ,rO=class{constructor(e,r,o){this.processor=e,this.messages=[],this.root=r,this.opts=o,this.css=void 0,this.map=void 0}toString(){return this.css}warn(e,r={}){r.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(r.plugin=this.lastPlugin.postcssPlugin);let o=new iPe(e,r);return this.messages.push(o),o}warnings(){return this.messages.filter(e=>e.type==="warning")}get content(){return this.css}};var Ok=rO;rO.default=rO;const FE=39,o$=34,ob=92,a$=47,ab=10,b0=32,sb=12,lb=9,ub=13,oPe=91,aPe=93,sPe=40,lPe=41,uPe=123,cPe=125,hPe=59,fPe=42,dPe=58,pPe=64,cb=/[\t\n\f\r "#'()/;[\\\]{}]/g,hb=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,mPe=/.[\r\n"'(/\\]/,s$=/[\da-f]/i;var gPe=function(e,r={}){let o=e.css.valueOf(),u=r.ignoreErrors,f,p,x,s,w,I,P,N,U,X,Q=o.length,J=0,Z=[],H=[];function K(){return J}function ee(Ae){throw e.error("Unclosed "+Ae,J)}function se(){return H.length===0&&J>=Q}function me(Ae){if(H.length)return H.pop();if(J>=Q)return;let De=Ae?Ae.ignoreUnclosed:!1;switch(f=o.charCodeAt(J),f){case ab:case b0:case lb:case ub:case sb:{p=J;do p+=1,f=o.charCodeAt(p);while(f===b0||f===ab||f===lb||f===ub||f===sb);X=["space",o.slice(J,p)],J=p-1;break}case oPe:case aPe:case uPe:case cPe:case dPe:case hPe:case lPe:{let qe=String.fromCharCode(f);X=[qe,qe,J];break}case sPe:{if(N=Z.length?Z.pop()[1]:"",U=o.charCodeAt(J+1),N==="url"&&U!==FE&&U!==o$&&U!==b0&&U!==ab&&U!==lb&&U!==sb&&U!==ub){p=J;do{if(I=!1,p=o.indexOf(")",p+1),p===-1)if(u||De){p=J;break}else ee("bracket");for(P=p;o.charCodeAt(P-1)===ob;)P-=1,I=!I}while(I);X=["brackets",o.slice(J,p+1),J,p],J=p}else p=o.indexOf(")",J+1),s=o.slice(J,p+1),p===-1||mPe.test(s)?X=["(","(",J]:(X=["brackets",s,J,p],J=p);break}case FE:case o$:{x=f===FE?"'":'"',p=J;do{if(I=!1,p=o.indexOf(x,p+1),p===-1)if(u||De){p=J+1;break}else ee("string");for(P=p;o.charCodeAt(P-1)===ob;)P-=1,I=!I}while(I);X=["string",o.slice(J,p+1),J,p],J=p;break}case pPe:{cb.lastIndex=J+1,cb.test(o),cb.lastIndex===0?p=o.length-1:p=cb.lastIndex-2,X=["at-word",o.slice(J,p+1),J,p],J=p;break}case ob:{for(p=J,w=!0;o.charCodeAt(p+1)===ob;)p+=1,w=!w;if(f=o.charCodeAt(p+1),w&&f!==a$&&f!==b0&&f!==ab&&f!==lb&&f!==ub&&f!==sb&&(p+=1,s$.test(o.charAt(p)))){for(;s$.test(o.charAt(p+1));)p+=1;o.charCodeAt(p+1)===b0&&(p+=1)}X=["word",o.slice(J,p+1),J,p],J=p;break}default:{f===a$&&o.charCodeAt(J+1)===fPe?(p=o.indexOf("*/",J+2)+1,p===0&&(u||De?p=o.length:ee("comment")),X=["comment",o.slice(J,p+1),J,p],J=p):(hb.lastIndex=J+1,hb.test(o),hb.lastIndex===0?p=o.length-1:p=hb.lastIndex-2,X=["word",o.slice(J,p+1),J,p],Z.push(X),J=p);break}}return J++,X}function Ce(Ae){H.push(Ae)}return{back:Ce,endOfFile:se,nextToken:me,position:K}};let pZ=Qp,dw=class extends pZ{constructor(e){super(e),this.type="atrule"}append(...e){return this.proxyOf.nodes||(this.nodes=[]),super.append(...e)}prepend(...e){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...e)}};var kk=dw;dw.default=dw;pZ.registerAtRule(dw);let mZ=Qp,gZ,_Z,f_=class extends mZ{constructor(e){super(e),this.type="root",this.nodes||(this.nodes=[])}normalize(e,r,o){let u=super.normalize(e);if(r){if(o==="prepend")this.nodes.length>1?r.raws.before=this.nodes[1].raws.before:delete r.raws.before;else if(this.first!==r)for(let f of u)f.raws.before=r.raws.before}return u}removeChild(e,r){let o=this.index(e);return!r&&o===0&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[o].raws.before),super.removeChild(e)}toResult(e={}){return new gZ(new _Z,this,e).stringify()}};f_.registerLazyResult=t=>{gZ=t};f_.registerProcessor=t=>{_Z=t};var zB=f_;f_.default=f_;mZ.registerRoot(f_);let cB={comma(t){return cB.split(t,[","],!0)},space(t){let e=[" ",`
`,"	"];return cB.split(t,e)},split(t,e,r){let o=[],u="",f=!1,p=0,x=!1,s="",w=!1;for(let I of t)w?w=!1:I==="\\"?w=!0:x?I===s&&(x=!1):I==='"'||I==="'"?(x=!0,s=I):I==="("?p+=1:I===")"?p>0&&(p-=1):p===0&&e.includes(I)&&(f=!0),f?(u!==""&&o.push(u.trim()),u="",f=!1):u+=I;return(r||u!=="")&&o.push(u.trim()),o}};var yZ=cB;cB.default=cB;let vZ=Qp,_Pe=yZ,pw=class extends vZ{constructor(e){super(e),this.type="rule",this.nodes||(this.nodes=[])}get selectors(){return _Pe.comma(this.selector)}set selectors(e){let r=this.selector?this.selector.match(/,\s*/):null,o=r?r[0]:","+this.raw("between","beforeOpen");this.selector=e.join(o)}};var Lk=pw;pw.default=pw;vZ.registerRule(pw);let yPe=ES,vPe=gPe,BPe=PS,xPe=kk,bPe=zB,l$=Lk;const u$={empty:!0,space:!0};function CPe(t){for(let e=t.length-1;e>=0;e--){let r=t[e],o=r[3]||r[2];if(o)return o}}let wPe=class{constructor(e){this.input=e,this.root=new bPe,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:e,start:{column:1,line:1,offset:0}}}atrule(e){let r=new xPe;r.name=e[1].slice(1),r.name===""&&this.unnamedAtrule(r,e),this.init(r,e[2]);let o,u,f,p=!1,x=!1,s=[],w=[];for(;!this.tokenizer.endOfFile();){if(e=this.tokenizer.nextToken(),o=e[0],o==="("||o==="["?w.push(o==="("?")":"]"):o==="{"&&w.length>0?w.push("}"):o===w[w.length-1]&&w.pop(),w.length===0)if(o===";"){r.source.end=this.getPosition(e[2]),r.source.end.offset++,this.semicolon=!0;break}else if(o==="{"){x=!0;break}else if(o==="}"){if(s.length>0){for(f=s.length-1,u=s[f];u&&u[0]==="space";)u=s[--f];u&&(r.source.end=this.getPosition(u[3]||u[2]),r.source.end.offset++)}this.end(e);break}else s.push(e);else s.push(e);if(this.tokenizer.endOfFile()){p=!0;break}}r.raws.between=this.spacesAndCommentsFromEnd(s),s.length?(r.raws.afterName=this.spacesAndCommentsFromStart(s),this.raw(r,"params",s),p&&(e=s[s.length-1],r.source.end=this.getPosition(e[3]||e[2]),r.source.end.offset++,this.spaces=r.raws.between,r.raws.between="")):(r.raws.afterName="",r.params=""),x&&(r.nodes=[],this.current=r)}checkMissedSemicolon(e){let r=this.colon(e);if(r===!1)return;let o=0,u;for(let f=r-1;f>=0&&(u=e[f],!(u[0]!=="space"&&(o+=1,o===2)));f--);throw this.input.error("Missed semicolon",u[0]==="word"?u[3]+1:u[2])}colon(e){let r=0,o,u,f;for(let[p,x]of e.entries()){if(o=x,u=o[0],u==="("&&(r+=1),u===")"&&(r-=1),r===0&&u===":")if(!f)this.doubleColon(o);else{if(f[0]==="word"&&f[1]==="progid")continue;return p}f=o}return!1}comment(e){let r=new BPe;this.init(r,e[2]),r.source.end=this.getPosition(e[3]||e[2]),r.source.end.offset++;let o=e[1].slice(2,-2);if(/^\s*$/.test(o))r.text="",r.raws.left=o,r.raws.right="";else{let u=o.match(/^(\s*)([^]*\S)(\s*)$/);r.text=u[2],r.raws.left=u[1],r.raws.right=u[3]}}createTokenizer(){this.tokenizer=vPe(this.input)}decl(e,r){let o=new yPe;this.init(o,e[0][2]);let u=e[e.length-1];for(u[0]===";"&&(this.semicolon=!0,e.pop()),o.source.end=this.getPosition(u[3]||u[2]||CPe(e)),o.source.end.offset++;e[0][0]!=="word";)e.length===1&&this.unknownWord(e),o.raws.before+=e.shift()[1];for(o.source.start=this.getPosition(e[0][2]),o.prop="";e.length;){let w=e[0][0];if(w===":"||w==="space"||w==="comment")break;o.prop+=e.shift()[1]}o.raws.between="";let f;for(;e.length;)if(f=e.shift(),f[0]===":"){o.raws.between+=f[1];break}else f[0]==="word"&&/\w/.test(f[1])&&this.unknownWord([f]),o.raws.between+=f[1];(o.prop[0]==="_"||o.prop[0]==="*")&&(o.raws.before+=o.prop[0],o.prop=o.prop.slice(1));let p=[],x;for(;e.length&&(x=e[0][0],!(x!=="space"&&x!=="comment"));)p.push(e.shift());this.precheckMissedSemicolon(e);for(let w=e.length-1;w>=0;w--){if(f=e[w],f[1].toLowerCase()==="!important"){o.important=!0;let I=this.stringFrom(e,w);I=this.spacesFromEnd(e)+I,I!==" !important"&&(o.raws.important=I);break}else if(f[1].toLowerCase()==="important"){let I=e.slice(0),P="";for(let N=w;N>0;N--){let U=I[N][0];if(P.trim().indexOf("!")===0&&U!=="space")break;P=I.pop()[1]+P}P.trim().indexOf("!")===0&&(o.important=!0,o.raws.important=P,e=I)}if(f[0]!=="space"&&f[0]!=="comment")break}e.some(w=>w[0]!=="space"&&w[0]!=="comment")&&(o.raws.between+=p.map(w=>w[1]).join(""),p=[]),this.raw(o,"value",p.concat(e),r),o.value.includes(":")&&!r&&this.checkMissedSemicolon(e)}doubleColon(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}emptyRule(e){let r=new l$;this.init(r,e[2]),r.selector="",r.raws.between="",this.current=r}end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){let r=this.current.nodes[this.current.nodes.length-1];r&&r.type==="rule"&&!r.raws.ownSemicolon&&(r.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(e){let r=this.input.fromOffset(e);return{column:r.col,line:r.line,offset:e}}init(e,r){this.current.push(e),e.source={input:this.input,start:this.getPosition(r)},e.raws.before=this.spaces,this.spaces="",e.type!=="comment"&&(this.semicolon=!1)}other(e){let r=!1,o=null,u=!1,f=null,p=[],x=e[1].startsWith("--"),s=[],w=e;for(;w;){if(o=w[0],s.push(w),o==="("||o==="[")f||(f=w),p.push(o==="("?")":"]");else if(x&&u&&o==="{")f||(f=w),p.push("}");else if(p.length===0)if(o===";")if(u){this.decl(s,x);return}else break;else if(o==="{"){this.rule(s);return}else if(o==="}"){this.tokenizer.back(s.pop()),r=!0;break}else o===":"&&(u=!0);else o===p[p.length-1]&&(p.pop(),p.length===0&&(f=null));w=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(r=!0),p.length>0&&this.unclosedBracket(f),r&&u){if(!x)for(;s.length&&(w=s[s.length-1][0],!(w!=="space"&&w!=="comment"));)this.tokenizer.back(s.pop());this.decl(s,x)}else this.unknownWord(s)}parse(){let e;for(;!this.tokenizer.endOfFile();)switch(e=this.tokenizer.nextToken(),e[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e);break}this.endFile()}precheckMissedSemicolon(){}raw(e,r,o,u){let f,p,x=o.length,s="",w=!0,I,P;for(let N=0;N<x;N+=1)f=o[N],p=f[0],p==="space"&&N===x-1&&!u?w=!1:p==="comment"?(P=o[N-1]?o[N-1][0]:"empty",I=o[N+1]?o[N+1][0]:"empty",!u$[P]&&!u$[I]?s.slice(-1)===","?w=!1:s+=f[1]:w=!1):s+=f[1];if(!w){let N=o.reduce((U,X)=>U+X[1],"");e.raws[r]={raw:N,value:s}}e[r]=s}rule(e){e.pop();let r=new l$;this.init(r,e[0][2]),r.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(r,"selector",e),this.current=r}spacesAndCommentsFromEnd(e){let r,o="";for(;e.length&&(r=e[e.length-1][0],!(r!=="space"&&r!=="comment"));)o=e.pop()[1]+o;return o}spacesAndCommentsFromStart(e){let r,o="";for(;e.length&&(r=e[0][0],!(r!=="space"&&r!=="comment"));)o+=e.shift()[1];return o}spacesFromEnd(e){let r,o="";for(;e.length&&(r=e[e.length-1][0],r==="space");)o=e.pop()[1]+o;return o}stringFrom(e,r){let o="";for(let u=r;u<e.length;u++)o+=e[u][1];return e.splice(r,e.length-r),o}unclosedBlock(){let e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}unclosedBracket(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}unexpectedClose(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}unknownWord(e){throw this.input.error("Unknown word",{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}unnamedAtrule(e,r){throw this.input.error("At-rule without name",{offset:r[2]},{offset:r[2]+r[1].length})}};var SPe=wPe;let TPe=Qp,APe=SPe,EPe=DS;function mw(t,e){let r=new EPe(t,e),o=new APe(r);try{o.parse()}catch(u){throw u}return o.root}var Rk=mw;mw.default=mw;TPe.registerParse(mw);let{isClean:hc,my:DPe}=RB,PPe=tZ,MPe=TS,IPe=Qp,OPe=Ik,c$=Ok,kPe=Rk,LPe=zB;const RPe={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},zPe={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},NPe={Once:!0,postcssPlugin:!0,prepare:!0},d_=0;function C0(t){return typeof t=="object"&&typeof t.then=="function"}function BZ(t){let e=!1,r=RPe[t.type];return t.type==="decl"?e=t.prop.toLowerCase():t.type==="atrule"&&(e=t.name.toLowerCase()),e&&t.append?[r,r+"-"+e,d_,r+"Exit",r+"Exit-"+e]:e?[r,r+"-"+e,r+"Exit",r+"Exit-"+e]:t.append?[r,d_,r+"Exit"]:[r,r+"Exit"]}function h$(t){let e;return t.type==="document"?e=["Document",d_,"DocumentExit"]:t.type==="root"?e=["Root",d_,"RootExit"]:e=BZ(t),{eventIndex:0,events:e,iterator:0,node:t,visitorIndex:0,visitors:[]}}function nO(t){return t[hc]=!1,t.nodes&&t.nodes.forEach(e=>nO(e)),t}let iO={},p_=class xZ{constructor(e,r,o){this.stringified=!1,this.processed=!1;let u;if(typeof r=="object"&&r!==null&&(r.type==="root"||r.type==="document"))u=nO(r);else if(r instanceof xZ||r instanceof c$)u=nO(r.root),r.map&&(typeof o.map>"u"&&(o.map={}),o.map.inline||(o.map.inline=!1),o.map.prev=r.map);else{let f=kPe;o.syntax&&(f=o.syntax.parse),o.parser&&(f=o.parser),f.parse&&(f=f.parse);try{u=f(r,o)}catch(p){this.processed=!0,this.error=p}u&&!u[DPe]&&IPe.rebuild(u)}this.result=new c$(e,u,o),this.helpers={...iO,postcss:iO,result:this.result},this.plugins=this.processor.plugins.map(f=>typeof f=="object"&&f.prepare?{...f,...f.prepare(this.result)}:f)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(e,r){let o=this.result.lastPlugin;try{r&&r.addToError(e),this.error=e,e.name==="CssSyntaxError"&&!e.plugin?(e.plugin=o.postcssPlugin,e.setMessage()):o.postcssVersion}catch(u){console&&console.error&&console.error(u)}return e}prepareVisitors(){this.listeners={};let e=(r,o,u)=>{this.listeners[o]||(this.listeners[o]=[]),this.listeners[o].push([r,u])};for(let r of this.plugins)if(typeof r=="object")for(let o in r){if(!zPe[o]&&/^[A-Z]/.test(o))throw new Error(`Unknown event ${o} in ${r.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!NPe[o])if(typeof r[o]=="object")for(let u in r[o])u==="*"?e(r,o,r[o][u]):e(r,o+"-"+u.toLowerCase(),r[o][u]);else typeof r[o]=="function"&&e(r,o,r[o])}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let e=0;e<this.plugins.length;e++){let r=this.plugins[e],o=this.runOnRoot(r);if(C0(o))try{await o}catch(u){throw this.handleError(u)}}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[hc];){e[hc]=!0;let r=[h$(e)];for(;r.length>0;){let o=this.visitTick(r);if(C0(o))try{await o}catch(u){let f=r[r.length-1].node;throw this.handleError(u,f)}}}if(this.listeners.OnceExit)for(let[r,o]of this.listeners.OnceExit){this.result.lastPlugin=r;try{if(e.type==="document"){let u=e.nodes.map(f=>o(f,this.helpers));await Promise.all(u)}else await o(e,this.helpers)}catch(u){throw this.handleError(u)}}}return this.processed=!0,this.stringify()}runOnRoot(e){this.result.lastPlugin=e;try{if(typeof e=="object"&&e.Once){if(this.result.root.type==="document"){let r=this.result.root.nodes.map(o=>e.Once(o,this.helpers));return C0(r[0])?Promise.all(r):r}return e.Once(this.result.root,this.helpers)}else if(typeof e=="function")return e(this.result.root,this.result)}catch(r){throw this.handleError(r)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let e=this.result.opts,r=MPe;e.syntax&&(r=e.syntax.stringify),e.stringifier&&(r=e.stringifier),r.stringify&&(r=r.stringify);let u=new PPe(r,this.result.root,this.result.opts).generate();return this.result.css=u[0],this.result.map=u[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let e of this.plugins){let r=this.runOnRoot(e);if(C0(r))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[hc];)e[hc]=!0,this.walkSync(e);if(this.listeners.OnceExit)if(e.type==="document")for(let r of e.nodes)this.visitSync(this.listeners.OnceExit,r);else this.visitSync(this.listeners.OnceExit,e)}return this.result}then(e,r){return this.async().then(e,r)}toString(){return this.css}visitSync(e,r){for(let[o,u]of e){this.result.lastPlugin=o;let f;try{f=u(r,this.helpers)}catch(p){throw this.handleError(p,r.proxyOf)}if(r.type!=="root"&&r.type!=="document"&&!r.parent)return!0;if(C0(f))throw this.getAsyncError()}}visitTick(e){let r=e[e.length-1],{node:o,visitors:u}=r;if(o.type!=="root"&&o.type!=="document"&&!o.parent){e.pop();return}if(u.length>0&&r.visitorIndex<u.length){let[p,x]=u[r.visitorIndex];r.visitorIndex+=1,r.visitorIndex===u.length&&(r.visitors=[],r.visitorIndex=0),this.result.lastPlugin=p;try{return x(o.toProxy(),this.helpers)}catch(s){throw this.handleError(s,o)}}if(r.iterator!==0){let p=r.iterator,x;for(;x=o.nodes[o.indexes[p]];)if(o.indexes[p]+=1,!x[hc]){x[hc]=!0,e.push(h$(x));return}r.iterator=0,delete o.indexes[p]}let f=r.events;for(;r.eventIndex<f.length;){let p=f[r.eventIndex];if(r.eventIndex+=1,p===d_){o.nodes&&o.nodes.length&&(o[hc]=!0,r.iterator=o.getIterator());return}else if(this.listeners[p]){r.visitors=this.listeners[p];return}}e.pop()}walkSync(e){e[hc]=!0;let r=BZ(e);for(let o of r)if(o===d_)e.nodes&&e.each(u=>{u[hc]||this.walkSync(u)});else{let u=this.listeners[o];if(u&&this.visitSync(u,e.toProxy()))return}}warnings(){return this.sync().warnings()}get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}};p_.registerPostcss=t=>{iO=t};var bZ=p_;p_.default=p_;LPe.registerLazyResult(p_);OPe.registerLazyResult(p_);let FPe=tZ,jPe=TS,$Pe=Rk;const UPe=Ok;let oO=class{constructor(e,r,o){r=r.toString(),this.stringified=!1,this._processor=e,this._css=r,this._opts=o,this._map=void 0;let u,f=jPe;this.result=new UPe(this._processor,u,this._opts),this.result.css=r;let p=this;Object.defineProperty(this.result,"root",{get(){return p.root}});let x=new FPe(f,u,this._opts,r);if(x.isMap()){let[s,w]=x.generate();s&&(this.result.css=s),w&&(this.result.map=w)}else x.clearAnnotation(),this.result.css=x.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}sync(){if(this.error)throw this.error;return this.result}then(e,r){return this.async().then(e,r)}toString(){return this._css}warnings(){return[]}get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let e,r=$Pe;try{e=r(this._css,this._opts)}catch(o){this.error=o}if(this.error)throw this.error;return this._root=e,e}get[Symbol.toStringTag](){return"NoWorkResult"}};var VPe=oO;oO.default=oO;let GPe=VPe,HPe=bZ,WPe=Ik,ZPe=zB,hB=class{constructor(e=[]){this.version="8.4.38",this.plugins=this.normalize(e)}normalize(e){let r=[];for(let o of e)if(o.postcss===!0?o=o():o.postcss&&(o=o.postcss),typeof o=="object"&&Array.isArray(o.plugins))r=r.concat(o.plugins);else if(typeof o=="object"&&o.postcssPlugin)r.push(o);else if(typeof o=="function")r.push(o);else if(!(typeof o=="object"&&(o.parse||o.stringify)))throw new Error(o+" is not a PostCSS plugin");return r}process(e,r={}){return!this.plugins.length&&!r.parser&&!r.stringifier&&!r.syntax?new GPe(this,e,r):new HPe(this,e,r)}use(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}};var qPe=hB;hB.default=hB;ZPe.registerProcessor(hB);WPe.registerProcessor(hB);let KPe=ES,XPe=XW,YPe=PS,JPe=kk,QPe=DS,eMe=zB,tMe=Lk;function fB(t,e){if(Array.isArray(t))return t.map(u=>fB(u));let{inputs:r,...o}=t;if(r){e=[];for(let u of r){let f={...u,__proto__:QPe.prototype};f.map&&(f.map={...f.map,__proto__:XPe.prototype}),e.push(f)}}if(o.nodes&&(o.nodes=t.nodes.map(u=>fB(u,e))),o.source){let{inputId:u,...f}=o.source;o.source=f,u!=null&&(o.source.input=e[u])}if(o.type==="root")return new eMe(o);if(o.type==="decl")return new KPe(o);if(o.type==="rule")return new tMe(o);if(o.type==="comment")return new YPe(o);if(o.type==="atrule")return new JPe(o);throw new Error("Unknown node type: "+t.type)}var rMe=fB;fB.default=fB;var f$={};let nMe=Dk,CZ=ES,iMe=bZ,oMe=Qp,zk=qPe,aMe=TS,sMe=rMe,wZ=Ik,lMe=dZ,SZ=PS,TZ=kk,uMe=Ok,cMe=DS,hMe=Rk,fMe=yZ,AZ=Lk,EZ=zB,dMe=AS;function Ci(...t){return t.length===1&&Array.isArray(t[0])&&(t=t[0]),new zk(t)}Ci.plugin=function(e,r){let o=!1;function u(...p){console&&console.warn&&!o&&(o=!0,console.warn(e+`: postcss.plugin was deprecated. Migration guide:
https://evilmartians.com/chronicles/postcss-8-plugin-migration`),f$.LANG&&f$.LANG.startsWith("cn")&&console.warn(e+`:  postcss.plugin . :
https://www.w3ctech.com/topic/2226`));let x=r(...p);return x.postcssPlugin=e,x.postcssVersion=new zk().version,x}let f;return Object.defineProperty(u,"postcss",{get(){return f||(f=u()),f}}),u.process=function(p,x,s){return Ci([u(s)]).process(p,x)},u};Ci.stringify=aMe;Ci.parse=hMe;Ci.fromJSON=sMe;Ci.list=fMe;Ci.comment=t=>new SZ(t);Ci.atRule=t=>new TZ(t);Ci.decl=t=>new CZ(t);Ci.rule=t=>new AZ(t);Ci.root=t=>new EZ(t);Ci.document=t=>new wZ(t);Ci.CssSyntaxError=nMe;Ci.Declaration=CZ;Ci.Container=oMe;Ci.Processor=zk;Ci.Document=wZ;Ci.Comment=SZ;Ci.Warning=lMe;Ci.AtRule=TZ;Ci.Result=uMe;Ci.Input=cMe;Ci.Rule=AZ;Ci.Root=EZ;Ci.Node=dMe;iMe.registerPostcss(Ci);var pMe=Ci;Ci.default=Ci;const Ji=wi(pMe),mMe=Ji.stringify,gMe=Ji.fromJSON,_Me=Ji.plugin,yMe=Ji.parse,vMe=Ji.list,BMe=Ji.document,xMe=Ji.comment,bMe=Ji.atRule,CMe=Ji.rule,wMe=Ji.decl,SMe=Ji.root,TMe=Ji.CssSyntaxError,AMe=Ji.Declaration,EMe=Ji.Container,DMe=Ji.Processor,PMe=Ji.Document,MMe=Ji.Comment,IMe=Ji.Warning,OMe=Ji.AtRule,kMe=Ji.Result,LMe=Ji.Input,RMe=Ji.Rule,zMe=Ji.Root,NMe=Ji.Node,FMe=Object.freeze(Object.defineProperty({__proto__:null,AtRule:OMe,Comment:MMe,Container:EMe,CssSyntaxError:TMe,Declaration:AMe,Document:PMe,Input:LMe,Node:NMe,Processor:DMe,Result:kMe,Root:zMe,Rule:RMe,Warning:IMe,atRule:bMe,comment:xMe,decl:wMe,default:Ji,document:BMe,fromJSON:gMe,list:vMe,parse:yMe,plugin:_Me,root:SMe,rule:CMe,stringify:mMe},Symbol.toStringTag,{value:"Module"})),jMe=Te.forwardRef(function(e){const r=Te.useRef(null);return Te.useEffect(()=>{r.current.showModal(),window.addEventListener("keydown",o=>{o.key==="Escape"&&o.preventDefault()})},[]),Ie.jsx(Ie.Fragment,{children:Ie.jsxs("dialog",{ref:r,id:"dialog",className:"col al-ctr",children:[Ie.jsxs("div",{className:"model-header col al-ctr gp-16",children:[Ie.jsx("div",{className:"modal-icon row",children:Ie.jsx("span",{className:"material-symbols-rounded modal-warning-icon",children:"wrong_location"})}),Ie.jsx("div",{className:"modal-header title-large",children:"No well selected"}),Ie.jsx("div",{className:"modal-content row",children:Ie.jsx("p",{className:"body-large",children:"Currently no well is selected. Please select a well from the map to view the metrics."})})]}),Ie.jsx("md-divider",{}),Ie.jsxs("div",{className:"model-footer row",children:[Ie.jsx(yM,{to:"/",className:"link",children:Ie.jsxs("div",{className:"button row fw al-ctr jc-ctr gp-12 go-home",children:[Ie.jsx("md-ripple",{}),Ie.jsx("span",{className:"material-symbols-rounded",children:"home"})]})}),Ie.jsx(yM,{to:"/map",className:"link",children:Ie.jsxs("div",{className:"button row fw al-ctr jc-ctr gp-12 go-map",children:[Ie.jsx("md-ripple",{}),Ie.jsx("span",{className:"material-symbols-rounded",children:"map"}),"Select a location"]})})]})]})})});function $Me(){try{const t=Zp().state.well_code,[e,r]=Te.useState([]),[o,u]=Te.useContext(wB);return Te.useEffect(()=>{const f=new AbortController,p=f.signal;return fetch(`http://54.206.117.183:8888/chchWater/${t.replace("/","_")}`,{method:"GET",mode:"cors",signal:p}).then(x=>x.json()).then(x=>{const s=x[0],w=[];Object.entries(s).forEach(([I,P])=>{I!=="sample_id"&&I!=="date_recorded"&&I!=="well_id"&&w.push({name:I,value:P,selected:!1})}),r(w)}).catch(x=>console.log(x)),()=>{f.abort()}},[t]),Ie.jsx("div",{className:"body-container statsPage col gp-16",children:Ie.jsxs(Ie.Fragment,{children:[Ie.jsx("div",{className:"name-ribbon col"}),Ie.jsxs("div",{className:"re-stats-container",children:[Ie.jsx("div",{className:"left re-table col",children:Ie.jsx(ADe,{wellData:e,setWellData:r})}),Ie.jsxs("div",{className:"right col",children:[Ie.jsxs("div",{className:"re-stats row flx-wrp",children:[Ie.jsx(EDe,{metrics:e.length}),Ie.jsx(DDe,{}),Ie.jsx(PDe,{})]}),Ie.jsx("div",{className:"re-graph",children:Ie.jsx(SDe,{})})]})]})]})})}catch{return Ie.jsx(jMe,{})}}const UMe=[{name:"nodejs",version:"0.2.0",date:"2011-08-26",lts:!1,security:!1,v8:"2.3.8.0"},{name:"nodejs",version:"0.3.0",date:"2011-08-26",lts:!1,security:!1,v8:"2.5.1.0"},{name:"nodejs",version:"0.4.0",date:"2011-08-26",lts:!1,security:!1,v8:"3.1.2.0"},{name:"nodejs",version:"0.5.0",date:"2011-08-26",lts:!1,security:!1,v8:"3.1.8.25"},{name:"nodejs",version:"0.6.0",date:"2011-11-04",lts:!1,security:!1,v8:"3.6.6.6"},{name:"nodejs",version:"0.7.0",date:"2012-01-17",lts:!1,security:!1,v8:"3.8.6.0"},{name:"nodejs",version:"0.8.0",date:"2012-06-22",lts:!1,security:!1,v8:"3.11.10.10"},{name:"nodejs",version:"0.9.0",date:"2012-07-20",lts:!1,security:!1,v8:"3.11.10.15"},{name:"nodejs",version:"0.10.0",date:"2013-03-11",lts:!1,security:!1,v8:"3.14.5.8"},{name:"nodejs",version:"0.11.0",date:"2013-03-28",lts:!1,security:!1,v8:"3.17.13.0"},{name:"nodejs",version:"0.12.0",date:"2015-02-06",lts:!1,security:!1,v8:"3.28.73.0"},{name:"nodejs",version:"4.0.0",date:"2015-09-08",lts:!1,security:!1,v8:"4.5.103.30"},{name:"nodejs",version:"4.1.0",date:"2015-09-17",lts:!1,security:!1,v8:"4.5.103.33"},{name:"nodejs",version:"4.2.0",date:"2015-10-12",lts:"Argon",security:!1,v8:"4.5.103.35"},{name:"nodejs",version:"4.3.0",date:"2016-02-09",lts:"Argon",security:!1,v8:"4.5.103.35"},{name:"nodejs",version:"4.4.0",date:"2016-03-08",lts:"Argon",security:!1,v8:"4.5.103.35"},{name:"nodejs",version:"4.5.0",date:"2016-08-16",lts:"Argon",security:!1,v8:"4.5.103.37"},{name:"nodejs",version:"4.6.0",date:"2016-09-27",lts:"Argon",security:!0,v8:"4.5.103.37"},{name:"nodejs",version:"4.7.0",date:"2016-12-06",lts:"Argon",security:!1,v8:"4.5.103.43"},{name:"nodejs",version:"4.8.0",date:"2017-02-21",lts:"Argon",security:!1,v8:"4.5.103.45"},{name:"nodejs",version:"4.9.0",date:"2018-03-28",lts:"Argon",security:!0,v8:"4.5.103.53"},{name:"nodejs",version:"5.0.0",date:"2015-10-29",lts:!1,security:!1,v8:"4.6.85.28"},{name:"nodejs",version:"5.1.0",date:"2015-11-17",lts:!1,security:!1,v8:"4.6.85.31"},{name:"nodejs",version:"5.2.0",date:"2015-12-09",lts:!1,security:!1,v8:"4.6.85.31"},{name:"nodejs",version:"5.3.0",date:"2015-12-15",lts:!1,security:!1,v8:"4.6.85.31"},{name:"nodejs",version:"5.4.0",date:"2016-01-06",lts:!1,security:!1,v8:"4.6.85.31"},{name:"nodejs",version:"5.5.0",date:"2016-01-21",lts:!1,security:!1,v8:"4.6.85.31"},{name:"nodejs",version:"5.6.0",date:"2016-02-09",lts:!1,security:!1,v8:"4.6.85.31"},{name:"nodejs",version:"5.7.0",date:"2016-02-23",lts:!1,security:!1,v8:"4.6.85.31"},{name:"nodejs",version:"5.8.0",date:"2016-03-09",lts:!1,security:!1,v8:"4.6.85.31"},{name:"nodejs",version:"5.9.0",date:"2016-03-16",lts:!1,security:!1,v8:"4.6.85.31"},{name:"nodejs",version:"5.10.0",date:"2016-04-01",lts:!1,security:!1,v8:"4.6.85.31"},{name:"nodejs",version:"5.11.0",date:"2016-04-21",lts:!1,security:!1,v8:"4.6.85.31"},{name:"nodejs",version:"5.12.0",date:"2016-06-23",lts:!1,security:!1,v8:"4.6.85.32"},{name:"nodejs",version:"6.0.0",date:"2016-04-26",lts:!1,security:!1,v8:"5.0.71.35"},{name:"nodejs",version:"6.1.0",date:"2016-05-05",lts:!1,security:!1,v8:"5.0.71.35"},{name:"nodejs",version:"6.2.0",date:"2016-05-17",lts:!1,security:!1,v8:"5.0.71.47"},{name:"nodejs",version:"6.3.0",date:"2016-07-06",lts:!1,security:!1,v8:"5.0.71.52"},{name:"nodejs",version:"6.4.0",date:"2016-08-12",lts:!1,security:!1,v8:"5.0.71.60"},{name:"nodejs",version:"6.5.0",date:"2016-08-26",lts:!1,security:!1,v8:"5.1.281.81"},{name:"nodejs",version:"6.6.0",date:"2016-09-14",lts:!1,security:!1,v8:"5.1.281.83"},{name:"nodejs",version:"6.7.0",date:"2016-09-27",lts:!1,security:!0,v8:"5.1.281.83"},{name:"nodejs",version:"6.8.0",date:"2016-10-12",lts:!1,security:!1,v8:"5.1.281.84"},{name:"nodejs",version:"6.9.0",date:"2016-10-18",lts:"Boron",security:!1,v8:"5.1.281.84"},{name:"nodejs",version:"6.10.0",date:"2017-02-21",lts:"Boron",security:!1,v8:"5.1.281.93"},{name:"nodejs",version:"6.11.0",date:"2017-06-06",lts:"Boron",security:!1,v8:"5.1.281.102"},{name:"nodejs",version:"6.12.0",date:"2017-11-06",lts:"Boron",security:!1,v8:"5.1.281.108"},{name:"nodejs",version:"6.13.0",date:"2018-02-10",lts:"Boron",security:!1,v8:"5.1.281.111"},{name:"nodejs",version:"6.14.0",date:"2018-03-28",lts:"Boron",security:!0,v8:"5.1.281.111"},{name:"nodejs",version:"6.15.0",date:"2018-11-27",lts:"Boron",security:!0,v8:"5.1.281.111"},{name:"nodejs",version:"6.16.0",date:"2018-12-26",lts:"Boron",security:!1,v8:"5.1.281.111"},{name:"nodejs",version:"6.17.0",date:"2019-02-28",lts:"Boron",security:!0,v8:"5.1.281.111"},{name:"nodejs",version:"7.0.0",date:"2016-10-25",lts:!1,security:!1,v8:"5.4.500.36"},{name:"nodejs",version:"7.1.0",date:"2016-11-08",lts:!1,security:!1,v8:"5.4.500.36"},{name:"nodejs",version:"7.2.0",date:"2016-11-22",lts:!1,security:!1,v8:"5.4.500.43"},{name:"nodejs",version:"7.3.0",date:"2016-12-20",lts:!1,security:!1,v8:"5.4.500.45"},{name:"nodejs",version:"7.4.0",date:"2017-01-04",lts:!1,security:!1,v8:"5.4.500.45"},{name:"nodejs",version:"7.5.0",date:"2017-01-31",lts:!1,security:!1,v8:"5.4.500.48"},{name:"nodejs",version:"7.6.0",date:"2017-02-21",lts:!1,security:!1,v8:"5.5.372.40"},{name:"nodejs",version:"7.7.0",date:"2017-02-28",lts:!1,security:!1,v8:"5.5.372.41"},{name:"nodejs",version:"7.8.0",date:"2017-03-29",lts:!1,security:!1,v8:"5.5.372.43"},{name:"nodejs",version:"7.9.0",date:"2017-04-11",lts:!1,security:!1,v8:"5.5.372.43"},{name:"nodejs",version:"7.10.0",date:"2017-05-02",lts:!1,security:!1,v8:"5.5.372.43"},{name:"nodejs",version:"8.0.0",date:"2017-05-30",lts:!1,security:!1,v8:"5.8.283.41"},{name:"nodejs",version:"8.1.0",date:"2017-06-08",lts:!1,security:!1,v8:"5.8.283.41"},{name:"nodejs",version:"8.2.0",date:"2017-07-19",lts:!1,security:!1,v8:"5.8.283.41"},{name:"nodejs",version:"8.3.0",date:"2017-08-08",lts:!1,security:!1,v8:"6.0.286.52"},{name:"nodejs",version:"8.4.0",date:"2017-08-15",lts:!1,security:!1,v8:"6.0.286.52"},{name:"nodejs",version:"8.5.0",date:"2017-09-12",lts:!1,security:!1,v8:"6.0.287.53"},{name:"nodejs",version:"8.6.0",date:"2017-09-26",lts:!1,security:!1,v8:"6.0.287.53"},{name:"nodejs",version:"8.7.0",date:"2017-10-11",lts:!1,security:!1,v8:"6.1.534.42"},{name:"nodejs",version:"8.8.0",date:"2017-10-24",lts:!1,security:!1,v8:"6.1.534.42"},{name:"nodejs",version:"8.9.0",date:"2017-10-31",lts:"Carbon",security:!1,v8:"6.1.534.46"},{name:"nodejs",version:"8.10.0",date:"2018-03-06",lts:"Carbon",security:!1,v8:"6.2.414.50"},{name:"nodejs",version:"8.11.0",date:"2018-03-28",lts:"Carbon",security:!0,v8:"6.2.414.50"},{name:"nodejs",version:"8.12.0",date:"2018-09-10",lts:"Carbon",security:!1,v8:"6.2.414.66"},{name:"nodejs",version:"8.13.0",date:"2018-11-20",lts:"Carbon",security:!1,v8:"6.2.414.72"},{name:"nodejs",version:"8.14.0",date:"2018-11-27",lts:"Carbon",security:!0,v8:"6.2.414.72"},{name:"nodejs",version:"8.15.0",date:"2018-12-26",lts:"Carbon",security:!1,v8:"6.2.414.75"},{name:"nodejs",version:"8.16.0",date:"2019-04-16",lts:"Carbon",security:!1,v8:"6.2.414.77"},{name:"nodejs",version:"8.17.0",date:"2019-12-17",lts:"Carbon",security:!0,v8:"6.2.414.78"},{name:"nodejs",version:"9.0.0",date:"2017-10-31",lts:!1,security:!1,v8:"6.2.414.32"},{name:"nodejs",version:"9.1.0",date:"2017-11-07",lts:!1,security:!1,v8:"6.2.414.32"},{name:"nodejs",version:"9.2.0",date:"2017-11-14",lts:!1,security:!1,v8:"6.2.414.44"},{name:"nodejs",version:"9.3.0",date:"2017-12-12",lts:!1,security:!1,v8:"6.2.414.46"},{name:"nodejs",version:"9.4.0",date:"2018-01-10",lts:!1,security:!1,v8:"6.2.414.46"},{name:"nodejs",version:"9.5.0",date:"2018-01-31",lts:!1,security:!1,v8:"6.2.414.46"},{name:"nodejs",version:"9.6.0",date:"2018-02-21",lts:!1,security:!1,v8:"6.2.414.46"},{name:"nodejs",version:"9.7.0",date:"2018-03-01",lts:!1,security:!1,v8:"6.2.414.46"},{name:"nodejs",version:"9.8.0",date:"2018-03-07",lts:!1,security:!1,v8:"6.2.414.46"},{name:"nodejs",version:"9.9.0",date:"2018-03-21",lts:!1,security:!1,v8:"6.2.414.46"},{name:"nodejs",version:"9.10.0",date:"2018-03-28",lts:!1,security:!0,v8:"6.2.414.46"},{name:"nodejs",version:"9.11.0",date:"2018-04-04",lts:!1,security:!1,v8:"6.2.414.46"},{name:"nodejs",version:"10.0.0",date:"2018-04-24",lts:!1,security:!1,v8:"6.6.346.24"},{name:"nodejs",version:"10.1.0",date:"2018-05-08",lts:!1,security:!1,v8:"6.6.346.27"},{name:"nodejs",version:"10.2.0",date:"2018-05-23",lts:!1,security:!1,v8:"6.6.346.32"},{name:"nodejs",version:"10.3.0",date:"2018-05-29",lts:!1,security:!1,v8:"6.6.346.32"},{name:"nodejs",version:"10.4.0",date:"2018-06-06",lts:!1,security:!1,v8:"6.7.288.43"},{name:"nodejs",version:"10.5.0",date:"2018-06-20",lts:!1,security:!1,v8:"6.7.288.46"},{name:"nodejs",version:"10.6.0",date:"2018-07-04",lts:!1,security:!1,v8:"6.7.288.46"},{name:"nodejs",version:"10.7.0",date:"2018-07-18",lts:!1,security:!1,v8:"6.7.288.49"},{name:"nodejs",version:"10.8.0",date:"2018-08-01",lts:!1,security:!1,v8:"6.7.288.49"},{name:"nodejs",version:"10.9.0",date:"2018-08-15",lts:!1,security:!1,v8:"6.8.275.24"},{name:"nodejs",version:"10.10.0",date:"2018-09-06",lts:!1,security:!1,v8:"6.8.275.30"},{name:"nodejs",version:"10.11.0",date:"2018-09-19",lts:!1,security:!1,v8:"6.8.275.32"},{name:"nodejs",version:"10.12.0",date:"2018-10-10",lts:!1,security:!1,v8:"6.8.275.32"},{name:"nodejs",version:"10.13.0",date:"2018-10-30",lts:"Dubnium",security:!1,v8:"6.8.275.32"},{name:"nodejs",version:"10.14.0",date:"2018-11-27",lts:"Dubnium",security:!0,v8:"6.8.275.32"},{name:"nodejs",version:"10.15.0",date:"2018-12-26",lts:"Dubnium",security:!1,v8:"6.8.275.32"},{name:"nodejs",version:"10.16.0",date:"2019-05-28",lts:"Dubnium",security:!1,v8:"6.8.275.32"},{name:"nodejs",version:"10.17.0",date:"2019-10-22",lts:"Dubnium",security:!1,v8:"6.8.275.32"},{name:"nodejs",version:"10.18.0",date:"2019-12-17",lts:"Dubnium",security:!0,v8:"6.8.275.32"},{name:"nodejs",version:"10.19.0",date:"2020-02-05",lts:"Dubnium",security:!0,v8:"6.8.275.32"},{name:"nodejs",version:"10.20.0",date:"2020-03-26",lts:"Dubnium",security:!1,v8:"6.8.275.32"},{name:"nodejs",version:"10.21.0",date:"2020-06-02",lts:"Dubnium",security:!0,v8:"6.8.275.32"},{name:"nodejs",version:"10.22.0",date:"2020-07-21",lts:"Dubnium",security:!1,v8:"6.8.275.32"},{name:"nodejs",version:"10.23.0",date:"2020-10-27",lts:"Dubnium",security:!1,v8:"6.8.275.32"},{name:"nodejs",version:"10.24.0",date:"2021-02-23",lts:"Dubnium",security:!0,v8:"6.8.275.32"},{name:"nodejs",version:"11.0.0",date:"2018-10-23",lts:!1,security:!1,v8:"7.0.276.28"},{name:"nodejs",version:"11.1.0",date:"2018-10-30",lts:!1,security:!1,v8:"7.0.276.32"},{name:"nodejs",version:"11.2.0",date:"2018-11-15",lts:!1,security:!1,v8:"7.0.276.38"},{name:"nodejs",version:"11.3.0",date:"2018-11-27",lts:!1,security:!0,v8:"7.0.276.38"},{name:"nodejs",version:"11.4.0",date:"2018-12-07",lts:!1,security:!1,v8:"7.0.276.38"},{name:"nodejs",version:"11.5.0",date:"2018-12-18",lts:!1,security:!1,v8:"7.0.276.38"},{name:"nodejs",version:"11.6.0",date:"2018-12-26",lts:!1,security:!1,v8:"7.0.276.38"},{name:"nodejs",version:"11.7.0",date:"2019-01-17",lts:!1,security:!1,v8:"7.0.276.38"},{name:"nodejs",version:"11.8.0",date:"2019-01-24",lts:!1,security:!1,v8:"7.0.276.38"},{name:"nodejs",version:"11.9.0",date:"2019-01-30",lts:!1,security:!1,v8:"7.0.276.38"},{name:"nodejs",version:"11.10.0",date:"2019-02-14",lts:!1,security:!1,v8:"7.0.276.38"},{name:"nodejs",version:"11.11.0",date:"2019-03-05",lts:!1,security:!1,v8:"7.0.276.38"},{name:"nodejs",version:"11.12.0",date:"2019-03-14",lts:!1,security:!1,v8:"7.0.276.38"},{name:"nodejs",version:"11.13.0",date:"2019-03-28",lts:!1,security:!1,v8:"7.0.276.38"},{name:"nodejs",version:"11.14.0",date:"2019-04-10",lts:!1,security:!1,v8:"7.0.276.38"},{name:"nodejs",version:"11.15.0",date:"2019-04-30",lts:!1,security:!1,v8:"7.0.276.38"},{name:"nodejs",version:"12.0.0",date:"2019-04-23",lts:!1,security:!1,v8:"7.4.288.21"},{name:"nodejs",version:"12.1.0",date:"2019-04-29",lts:!1,security:!1,v8:"7.4.288.21"},{name:"nodejs",version:"12.2.0",date:"2019-05-07",lts:!1,security:!1,v8:"7.4.288.21"},{name:"nodejs",version:"12.3.0",date:"2019-05-21",lts:!1,security:!1,v8:"7.4.288.27"},{name:"nodejs",version:"12.4.0",date:"2019-06-04",lts:!1,security:!1,v8:"7.4.288.27"},{name:"nodejs",version:"12.5.0",date:"2019-06-26",lts:!1,security:!1,v8:"7.5.288.22"},{name:"nodejs",version:"12.6.0",date:"2019-07-03",lts:!1,security:!1,v8:"7.5.288.22"},{name:"nodejs",version:"12.7.0",date:"2019-07-23",lts:!1,security:!1,v8:"7.5.288.22"},{name:"nodejs",version:"12.8.0",date:"2019-08-06",lts:!1,security:!1,v8:"7.5.288.22"},{name:"nodejs",version:"12.9.0",date:"2019-08-20",lts:!1,security:!1,v8:"7.6.303.29"},{name:"nodejs",version:"12.10.0",date:"2019-09-04",lts:!1,security:!1,v8:"7.6.303.29"},{name:"nodejs",version:"12.11.0",date:"2019-09-25",lts:!1,security:!1,v8:"7.7.299.11"},{name:"nodejs",version:"12.12.0",date:"2019-10-11",lts:!1,security:!1,v8:"7.7.299.13"},{name:"nodejs",version:"12.13.0",date:"2019-10-21",lts:"Erbium",security:!1,v8:"7.7.299.13"},{name:"nodejs",version:"12.14.0",date:"2019-12-17",lts:"Erbium",security:!0,v8:"7.7.299.13"},{name:"nodejs",version:"12.15.0",date:"2020-02-05",lts:"Erbium",security:!0,v8:"7.7.299.13"},{name:"nodejs",version:"12.16.0",date:"2020-02-11",lts:"Erbium",security:!1,v8:"7.8.279.23"},{name:"nodejs",version:"12.17.0",date:"2020-05-26",lts:"Erbium",security:!1,v8:"7.8.279.23"},{name:"nodejs",version:"12.18.0",date:"2020-06-02",lts:"Erbium",security:!0,v8:"7.8.279.23"},{name:"nodejs",version:"12.19.0",date:"2020-10-06",lts:"Erbium",security:!1,v8:"7.8.279.23"},{name:"nodejs",version:"12.20.0",date:"2020-11-24",lts:"Erbium",security:!1,v8:"7.8.279.23"},{name:"nodejs",version:"12.21.0",date:"2021-02-23",lts:"Erbium",security:!0,v8:"7.8.279.23"},{name:"nodejs",version:"12.22.0",date:"2021-03-30",lts:"Erbium",security:!1,v8:"7.8.279.23"},{name:"nodejs",version:"13.0.0",date:"2019-10-22",lts:!1,security:!1,v8:"7.8.279.17"},{name:"nodejs",version:"13.1.0",date:"2019-11-05",lts:!1,security:!1,v8:"7.8.279.17"},{name:"nodejs",version:"13.2.0",date:"2019-11-21",lts:!1,security:!1,v8:"7.9.317.23"},{name:"nodejs",version:"13.3.0",date:"2019-12-03",lts:!1,security:!1,v8:"7.9.317.25"},{name:"nodejs",version:"13.4.0",date:"2019-12-17",lts:!1,security:!0,v8:"7.9.317.25"},{name:"nodejs",version:"13.5.0",date:"2019-12-18",lts:!1,security:!1,v8:"7.9.317.25"},{name:"nodejs",version:"13.6.0",date:"2020-01-07",lts:!1,security:!1,v8:"7.9.317.25"},{name:"nodejs",version:"13.7.0",date:"2020-01-21",lts:!1,security:!1,v8:"7.9.317.25"},{name:"nodejs",version:"13.8.0",date:"2020-02-05",lts:!1,security:!0,v8:"7.9.317.25"},{name:"nodejs",version:"13.9.0",date:"2020-02-18",lts:!1,security:!1,v8:"7.9.317.25"},{name:"nodejs",version:"13.10.0",date:"2020-03-04",lts:!1,security:!1,v8:"7.9.317.25"},{name:"nodejs",version:"13.11.0",date:"2020-03-12",lts:!1,security:!1,v8:"7.9.317.25"},{name:"nodejs",version:"13.12.0",date:"2020-03-26",lts:!1,security:!1,v8:"7.9.317.25"},{name:"nodejs",version:"13.13.0",date:"2020-04-14",lts:!1,security:!1,v8:"7.9.317.25"},{name:"nodejs",version:"13.14.0",date:"2020-04-29",lts:!1,security:!1,v8:"7.9.317.25"},{name:"nodejs",version:"14.0.0",date:"2020-04-21",lts:!1,security:!1,v8:"8.1.307.30"},{name:"nodejs",version:"14.1.0",date:"2020-04-29",lts:!1,security:!1,v8:"8.1.307.31"},{name:"nodejs",version:"14.2.0",date:"2020-05-05",lts:!1,security:!1,v8:"8.1.307.31"},{name:"nodejs",version:"14.3.0",date:"2020-05-19",lts:!1,security:!1,v8:"8.1.307.31"},{name:"nodejs",version:"14.4.0",date:"2020-06-02",lts:!1,security:!0,v8:"8.1.307.31"},{name:"nodejs",version:"14.5.0",date:"2020-06-30",lts:!1,security:!1,v8:"8.3.110.9"},{name:"nodejs",version:"14.6.0",date:"2020-07-20",lts:!1,security:!1,v8:"8.4.371.19"},{name:"nodejs",version:"14.7.0",date:"2020-07-29",lts:!1,security:!1,v8:"8.4.371.19"},{name:"nodejs",version:"14.8.0",date:"2020-08-11",lts:!1,security:!1,v8:"8.4.371.19"},{name:"nodejs",version:"14.9.0",date:"2020-08-27",lts:!1,security:!1,v8:"8.4.371.19"},{name:"nodejs",version:"14.10.0",date:"2020-09-08",lts:!1,security:!1,v8:"8.4.371.19"},{name:"nodejs",version:"14.11.0",date:"2020-09-15",lts:!1,security:!0,v8:"8.4.371.19"},{name:"nodejs",version:"14.12.0",date:"2020-09-22",lts:!1,security:!1,v8:"8.4.371.19"},{name:"nodejs",version:"14.13.0",date:"2020-09-29",lts:!1,security:!1,v8:"8.4.371.19"},{name:"nodejs",version:"14.14.0",date:"2020-10-15",lts:!1,security:!1,v8:"8.4.371.19"},{name:"nodejs",version:"14.15.0",date:"2020-10-27",lts:"Fermium",security:!1,v8:"8.4.371.19"},{name:"nodejs",version:"14.16.0",date:"2021-02-23",lts:"Fermium",security:!0,v8:"8.4.371.19"},{name:"nodejs",version:"14.17.0",date:"2021-05-11",lts:"Fermium",security:!1,v8:"8.4.371.23"},{name:"nodejs",version:"14.18.0",date:"2021-09-28",lts:"Fermium",security:!1,v8:"8.4.371.23"},{name:"nodejs",version:"14.19.0",date:"2022-02-01",lts:"Fermium",security:!1,v8:"8.4.371.23"},{name:"nodejs",version:"14.20.0",date:"2022-07-07",lts:"Fermium",security:!0,v8:"8.4.371.23"},{name:"nodejs",version:"14.21.0",date:"2022-11-01",lts:"Fermium",security:!1,v8:"8.4.371.23"},{name:"nodejs",version:"15.0.0",date:"2020-10-20",lts:!1,security:!1,v8:"8.6.395.16"},{name:"nodejs",version:"15.1.0",date:"2020-11-04",lts:!1,security:!1,v8:"8.6.395.17"},{name:"nodejs",version:"15.2.0",date:"2020-11-10",lts:!1,security:!1,v8:"8.6.395.17"},{name:"nodejs",version:"15.3.0",date:"2020-11-24",lts:!1,security:!1,v8:"8.6.395.17"},{name:"nodejs",version:"15.4.0",date:"2020-12-09",lts:!1,security:!1,v8:"8.6.395.17"},{name:"nodejs",version:"15.5.0",date:"2020-12-22",lts:!1,security:!1,v8:"8.6.395.17"},{name:"nodejs",version:"15.6.0",date:"2021-01-14",lts:!1,security:!1,v8:"8.6.395.17"},{name:"nodejs",version:"15.7.0",date:"2021-01-25",lts:!1,security:!1,v8:"8.6.395.17"},{name:"nodejs",version:"15.8.0",date:"2021-02-02",lts:!1,security:!1,v8:"8.6.395.17"},{name:"nodejs",version:"15.9.0",date:"2021-02-18",lts:!1,security:!1,v8:"8.6.395.17"},{name:"nodejs",version:"15.10.0",date:"2021-02-23",lts:!1,security:!0,v8:"8.6.395.17"},{name:"nodejs",version:"15.11.0",date:"2021-03-03",lts:!1,security:!1,v8:"8.6.395.17"},{name:"nodejs",version:"15.12.0",date:"2021-03-17",lts:!1,security:!1,v8:"8.6.395.17"},{name:"nodejs",version:"15.13.0",date:"2021-03-31",lts:!1,security:!1,v8:"8.6.395.17"},{name:"nodejs",version:"15.14.0",date:"2021-04-06",lts:!1,security:!1,v8:"8.6.395.17"},{name:"nodejs",version:"16.0.0",date:"2021-04-20",lts:!1,security:!1,v8:"9.0.257.17"},{name:"nodejs",version:"16.1.0",date:"2021-05-04",lts:!1,security:!1,v8:"9.0.257.24"},{name:"nodejs",version:"16.2.0",date:"2021-05-19",lts:!1,security:!1,v8:"9.0.257.25"},{name:"nodejs",version:"16.3.0",date:"2021-06-03",lts:!1,security:!1,v8:"9.0.257.25"},{name:"nodejs",version:"16.4.0",date:"2021-06-23",lts:!1,security:!1,v8:"9.1.269.36"},{name:"nodejs",version:"16.5.0",date:"2021-07-14",lts:!1,security:!1,v8:"9.1.269.38"},{name:"nodejs",version:"16.6.0",date:"2021-07-29",lts:!1,security:!0,v8:"9.2.230.21"},{name:"nodejs",version:"16.7.0",date:"2021-08-18",lts:!1,security:!1,v8:"9.2.230.21"},{name:"nodejs",version:"16.8.0",date:"2021-08-25",lts:!1,security:!1,v8:"9.2.230.21"},{name:"nodejs",version:"16.9.0",date:"2021-09-07",lts:!1,security:!1,v8:"9.3.345.16"},{name:"nodejs",version:"16.10.0",date:"2021-09-22",lts:!1,security:!1,v8:"9.3.345.19"},{name:"nodejs",version:"16.11.0",date:"2021-10-08",lts:!1,security:!1,v8:"9.4.146.19"},{name:"nodejs",version:"16.12.0",date:"2021-10-20",lts:!1,security:!1,v8:"9.4.146.19"},{name:"nodejs",version:"16.13.0",date:"2021-10-26",lts:"Gallium",security:!1,v8:"9.4.146.19"},{name:"nodejs",version:"16.14.0",date:"2022-02-08",lts:"Gallium",security:!1,v8:"9.4.146.24"},{name:"nodejs",version:"16.15.0",date:"2022-04-26",lts:"Gallium",security:!1,v8:"9.4.146.24"},{name:"nodejs",version:"16.16.0",date:"2022-07-07",lts:"Gallium",security:!0,v8:"9.4.146.24"},{name:"nodejs",version:"16.17.0",date:"2022-08-16",lts:"Gallium",security:!1,v8:"9.4.146.26"},{name:"nodejs",version:"16.18.0",date:"2022-10-12",lts:"Gallium",security:!1,v8:"9.4.146.26"},{name:"nodejs",version:"16.19.0",date:"2022-12-13",lts:"Gallium",security:!1,v8:"9.4.146.26"},{name:"nodejs",version:"16.20.0",date:"2023-03-28",lts:"Gallium",security:!1,v8:"9.4.146.26"},{name:"nodejs",version:"17.0.0",date:"2021-10-19",lts:!1,security:!1,v8:"9.5.172.21"},{name:"nodejs",version:"17.1.0",date:"2021-11-09",lts:!1,security:!1,v8:"9.5.172.25"},{name:"nodejs",version:"17.2.0",date:"2021-11-30",lts:!1,security:!1,v8:"9.6.180.14"},{name:"nodejs",version:"17.3.0",date:"2021-12-17",lts:!1,security:!1,v8:"9.6.180.15"},{name:"nodejs",version:"17.4.0",date:"2022-01-18",lts:!1,security:!1,v8:"9.6.180.15"},{name:"nodejs",version:"17.5.0",date:"2022-02-10",lts:!1,security:!1,v8:"9.6.180.15"},{name:"nodejs",version:"17.6.0",date:"2022-02-22",lts:!1,security:!1,v8:"9.6.180.15"},{name:"nodejs",version:"17.7.0",date:"2022-03-09",lts:!1,security:!1,v8:"9.6.180.15"},{name:"nodejs",version:"17.8.0",date:"2022-03-22",lts:!1,security:!1,v8:"9.6.180.15"},{name:"nodejs",version:"17.9.0",date:"2022-04-07",lts:!1,security:!1,v8:"9.6.180.15"},{name:"nodejs",version:"18.0.0",date:"2022-04-18",lts:!1,security:!1,v8:"10.1.124.8"},{name:"nodejs",version:"18.1.0",date:"2022-05-03",lts:!1,security:!1,v8:"10.1.124.8"},{name:"nodejs",version:"18.2.0",date:"2022-05-17",lts:!1,security:!1,v8:"10.1.124.8"},{name:"nodejs",version:"18.3.0",date:"2022-06-02",lts:!1,security:!1,v8:"10.2.154.4"},{name:"nodejs",version:"18.4.0",date:"2022-06-16",lts:!1,security:!1,v8:"10.2.154.4"},{name:"nodejs",version:"18.5.0",date:"2022-07-06",lts:!1,security:!0,v8:"10.2.154.4"},{name:"nodejs",version:"18.6.0",date:"2022-07-13",lts:!1,security:!1,v8:"10.2.154.13"},{name:"nodejs",version:"18.7.0",date:"2022-07-26",lts:!1,security:!1,v8:"10.2.154.13"},{name:"nodejs",version:"18.8.0",date:"2022-08-24",lts:!1,security:!1,v8:"10.2.154.13"},{name:"nodejs",version:"18.9.0",date:"2022-09-07",lts:!1,security:!1,v8:"10.2.154.15"},{name:"nodejs",version:"18.10.0",date:"2022-09-28",lts:!1,security:!1,v8:"10.2.154.15"},{name:"nodejs",version:"18.11.0",date:"2022-10-13",lts:!1,security:!1,v8:"10.2.154.15"},{name:"nodejs",version:"18.12.0",date:"2022-10-25",lts:"Hydrogen",security:!1,v8:"10.2.154.15"},{name:"nodejs",version:"18.13.0",date:"2023-01-05",lts:"Hydrogen",security:!1,v8:"10.2.154.23"},{name:"nodejs",version:"18.14.0",date:"2023-02-01",lts:"Hydrogen",security:!1,v8:"10.2.154.23"},{name:"nodejs",version:"18.15.0",date:"2023-03-05",lts:"Hydrogen",security:!1,v8:"10.2.154.26"},{name:"nodejs",version:"18.16.0",date:"2023-04-12",lts:"Hydrogen",security:!1,v8:"10.2.154.26"},{name:"nodejs",version:"18.17.0",date:"2023-07-18",lts:"Hydrogen",security:!1,v8:"10.2.154.26"},{name:"nodejs",version:"18.18.0",date:"2023-09-18",lts:"Hydrogen",security:!1,v8:"10.2.154.26"},{name:"nodejs",version:"18.19.0",date:"2023-11-29",lts:"Hydrogen",security:!1,v8:"10.2.154.26"},{name:"nodejs",version:"19.0.0",date:"2022-10-17",lts:!1,security:!1,v8:"10.7.193.13"},{name:"nodejs",version:"19.1.0",date:"2022-11-14",lts:!1,security:!1,v8:"10.7.193.20"},{name:"nodejs",version:"19.2.0",date:"2022-11-29",lts:!1,security:!1,v8:"10.8.168.20"},{name:"nodejs",version:"19.3.0",date:"2022-12-14",lts:!1,security:!1,v8:"10.8.168.21"},{name:"nodejs",version:"19.4.0",date:"2023-01-05",lts:!1,security:!1,v8:"10.8.168.25"},{name:"nodejs",version:"19.5.0",date:"2023-01-24",lts:!1,security:!1,v8:"10.8.168.25"},{name:"nodejs",version:"19.6.0",date:"2023-02-01",lts:!1,security:!1,v8:"10.8.168.25"},{name:"nodejs",version:"19.7.0",date:"2023-02-21",lts:!1,security:!1,v8:"10.8.168.25"},{name:"nodejs",version:"19.8.0",date:"2023-03-14",lts:!1,security:!1,v8:"10.8.168.25"},{name:"nodejs",version:"19.9.0",date:"2023-04-10",lts:!1,security:!1,v8:"10.8.168.25"},{name:"nodejs",version:"20.0.0",date:"2023-04-17",lts:!1,security:!1,v8:"11.3.244.4"},{name:"nodejs",version:"20.1.0",date:"2023-05-03",lts:!1,security:!1,v8:"11.3.244.8"},{name:"nodejs",version:"20.2.0",date:"2023-05-16",lts:!1,security:!1,v8:"11.3.244.8"},{name:"nodejs",version:"20.3.0",date:"2023-06-08",lts:!1,security:!1,v8:"11.3.244.8"},{name:"nodejs",version:"20.4.0",date:"2023-07-04",lts:!1,security:!1,v8:"11.3.244.8"},{name:"nodejs",version:"20.5.0",date:"2023-07-19",lts:!1,security:!1,v8:"11.3.244.8"},{name:"nodejs",version:"20.6.0",date:"2023-08-23",lts:!1,security:!1,v8:"11.3.244.8"},{name:"nodejs",version:"20.7.0",date:"2023-09-18",lts:!1,security:!1,v8:"11.3.244.8"},{name:"nodejs",version:"20.8.0",date:"2023-09-28",lts:!1,security:!1,v8:"11.3.244.8"},{name:"nodejs",version:"20.9.0",date:"2023-10-24",lts:"Iron",security:!1,v8:"11.3.244.8"},{name:"nodejs",version:"20.10.0",date:"2023-11-22",lts:"Iron",security:!1,v8:"11.3.244.8"},{name:"nodejs",version:"21.0.0",date:"2023-10-17",lts:!1,security:!1,v8:"11.8.172.13"},{name:"nodejs",version:"21.1.0",date:"2023-10-24",lts:!1,security:!1,v8:"11.8.172.15"},{name:"nodejs",version:"21.2.0",date:"2023-11-14",lts:!1,security:!1,v8:"11.8.172.17"},{name:"nodejs",version:"21.3.0",date:"2023-11-30",lts:!1,security:!1,v8:"11.8.172.17"}];var MS={},Nk={},VMe={A:"ie",B:"edge",C:"firefox",D:"chrome",E:"safari",F:"opera",G:"ios_saf",H:"op_mini",I:"android",J:"bb",K:"op_mob",L:"and_chr",M:"and_ff",N:"ie_mob",O:"and_uc",P:"samsung",Q:"and_qq",R:"baidu",S:"kaios"};Nk.browsers=VMe;var Fk={},GMe={0:"112",1:"113",2:"114",3:"115",4:"116",5:"117",6:"118",7:"119",8:"120",9:"121",A:"10",B:"11",C:"12",D:"7",E:"8",F:"9",G:"15",H:"80",I:"123",J:"4",K:"6",L:"13",M:"14",N:"16",O:"17",P:"18",Q:"79",R:"81",S:"83",T:"84",U:"85",V:"86",W:"87",X:"88",Y:"89",Z:"90",a:"91",b:"92",c:"93",d:"94",e:"95",f:"96",g:"97",h:"98",i:"99",j:"100",k:"101",l:"102",m:"103",n:"104",o:"105",p:"106",q:"107",r:"108",s:"109",t:"20",u:"21",v:"22",w:"23",x:"24",y:"110",z:"111",AB:"122",BB:"5",CB:"19",DB:"25",EB:"26",FB:"27",GB:"28",HB:"29",IB:"30",JB:"31",KB:"32",LB:"33",MB:"34",NB:"35",OB:"36",PB:"37",QB:"38",RB:"39",SB:"40",TB:"41",UB:"42",VB:"43",WB:"44",XB:"45",YB:"46",ZB:"47",aB:"48",bB:"49",cB:"50",dB:"51",eB:"52",fB:"53",gB:"54",hB:"55",iB:"56",jB:"57",kB:"58",lB:"60",mB:"62",nB:"63",oB:"64",pB:"65",qB:"66",rB:"67",sB:"68",tB:"69",uB:"70",vB:"71",wB:"72",xB:"73",yB:"74",zB:"75","0B":"76","1B":"77","2B":"78","3B":"124","4B":"11.1","5B":"12.1","6B":"15.5","7B":"16.0","8B":"17.0","9B":"3",AC:"59",BC:"61",CC:"82",DC:"125",EC:"126",FC:"127",GC:"3.2",HC:"10.1",IC:"15.2-15.3",JC:"15.4",KC:"16.1",LC:"16.2",MC:"16.3",NC:"16.4",OC:"16.5",PC:"17.1",QC:"17.2",RC:"17.3",SC:"17.4",TC:"17.5",UC:"11.5",VC:"4.2-4.3",WC:"5.5",XC:"2",YC:"128",ZC:"3.5",aC:"3.6",bC:"3.1",cC:"5.1",dC:"6.1",eC:"7.1",fC:"9.1",gC:"13.1",hC:"14.1",iC:"15.1",jC:"15.6",kC:"16.6",lC:"TP",mC:"9.5-9.6",nC:"10.0-10.1",oC:"10.5",pC:"10.6",qC:"11.6",rC:"4.0-4.1",sC:"5.0-5.1",tC:"6.0-6.1",uC:"7.0-7.1",vC:"8.1-8.4",wC:"9.0-9.2",xC:"9.3",yC:"10.0-10.2",zC:"10.3","0C":"11.0-11.2","1C":"11.3-11.4","2C":"12.0-12.1","3C":"12.2-12.5","4C":"13.0-13.1","5C":"13.2","6C":"13.3","7C":"13.4-13.7","8C":"14.0-14.4","9C":"14.5-14.8",AD:"15.0-15.1",BD:"15.6-15.8",CD:"16.6-16.7",DD:"all",ED:"2.1",FD:"2.2",GD:"2.3",HD:"4.1",ID:"4.4",JD:"4.4.3-4.4.4",KD:"5.0-5.4",LD:"6.2-6.4",MD:"7.2-7.4",ND:"8.2",OD:"9.2",PD:"11.1-11.2",QD:"12.0",RD:"13.0",SD:"14.0",TD:"15.0",UD:"18.0",VD:"19.0",WD:"14.9",XD:"13.52",YD:"2.5",ZD:"3.0-3.1"};Fk.browserVersions=GMe;var HMe={A:{A:{K:0,D:0,E:.028588,F:.0571761,A:0,B:.500291,WC:0},B:"ms",C:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","WC","K","D","E","F","A","B","","",""],E:"IE",F:{WC:962323200,K:998870400,D:1161129600,E:1237420800,F:1300060800,A:1346716800,B:1381968e3}},B:{A:{0:.007562,1:.011343,2:.015124,3:.011343,4:.007562,5:.015124,6:.011343,7:.022686,8:.068058,9:.196612,C:0,L:0,M:0,G:0,N:0,O:.007562,P:.034029,Q:0,H:0,R:0,S:0,T:0,U:0,V:0,W:0,X:0,Y:0,Z:.003781,a:0,b:.011343,c:0,d:0,e:0,f:0,g:0,h:0,i:0,j:0,k:0,l:0,m:0,n:0,o:0,p:0,q:.007562,r:.007562,s:.068058,y:.007562,z:.007562,AB:3.96249,I:.313823},B:"webkit",C:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","C","L","M","G","N","O","P","Q","H","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","y","z","0","1","2","3","4","5","6","7","8","9","AB","I","","",""],E:"Edge",F:{0:1680825600,1:1683158400,2:1685664e3,3:1689897600,4:1692576e3,5:1694649600,6:1697155200,7:1698969600,8:1701993600,9:1706227200,C:1438128e3,L:1447286400,M:1470096e3,G:1491868800,N:1508198400,O:1525046400,P:1542067200,Q:1579046400,H:1581033600,R:1586736e3,S:1590019200,T:1594857600,U:1598486400,V:1602201600,W:1605830400,X:161136e4,Y:1614816e3,Z:1618358400,a:1622073600,b:1626912e3,c:1630627200,d:1632441600,e:1634774400,f:1637539200,g:1641427200,h:1643932800,i:1646265600,j:1649635200,k:1651190400,l:1653955200,m:1655942400,n:1659657600,o:1661990400,p:1664755200,q:1666915200,r:1670198400,s:1673481600,y:1675900800,z:1678665600,AB:1708732800,I:1711152e3},D:{C:"ms",L:"ms",M:"ms",G:"ms",N:"ms",O:"ms",P:"ms"}},C:{A:{0:.003781,1:.011343,2:0,3:.385662,4:0,5:.011343,6:.079401,7:.007562,8:.015124,9:.018905,XC:0,"9B":0,J:.003781,BB:0,K:0,D:0,E:0,F:0,A:0,B:.015124,C:0,L:0,M:0,G:0,N:0,O:0,P:0,CB:0,t:0,u:0,v:0,w:0,x:0,DB:0,EB:0,FB:0,GB:0,HB:0,IB:0,JB:0,KB:0,LB:0,MB:0,NB:0,OB:0,PB:0,QB:0,RB:0,SB:0,TB:0,UB:0,VB:.011343,WB:.007562,XB:.007562,YB:0,ZB:0,aB:0,bB:0,cB:.003781,dB:0,eB:.049153,fB:.007562,gB:.007562,hB:0,iB:.018905,jB:0,kB:0,AC:.003781,lB:0,BC:0,mB:0,nB:0,oB:0,pB:0,qB:0,rB:0,sB:0,tB:0,uB:0,vB:0,wB:.007562,xB:0,yB:0,zB:0,"0B":0,"1B":0,"2B":.015124,Q:0,H:0,R:0,CC:0,S:0,T:0,U:0,V:0,W:0,X:.007562,Y:0,Z:0,a:.003781,b:0,c:0,d:.003781,e:0,f:0,g:0,h:0,i:0,j:0,k:0,l:.022686,m:.03781,n:.007562,o:.003781,p:0,q:0,r:.003781,s:.007562,y:.003781,z:0,AB:.060496,I:1.08515,"3B":.446158,DC:0,EC:0,FC:0,YC:0,ZC:0,aC:0},B:"moz",C:["XC","9B","ZC","aC","J","BB","K","D","E","F","A","B","C","L","M","G","N","O","P","CB","t","u","v","w","x","DB","EB","FB","GB","HB","IB","JB","KB","LB","MB","NB","OB","PB","QB","RB","SB","TB","UB","VB","WB","XB","YB","ZB","aB","bB","cB","dB","eB","fB","gB","hB","iB","jB","kB","AC","lB","BC","mB","nB","oB","pB","qB","rB","sB","tB","uB","vB","wB","xB","yB","zB","0B","1B","2B","Q","H","R","CC","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","y","z","0","1","2","3","4","5","6","7","8","9","AB","I","3B","DC","EC","FC","YC"],E:"Firefox",F:{0:1681171200,1:1683590400,2:1686009600,3:1688428800,4:1690848e3,5:1693267200,6:1695686400,7:1698105600,8:1700524800,9:1702944e3,XC:1161648e3,"9B":1213660800,ZC:124632e4,aC:1264032e3,J:1300752e3,BB:1308614400,K:1313452800,D:1317081600,E:1317081600,F:1320710400,A:1324339200,B:1327968e3,C:1331596800,L:1335225600,M:1338854400,G:1342483200,N:1346112e3,O:1349740800,P:1353628800,CB:1357603200,t:1361232e3,u:1364860800,v:1368489600,w:1372118400,x:1375747200,DB:1379376e3,EB:1386633600,FB:1391472e3,GB:1395100800,HB:1398729600,IB:1402358400,JB:1405987200,KB:1409616e3,LB:1413244800,MB:1417392e3,NB:1421107200,OB:1424736e3,PB:1428278400,QB:1431475200,RB:1435881600,SB:1439251200,TB:144288e4,UB:1446508800,VB:1450137600,WB:1453852800,XB:1457395200,YB:1461628800,ZB:1465257600,aB:1470096e3,bB:1474329600,cB:1479168e3,dB:1485216e3,eB:1488844800,fB:149256e4,gB:1497312e3,hB:1502150400,iB:1506556800,jB:1510617600,kB:1516665600,AC:1520985600,lB:1525824e3,BC:1529971200,mB:1536105600,nB:1540252800,oB:1544486400,pB:154872e4,qB:1552953600,rB:1558396800,sB:1562630400,tB:1567468800,uB:1571788800,vB:1575331200,wB:1578355200,xB:1581379200,yB:1583798400,zB:1586304e3,"0B":1588636800,"1B":1591056e3,"2B":1593475200,Q:1595894400,H:1598313600,R:1600732800,CC:1603152e3,S:1605571200,T:1607990400,U:1611619200,V:1614038400,W:1616457600,X:1618790400,Y:1622505600,Z:1626134400,a:1628553600,b:1630972800,c:1633392e3,d:1635811200,e:1638835200,f:1641859200,g:1644364800,h:1646697600,i:1649116800,j:1651536e3,k:1653955200,l:1656374400,m:1658793600,n:1661212800,o:1663632e3,p:1666051200,q:1668470400,r:1670889600,s:1673913600,y:1676332800,z:1678752e3,AB:1705968e3,I:1708387200,"3B":1710806400,DC:1713225600,EC:null,FC:null,YC:null}},D:{A:{0:.041591,1:.083182,2:.094525,3:.03781,4:.219298,5:.124773,6:.105868,7:.181488,8:.446158,9:1.68633,J:0,BB:0,K:0,D:0,E:0,F:0,A:0,B:0,C:0,L:0,M:0,G:0,N:0,O:0,P:0,CB:0,t:0,u:0,v:0,w:0,x:0,DB:0,EB:0,FB:0,GB:0,HB:0,IB:0,JB:0,KB:0,LB:0,MB:.003781,NB:.003781,OB:0,PB:0,QB:.015124,RB:0,SB:0,TB:0,UB:0,VB:0,WB:0,XB:0,YB:0,ZB:.007562,aB:.022686,bB:.026467,cB:.011343,dB:0,eB:0,fB:.007562,gB:0,hB:.003781,iB:.011343,jB:0,kB:0,AC:0,lB:.007562,BC:.003781,mB:0,nB:.007562,oB:0,pB:.003781,qB:.022686,rB:.003781,sB:.011343,tB:.03781,uB:.056715,vB:.011343,wB:.011343,xB:.011343,yB:.015124,zB:.011343,"0B":.011343,"1B":.026467,"2B":.022686,Q:.132335,H:.022686,R:.030248,S:.045372,T:.011343,U:.022686,V:.105868,W:.086963,X:.022686,Y:.015124,Z:.018905,a:.045372,b:.022686,c:.030248,d:.03781,e:.011343,f:.011343,g:.018905,h:.07562,i:.034029,j:.090744,k:.158802,l:.090744,m:.215517,n:.166364,o:.041591,p:.041591,q:.034029,r:.052934,s:1.56912,y:.049153,z:.049153,AB:12.5832,I:3.50877,"3B":.018905,DC:.003781,EC:0,FC:0},B:"webkit",C:["","","","","","","J","BB","K","D","E","F","A","B","C","L","M","G","N","O","P","CB","t","u","v","w","x","DB","EB","FB","GB","HB","IB","JB","KB","LB","MB","NB","OB","PB","QB","RB","SB","TB","UB","VB","WB","XB","YB","ZB","aB","bB","cB","dB","eB","fB","gB","hB","iB","jB","kB","AC","lB","BC","mB","nB","oB","pB","qB","rB","sB","tB","uB","vB","wB","xB","yB","zB","0B","1B","2B","Q","H","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","y","z","0","1","2","3","4","5","6","7","8","9","AB","I","3B","DC","EC","FC"],E:"Chrome",F:{0:1680566400,1:1682985600,2:1685404800,3:1689724800,4:1692057600,5:1694476800,6:1696896e3,7:1698710400,8:1701993600,9:1705968e3,J:1264377600,BB:1274745600,K:1283385600,D:1287619200,E:1291248e3,F:1296777600,A:1299542400,B:1303862400,C:1307404800,L:1312243200,M:1316131200,G:1316131200,N:1319500800,O:1323734400,P:1328659200,CB:1332892800,t:133704e4,u:1340668800,v:1343692800,w:1348531200,x:1352246400,DB:1357862400,EB:1361404800,FB:1364428800,GB:1369094400,HB:1374105600,IB:1376956800,JB:1384214400,KB:1389657600,LB:1392940800,MB:1397001600,NB:1400544e3,OB:1405468800,PB:1409011200,QB:141264e4,RB:1416268800,SB:1421798400,TB:1425513600,UB:1429401600,VB:143208e4,WB:1437523200,XB:1441152e3,YB:1444780800,ZB:1449014400,aB:1453248e3,bB:1456963200,cB:1460592e3,dB:1464134400,eB:1469059200,fB:1472601600,gB:1476230400,hB:1480550400,iB:1485302400,jB:1489017600,kB:149256e4,AC:1496707200,lB:1500940800,BC:1504569600,mB:1508198400,nB:1512518400,oB:1516752e3,pB:1520294400,qB:1523923200,rB:1527552e3,sB:1532390400,tB:1536019200,uB:1539648e3,vB:1543968e3,wB:154872e4,xB:1552348800,yB:1555977600,zB:1559606400,"0B":1564444800,"1B":1568073600,"2B":1571702400,Q:1575936e3,H:1580860800,R:1586304e3,S:1589846400,T:1594684800,U:1598313600,V:1601942400,W:1605571200,X:1611014400,Y:1614556800,Z:1618272e3,a:1621987200,b:1626739200,c:1630368e3,d:1632268800,e:1634601600,f:1637020800,g:1641340800,h:1643673600,i:1646092800,j:1648512e3,k:1650931200,l:1653350400,m:1655769600,n:1659398400,o:1661817600,p:1664236800,q:1666656e3,r:166968e4,s:1673308800,y:1675728e3,z:1678147200,AB:1708387200,I:1710806400,"3B":1713225600,DC:null,EC:null,FC:null}},E:{A:{J:0,BB:0,K:0,D:0,E:.003781,F:.003781,A:0,B:0,C:0,L:.007562,M:.03781,G:.007562,bC:0,GC:0,cC:.003781,dC:0,eC:0,fC:.03781,HC:0,"4B":.007562,"5B":.015124,gC:.068058,hC:.102087,iC:.030248,IC:.011343,JC:.026467,"6B":.03781,jC:.257108,"7B":.030248,KC:.052934,LC:.049153,MC:.11343,NC:.03781,OC:.071839,kC:.381881,"8B":.045372,PC:.124773,QC:.279794,RC:1.11539,SC:.219298,TC:0,lC:0},B:"webkit",C:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","bC","GC","J","BB","cC","K","dC","D","eC","E","F","fC","A","HC","B","4B","C","5B","L","gC","M","hC","G","iC","IC","JC","6B","jC","7B","KC","LC","MC","NC","OC","kC","8B","PC","QC","RC","SC","TC","lC",""],E:"Safari",F:{bC:1205798400,GC:1226534400,J:1244419200,BB:1275868800,cC:131112e4,K:1343174400,dC:13824e5,D:13824e5,eC:1410998400,E:1413417600,F:1443657600,fC:1458518400,A:1474329600,HC:1490572800,B:1505779200,"4B":1522281600,C:1537142400,"5B":1553472e3,L:1568851200,gC:1585008e3,M:1600214400,hC:1619395200,G:1632096e3,iC:1635292800,IC:1639353600,JC:1647216e3,"6B":1652745600,jC:1658275200,"7B":1662940800,KC:1666569600,LC:1670889600,MC:1674432e3,NC:1679875200,OC:1684368e3,kC:1690156800,"8B":1695686400,PC:1698192e3,QC:1702252800,RC:1705881600,SC:1709596800,TC:null,lC:null}},F:{A:{F:0,B:0,C:0,G:0,N:0,O:0,P:0,CB:0,t:0,u:0,v:0,w:0,x:0,DB:0,EB:0,FB:0,GB:.003781,HB:0,IB:0,JB:0,KB:0,LB:0,MB:0,NB:0,OB:.003781,PB:0,QB:0,RB:0,SB:0,TB:0,UB:0,VB:0,WB:0,XB:0,YB:.015124,ZB:0,aB:0,bB:0,cB:0,dB:0,eB:0,fB:0,gB:0,hB:0,iB:0,jB:0,kB:0,lB:0,mB:0,nB:0,oB:0,pB:0,qB:0,rB:0,sB:0,tB:0,uB:0,vB:0,wB:0,xB:0,yB:0,zB:0,"0B":0,"1B":0,"2B":0,Q:0,H:0,R:0,CC:0,S:0,T:0,U:0,V:0,W:0,X:0,Y:0,Z:0,a:0,b:0,c:0,d:0,e:.045372,f:0,g:0,h:0,i:0,j:0,k:0,l:.045372,m:0,n:0,o:0,p:.018905,q:.782667,r:.15124,s:0,mC:0,nC:0,oC:0,pC:0,"4B":0,UC:0,qC:0,"5B":0},B:"webkit",C:["","","","","","","","","","","","","","","","","","","","","","","F","mC","nC","oC","pC","B","4B","UC","qC","C","5B","G","N","O","P","CB","t","u","v","w","x","DB","EB","FB","GB","HB","IB","JB","KB","LB","MB","NB","OB","PB","QB","RB","SB","TB","UB","VB","WB","XB","YB","ZB","aB","bB","cB","dB","eB","fB","gB","hB","iB","jB","kB","lB","mB","nB","oB","pB","qB","rB","sB","tB","uB","vB","wB","xB","yB","zB","0B","1B","2B","Q","H","R","CC","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","","",""],E:"Opera",F:{F:1150761600,mC:1223424e3,nC:1251763200,oC:1267488e3,pC:1277942400,B:1292457600,"4B":1302566400,UC:1309219200,qC:1323129600,C:1323129600,"5B":1352073600,G:1372723200,N:1377561600,O:1381104e3,P:1386288e3,CB:1390867200,t:1393891200,u:1399334400,v:1401753600,w:1405987200,x:1409616e3,DB:1413331200,EB:1417132800,FB:1422316800,GB:1425945600,HB:1430179200,IB:1433808e3,JB:1438646400,KB:1442448e3,LB:1445904e3,MB:1449100800,NB:1454371200,OB:1457308800,PB:146232e4,QB:1465344e3,RB:1470096e3,SB:1474329600,TB:1477267200,UB:1481587200,VB:1486425600,WB:1490054400,XB:1494374400,YB:1498003200,ZB:1502236800,aB:1506470400,bB:1510099200,cB:1515024e3,dB:1517961600,eB:1521676800,fB:1525910400,gB:1530144e3,hB:1534982400,iB:1537833600,jB:1543363200,kB:1548201600,lB:1554768e3,mB:1561593600,nB:1566259200,oB:1570406400,pB:1573689600,qB:1578441600,rB:1583971200,sB:1587513600,tB:1592956800,uB:1595894400,vB:1600128e3,wB:1603238400,xB:161352e4,yB:1612224e3,zB:1616544e3,"0B":1619568e3,"1B":1623715200,"2B":1627948800,Q:1631577600,H:1633392e3,R:1635984e3,CC:1638403200,S:1642550400,T:1644969600,U:1647993600,V:1650412800,W:1652745600,X:1654646400,Y:1657152e3,Z:1660780800,a:1663113600,b:1668816e3,c:1668643200,d:1671062400,e:1675209600,f:1677024e3,g:1679529600,h:1681948800,i:1684195200,j:1687219200,k:1690329600,l:1692748800,m:1696204800,n:169992e4,o:169992e4,p:1702944e3,q:1707264e3,r:1710115200,s:1711497600},D:{F:"o",B:"o",C:"o",mC:"o",nC:"o",oC:"o",pC:"o","4B":"o",UC:"o",qC:"o","5B":"o"}},G:{A:{E:0,GC:0,rC:0,VC:.00300253,sC:.00150127,tC:.0090076,uC:.0105089,vC:.00300253,wC:.00600507,xC:.0375317,yC:.00600507,zC:.0630532,"0C":.045038,"1C":.0165139,"2C":.0135114,"3C":.259719,"4C":.0045038,"5C":.045038,"6C":.0135114,"7C":.0510431,"8C":.1186,"9C":.153129,AD:.0660557,IC:.0780659,JC:.0915773,"6B":.117099,BD:.980327,"7B":.2372,KC:.493917,LC:.238701,MC:.423357,NC:.090076,OC:.190661,CD:1.44422,"8B":.187658,PC:.378319,QC:.60501,RC:7.43127,SC:1.09142,TC:0},B:"webkit",C:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","GC","rC","VC","sC","tC","uC","E","vC","wC","xC","yC","zC","0C","1C","2C","3C","4C","5C","6C","7C","8C","9C","AD","IC","JC","6B","BD","7B","KC","LC","MC","NC","OC","CD","8B","PC","QC","RC","SC","TC","",""],E:"Safari on iOS",F:{GC:1270252800,rC:1283904e3,VC:1299628800,sC:1331078400,tC:1359331200,uC:1394409600,E:1410912e3,vC:1413763200,wC:1442361600,xC:1458518400,yC:1473724800,zC:1490572800,"0C":1505779200,"1C":1522281600,"2C":1537142400,"3C":1553472e3,"4C":1568851200,"5C":1572220800,"6C":1580169600,"7C":1585008e3,"8C":1600214400,"9C":1619395200,AD:1632096e3,IC:1639353600,JC:1647216e3,"6B":1652659200,BD:1658275200,"7B":1662940800,KC:1666569600,LC:1670889600,MC:1674432e3,NC:1679875200,OC:1684368e3,CD:1690156800,"8B":1694995200,PC:1698192e3,QC:1702252800,RC:1705881600,SC:1709596800,TC:null}},H:{A:{DD:.09},B:"o",C:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","DD","","",""],E:"Opera Mini",F:{DD:1426464e3}},I:{A:{"9B":0,J:628119e-10,I:.625607,ED:0,FD:0,GD:0,HD:628119e-10,VC:376871e-9,ID:0,JD:.00150749},B:"webkit",C:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","ED","FD","GD","9B","J","HD","VC","ID","JD","I","","",""],E:"Android Browser",F:{ED:1256515200,FD:1274313600,GD:1291593600,"9B":1298332800,J:1318896e3,HD:1341792e3,VC:1374624e3,ID:1386547200,JD:1401667200,I:1710806400}},J:{A:{D:0,A:0},B:"webkit",C:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","D","A","","",""],E:"Blackberry Browser",F:{D:1325376e3,A:1359504e3}},K:{A:{A:0,B:0,C:0,H:1.25952,"4B":0,UC:0,"5B":0},B:"o",C:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","A","B","4B","UC","C","5B","H","","",""],E:"Opera Mobile",F:{A:1287100800,B:1300752e3,"4B":1314835200,UC:1318291200,C:1330300800,"5B":1349740800,H:1709769600},D:{H:"webkit"}},L:{A:{I:42.2934},B:"webkit",C:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","I","","",""],E:"Chrome for Android",F:{I:1710806400}},M:{A:{"3B":.298512},B:"moz",C:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","3B","","",""],E:"Firefox for Android",F:{"3B":1710806400}},N:{A:{A:0,B:0},B:"ms",C:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","A","B","","",""],E:"IE Mobile",F:{A:1340150400,B:1353456e3}},O:{A:{"6B":.889317},B:"webkit",C:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","6B","","",""],E:"UC Browser for Android",F:{"6B":1710115200},D:{"6B":"webkit"}},P:{A:{J:.14052,t:.0324276,u:.0648553,v:.0756645,w:1.08092,x:1.15659,KD:.0108092,LD:0,MD:.0432369,ND:0,OD:0,HC:0,PD:.0108092,QD:0,RD:.0108092,SD:0,TD:0,"7B":.0108092,"8B":.0324276,UD:.0216184,VD:.0324276},B:"webkit",C:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","J","KD","LD","MD","ND","OD","HC","PD","QD","RD","SD","TD","7B","8B","UD","VD","t","u","v","w","x","","",""],E:"Samsung Internet",F:{J:1461024e3,KD:1481846400,LD:1509408e3,MD:1528329600,ND:1546128e3,OD:1554163200,HC:1567900800,PD:1582588800,QD:1593475200,RD:1605657600,SD:1618531200,TD:1629072e3,"7B":1640736e3,"8B":1651708800,UD:1659657600,VD:1667260800,t:1677369600,u:1684454400,v:1689292800,w:1697587200,x:1711497600}},Q:{A:{WD:.236322},B:"webkit",C:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","WD","","",""],E:"QQ Browser",F:{WD:1710288e3}},R:{A:{XD:0},B:"webkit",C:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","XD","","",""],E:"Baidu Browser",F:{XD:1710201600}},S:{A:{YD:.080847,ZD:0},B:"moz",C:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","YD","ZD","","",""],E:"KaiOS Browser",F:{YD:1527811200,ZD:1631664e3}}};const WMe=Nk.browsers,aO=Fk.browserVersions,d$=HMe;function p$(t){return Object.keys(t).reduce((e,r)=>(e[aO[r]]=t[r],e),{})}MS.agents=Object.keys(d$).reduce((t,e)=>{let r=d$[e];return t[WMe[e]]=Object.keys(r).reduce((o,u)=>(u==="A"?o.usage_global=p$(r[u]):u==="C"?o.versions=r[u].reduce((f,p)=>(p===""?f.push(null):f.push(aO[p]),f),[]):u==="D"?o.prefix_exceptions=p$(r[u]):u==="E"?o.browser=r[u]:u==="F"?o.release_date=Object.keys(r[u]).reduce((f,p)=>(f[aO[p]]=r[u][p],f),{}):o.prefix=r[u],o),{}),t},{});const ZMe={start:"2015-09-08",lts:"2015-10-12",maintenance:"2017-04-01",end:"2018-04-30",codename:"Argon"},qMe={start:"2015-10-29",maintenance:"2016-04-30",end:"2016-06-30"},KMe={start:"2016-04-26",lts:"2016-10-18",maintenance:"2018-04-30",end:"2019-04-30",codename:"Boron"},XMe={start:"2016-10-25",maintenance:"2017-04-30",end:"2017-06-30"},YMe={start:"2017-05-30",lts:"2017-10-31",maintenance:"2019-01-01",end:"2019-12-31",codename:"Carbon"},JMe={start:"2017-10-01",maintenance:"2018-04-01",end:"2018-06-30"},QMe={start:"2018-04-24",lts:"2018-10-30",maintenance:"2020-05-19",end:"2021-04-30",codename:"Dubnium"},eIe={start:"2018-10-23",maintenance:"2019-04-22",end:"2019-06-01"},tIe={start:"2019-04-23",lts:"2019-10-21",maintenance:"2020-11-30",end:"2022-04-30",codename:"Erbium"},rIe={start:"2019-10-22",maintenance:"2020-04-01",end:"2020-06-01"},nIe={start:"2020-04-21",lts:"2020-10-27",maintenance:"2021-10-19",end:"2023-04-30",codename:"Fermium"},iIe={start:"2020-10-20",maintenance:"2021-04-01",end:"2021-06-01"},oIe={start:"2021-04-20",lts:"2021-10-26",maintenance:"2022-10-18",end:"2023-09-11",codename:"Gallium"},aIe={start:"2021-10-19",maintenance:"2022-04-01",end:"2022-06-01"},sIe={start:"2022-04-19",lts:"2022-10-25",maintenance:"2023-10-18",end:"2025-04-30",codename:"Hydrogen"},lIe={start:"2022-10-18",maintenance:"2023-04-01",end:"2023-06-01"},uIe={start:"2023-04-18",lts:"2023-10-24",maintenance:"2024-10-22",end:"2026-04-30",codename:"Iron"},cIe={start:"2023-10-17",maintenance:"2024-04-01",end:"2024-06-01"},hIe={start:"2024-04-23",lts:"2024-10-29",maintenance:"2025-10-21",end:"2027-04-30",codename:""},fIe={start:"2024-10-15",maintenance:"2025-04-01",end:"2025-06-01"},dIe={start:"2025-04-22",lts:"2025-10-28",maintenance:"2026-10-20",end:"2028-04-30",codename:""},pIe={"v0.8":{start:"2012-06-25",end:"2014-07-31"},"v0.10":{start:"2013-03-11",end:"2016-10-31"},"v0.12":{start:"2015-02-06",end:"2016-12-31"},v4:ZMe,v5:qMe,v6:KMe,v7:XMe,v8:YMe,v9:JMe,v10:QMe,v11:eIe,v12:tIe,v13:rIe,v14:nIe,v15:iIe,v16:oIe,v17:aIe,v18:sIe,v19:lIe,v20:uIe,v21:cIe,v22:hIe,v23:fIe,v24:dIe};var mIe={"0.20":"39","0.21":"41","0.22":"41","0.23":"41","0.24":"41","0.25":"42","0.26":"42","0.27":"43","0.28":"43","0.29":"43","0.30":"44","0.31":"45","0.32":"45","0.33":"45","0.34":"45","0.35":"45","0.36":"47","0.37":"49","1.0":"49","1.1":"50","1.2":"51","1.3":"52","1.4":"53","1.5":"54","1.6":"56","1.7":"58","1.8":"59","2.0":"61","2.1":"61","3.0":"66","3.1":"66","4.0":"69","4.1":"69","4.2":"69","5.0":"73","6.0":"76","6.1":"76","7.0":"78","7.1":"78","7.2":"78","7.3":"78","8.0":"80","8.1":"80","8.2":"80","8.3":"80","8.4":"80","8.5":"80","9.0":"83","9.1":"83","9.2":"83","9.3":"83","9.4":"83","10.0":"85","10.1":"85","10.2":"85","10.3":"85","10.4":"85","11.0":"87","11.1":"87","11.2":"87","11.3":"87","11.4":"87","11.5":"87","12.0":"89","12.1":"89","12.2":"89","13.0":"91","13.1":"91","13.2":"91","13.3":"91","13.4":"91","13.5":"91","13.6":"91","14.0":"93","14.1":"93","14.2":"93","15.0":"94","15.1":"94","15.2":"94","15.3":"94","15.4":"94","15.5":"94","16.0":"96","16.1":"96","16.2":"96","17.0":"98","17.1":"98","17.2":"98","17.3":"98","17.4":"98","18.0":"100","18.1":"100","18.2":"100","18.3":"100","19.0":"102","19.1":"102","20.0":"104","20.1":"104","20.2":"104","20.3":"104","21.0":"106","21.1":"106","21.2":"106","21.3":"106","21.4":"106","22.0":"108","22.1":"108","22.2":"108","22.3":"108","23.0":"110","23.1":"110","23.2":"110","23.3":"110","24.0":"112","24.1":"112","24.2":"112","24.3":"112","24.4":"112","24.5":"112","24.6":"112","24.7":"112","24.8":"112","25.0":"114","25.1":"114","25.2":"114","25.3":"114","25.4":"114","25.5":"114","25.6":"114","25.7":"114","25.8":"114","25.9":"114","26.0":"116","26.1":"116","26.2":"116","26.3":"116","26.4":"116","26.5":"116","26.6":"116","27.0":"118","27.1":"118","27.2":"118","27.3":"118","28.0":"120","28.1":"120","28.2":"120","28.3":"120","29.0":"122","29.1":"122","29.2":"122","29.3":"122","30.0":"124","31.0":"125"};function jk(t){this.name="BrowserslistError",this.message=t,this.browserslist=!0,Error.captureStackTrace&&Error.captureStackTrace(this,jk)}jk.prototype=Error.prototype;var DZ=jk,m$=/^\s+and\s+(.*)/i,g$=/^(?:,\s*|\s+or\s+)(.*)/i;function PZ(t){return Array.isArray(t)?t.reduce(function(e,r){return e.concat(PZ(r))},[]):[t]}function gIe(t,e){for(var r=1,o=t.length;r<=o;r++){var u=t.substr(-r,r);if(e(u,r,o))return t.slice(0,-r)}return""}function jE(t,e){var r={query:e};e.indexOf("not ")===0&&(r.not=!0,e=e.slice(4));for(var o in t){var u=t[o],f=e.match(u.regexp);if(f){r.type=o;for(var p=0;p<u.matches.length;p++)r[u.matches[p]]=f[p+1];return r}}return r.type="unknown",r}function _Ie(t,e,r){var o;return gIe(e,function(u,f,p){return m$.test(u)?(o=jE(t,u.match(m$)[1]),o.compose="and",r.unshift(o),!0):g$.test(u)?(o=jE(t,u.match(g$)[1]),o.compose="or",r.unshift(o),!0):f===p?(o=jE(t,u.trim()),o.compose="or",r.unshift(o),!0):!1})}var yIe=function(e,r){return Array.isArray(r)||(r=[r]),PZ(r.map(function(o){var u=[];do o=_Ie(e,o,u);while(o);return u}))},fb=DZ;function w0(){}var vIe={loadQueries:function(){throw new fb("Sharable configs are not supported in client-side build of Browserslist")},getStat:function(e){return e.stats},loadConfig:function(e){if(e.config)throw new fb("Browserslist config are not supported in client-side build")},loadCountry:function(){throw new fb("Country statistics are not supported in client-side build of Browserslist")},loadFeature:function(){throw new fb("Supports queries are not available in client-side build of Browserslist")},currentNode:function(e,r){return e(["maintained node versions"],r)[0]},parseConfig:w0,readConfig:w0,findConfig:w0,clearCaches:w0,oldDataWarning:w0,env:{}},BIe=UMe,ah=MS.agents,$E=pIe,gw=Vl,yu=mIe,xs=DZ,MZ=yIe,Ga=vIe,xIe=365.259641*24*60*60*1e3,IZ="37",bIe=14;function OZ(t,e){return(t+".").indexOf(e+".")===0}function CIe(t){var e=t.slice(1);return kr.nodeVersions.some(function(r){return OZ(r,e)})}function _$(t){return t.filter(function(e){return typeof e=="string"})}function db(t){var e=t;return t.split(".").length===3&&(e=t.split(".").slice(0,-1).join(".")),e}function Cf(t){return function(r){return t+" "+r}}function sO(t){return parseInt(t.split(".")[0])}function pb(t,e){if(t.length===0)return[];var r=kZ(t.map(sO)),o=r[r.length-e];if(!o)return t;for(var u=[],f=t.length-1;f>=0&&!(o>sO(t[f]));f--)u.unshift(t[f]);return u}function kZ(t){for(var e=[],r=0;r<t.length;r++)e.indexOf(t[r])===-1&&e.push(t[r]);return e}function IS(t,e,r){for(var o in r)t[e+" "+o]=r[o]}function y$(t,e){return e=parseFloat(e),t===">"?function(r){return parseFloat(r)>e}:t===">="?function(r){return parseFloat(r)>=e}:t==="<"?function(r){return parseFloat(r)<e}:function(r){return parseFloat(r)<=e}}function wIe(t,e){return e=e.split(".").map(Mf),e[1]=e[1]||0,e[2]=e[2]||0,t===">"?function(r){return r=r.split(".").map(Mf),R0(r,e)>0}:t===">="?function(r){return r=r.split(".").map(Mf),R0(r,e)>=0}:t==="<"?function(r){return r=r.split(".").map(Mf),R0(e,r)>0}:function(r){return r=r.split(".").map(Mf),R0(e,r)>=0}}function Mf(t){return parseInt(t)}function Nb(t,e){return t<e?-1:t>e?1:0}function R0(t,e){return Nb(parseInt(t[0]),parseInt(e[0]))||Nb(parseInt(t[1]||"0"),parseInt(e[1]||"0"))||Nb(parseInt(t[2]||"0"),parseInt(e[2]||"0"))}function v$(t,e){switch(e=e.split(".").map(Mf),typeof e[1]>"u"&&(e[1]="x"),t){case"<=":return function(r){return r=r.split(".").map(Mf),B$(r,e)<=0};case">=":default:return function(r){return r=r.split(".").map(Mf),B$(r,e)>=0}}}function B$(t,e){return t[0]!==e[0]?t[0]<e[0]?-1:1:e[1]==="x"?0:t[1]!==e[1]?t[1]<e[1]?-1:1:0}function SIe(t,e){return t.versions.indexOf(e)!==-1?e:kr.versionAliases[t.name][e]?kr.versionAliases[t.name][e]:!1}function mb(t,e){var r=SIe(t,e);return r||(t.versions.length===1?t.versions[0]:!1)}function LZ(t,e){return t=t/1e3,Object.keys(ah).reduce(function(r,o){var u=If(o,e);if(!u)return r;var f=Object.keys(u.releaseDate).filter(function(p){var x=u.releaseDate[p];return x!==null&&x>=t});return r.concat(f.map(Cf(u.name)))},[])}function x$(t){return{name:t.name,versions:t.versions,released:t.released,releaseDate:t.releaseDate}}function If(t,e){if(t=t.toLowerCase(),t=kr.aliases[t]||t,e.mobileToDesktop&&kr.desktopNames[t]){var r=kr.data[kr.desktopNames[t]];if(t==="android")return AIe(x$(kr.data[t]),r);var o=x$(r);return o.name=t,o}return kr.data[t]}function b$(t,e){var r=e.indexOf(IZ);return t.filter(function(o){return/^(?:[2-4]\.|[34]$)/.test(o)}).concat(e.slice(r))}function TIe(t){var e={};for(var r in t)e[r]=t[r];return e}function AIe(t,e){return t.released=b$(t.released,e.released),t.versions=b$(t.versions,e.versions),t.releaseDate=TIe(t.releaseDate),t.released.forEach(function(r){t.releaseDate[r]===void 0&&(t.releaseDate[r]=e.releaseDate[r])}),t}function ig(t,e){var r=If(t,e);if(!r)throw new xs("Unknown browser "+t);return r}function EIe(t){return new xs("Unknown browser query `"+t+"`. Maybe you are using old Browserslist or made typo in query.")}function gb(t,e,r,o){var u=1;switch(e){case"android":if(o.mobileToDesktop)return t;var f=kr.data.chrome.released;u=f.length-f.indexOf(IZ);break;case"op_mob":var p=kr.data.op_mob.released.slice(-1)[0];u=sO(p)-bIe+1;break;default:return t}return r<=u?t.slice(-1):t.slice(u-1-r)}function C$(t,e){return typeof t=="string"&&(t.indexOf("y")>=0||e&&t.indexOf("a")>=0)}function ug(t,e){return MZ(lO,t).reduce(function(r,o,u){if(o.not&&u===0)throw new xs("Write any browsers query (for instance, `defaults`) before `"+o.query+"`");var f=lO[o.type],p=f.select.call(kr,e,o).map(function(s){var w=s.split(" ");return w[1]==="0"?w[0]+" "+If(w[0],e).versions[0]:s});if(o.compose==="and")return o.not?r.filter(function(s){return p.indexOf(s)===-1}):r.filter(function(s){return p.indexOf(s)!==-1});if(o.not){var x={};return p.forEach(function(s){x[s]=!0}),r.filter(function(s){return!x[s]})}return r.concat(p)},[])}function RZ(t){return typeof t>"u"&&(t={}),typeof t.path>"u"&&(t.path=gw.resolve?gw.resolve("."):"."),t}function zZ(t,e){if(typeof t>"u"||t===null){var r=kr.loadConfig(e);r?t=r:t=kr.defaults}return t}function NZ(t){if(!(typeof t=="string"||Array.isArray(t)))throw new xs("Browser queries must be an array or string. Got "+typeof t+".")}var UE={};function kr(t,e){e=RZ(e),t=zZ(t,e),NZ(t);var r={ignoreUnknownVersions:e.ignoreUnknownVersions,dangerousExtend:e.dangerousExtend,mobileToDesktop:e.mobileToDesktop,path:e.path,env:e.env};Ga.oldDataWarning(kr.data);var o=Ga.getStat(e,kr.data);if(o){r.customUsage={};for(var u in o)IS(r.customUsage,u,o[u])}var f=JSON.stringify([t,r]);if(UE[f])return UE[f];var p=kZ(ug(t,r)).sort(function(x,s){if(x=x.split(" "),s=s.split(" "),x[0]===s[0]){var w=x[1].split("-")[0],I=s[1].split("-")[0];return R0(I.split("."),w.split("."))}else return Nb(x[0],s[0])});return Ga.env.BROWSERSLIST_DISABLE_CACHE||(UE[f]=p),p}kr.parse=function(t,e){return e=RZ(e),t=zZ(t,e),NZ(t),MZ(lO,t)};kr.cache={};kr.data={};kr.usage={global:{},custom:null};kr.defaults=["> 0.5%","last 2 versions","Firefox ESR","not dead"];kr.aliases={fx:"firefox",ff:"firefox",ios:"ios_saf",explorer:"ie",blackberry:"bb",explorermobile:"ie_mob",operamini:"op_mini",operamobile:"op_mob",chromeandroid:"and_chr",firefoxandroid:"and_ff",ucandroid:"and_uc",qqandroid:"and_qq"};kr.desktopNames={and_chr:"chrome",and_ff:"firefox",ie_mob:"ie",android:"chrome"};kr.versionAliases={};kr.clearCaches=Ga.clearCaches;kr.parseConfig=Ga.parseConfig;kr.readConfig=Ga.readConfig;kr.findConfig=Ga.findConfig;kr.loadConfig=Ga.loadConfig;kr.coverage=function(t,e){var r;if(typeof e>"u")r=kr.usage.global;else if(e==="my stats"){var o={};o.path=gw.resolve?gw.resolve("."):".";var u=Ga.getStat(o);if(!u)throw new xs("Custom usage statistics was not provided");r={};for(var f in u)IS(r,f,u[f])}else if(typeof e=="string")e.length>2?e=e.toLowerCase():e=e.toUpperCase(),Ga.loadCountry(kr.usage,e,kr.data),r=kr.usage[e];else{"dataByBrowser"in e&&(e=e.dataByBrowser),r={};for(var p in e)for(var x in e[p])r[p+" "+x]=e[p][x]}return t.reduce(function(s,w){var I=r[w];return I===void 0&&(I=r[w.replace(/ \S+$/," 0")]),s+(I||0)},0)};function VE(t,e){var r=kr.nodeVersions.filter(function(o){return OZ(o,e.version)});if(r.length===0){if(t.ignoreUnknownVersions)return[];throw new xs("Unknown version "+e.version+" of Node.js")}return["node "+r[r.length-1]]}function GE(t,e){var r=parseInt(e.year),o=parseInt(e.month||"01")-1,u=parseInt(e.day||"01");return LZ(Date.UTC(r,o,u,0,0,0),t)}function w$(t,e){var r=parseFloat(e.coverage),o=kr.usage.global;if(e.place)if(e.place.match(/^my\s+stats$/i)){if(!t.customUsage)throw new xs("Custom usage statistics was not provided");o=t.customUsage}else{var u;e.place.length===2?u=e.place.toUpperCase():u=e.place.toLowerCase(),Ga.loadCountry(kr.usage,u,kr.data),o=kr.usage[u]}for(var f=Object.keys(o).sort(function(I,P){return o[P]-o[I]}),p=0,x=[],s,w=0;w<f.length&&(s=f[w],!(o[s]===0||(p+=o[s],x.push(s),p>=r)));w++);return x}var lO={last_major_versions:{matches:["versions"],regexp:/^last\s+(\d+)\s+major\s+versions?$/i,select:function(t,e){return Object.keys(ah).reduce(function(r,o){var u=If(o,t);if(!u)return r;var f=pb(u.released,e.versions);return f=f.map(Cf(u.name)),f=gb(f,u.name,e.versions,t),r.concat(f)},[])}},last_versions:{matches:["versions"],regexp:/^last\s+(\d+)\s+versions?$/i,select:function(t,e){return Object.keys(ah).reduce(function(r,o){var u=If(o,t);if(!u)return r;var f=u.released.slice(-e.versions);return f=f.map(Cf(u.name)),f=gb(f,u.name,e.versions,t),r.concat(f)},[])}},last_electron_major_versions:{matches:["versions"],regexp:/^last\s+(\d+)\s+electron\s+major\s+versions?$/i,select:function(t,e){var r=pb(Object.keys(yu),e.versions);return r.map(function(o){return"chrome "+yu[o]})}},last_node_major_versions:{matches:["versions"],regexp:/^last\s+(\d+)\s+node\s+major\s+versions?$/i,select:function(t,e){return pb(kr.nodeVersions,e.versions).map(function(r){return"node "+r})}},last_browser_major_versions:{matches:["versions","browser"],regexp:/^last\s+(\d+)\s+(\w+)\s+major\s+versions?$/i,select:function(t,e){var r=ig(e.browser,t),o=pb(r.released,e.versions),u=o.map(Cf(r.name));return u=gb(u,r.name,e.versions,t),u}},last_electron_versions:{matches:["versions"],regexp:/^last\s+(\d+)\s+electron\s+versions?$/i,select:function(t,e){return Object.keys(yu).slice(-e.versions).map(function(r){return"chrome "+yu[r]})}},last_node_versions:{matches:["versions"],regexp:/^last\s+(\d+)\s+node\s+versions?$/i,select:function(t,e){return kr.nodeVersions.slice(-e.versions).map(function(r){return"node "+r})}},last_browser_versions:{matches:["versions","browser"],regexp:/^last\s+(\d+)\s+(\w+)\s+versions?$/i,select:function(t,e){var r=ig(e.browser,t),o=r.released.slice(-e.versions).map(Cf(r.name));return o=gb(o,r.name,e.versions,t),o}},unreleased_versions:{matches:[],regexp:/^unreleased\s+versions$/i,select:function(t){return Object.keys(ah).reduce(function(e,r){var o=If(r,t);if(!o)return e;var u=o.versions.filter(function(f){return o.released.indexOf(f)===-1});return u=u.map(Cf(o.name)),e.concat(u)},[])}},unreleased_electron_versions:{matches:[],regexp:/^unreleased\s+electron\s+versions?$/i,select:function(){return[]}},unreleased_browser_versions:{matches:["browser"],regexp:/^unreleased\s+(\w+)\s+versions?$/i,select:function(t,e){var r=ig(e.browser,t);return r.versions.filter(function(o){return r.released.indexOf(o)===-1}).map(Cf(r.name))}},last_years:{matches:["years"],regexp:/^last\s+(\d*.?\d+)\s+years?$/i,select:function(t,e){return LZ(Date.now()-xIe*e.years,t)}},since_y:{matches:["year"],regexp:/^since (\d+)$/i,select:GE},since_y_m:{matches:["year","month"],regexp:/^since (\d+)-(\d+)$/i,select:GE},since_y_m_d:{matches:["year","month","day"],regexp:/^since (\d+)-(\d+)-(\d+)$/i,select:GE},popularity:{matches:["sign","popularity"],regexp:/^(>=?|<=?)\s*(\d+|\d+\.\d+|\.\d+)%$/,select:function(t,e){var r=parseFloat(e.popularity),o=kr.usage.global;return Object.keys(o).reduce(function(u,f){return e.sign===">"?o[f]>r&&u.push(f):e.sign==="<"?o[f]<r&&u.push(f):e.sign==="<="?o[f]<=r&&u.push(f):o[f]>=r&&u.push(f),u},[])}},popularity_in_my_stats:{matches:["sign","popularity"],regexp:/^(>=?|<=?)\s*(\d+|\d+\.\d+|\.\d+)%\s+in\s+my\s+stats$/,select:function(t,e){var r=parseFloat(e.popularity);if(!t.customUsage)throw new xs("Custom usage statistics was not provided");var o=t.customUsage;return Object.keys(o).reduce(function(u,f){var p=o[f];return p==null||(e.sign===">"?p>r&&u.push(f):e.sign==="<"?p<r&&u.push(f):e.sign==="<="?p<=r&&u.push(f):p>=r&&u.push(f)),u},[])}},popularity_in_config_stats:{matches:["sign","popularity","config"],regexp:/^(>=?|<=?)\s*(\d+|\d+\.\d+|\.\d+)%\s+in\s+(\S+)\s+stats$/,select:function(t,e){var r=parseFloat(e.popularity),o=Ga.loadStat(t,e.config,kr.data);if(o){t.customUsage={};for(var u in o)IS(t.customUsage,u,o[u])}if(!t.customUsage)throw new xs("Custom usage statistics was not provided");var f=t.customUsage;return Object.keys(f).reduce(function(p,x){var s=f[x];return s==null||(e.sign===">"?s>r&&p.push(x):e.sign==="<"?s<r&&p.push(x):e.sign==="<="?s<=r&&p.push(x):s>=r&&p.push(x)),p},[])}},popularity_in_place:{matches:["sign","popularity","place"],regexp:/^(>=?|<=?)\s*(\d+|\d+\.\d+|\.\d+)%\s+in\s+((alt-)?\w\w)$/,select:function(t,e){var r=parseFloat(e.popularity),o=e.place;o.length===2?o=o.toUpperCase():o=o.toLowerCase(),Ga.loadCountry(kr.usage,o,kr.data);var u=kr.usage[o];return Object.keys(u).reduce(function(f,p){var x=u[p];return x==null||(e.sign===">"?x>r&&f.push(p):e.sign==="<"?x<r&&f.push(p):e.sign==="<="?x<=r&&f.push(p):x>=r&&f.push(p)),f},[])}},cover:{matches:["coverage"],regexp:/^cover\s+(\d+|\d+\.\d+|\.\d+)%$/i,select:w$},cover_in:{matches:["coverage","place"],regexp:/^cover\s+(\d+|\d+\.\d+|\.\d+)%\s+in\s+(my\s+stats|(alt-)?\w\w)$/i,select:w$},supports:{matches:["supportType","feature"],regexp:/^(?:(fully|partially)\s+)?supports\s+([\w-]+)$/,select:function(t,e){Ga.loadFeature(kr.cache,e.feature);var r=e.supportType!=="fully",o=kr.cache[e.feature],u=[];for(var f in o){var p=If(f,t),x=t.mobileToDesktop&&f in kr.desktopNames&&C$(o[f][p.released.slice(-1)[0]],r);p.versions.forEach(function(s){var w=o[f][s];w===void 0&&x&&(w=o[kr.desktopNames[f]][s]),C$(w,r)&&u.push(f+" "+s)})}return u}},electron_range:{matches:["from","to"],regexp:/^electron\s+([\d.]+)\s*-\s*([\d.]+)$/i,select:function(t,e){var r=db(e.from),o=db(e.to),u=parseFloat(e.from),f=parseFloat(e.to);if(!yu[r])throw new xs("Unknown version "+u+" of electron");if(!yu[o])throw new xs("Unknown version "+f+" of electron");return Object.keys(yu).filter(function(p){var x=parseFloat(p);return x>=u&&x<=f}).map(function(p){return"chrome "+yu[p]})}},node_range:{matches:["from","to"],regexp:/^node\s+([\d.]+)\s*-\s*([\d.]+)$/i,select:function(t,e){return kr.nodeVersions.filter(v$(">=",e.from)).filter(v$("<=",e.to)).map(function(r){return"node "+r})}},browser_range:{matches:["browser","from","to"],regexp:/^(\w+)\s+([\d.]+)\s*-\s*([\d.]+)$/i,select:function(t,e){var r=ig(e.browser,t),o=parseFloat(mb(r,e.from)||e.from),u=parseFloat(mb(r,e.to)||e.to);function f(p){var x=parseFloat(p);return x>=o&&x<=u}return r.released.filter(f).map(Cf(r.name))}},electron_ray:{matches:["sign","version"],regexp:/^electron\s*(>=?|<=?)\s*([\d.]+)$/i,select:function(t,e){var r=db(e.version);return Object.keys(yu).filter(y$(e.sign,r)).map(function(o){return"chrome "+yu[o]})}},node_ray:{matches:["sign","version"],regexp:/^node\s*(>=?|<=?)\s*([\d.]+)$/i,select:function(t,e){return kr.nodeVersions.filter(wIe(e.sign,e.version)).map(function(r){return"node "+r})}},browser_ray:{matches:["browser","sign","version"],regexp:/^(\w+)\s*(>=?|<=?)\s*([\d.]+)$/,select:function(t,e){var r=e.version,o=ig(e.browser,t),u=kr.versionAliases[o.name][r];return u&&(r=u),o.released.filter(y$(e.sign,r)).map(function(f){return o.name+" "+f})}},firefox_esr:{matches:[],regexp:/^(firefox|ff|fx)\s+esr$/i,select:function(){return["firefox 115"]}},opera_mini_all:{matches:[],regexp:/(operamini|op_mini)\s+all/i,select:function(){return["op_mini all"]}},electron_version:{matches:["version"],regexp:/^electron\s+([\d.]+)$/i,select:function(t,e){var r=db(e.version),o=yu[r];if(!o)throw new xs("Unknown version "+e.version+" of electron");return["chrome "+o]}},node_major_version:{matches:["version"],regexp:/^node\s+(\d+)$/i,select:VE},node_minor_version:{matches:["version"],regexp:/^node\s+(\d+\.\d+)$/i,select:VE},node_patch_version:{matches:["version"],regexp:/^node\s+(\d+\.\d+\.\d+)$/i,select:VE},current_node:{matches:[],regexp:/^current\s+node$/i,select:function(t){return[Ga.currentNode(ug,t)]}},maintained_node:{matches:[],regexp:/^maintained\s+node\s+versions$/i,select:function(t){var e=Date.now(),r=Object.keys($E).filter(function(o){return e<Date.parse($E[o].end)&&e>Date.parse($E[o].start)&&CIe(o)}).map(function(o){return"node "+o.slice(1)});return ug(r,t)}},phantomjs_1_9:{matches:[],regexp:/^phantomjs\s+1.9$/i,select:function(){return["safari 5"]}},phantomjs_2_1:{matches:[],regexp:/^phantomjs\s+2.1$/i,select:function(){return["safari 6"]}},browser_version:{matches:["browser","version"],regexp:/^(\w+)\s+(tp|[\d.]+)$/i,select:function(t,e){var r=e.version;/^tp$/i.test(r)&&(r="TP");var o=ig(e.browser,t),u=mb(o,r);if(u)r=u;else if(r.indexOf(".")===-1?u=r+".0":u=r.replace(/\.0$/,""),u=mb(o,u),u)r=u;else{if(t.ignoreUnknownVersions)return[];throw new xs("Unknown version "+r+" of "+e.browser)}return[o.name+" "+r]}},browserslist_config:{matches:[],regexp:/^browserslist config$/i,select:function(t){return kr(void 0,t)}},extends:{matches:["config"],regexp:/^extends (.+)$/i,select:function(t,e){return ug(Ga.loadQueries(t,e.config),t)}},defaults:{matches:[],regexp:/^defaults$/i,select:function(t){return ug(kr.defaults,t)}},dead:{matches:[],regexp:/^dead$/i,select:function(t){var e=["Baidu >= 0","ie <= 11","ie_mob <= 11","bb <= 10","op_mob <= 12.1","samsung 4"];return ug(e,t)}},unknown:{matches:[],regexp:/^(\w+)$/i,select:function(t,e){throw If(e.query,t)?new xs("Specify versions in Browserslist query for browser "+e.query):EIe(e.query)}}};(function(){for(var t in ah){var e=ah[t];kr.data[t]={name:t,versions:_$(ah[t].versions),released:_$(ah[t].versions.slice(0,-3)),releaseDate:ah[t].release_date},IS(kr.usage.global,t,e.usage_global),kr.versionAliases[t]={};for(var r=0;r<e.versions.length;r++){var o=e.versions[r];if(o&&o.indexOf("-")!==-1)for(var u=o.split("-"),f=0;f<u.length;f++)kr.versionAliases[t][u[f]]=o}}kr.nodeVersions=BIe.map(function(p){return p.version})})();var $k=kr,Ri={};const em=AV(FMe);let{list:uO}=em;Ri.error=function(t){let e=new Error(t);throw e.autoprefixer=!0,e};Ri.uniq=function(t){return[...new Set(t)]};Ri.removeNote=function(t){return t.includes(" ")?t.split(" ")[0]:t};Ri.escapeRegexp=function(t){return t.replace(/[$()*+-.?[\\\]^{|}]/g,"\\$&")};Ri.regexp=function(t,e=!0){return e&&(t=this.escapeRegexp(t)),new RegExp(`(^|[\\s,(])(${t}($|[\\s(,]))`,"gi")};Ri.editList=function(t,e){let r=uO.comma(t),o=e(r,[]);if(r===o)return t;let u=t.match(/,\s*/);return u=u?u[0]:", ",o.join(u)};Ri.splitSelector=function(t){return uO.comma(t).map(e=>uO.space(e).map(r=>r.split(/(?=\.|#)/g)))};Ri.isPureNumber=function(t){return typeof t=="number"?!0:typeof t=="string"?/^[0-9]+$/.test(t):!1};let DIe=$k,{agents:S$}=MS,PIe=Ri,MIe=class{constructor(e,r,o,u){this.data=e,this.options=o||{},this.browserslistOpts=u||{},this.selected=this.parse(r)}static prefixes(){if(this.prefixesCache)return this.prefixesCache;this.prefixesCache=[];for(let e in S$)this.prefixesCache.push(`-${S$[e].prefix}-`);return this.prefixesCache=PIe.uniq(this.prefixesCache).sort((e,r)=>r.length-e.length),this.prefixesCache}static withPrefix(e){return this.prefixesRegexp||(this.prefixesRegexp=new RegExp(this.prefixes().join("|"))),this.prefixesRegexp.test(e)}isSelected(e){return this.selected.includes(e)}parse(e){let r={};for(let o in this.browserslistOpts)r[o]=this.browserslistOpts[o];return r.path=this.options.from,DIe(e,r)}prefix(e){let[r,o]=e.split(" "),u=this.data[r],f=u.prefix_exceptions&&u.prefix_exceptions[o];return f||(f=u.prefix),`-${f}-`}};var tm=MIe,OS={prefix(t){let e=t.match(/^(-\w+-)/);return e?e[0]:""},unprefixed(t){return t.replace(/^-\w+-/,"")}};let IIe=tm,T$=OS,OIe=Ri;function cO(t,e){let r=new t.constructor;for(let o of Object.keys(t||{})){let u=t[o];o==="parent"&&typeof u=="object"?e&&(r[o]=e):o==="source"||o===null?r[o]=u:Array.isArray(u)?r[o]=u.map(f=>cO(f,r)):o!=="_autoprefixerPrefix"&&o!=="_autoprefixerValues"&&o!=="proxyCache"&&(typeof u=="object"&&u!==null&&(u=cO(u,r)),r[o]=u)}return r}let kIe=class FZ{constructor(e,r,o){this.prefixes=r,this.name=e,this.all=o}static clone(e,r){let o=cO(e);for(let u in r)o[u]=r[u];return o}static hack(e){return this.hacks||(this.hacks={}),e.names.map(r=>(this.hacks[r]=e,this.hacks[r]))}static load(e,r,o){let u=this.hacks&&this.hacks[e];return u?new u(e,r,o):new this(e,r,o)}clone(e,r){return FZ.clone(e,r)}parentPrefix(e){let r;return typeof e._autoprefixerPrefix<"u"?r=e._autoprefixerPrefix:e.type==="decl"&&e.prop[0]==="-"?r=T$.prefix(e.prop):e.type==="root"?r=!1:e.type==="rule"&&e.selector.includes(":-")&&/:(-\w+-)/.test(e.selector)?r=e.selector.match(/:(-\w+-)/)[1]:e.type==="atrule"&&e.name[0]==="-"?r=T$.prefix(e.name):r=this.parentPrefix(e.parent),IIe.prefixes().includes(r)||(r=!1),e._autoprefixerPrefix=r,e._autoprefixerPrefix}process(e,r){if(!this.check(e))return;let o=this.parentPrefix(e),u=this.prefixes.filter(p=>!o||o===OIe.removeNote(p)),f=[];for(let p of u)this.add(e,p,f.concat([p]),r)&&f.push(p);return f}};var NB=kIe;let LIe=NB,RIe=tm,A$=Ri,zIe=class extends LIe{add(e,r,o,u){let f=this.prefixed(e.prop,r);if(!(this.isAlready(e,f)||this.otherPrefixes(e.value,r)))return this.insert(e,r,o,u)}calcBefore(e,r,o=""){let f=this.maxPrefixed(e,r)-A$.removeNote(o).length,p=r.raw("before");return f>0&&(p+=Array(f).fill(" ").join("")),p}check(){return!0}insert(e,r,o){let u=this.set(this.clone(e),r);if(!(!u||e.parent.some(p=>p.prop===u.prop&&p.value===u.value)))return this.needCascade(e)&&(u.raws.before=this.calcBefore(o,e,r)),e.parent.insertBefore(e,u)}isAlready(e,r){let o=this.all.group(e).up(u=>u.prop===r);return o||(o=this.all.group(e).down(u=>u.prop===r)),o}maxPrefixed(e,r){if(r._autoprefixerMax)return r._autoprefixerMax;let o=0;for(let u of e)u=A$.removeNote(u),u.length>o&&(o=u.length);return r._autoprefixerMax=o,r._autoprefixerMax}needCascade(e){return e._autoprefixerCascade||(e._autoprefixerCascade=this.all.options.cascade!==!1&&e.raw("before").includes(`
`)),e._autoprefixerCascade}normalize(e){return e}old(e,r){return[this.prefixed(e,r)]}otherPrefixes(e,r){for(let o of RIe.prefixes())if(o!==r&&e.includes(o))return e.replace(/var\([^)]+\)/,"").includes(o);return!1}prefixed(e,r){return r+e}process(e,r){if(!this.needCascade(e)){super.process(e,r);return}let o=super.process(e,r);!o||!o.length||(this.restoreBefore(e),e.raws.before=this.calcBefore(o,e))}restoreBefore(e){let r=e.raw("before").split(`
`),o=r[r.length-1];this.all.group(e).up(u=>{let f=u.raw("before").split(`
`),p=f[f.length-1];p.length<o.length&&(o=p)}),r[r.length-1]=o,e.raws.before=r.join(`
`)}set(e,r){return e.prop=this.prefixed(e.prop,r),e}};var wn=zIe,hO={exports:{}};/**
 * @license Fraction.js v4.3.7 31/08/2023
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2023, Robert Eisele (robert@raw.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(t,e){(function(r){var o=2e3,u={s:1,n:0,d:1};function f(Z,H){if(isNaN(Z=parseInt(Z,10)))throw Q();return Z*H}function p(Z,H){if(H===0)throw X();var K=Object.create(U.prototype);K.s=Z<0?-1:1,Z=Z<0?-Z:Z;var ee=N(Z,H);return K.n=Z/ee,K.d=H/ee,K}function x(Z){for(var H={},K=Z,ee=2,se=4;se<=K;){for(;K%ee===0;)K/=ee,H[ee]=(H[ee]||0)+1;se+=1+2*ee++}return K!==Z?K>1&&(H[K]=(H[K]||0)+1):H[Z]=(H[Z]||0)+1,H}var s=function(Z,H){var K=0,ee=1,se=1,me=0,Ce=0,Ae=0,De=1,qe=1,je=0,Oe=1,ct=1,ht=1,We=1e7,Je;if(Z!=null)if(H!==void 0){if(K=Z,ee=H,se=K*ee,K%1!==0||ee%1!==0)throw J()}else switch(typeof Z){case"object":{if("d"in Z&&"n"in Z)K=Z.n,ee=Z.d,"s"in Z&&(K*=Z.s);else if(0 in Z)K=Z[0],1 in Z&&(ee=Z[1]);else throw Q();se=K*ee;break}case"number":{if(Z<0&&(se=Z,Z=-Z),Z%1===0)K=Z;else if(Z>0){for(Z>=1&&(qe=Math.pow(10,Math.floor(1+Math.log(Z)/Math.LN10)),Z/=qe);Oe<=We&&ht<=We;)if(Je=(je+ct)/(Oe+ht),Z===Je){Oe+ht<=We?(K=je+ct,ee=Oe+ht):ht>Oe?(K=ct,ee=ht):(K=je,ee=Oe);break}else Z>Je?(je+=ct,Oe+=ht):(ct+=je,ht+=Oe),Oe>We?(K=ct,ee=ht):(K=je,ee=Oe);K*=qe}else(isNaN(Z)||isNaN(H))&&(ee=K=NaN);break}case"string":{if(Oe=Z.match(/\d+|./g),Oe===null)throw Q();if(Oe[je]==="-"?(se=-1,je++):Oe[je]==="+"&&je++,Oe.length===je+1?Ce=f(Oe[je++],se):Oe[je+1]==="."||Oe[je]==="."?(Oe[je]!=="."&&(me=f(Oe[je++],se)),je++,(je+1===Oe.length||Oe[je+1]==="("&&Oe[je+3]===")"||Oe[je+1]==="'"&&Oe[je+3]==="'")&&(Ce=f(Oe[je],se),De=Math.pow(10,Oe[je].length),je++),(Oe[je]==="("&&Oe[je+2]===")"||Oe[je]==="'"&&Oe[je+2]==="'")&&(Ae=f(Oe[je+1],se),qe=Math.pow(10,Oe[je+1].length)-1,je+=3)):Oe[je+1]==="/"||Oe[je+1]===":"?(Ce=f(Oe[je],se),De=f(Oe[je+2],1),je+=3):Oe[je+3]==="/"&&Oe[je+1]===" "&&(me=f(Oe[je],se),Ce=f(Oe[je+2],se),De=f(Oe[je+4],1),je+=5),Oe.length<=je){ee=De*qe,se=K=Ae+ee*me+qe*Ce;break}}default:throw Q()}if(ee===0)throw X();u.s=se<0?-1:1,u.n=Math.abs(K),u.d=Math.abs(ee)};function w(Z,H,K){for(var ee=1;H>0;Z=Z*Z%K,H>>=1)H&1&&(ee=ee*Z%K);return ee}function I(Z,H){for(;H%2===0;H/=2);for(;H%5===0;H/=5);if(H===1)return 0;for(var K=10%H,ee=1;K!==1;ee++)if(K=K*10%H,ee>o)return 0;return ee}function P(Z,H,K){for(var ee=1,se=w(10,K,H),me=0;me<300;me++){if(ee===se)return me;ee=ee*10%H,se=se*10%H}return 0}function N(Z,H){if(!Z)return H;if(!H)return Z;for(;;){if(Z%=H,!Z)return H;if(H%=Z,!H)return Z}}function U(Z,H){if(s(Z,H),this instanceof U)Z=N(u.d,u.n),this.s=u.s,this.n=u.n/Z,this.d=u.d/Z;else return p(u.s*u.n,u.d)}var X=function(){return new Error("Division by Zero")},Q=function(){return new Error("Invalid argument")},J=function(){return new Error("Parameters must be integer")};U.prototype={s:1,n:0,d:1,abs:function(){return p(this.n,this.d)},neg:function(){return p(-this.s*this.n,this.d)},add:function(Z,H){return s(Z,H),p(this.s*this.n*u.d+u.s*this.d*u.n,this.d*u.d)},sub:function(Z,H){return s(Z,H),p(this.s*this.n*u.d-u.s*this.d*u.n,this.d*u.d)},mul:function(Z,H){return s(Z,H),p(this.s*u.s*this.n*u.n,this.d*u.d)},div:function(Z,H){return s(Z,H),p(this.s*u.s*this.n*u.d,this.d*u.n)},clone:function(){return p(this.s*this.n,this.d)},mod:function(Z,H){if(isNaN(this.n)||isNaN(this.d))return new U(NaN);if(Z===void 0)return p(this.s*this.n%this.d,1);if(s(Z,H),u.n===0&&this.d===0)throw X();return p(this.s*(u.d*this.n)%(u.n*this.d),u.d*this.d)},gcd:function(Z,H){return s(Z,H),p(N(u.n,this.n)*N(u.d,this.d),u.d*this.d)},lcm:function(Z,H){return s(Z,H),u.n===0&&this.n===0?p(0,1):p(u.n*this.n,N(u.n,this.n)*N(u.d,this.d))},ceil:function(Z){return Z=Math.pow(10,Z||0),isNaN(this.n)||isNaN(this.d)?new U(NaN):p(Math.ceil(Z*this.s*this.n/this.d),Z)},floor:function(Z){return Z=Math.pow(10,Z||0),isNaN(this.n)||isNaN(this.d)?new U(NaN):p(Math.floor(Z*this.s*this.n/this.d),Z)},round:function(Z){return Z=Math.pow(10,Z||0),isNaN(this.n)||isNaN(this.d)?new U(NaN):p(Math.round(Z*this.s*this.n/this.d),Z)},roundTo:function(Z,H){return s(Z,H),p(this.s*Math.round(this.n*u.d/(this.d*u.n))*u.n,u.d)},inverse:function(){return p(this.s*this.d,this.n)},pow:function(Z,H){if(s(Z,H),u.d===1)return u.s<0?p(Math.pow(this.s*this.d,u.n),Math.pow(this.n,u.n)):p(Math.pow(this.s*this.n,u.n),Math.pow(this.d,u.n));if(this.s<0)return null;var K=x(this.n),ee=x(this.d),se=1,me=1;for(var Ce in K)if(Ce!=="1"){if(Ce==="0"){se=0;break}if(K[Ce]*=u.n,K[Ce]%u.d===0)K[Ce]/=u.d;else return null;se*=Math.pow(Ce,K[Ce])}for(var Ce in ee)if(Ce!=="1"){if(ee[Ce]*=u.n,ee[Ce]%u.d===0)ee[Ce]/=u.d;else return null;me*=Math.pow(Ce,ee[Ce])}return u.s<0?p(me,se):p(se,me)},equals:function(Z,H){return s(Z,H),this.s*this.n*u.d===u.s*u.n*this.d},compare:function(Z,H){s(Z,H);var K=this.s*this.n*u.d-u.s*u.n*this.d;return(0<K)-(K<0)},simplify:function(Z){if(isNaN(this.n)||isNaN(this.d))return this;Z=Z||.001;for(var H=this.abs(),K=H.toContinued(),ee=1;ee<K.length;ee++){for(var se=p(K[ee-1],1),me=ee-2;me>=0;me--)se=se.inverse().add(K[me]);if(Math.abs(se.sub(H).valueOf())<Z)return se.mul(this.s)}return this},divisible:function(Z,H){return s(Z,H),!(!(u.n*this.d)||this.n*u.d%(u.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(Z){var H,K="",ee=this.n,se=this.d;return this.s<0&&(K+="-"),se===1?K+=ee:(Z&&(H=Math.floor(ee/se))>0&&(K+=H,K+=" ",ee%=se),K+=ee,K+="/",K+=se),K},toLatex:function(Z){var H,K="",ee=this.n,se=this.d;return this.s<0&&(K+="-"),se===1?K+=ee:(Z&&(H=Math.floor(ee/se))>0&&(K+=H,ee%=se),K+="\\frac{",K+=ee,K+="}{",K+=se,K+="}"),K},toContinued:function(){var Z,H=this.n,K=this.d,ee=[];if(isNaN(H)||isNaN(K))return ee;do ee.push(Math.floor(H/K)),Z=H%K,H=K,K=Z;while(H!==1);return ee},toString:function(Z){var H=this.n,K=this.d;if(isNaN(H)||isNaN(K))return"NaN";Z=Z||15;var ee=I(H,K),se=P(H,K,ee),me=this.s<0?"-":"";if(me+=H/K|0,H%=K,H*=10,H&&(me+="."),ee){for(var Ce=se;Ce--;)me+=H/K|0,H%=K,H*=10;me+="(";for(var Ce=ee;Ce--;)me+=H/K|0,H%=K,H*=10;me+=")"}else for(var Ce=Z;H&&Ce--;)me+=H/K|0,H%=K,H*=10;return me}},Object.defineProperty(e,"__esModule",{value:!0}),e.default=U,t.exports=U})()})(hO,hO.exports);var NIe=hO.exports;let FIe=NIe,jIe=NB,HE=Ri;const $Ie=/(min|max)-resolution\s*:\s*\d*\.?\d+(dppx|dpcm|dpi|x)/gi,UIe=/(min|max)-resolution(\s*:\s*)(\d*\.?\d+)(dppx|dpcm|dpi|x)/i;let VIe=class extends jIe{clean(e){if(!this.bad){this.bad=[];for(let r of this.prefixes)this.bad.push(this.prefixName(r,"min")),this.bad.push(this.prefixName(r,"max"))}e.params=HE.editList(e.params,r=>r.filter(o=>this.bad.every(u=>!o.includes(u))))}prefixName(e,r){return e==="-moz-"?r+"--moz-device-pixel-ratio":e+r+"-device-pixel-ratio"}prefixQuery(e,r,o,u,f){return u=new FIe(u),f==="dpi"?u=u.div(96):f==="dpcm"&&(u=u.mul(2.54).div(96)),u=u.simplify(),e==="-o-"&&(u=u.n+"/"+u.d),this.prefixName(e,r)+o+u}process(e){let r=this.parentPrefix(e),o=r?[r]:this.prefixes;e.params=HE.editList(e.params,(u,f)=>{for(let p of u){if(!p.includes("min-resolution")&&!p.includes("max-resolution")){f.push(p);continue}for(let x of o){let s=p.replace($Ie,w=>{let I=w.match(UIe);return this.prefixQuery(x,I[1],I[2],I[3],I[4])});f.push(s)}f.push(p)}return HE.uniq(f)})}};var GIe=VIe,WE=40,ZE=41,_b=39,qE=34,KE=92,og=47,XE=44,YE=58,yb=42,HIe=117,WIe=85,ZIe=43,qIe=/^[a-f0-9?-]+$/i,KIe=function(t){for(var e=[],r=t,o,u,f,p,x,s,w,I,P=0,N=r.charCodeAt(P),U=r.length,X=[{nodes:e}],Q=0,J,Z="",H="",K="";P<U;)if(N<=32){o=P;do o+=1,N=r.charCodeAt(o);while(N<=32);p=r.slice(P,o),f=e[e.length-1],N===ZE&&Q?K=p:f&&f.type==="div"?(f.after=p,f.sourceEndIndex+=p.length):N===XE||N===YE||N===og&&r.charCodeAt(o+1)!==yb&&(!J||J&&J.type==="function"&&J.value!=="calc")?H=p:e.push({type:"space",sourceIndex:P,sourceEndIndex:o,value:p}),P=o}else if(N===_b||N===qE){o=P,u=N===_b?"'":'"',p={type:"string",sourceIndex:P,quote:u};do if(x=!1,o=r.indexOf(u,o+1),~o)for(s=o;r.charCodeAt(s-1)===KE;)s-=1,x=!x;else r+=u,o=r.length-1,p.unclosed=!0;while(x);p.value=r.slice(P+1,o),p.sourceEndIndex=p.unclosed?o:o+1,e.push(p),P=o+1,N=r.charCodeAt(P)}else if(N===og&&r.charCodeAt(P+1)===yb)o=r.indexOf("*/",P),p={type:"comment",sourceIndex:P,sourceEndIndex:o+2},o===-1&&(p.unclosed=!0,o=r.length,p.sourceEndIndex=o),p.value=r.slice(P+2,o),e.push(p),P=o+2,N=r.charCodeAt(P);else if((N===og||N===yb)&&J&&J.type==="function"&&J.value==="calc")p=r[P],e.push({type:"word",sourceIndex:P-H.length,sourceEndIndex:P+p.length,value:p}),P+=1,N=r.charCodeAt(P);else if(N===og||N===XE||N===YE)p=r[P],e.push({type:"div",sourceIndex:P-H.length,sourceEndIndex:P+p.length,value:p,before:H,after:""}),H="",P+=1,N=r.charCodeAt(P);else if(WE===N){o=P;do o+=1,N=r.charCodeAt(o);while(N<=32);if(I=P,p={type:"function",sourceIndex:P-Z.length,value:Z,before:r.slice(I+1,o)},P=o,Z==="url"&&N!==_b&&N!==qE){o-=1;do if(x=!1,o=r.indexOf(")",o+1),~o)for(s=o;r.charCodeAt(s-1)===KE;)s-=1,x=!x;else r+=")",o=r.length-1,p.unclosed=!0;while(x);w=o;do w-=1,N=r.charCodeAt(w);while(N<=32);I<w?(P!==w+1?p.nodes=[{type:"word",sourceIndex:P,sourceEndIndex:w+1,value:r.slice(P,w+1)}]:p.nodes=[],p.unclosed&&w+1!==o?(p.after="",p.nodes.push({type:"space",sourceIndex:w+1,sourceEndIndex:o,value:r.slice(w+1,o)})):(p.after=r.slice(w+1,o),p.sourceEndIndex=o)):(p.after="",p.nodes=[]),P=o+1,p.sourceEndIndex=p.unclosed?o:P,N=r.charCodeAt(P),e.push(p)}else Q+=1,p.after="",p.sourceEndIndex=P+1,e.push(p),X.push(p),e=p.nodes=[],J=p;Z=""}else if(ZE===N&&Q)P+=1,N=r.charCodeAt(P),J.after=K,J.sourceEndIndex+=K.length,K="",Q-=1,X[X.length-1].sourceEndIndex=P,X.pop(),J=X[Q],e=J.nodes;else{o=P;do N===KE&&(o+=1),o+=1,N=r.charCodeAt(o);while(o<U&&!(N<=32||N===_b||N===qE||N===XE||N===YE||N===og||N===WE||N===yb&&J&&J.type==="function"&&J.value==="calc"||N===og&&J.type==="function"&&J.value==="calc"||N===ZE&&Q));p=r.slice(P,o),WE===N?Z=p:(HIe===p.charCodeAt(0)||WIe===p.charCodeAt(0))&&ZIe===p.charCodeAt(1)&&qIe.test(p.slice(2))?e.push({type:"unicode-range",sourceIndex:P,sourceEndIndex:o,value:p}):e.push({type:"word",sourceIndex:P,sourceEndIndex:o,value:p}),P=o}for(P=X.length-1;P;P-=1)X[P].unclosed=!0,X[P].sourceEndIndex=r.length;return X[0].nodes},XIe=function t(e,r,o){var u,f,p,x;for(u=0,f=e.length;u<f;u+=1)p=e[u],o||(x=r(p,u,e)),x!==!1&&p.type==="function"&&Array.isArray(p.nodes)&&t(p.nodes,r,o),o&&r(p,u,e)};function E$(t,e){var r=t.type,o=t.value,u,f;return e&&(f=e(t))!==void 0?f:r==="word"||r==="space"?o:r==="string"?(u=t.quote||"",u+o+(t.unclosed?"":u)):r==="comment"?"/*"+o+(t.unclosed?"":"*/"):r==="div"?(t.before||"")+o+(t.after||""):Array.isArray(t.nodes)?(u=jZ(t.nodes,e),r!=="function"?u:o+"("+(t.before||"")+u+(t.after||"")+(t.unclosed?"":")")):o}function jZ(t,e){var r,o;if(Array.isArray(t)){for(r="",o=t.length-1;~o;o-=1)r=E$(t[o],e)+r;return r}return E$(t,e)}var YIe=jZ,JE,D$;function JIe(){if(D$)return JE;D$=1;var t=45,e=43,r=46,o=101,u=69;function f(p){var x=p.charCodeAt(0),s;if(x===e||x===t){if(s=p.charCodeAt(1),s>=48&&s<=57)return!0;var w=p.charCodeAt(2);return s===r&&w>=48&&w<=57}return x===r?(s=p.charCodeAt(1),s>=48&&s<=57):x>=48&&x<=57}return JE=function(p){var x=0,s=p.length,w,I,P;if(s===0||!f(p))return!1;for(w=p.charCodeAt(x),(w===e||w===t)&&x++;x<s&&(w=p.charCodeAt(x),!(w<48||w>57));)x+=1;if(w=p.charCodeAt(x),I=p.charCodeAt(x+1),w===r&&I>=48&&I<=57)for(x+=2;x<s&&(w=p.charCodeAt(x),!(w<48||w>57));)x+=1;if(w=p.charCodeAt(x),I=p.charCodeAt(x+1),P=p.charCodeAt(x+2),(w===o||w===u)&&(I>=48&&I<=57||(I===e||I===t)&&P>=48&&P<=57))for(x+=I===e||I===t?3:2;x<s&&(w=p.charCodeAt(x),!(w<48||w>57));)x+=1;return{number:p.slice(0,x),unit:p.slice(x)}},JE}var QIe=KIe,$Z=XIe,UZ=YIe;function Qf(t){return this instanceof Qf?(this.nodes=QIe(t),this):new Qf(t)}Qf.prototype.toString=function(){return Array.isArray(this.nodes)?UZ(this.nodes):""};Qf.prototype.walk=function(t,e){return $Z(this.nodes,t,e),this};Qf.unit=JIe();Qf.walk=$Z;Qf.stringify=UZ;var kS=Qf;let{list:eOe}=em,P$=kS,tOe=tm,M$=OS,rOe=class{constructor(e){this.props=["transition","transition-property"],this.prefixes=e}add(e,r){let o,u,f=this.prefixes.add[e.prop],p=this.ruleVendorPrefixes(e),x=p||f&&f.prefixes||[],s=this.parse(e.value),w=s.map(U=>this.findProp(U)),I=[];if(w.some(U=>U[0]==="-"))return;for(let U of s){if(u=this.findProp(U),u[0]==="-")continue;let X=this.prefixes.add[u];if(!(!X||!X.prefixes))for(o of X.prefixes){if(p&&!p.some(J=>o.includes(J)))continue;let Q=this.prefixes.prefixed(u,o);Q!=="-ms-transform"&&!w.includes(Q)&&(this.disabled(u,o)||I.push(this.clone(u,Q,U)))}}s=s.concat(I);let P=this.stringify(s),N=this.stringify(this.cleanFromUnprefixed(s,"-webkit-"));if(x.includes("-webkit-")&&this.cloneBefore(e,`-webkit-${e.prop}`,N),this.cloneBefore(e,e.prop,N),x.includes("-o-")){let U=this.stringify(this.cleanFromUnprefixed(s,"-o-"));this.cloneBefore(e,`-o-${e.prop}`,U)}for(o of x)if(o!=="-webkit-"&&o!=="-o-"){let U=this.stringify(this.cleanOtherPrefixes(s,o));this.cloneBefore(e,o+e.prop,U)}P!==e.value&&!this.already(e,e.prop,P)&&(this.checkForWarning(r,e),e.cloneBefore(),e.value=P)}already(e,r,o){return e.parent.some(u=>u.prop===r&&u.value===o)}checkForWarning(e,r){if(r.prop!=="transition-property")return;let o=!1,u=!1;r.parent.each(f=>{if(f.type!=="decl"||f.prop.indexOf("transition-")!==0)return;let p=eOe.comma(f.value);if(f.prop==="transition-property"){p.forEach(x=>{let s=this.prefixes.add[x];s&&s.prefixes&&s.prefixes.length>0&&(o=!0)});return}return u=u||p.length>1,!1}),o&&u&&r.warn(e,"Replace transition-property to transition, because Autoprefixer could not support any cases of transition-property and other transition-*")}cleanFromUnprefixed(e,r){let o=e.map(f=>this.findProp(f)).filter(f=>f.slice(0,r.length)===r).map(f=>this.prefixes.unprefixed(f)),u=[];for(let f of e){let p=this.findProp(f),x=M$.prefix(p);!o.includes(p)&&(x===r||x==="")&&u.push(f)}return u}cleanOtherPrefixes(e,r){return e.filter(o=>{let u=M$.prefix(this.findProp(o));return u===""||u===r})}clone(e,r,o){let u=[],f=!1;for(let p of o)!f&&p.type==="word"&&p.value===e?(u.push({type:"word",value:r}),f=!0):u.push(p);return u}cloneBefore(e,r,o){this.already(e,r,o)||e.cloneBefore({prop:r,value:o})}disabled(e,r){let o=["order","justify-content","align-self","align-content"];if(e.includes("flex")||o.includes(e)){if(this.prefixes.options.flexbox===!1)return!0;if(this.prefixes.options.flexbox==="no-2009")return r.includes("2009")}}div(e){for(let r of e)for(let o of r)if(o.type==="div"&&o.value===",")return o;return{after:" ",type:"div",value:","}}findProp(e){let r=e[0].value;if(/^\d/.test(r)){for(let[o,u]of e.entries())if(o!==0&&u.type==="word")return u.value}return r}parse(e){let r=P$(e),o=[],u=[];for(let f of r.nodes)u.push(f),f.type==="div"&&f.value===","&&(o.push(u),u=[]);return o.push(u),o.filter(f=>f.length>0)}remove(e){let r=this.parse(e.value);r=r.filter(p=>{let x=this.prefixes.remove[this.findProp(p)];return!x||!x.remove});let o=this.stringify(r);if(e.value===o)return;if(r.length===0){e.remove();return}let u=e.parent.some(p=>p.prop===e.prop&&p.value===o),f=e.parent.some(p=>p!==e&&p.prop===e.prop&&p.value.length>o.length);if(u||f){e.remove();return}e.value=o}ruleVendorPrefixes(e){let{parent:r}=e;if(r.type!=="rule")return!1;if(!r.selector.includes(":-"))return!1;let o=tOe.prefixes().filter(u=>r.selector.includes(":"+u));return o.length>0?o:!1}stringify(e){if(e.length===0)return"";let r=[];for(let o of e)o[o.length-1].type!=="div"&&o.push(this.div(e)),r=r.concat(o);return r[0].type==="div"&&(r=r.slice(1)),r[r.length-1].type==="div"&&(r=r.slice(0,-1)),P$.stringify({nodes:r})}};var nOe=rOe;let iOe=Ri,oOe=class{constructor(e,r,o,u){this.unprefixed=e,this.prefixed=r,this.string=o||r,this.regexp=u||iOe.regexp(r)}check(e){return e.includes(this.string)?!!e.match(this.regexp):!1}};var FB=oOe;let aOe=NB,sOe=FB,lOe=OS,uOe=Ri,cOe=class extends aOe{static save(e,r){let o=r.prop,u=[];for(let f in r._autoprefixerValues){let p=r._autoprefixerValues[f];if(p===r.value)continue;let x,s=lOe.prefix(o);if(s==="-pie-")continue;if(s===f){x=r.value=p,u.push(x);continue}let w=e.prefixed(o,f),I=r.parent;if(!I.every(X=>X.prop!==w)){u.push(x);continue}let P=p.replace(/\s+/," ");if(I.some(X=>X.prop===r.prop&&X.value.replace(/\s+/," ")===P)){u.push(x);continue}let U=this.clone(r,{value:p});x=r.parent.insertBefore(r,U),u.push(x)}return u}add(e,r){e._autoprefixerValues||(e._autoprefixerValues={});let o=e._autoprefixerValues[r]||this.value(e),u;do if(u=o,o=this.replace(o,r),o===!1)return;while(o!==u);e._autoprefixerValues[r]=o}check(e){let r=e.value;return r.includes(this.name)?!!r.match(this.regexp()):!1}old(e){return new sOe(this.name,e+this.name)}regexp(){return this.regexpCache||(this.regexpCache=uOe.regexp(this.name))}replace(e,r){return e.replace(this.regexp(),`$1${r}$2`)}value(e){return e.raws.value&&e.raws.value.value===e.value?e.raws.value.raw:e.value}};var Ou=cOe,vo={};let rl=kS,m_=em.list,I$=Ri.uniq,hOe=Ri.escapeRegexp,fO=Ri.splitSelector;function O$(t){return t&&t.length===2&&t[0]==="span"&&parseInt(t[1],10)>0?[!1,parseInt(t[1],10)]:t&&t.length===1&&parseInt(t[0],10)>0?[parseInt(t[0],10),!1]:[!1,!1]}vo.translate=fOe;function fOe(t,e,r){let o=t[e],u=t[r];if(!o)return[!1,!1];let[f,p]=O$(o),[x,s]=O$(u);return f&&!u?[f,!1]:p&&x?[x-p,p]:f&&s?[f,s]:f&&x?[f,x-f]:[!1,!1]}vo.parse=dOe;function dOe(t){let e=rl(t.value),r=[],o=0;r[o]=[];for(let u of e.nodes)u.type==="div"?(o+=1,r[o]=[]):u.type==="word"&&r[o].push(u.value);return r}vo.insertDecl=pOe;function pOe(t,e,r){r&&!t.parent.some(o=>o.prop===`-ms-${e}`)&&t.cloneBefore({prop:`-ms-${e}`,value:r.toString()})}vo.prefixTrackProp=mOe;function mOe({prefix:t,prop:e}){return t+e.replace("template-","")}function gOe({nodes:t},{gap:e}){let{count:r,size:o}=t.reduce((u,f)=>(f.type==="div"&&f.value===","?u.key="size":u[u.key].push(rl.stringify(f)),u),{count:[],key:"count",size:[]});if(e){o=o.filter(f=>f.trim());let u=[];for(let f=1;f<=r;f++)o.forEach((p,x)=>{(x>0||f>1)&&u.push(e),u.push(p)});return u.join(" ")}return`(${o.join("")})[${r.join("")}]`}vo.prefixTrackValue=dO;function dO({gap:t,value:e}){let r=rl(e).nodes.reduce((o,u)=>u.type==="function"&&u.value==="repeat"?o.concat({type:"word",value:gOe(u,{gap:t})}):t&&u.type==="space"?o.concat({type:"space",value:" "},{type:"word",value:t},u):o.concat(u),[]);return rl.stringify(r)}let _Oe=/^\.+$/;function k$(t,e){return{end:e,span:e-t,start:t}}function yOe(t){return t.trim().split(/\s+/g)}vo.parseGridAreas=Uk;function Uk({gap:t,rows:e}){return e.reduce((r,o,u)=>(t.row&&(u*=2),o.trim()===""||yOe(o).forEach((f,p)=>{if(!_Oe.test(f))if(t.column&&(p*=2),typeof r[f]>"u")r[f]={column:k$(p+1,p+2),row:k$(u+1,u+2)};else{let{column:x,row:s}=r[f];x.start=Math.min(x.start,p+1),x.end=Math.max(x.end,p+2),x.span=x.end-x.start,s.start=Math.min(s.start,u+1),s.end=Math.max(s.end,u+2),s.span=s.end-s.start}}),r),{})}function vOe(t){return t.type==="word"&&/^\[.+]$/.test(t.value)}function L$(t){return t.areas.length>t.rows.length&&t.rows.push("auto"),t}vo.parseTemplate=Vk;function Vk({decl:t,gap:e}){let r=rl(t.value).nodes.reduce((o,u)=>{let{type:f,value:p}=u;return vOe(u)||f==="space"||(f==="string"&&(o=L$(o),o.areas.push(p)),(f==="word"||f==="function")&&o[o.key].push(rl.stringify(u)),f==="div"&&p==="/"&&(o.key="columns",o=L$(o))),o},{areas:[],columns:[],key:"rows",rows:[]});return{areas:Uk({gap:e,rows:r.areas}),columns:dO({gap:e.column,value:r.columns.join(" ")}),rows:dO({gap:e.row,value:r.rows.join(" ")})}}function vb(t,e=!1,r=!1){let o=[{prop:"-ms-grid-row",value:String(t.row.start)}];return(t.row.span>1||e)&&o.push({prop:"-ms-grid-row-span",value:String(t.row.span)}),o.push({prop:"-ms-grid-column",value:String(t.column.start)}),(t.column.span>1||r)&&o.push({prop:"-ms-grid-column-span",value:String(t.column.span)}),o}function dB(t){return t.type==="atrule"&&t.name==="media"?t:t.parent?dB(t.parent):!1}function R$(t,e){return t=t.map(r=>{let o=m_.space(r),u=m_.comma(r);return o.length>u.length&&(r=o.slice(-1).join("")),r}),t.map(r=>e.map((u,f)=>`${f===0?"":" "}${u} > ${r}`))}function z$(t,e){return t.selectors.some(r=>e.selectors.includes(r))}function BOe(t){let e=[];return t.walkDecls(/grid-template(-areas)?$/,r=>{let o=r.parent,u=dB(o),f=LS(r),p=VZ(r,f),{areas:x}=Vk({decl:r,gap:p||f}),s=Object.keys(x);if(s.length===0)return!0;let w=e.reduce((I,{allAreas:P},N)=>P&&s.some(X=>P.includes(X))?N:I,null);if(w!==null){let{allAreas:I,rules:P}=e[w],N=P.some(Q=>Q.hasDuplicates===!1&&z$(Q,o)),U=!1,X=P.reduce((Q,J)=>!J.params&&z$(J,o)?(U=!0,J.duplicateAreaNames):(U||s.forEach(Z=>{J.areas[Z]&&Q.push(Z)}),I$(Q)),[]);P.forEach(Q=>{s.forEach(J=>{let Z=Q.areas[J];Z&&Z.row.span!==x[J].row.span&&(x[J].row.updateSpan=!0),Z&&Z.column.span!==x[J].column.span&&(x[J].column.updateSpan=!0)})}),e[w].allAreas=I$([...I,...s]),e[w].rules.push({areas:x,duplicateAreaNames:X,hasDuplicates:!N,node:o,params:u.params,selectors:o.selectors})}else e.push({allAreas:s,areasCount:0,rules:[{areas:x,duplicateAreaNames:[],duplicateRules:[],hasDuplicates:!1,node:o,params:u.params,selectors:o.selectors}]})}),e}vo.insertAreas=xOe;function xOe(t,e){let r=BOe(t);if(r.length===0)return;let o={};t.walkDecls("grid-area",u=>{let f=u.parent,p=f.first.prop==="-ms-grid-row",x=dB(f);if(e(u))return;let s=t.index(x||f),w=u.value,I=r.filter(J=>J.allAreas.includes(w))[0];if(!I)return!0;let P=I.allAreas[I.allAreas.length-1],N=m_.space(f.selector),U=m_.comma(f.selector),X=N.length>1&&N.length>U.length;if(p)return!1;o[P]||(o[P]={});let Q=!1;for(let J of I.rules){let Z=J.areas[w],H=J.duplicateAreaNames.includes(w);if(!Z){let K=o[P].lastRule,ee;K?ee=t.index(K):ee=-1,s>ee&&(o[P].lastRule=x||f);continue}if(J.params&&!o[P][J.params]&&(o[P][J.params]=[]),(!J.hasDuplicates||!H)&&!J.params)vb(Z,!1,!1).reverse().forEach(K=>f.prepend(Object.assign(K,{raws:{between:u.raws.between}}))),o[P].lastRule=f,Q=!0;else if(J.hasDuplicates&&!J.params&&!X){let K=f.clone();K.removeAll(),vb(Z,Z.row.updateSpan,Z.column.updateSpan).reverse().forEach(ee=>K.prepend(Object.assign(ee,{raws:{between:u.raws.between}}))),K.selectors=R$(K.selectors,J.selectors),o[P].lastRule&&o[P].lastRule.after(K),o[P].lastRule=K,Q=!0}else if(J.hasDuplicates&&!J.params&&X&&f.selector.includes(J.selectors[0]))f.walkDecls(/-ms-grid-(row|column)/,K=>K.remove()),vb(Z,Z.row.updateSpan,Z.column.updateSpan).reverse().forEach(K=>f.prepend(Object.assign(K,{raws:{between:u.raws.between}})));else if(J.params){let K=f.clone();K.removeAll(),vb(Z,Z.row.updateSpan,Z.column.updateSpan).reverse().forEach(ee=>K.prepend(Object.assign(ee,{raws:{between:u.raws.between}}))),J.hasDuplicates&&H&&(K.selectors=R$(K.selectors,J.selectors)),K.raws=J.node.raws,t.index(J.node.parent)>s?J.node.parent.append(K):o[P][J.params].push(K),Q||(o[P].lastRule=x||f)}}}),Object.keys(o).forEach(u=>{let f=o[u],p=f.lastRule;Object.keys(f).reverse().filter(x=>x!=="lastRule").forEach(x=>{f[x].length>0&&p&&(p.after({name:"media",params:x}),p.next().append(f[x]))})})}vo.warnMissedAreas=bOe;function bOe(t,e,r){let o=Object.keys(t);e.root().walkDecls("grid-area",u=>{o=o.filter(f=>f!==u.value)}),o.length>0&&e.warn(r,"Can not find grid areas: "+o.join(", "))}vo.warnTemplateSelectorNotFound=COe;function COe(t,e){let r=t.parent,o=t.root(),u=!1,f=m_.space(r.selector).filter(p=>p!==">").slice(0,-1);if(f.length>0){let p=!1,x=null;o.walkDecls(/grid-template(-areas)?$/,s=>{let w=s.parent,I=w.selectors,{areas:P}=Vk({decl:s,gap:LS(s)}),N=P[t.value];for(let U of I){if(p)break;p=m_.space(U).filter(Q=>Q!==">").every((Q,J)=>Q===f[J])}if(p||!N)return!0;x||(x=w.selector),x&&x!==w.selector&&(u=!0)}),!p&&u&&t.warn(e,`Autoprefixer cannot find a grid-template containing the duplicate grid-area "${t.value}" with full selector matching: ${f.join(" ")}`)}}vo.warnIfGridRowColumnExists=wOe;function wOe(t,e){let r=t.parent,o=[];r.walkDecls(/^grid-(row|column)/,u=>{!u.prop.endsWith("-end")&&!u.value.startsWith("span")&&!u.prop.endsWith("-gap")&&o.push(u)}),o.length>0&&o.forEach(u=>{u.warn(e,`You already have a grid-area declaration present in the rule. You should use either grid-area or ${u.prop}, not both`)})}vo.getGridGap=LS;function LS(t){let e={},r=/^(grid-)?((row|column)-)?gap$/;return t.parent.walkDecls(r,({prop:o,value:u})=>{if(/^(grid-)?gap$/.test(o)){let[f,,p]=rl(u).nodes;e.row=f&&rl.stringify(f),e.column=p?rl.stringify(p):e.row}/^(grid-)?row-gap$/.test(o)&&(e.row=u),/^(grid-)?column-gap$/.test(o)&&(e.column=u)}),e}function N$(t){if(!t)return[];let e=rl(t),r,o;return e.walk(u=>{u.type==="word"&&/min|max/g.test(u.value)?r=u.value:u.value.includes("px")&&(o=parseInt(u.value.replace(/\D/g,"")))}),[r,o]}function SOe(t,e){let r,o=fO(t),u=fO(e);if(o[0].length<u[0].length)return!1;if(o[0].length>u[0].length){let f=o[0].reduce((p,[x],s)=>{let w=u[0][0][0];return x===w?s:!1},!1);f&&(r=u[0].every((p,x)=>p.every((s,w)=>o[0].slice(f)[x][w]===s)))}else r=u.some(f=>f.every((p,x)=>p.every((s,w)=>o[0][x][w]===s)));return r}vo.inheritGridGap=VZ;function VZ(t,e){let r=t.parent,o=dB(r),u=r.root(),f=fO(r.selector);if(Object.keys(e).length>0)return!1;let[p]=N$(o.params),x=f[0],s=hOe(x[x.length-1][0]),w=new RegExp(`(${s}$)|(${s}[,.])`),I;return u.walkRules(w,P=>{let N;if(r.toString()===P.toString())return!1;if(P.walkDecls("grid-gap",X=>N=LS(X)),!N||Object.keys(N).length===0||!SOe(r.selector,P.selector))return!0;let U=dB(P);if(U){if(N$(U.params)[0]===p)return I=N,!0}else return I=N,!0}),I&&Object.keys(I).length>0?I:!1}vo.warnGridGap=TOe;function TOe({decl:t,gap:e,hasColumns:r,result:o}){let u=e.row&&e.column;!r&&(u||e.column&&!e.row)&&(delete e.column,t.warn(o,"Can not implement grid-gap without grid-template-columns"))}function F$(t){return rl(t).nodes.reduce((r,o)=>{if(o.type==="function"&&o.value==="repeat"){let u="count",[f,p]=o.nodes.reduce((x,s)=>s.type==="word"&&u==="count"?(x[0]=Math.abs(parseInt(s.value)),x):s.type==="div"&&s.value===","?(u="value",x):(u==="value"&&(x[1]+=rl.stringify(s)),x),[0,""]);if(f)for(let x=0;x<f;x++)r.push(p);return r}return o.type==="space"?r:r.concat(rl.stringify(o))},[])}vo.autoplaceGridItems=AOe;function AOe(t,e,r,o="row"){let{parent:u}=t,f=u.nodes.find(N=>N.prop==="grid-template-rows"),p=F$(f.value),x=F$(t.value),s=p.map((N,U)=>Array.from({length:x.length},(X,Q)=>Q+U*x.length+1).join(" ")),w=Uk({gap:r,rows:s}),I=Object.keys(w),P=I.map(N=>w[N]);o.includes("column")&&(P=P.sort((N,U)=>N.column.start-U.column.start)),P.reverse().forEach((N,U)=>{let{column:X,row:Q}=N,J=u.selectors.map(H=>H+` > *:nth-child(${I.length-U})`).join(", "),Z=u.clone().removeAll();Z.selector=J,Z.append({prop:"-ms-grid-row",value:Q.start}),Z.append({prop:"-ms-grid-column",value:X.start}),u.after(Z)})}var j$={};let $$=kS,EOe=Ou,DOe=vo.insertAreas;const POe=/(^|[^-])linear-gradient\(\s*(top|left|right|bottom)/i,MOe=/(^|[^-])radial-gradient\(\s*\d+(\w*|%)\s+\d+(\w*|%)\s*,/i,IOe=/(!\s*)?autoprefixer:\s*ignore\s+next/i,OOe=/(!\s*)?autoprefixer\s*grid:\s*(on|off|(no-)?autoplace)/i,kOe=["width","height","min-width","max-width","min-height","max-height","inline-size","min-inline-size","max-inline-size","block-size","min-block-size","max-block-size"];function QE(t){return t.parent.some(e=>e.prop==="grid-template"||e.prop==="grid-template-areas")}function LOe(t){let e=t.parent.some(o=>o.prop==="grid-template-rows"),r=t.parent.some(o=>o.prop==="grid-template-columns");return e&&r}let ROe=class{constructor(e){this.prefixes=e}add(e,r){let o=this.prefixes.add["@resolution"],u=this.prefixes.add["@keyframes"],f=this.prefixes.add["@viewport"],p=this.prefixes.add["@supports"];e.walkAtRules(w=>{if(w.name==="keyframes"){if(!this.disabled(w,r))return u&&u.process(w)}else if(w.name==="viewport"){if(!this.disabled(w,r))return f&&f.process(w)}else if(w.name==="supports"){if(this.prefixes.options.supports!==!1&&!this.disabled(w,r))return p.process(w)}else if(w.name==="media"&&w.params.includes("-resolution")&&!this.disabled(w,r))return o&&o.process(w)}),e.walkRules(w=>{if(!this.disabled(w,r))return this.prefixes.add.selectors.map(I=>I.process(w,r))});function x(w){return w.parent.nodes.some(I=>{if(I.type!=="decl")return!1;let P=I.prop==="display"&&/(inline-)?grid/.test(I.value),N=I.prop.startsWith("grid-template"),U=/^grid-([A-z]+-)?gap/.test(I.prop);return P||N||U})}let s=this.gridStatus(e,r)&&this.prefixes.add["grid-area"]&&this.prefixes.add["grid-area"].prefixes;return e.walkDecls(w=>{if(this.disabledDecl(w,r))return;let I=w.parent,P=w.prop,N=w.value;if(P==="color-adjust")I.every(X=>X.prop!=="print-color-adjust")&&r.warn("Replace color-adjust to print-color-adjust. The color-adjust shorthand is currently deprecated.",{node:w});else if(P==="grid-row-span"){r.warn("grid-row-span is not part of final Grid Layout. Use grid-row.",{node:w});return}else if(P==="grid-column-span"){r.warn("grid-column-span is not part of final Grid Layout. Use grid-column.",{node:w});return}else if(P==="display"&&N==="box"){r.warn("You should write display: flex by final spec instead of display: box",{node:w});return}else if(P==="text-emphasis-position")(N==="under"||N==="over")&&r.warn("You should use 2 values for text-emphasis-position For example, `under left` instead of just `under`.",{node:w});else if(P==="text-decoration-skip"&&N==="ink")r.warn("Replace text-decoration-skip: ink to text-decoration-skip-ink: auto, because spec had been changed",{node:w});else{if(s&&this.gridStatus(w,r))if(w.value==="subgrid"&&r.warn("IE does not support subgrid",{node:w}),/^(align|justify|place)-items$/.test(P)&&x(w)){let X=P.replace("-items","-self");r.warn(`IE does not support ${P} on grid containers. Try using ${X} on child elements instead: ${w.parent.selector} > * { ${X}: ${w.value} }`,{node:w})}else if(/^(align|justify|place)-content$/.test(P)&&x(w))r.warn(`IE does not support ${w.prop} on grid containers`,{node:w});else if(P==="display"&&w.value==="contents"){r.warn("Please do not use display: contents; if you have grid setting enabled",{node:w});return}else if(w.prop==="grid-gap"){let X=this.gridStatus(w,r);X==="autoplace"&&!LOe(w)&&!QE(w)?r.warn("grid-gap only works if grid-template(-areas) is being used or both rows and columns have been declared and cells have not been manually placed inside the explicit grid",{node:w}):(X===!0||X==="no-autoplace")&&!QE(w)&&r.warn("grid-gap only works if grid-template(-areas) is being used",{node:w})}else if(P==="grid-auto-columns"){r.warn("grid-auto-columns is not supported by IE",{node:w});return}else if(P==="grid-auto-rows"){r.warn("grid-auto-rows is not supported by IE",{node:w});return}else if(P==="grid-auto-flow"){let X=I.some(J=>J.prop==="grid-template-rows"),Q=I.some(J=>J.prop==="grid-template-columns");QE(w)?r.warn("grid-auto-flow is not supported by IE",{node:w}):N.includes("dense")?r.warn("grid-auto-flow: dense is not supported by IE",{node:w}):!X&&!Q&&r.warn("grid-auto-flow works only if grid-template-rows and grid-template-columns are present in the same rule",{node:w});return}else if(N.includes("auto-fit")){r.warn("auto-fit value is not supported by IE",{node:w,word:"auto-fit"});return}else if(N.includes("auto-fill")){r.warn("auto-fill value is not supported by IE",{node:w,word:"auto-fill"});return}else P.startsWith("grid-template")&&N.includes("[")&&r.warn("Autoprefixer currently does not support line names. Try using grid-template-areas instead.",{node:w,word:"["});if(N.includes("radial-gradient"))if(MOe.test(w.value))r.warn("Gradient has outdated direction syntax. New syntax is like `closest-side at 0 0` instead of `0 0, closest-side`.",{node:w});else{let X=$$(N);for(let Q of X.nodes)if(Q.type==="function"&&Q.value==="radial-gradient")for(let J of Q.nodes)J.type==="word"&&(J.value==="cover"?r.warn("Gradient has outdated direction syntax. Replace `cover` to `farthest-corner`.",{node:w}):J.value==="contain"&&r.warn("Gradient has outdated direction syntax. Replace `contain` to `closest-side`.",{node:w}))}N.includes("linear-gradient")&&POe.test(N)&&r.warn("Gradient has outdated direction syntax. New syntax is like `to left` instead of `right`.",{node:w})}kOe.includes(w.prop)&&(w.value.includes("-fill-available")||(w.value.includes("fill-available")?r.warn("Replace fill-available to stretch, because spec had been changed",{node:w}):w.value.includes("fill")&&$$(N).nodes.some(Q=>Q.type==="word"&&Q.value==="fill")&&r.warn("Replace fill to stretch, because spec had been changed",{node:w})));let U;if(w.prop==="transition"||w.prop==="transition-property")return this.prefixes.transition.add(w,r);if(w.prop==="align-self"){if(this.displayType(w)!=="grid"&&this.prefixes.options.flexbox!==!1&&(U=this.prefixes.add["align-self"],U&&U.prefixes&&U.process(w)),this.gridStatus(w,r)!==!1&&(U=this.prefixes.add["grid-row-align"],U&&U.prefixes))return U.process(w,r)}else if(w.prop==="justify-self"){if(this.gridStatus(w,r)!==!1&&(U=this.prefixes.add["grid-column-align"],U&&U.prefixes))return U.process(w,r)}else if(w.prop==="place-self"){if(U=this.prefixes.add["place-self"],U&&U.prefixes&&this.gridStatus(w,r)!==!1)return U.process(w,r)}else if(U=this.prefixes.add[w.prop],U&&U.prefixes)return U.process(w,r)}),this.gridStatus(e,r)&&DOe(e,this.disabled),e.walkDecls(w=>{if(this.disabledValue(w,r))return;let I=this.prefixes.unprefixed(w.prop),P=this.prefixes.values("add",I);if(Array.isArray(P))for(let N of P)N.process&&N.process(w,r);EOe.save(this.prefixes,w)})}disabled(e,r){if(!e)return!1;if(e._autoprefixerDisabled!==void 0)return e._autoprefixerDisabled;if(e.parent){let u=e.prev();if(u&&u.type==="comment"&&IOe.test(u.text))return e._autoprefixerDisabled=!0,e._autoprefixerSelfDisabled=!0,!0}let o=null;if(e.nodes){let u;e.each(f=>{f.type==="comment"&&/(!\s*)?autoprefixer:\s*(off|on)/i.test(f.text)&&(typeof u<"u"?r.warn("Second Autoprefixer control comment was ignored. Autoprefixer applies control comment to whole block, not to next rules.",{node:f}):u=/on/i.test(f.text))}),u!==void 0&&(o=!u)}if(!e.nodes||o===null)if(e.parent){let u=this.disabled(e.parent,r);e.parent._autoprefixerSelfDisabled===!0?o=!1:o=u}else o=!1;return e._autoprefixerDisabled=o,o}disabledDecl(e,r){if(e.type==="decl"&&this.gridStatus(e,r)===!1&&(e.prop.includes("grid")||e.prop==="justify-items"))return!0;if(e.type==="decl"&&this.prefixes.options.flexbox===!1){let o=["order","justify-content","align-items","align-content"];if(e.prop.includes("flex")||o.includes(e.prop))return!0}return this.disabled(e,r)}disabledValue(e,r){return this.gridStatus(e,r)===!1&&e.type==="decl"&&e.prop==="display"&&e.value.includes("grid")||this.prefixes.options.flexbox===!1&&e.type==="decl"&&e.prop==="display"&&e.value.includes("flex")||e.type==="decl"&&e.prop==="content"?!0:this.disabled(e,r)}displayType(e){for(let r of e.parent.nodes)if(r.prop==="display"){if(r.value.includes("flex"))return"flex";if(r.value.includes("grid"))return"grid"}return!1}gridStatus(e,r){if(!e)return!1;if(e._autoprefixerGridStatus!==void 0)return e._autoprefixerGridStatus;let o=null;if(e.nodes){let u;e.each(f=>{if(f.type==="comment"&&OOe.test(f.text)){let p=/:\s*autoplace/i.test(f.text),x=/no-autoplace/i.test(f.text);typeof u<"u"?r.warn("Second Autoprefixer grid control comment was ignored. Autoprefixer applies control comments to the whole block, not to the next rules.",{node:f}):p?u="autoplace":x?u=!0:u=/on/i.test(f.text)}}),u!==void 0&&(o=u)}if(e.type==="atrule"&&e.name==="supports"){let u=e.params;u.includes("grid")&&u.includes("auto")&&(o=!1)}if(!e.nodes||o===null)if(e.parent){let u=this.gridStatus(e.parent,r);e.parent._autoprefixerSelfDisabled===!0?o=!1:o=u}else typeof this.prefixes.options.grid<"u"?o=this.prefixes.options.grid:typeof j$.AUTOPREFIXER_GRID<"u"?j$.AUTOPREFIXER_GRID==="autoplace"?o="autoplace":o=!0:o=!1;return e._autoprefixerGridStatus=o,o}reduceSpaces(e){let r=!1;if(this.prefixes.group(e).up(()=>(r=!0,!0)),r)return;let o=e.raw("before").split(`
`),u=o[o.length-1].length,f=!1;this.prefixes.group(e).down(p=>{o=p.raw("before").split(`
`);let x=o.length-1;o[x].length>u&&(f===!1&&(f=o[x].length-u),o[x]=o[x].slice(0,-f),p.raws.before=o.join(`
`))})}remove(e,r){let o=this.prefixes.remove["@resolution"];return e.walkAtRules((u,f)=>{this.prefixes.remove[`@${u.name}`]?this.disabled(u,r)||u.parent.removeChild(f):u.name==="media"&&u.params.includes("-resolution")&&o&&o.clean(u)}),e.walkRules((u,f)=>{if(!this.disabled(u,r)){for(let p of this.prefixes.remove.selectors)if(p.check(u)){u.parent.removeChild(f);return}}}),e.walkDecls((u,f)=>{if(this.disabled(u,r))return;let p=u.parent,x=this.prefixes.unprefixed(u.prop);if((u.prop==="transition"||u.prop==="transition-property")&&this.prefixes.transition.remove(u),this.prefixes.remove[u.prop]&&this.prefixes.remove[u.prop].remove){let s=this.prefixes.group(u).down(w=>this.prefixes.normalize(w.prop)===x);if(x==="flex-flow"&&(s=!0),u.prop==="-webkit-box-orient"){let w={"flex-direction":!0,"flex-flow":!0};if(!u.parent.some(I=>w[I.prop]))return}if(s&&!this.withHackValue(u)){u.raw("before").includes(`
`)&&this.reduceSpaces(u),p.removeChild(f);return}}for(let s of this.prefixes.values("remove",x)){if(!s.check||!s.check(u.value))continue;if(x=s.unprefixed,this.prefixes.group(u).down(I=>I.value.includes(x))){p.removeChild(f);return}}})}withHackValue(e){return e.prop==="-webkit-background-clip"&&e.value==="text"||e.prop==="-webkit-box-orient"&&e.parent.some(r=>r.prop==="-webkit-line-clamp")}};var GZ=ROe,zOe={A:{A:{2:"K D E F A B WC"},B:{1:"0 1 2 3 4 5 6 7 8 9 C L M G N O P Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I"},C:{1:"0 1 2 3 4 5 6 7 8 9 v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",2:"XC 9B J BB K D E F A B C L M G N O P CB t u ZC aC"},D:{1:"0 1 2 3 4 5 6 7 8 9 GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC",2:"J BB K D E F A B C L M G N O P CB t u v w x DB EB FB"},E:{1:"F A B C L M G fC HC 4B 5B gC hC iC IC JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC lC",2:"J BB K D E bC GC cC dC eC"},F:{1:"G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s 5B",2:"F B C mC nC oC pC 4B UC qC"},G:{1:"wC xC yC zC 0C 1C 2C 3C 4C 5C 6C 7C 8C 9C AD IC JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC",2:"E GC rC VC sC tC uC vC"},H:{1:"DD"},I:{1:"I ID JD",2:"9B J ED FD GD HD VC"},J:{2:"D A"},K:{1:"H",2:"A B C 4B UC 5B"},L:{1:"I"},M:{1:"3B"},N:{2:"A B"},O:{1:"6B"},P:{1:"J t u v w x KD LD MD ND OD HC PD QD RD SD TD 7B 8B UD VD"},Q:{1:"WD"},R:{1:"XD"},S:{1:"YD ZD"}},B:4,C:"CSS Feature Queries",D:!0},Gk={exports:{}},NOe={1:"ls",2:"rec",3:"pr",4:"cr",5:"wd",6:"other",7:"unoff"},FOe={y:1,n:2,a:4,p:8,u:16,x:32,d:64};const jOe=NOe,U$=FOe,$Oe=Nk.browsers,UOe=Fk.browserVersions,VOe=Math.log(2);function GOe(t){let e=Object.keys(U$).reduce((u,f)=>(t&U$[f]&&u.push(f),u),[]),r=t>>7,o=[];for(;r;){let u=Math.floor(Math.log(r)/VOe)+1;o.unshift(`#${u}`),r-=Math.pow(2,u-1)}return e.concat(o).join(" ")}function HZ(t){let e={status:jOe[t.B],title:t.C,shown:t.D};return e.stats=Object.keys(t.A).reduce((r,o)=>{let u=t.A[o];return r[$Oe[o]]=Object.keys(u).reduce((f,p)=>{let x=u[p].split(" "),s=GOe(p);return x.forEach(w=>f[UOe[w]]=s),f},{}),r},{}),e}Gk.exports=HZ;Gk.exports.default=HZ;var WZ=Gk.exports;function V$(t){return t[t.length-1]}let ZZ={parse(t){let e=[""],r=[e];for(let o of t){if(o==="("){e=[""],V$(r).push(e),r.push(e);continue}if(o===")"){r.pop(),e=V$(r),e.push("");continue}e[e.length-1]+=o}return r[0]},stringify(t){let e="";for(let r of t){if(typeof r=="object"){e+=`(${ZZ.stringify(r)})`;continue}e+=r}return e}};var HOe=ZZ;let WOe=zOe,ZOe=WZ,{parse:qOe}=em,KOe=tm,eD=HOe,XOe=Ou,YOe=Ri,G$=ZOe(WOe),qZ=[];for(let t in G$.stats){let e=G$.stats[t];for(let r in e){let o=e[r];/y/.test(o)&&qZ.push(t+" "+r)}}let JOe=class{constructor(e,r){this.Prefixes=e,this.all=r}add(e,r){return e.map(o=>{if(this.isProp(o)){let u=this.prefixed(o[0]);return u.length>1?this.convert(u):o}return typeof o=="object"?this.add(o,r):o})}cleanBrackets(e){return e.map(r=>typeof r!="object"?r:r.length===1&&typeof r[0]=="object"?this.cleanBrackets(r[0]):this.cleanBrackets(r))}convert(e){let r=[""];for(let o of e)r.push([`${o.prop}: ${o.value}`]),r.push(" or ");return r[r.length-1]="",r}disabled(e){if(!this.all.options.grid&&(e.prop==="display"&&e.value.includes("grid")||e.prop.includes("grid")||e.prop==="justify-items"))return!0;if(this.all.options.flexbox===!1){if(e.prop==="display"&&e.value.includes("flex"))return!0;let r=["order","justify-content","align-items","align-content"];if(e.prop.includes("flex")||r.includes(e.prop))return!0}return!1}isHack(e,r){return!new RegExp(`(\\(|\\s)${YOe.escapeRegexp(r)}:`).test(e)}isNot(e){return typeof e=="string"&&/not\s*/i.test(e)}isOr(e){return typeof e=="string"&&/\s*or\s*/i.test(e)}isProp(e){return typeof e=="object"&&e.length===1&&typeof e[0]=="string"}normalize(e){if(typeof e!="object")return e;if(e=e.filter(r=>r!==""),typeof e[0]=="string"){let r=e[0].trim();if(r.includes(":")||r==="selector"||r==="not selector")return[eD.stringify(e)]}return e.map(r=>this.normalize(r))}parse(e){let r=e.split(":"),o=r[0],u=r[1];return u||(u=""),[o.trim(),u.trim()]}prefixed(e){let r=this.virtual(e);if(this.disabled(r.first))return r.nodes;let o={warn:()=>null},u=this.prefixer().add[r.first.prop];u&&u.process&&u.process(r.first,o);for(let f of r.nodes){for(let p of this.prefixer().values("add",r.first.prop))p.process(f);XOe.save(this.all,f)}return r.nodes}prefixer(){if(this.prefixerCache)return this.prefixerCache;let e=this.all.browsers.selected.filter(o=>qZ.includes(o)),r=new KOe(this.all.browsers.data,e,this.all.options);return this.prefixerCache=new this.Prefixes(this.all.data,r,this.all.options),this.prefixerCache}process(e){let r=eD.parse(e.params);r=this.normalize(r),r=this.remove(r,e.params),r=this.add(r,e.params),r=this.cleanBrackets(r),e.params=eD.stringify(r)}remove(e,r){let o=0;for(;o<e.length;){if(!this.isNot(e[o-1])&&this.isProp(e[o])&&this.isOr(e[o+1])){if(this.toRemove(e[o][0],r)){e.splice(o,2);continue}o+=2;continue}typeof e[o]=="object"&&(e[o]=this.remove(e[o],r)),o+=1}return e}toRemove(e,r){let[o,u]=this.parse(e),f=this.all.unprefixed(o),p=this.all.cleaner();if(p.remove[o]&&p.remove[o].remove&&!this.isHack(r,f))return!0;for(let x of p.values("remove",f))if(x.check(u))return!0;return!1}virtual(e){let[r,o]=this.parse(e),u=qOe("a{}").first;return u.append({prop:r,raws:{before:""},value:o}),u}};var QOe=JOe;let e3e=class{constructor(e,r){this.prefix=r,this.prefixed=e.prefixed(this.prefix),this.regexp=e.regexp(this.prefix),this.prefixeds=e.possible().map(o=>[e.prefixed(o),e.regexp(o)]),this.unprefixed=e.name,this.nameRegexp=e.regexp()}check(e){return!(!e.selector.includes(this.prefixed)||!e.selector.match(this.regexp)||this.isHack(e))}isHack(e){let r=e.parent.index(e)+1,o=e.parent.nodes;for(;r<o.length;){let u=o[r].selector;if(!u)return!0;if(u.includes(this.unprefixed)&&u.match(this.nameRegexp))return!1;let f=!1;for(let[p,x]of this.prefixeds)if(u.includes(p)&&u.match(x)){f=!0;break}if(!f)return!0;r+=1}return!0}};var t3e=e3e;let{list:r3e}=em,n3e=t3e,i3e=NB,o3e=tm,a3e=Ri,s3e=class extends i3e{constructor(e,r,o){super(e,r,o),this.regexpCache=new Map}add(e,r){let o=this.prefixeds(e);if(this.already(e,o,r))return;let u=this.clone(e,{selector:o[this.name][r]});e.parent.insertBefore(e,u)}already(e,r,o){let u=e.parent.index(e)-1;for(;u>=0;){let f=e.parent.nodes[u];if(f.type!=="rule")return!1;let p=!1;for(let x in r[this.name]){let s=r[this.name][x];if(f.selector===s){if(o===x)return!0;p=!0;break}}if(!p)return!1;u-=1}return!1}check(e){return e.selector.includes(this.name)?!!e.selector.match(this.regexp()):!1}old(e){return new n3e(this,e)}possible(){return o3e.prefixes()}prefixed(e){return this.name.replace(/^(\W*)/,`$1${e}`)}prefixeds(e){if(e._autoprefixerPrefixeds){if(e._autoprefixerPrefixeds[this.name])return e._autoprefixerPrefixeds}else e._autoprefixerPrefixeds={};let r={};if(e.selector.includes(",")){let u=r3e.comma(e.selector).filter(f=>f.includes(this.name));for(let f of this.possible())r[f]=u.map(p=>this.replace(p,f)).join(", ")}else for(let o of this.possible())r[o]=this.replace(e.selector,o);return e._autoprefixerPrefixeds[this.name]=r,e._autoprefixerPrefixeds}regexp(e){if(!this.regexpCache.has(e)){let r=e?this.prefixed(e):this.name;this.regexpCache.set(e,new RegExp(`(^|[^:"'=])${a3e.escapeRegexp(r)}`,"gi"))}return this.regexpCache.get(e)}replace(e,r){return e.replace(this.regexp(),`$1${this.prefixed(r)}`)}};var z_=s3e;let l3e=NB,u3e=class extends l3e{add(e,r){let o=r+e.name;if(e.parent.some(p=>p.name===o&&p.params===e.params))return;let f=this.clone(e,{name:o});return e.parent.insertBefore(e,f)}process(e){let r=this.parentPrefix(e);for(let o of this.prefixes)(!r||r===o)&&this.add(e,o)}};var c3e=u3e;let h3e=z_;class KZ extends h3e{prefixed(e){return e==="-webkit-"?":-webkit-full-screen":e==="-moz-"?":-moz-full-screen":`:${e}fullscreen`}}KZ.names=[":fullscreen"];var f3e=KZ;let d3e=z_;class XZ extends d3e{possible(){return super.possible().concat(["-moz- old","-ms- old"])}prefixed(e){return e==="-webkit-"?"::-webkit-input-placeholder":e==="-ms-"?"::-ms-input-placeholder":e==="-ms- old"?":-ms-input-placeholder":e==="-moz- old"?":-moz-placeholder":`::${e}placeholder`}}XZ.names=["::placeholder"];var p3e=XZ;let m3e=z_;class YZ extends m3e{prefixed(e){return e==="-ms-"?":-ms-input-placeholder":`:${e}placeholder-shown`}}YZ.names=[":placeholder-shown"];var g3e=YZ;let _3e=z_,y3e=Ri;class JZ extends _3e{constructor(e,r,o){super(e,r,o),this.prefixes&&(this.prefixes=y3e.uniq(this.prefixes.map(()=>"-webkit-")))}prefixed(e){return e==="-webkit-"?"::-webkit-file-upload-button":`::${e}file-selector-button`}}JZ.names=["::file-selector-button"];var v3e=JZ,sl=function(t){let e;return t==="-webkit- 2009"||t==="-moz-"?e=2009:t==="-ms-"?e=2012:t==="-webkit-"&&(e="final"),t==="-webkit- 2009"&&(t="-webkit-"),[e,t]};let H$=em.list,W$=sl,B3e=wn,Hk=class QZ extends B3e{normalize(){return"flex"}prefixed(e,r){let o;return[o,r]=W$(r),o===2009?r+"box-flex":super.prefixed(e,r)}set(e,r){let o=W$(r)[0];if(o===2009)return e.value=H$.space(e.value)[0],e.value=QZ.oldValues[e.value]||e.value,super.set(e,r);if(o===2012){let u=H$.space(e.value);u.length===3&&u[2]==="0"&&(e.value=u.slice(0,2).concat("0px").join(" "))}return super.set(e,r)}};Hk.names=["flex","box-flex"];Hk.oldValues={auto:"1",none:"0"};var x3e=Hk;let Z$=sl,b3e=wn;class eq extends b3e{normalize(){return"order"}prefixed(e,r){let o;return[o,r]=Z$(r),o===2009?r+"box-ordinal-group":o===2012?r+"flex-order":super.prefixed(e,r)}set(e,r){return Z$(r)[0]===2009&&/\d/.test(e.value)?(e.value=(parseInt(e.value)+1).toString(),super.set(e,r)):super.set(e,r)}}eq.names=["order","flex-order","box-ordinal-group"];var C3e=eq;let w3e=wn;class tq extends w3e{check(e){let r=e.value;return!r.toLowerCase().includes("alpha(")&&!r.includes("DXImageTransform.Microsoft")&&!r.includes("data:image/svg+xml")}}tq.names=["filter"];var S3e=tq;let T3e=wn,{isPureNumber:A3e}=Ri;class rq extends T3e{insert(e,r,o,u){if(r!=="-ms-")return super.insert(e,r,o);let f=this.clone(e),p=e.prop.replace(/end$/,"start"),x=r+e.prop.replace(/end$/,"span");if(!e.parent.some(s=>s.prop===x)){if(f.prop=x,e.value.includes("span"))f.value=e.value.replace(/span\s/i,"");else{let s;if(e.parent.walkDecls(p,w=>{s=w}),s)if(A3e(s.value)){let w=Number(e.value)-Number(s.value)+"";f.value=w}else return;else e.warn(u,`Can not prefix ${e.prop} (${p} is not found)`)}e.cloneBefore(f)}}}rq.names=["grid-row-end","grid-column-end"];var E3e=rq;let D3e=wn;class nq extends D3e{check(e){return!e.value.split(/\s+/).some(r=>{let o=r.toLowerCase();return o==="reverse"||o==="alternate-reverse"})}}nq.names=["animation","animation-direction"];var P3e=nq;let M3e=sl,I3e=wn;class iq extends I3e{insert(e,r,o){let u;if([u,r]=M3e(r),u!==2009)return super.insert(e,r,o);let f=e.value.split(/\s+/).filter(P=>P!=="wrap"&&P!=="nowrap"&&"wrap-reverse");if(f.length===0||e.parent.some(P=>P.prop===r+"box-orient"||P.prop===r+"box-direction"))return;let x=f[0],s=x.includes("row")?"horizontal":"vertical",w=x.includes("reverse")?"reverse":"normal",I=this.clone(e);return I.prop=r+"box-orient",I.value=s,this.needCascade(e)&&(I.raws.before=this.calcBefore(o,e,r)),e.parent.insertBefore(e,I),I=this.clone(e),I.prop=r+"box-direction",I.value=w,this.needCascade(e)&&(I.raws.before=this.calcBefore(o,e,r)),e.parent.insertBefore(e,I)}}iq.names=["flex-flow","box-direction","box-orient"];var O3e=iq;let k3e=sl,L3e=wn;class oq extends L3e{normalize(){return"flex"}prefixed(e,r){let o;return[o,r]=k3e(r),o===2009?r+"box-flex":o===2012?r+"flex-positive":super.prefixed(e,r)}}oq.names=["flex-grow","flex-positive"];var R3e=oq;let z3e=sl,N3e=wn;class aq extends N3e{set(e,r){if(z3e(r)[0]!==2009)return super.set(e,r)}}aq.names=["flex-wrap"];var F3e=aq;let j3e=wn,ag=vo;class sq extends j3e{insert(e,r,o,u){if(r!=="-ms-")return super.insert(e,r,o);let f=ag.parse(e),[p,x]=ag.translate(f,0,2),[s,w]=ag.translate(f,1,3);[["grid-row",p],["grid-row-span",x],["grid-column",s],["grid-column-span",w]].forEach(([I,P])=>{ag.insertDecl(e,I,P)}),ag.warnTemplateSelectorNotFound(e,u),ag.warnIfGridRowColumnExists(e,u)}}sq.names=["grid-area"];var $3e=sq;let U3e=wn,S0=vo;class lq extends U3e{insert(e,r,o){if(r!=="-ms-")return super.insert(e,r,o);if(e.parent.some(p=>p.prop==="-ms-grid-row-align"))return;let[[u,f]]=S0.parse(e);f?(S0.insertDecl(e,"grid-row-align",u),S0.insertDecl(e,"grid-column-align",f)):(S0.insertDecl(e,"grid-row-align",u),S0.insertDecl(e,"grid-column-align",u))}}lq.names=["place-self"];var V3e=lq;let G3e=wn;class uq extends G3e{check(e){let r=e.value;return!r.includes("/")&&!r.includes("span")}normalize(e){return e.replace("-start","")}prefixed(e,r){let o=super.prefixed(e,r);return r==="-ms-"&&(o=o.replace("-start","")),o}}uq.names=["grid-row-start","grid-column-start"];var H3e=uq;let q$=sl,W3e=wn;class jB extends W3e{check(e){return e.parent&&!e.parent.some(r=>r.prop&&r.prop.startsWith("grid-"))}normalize(){return"align-self"}prefixed(e,r){let o;return[o,r]=q$(r),o===2012?r+"flex-item-align":super.prefixed(e,r)}set(e,r){let o=q$(r)[0];if(o===2012)return e.value=jB.oldValues[e.value]||e.value,super.set(e,r);if(o==="final")return super.set(e,r)}}jB.names=["align-self","flex-item-align"];jB.oldValues={"flex-end":"end","flex-start":"start"};var Z3e=jB;let q3e=wn,K3e=Ri;class cq extends q3e{constructor(e,r,o){super(e,r,o),this.prefixes&&(this.prefixes=K3e.uniq(this.prefixes.map(u=>u==="-ms-"?"-webkit-":u)))}}cq.names=["appearance"];var X3e=cq;let K$=sl,Y3e=wn;class hq extends Y3e{normalize(){return"flex-basis"}prefixed(e,r){let o;return[o,r]=K$(r),o===2012?r+"flex-preferred-size":super.prefixed(e,r)}set(e,r){let o;if([o,r]=K$(r),o===2012||o==="final")return super.set(e,r)}}hq.names=["flex-basis","flex-preferred-size"];var J3e=hq;let Q3e=wn;class fq extends Q3e{normalize(){return this.name.replace("box-image","border")}prefixed(e,r){let o=super.prefixed(e,r);return r==="-webkit-"&&(o=o.replace("border","box-image")),o}}fq.names=["mask-border","mask-border-source","mask-border-slice","mask-border-width","mask-border-outset","mask-border-repeat","mask-box-image","mask-box-image-source","mask-box-image-slice","mask-box-image-width","mask-box-image-outset","mask-box-image-repeat"];var eke=fq;let tke=wn;class gh extends tke{insert(e,r,o){let u=e.prop==="mask-composite",f;u?f=e.value.split(","):f=e.value.match(gh.regexp)||[],f=f.map(w=>w.trim()).filter(w=>w);let p=f.length,x;if(p&&(x=this.clone(e),x.value=f.map(w=>gh.oldValues[w]||w).join(", "),f.includes("intersect")&&(x.value+=", xor"),x.prop=r+"mask-composite"),u)return p?(this.needCascade(e)&&(x.raws.before=this.calcBefore(o,e,r)),e.parent.insertBefore(e,x)):void 0;let s=this.clone(e);return s.prop=r+s.prop,p&&(s.value=s.value.replace(gh.regexp,"")),this.needCascade(e)&&(s.raws.before=this.calcBefore(o,e,r)),e.parent.insertBefore(e,s),p?(this.needCascade(e)&&(x.raws.before=this.calcBefore(o,e,r)),e.parent.insertBefore(e,x)):e}}gh.names=["mask","mask-composite"];gh.oldValues={add:"source-over",exclude:"xor",intersect:"source-in",subtract:"source-out"};gh.regexp=new RegExp(`\\s+(${Object.keys(gh.oldValues).join("|")})\\b(?!\\))\\s*(?=[,])`,"ig");var rke=gh;let X$=sl,nke=wn;class $B extends nke{normalize(){return"align-items"}prefixed(e,r){let o;return[o,r]=X$(r),o===2009?r+"box-align":o===2012?r+"flex-align":super.prefixed(e,r)}set(e,r){let o=X$(r)[0];return(o===2009||o===2012)&&(e.value=$B.oldValues[e.value]||e.value),super.set(e,r)}}$B.names=["align-items","flex-align","box-align"];$B.oldValues={"flex-end":"end","flex-start":"start"};var ike=$B;let oke=wn;class dq extends oke{insert(e,r,o){if(!(e.value==="all"&&r==="-ms-"))return e.value==="contain"&&(r==="-moz-"||r==="-webkit-")?void 0:super.insert(e,r,o)}set(e,r){return r==="-ms-"&&e.value==="contain"&&(e.value="element"),super.set(e,r)}}dq.names=["user-select"];var ake=dq;let Y$=sl,ske=wn;class pq extends ske{normalize(){return"flex-shrink"}prefixed(e,r){let o;return[o,r]=Y$(r),o===2012?r+"flex-negative":super.prefixed(e,r)}set(e,r){let o;if([o,r]=Y$(r),o===2012||o==="final")return super.set(e,r)}}pq.names=["flex-shrink","flex-negative"];var lke=pq;let uke=wn;class mq extends uke{insert(e,r,o){if(e.prop!=="break-inside")return super.insert(e,r,o);if(!(/region/i.test(e.value)||/page/i.test(e.value)))return super.insert(e,r,o)}normalize(e){return e.includes("inside")?"break-inside":e.includes("before")?"break-before":"break-after"}prefixed(e,r){return`${r}column-${e}`}set(e,r){return(e.prop==="break-inside"&&e.value==="avoid-column"||e.value==="avoid-page")&&(e.value="avoid"),super.set(e,r)}}mq.names=["break-inside","page-break-inside","column-break-inside","break-before","page-break-before","column-break-before","break-after","page-break-after","column-break-after"];var cke=mq;let hke=wn;class UB extends hke{insert(e,r,o){if(r==="-ms-"){let u=this.set(this.clone(e),r);this.needCascade(e)&&(u.raws.before=this.calcBefore(o,e,r));let f="ltr";return e.parent.nodes.forEach(p=>{p.prop==="direction"&&(p.value==="rtl"||p.value==="ltr")&&(f=p.value)}),u.value=UB.msValues[f][e.value]||e.value,e.parent.insertBefore(e,u)}return super.insert(e,r,o)}}UB.names=["writing-mode"];UB.msValues={ltr:{"horizontal-tb":"lr-tb","vertical-lr":"tb-lr","vertical-rl":"tb-rl"},rtl:{"horizontal-tb":"rl-tb","vertical-lr":"bt-lr","vertical-rl":"bt-rl"}};var fke=UB;let dke=wn;class gq extends dke{set(e,r){return e.value=e.value.replace(/\s+fill(\s)/,"$1"),super.set(e,r)}}gq.names=["border-image"];var pke=gq;let J$=sl,mke=wn;class VB extends mke{normalize(){return"align-content"}prefixed(e,r){let o;return[o,r]=J$(r),o===2012?r+"flex-line-pack":super.prefixed(e,r)}set(e,r){let o=J$(r)[0];if(o===2012)return e.value=VB.oldValues[e.value]||e.value,super.set(e,r);if(o==="final")return super.set(e,r)}}VB.names=["align-content","flex-line-pack"];VB.oldValues={"flex-end":"end","flex-start":"start","space-around":"distribute","space-between":"justify"};var gke=VB;let _ke=wn;class Tu extends _ke{normalize(e){return Tu.toNormal[e]||e}prefixed(e,r){return r==="-moz-"?r+(Tu.toMozilla[e]||e):super.prefixed(e,r)}}Tu.names=["border-radius"];Tu.toMozilla={};Tu.toNormal={};for(let t of["top","bottom"])for(let e of["left","right"]){let r=`border-${t}-${e}-radius`,o=`border-radius-${t}${e}`;Tu.names.push(r),Tu.names.push(o),Tu.toMozilla[r]=o,Tu.toNormal[o]=r}var yke=Tu;let vke=wn;class _q extends vke{normalize(e){return e.includes("-before")?e.replace("-before","-block-start"):e.replace("-after","-block-end")}prefixed(e,r){return e.includes("-start")?r+e.replace("-block-start","-before"):r+e.replace("-block-end","-after")}}_q.names=["border-block-start","border-block-end","margin-block-start","margin-block-end","padding-block-start","padding-block-end","border-before","border-after","margin-before","margin-after","padding-before","padding-after"];var Bke=_q;let xke=wn,{getGridGap:bke,inheritGridGap:Cke,parseTemplate:wke,warnGridGap:Ske,warnMissedAreas:Tke}=vo;class yq extends xke{insert(e,r,o,u){if(r!=="-ms-")return super.insert(e,r,o);if(e.parent.some(U=>U.prop==="-ms-grid-rows"))return;let f=bke(e),p=Cke(e,f),{areas:x,columns:s,rows:w}=wke({decl:e,gap:p||f}),I=Object.keys(x).length>0,P=!!w,N=!!s;return Ske({decl:e,gap:f,hasColumns:N,result:u}),Tke(x,e,u),(P&&N||I)&&e.cloneBefore({prop:"-ms-grid-rows",raws:{},value:w}),N&&e.cloneBefore({prop:"-ms-grid-columns",raws:{},value:s}),e}}yq.names=["grid-template"];var Ake=yq;let Eke=wn;class vq extends Eke{normalize(e){return e.replace(/(margin|padding|border)-(start|end)/,"$1-inline-$2")}prefixed(e,r){return r+e.replace("-inline","")}}vq.names=["border-inline-start","border-inline-end","margin-inline-start","margin-inline-end","padding-inline-start","padding-inline-end","border-start","border-end","margin-start","margin-end","padding-start","padding-end"];var Dke=vq;let Pke=wn;class Bq extends Pke{check(e){return!e.value.includes("flex-")&&e.value!=="baseline"}normalize(){return"align-self"}prefixed(e,r){return r+"grid-row-align"}}Bq.names=["grid-row-align"];var Mke=Bq;let Ike=wn;class GB extends Ike{contain3d(e){if(e.prop==="transform-origin")return!1;for(let r of GB.functions3d)if(e.value.includes(`${r}(`))return!0;return!1}insert(e,r,o){if(r==="-ms-"){if(!this.contain3d(e)&&!this.keyframeParents(e))return super.insert(e,r,o)}else if(r==="-o-"){if(!this.contain3d(e))return super.insert(e,r,o)}else return super.insert(e,r,o)}keyframeParents(e){let{parent:r}=e;for(;r;){if(r.type==="atrule"&&r.name==="keyframes")return!0;({parent:r}=r)}return!1}set(e,r){return e=super.set(e,r),r==="-ms-"&&(e.value=e.value.replace(/rotatez/gi,"rotate")),e}}GB.names=["transform","transform-origin"];GB.functions3d=["matrix3d","translate3d","translateZ","scale3d","scaleZ","rotate3d","rotateX","rotateY","perspective"];var Oke=GB;let Q$=sl,kke=wn;class xq extends kke{insert(e,r,o){let u;if([u,r]=Q$(r),u!==2009)return super.insert(e,r,o);if(e.parent.some(I=>I.prop===r+"box-orient"||I.prop===r+"box-direction"))return;let p=e.value,x,s;p==="inherit"||p==="initial"||p==="unset"?(x=p,s=p):(x=p.includes("row")?"horizontal":"vertical",s=p.includes("reverse")?"reverse":"normal");let w=this.clone(e);return w.prop=r+"box-orient",w.value=x,this.needCascade(e)&&(w.raws.before=this.calcBefore(o,e,r)),e.parent.insertBefore(e,w),w=this.clone(e),w.prop=r+"box-direction",w.value=s,this.needCascade(e)&&(w.raws.before=this.calcBefore(o,e,r)),e.parent.insertBefore(e,w)}normalize(){return"flex-direction"}old(e,r){let o;return[o,r]=Q$(r),o===2009?[r+"box-orient",r+"box-direction"]:super.old(e,r)}}xq.names=["flex-direction","box-direction","box-orient"];var Lke=xq;let Rke=wn;class bq extends Rke{check(e){return e.value==="pixelated"}normalize(){return"image-rendering"}prefixed(e,r){return r==="-ms-"?"-ms-interpolation-mode":super.prefixed(e,r)}process(e,r){return super.process(e,r)}set(e,r){return r!=="-ms-"?super.set(e,r):(e.prop="-ms-interpolation-mode",e.value="nearest-neighbor",e)}}bq.names=["image-rendering","interpolation-mode"];var zke=bq;let Nke=wn,Fke=Ri;class Cq extends Nke{constructor(e,r,o){super(e,r,o),this.prefixes&&(this.prefixes=Fke.uniq(this.prefixes.map(u=>u==="-ms-"?"-webkit-":u)))}}Cq.names=["backdrop-filter"];var jke=Cq;let $ke=wn,Uke=Ri;class wq extends $ke{constructor(e,r,o){super(e,r,o),this.prefixes&&(this.prefixes=Uke.uniq(this.prefixes.map(u=>u==="-ms-"?"-webkit-":u)))}check(e){return e.value.toLowerCase()==="text"}}wq.names=["background-clip"];var Vke=wq;let Gke=wn;const Hke=["none","underline","overline","line-through","blink","inherit","initial","unset"];class Sq extends Gke{check(e){return e.value.split(/\s+/).some(r=>!Hke.includes(r))}}Sq.names=["text-decoration"];var Wke=Sq;let eU=sl,Zke=wn;class HB extends Zke{normalize(){return"justify-content"}prefixed(e,r){let o;return[o,r]=eU(r),o===2009?r+"box-pack":o===2012?r+"flex-pack":super.prefixed(e,r)}set(e,r){let o=eU(r)[0];if(o===2009||o===2012){let u=HB.oldValues[e.value]||e.value;if(e.value=u,o!==2009||u!=="distribute")return super.set(e,r)}else if(o==="final")return super.set(e,r)}}HB.names=["justify-content","flex-pack","box-pack"];HB.oldValues={"flex-end":"end","flex-start":"start","space-around":"distribute","space-between":"justify"};var qke=HB;let Kke=wn;class Tq extends Kke{set(e,r){let o=e.value.toLowerCase();return r==="-webkit-"&&!o.includes(" ")&&o!=="contain"&&o!=="cover"&&(e.value=e.value+" "+e.value),super.set(e,r)}}Tq.names=["background-size"];var Xke=Tq;let Yke=wn,tD=vo;class Aq extends Yke{insert(e,r,o){if(r!=="-ms-")return super.insert(e,r,o);let u=tD.parse(e),[f,p]=tD.translate(u,0,1);u[0]&&u[0].includes("span")&&(p=u[0].join("").replace(/\D/g,"")),[[e.prop,f],[`${e.prop}-span`,p]].forEach(([s,w])=>{tD.insertDecl(e,s,w)})}}Aq.names=["grid-row","grid-column"];var Jke=Aq;let Qke=wn,{autoplaceGridItems:eLe,getGridGap:tLe,inheritGridGap:rLe,prefixTrackProp:tU,prefixTrackValue:nLe}=vo,iLe=GZ;class Eq extends Qke{insert(e,r,o,u){if(r!=="-ms-")return super.insert(e,r,o);let{parent:f,prop:p,value:x}=e,s=p.includes("rows"),w=p.includes("columns"),I=f.some(H=>H.prop==="grid-template"||H.prop==="grid-template-areas");if(I&&s)return!1;let P=new iLe({options:{}}),N=P.gridStatus(f,u),U=tLe(e);U=rLe(e,U)||U;let X=s?U.row:U.column;(N==="no-autoplace"||N===!0)&&!I&&(X=null);let Q=nLe({gap:X,value:x});e.cloneBefore({prop:tU({prefix:r,prop:p}),value:Q});let J=f.nodes.find(H=>H.prop==="grid-auto-flow"),Z="row";if(J&&!P.disabled(J,u)&&(Z=J.value.trim()),N==="autoplace"){let H=f.nodes.find(ee=>ee.prop==="grid-template-rows");if(!H&&I)return;if(!H&&!I){e.warn(u,"Autoplacement does not work without grid-template-rows property");return}!f.nodes.find(ee=>ee.prop==="grid-template-columns")&&!I&&e.warn(u,"Autoplacement does not work without grid-template-columns property"),w&&!I&&eLe(e,u,U,Z)}}normalize(e){return e.replace(/^grid-(rows|columns)/,"grid-template-$1")}prefixed(e,r){return r==="-ms-"?tU({prefix:r,prop:e}):super.prefixed(e,r)}}Eq.names=["grid-template-rows","grid-template-columns","grid-rows","grid-columns"];var oLe=Eq;let aLe=wn;class Dq extends aLe{check(e){return!e.value.includes("flex-")&&e.value!=="baseline"}normalize(){return"justify-self"}prefixed(e,r){return r+"grid-column-align"}}Dq.names=["grid-column-align"];var sLe=Dq;let lLe=wn;class Pq extends lLe{normalize(){return"print-color-adjust"}prefixed(e,r){return r==="-moz-"?"color-adjust":r+"print-color-adjust"}}Pq.names=["print-color-adjust","color-adjust"];var uLe=Pq;let cLe=wn;class Mq extends cLe{normalize(){return"overscroll-behavior"}prefixed(e,r){return r+"scroll-chaining"}set(e,r){return e.value==="auto"?e.value="chained":(e.value==="none"||e.value==="contain")&&(e.value="none"),super.set(e,r)}}Mq.names=["overscroll-behavior","scroll-chaining"];var hLe=Mq;let fLe=wn,{getGridGap:dLe,inheritGridGap:pLe,parseGridAreas:mLe,prefixTrackProp:gLe,prefixTrackValue:rU,warnGridGap:_Le,warnMissedAreas:yLe}=vo;function vLe(t){return t.trim().slice(1,-1).split(/["']\s*["']?/g)}class Iq extends fLe{insert(e,r,o,u){if(r!=="-ms-")return super.insert(e,r,o);let f=!1,p=!1,x=e.parent,s=dLe(e);s=pLe(e,s)||s,x.walkDecls(/-ms-grid-rows/,P=>P.remove()),x.walkDecls(/grid-template-(rows|columns)/,P=>{if(P.prop==="grid-template-rows"){p=!0;let{prop:N,value:U}=P;P.cloneBefore({prop:gLe({prefix:r,prop:N}),value:rU({gap:s.row,value:U})})}else f=!0});let w=vLe(e.value);f&&!p&&s.row&&w.length>1&&e.cloneBefore({prop:"-ms-grid-rows",raws:{},value:rU({gap:s.row,value:`repeat(${w.length}, auto)`})}),_Le({decl:e,gap:s,hasColumns:f,result:u});let I=mLe({gap:s,rows:w});return yLe(I,e,u),e}}Iq.names=["grid-template-areas"];var BLe=Iq;let xLe=wn;class Oq extends xLe{set(e,r){return r==="-webkit-"&&(e.value=e.value.replace(/\s*(right|left)\s*/i,"")),super.set(e,r)}}Oq.names=["text-emphasis-position"];var bLe=Oq;let CLe=wn;class kq extends CLe{set(e,r){return e.prop==="text-decoration-skip-ink"&&e.value==="auto"?(e.prop=r+"text-decoration-skip",e.value="ink",e):super.set(e,r)}}kq.names=["text-decoration-skip-ink","text-decoration-skip"];var wLe=kq,SLe={wrap:Lq,limit:Rq,validate:zq,test:Wk,curry:TLe,name:Nq};function Lq(t,e,r){var o=e-t;return((r-t)%o+o)%o+t}function Rq(t,e,r){return Math.max(t,Math.min(e,r))}function zq(t,e,r,o,u){if(!Wk(t,e,r,o,u))throw new Error(r+" is outside of range ["+t+","+e+")");return r}function Wk(t,e,r,o,u){return!(r<t||r>e||u&&r===e||o&&r===t)}function Nq(t,e,r,o){return(r?"(":"[")+t+","+e+(o?")":"]")}function TLe(t,e,r,o){var u=Nq.bind(null,t,e,r,o);return{wrap:Lq.bind(null,t,e),limit:Rq.bind(null,t,e),validate:function(f){return zq(t,e,f,r,o)},test:function(f){return Wk(t,e,f,r,o)},toString:u,name:u}}let rD=kS,ALe=SLe,ELe=FB,DLe=Ou,PLe=Ri,nU=/top|left|right|bottom/gi;class Xf extends DLe{add(e,r){let o=e.prop;if(o.includes("mask")){if(r==="-webkit-"||r==="-webkit- old")return super.add(e,r)}else if(o==="list-style"||o==="list-style-image"||o==="content"){if(r==="-webkit-"||r==="-webkit- old")return super.add(e,r)}else return super.add(e,r)}cloneDiv(e){for(let r of e)if(r.type==="div"&&r.value===",")return r;return{after:" ",type:"div",value:","}}colorStops(e){let r=[];for(let o=0;o<e.length;o++){let u,f=e[o],p;if(o===0)continue;let x=rD.stringify(f[0]);f[1]&&f[1].type==="word"?u=f[1].value:f[2]&&f[2].type==="word"&&(u=f[2].value);let s;o===1&&(!u||u==="0%")?s=`from(${x})`:o===e.length-1&&(!u||u==="100%")?s=`to(${x})`:u?s=`color-stop(${u}, ${x})`:s=`color-stop(${x})`;let w=f[f.length-1];e[o]=[{type:"word",value:s}],w.type==="div"&&w.value===","&&(p=e[o].push(w)),r.push(p)}return r}convertDirection(e){return e.length>0&&(e[0].value==="to"?this.fixDirection(e):e[0].value.includes("deg")?this.fixAngle(e):this.isRadial(e)&&this.fixRadial(e)),e}fixAngle(e){let r=e[0].value;r=parseFloat(r),r=Math.abs(450-r)%360,r=this.roundFloat(r,3),e[0].value=`${r}deg`}fixDirection(e){e.splice(0,2);for(let r of e){if(r.type==="div")break;r.type==="word"&&(r.value=this.revertDirection(r.value))}}fixRadial(e){let r=[],o=[],u,f,p,x,s;for(x=0;x<e.length-2;x++)if(u=e[x],f=e[x+1],p=e[x+2],u.type==="space"&&f.value==="at"&&p.type==="space"){s=x+3;break}else r.push(u);let w;for(x=s;x<e.length;x++)if(e[x].type==="div"){w=e[x];break}else o.push(e[x]);e.splice(0,x,...o,w,...r)}isRadial(e){let r="before";for(let o of e)if(r==="before"&&o.type==="space")r="at";else if(r==="at"&&o.value==="at")r="after";else{if(r==="after"&&o.type==="space")return!0;if(o.type==="div")break;r="before"}return!1}newDirection(e){if(e[0].value==="to"||(nU.lastIndex=0,!nU.test(e[0].value)))return e;e.unshift({type:"word",value:"to"},{type:"space",value:" "});for(let r=2;r<e.length&&e[r].type!=="div";r++)e[r].type==="word"&&(e[r].value=this.revertDirection(e[r].value));return e}normalize(e,r){if(!e[0])return e;if(/-?\d+(.\d+)?grad/.test(e[0].value))e[0].value=this.normalizeUnit(e[0].value,400);else if(/-?\d+(.\d+)?rad/.test(e[0].value))e[0].value=this.normalizeUnit(e[0].value,2*Math.PI);else if(/-?\d+(.\d+)?turn/.test(e[0].value))e[0].value=this.normalizeUnit(e[0].value,1);else if(e[0].value.includes("deg")){let o=parseFloat(e[0].value);o=ALe.wrap(0,360,o),e[0].value=`${o}deg`}if(r==="linear-gradient"||r==="repeating-linear-gradient"){let o=e[0].value;o==="0deg"||o==="0"?e=this.replaceFirst(e,"to"," ","top"):o==="90deg"?e=this.replaceFirst(e,"to"," ","right"):o==="180deg"?e=this.replaceFirst(e,"to"," ","bottom"):o==="270deg"&&(e=this.replaceFirst(e,"to"," ","left"))}return e}normalizeUnit(e,r){return`${parseFloat(e)/r*360}deg`}old(e){if(e==="-webkit-"){let r;this.name==="linear-gradient"?r="linear":this.name==="repeating-linear-gradient"?r="repeating-linear":this.name==="repeating-radial-gradient"?r="repeating-radial":r="radial";let o="-gradient",u=PLe.regexp(`-webkit-(${r}-gradient|gradient\\(\\s*${r})`,!1);return new ELe(this.name,e+this.name,o,u)}else return super.old(e)}oldDirection(e){let r=this.cloneDiv(e[0]);if(e[0][0].value!=="to")return e.unshift([{type:"word",value:Xf.oldDirections.bottom},r]);{let o=[];for(let f of e[0].slice(2))f.type==="word"&&o.push(f.value.toLowerCase());o=o.join(" ");let u=Xf.oldDirections[o]||o;return e[0]=[{type:"word",value:u},r],e[0]}}oldWebkit(e){let{nodes:r}=e,o=rD.stringify(e.nodes);if(this.name!=="linear-gradient"||r[0]&&r[0].value.includes("deg")||o.includes("px")||o.includes("-corner")||o.includes("-side"))return!1;let u=[[]];for(let f of r)u[u.length-1].push(f),f.type==="div"&&f.value===","&&u.push([]);this.oldDirection(u),this.colorStops(u),e.nodes=[];for(let f of u)e.nodes=e.nodes.concat(f);return e.nodes.unshift({type:"word",value:"linear"},this.cloneDiv(e.nodes)),e.value="-webkit-gradient",!0}replace(e,r){let o=rD(e);for(let u of o.nodes){let f=this.name;if(u.type==="function"&&u.value===f)if(u.nodes=this.newDirection(u.nodes),u.nodes=this.normalize(u.nodes,f),r==="-webkit- old"){if(!this.oldWebkit(u))return!1}else u.nodes=this.convertDirection(u.nodes),u.value=r+u.value}return o.toString()}replaceFirst(e,...r){return r.map(u=>u===" "?{type:"space",value:u}:{type:"word",value:u}).concat(e.slice(1))}revertDirection(e){return Xf.directions[e.toLowerCase()]||e}roundFloat(e,r){return parseFloat(e.toFixed(r))}}Xf.names=["linear-gradient","repeating-linear-gradient","radial-gradient","repeating-radial-gradient"];Xf.directions={bottom:"top",left:"right",right:"left",top:"bottom"};Xf.oldDirections={bottom:"left top, left bottom","bottom left":"right top, left bottom","bottom right":"left top, right bottom",left:"right top, left top","left bottom":"right top, left bottom","left top":"right bottom, left top",right:"left top, right top","right bottom":"left top, right bottom","right top":"left bottom, right top",top:"left bottom, left top","top left":"right bottom, left top","top right":"left bottom, right top"};var MLe=Xf;let ILe=FB,OLe=Ou;function iU(t){return new RegExp(`(^|[\\s,(])(${t}($|[\\s),]))`,"gi")}class Fq extends OLe{add(e,r){if(!(e.prop.includes("grid")&&r!=="-webkit-"))return super.add(e,r)}isStretch(){return this.name==="stretch"||this.name==="fill"||this.name==="fill-available"}old(e){let r=e+this.name;return this.isStretch()&&(e==="-moz-"?r="-moz-available":e==="-webkit-"&&(r="-webkit-fill-available")),new ILe(this.name,r,r,iU(r))}regexp(){return this.regexpCache||(this.regexpCache=iU(this.name)),this.regexpCache}replace(e,r){return r==="-moz-"&&this.isStretch()?e.replace(this.regexp(),"$1-moz-available$3"):r==="-webkit-"&&this.isStretch()?e.replace(this.regexp(),"$1-webkit-fill-available$3"):super.replace(e,r)}}Fq.names=["max-content","min-content","fit-content","fill","fill-available","stretch"];var kLe=Fq;let oU=FB,LLe=Ou;class jq extends LLe{old(e){return e==="-webkit-"?new oU(this.name,"-webkit-optimize-contrast"):e==="-moz-"?new oU(this.name,"-moz-crisp-edges"):super.old(e)}replace(e,r){return r==="-webkit-"?e.replace(this.regexp(),"$1-webkit-optimize-contrast"):r==="-moz-"?e.replace(this.regexp(),"$1-moz-crisp-edges"):super.replace(e,r)}}jq.names=["pixelated"];var RLe=jq;let zLe=Ou;class $q extends zLe{replace(e,r){let o=super.replace(e,r);return r==="-webkit-"&&(o=o.replace(/("[^"]+"|'[^']+')(\s+\d+\w)/gi,"url($1)$2")),o}}$q.names=["image-set"];var NLe=$q;let FLe=em.list,jLe=Ou;class Uq extends jLe{replace(e,r){return FLe.space(e).map(o=>{if(o.slice(0,+this.name.length+1)!==this.name+"(")return o;let u=o.lastIndexOf(")"),f=o.slice(u+1),p=o.slice(this.name.length+1,u);if(r==="-webkit-"){let x=p.match(/\d*.?\d+%?/);x?(p=p.slice(x[0].length).trim(),p+=`, ${x[0]}`):p+=", 0.5"}return r+this.name+"("+p+")"+f}).join(" ")}}Uq.names=["cross-fade"];var $Le=Uq;let ULe=sl,VLe=FB,GLe=Ou;class Vq extends GLe{constructor(e,r){super(e,r),e==="display-flex"&&(this.name="flex")}check(e){return e.prop==="display"&&e.value===this.name}old(e){let r=this.prefixed(e);if(r)return new VLe(this.name,r)}prefixed(e){let r,o;return[r,e]=ULe(e),r===2009?this.name==="flex"?o="box":o="inline-box":r===2012?this.name==="flex"?o="flexbox":o="inline-flexbox":r==="final"&&(o=this.name),e+o}replace(e,r){return this.prefixed(r)}}Vq.names=["display-flex","inline-flex"];var HLe=Vq;let WLe=Ou;class Gq extends WLe{constructor(e,r){super(e,r),e==="display-grid"&&(this.name="grid")}check(e){return e.prop==="display"&&e.value===this.name}}Gq.names=["display-grid","inline-grid"];var ZLe=Gq;let qLe=Ou;class Hq extends qLe{constructor(e,r){super(e,r),e==="filter-function"&&(this.name="filter")}}Hq.names=["filter","filter-function"];var KLe=Hq;let XLe=z_,YLe=Ri;class Wq extends XLe{constructor(e,r,o){super(e,r,o),this.prefixes&&(this.prefixes=YLe.uniq(this.prefixes.map(()=>"-webkit-")))}prefixed(e){return e==="-webkit-"?":-webkit-autofill":`:${e}autofill`}}Wq.names=[":autofill"];var JLe=Wq;let aU=OS,bn=wn,sU=GIe,QLe=nOe,eRe=GZ,tRe=QOe,nD=tm,Vp=z_,rRe=c3e,Cc=Ou,sg=Ri,nRe=f3e,iRe=p3e,oRe=g3e,aRe=v3e,sRe=x3e,lRe=C3e,uRe=S3e,cRe=E3e,hRe=P3e,fRe=O3e,dRe=R3e,pRe=F3e,mRe=$3e,gRe=V3e,_Re=H3e,yRe=Z3e,vRe=X3e,BRe=J3e,xRe=eke,bRe=rke,CRe=ike,wRe=ake,SRe=lke,TRe=cke,ARe=fke,ERe=pke,DRe=gke,PRe=yke,MRe=Bke,IRe=Ake,ORe=Dke,kRe=Mke,LRe=Oke,RRe=Lke,zRe=zke,NRe=jke,FRe=Vke,jRe=Wke,$Re=qke,URe=Xke,VRe=Jke,GRe=oLe,HRe=sLe,WRe=uLe,ZRe=hLe,qRe=BLe,KRe=bLe,XRe=wLe,YRe=MLe,JRe=kLe,QRe=RLe,eze=NLe,tze=$Le,rze=HLe,nze=ZLe,ize=KLe,oze=JLe;Vp.hack(oze);Vp.hack(nRe);Vp.hack(iRe);Vp.hack(oRe);Vp.hack(aRe);bn.hack(sRe);bn.hack(lRe);bn.hack(uRe);bn.hack(cRe);bn.hack(hRe);bn.hack(fRe);bn.hack(dRe);bn.hack(pRe);bn.hack(mRe);bn.hack(gRe);bn.hack(_Re);bn.hack(yRe);bn.hack(vRe);bn.hack(BRe);bn.hack(xRe);bn.hack(bRe);bn.hack(CRe);bn.hack(wRe);bn.hack(SRe);bn.hack(TRe);bn.hack(ARe);bn.hack(ERe);bn.hack(DRe);bn.hack(PRe);bn.hack(MRe);bn.hack(IRe);bn.hack(ORe);bn.hack(kRe);bn.hack(LRe);bn.hack(RRe);bn.hack(zRe);bn.hack(NRe);bn.hack(FRe);bn.hack(jRe);bn.hack($Re);bn.hack(URe);bn.hack(VRe);bn.hack(GRe);bn.hack(HRe);bn.hack(ZRe);bn.hack(qRe);bn.hack(WRe);bn.hack(KRe);bn.hack(XRe);Cc.hack(YRe);Cc.hack(JRe);Cc.hack(QRe);Cc.hack(eze);Cc.hack(tze);Cc.hack(rze);Cc.hack(nze);Cc.hack(ize);let iD=new Map,aze=class pO{constructor(e,r,o={}){this.data=e,this.browsers=r,this.options=o,[this.add,this.remove]=this.preprocess(this.select(this.data)),this.transition=new QLe(this),this.processor=new eRe(this)}cleaner(){if(this.cleanerCache)return this.cleanerCache;if(this.browsers.selected.length){let e=new nD(this.browsers.data,[]);this.cleanerCache=new pO(this.data,e,this.options)}else return this;return this.cleanerCache}decl(e){return iD.has(e)||iD.set(e,bn.load(e)),iD.get(e)}group(e){let r=e.parent,o=r.index(e),{length:u}=r.nodes,f=this.unprefixed(e.prop),p=(x,s)=>{for(o+=x;o>=0&&o<u;){let w=r.nodes[o];if(w.type==="decl"){if(x===-1&&w.prop===f&&!nD.withPrefix(w.value)||this.unprefixed(w.prop)!==f)break;if(s(w)===!0)return!0;if(x===1&&w.prop===f&&!nD.withPrefix(w.value))break}o+=x}return!1};return{down(x){return p(1,x)},up(x){return p(-1,x)}}}normalize(e){return this.decl(e).normalize(e)}prefixed(e,r){return e=aU.unprefixed(e),this.decl(e).prefixed(e,r)}preprocess(e){let r={"@supports":new tRe(pO,this),selectors:[]};for(let u in e.add){let f=e.add[u];if(u==="@keyframes"||u==="@viewport")r[u]=new rRe(u,f,this);else if(u==="@resolution")r[u]=new sU(u,f,this);else if(this.data[u].selector)r.selectors.push(Vp.load(u,f,this));else{let p=this.data[u].props;if(p){let x=Cc.load(u,f,this);for(let s of p)r[s]||(r[s]={values:[]}),r[s].values.push(x)}else{let x=r[u]&&r[u].values||[];r[u]=bn.load(u,f,this),r[u].values=x}}}let o={selectors:[]};for(let u in e.remove){let f=e.remove[u];if(this.data[u].selector){let p=Vp.load(u,f);for(let x of f)o.selectors.push(p.old(x))}else if(u==="@keyframes"||u==="@viewport")for(let p of f){let x=`@${p}${u.slice(1)}`;o[x]={remove:!0}}else if(u==="@resolution")o[u]=new sU(u,f,this);else{let p=this.data[u].props;if(p){let x=Cc.load(u,[],this);for(let s of f){let w=x.old(s);if(w)for(let I of p)o[I]||(o[I]={}),o[I].values||(o[I].values=[]),o[I].values.push(w)}}else for(let x of f){let s=this.decl(u).old(u,x);if(u==="align-self"){let w=r[u]&&r[u].prefixes;if(w){if(x==="-webkit- 2009"&&w.includes("-webkit-"))continue;if(x==="-webkit-"&&w.includes("-webkit- 2009"))continue}}for(let w of s)o[w]||(o[w]={}),o[w].remove=!0}}}return[r,o]}select(e){let r={add:{},remove:{}};for(let o in e){let u=e[o],f=u.browsers.map(s=>{let w=s.split(" ");return{browser:`${w[0]} ${w[1]}`,note:w[2]}}),p=f.filter(s=>s.note).map(s=>`${this.browsers.prefix(s.browser)} ${s.note}`);p=sg.uniq(p),f=f.filter(s=>this.browsers.isSelected(s.browser)).map(s=>{let w=this.browsers.prefix(s.browser);return s.note?`${w} ${s.note}`:w}),f=this.sort(sg.uniq(f)),this.options.flexbox==="no-2009"&&(f=f.filter(s=>!s.includes("2009")));let x=u.browsers.map(s=>this.browsers.prefix(s));u.mistakes&&(x=x.concat(u.mistakes)),x=x.concat(p),x=sg.uniq(x),f.length?(r.add[o]=f,f.length<x.length&&(r.remove[o]=x.filter(s=>!f.includes(s)))):r.remove[o]=x}return r}sort(e){return e.sort((r,o)=>{let u=sg.removeNote(r).length,f=sg.removeNote(o).length;return u===f?o.length-r.length:f-u})}unprefixed(e){let r=this.normalize(aU.unprefixed(e));return r==="flex-direction"&&(r="flex-flow"),r}values(e,r){let o=this[e],u=o["*"]&&o["*"].values,f=o[r]&&o[r].values;return u&&f?sg.uniq(u.concat(f)):u||f||[]}};var sze=aze,oD,lU;function lze(){return lU||(lU=1,oD={A:{A:{1:"F A B",2:"K D E WC"},B:{1:"0 1 2 3 4 5 6 7 8 9 C L M G N O P Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I"},C:{1:"0 1 2 3 4 5 6 7 8 9 cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",257:"J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB",289:"9B ZC aC",292:"XC"},D:{1:"0 1 2 3 4 5 6 7 8 9 BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC",33:"J"},E:{1:"BB D E F A B C L M G eC fC HC 4B 5B gC hC iC IC JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC lC",33:"J bC GC",129:"K cC dC"},F:{1:"B C G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s oC pC 4B UC qC 5B",2:"F mC nC"},G:{1:"E rC VC sC tC uC vC wC xC yC zC 0C 1C 2C 3C 4C 5C 6C 7C 8C 9C AD IC JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC",33:"GC"},H:{2:"DD"},I:{1:"9B J I FD GD HD VC ID JD",33:"ED"},J:{1:"D A"},K:{1:"B C H 4B UC 5B",2:"A"},L:{1:"I"},M:{1:"3B"},N:{1:"A B"},O:{1:"6B"},P:{1:"J t u v w x KD LD MD ND OD HC PD QD RD SD TD 7B 8B UD VD"},Q:{1:"WD"},R:{1:"XD"},S:{1:"ZD",257:"YD"}},B:4,C:"CSS3 Border-radius (rounded corners)",D:!0}),oD}var aD,uU;function uze(){return uU||(uU=1,aD={A:{A:{1:"F A B",2:"K D E WC"},B:{1:"0 1 2 3 4 5 6 7 8 9 C L M G N O P Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I"},C:{1:"0 1 2 3 4 5 6 7 8 9 J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",2:"XC 9B",33:"ZC aC"},D:{1:"0 1 2 3 4 5 6 7 8 9 A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC",33:"J BB K D E F"},E:{1:"K D E F A B C L M G cC dC eC fC HC 4B 5B gC hC iC IC JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC lC",33:"BB",164:"J bC GC"},F:{1:"B C G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s oC pC 4B UC qC 5B",2:"F mC nC"},G:{1:"E sC tC uC vC wC xC yC zC 0C 1C 2C 3C 4C 5C 6C 7C 8C 9C AD IC JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC",33:"rC VC",164:"GC"},H:{2:"DD"},I:{1:"J I HD VC ID JD",164:"9B ED FD GD"},J:{1:"A",33:"D"},K:{1:"B C H 4B UC 5B",2:"A"},L:{1:"I"},M:{1:"3B"},N:{1:"A B"},O:{1:"6B"},P:{1:"J t u v w x KD LD MD ND OD HC PD QD RD SD TD 7B 8B UD VD"},Q:{1:"WD"},R:{1:"XD"},S:{1:"YD ZD"}},B:4,C:"CSS3 Box-shadow",D:!0}),aD}var sD,cU;function cze(){return cU||(cU=1,sD={A:{A:{1:"A B",2:"K D E F WC"},B:{1:"0 1 2 3 4 5 6 7 8 9 C L M G N O P Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I"},C:{1:"0 1 2 3 4 5 6 7 8 9 N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",2:"XC 9B J ZC aC",33:"BB K D E F A B C L M G"},D:{1:"0 1 2 3 4 5 6 7 8 9 VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC",33:"J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB"},E:{1:"F A B C L M G fC HC 4B 5B gC hC iC IC JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC lC",2:"bC GC",33:"K D E cC dC eC",292:"J BB"},F:{1:"IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s 5B",2:"F B mC nC oC pC 4B UC qC",33:"C G N O P CB t u v w x DB EB FB GB HB"},G:{1:"wC xC yC zC 0C 1C 2C 3C 4C 5C 6C 7C 8C 9C AD IC JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC",33:"E tC uC vC",164:"GC rC VC sC"},H:{2:"DD"},I:{1:"I",33:"J HD VC ID JD",164:"9B ED FD GD"},J:{33:"D A"},K:{1:"H 5B",2:"A B C 4B UC"},L:{1:"I"},M:{1:"3B"},N:{1:"A B"},O:{1:"6B"},P:{1:"J t u v w x KD LD MD ND OD HC PD QD RD SD TD 7B 8B UD VD"},Q:{1:"WD"},R:{1:"XD"},S:{1:"YD ZD"}},B:5,C:"CSS Animation",D:!0}),sD}var lD,hU;function hze(){return hU||(hU=1,lD={A:{A:{1:"A B",2:"K D E F WC"},B:{1:"0 1 2 3 4 5 6 7 8 9 C L M G N O P Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I"},C:{1:"0 1 2 3 4 5 6 7 8 9 N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",2:"XC 9B ZC aC",33:"BB K D E F A B C L M G",164:"J"},D:{1:"0 1 2 3 4 5 6 7 8 9 EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC",33:"J BB K D E F A B C L M G N O P CB t u v w x DB"},E:{1:"D E F A B C L M G dC eC fC HC 4B 5B gC hC iC IC JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC lC",33:"K cC",164:"J BB bC GC"},F:{1:"G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s 5B",2:"F mC nC",33:"C",164:"B oC pC 4B UC qC"},G:{1:"E uC vC wC xC yC zC 0C 1C 2C 3C 4C 5C 6C 7C 8C 9C AD IC JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC",33:"tC",164:"GC rC VC sC"},H:{2:"DD"},I:{1:"I ID JD",33:"9B J ED FD GD HD VC"},J:{1:"A",33:"D"},K:{1:"H 5B",33:"C",164:"A B 4B UC"},L:{1:"I"},M:{1:"3B"},N:{1:"A B"},O:{1:"6B"},P:{1:"J t u v w x KD LD MD ND OD HC PD QD RD SD TD 7B 8B UD VD"},Q:{1:"WD"},R:{1:"XD"},S:{1:"YD ZD"}},B:5,C:"CSS3 Transitions",D:!0}),lD}var uD,fU;function fze(){return fU||(fU=1,uD={A:{A:{2:"WC",8:"K D E",129:"A B",161:"F"},B:{1:"0 1 2 3 4 5 6 7 8 9 O P Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I",129:"C L M G N"},C:{1:"0 1 2 3 4 5 6 7 8 9 N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",2:"XC 9B",33:"J BB K D E F A B C L M G ZC aC"},D:{1:"0 1 2 3 4 5 6 7 8 9 OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC",33:"J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB"},E:{1:"F A B C L M G fC HC 4B 5B gC hC iC IC JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC lC",33:"J BB K D E bC GC cC dC eC"},F:{1:"w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s 5B",2:"F mC nC",33:"B C G N O P CB t u v oC pC 4B UC qC"},G:{1:"wC xC yC zC 0C 1C 2C 3C 4C 5C 6C 7C 8C 9C AD IC JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC",33:"E GC rC VC sC tC uC vC"},H:{2:"DD"},I:{1:"I",33:"9B J ED FD GD HD VC ID JD"},J:{33:"D A"},K:{1:"B C H 4B UC 5B",2:"A"},L:{1:"I"},M:{1:"3B"},N:{1:"A B"},O:{1:"6B"},P:{1:"J t u v w x KD LD MD ND OD HC PD QD RD SD TD 7B 8B UD VD"},Q:{1:"WD"},R:{1:"XD"},S:{1:"YD ZD"}},B:4,C:"CSS3 2D Transforms",D:!0}),uD}var cD,dU;function dze(){return dU||(dU=1,cD={A:{A:{2:"K D E F WC",132:"A B"},B:{1:"0 1 2 3 4 5 6 7 8 9 C L M G N O P Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I"},C:{1:"0 1 2 3 4 5 6 7 8 9 N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",2:"XC 9B J BB K D E F ZC aC",33:"A B C L M G"},D:{1:"0 1 2 3 4 5 6 7 8 9 OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC",2:"J BB K D E F A B",33:"C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB"},E:{1:"JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC lC",2:"bC GC",33:"J BB K D E cC dC eC",257:"F A B C L M G fC HC 4B 5B gC hC iC IC"},F:{1:"w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s",2:"F B C mC nC oC pC 4B UC qC 5B",33:"G N O P CB t u v"},G:{1:"JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC",33:"E GC rC VC sC tC uC vC",257:"wC xC yC zC 0C 1C 2C 3C 4C 5C 6C 7C 8C 9C AD IC"},H:{2:"DD"},I:{1:"I",2:"ED FD GD",33:"9B J HD VC ID JD"},J:{33:"D A"},K:{1:"H",2:"A B C 4B UC 5B"},L:{1:"I"},M:{1:"3B"},N:{132:"A B"},O:{1:"6B"},P:{1:"J t u v w x KD LD MD ND OD HC PD QD RD SD TD 7B 8B UD VD"},Q:{1:"WD"},R:{1:"XD"},S:{1:"YD ZD"}},B:5,C:"CSS3 3D Transforms",D:!0}),cD}var hD,pU;function pze(){return pU||(pU=1,hD={A:{A:{1:"A B",2:"K D E F WC"},B:{1:"0 1 2 3 4 5 6 7 8 9 C L M G N O P Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I"},C:{1:"0 1 2 3 4 5 6 7 8 9 OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",2:"XC 9B ZC",260:"N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB",292:"J BB K D E F A B C L M G aC"},D:{1:"0 1 2 3 4 5 6 7 8 9 EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC",33:"A B C L M G N O P CB t u v w x DB",548:"J BB K D E F"},E:{1:"JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC lC",2:"bC GC",260:"D E F A B C L M G dC eC fC HC 4B 5B gC hC iC IC",292:"K cC",804:"J BB"},F:{1:"G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s 5B",2:"F B mC nC oC pC",33:"C qC",164:"4B UC"},G:{1:"JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC",260:"E uC vC wC xC yC zC 0C 1C 2C 3C 4C 5C 6C 7C 8C 9C AD IC",292:"sC tC",804:"GC rC VC"},H:{2:"DD"},I:{1:"I ID JD",33:"J HD VC",548:"9B ED FD GD"},J:{1:"A",548:"D"},K:{1:"H 5B",2:"A B",33:"C",164:"4B UC"},L:{1:"I"},M:{1:"3B"},N:{1:"A B"},O:{1:"6B"},P:{1:"J t u v w x KD LD MD ND OD HC PD QD RD SD TD 7B 8B UD VD"},Q:{1:"WD"},R:{1:"XD"},S:{1:"YD ZD"}},B:4,C:"CSS Gradients",D:!0}),hD}var fD,mU;function mze(){return mU||(mU=1,fD={A:{A:{1:"E F A B",8:"K D WC"},B:{1:"0 1 2 3 4 5 6 7 8 9 C L M G N O P Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I"},C:{1:"0 1 2 3 4 5 6 7 8 9 HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",33:"XC 9B J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB ZC aC"},D:{1:"0 1 2 3 4 5 6 7 8 9 A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC",33:"J BB K D E F"},E:{1:"K D E F A B C L M G cC dC eC fC HC 4B 5B gC hC iC IC JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC lC",33:"J BB bC GC"},F:{1:"B C G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s mC nC oC pC 4B UC qC 5B",2:"F"},G:{1:"E sC tC uC vC wC xC yC zC 0C 1C 2C 3C 4C 5C 6C 7C 8C 9C AD IC JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC",33:"GC rC VC"},H:{1:"DD"},I:{1:"J I HD VC ID JD",33:"9B ED FD GD"},J:{1:"A",33:"D"},K:{1:"A B C H 4B UC 5B"},L:{1:"I"},M:{1:"3B"},N:{1:"A B"},O:{1:"6B"},P:{1:"J t u v w x KD LD MD ND OD HC PD QD RD SD TD 7B 8B UD VD"},Q:{1:"WD"},R:{1:"XD"},S:{1:"YD ZD"}},B:5,C:"CSS3 Box-sizing",D:!0}),fD}var dD,gU;function gze(){return gU||(gU=1,dD={A:{A:{2:"K D E F A B WC"},B:{1:"0 1 2 3 4 5 6 7 8 9 Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I",1028:"L M G N O P",1346:"C"},C:{1:"0 1 2 3 4 5 6 7 8 9 NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",2:"XC 9B ZC",196:"MB",516:"J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB aC"},D:{1:"0 1 2 3 4 5 6 7 8 9 fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC",2:"J BB K D E F A B C L M G N O",33:"P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB"},E:{1:"A B C L M G fC HC 4B 5B gC hC iC IC JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC lC",2:"J BB bC GC cC",33:"K D E F dC eC"},F:{1:"SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s",2:"F B C mC nC oC pC 4B UC qC 5B",33:"G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB"},G:{1:"xC yC zC 0C 1C 2C 3C 4C 5C 6C 7C 8C 9C AD IC JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC",2:"GC rC VC sC",33:"E tC uC vC wC"},H:{2:"DD"},I:{1:"I",2:"9B J ED FD GD HD VC",33:"ID JD"},J:{2:"D",33:"A"},K:{1:"H",2:"A B C 4B UC 5B"},L:{1:"I"},M:{1:"3B"},N:{2:"A B"},O:{1:"6B"},P:{1:"t u v w x MD ND OD HC PD QD RD SD TD 7B 8B UD VD",33:"J KD LD"},Q:{1:"WD"},R:{1:"XD"},S:{1:"YD ZD"}},B:5,C:"CSS Filter Effects",D:!0}),dD}var pD,_U;function _ze(){return _U||(_U=1,pD={A:{A:{2:"K D E F A B WC"},B:{2:"0 1 2 3 4 5 6 7 8 9 C L M G N O P Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I"},C:{2:"0 1 2 3 4 5 6 7 8 9 XC 9B J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC ZC aC"},D:{2:"0 1 2 3 4 5 6 7 8 9 J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC"},E:{1:"A B C L M G fC HC 4B 5B gC hC iC IC JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC lC",2:"J BB K D E bC GC cC dC eC",33:"F"},F:{2:"F B C G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s mC nC oC pC 4B UC qC 5B"},G:{1:"yC zC 0C 1C 2C 3C 4C 5C 6C 7C 8C 9C AD IC JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC",2:"E GC rC VC sC tC uC vC",33:"wC xC"},H:{2:"DD"},I:{2:"9B J I ED FD GD HD VC ID JD"},J:{2:"D A"},K:{2:"A B C H 4B UC 5B"},L:{2:"I"},M:{2:"3B"},N:{2:"A B"},O:{2:"6B"},P:{2:"J t u v w x KD LD MD ND OD HC PD QD RD SD TD 7B 8B UD VD"},Q:{2:"WD"},R:{2:"XD"},S:{2:"YD ZD"}},B:5,C:"CSS filter() function",D:!0}),pD}var mD,yU;function yze(){return yU||(yU=1,mD={A:{A:{2:"K D E F A B WC"},B:{1:"0 1 2 3 4 5 6 7 8 9 Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I",2:"C L M G N",257:"O P"},C:{1:"0 1 2 3 4 5 6 7 8 9 m n o p q r s y z AB I 3B DC EC FC YC",2:"XC 9B J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB ZC aC",578:"uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l"},D:{1:"0 1 2 3 4 5 6 7 8 9 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC",2:"J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB",194:"ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB"},E:{2:"J BB K D E bC GC cC dC eC",33:"F A B C L M G fC HC 4B 5B gC hC iC IC JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC lC"},F:{1:"oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s",2:"F B C G N O P CB t u v w x DB EB FB GB HB IB JB KB LB mC nC oC pC 4B UC qC 5B",194:"MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB"},G:{2:"E GC rC VC sC tC uC vC",33:"wC xC yC zC 0C 1C 2C 3C 4C 5C 6C 7C 8C 9C AD IC JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC"},H:{2:"DD"},I:{1:"I",2:"9B J ED FD GD HD VC ID JD"},J:{2:"D A"},K:{1:"H",2:"A B C 4B UC 5B"},L:{1:"I"},M:{1:"3B"},N:{2:"A B"},O:{1:"6B"},P:{1:"t u v w x QD RD SD TD 7B 8B UD VD",2:"J",194:"KD LD MD ND OD HC PD"},Q:{2:"WD"},R:{1:"XD"},S:{2:"YD ZD"}},B:7,C:"CSS Backdrop Filter",D:!0}),mD}var gD,vU;function vze(){return vU||(vU=1,gD={A:{A:{2:"K D E F A B WC"},B:{2:"0 1 2 3 4 5 6 7 8 9 C L M G N O P Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I"},C:{33:"0 1 2 3 4 5 6 7 8 9 J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",164:"XC 9B ZC aC"},D:{2:"0 1 2 3 4 5 6 7 8 9 J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC"},E:{2:"J BB K D E F A B C L M G bC GC cC dC eC fC HC 4B 5B gC hC iC IC JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC lC"},F:{2:"F B C G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s mC nC oC pC 4B UC qC 5B"},G:{2:"E GC rC VC sC tC uC vC wC xC yC zC 0C 1C 2C 3C 4C 5C 6C 7C 8C 9C AD IC JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC"},H:{2:"DD"},I:{2:"9B J I ED FD GD HD VC ID JD"},J:{2:"D A"},K:{2:"A B C H 4B UC 5B"},L:{2:"I"},M:{33:"3B"},N:{2:"A B"},O:{2:"6B"},P:{2:"J t u v w x KD LD MD ND OD HC PD QD RD SD TD 7B 8B UD VD"},Q:{2:"WD"},R:{2:"XD"},S:{33:"YD ZD"}},B:5,C:"CSS element() function",D:!0}),gD}var _D,BU;function Bze(){return BU||(BU=1,_D={A:{A:{1:"A B",2:"K D E F WC"},B:{1:"C L M G N O P",516:"0 1 2 3 4 5 6 7 8 9 Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I"},C:{132:"eB fB gB hB iB jB kB AC lB BC mB nB oB",164:"XC 9B J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB ZC aC",516:"pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a",1028:"0 1 2 3 4 5 6 7 8 9 b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC"},D:{420:"J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB",516:"0 1 2 3 4 5 6 7 8 9 cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC"},E:{1:"A B C L M G HC 4B 5B gC hC iC IC JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC lC",132:"F fC",164:"D E eC",420:"J BB K bC GC cC dC"},F:{1:"C 4B UC qC 5B",2:"F B mC nC oC pC",420:"G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB",516:"PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s"},G:{1:"yC zC 0C 1C 2C 3C 4C 5C 6C 7C 8C 9C AD IC JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC",132:"wC xC",164:"E uC vC",420:"GC rC VC sC tC"},H:{1:"DD"},I:{420:"9B J ED FD GD HD VC ID JD",516:"I"},J:{420:"D A"},K:{1:"C 4B UC 5B",2:"A B",516:"H"},L:{516:"I"},M:{1028:"3B"},N:{1:"A B"},O:{516:"6B"},P:{420:"J",516:"t u v w x KD LD MD ND OD HC PD QD RD SD TD 7B 8B UD VD"},Q:{516:"WD"},R:{516:"XD"},S:{164:"YD ZD"}},B:4,C:"CSS3 Multiple column layout",D:!0}),_D}var yD,xU;function xze(){return xU||(xU=1,yD={A:{A:{2:"K D E F WC",33:"A B"},B:{1:"0 1 2 3 4 5 6 7 8 9 Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I",33:"C L M G N O P"},C:{1:"0 1 2 3 4 5 6 7 8 9 tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",33:"XC 9B J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB ZC aC"},D:{1:"0 1 2 3 4 5 6 7 8 9 gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC",33:"J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB"},E:{1:"lC",33:"J BB K D E F A B C L M G bC GC cC dC eC fC HC 4B 5B gC hC iC IC JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC"},F:{1:"TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s",2:"F B C mC nC oC pC 4B UC qC 5B",33:"G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB"},G:{33:"E GC rC VC sC tC uC vC wC xC yC zC 0C 1C 2C 3C 4C 5C 6C 7C 8C 9C AD IC JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC"},H:{2:"DD"},I:{1:"I",33:"9B J ED FD GD HD VC ID JD"},J:{33:"D A"},K:{1:"H",2:"A B C 4B UC 5B"},L:{1:"I"},M:{1:"3B"},N:{33:"A B"},O:{1:"6B"},P:{1:"t u v w x LD MD ND OD HC PD QD RD SD TD 7B 8B UD VD",33:"J KD"},Q:{1:"WD"},R:{1:"XD"},S:{1:"ZD",33:"YD"}},B:5,C:"CSS user-select: none",D:!0}),yD}var vD,bU;function bze(){return bU||(bU=1,vD={A:{A:{2:"K D E F WC",1028:"B",1316:"A"},B:{1:"0 1 2 3 4 5 6 7 8 9 C L M G N O P Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I"},C:{1:"0 1 2 3 4 5 6 7 8 9 GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",164:"XC 9B J BB K D E F A B C L M G N O P CB t u ZC aC",516:"v w x DB EB FB"},D:{1:"0 1 2 3 4 5 6 7 8 9 HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC",33:"u v w x DB EB FB GB",164:"J BB K D E F A B C L M G N O P CB t"},E:{1:"F A B C L M G fC HC 4B 5B gC hC iC IC JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC lC",33:"D E dC eC",164:"J BB K bC GC cC"},F:{1:"O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s 5B",2:"F B C mC nC oC pC 4B UC qC",33:"G N"},G:{1:"wC xC yC zC 0C 1C 2C 3C 4C 5C 6C 7C 8C 9C AD IC JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC",33:"E uC vC",164:"GC rC VC sC tC"},H:{1:"DD"},I:{1:"I ID JD",164:"9B J ED FD GD HD VC"},J:{1:"A",164:"D"},K:{1:"H 5B",2:"A B C 4B UC"},L:{1:"I"},M:{1:"3B"},N:{1:"B",292:"A"},O:{1:"6B"},P:{1:"J t u v w x KD LD MD ND OD HC PD QD RD SD TD 7B 8B UD VD"},Q:{1:"WD"},R:{1:"XD"},S:{1:"YD ZD"}},B:4,C:"CSS Flexible Box Layout Module",D:!0}),vD}var BD,CU;function Cze(){return CU||(CU=1,BD={A:{A:{2:"K D E WC",260:"F",516:"A B"},B:{1:"0 1 2 3 4 5 6 7 8 9 C L M G N O P Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I"},C:{1:"0 1 2 3 4 5 6 7 8 9 N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",2:"XC 9B ZC aC",33:"J BB K D E F A B C L M G"},D:{1:"0 1 2 3 4 5 6 7 8 9 EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC",2:"J BB K D E F A B C L M G N O P",33:"CB t u v w x DB"},E:{1:"D E F A B C L M G dC eC fC HC 4B 5B gC hC iC IC JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC lC",2:"J BB bC GC cC",33:"K"},F:{1:"G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s",2:"F B C mC nC oC pC 4B UC qC 5B"},G:{1:"E uC vC wC xC yC zC 0C 1C 2C 3C 4C 5C 6C 7C 8C 9C AD IC JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC",2:"GC rC VC sC",33:"tC"},H:{2:"DD"},I:{1:"I",2:"9B J ED FD GD HD VC",132:"ID JD"},J:{1:"A",2:"D"},K:{1:"H",2:"A B C 4B UC 5B"},L:{1:"I"},M:{1:"3B"},N:{1:"A B"},O:{1:"6B"},P:{1:"J t u v w x KD LD MD ND OD HC PD QD RD SD TD 7B 8B UD VD"},Q:{1:"WD"},R:{1:"XD"},S:{1:"YD ZD"}},B:4,C:"calc() as CSS unit value",D:!0}),BD}var xD,wU;function wze(){return wU||(wU=1,xD={A:{A:{1:"F A B",2:"K D E WC"},B:{1:"0 1 2 3 4 5 6 7 8 9 C L M G N O P Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I"},C:{1:"0 1 2 3 4 5 6 7 8 9 J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",2:"XC 9B ZC",36:"aC"},D:{1:"0 1 2 3 4 5 6 7 8 9 G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC",516:"J BB K D E F A B C L M"},E:{1:"D E F A B C L M G eC fC HC 4B 5B gC hC iC IC JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC lC",772:"J BB K bC GC cC dC"},F:{1:"B C G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s oC pC 4B UC qC 5B",2:"F mC",36:"nC"},G:{1:"E uC vC wC xC yC zC 0C 1C 2C 3C 4C 5C 6C 7C 8C 9C AD IC JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC",4:"GC rC VC tC",516:"sC"},H:{132:"DD"},I:{1:"I ID JD",36:"ED",516:"9B J HD VC",548:"FD GD"},J:{1:"D A"},K:{1:"A B C H 4B UC 5B"},L:{1:"I"},M:{1:"3B"},N:{1:"A B"},O:{1:"6B"},P:{1:"J t u v w x KD LD MD ND OD HC PD QD RD SD TD 7B 8B UD VD"},Q:{1:"WD"},R:{1:"XD"},S:{1:"YD ZD"}},B:4,C:"CSS3 Background-image options",D:!0}),xD}var bD,SU;function Sze(){return SU||(SU=1,bD={A:{A:{2:"K D E F A B WC"},B:{1:"G N O P",33:"C L M",132:"8 9 AB I",164:"0 1 2 3 4 5 6 7 Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z"},C:{1:"0 1 2 3 4 5 6 7 8 9 bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",2:"XC 9B J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB ZC aC"},D:{132:"8 9 AB I 3B DC EC FC",164:"0 1 2 3 4 5 6 7 J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z"},E:{16:"bC GC",132:"6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC lC",388:"M G hC iC IC JC",420:"J BB K D E F A B C L cC dC eC fC HC 4B 5B gC"},F:{2:"F B C mC nC oC pC 4B UC qC 5B",132:"p q r s",164:"G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o"},G:{16:"GC rC VC sC",132:"6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC",388:"8C 9C AD IC JC",420:"E tC uC vC wC xC yC zC 0C 1C 2C 3C 4C 5C 6C 7C"},H:{2:"DD"},I:{16:"9B ED FD GD",132:"I",164:"J HD VC ID JD"},J:{164:"D A"},K:{16:"A B C 4B UC 5B",132:"H"},L:{132:"I"},M:{1:"3B"},N:{2:"A B"},O:{164:"6B"},P:{164:"J t u v w x KD LD MD ND OD HC PD QD RD SD TD 7B 8B UD VD"},Q:{164:"WD"},R:{164:"XD"},S:{1:"YD ZD"}},B:7,C:"Background-clip: text",D:!0}),bD}var CD,TU;function Tze(){return TU||(TU=1,CD={A:{A:{1:"A B",2:"K D E F WC"},B:{1:"0 1 2 3 4 5 6 7 8 9 C L M G N O P Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I"},C:{1:"0 1 2 3 4 5 6 7 8 9 MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",2:"XC 9B ZC aC",33:"G N O P CB t u v w x DB EB FB GB HB IB JB KB LB",164:"J BB K D E F A B C L M"},D:{1:"0 1 2 3 4 5 6 7 8 9 aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC",2:"J BB K D E F A B C L M G",33:"u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB",292:"N O P CB t"},E:{1:"A B C L M G fC HC 4B 5B gC hC iC IC JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC lC",2:"D E F bC GC dC eC",4:"J BB K cC"},F:{1:"NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s",2:"F B C mC nC oC pC 4B UC qC 5B",33:"G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB"},G:{1:"xC yC zC 0C 1C 2C 3C 4C 5C 6C 7C 8C 9C AD IC JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC",2:"E uC vC wC",4:"GC rC VC sC tC"},H:{2:"DD"},I:{1:"I",2:"9B J ED FD GD HD VC",33:"ID JD"},J:{2:"D",33:"A"},K:{1:"H",2:"A B C 4B UC 5B"},L:{1:"I"},M:{1:"3B"},N:{2:"A B"},O:{1:"6B"},P:{1:"t u v w x KD LD MD ND OD HC PD QD RD SD TD 7B 8B UD VD",33:"J"},Q:{1:"WD"},R:{1:"XD"},S:{1:"YD ZD"}},B:2,C:"CSS font-feature-settings",D:!0}),CD}var wD,AU;function Aze(){return AU||(AU=1,wD={A:{A:{2:"K D E F A B WC"},B:{1:"0 1 2 3 4 5 6 7 8 9 Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I",2:"C L M G N O P"},C:{1:"0 1 2 3 4 5 6 7 8 9 MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",2:"XC 9B J BB K D E F A B C L M G N O P CB t u v w ZC aC",194:"x DB EB FB GB HB IB JB KB LB"},D:{1:"0 1 2 3 4 5 6 7 8 9 LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC",2:"J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB",33:"HB IB JB KB"},E:{1:"A B C L M G fC HC 4B 5B gC hC iC IC JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC lC",2:"J BB K bC GC cC dC",33:"D E F eC"},F:{1:"t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s",2:"F B C G mC nC oC pC 4B UC qC 5B",33:"N O P CB"},G:{1:"2C 3C 4C 5C 6C 7C 8C 9C AD IC JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC",2:"GC rC VC sC tC uC",33:"E vC wC xC yC zC 0C 1C"},H:{2:"DD"},I:{1:"I JD",2:"9B J ED FD GD HD VC",33:"ID"},J:{2:"D",33:"A"},K:{1:"H",2:"A B C 4B UC 5B"},L:{1:"I"},M:{1:"3B"},N:{2:"A B"},O:{1:"6B"},P:{1:"J t u v w x KD LD MD ND OD HC PD QD RD SD TD 7B 8B UD VD"},Q:{1:"WD"},R:{1:"XD"},S:{1:"YD ZD"}},B:4,C:"CSS3 font-kerning",D:!0}),wD}var SD,EU;function Eze(){return EU||(EU=1,SD={A:{A:{1:"B",2:"K D E F A WC"},B:{1:"0 1 2 3 4 5 6 7 8 9 M G N O P Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I",129:"C L"},C:{1:"0 1 2 3 4 5 6 7 8 9 cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",2:"XC 9B",260:"G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB",804:"J BB K D E F A B C L M ZC aC"},D:{1:"0 1 2 3 4 5 6 7 8 9 iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC",260:"dB eB fB gB hB",388:"IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB",1412:"G N O P CB t u v w x DB EB FB GB HB",1956:"J BB K D E F A B C L M"},E:{1:"JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC lC",129:"A B C L M G fC HC 4B 5B gC hC iC IC",1412:"K D E F dC eC",1956:"J BB bC GC cC"},F:{1:"VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s",2:"F mC nC",260:"QB RB SB TB UB",388:"G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB",1796:"oC pC",1828:"B C 4B UC qC 5B"},G:{1:"JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC",129:"xC yC zC 0C 1C 2C 3C 4C 5C 6C 7C 8C 9C AD IC",1412:"E tC uC vC wC",1956:"GC rC VC sC"},H:{1828:"DD"},I:{1:"I",388:"ID JD",1956:"9B J ED FD GD HD VC"},J:{1412:"A",1924:"D"},K:{1:"H",2:"A",1828:"B C 4B UC 5B"},L:{1:"I"},M:{1:"3B"},N:{1:"B",2:"A"},O:{1:"6B"},P:{1:"t u v w x MD ND OD HC PD QD RD SD TD 7B 8B UD VD",260:"KD LD",388:"J"},Q:{1:"WD"},R:{1:"XD"},S:{1:"ZD",260:"YD"}},B:4,C:"CSS3 Border images",D:!0}),SD}var TD,DU;function Dze(){return DU||(DU=1,TD={A:{A:{1:"F A B",2:"K D E WC"},B:{1:"0 1 2 3 4 5 6 7 8 9 C L M G N O P Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I"},C:{1:"0 1 2 3 4 5 6 7 8 9 mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",33:"XC 9B J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC ZC aC"},D:{1:"0 1 2 3 4 5 6 7 8 9 J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC"},E:{1:"J BB K D E F A B C L M G bC GC cC dC eC fC HC 4B 5B gC hC iC IC JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC lC"},F:{1:"B C G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s mC nC oC pC 4B UC qC 5B",2:"F"},G:{2:"E GC rC VC sC tC uC vC wC xC yC zC 0C 1C 2C 3C 4C 5C 6C 7C 8C 9C AD IC JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC"},H:{2:"DD"},I:{1:"I ID JD",2:"9B J ED FD GD HD VC"},J:{1:"A",2:"D"},K:{1:"C H UC 5B",16:"A B 4B"},L:{1:"I"},M:{1:"3B"},N:{1:"A B"},O:{1:"6B"},P:{1:"J t u v w x KD LD MD ND OD HC PD QD RD SD TD 7B 8B UD VD"},Q:{1:"WD"},R:{1:"XD"},S:{1:"ZD",33:"YD"}},B:5,C:"::selection CSS pseudo-element",D:!0}),TD}var AD,PU;function Pze(){return PU||(PU=1,AD={A:{A:{2:"K D E F A B WC"},B:{1:"0 1 2 3 4 5 6 7 8 9 Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I",36:"C L M G N O P"},C:{1:"0 1 2 3 4 5 6 7 8 9 dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",33:"CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB",130:"XC 9B J BB K D E F A B C L M G N O P ZC aC"},D:{1:"0 1 2 3 4 5 6 7 8 9 jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC",36:"J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB"},E:{1:"B C L M G HC 4B 5B gC hC iC IC JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC lC",2:"J bC GC",36:"BB K D E F A cC dC eC fC"},F:{1:"WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s",2:"F B C mC nC oC pC 4B UC qC 5B",36:"G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB"},G:{1:"zC 0C 1C 2C 3C 4C 5C 6C 7C 8C 9C AD IC JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC",2:"GC rC",36:"E VC sC tC uC vC wC xC yC"},H:{2:"DD"},I:{1:"I",36:"9B J ED FD GD HD VC ID JD"},J:{36:"D A"},K:{1:"H",2:"A B C 4B UC 5B"},L:{1:"I"},M:{1:"3B"},N:{36:"A B"},O:{1:"6B"},P:{1:"t u v w x MD ND OD HC PD QD RD SD TD 7B 8B UD VD",36:"J KD LD"},Q:{1:"WD"},R:{1:"XD"},S:{1:"ZD",33:"YD"}},B:5,C:"::placeholder CSS pseudo-element",D:!0}),AD}var ED,MU;function Mze(){return MU||(MU=1,ED={A:{A:{2:"K D E F WC",292:"A B"},B:{1:"0 1 2 3 4 5 6 7 8 9 Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I",2:"C L M G N O P"},C:{1:"0 1 2 3 4 5 6 7 8 9 dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",2:"XC 9B ZC aC",164:"J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB"},D:{1:"0 1 2 3 4 5 6 7 8 9 ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC",2:"J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB"},E:{1:"F A B C L M G fC HC 4B 5B gC hC iC IC JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC lC",2:"J BB K D E bC GC cC dC eC"},F:{1:"MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s",2:"F B C G N O P CB t u v w x DB EB FB GB HB IB JB KB LB mC nC oC pC 4B UC qC 5B"},G:{1:"wC xC yC zC 0C 1C 2C 3C 4C 5C 6C 7C 8C 9C AD IC JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC",2:"E GC rC VC sC tC uC vC"},H:{2:"DD"},I:{1:"I",2:"9B J ED FD GD HD VC ID JD"},J:{2:"D A"},K:{1:"H",2:"A B C 4B UC 5B"},L:{1:"I"},M:{1:"3B"},N:{2:"A B"},O:{1:"6B"},P:{1:"t u v w x KD LD MD ND OD HC PD QD RD SD TD 7B 8B UD VD",2:"J"},Q:{1:"WD"},R:{1:"XD"},S:{1:"ZD",164:"YD"}},B:5,C:":placeholder-shown CSS pseudo-class",D:!0}),ED}var DD,IU;function Ize(){return IU||(IU=1,DD={A:{A:{2:"K D E F WC",33:"A B"},B:{1:"0 1 2 3 4 5 6 7 8 9 o p q r s y z AB I",33:"C L M G N O P",132:"Q H R S T U V W",260:"X Y Z a b c d e f g h i j k l m n"},C:{1:"0 1 2 3 4 5 6 7 8 9 VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",2:"XC 9B J BB ZC aC",33:"K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB"},D:{1:"0 1 2 3 4 5 6 7 8 9 X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC",2:"J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB",132:"hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W"},E:{1:"8B PC QC RC SC TC lC",2:"J BB bC GC",33:"K D E F A B C L M G cC dC eC fC HC 4B 5B gC hC iC IC JC 6B jC 7B KC LC MC NC OC kC"},F:{1:"a b c d e f g h i j k l m n o p q r s",2:"F B C G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB mC nC oC pC 4B UC qC 5B",132:"UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z"},G:{1:"8B PC QC RC SC TC",2:"GC rC",33:"E VC sC tC uC vC wC xC yC zC 0C 1C 2C 3C 4C 5C 6C 7C 8C 9C AD IC JC 6B BD 7B KC LC MC NC OC CD"},H:{2:"DD"},I:{1:"I",2:"9B J ED FD GD HD VC ID JD"},J:{2:"D A"},K:{1:"H",2:"A B C 4B UC 5B"},L:{1:"I"},M:{1:"3B"},N:{2:"A B"},O:{1:"6B"},P:{1:"t u v w x LD MD ND OD HC PD QD RD SD TD 7B 8B UD VD",2:"J",132:"KD"},Q:{1:"WD"},R:{1:"XD"},S:{1:"YD ZD"}},B:4,C:"CSS Hyphenation",D:!0}),DD}var PD,OU;function Oze(){return OU||(OU=1,PD={A:{A:{2:"K D E F A WC",548:"B"},B:{1:"0 1 2 3 4 5 6 7 8 9 Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I",516:"C L M G N O P"},C:{1:"0 1 2 3 4 5 6 7 8 9 oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",2:"XC 9B J BB K D E F ZC aC",676:"A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB",1700:"ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB"},D:{1:"0 1 2 3 4 5 6 7 8 9 vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC",2:"J BB K D E F A B C L M",676:"G N O P CB",804:"t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB"},E:{1:"NC OC kC 8B PC QC RC SC TC lC",2:"J BB bC GC",548:"JC 6B jC 7B KC LC MC",676:"cC",804:"K D E F A B C L M G dC eC fC HC 4B 5B gC hC iC IC"},F:{1:"oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s 5B",2:"F B C mC nC oC pC 4B UC qC",804:"G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB"},G:{2:"E GC rC VC sC tC uC vC wC xC yC zC 0C 1C",2052:"2C 3C 4C 5C 6C 7C 8C 9C AD IC JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC"},H:{2:"DD"},I:{2:"9B J I ED FD GD HD VC ID JD"},J:{2:"D",292:"A"},K:{1:"H",2:"A B C 4B UC 5B"},L:{1:"I"},M:{1:"3B"},N:{2:"A",548:"B"},O:{1:"6B"},P:{1:"t u v w x HC PD QD RD SD TD 7B 8B UD VD",804:"J KD LD MD ND OD"},Q:{1:"WD"},R:{1:"XD"},S:{1:"YD ZD"}},B:1,C:"Fullscreen API",D:!0}),PD}var MD,kU;function kze(){return kU||(kU=1,MD={A:{D:{1:"0 1 2 3 4 5 6 7 8 9 PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC",2:"J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB",33:"KB LB MB NB OB"},L:{1:"I"},B:{1:"0 1 2 3 4 5 6 7 8 9 Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I",33:"C L M G N O P"},C:{1:"0 1 2 3 4 5 6 7 8 9 ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",2:"XC 9B J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZC aC"},M:{1:"3B"},A:{2:"K D E F A WC",33:"B"},F:{1:"x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s",2:"F B C G N O P mC nC oC pC 4B UC qC 5B",33:"CB t u v w"},K:{1:"H",2:"A B C 4B UC 5B"},E:{1:"JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC",2:"J BB K D E F A B C L M G bC GC cC dC eC fC HC 4B 5B gC hC iC IC lC"},G:{1:"JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC",2:"E GC rC VC sC tC uC vC wC xC yC zC 0C 1C 2C 3C 4C 5C 6C 7C 8C 9C AD IC"},P:{1:"J t u v w x KD LD MD ND OD HC PD QD RD SD TD 7B 8B UD VD"},I:{1:"I",2:"9B J ED FD GD HD VC",33:"ID JD"}},B:6,C:"CSS ::backdrop pseudo-element",D:void 0}),MD}var ID,LU;function Lze(){return LU||(LU=1,ID={A:{D:{1:"0 1 2 3 4 5 6 7 8 9 Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC",33:"J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X"},L:{1:"I"},B:{1:"0 1 2 3 4 5 6 7 8 9 Y Z a b c d e f g h i j k l m n o p q r s y z AB I",33:"C L M G N O P Q H R S T U V W X"},C:{1:"0 1 2 3 4 5 6 7 8 9 CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",2:"XC 9B J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R ZC aC"},M:{1:"3B"},A:{2:"K D E F WC",33:"A B"},F:{1:"zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s",2:"F B C mC nC oC pC 4B UC qC 5B",33:"G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB"},K:{1:"H",2:"A B C 4B UC 5B"},E:{1:"G hC iC IC JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC",2:"lC",33:"J BB K D E F A B C L M bC GC cC dC eC fC HC 4B 5B gC"},G:{1:"9C AD IC JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC",33:"E GC rC VC sC tC uC vC wC xC yC zC 0C 1C 2C 3C 4C 5C 6C 7C 8C"},P:{1:"t u v w x TD 7B 8B UD VD",33:"J KD LD MD ND OD HC PD QD RD SD"},I:{1:"I",2:"9B J ED FD GD HD VC",33:"ID JD"}},B:6,C:"::file-selector-button CSS pseudo-element",D:void 0}),ID}var OD,RU;function Rze(){return RU||(RU=1,OD={A:{D:{1:"0 1 2 3 4 5 6 7 8 9 y z AB I 3B DC EC FC",33:"J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s"},L:{1:"I"},B:{1:"0 1 2 3 4 5 6 7 8 9 y z AB I",2:"C L M G N O P",33:"Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s"},C:{1:"0 1 2 3 4 5 6 7 8 9 V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",2:"XC 9B J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U ZC aC"},M:{1:"3B"},A:{2:"K D E F A B WC"},F:{1:"f g h i j k l m n o p q r s",2:"F B C mC nC oC pC 4B UC qC 5B",33:"G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e"},K:{1:"H",2:"A B C 4B UC 5B"},E:{1:"G iC IC JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC",2:"lC",33:"J BB K D E F A B C L M bC GC cC dC eC fC HC 4B 5B gC hC"},G:{1:"AD IC JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC",33:"E GC rC VC sC tC uC vC wC xC yC zC 0C 1C 2C 3C 4C 5C 6C 7C 8C 9C"},P:{1:"u v w x",33:"J t KD LD MD ND OD HC PD QD RD SD TD 7B 8B UD VD"},I:{1:"I",2:"9B J ED FD GD HD VC",33:"ID JD"}},B:6,C:":autofill CSS pseudo-class",D:void 0}),OD}var kD,zU;function zze(){return zU||(zU=1,kD={A:{A:{2:"K D E F A B WC"},B:{1:"0 1 2 3 4 5 6 7 8 9 Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I",2:"C L M G N O P"},C:{1:"0 1 2 3 4 5 6 7 8 9 a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",2:"XC 9B ZC aC",33:"fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z",164:"J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB"},D:{1:"0 1 2 3 4 5 6 7 8 9 UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC",2:"J BB K D E F A B C L M G N O P CB t",132:"u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB"},E:{1:"M G gC hC iC IC JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC lC",2:"J BB K bC GC cC",132:"D E F A B C L dC eC fC HC 4B 5B"},F:{1:"HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s",2:"F mC nC oC",132:"G N O P CB t u v w x DB EB FB GB",164:"B C pC 4B UC qC 5B"},G:{1:"7C 8C 9C AD IC JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC",2:"GC rC VC sC tC",132:"E uC vC wC xC yC zC 0C 1C 2C 3C 4C 5C 6C"},H:{164:"DD"},I:{1:"I",2:"9B J ED FD GD HD VC",132:"ID JD"},J:{132:"D A"},K:{1:"H",2:"A",164:"B C 4B UC 5B"},L:{1:"I"},M:{1:"3B"},N:{2:"A B"},O:{1:"6B"},P:{1:"J t u v w x KD LD MD ND OD HC PD QD RD SD TD 7B 8B UD VD"},Q:{1:"WD"},R:{1:"XD"},S:{164:"YD ZD"}},B:4,C:"CSS3 tab-size",D:!0}),kD}var LD,NU;function Nze(){return NU||(NU=1,LD={A:{A:{2:"K D E F A B WC"},B:{2:"C L M G N O P",1025:"0 1 2 3 4 5 6 7 8 9 d e f g h i j k l m n o p q r s y z AB I",1537:"Q H R S T U V W X Y Z a b c"},C:{2:"XC",932:"9B J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB ZC aC",2308:"0 1 2 3 4 5 6 7 8 9 qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC"},D:{2:"J BB K D E F A B C L M G N O P CB t u",545:"v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB",1025:"0 1 2 3 4 5 6 7 8 9 d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC",1537:"YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c"},E:{1:"7B KC LC MC NC OC kC 8B PC QC RC SC TC lC",2:"J BB K bC GC cC",516:"B C L M G 4B 5B gC hC iC IC JC 6B jC",548:"F A fC HC",676:"D E dC eC"},F:{2:"F B C mC nC oC pC 4B UC qC 5B",513:"MB",545:"G N O P CB t u v w x DB EB FB GB HB IB JB KB",1025:"e f g h i j k l m n o p q r s",1537:"LB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d"},G:{1:"7B KC LC MC NC OC CD 8B PC QC RC SC TC",2:"GC rC VC sC tC",516:"8C 9C AD IC JC 6B BD",548:"wC xC yC zC 0C 1C 2C 3C 4C 5C 6C 7C",676:"E uC vC"},H:{2:"DD"},I:{2:"9B J ED FD GD HD VC",545:"ID JD",1025:"I"},J:{2:"D",545:"A"},K:{2:"A B C 4B UC 5B",1025:"H"},L:{1025:"I"},M:{2308:"3B"},N:{2:"A B"},O:{1537:"6B"},P:{545:"J",1025:"t u v w x 8B UD VD",1537:"KD LD MD ND OD HC PD QD RD SD TD 7B"},Q:{1537:"WD"},R:{1537:"XD"},S:{932:"YD",2308:"ZD"}},B:5,C:"Intrinsic & Extrinsic Sizing",D:!0}),LD}var RD,FU;function Fze(){return FU||(FU=1,RD={A:{D:{2:"J BB K D E F A B C L M G N O P CB t u",33:"0 1 2 3 4 5 6 7 8 9 v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC"},L:{33:"I"},B:{2:"C L M G N O P",33:"0 1 2 3 4 5 6 7 8 9 Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I"},C:{2:"XC",33:"0 1 2 3 4 5 6 7 8 9 9B J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC ZC aC"},M:{33:"3B"},A:{2:"K D E F A B WC"},F:{2:"F B C mC nC oC pC 4B UC qC 5B",33:"G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s"},K:{2:"A B C 4B UC 5B",33:"H"},E:{2:"J BB K bC GC cC dC lC",33:"D E F A B C L M G eC fC HC 4B 5B gC hC iC IC JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC"},G:{2:"GC rC VC sC tC",33:"E uC vC wC xC yC zC 0C 1C 2C 3C 4C 5C 6C 7C 8C 9C AD IC JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC"},P:{2:"J",33:"t u v w x KD LD MD ND OD HC PD QD RD SD TD 7B 8B UD VD"},I:{2:"9B J ED FD GD HD VC",33:"I ID JD"}},B:6,C:"width: stretch property",D:void 0}),RD}var zD,jU;function jze(){return jU||(jU=1,zD={A:{A:{2:"K D E F A B WC"},B:{1:"0 1 2 3 4 5 6 7 8 9 C L M G N O P Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I"},C:{1:"0 1 2 3 4 5 6 7 8 9 x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",33:"XC 9B J BB K D E F A B C L M G N O P CB t u v w ZC aC"},D:{1:"0 1 2 3 4 5 6 7 8 9 PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC",33:"J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB"},E:{1:"F A B C L M G fC HC 4B 5B gC hC iC IC JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC lC",33:"J BB K D E bC GC cC dC eC"},F:{1:"C x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s qC 5B",2:"F B mC nC oC pC 4B UC",33:"G N O P CB t u v w"},G:{2:"E GC rC VC sC tC uC vC wC xC yC zC 0C 1C 2C 3C 4C 5C 6C 7C 8C 9C AD IC JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC"},H:{2:"DD"},I:{1:"I",2:"9B J ED FD GD HD VC ID JD"},J:{33:"D A"},K:{1:"H",2:"A B C 4B UC 5B"},L:{1:"I"},M:{2:"3B"},N:{2:"A B"},O:{1:"6B"},P:{2:"J t u v w x KD LD MD ND OD HC PD QD RD SD TD 7B 8B UD VD"},Q:{1:"WD"},R:{1:"XD"},S:{2:"YD ZD"}},B:2,C:"CSS3 Cursors: zoom-in & zoom-out",D:!0}),zD}var ND,$U;function $ze(){return $U||($U=1,ND={A:{A:{2:"K D E F A B WC"},B:{1:"0 1 2 3 4 5 6 7 8 9 G N O P Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I",2:"C L M"},C:{1:"0 1 2 3 4 5 6 7 8 9 FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",33:"XC 9B J BB K D E F A B C L M G N O P CB t u v w x DB EB ZC aC"},D:{1:"0 1 2 3 4 5 6 7 8 9 sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC",33:"J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB"},E:{1:"B C L M G 4B 5B gC hC iC IC JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC lC",33:"J BB K D E F A bC GC cC dC eC fC HC"},F:{1:"C hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s qC 5B",2:"F B mC nC oC pC 4B UC",33:"G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB"},G:{2:"E GC rC VC sC tC uC vC wC xC yC zC 0C 1C 2C 3C 4C 5C 6C 7C 8C 9C AD IC JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC"},H:{2:"DD"},I:{1:"I",2:"9B J ED FD GD HD VC ID JD"},J:{33:"D A"},K:{1:"H",2:"A B C 4B UC 5B"},L:{1:"I"},M:{2:"3B"},N:{2:"A B"},O:{1:"6B"},P:{2:"J t u v w x KD LD MD ND OD HC PD QD RD SD TD 7B 8B UD VD"},Q:{1:"WD"},R:{1:"XD"},S:{2:"YD ZD"}},B:2,C:"CSS grab & grabbing cursors",D:!0}),ND}var FD,UU;function Uze(){return UU||(UU=1,FD={A:{A:{2:"K D E F A B WC"},B:{1:"0 1 2 3 4 5 6 7 8 9 a b c d e f g h i j k l m n o p q r s y z AB I",2:"C L M G",1028:"Q H R S T U V W X Y Z",4100:"N O P"},C:{1:"0 1 2 3 4 5 6 7 8 9 AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",2:"XC 9B J BB K D E F A B C L M G N O P CB t u v w x DB ZC aC",194:"EB FB GB HB IB JB",516:"KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB"},D:{1:"0 1 2 3 4 5 6 7 8 9 a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC",2:"J BB K D E F A B C L M G N O P CB t u v PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB",322:"w x DB EB FB GB HB IB JB KB LB MB NB OB eB fB gB hB",1028:"iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z"},E:{1:"L M G gC hC iC IC JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC lC",2:"J BB K bC GC cC",33:"E F A B C eC fC HC 4B 5B",2084:"D dC"},F:{1:"2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s",2:"F B C G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB mC nC oC pC 4B UC qC 5B",322:"RB SB TB",1028:"UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B"},G:{1:"4C 5C 6C 7C 8C 9C AD IC JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC",2:"GC rC VC sC",33:"E vC wC xC yC zC 0C 1C 2C 3C",2084:"tC uC"},H:{2:"DD"},I:{1:"I",2:"9B J ED FD GD HD VC ID JD"},J:{2:"D A"},K:{1:"H",2:"A B C 4B UC 5B"},L:{1:"I"},M:{1:"3B"},N:{2:"A B"},O:{1:"6B"},P:{1:"t u v w x LD MD ND OD HC PD QD RD SD TD 7B 8B UD VD",2:"J KD"},Q:{1028:"WD"},R:{1:"XD"},S:{1:"ZD",516:"YD"}},B:5,C:"CSS position:sticky",D:!0}),FD}var jD,VU;function Vze(){return VU||(VU=1,jD={A:{A:{1:"B",2:"K D E F WC",164:"A"},B:{1:"0 1 2 3 4 5 6 7 8 9 C L M G N O P Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I"},C:{1:"0 1 2 3 4 5 6 7 8 9 AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",2:"XC 9B J BB ZC aC",8:"K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB",328:"TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB"},D:{1:"0 1 2 3 4 5 6 7 8 9 hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC",2:"J BB K D E F A B C L M G N O P CB t u",8:"v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB",584:"eB fB gB"},E:{1:"L M G gC hC iC IC JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC lC",2:"J BB K bC GC cC",8:"D E F A B C dC eC fC HC 4B",1096:"5B"},F:{1:"UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s",2:"F B C mC nC oC pC 4B UC qC 5B",8:"G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB",584:"RB SB TB"},G:{1:"5C 6C 7C 8C 9C AD IC JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC",8:"E GC rC VC sC tC uC vC wC xC yC zC 0C 1C 2C 3C",6148:"4C"},H:{2:"DD"},I:{1:"I",8:"9B J ED FD GD HD VC ID JD"},J:{8:"D A"},K:{1:"H",2:"A",8:"B C 4B UC 5B"},L:{1:"I"},M:{1:"3B"},N:{1:"B",36:"A"},O:{1:"6B"},P:{1:"t u v w x LD MD ND OD HC PD QD RD SD TD 7B 8B UD VD",2:"KD",8:"J"},Q:{1:"WD"},R:{1:"XD"},S:{1:"ZD",328:"YD"}},B:2,C:"Pointer events",D:!0}),jD}var $D,GU;function Gze(){return GU||(GU=1,$D={A:{A:{2:"K D E F A B WC"},B:{2:"C L M G N O P",2052:"0 1 2 3 4 5 6 7 8 9 Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I"},C:{2:"XC 9B J BB ZC aC",1028:"0 1 2 3 4 5 6 7 8 9 OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",1060:"K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB"},D:{2:"J BB K D E F A B C L M G N O P CB t u v w x DB",226:"EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB",2052:"0 1 2 3 4 5 6 7 8 9 jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC"},E:{2:"J BB K D bC GC cC dC",772:"L M G 5B gC hC iC IC JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC lC",804:"E F A B C fC HC 4B",1316:"eC"},F:{2:"F B C G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB mC nC oC pC 4B UC qC 5B",226:"NB OB PB QB RB SB TB UB VB",2052:"WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s"},G:{2:"GC rC VC sC tC uC",292:"E vC wC xC yC zC 0C 1C 2C 3C 4C 5C 6C 7C 8C 9C AD IC JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC"},H:{2:"DD"},I:{1:"I",2:"9B J ED FD GD HD VC ID JD"},J:{2:"D A"},K:{2:"A B C 4B UC 5B",2052:"H"},L:{2052:"I"},M:{1028:"3B"},N:{2:"A B"},O:{2052:"6B"},P:{2:"J KD LD",2052:"t u v w x MD ND OD HC PD QD RD SD TD 7B 8B UD VD"},Q:{2052:"WD"},R:{2052:"XD"},S:{1028:"YD ZD"}},B:4,C:"text-decoration styling",D:!0}),$D}var UD,HU;function Hze(){return HU||(HU=1,UD={A:{D:{1:"0 1 2 3 4 5 6 7 8 9 jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC",2:"J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB"},L:{1:"I"},B:{1:"0 1 2 3 4 5 6 7 8 9 Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I",2:"C L M G N O P"},C:{1:"0 1 2 3 4 5 6 7 8 9 K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",2:"XC 9B J BB ZC aC"},M:{1:"3B"},A:{2:"K D E F A B WC"},F:{1:"WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s",2:"F B C G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB mC nC oC pC 4B UC qC 5B"},K:{1:"H",2:"A B C 4B UC 5B"},E:{2:"J BB K D bC GC cC dC eC lC",33:"E F A B C L M G fC HC 4B 5B gC hC iC IC JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC"},G:{2:"GC rC VC sC tC uC",33:"E vC wC xC yC zC 0C 1C 2C 3C 4C 5C 6C 7C 8C 9C AD IC JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC"},P:{1:"t u v w x MD ND OD HC PD QD RD SD TD 7B 8B UD VD",2:"J KD LD"},I:{1:"I",2:"9B J ED FD GD HD VC ID JD"}},B:6,C:"text-decoration shorthand property",D:void 0}),UD}var VD,WU;function Wze(){return WU||(WU=1,VD={A:{D:{1:"0 1 2 3 4 5 6 7 8 9 jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC",2:"J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB"},L:{1:"I"},B:{1:"0 1 2 3 4 5 6 7 8 9 Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I",2:"C L M G N O P"},C:{1:"0 1 2 3 4 5 6 7 8 9 OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",2:"XC 9B J BB ZC aC",33:"K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB"},M:{1:"3B"},A:{2:"K D E F A B WC"},F:{1:"WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s",2:"F B C G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB mC nC oC pC 4B UC qC 5B"},K:{1:"H",2:"A B C 4B UC 5B"},E:{1:"L M G 5B gC hC iC IC JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC",2:"J BB K D bC GC cC dC eC lC",33:"E F A B C fC HC 4B"},G:{1:"3C 4C 5C 6C 7C 8C 9C AD IC JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC",2:"GC rC VC sC tC uC",33:"E vC wC xC yC zC 0C 1C 2C"},P:{1:"t u v w x MD ND OD HC PD QD RD SD TD 7B 8B UD VD",2:"J KD LD"},I:{1:"I",2:"9B J ED FD GD HD VC ID JD"}},B:6,C:"text-decoration-color property",D:void 0}),VD}var GD,ZU;function Zze(){return ZU||(ZU=1,GD={A:{D:{1:"0 1 2 3 4 5 6 7 8 9 jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC",2:"J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB"},L:{1:"I"},B:{1:"0 1 2 3 4 5 6 7 8 9 Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I",2:"C L M G N O P"},C:{1:"0 1 2 3 4 5 6 7 8 9 OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",2:"XC 9B J BB ZC aC",33:"K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB"},M:{1:"3B"},A:{2:"K D E F A B WC"},F:{1:"WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s",2:"F B C G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB mC nC oC pC 4B UC qC 5B"},K:{1:"H",2:"A B C 4B UC 5B"},E:{1:"L M G 5B gC hC iC IC JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC",2:"J BB K D bC GC cC dC eC lC",33:"E F A B C fC HC 4B"},G:{1:"3C 4C 5C 6C 7C 8C 9C AD IC JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC",2:"GC rC VC sC tC uC",33:"E vC wC xC yC zC 0C 1C 2C"},P:{1:"t u v w x MD ND OD HC PD QD RD SD TD 7B 8B UD VD",2:"J KD LD"},I:{1:"I",2:"9B J ED FD GD HD VC ID JD"}},B:6,C:"text-decoration-line property",D:void 0}),GD}var HD,qU;function qze(){return qU||(qU=1,HD={A:{D:{1:"0 1 2 3 4 5 6 7 8 9 jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC",2:"J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB"},L:{1:"I"},B:{1:"0 1 2 3 4 5 6 7 8 9 Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I",2:"C L M G N O P"},C:{1:"0 1 2 3 4 5 6 7 8 9 OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",2:"XC 9B J BB ZC aC",33:"K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB"},M:{1:"3B"},A:{2:"K D E F A B WC"},F:{1:"WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s",2:"F B C G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB mC nC oC pC 4B UC qC 5B"},K:{1:"H",2:"A B C 4B UC 5B"},E:{1:"L M G 5B gC hC iC IC JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC",2:"J BB K D bC GC cC dC eC lC",33:"E F A B C fC HC 4B"},G:{1:"3C 4C 5C 6C 7C 8C 9C AD IC JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC",2:"GC rC VC sC tC uC",33:"E vC wC xC yC zC 0C 1C 2C"},P:{1:"t u v w x MD ND OD HC PD QD RD SD TD 7B 8B UD VD",2:"J KD LD"},I:{1:"I",2:"9B J ED FD GD HD VC ID JD"}},B:6,C:"text-decoration-style property",D:void 0}),HD}var WD,KU;function Kze(){return KU||(KU=1,WD={A:{A:{2:"K D E F A B WC"},B:{1:"0 1 2 3 4 5 6 7 8 9 Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I",33:"C L M G N O P"},C:{2:"0 1 2 3 4 5 6 7 8 9 XC 9B J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC ZC aC"},D:{1:"0 1 2 3 4 5 6 7 8 9 gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC",2:"J BB K D E F A B C L M G N O P CB t u v w x DB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB",258:"EB"},E:{2:"J BB K D E F A B C L M G bC GC dC eC fC HC 4B 5B gC hC iC IC JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC lC",258:"cC"},F:{1:"VB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s",2:"F B C G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB WB mC nC oC pC 4B UC qC 5B"},G:{2:"GC rC VC",33:"E sC tC uC vC wC xC yC zC 0C 1C 2C 3C 4C 5C 6C 7C 8C 9C AD IC JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC"},H:{2:"DD"},I:{1:"I",2:"9B J ED FD GD HD VC ID JD"},J:{2:"D A"},K:{1:"H",2:"A B C 4B UC 5B"},L:{1:"I"},M:{33:"3B"},N:{161:"A B"},O:{1:"6B"},P:{1:"t u v w x KD LD MD ND OD HC PD QD RD SD TD 7B 8B UD VD",2:"J"},Q:{1:"WD"},R:{1:"XD"},S:{2:"YD ZD"}},B:7,C:"CSS text-size-adjust",D:!0}),WD}var ZD,XU;function Xze(){return XU||(XU=1,ZD={A:{A:{2:"K D E F A B WC"},B:{1:"8 9 AB I",2:"C L M G N",164:"0 1 2 3 4 5 6 7 Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z",3138:"O",12292:"P"},C:{1:"0 1 2 3 4 5 6 7 8 9 fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",2:"XC 9B",260:"J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB ZC aC"},D:{1:"8 9 AB I 3B DC EC FC",164:"0 1 2 3 4 5 6 7 J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z"},E:{1:"JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC lC",2:"bC GC",164:"J BB K D E F A B C L M G cC dC eC fC HC 4B 5B gC hC iC IC"},F:{1:"p q r s",2:"F B C mC nC oC pC 4B UC qC 5B",164:"G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o"},G:{1:"JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC",164:"E GC rC VC sC tC uC vC wC xC yC zC 0C 1C 2C 3C 4C 5C 6C 7C 8C 9C AD IC"},H:{2:"DD"},I:{1:"I",164:"ID JD",676:"9B J ED FD GD HD VC"},J:{164:"D A"},K:{1:"H",2:"A B C 4B UC 5B"},L:{1:"I"},M:{1:"3B"},N:{2:"A B"},O:{164:"6B"},P:{164:"J t u v w x KD LD MD ND OD HC PD QD RD SD TD 7B 8B UD VD"},Q:{164:"WD"},R:{164:"XD"},S:{1:"ZD",260:"YD"}},B:4,C:"CSS Masks",D:!0}),ZD}var qD,YU;function Yze(){return YU||(YU=1,qD={A:{A:{2:"K D E F A B WC"},B:{2:"C L M G N O",260:"0 1 2 3 4 5 6 7 8 9 Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I",3138:"P"},C:{1:"0 1 2 3 4 5 6 7 8 9 gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",2:"XC 9B",132:"J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZC aC",644:"ZB aB bB cB dB eB fB"},D:{2:"J BB K D E F A B C L M G N O P CB t u v w",260:"0 1 2 3 4 5 6 7 8 9 hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC",292:"x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB"},E:{2:"J BB K bC GC cC dC",260:"M G gC hC iC IC JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC lC",292:"D E F A B C L eC fC HC 4B 5B"},F:{2:"F B C mC nC oC pC 4B UC qC 5B",260:"UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s",292:"G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB"},G:{2:"GC rC VC sC tC",260:"4C 5C 6C 7C 8C 9C AD IC JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC",292:"E uC vC wC xC yC zC 0C 1C 2C 3C"},H:{2:"DD"},I:{2:"9B J ED FD GD HD VC",260:"I",292:"ID JD"},J:{2:"D A"},K:{2:"A B C 4B UC 5B",260:"H"},L:{260:"I"},M:{1:"3B"},N:{2:"A B"},O:{260:"6B"},P:{260:"t u v w x LD MD ND OD HC PD QD RD SD TD 7B 8B UD VD",292:"J KD"},Q:{260:"WD"},R:{260:"XD"},S:{1:"ZD",644:"YD"}},B:4,C:"CSS clip-path property (for HTML)",D:!0}),qD}var KD,JU;function Jze(){return JU||(JU=1,KD={A:{A:{2:"K D E F A B WC"},B:{2:"C L M G N O P",164:"0 1 2 3 4 5 6 7 8 9 Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I"},C:{1:"0 1 2 3 4 5 6 7 8 9 KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",2:"XC 9B J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB ZC aC"},D:{2:"J BB K D E F A B C L M G N O P CB t u",164:"0 1 2 3 4 5 6 7 8 9 v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC"},E:{2:"J BB K bC GC cC",164:"D E F A B C L M G dC eC fC HC 4B 5B gC hC iC IC JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC lC"},F:{2:"F mC nC oC pC",129:"B C 4B UC qC 5B",164:"G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s"},G:{2:"GC rC VC sC tC",164:"E uC vC wC xC yC zC 0C 1C 2C 3C 4C 5C 6C 7C 8C 9C AD IC JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC"},H:{132:"DD"},I:{2:"9B J ED FD GD HD VC",164:"I ID JD"},J:{2:"D",164:"A"},K:{2:"A",129:"B C 4B UC 5B",164:"H"},L:{164:"I"},M:{1:"3B"},N:{2:"A B"},O:{164:"6B"},P:{164:"J t u v w x KD LD MD ND OD HC PD QD RD SD TD 7B 8B UD VD"},Q:{164:"WD"},R:{164:"XD"},S:{1:"YD ZD"}},B:4,C:"CSS box-decoration-break",D:!0}),KD}var XD,QU;function Qze(){return QU||(QU=1,XD={A:{A:{2:"K D E F A B WC"},B:{1:"0 1 2 3 4 5 6 7 8 9 Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I",2:"C L M G",260:"N O P"},C:{1:"0 1 2 3 4 5 6 7 8 9 OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",2:"XC 9B J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB ZC aC"},D:{1:"0 1 2 3 4 5 6 7 8 9 KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC",2:"J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB"},E:{1:"A B C L M G HC 4B 5B gC hC iC IC JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC lC",2:"J BB K D bC GC cC dC",132:"E F eC fC"},F:{1:"CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s",2:"F G N O P mC nC oC",33:"B C pC 4B UC qC 5B"},G:{1:"yC zC 0C 1C 2C 3C 4C 5C 6C 7C 8C 9C AD IC JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC",2:"GC rC VC sC tC uC",132:"E vC wC xC"},H:{33:"DD"},I:{1:"I JD",2:"9B J ED FD GD HD VC ID"},J:{2:"D A"},K:{1:"H",2:"A",33:"B C 4B UC 5B"},L:{1:"I"},M:{1:"3B"},N:{2:"A B"},O:{1:"6B"},P:{1:"J t u v w x KD LD MD ND OD HC PD QD RD SD TD 7B 8B UD VD"},Q:{1:"WD"},R:{1:"XD"},S:{1:"YD ZD"}},B:4,C:"CSS3 object-fit/object-position",D:!0}),XD}var YD,eV;function e4e(){return eV||(eV=1,YD={A:{A:{2:"K D E F A B WC"},B:{1:"0 1 2 3 4 5 6 7 8 9 Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I",2:"C L M G N O P"},C:{1:"0 1 2 3 4 5 6 7 8 9 mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",2:"XC 9B J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB ZC aC",322:"dB eB fB gB hB iB jB kB AC lB BC"},D:{1:"0 1 2 3 4 5 6 7 8 9 PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC",2:"J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB",194:"MB NB OB"},E:{1:"B C L M G HC 4B 5B gC hC iC IC JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC lC",2:"J BB K D bC GC cC dC",33:"E F A eC fC"},F:{1:"x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s",2:"F B C G N O P CB t u v w mC nC oC pC 4B UC qC 5B"},G:{1:"zC 0C 1C 2C 3C 4C 5C 6C 7C 8C 9C AD IC JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC",2:"GC rC VC sC tC uC",33:"E vC wC xC yC"},H:{2:"DD"},I:{1:"I",2:"9B J ED FD GD HD VC ID JD"},J:{2:"D A"},K:{1:"H",2:"A B C 4B UC 5B"},L:{1:"I"},M:{1:"3B"},N:{2:"A B"},O:{1:"6B"},P:{1:"J t u v w x KD LD MD ND OD HC PD QD RD SD TD 7B 8B UD VD"},Q:{1:"WD"},R:{1:"XD"},S:{1:"ZD",2:"YD"}},B:4,C:"CSS Shapes Level 1",D:!0}),YD}var JD,tV;function t4e(){return tV||(tV=1,JD={A:{A:{1:"K D E F A B",2:"WC"},B:{1:"0 1 2 3 4 5 6 7 8 9 C L M G N O P Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I"},C:{1:"0 1 2 3 4 5 6 7 8 9 D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",8:"XC 9B J BB K ZC aC"},D:{1:"0 1 2 3 4 5 6 7 8 9 J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC"},E:{1:"J BB K D E F A B C L M G bC GC cC dC eC fC HC 4B 5B gC hC iC IC JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC lC"},F:{1:"B C G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s 4B UC qC 5B",33:"F mC nC oC pC"},G:{1:"E GC rC VC sC tC uC vC wC xC yC zC 0C 1C 2C 3C 4C 5C 6C 7C 8C 9C AD IC JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC"},H:{1:"DD"},I:{1:"9B J I ED FD GD HD VC ID JD"},J:{1:"D A"},K:{1:"H 5B",33:"A B C 4B UC"},L:{1:"I"},M:{1:"3B"},N:{1:"A B"},O:{1:"6B"},P:{1:"J t u v w x KD LD MD ND OD HC PD QD RD SD TD 7B 8B UD VD"},Q:{1:"WD"},R:{1:"XD"},S:{1:"YD ZD"}},B:2,C:"CSS3 Text-overflow",D:!0}),JD}var QD,rV;function r4e(){return rV||(rV=1,QD={A:{A:{2:"K D E F WC",164:"A B"},B:{66:"0 1 2 3 4 5 6 7 8 9 Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I",164:"C L M G N O P"},C:{2:"0 1 2 3 4 5 6 7 8 9 XC 9B J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC ZC aC"},D:{2:"J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB",66:"0 1 2 3 4 5 6 7 8 9 HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC"},E:{2:"J BB K D E F A B C L M G bC GC cC dC eC fC HC 4B 5B gC hC iC IC JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC lC"},F:{2:"F B C G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB mC nC oC pC 4B UC qC 5B",66:"SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s"},G:{2:"E GC rC VC sC tC uC vC wC xC yC zC 0C 1C 2C 3C 4C 5C 6C 7C 8C 9C AD IC JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC"},H:{292:"DD"},I:{2:"9B J I ED FD GD HD VC ID JD"},J:{2:"D A"},K:{2:"A H",292:"B C 4B UC 5B"},L:{2:"I"},M:{2:"3B"},N:{164:"A B"},O:{2:"6B"},P:{2:"J t u v w x KD LD MD ND OD HC PD QD RD SD TD 7B 8B UD VD"},Q:{66:"WD"},R:{2:"XD"},S:{2:"YD ZD"}},B:5,C:"CSS Device Adaptation",D:!0}),QD}var eP,nV;function n4e(){return nV||(nV=1,eP={A:{A:{2:"K D E WC",132:"F A B"},B:{1:"0 1 2 3 4 5 6 7 8 9 Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I",1028:"C L M G N O P"},C:{1:"0 1 2 3 4 5 6 7 8 9 mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",2:"XC 9B",260:"J BB K D E F A B C L M G ZC aC",1028:"N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC"},D:{1:"0 1 2 3 4 5 6 7 8 9 sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC",548:"J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB",1028:"HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB"},E:{1:"7B KC LC MC NC OC kC 8B PC QC RC SC TC lC",2:"bC GC",548:"J BB K D E F A B C L M G cC dC eC fC HC 4B 5B gC hC iC IC JC 6B jC"},F:{1:"hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s 5B",2:"F",548:"B C mC nC oC pC 4B UC qC",1028:"G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB"},G:{1:"7B KC LC MC NC OC CD 8B PC QC RC SC TC",16:"GC",548:"E rC VC sC tC uC vC wC xC yC zC 0C 1C 2C 3C 4C 5C 6C 7C 8C 9C AD IC JC 6B BD"},H:{132:"DD"},I:{1:"I",16:"ED FD",548:"9B J GD HD VC",1028:"ID JD"},J:{548:"D A"},K:{1:"H 5B",548:"A B C 4B UC"},L:{1:"I"},M:{1:"3B"},N:{132:"A B"},O:{1:"6B"},P:{1:"t u v w x HC PD QD RD SD TD 7B 8B UD VD",1028:"J KD LD MD ND OD"},Q:{1:"WD"},R:{1:"XD"},S:{1:"YD ZD"}},B:4,C:"Media Queries: resolution feature",D:!0}),eP}var tP,iV;function i4e(){return iV||(iV=1,tP={A:{A:{132:"K D E F A B WC"},B:{1:"0 1 2 3 4 5 6 7 8 9 Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I",4:"C L M G N O P"},C:{1:"0 1 2 3 4 5 6 7 8 9 bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",2:"XC 9B J BB K D E F A B ZC aC",33:"C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB"},D:{1:"0 1 2 3 4 5 6 7 8 9 ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC",2:"J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB",322:"NB OB PB QB RB SB TB UB VB WB XB YB"},E:{1:"7B KC LC MC NC OC kC 8B PC QC RC SC TC lC",2:"J BB K D E F A B C L M G bC GC cC dC eC fC HC 4B 5B gC hC iC IC JC 6B jC"},F:{1:"MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s",2:"F B C G N O P CB t u mC nC oC pC 4B UC qC 5B",578:"v w x DB EB FB GB HB IB JB KB LB"},G:{1:"7B KC LC MC NC OC CD 8B PC QC RC SC TC",2:"E GC rC VC sC tC uC vC wC xC yC zC 0C 1C 2C 3C 4C 5C 6C 7C 8C 9C AD IC JC 6B BD"},H:{2:"DD"},I:{1:"I",2:"9B J ED FD GD HD VC ID JD"},J:{2:"D A"},K:{1:"H",2:"A B C 4B UC 5B"},L:{1:"I"},M:{1:"3B"},N:{132:"A B"},O:{1:"6B"},P:{1:"t u v w x KD LD MD ND OD HC PD QD RD SD TD 7B 8B UD VD",2:"J"},Q:{1:"WD"},R:{1:"XD"},S:{1:"ZD",33:"YD"}},B:4,C:"CSS3 text-align-last",D:!0}),tP}var rP,oV;function o4e(){return oV||(oV=1,rP={A:{A:{2:"K WC",2340:"D E F A B"},B:{2:"C L M G N O P",1025:"0 1 2 3 4 5 6 7 8 9 Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I"},C:{1:"0 1 2 3 4 5 6 7 8 9 c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",2:"XC 9B ZC",513:"pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b",545:"J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB aC"},D:{2:"J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB",1025:"0 1 2 3 4 5 6 7 8 9 TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC"},E:{1:"A B C L M G HC 4B 5B gC hC iC IC JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC lC",2:"J BB bC GC cC",164:"K",4644:"D E F dC eC fC"},F:{2:"F B G N O P CB t u v w x DB EB FB mC nC oC pC 4B UC",545:"C qC 5B",1025:"GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s"},G:{1:"yC zC 0C 1C 2C 3C 4C 5C 6C 7C 8C 9C AD IC JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC",2:"GC rC VC",4260:"sC tC",4644:"E uC vC wC xC"},H:{2:"DD"},I:{2:"9B J ED FD GD HD VC ID JD",1025:"I"},J:{2:"D",4260:"A"},K:{2:"A B 4B UC",545:"C 5B",1025:"H"},L:{1025:"I"},M:{1:"3B"},N:{2340:"A B"},O:{1025:"6B"},P:{1025:"J t u v w x KD LD MD ND OD HC PD QD RD SD TD 7B 8B UD VD"},Q:{1025:"WD"},R:{1025:"XD"},S:{1:"ZD",4097:"YD"}},B:4,C:"Crisp edges/pixelated images",D:!0}),rP}var nP,aV;function a4e(){return aV||(aV=1,nP={A:{A:{2:"K D E F A B WC"},B:{1:"0 1 2 3 4 5 6 7 8 9 Y Z a b c d e f g h i j k l m n o p q r s y z AB I",2:"C L M G N O P",1028:"W X",1540:"Q H R S T U V"},C:{1:"0 1 2 3 4 5 6 7 8 9 qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",2:"XC",164:"9B J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB ZC aC",1540:"TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB"},D:{1:"0 1 2 3 4 5 6 7 8 9 Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC",292:"J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB",1028:"W X",1540:"tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V"},E:{1:"G iC IC JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC lC",292:"J BB K D E F A B C bC GC cC dC eC fC HC 4B",1540:"L M 5B gC",3076:"hC"},F:{1:"0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s",2:"F B C mC nC oC pC 4B UC qC 5B",292:"G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB",1028:"yB zB",1540:"iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB"},G:{1:"AD IC JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC",292:"E GC rC VC sC tC uC vC wC xC yC zC 0C 1C 2C",1540:"3C 4C 5C 6C 7C 8C",3076:"9C"},H:{2:"DD"},I:{1:"I",292:"9B J ED FD GD HD VC ID JD"},J:{292:"D A"},K:{1:"H",2:"A B C 4B UC 5B"},L:{1:"I"},M:{1:"3B"},N:{2:"A B"},O:{1:"6B"},P:{1:"t u v w x TD 7B 8B UD VD",292:"J KD LD MD ND OD",1540:"HC PD QD RD SD"},Q:{1540:"WD"},R:{1:"XD"},S:{1:"ZD",1540:"YD"}},B:5,C:"CSS Logical Properties",D:!0}),nP}var iP,sV;function s4e(){return sV||(sV=1,iP={A:{A:{2:"K D E F A B WC"},B:{1:"0 1 2 3 4 5 6 7 8 9 T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I",33:"S",164:"Q H R",388:"C L M G N O P"},C:{1:"0 1 2 3 4 5 6 7 8 9 H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",164:"NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q",676:"XC 9B J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB ZC aC"},D:{1:"0 1 2 3 4 5 6 7 8 9 T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC",33:"S",164:"J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R"},E:{1:"JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC lC",164:"J BB K D E F A B C L M G bC GC cC dC eC fC HC 4B 5B gC hC iC IC"},F:{1:"xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s",2:"F B C mC nC oC pC 4B UC qC 5B",33:"uB vB wB",164:"G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB"},G:{1:"JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC",164:"E GC rC VC sC tC uC vC wC xC yC zC 0C 1C 2C 3C 4C 5C 6C 7C 8C 9C AD IC"},H:{2:"DD"},I:{1:"I",164:"9B J ED FD GD HD VC ID JD"},J:{164:"D A"},K:{1:"H",2:"A B C 4B UC 5B"},L:{1:"I"},M:{1:"3B"},N:{2:"A",388:"B"},O:{1:"6B"},P:{1:"t u v w x SD TD 7B 8B UD VD",164:"J KD LD MD ND OD HC PD QD RD"},Q:{164:"WD"},R:{1:"XD"},S:{1:"ZD",164:"YD"}},B:5,C:"CSS Appearance",D:!0}),iP}var oP,lV;function l4e(){return lV||(lV=1,oP={A:{A:{2:"K D E F WC",6308:"A",6436:"B"},B:{1:"0 1 2 3 4 5 6 7 8 9 Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I",6436:"C L M G N O P"},C:{1:"0 1 2 3 4 5 6 7 8 9 sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",2:"XC 9B J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB ZC aC",2052:"RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB"},D:{1:"0 1 2 3 4 5 6 7 8 9 tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC",2:"J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB",8258:"qB rB sB"},E:{1:"B C L M G 4B 5B gC hC iC IC JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC lC",2:"J BB K D E bC GC cC dC eC",3108:"F A fC HC"},F:{1:"oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s",2:"F B C G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB mC nC oC pC 4B UC qC 5B",8258:"gB hB iB jB kB lB mB nB"},G:{1:"0C 1C 2C 3C 4C 5C 6C 7C 8C 9C AD IC JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC",2:"E GC rC VC sC tC uC vC",3108:"wC xC yC zC"},H:{2:"DD"},I:{1:"I",2:"9B J ED FD GD HD VC ID JD"},J:{2:"D A"},K:{1:"H",2:"A B C 4B UC 5B"},L:{1:"I"},M:{1:"3B"},N:{2:"A B"},O:{1:"6B"},P:{1:"t u v w x HC PD QD RD SD TD 7B 8B UD VD",2:"J KD LD MD ND OD"},Q:{1:"WD"},R:{1:"XD"},S:{1:"ZD",2052:"YD"}},B:4,C:"CSS Scroll Snap",D:!0}),oP}var aP,uV;function u4e(){return uV||(uV=1,aP={A:{A:{2:"K D E F WC",420:"A B"},B:{2:"0 1 2 3 4 5 6 7 8 9 Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I",420:"C L M G N O P"},C:{2:"0 1 2 3 4 5 6 7 8 9 XC 9B J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC ZC aC"},D:{2:"0 1 2 3 4 5 6 7 8 9 J BB K D E F A B C L M NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC",36:"G N O P",66:"CB t u v w x DB EB FB GB HB IB JB KB LB MB"},E:{2:"J BB K C L M G bC GC cC 4B 5B gC hC iC IC JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC lC",33:"D E F A B dC eC fC HC"},F:{2:"F B C G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s mC nC oC pC 4B UC qC 5B"},G:{2:"GC rC VC sC tC 1C 2C 3C 4C 5C 6C 7C 8C 9C AD IC JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC",33:"E uC vC wC xC yC zC 0C"},H:{2:"DD"},I:{2:"9B J I ED FD GD HD VC ID JD"},J:{2:"D A"},K:{2:"A B C H 4B UC 5B"},L:{2:"I"},M:{2:"3B"},N:{420:"A B"},O:{2:"6B"},P:{2:"J t u v w x KD LD MD ND OD HC PD QD RD SD TD 7B 8B UD VD"},Q:{2:"WD"},R:{2:"XD"},S:{2:"YD ZD"}},B:5,C:"CSS Regions",D:!0}),aP}var sP,cV;function c4e(){return cV||(cV=1,sP={A:{A:{2:"K D E F A B WC"},B:{1:"2 3 4 5 6 7 8 9 AB I",2:"C L M G N O P",164:"0 Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z",2049:"1"},C:{1:"1 2 3 4 5 6 7 8 9 AB I 3B DC EC FC YC",2:"XC 9B J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U ZC aC",66:"V W",2305:"0 Y Z a b c d e f g h i j k l m n o p q r s y z",2820:"X"},D:{1:"2 3 4 5 6 7 8 9 AB I 3B DC EC FC",2:"J BB K D E F A B C L M G N O P CB t",164:"0 u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z",2049:"1"},E:{1:"8B PC QC RC SC TC lC",2:"J BB bC GC cC",132:"A B C L HC 4B 5B gC",164:"K D E F dC eC fC",1540:"M G hC iC IC JC 6B jC 7B KC LC MC NC OC kC"},F:{1:"j k l m n o p q r s",2:"F B C mC nC oC pC 4B UC qC 5B",164:"G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h",2049:"i"},G:{1:"8B PC QC RC SC TC",2:"GC rC VC sC",132:"yC zC 0C 1C 2C 3C 4C 5C 6C 7C",164:"E tC uC vC wC xC",1540:"8C 9C AD IC JC 6B BD 7B KC LC MC NC OC CD"},H:{2:"DD"},I:{1:"I",2:"9B J ED FD GD HD VC",164:"ID JD"},J:{2:"D",164:"A"},K:{1:"H",2:"A B C 4B UC 5B"},L:{1:"I"},M:{1:"3B"},N:{2:"A B"},O:{164:"6B"},P:{1:"w x",164:"J t u v KD LD MD ND OD HC PD QD RD SD TD 7B 8B UD VD"},Q:{164:"WD"},R:{164:"XD"},S:{2:"YD ZD"}},B:5,C:"CSS image-set",D:!0}),sP}var lP,hV;function h4e(){return hV||(hV=1,lP={A:{A:{132:"K D E F A B WC"},B:{1:"0 1 2 3 4 5 6 7 8 9 C L M G N O P Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I"},C:{1:"0 1 2 3 4 5 6 7 8 9 TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",2:"XC 9B J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB ZC aC",322:"OB PB QB RB SB"},D:{1:"0 1 2 3 4 5 6 7 8 9 aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC",2:"J BB K",16:"D",33:"E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB"},E:{1:"B C L M G 4B 5B gC hC iC IC JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC lC",2:"J bC GC",16:"BB",33:"K D E F A cC dC eC fC HC"},F:{1:"NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s",2:"F B C mC nC oC pC 4B UC qC 5B",33:"G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB"},G:{1:"0C 1C 2C 3C 4C 5C 6C 7C 8C 9C AD IC JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC",16:"GC rC VC",33:"E sC tC uC vC wC xC yC zC"},H:{2:"DD"},I:{1:"I",2:"ED FD GD",33:"9B J HD VC ID JD"},J:{33:"D A"},K:{1:"H",2:"A B C 4B UC 5B"},L:{1:"I"},M:{1:"3B"},N:{36:"A B"},O:{1:"6B"},P:{1:"t u v w x KD LD MD ND OD HC PD QD RD SD TD 7B 8B UD VD",33:"J"},Q:{1:"WD"},R:{1:"XD"},S:{1:"YD ZD"}},B:2,C:"CSS writing-mode property",D:!0}),lP}var uP,fV;function f4e(){return fV||(fV=1,uP={A:{A:{2:"K D E F A B WC"},B:{2:"C L M G N O P",33:"0 1 2 3 4 5 6 7 8 9 Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I"},C:{2:"0 1 2 3 4 5 6 7 8 9 XC 9B J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC ZC aC"},D:{2:"J BB K D E F A B C L M G N",33:"0 1 2 3 4 5 6 7 8 9 O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC"},E:{1:"A B C L M G HC 4B 5B gC hC iC IC JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC lC",2:"J BB bC GC",33:"K D E F cC dC eC fC"},F:{2:"F B C mC nC oC pC 4B UC qC 5B",33:"G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s"},G:{1:"yC zC 0C 1C 2C 3C 4C 5C 6C 7C 8C 9C AD IC JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC",2:"GC rC VC",33:"E sC tC uC vC wC xC"},H:{2:"DD"},I:{2:"9B J ED FD GD HD VC",33:"I ID JD"},J:{2:"D A"},K:{2:"A B C 4B UC 5B",33:"H"},L:{33:"I"},M:{2:"3B"},N:{2:"A B"},O:{33:"6B"},P:{33:"J t u v w x KD LD MD ND OD HC PD QD RD SD TD 7B 8B UD VD"},Q:{33:"WD"},R:{33:"XD"},S:{2:"YD ZD"}},B:4,C:"CSS Cross-Fade Function",D:!0}),uP}var cP,dV;function d4e(){return dV||(dV=1,cP={A:{A:{2:"K D E F A B WC"},B:{1:"0 1 2 3 4 5 6 7 8 9 L M G N O P Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I",2:"C"},C:{1:"0 1 2 3 4 5 6 7 8 9 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",16:"XC",33:"9B J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B ZC aC"},D:{1:"0 1 2 3 4 5 6 7 8 9 OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC",16:"J BB K D E F A B C L M",132:"G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB"},E:{1:"F A B C L M G fC HC 4B 5B gC hC iC IC JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC lC",16:"bC GC",132:"J BB K D E cC dC eC"},F:{1:"w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s",16:"F B mC nC oC pC 4B",132:"C G N O P CB t u v UC qC 5B"},G:{1:"wC xC yC zC 0C 1C 2C 3C 4C 5C 6C 7C 8C 9C AD IC JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC",16:"GC rC",132:"E VC sC tC uC vC"},H:{2:"DD"},I:{1:"I",16:"ED FD",132:"9B J GD HD VC ID JD"},J:{1:"A",132:"D"},K:{1:"H",2:"A B 4B",132:"C UC 5B"},L:{1:"I"},M:{1:"3B"},N:{2:"A B"},O:{1:"6B"},P:{1:"J t u v w x KD LD MD ND OD HC PD QD RD SD TD 7B 8B UD VD"},Q:{1:"WD"},R:{1:"XD"},S:{1:"ZD",33:"YD"}},B:1,C:"CSS :read-only and :read-write selectors",D:!0}),cP}var hP,pV;function p4e(){return pV||(pV=1,hP={A:{A:{2:"K D E F A B WC"},B:{1:"0 1 2 3 4 5 6 7 8 9 i j k l m n o p q r s y z AB I",2:"C L M G N O P",164:"Q H R S T U V W X Y Z a b c d e f g h"},C:{1:"0 1 2 3 4 5 6 7 8 9 YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",2:"XC 9B J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB ZC aC",322:"XB"},D:{1:"0 1 2 3 4 5 6 7 8 9 i j k l m n o p q r s y z AB I 3B DC EC FC",2:"J BB K D E F A B C L M G N O P CB t u v w x",164:"DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h"},E:{1:"E F A B C L M G eC fC HC 4B 5B gC hC iC IC JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC lC",2:"J BB K bC GC cC",164:"D dC"},F:{1:"V W X Y Z a b c d e f g h i j k l m n o p q r s",2:"F B C mC nC oC pC 4B UC qC 5B",164:"G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U"},G:{1:"E uC vC wC xC yC zC 0C 1C 2C 3C 4C 5C 6C 7C 8C 9C AD IC JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC",2:"GC rC VC sC tC"},H:{2:"DD"},I:{1:"I",2:"9B J ED FD GD HD VC",164:"ID JD"},J:{2:"D",164:"A"},K:{1:"H",2:"A B C 4B UC 5B"},L:{1:"I"},M:{1:"3B"},N:{2:"A B"},O:{1:"6B"},P:{1:"t u v w x UD VD",164:"J KD LD MD ND OD HC PD QD RD SD TD 7B 8B"},Q:{164:"WD"},R:{164:"XD"},S:{1:"YD ZD"}},B:4,C:"text-emphasis styling",D:!0}),hP}var fP,mV;function m4e(){return mV||(mV=1,fP={A:{A:{2:"K D E WC",8:"F",292:"A B"},B:{1:"0 1 2 3 4 5 6 7 8 9 N O P Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I",292:"C L M G"},C:{1:"0 1 2 3 4 5 6 7 8 9 gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",2:"XC 9B J BB K D E F A B C L M G N O P ZC aC",8:"CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB",584:"SB TB UB VB WB XB YB ZB aB bB cB dB",1025:"eB fB"},D:{1:"0 1 2 3 4 5 6 7 8 9 kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC",2:"J BB K D E F A B C L M G N O P CB t u v w x",8:"DB EB FB GB",200:"HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB",1025:"jB"},E:{1:"B C L M G HC 4B 5B gC hC iC IC JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC lC",2:"J BB bC GC cC",8:"K D E F A dC eC fC"},F:{1:"WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s",2:"F B C G N O P CB t u v w x DB EB FB mC nC oC pC 4B UC qC 5B",200:"GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB"},G:{1:"zC 0C 1C 2C 3C 4C 5C 6C 7C 8C 9C AD IC JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC",2:"GC rC VC sC",8:"E tC uC vC wC xC yC"},H:{2:"DD"},I:{1:"I",2:"9B J ED FD GD HD",8:"VC ID JD"},J:{2:"D A"},K:{1:"H",2:"A B C 4B UC 5B"},L:{1:"I"},M:{1:"3B"},N:{292:"A B"},O:{1:"6B"},P:{1:"t u v w x LD MD ND OD HC PD QD RD SD TD 7B 8B UD VD",2:"KD",8:"J"},Q:{1:"WD"},R:{1:"XD"},S:{1:"YD ZD"}},B:4,C:"CSS Grid Layout (level 1)",D:!0}),fP}var dP,gV;function g4e(){return gV||(gV=1,dP={A:{A:{2:"K D WC",161:"E F A B"},B:{2:"0 1 2 3 4 5 6 7 8 9 Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I",161:"C L M G N O P"},C:{2:"0 1 2 3 4 5 6 7 8 9 XC 9B J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC ZC aC"},D:{2:"0 1 2 3 4 5 6 7 8 9 J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC"},E:{2:"J BB K D E F A B C L M G bC GC cC dC eC fC HC 4B 5B gC hC iC IC JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC lC"},F:{2:"F B C G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s mC nC oC pC 4B UC qC 5B"},G:{2:"E GC rC VC sC tC uC vC wC xC yC zC 0C 1C 2C 3C 4C 5C 6C 7C 8C 9C AD IC JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC"},H:{2:"DD"},I:{2:"9B J I ED FD GD HD VC ID JD"},J:{2:"D A"},K:{2:"A B C H 4B UC 5B"},L:{2:"I"},M:{2:"3B"},N:{16:"A B"},O:{2:"6B"},P:{2:"J t u v w x KD LD MD ND OD HC PD QD RD SD TD 7B 8B UD VD"},Q:{2:"WD"},R:{2:"XD"},S:{2:"YD ZD"}},B:5,C:"CSS Text 4 text-spacing",D:!1}),dP}var pP,_V;function _4e(){return _V||(_V=1,pP={A:{A:{2:"K D E F A B WC"},B:{1:"0 1 2 3 4 5 6 7 8 9 Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I",2:"C L M G N O P"},C:{1:"0 1 2 3 4 5 6 7 8 9 cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",16:"XC",33:"9B J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB ZC aC"},D:{1:"0 1 2 3 4 5 6 7 8 9 pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC",16:"J BB K D E F A B C L M",33:"G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB"},E:{1:"F A B C L M G fC HC 4B 5B gC hC iC IC JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC lC",16:"J BB K bC GC cC",33:"D E dC eC"},F:{1:"eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s",2:"F B C mC nC oC pC 4B UC qC 5B",33:"G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB"},G:{1:"wC xC yC zC 0C 1C 2C 3C 4C 5C 6C 7C 8C 9C AD IC JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC",16:"GC rC VC sC",33:"E tC uC vC"},H:{2:"DD"},I:{1:"I",16:"9B J ED FD GD HD VC",33:"ID JD"},J:{16:"D A"},K:{1:"H",2:"A B C 4B UC 5B"},L:{1:"I"},M:{1:"3B"},N:{2:"A B"},O:{1:"6B"},P:{1:"t u v w x OD HC PD QD RD SD TD 7B 8B UD VD",16:"J",33:"KD LD MD ND"},Q:{1:"WD"},R:{1:"XD"},S:{1:"ZD",33:"YD"}},B:5,C:"CSS :any-link selector",D:!0}),pP}var mP,yV;function y4e(){return yV||(yV=1,mP={A:{D:{1:"0 1 2 3 4 5 6 7 8 9 aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC",2:"J BB K D E F A B C L M G",33:"N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB"},L:{1:"I"},B:{1:"0 1 2 3 4 5 6 7 8 9 Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I",2:"C L M G N O P"},C:{1:"0 1 2 3 4 5 6 7 8 9 cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",2:"XC 9B J BB K D E F ZC aC",33:"A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB"},M:{1:"3B"},A:{2:"K D E F A B WC"},F:{1:"NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s",2:"F B C mC nC oC pC 4B UC qC 5B",33:"G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB"},K:{1:"H",2:"A B C 4B UC 5B"},E:{1:"B C L M G 4B 5B gC hC iC IC JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC",2:"J BB bC GC cC lC",33:"K D E F A dC eC fC HC"},G:{1:"0C 1C 2C 3C 4C 5C 6C 7C 8C 9C AD IC JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC",2:"GC rC VC sC",33:"E tC uC vC wC xC yC zC"},P:{1:"t u v w x KD LD MD ND OD HC PD QD RD SD TD 7B 8B UD VD",2:"J"},I:{1:"I",2:"9B J ED FD GD HD VC ID JD"}},B:6,C:"isolate from unicode-bidi",D:void 0}),mP}var gP,vV;function v4e(){return vV||(vV=1,gP={A:{D:{1:"0 1 2 3 4 5 6 7 8 9 aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC",2:"J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB"},L:{1:"I"},B:{1:"0 1 2 3 4 5 6 7 8 9 Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I",2:"C L M G N O P"},C:{1:"0 1 2 3 4 5 6 7 8 9 cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",2:"XC 9B J BB K D E F ZC aC",33:"A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB"},M:{1:"3B"},A:{2:"K D E F A B WC"},F:{1:"NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s",2:"F B C G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB mC nC oC pC 4B UC qC 5B"},K:{1:"H",2:"A B C 4B UC 5B"},E:{1:"B C L M G 4B 5B gC hC iC IC JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC",2:"J BB bC GC cC lC",33:"K D E F A dC eC fC HC"},G:{1:"0C 1C 2C 3C 4C 5C 6C 7C 8C 9C AD IC JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC",2:"GC rC VC sC",33:"E tC uC vC wC xC yC zC"},P:{1:"t u v w x KD LD MD ND OD HC PD QD RD SD TD 7B 8B UD VD",2:"J"},I:{1:"I",2:"9B J ED FD GD HD VC ID JD"}},B:6,C:"plaintext from unicode-bidi",D:void 0}),gP}var _P,BV;function B4e(){return BV||(BV=1,_P={A:{D:{1:"0 1 2 3 4 5 6 7 8 9 aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC",2:"J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB"},L:{1:"I"},B:{1:"0 1 2 3 4 5 6 7 8 9 Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I",2:"C L M G N O P"},C:{1:"0 1 2 3 4 5 6 7 8 9 cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",2:"XC 9B J BB K D E F A B C L M G N ZC aC",33:"O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB"},M:{1:"3B"},A:{2:"K D E F A B WC"},F:{1:"NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s",2:"F B C G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB mC nC oC pC 4B UC qC 5B"},K:{1:"H",2:"A B C 4B UC 5B"},E:{1:"B C L M G 4B 5B gC hC iC IC JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC",2:"J BB K bC GC cC dC lC",33:"D E F A eC fC HC"},G:{1:"0C 1C 2C 3C 4C 5C 6C 7C 8C 9C AD IC JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC",2:"GC rC VC sC tC",33:"E uC vC wC xC yC zC"},P:{1:"t u v w x KD LD MD ND OD HC PD QD RD SD TD 7B 8B UD VD",2:"J"},I:{1:"I",2:"9B J ED FD GD HD VC ID JD"}},B:6,C:"isolate-override from unicode-bidi",D:void 0}),_P}var yP,xV;function x4e(){return xV||(xV=1,yP={A:{A:{2:"K D E F WC",132:"A B"},B:{1:"0 1 2 3 4 5 6 7 8 9 Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I",132:"C L M G N O",516:"P"},C:{1:"0 1 2 3 4 5 6 7 8 9 AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",2:"XC 9B J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB ZC aC"},D:{1:"0 1 2 3 4 5 6 7 8 9 pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC",2:"J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB",260:"nB oB"},E:{1:"7B KC LC MC NC OC kC 8B PC QC RC SC TC lC",2:"J BB K D E F A B C L M bC GC cC dC eC fC HC 4B 5B gC",1090:"G hC iC IC JC 6B jC"},F:{1:"eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s",2:"F B C G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB mC nC oC pC 4B UC qC 5B",260:"cB dB"},G:{1:"7B KC LC MC NC OC CD 8B PC QC RC SC TC",2:"E GC rC VC sC tC uC vC wC xC yC zC 0C 1C 2C 3C 4C 5C 6C 7C 8C",1090:"9C AD IC JC 6B BD"},H:{2:"DD"},I:{1:"I",2:"9B J ED FD GD HD VC ID JD"},J:{2:"D A"},K:{1:"H",2:"A B C 4B UC 5B"},L:{1:"I"},M:{1:"3B"},N:{132:"A B"},O:{1:"6B"},P:{1:"t u v w x ND OD HC PD QD RD SD TD 7B 8B UD VD",2:"J KD LD MD"},Q:{1:"WD"},R:{1:"XD"},S:{1:"ZD",2:"YD"}},B:5,C:"CSS overscroll-behavior",D:!0}),yP}var vP,bV;function b4e(){return bV||(bV=1,vP={A:{A:{2:"K D E F A B WC"},B:{1:"0 1 2 3 4 5 6 7 8 9 Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I",2:"C L M G N O P"},C:{1:"0 1 2 3 4 5 6 7 8 9 TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",2:"XC 9B J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB ZC aC",194:"QB RB SB"},D:{1:"0 1 2 3 4 5 6 7 8 9 aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC",2:"J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB"},E:{1:"M G hC iC IC JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC lC",2:"J BB K D E F bC GC cC dC eC fC",16:"A",33:"B C L HC 4B 5B gC"},F:{1:"NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s",2:"F B C G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB mC nC oC pC 4B UC qC 5B"},G:{1:"yC zC 0C 1C 2C 3C 4C 5C 6C 7C 8C 9C AD IC JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC",2:"E GC rC VC sC tC uC vC wC xC"},H:{2:"DD"},I:{1:"I",2:"9B J ED FD GD HD VC ID JD"},J:{2:"D A"},K:{1:"H",2:"A B C 4B UC 5B"},L:{1:"I"},M:{1:"3B"},N:{2:"A B"},O:{1:"6B"},P:{1:"t u v w x KD LD MD ND OD HC PD QD RD SD TD 7B 8B UD VD",2:"J"},Q:{1:"WD"},R:{1:"XD"},S:{1:"YD ZD"}},B:2,C:"CSS text-orientation",D:!0}),vP}var BP,CV;function C4e(){return CV||(CV=1,BP={A:{D:{2:"J BB K D E F A B C L M G N",33:"0 1 2 3 4 5 6 7 8 9 O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I 3B DC EC FC"},L:{33:"I"},B:{2:"C L M G N O P",33:"0 1 2 3 4 5 6 7 8 9 Q H R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s y z AB I"},C:{1:"0 1 2 3 4 5 6 7 8 9 g h i j k l m n o p q r s y z AB I 3B DC EC FC YC",2:"XC 9B J BB K D E F A B C L M G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB ZC aC",33:"aB bB cB dB eB fB gB hB iB jB kB AC lB BC mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f"},M:{1:"3B"},A:{2:"K D E F A B WC"},F:{2:"F B C mC nC oC pC 4B UC qC 5B",33:"G N O P CB t u v w x DB EB FB GB HB IB JB KB LB MB NB OB PB QB RB SB TB UB VB WB XB YB ZB aB bB cB dB eB fB gB hB iB jB kB lB mB nB oB pB qB rB sB tB uB vB wB xB yB zB 0B 1B 2B Q H R CC S T U V W X Y Z a b c d e f g h i j k l m n o p q r s"},K:{2:"A B C 4B UC 5B",33:"H"},E:{1:"JC 6B jC 7B KC LC MC NC OC kC 8B PC QC RC SC TC",2:"J BB bC GC cC lC",33:"K D E F A B C L M G dC eC fC HC 4B 5B gC hC iC IC"},G:{1:"JC 6B BD 7B KC LC MC NC OC CD 8B PC QC RC SC TC",2:"GC rC VC sC",33:"E tC uC vC wC xC yC zC 0C 1C 2C 3C 4C 5C 6C 7C 8C 9C AD IC"},P:{33:"J t u v w x KD LD MD ND OD HC PD QD RD SD TD 7B 8B UD VD"},I:{2:"9B J ED FD GD HD VC",33:"I ID JD"}},B:6,C:"print-color-adjust property",D:void 0}),BP}let w4e=WZ;function Zq(t,e){return t=t.split(" "),e=e.split(" "),t[0]>e[0]?1:t[0]<e[0]?-1:Math.sign(parseFloat(t[1])-parseFloat(e[1]))}function _r(t,e,r){t=w4e(t),r||([r,e]=[e,{}]);let o=e.match||/\sx($|\s)/,u=[];for(let f in t.stats){let p=t.stats[f];for(let x in p)p[x].match(o)&&u.push(f+" "+x)}r(u.sort(Zq))}let _w={};function fr(t,e){for(let r of t)_w[r]=Object.assign({},e)}function Fb(t,e){for(let r of t)_w[r].browsers=_w[r].browsers.concat(e.browsers).sort(Zq)}var S4e=_w;let T4e=lze();_r(T4e,t=>fr(["border-radius","border-top-left-radius","border-top-right-radius","border-bottom-right-radius","border-bottom-left-radius"],{browsers:t,feature:"border-radius",mistakes:["-khtml-","-ms-","-o-"]}));let A4e=uze();_r(A4e,t=>fr(["box-shadow"],{browsers:t,feature:"css-boxshadow",mistakes:["-khtml-"]}));let E4e=cze();_r(E4e,t=>fr(["animation","animation-name","animation-duration","animation-delay","animation-direction","animation-fill-mode","animation-iteration-count","animation-play-state","animation-timing-function","@keyframes"],{browsers:t,feature:"css-animation",mistakes:["-khtml-","-ms-"]}));let D4e=hze();_r(D4e,t=>fr(["transition","transition-property","transition-duration","transition-delay","transition-timing-function"],{browsers:t,feature:"css-transitions",mistakes:["-khtml-","-ms-"]}));let P4e=fze();_r(P4e,t=>fr(["transform","transform-origin"],{browsers:t,feature:"transforms2d"}));let qq=dze();_r(qq,t=>(fr(["perspective","perspective-origin"],{browsers:t,feature:"transforms3d"}),fr(["transform-style"],{browsers:t,feature:"transforms3d",mistakes:["-ms-","-o-"]})));_r(qq,{match:/y\sx|y\s#2/},t=>fr(["backface-visibility"],{browsers:t,feature:"transforms3d",mistakes:["-ms-","-o-"]}));let Kq=pze();_r(Kq,{match:/y\sx/},t=>fr(["linear-gradient","repeating-linear-gradient","radial-gradient","repeating-radial-gradient"],{browsers:t,feature:"css-gradients",mistakes:["-ms-"],props:["background","background-image","border-image","mask","list-style","list-style-image","content","mask-image"]}));_r(Kq,{match:/a\sx/},t=>(t=t.map(e=>/firefox|op/.test(e)?e:`${e} old`),Fb(["linear-gradient","repeating-linear-gradient","radial-gradient","repeating-radial-gradient"],{browsers:t,feature:"css-gradients"})));let M4e=mze();_r(M4e,t=>fr(["box-sizing"],{browsers:t,feature:"css3-boxsizing"}));let I4e=gze();_r(I4e,t=>fr(["filter"],{browsers:t,feature:"css-filters"}));let O4e=_ze();_r(O4e,t=>fr(["filter-function"],{browsers:t,feature:"css-filter-function",props:["background","background-image","border-image","mask","list-style","list-style-image","content","mask-image"]}));let k4e=yze();_r(k4e,{match:/y\sx|y\s#2/},t=>fr(["backdrop-filter"],{browsers:t,feature:"css-backdrop-filter"}));let L4e=vze();_r(L4e,t=>fr(["element"],{browsers:t,feature:"css-element-function",props:["background","background-image","border-image","mask","list-style","list-style-image","content","mask-image"]}));let R4e=Bze();_r(R4e,t=>{fr(["columns","column-width","column-gap","column-rule","column-rule-color","column-rule-width","column-count","column-rule-style","column-span","column-fill"],{browsers:t,feature:"multicolumn"});let e=t.filter(r=>!/firefox/.test(r));fr(["break-before","break-after","break-inside"],{browsers:e,feature:"multicolumn"})});let z4e=xze();_r(z4e,t=>fr(["user-select"],{browsers:t,feature:"user-select-none",mistakes:["-khtml-"]}));let Xq=bze();_r(Xq,{match:/a\sx/},t=>{t=t.map(e=>/ie|firefox/.test(e)?e:`${e} 2009`),fr(["display-flex","inline-flex"],{browsers:t,feature:"flexbox",props:["display"]}),fr(["flex","flex-grow","flex-shrink","flex-basis"],{browsers:t,feature:"flexbox"}),fr(["flex-direction","flex-wrap","flex-flow","justify-content","order","align-items","align-self","align-content"],{browsers:t,feature:"flexbox"})});_r(Xq,{match:/y\sx/},t=>{Fb(["display-flex","inline-flex"],{browsers:t,feature:"flexbox"}),Fb(["flex","flex-grow","flex-shrink","flex-basis"],{browsers:t,feature:"flexbox"}),Fb(["flex-direction","flex-wrap","flex-flow","justify-content","order","align-items","align-self","align-content"],{browsers:t,feature:"flexbox"})});let N4e=Cze();_r(N4e,t=>fr(["calc"],{browsers:t,feature:"calc",props:["*"]}));let F4e=wze();_r(F4e,t=>fr(["background-origin","background-size"],{browsers:t,feature:"background-img-opts"}));let j4e=Sze();_r(j4e,t=>fr(["background-clip"],{browsers:t,feature:"background-clip-text"}));let $4e=Tze();_r($4e,t=>fr(["font-feature-settings","font-variant-ligatures","font-language-override"],{browsers:t,feature:"font-feature"}));let U4e=Aze();_r(U4e,t=>fr(["font-kerning"],{browsers:t,feature:"font-kerning"}));let V4e=Eze();_r(V4e,t=>fr(["border-image"],{browsers:t,feature:"border-image"}));let G4e=Dze();_r(G4e,t=>fr(["::selection"],{browsers:t,feature:"css-selection",selector:!0}));let H4e=Pze();_r(H4e,t=>{fr(["::placeholder"],{browsers:t.concat(["ie 10 old","ie 11 old","firefox 18 old"]),feature:"css-placeholder",selector:!0})});let W4e=Mze();_r(W4e,t=>{fr([":placeholder-shown"],{browsers:t,feature:"css-placeholder-shown",selector:!0})});let Z4e=Ize();_r(Z4e,t=>fr(["hyphens"],{browsers:t,feature:"css-hyphens"}));let q4e=Oze();_r(q4e,t=>fr([":fullscreen"],{browsers:t,feature:"fullscreen",selector:!0}));let K4e=kze();_r(K4e,t=>fr(["::backdrop"],{browsers:t,feature:"backdrop",selector:!0}));let X4e=Lze();_r(X4e,t=>fr(["::file-selector-button"],{browsers:t,feature:"file-selector-button",selector:!0}));let Y4e=Rze();_r(Y4e,t=>fr([":autofill"],{browsers:t,feature:"css-autofill",selector:!0}));let J4e=zze();_r(J4e,t=>fr(["tab-size"],{browsers:t,feature:"css3-tabsize"}));let Zk=Nze(),RS=["width","min-width","max-width","height","min-height","max-height","inline-size","min-inline-size","max-inline-size","block-size","min-block-size","max-block-size","grid","grid-template","grid-template-rows","grid-template-columns","grid-auto-columns","grid-auto-rows"];_r(Zk,t=>fr(["max-content","min-content"],{browsers:t,feature:"intrinsic-width",props:RS}));_r(Zk,{match:/x|\s#4/},t=>fr(["fill","fill-available"],{browsers:t,feature:"intrinsic-width",props:RS}));_r(Zk,{match:/x|\s#5/},t=>fr(["fit-content"],{browsers:t,feature:"intrinsic-width",props:RS}));let Q4e=Fze();_r(Q4e,t=>fr(["stretch"],{browsers:t,feature:"css-width-stretch",props:RS}));let eNe=jze();_r(eNe,t=>fr(["zoom-in","zoom-out"],{browsers:t,feature:"css3-cursors-newer",props:["cursor"]}));let tNe=$ze();_r(tNe,t=>fr(["grab","grabbing"],{browsers:t,feature:"css3-cursors-grab",props:["cursor"]}));let rNe=Uze();_r(rNe,t=>fr(["sticky"],{browsers:t,feature:"css-sticky",props:["position"]}));let nNe=Vze();_r(nNe,t=>fr(["touch-action"],{browsers:t,feature:"pointer"}));let iNe=Gze();_r(iNe,{match:/x.*#[235]/},t=>fr(["text-decoration-skip","text-decoration-skip-ink"],{browsers:t,feature:"text-decoration"}));let oNe=Hze();_r(oNe,t=>fr(["text-decoration"],{browsers:t,feature:"text-decoration"}));let aNe=Wze();_r(aNe,t=>fr(["text-decoration-color"],{browsers:t,feature:"text-decoration"}));let sNe=Zze();_r(sNe,t=>fr(["text-decoration-line"],{browsers:t,feature:"text-decoration"}));let lNe=qze();_r(lNe,t=>fr(["text-decoration-style"],{browsers:t,feature:"text-decoration"}));let uNe=Kze();_r(uNe,t=>fr(["text-size-adjust"],{browsers:t,feature:"text-size-adjust"}));let cNe=Xze();_r(cNe,t=>{fr(["mask-clip","mask-composite","mask-image","mask-origin","mask-repeat","mask-border-repeat","mask-border-source"],{browsers:t,feature:"css-masks"}),fr(["mask","mask-position","mask-size","mask-border","mask-border-outset","mask-border-width","mask-border-slice"],{browsers:t,feature:"css-masks"})});let hNe=Yze();_r(hNe,t=>fr(["clip-path"],{browsers:t,feature:"css-clip-path"}));let fNe=Jze();_r(fNe,t=>fr(["box-decoration-break"],{browsers:t,feature:"css-boxdecorationbreak"}));let dNe=Qze();_r(dNe,t=>fr(["object-fit","object-position"],{browsers:t,feature:"object-fit"}));let pNe=e4e();_r(pNe,t=>fr(["shape-margin","shape-outside","shape-image-threshold"],{browsers:t,feature:"css-shapes"}));let mNe=t4e();_r(mNe,t=>fr(["text-overflow"],{browsers:t,feature:"text-overflow"}));let gNe=r4e();_r(gNe,t=>fr(["@viewport"],{browsers:t,feature:"css-deviceadaptation"}));let _Ne=n4e();_r(_Ne,{match:/( x($| )|a #2)/},t=>fr(["@resolution"],{browsers:t,feature:"css-media-resolution"}));let yNe=i4e();_r(yNe,t=>fr(["text-align-last"],{browsers:t,feature:"css-text-align-last"}));let Yq=o4e();_r(Yq,{match:/y x|a x #1/},t=>fr(["pixelated"],{browsers:t,feature:"css-crisp-edges",props:["image-rendering"]}));_r(Yq,{match:/a x #2/},t=>fr(["image-rendering"],{browsers:t,feature:"css-crisp-edges"}));let Jq=a4e();_r(Jq,t=>fr(["border-inline-start","border-inline-end","margin-inline-start","margin-inline-end","padding-inline-start","padding-inline-end"],{browsers:t,feature:"css-logical-props"}));_r(Jq,{match:/x\s#2/},t=>fr(["border-block-start","border-block-end","margin-block-start","margin-block-end","padding-block-start","padding-block-end"],{browsers:t,feature:"css-logical-props"}));let vNe=s4e();_r(vNe,{match:/#2|x/},t=>fr(["appearance"],{browsers:t,feature:"css-appearance"}));let BNe=l4e();_r(BNe,t=>fr(["scroll-snap-type","scroll-snap-coordinate","scroll-snap-destination","scroll-snap-points-x","scroll-snap-points-y"],{browsers:t,feature:"css-snappoints"}));let xNe=u4e();_r(xNe,t=>fr(["flow-into","flow-from","region-fragment"],{browsers:t,feature:"css-regions"}));let bNe=c4e();_r(bNe,t=>fr(["image-set"],{browsers:t,feature:"css-image-set",props:["background","background-image","border-image","cursor","mask","mask-image","list-style","list-style-image","content"]}));let CNe=h4e();_r(CNe,{match:/a|x/},t=>fr(["writing-mode"],{browsers:t,feature:"css-writing-mode"}));let wNe=f4e();_r(wNe,t=>fr(["cross-fade"],{browsers:t,feature:"css-cross-fade",props:["background","background-image","border-image","mask","list-style","list-style-image","content","mask-image"]}));let SNe=d4e();_r(SNe,t=>fr([":read-only",":read-write"],{browsers:t,feature:"css-read-only-write",selector:!0}));let TNe=p4e();_r(TNe,t=>fr(["text-emphasis","text-emphasis-position","text-emphasis-style","text-emphasis-color"],{browsers:t,feature:"text-emphasis"}));let Qq=m4e();_r(Qq,t=>{fr(["display-grid","inline-grid"],{browsers:t,feature:"css-grid",props:["display"]}),fr(["grid-template-columns","grid-template-rows","grid-row-start","grid-column-start","grid-row-end","grid-column-end","grid-row","grid-column","grid-area","grid-template","grid-template-areas","place-self"],{browsers:t,feature:"css-grid"})});_r(Qq,{match:/a x/},t=>fr(["grid-column-align","grid-row-align"],{browsers:t,feature:"css-grid"}));let ANe=g4e();_r(ANe,t=>fr(["text-spacing"],{browsers:t,feature:"css-text-spacing"}));let ENe=_4e();_r(ENe,t=>fr([":any-link"],{browsers:t,feature:"css-any-link",selector:!0}));let DNe=y4e();_r(DNe,t=>fr(["isolate"],{browsers:t,feature:"css-unicode-bidi",props:["unicode-bidi"]}));let PNe=v4e();_r(PNe,t=>fr(["plaintext"],{browsers:t,feature:"css-unicode-bidi",props:["unicode-bidi"]}));let MNe=B4e();_r(MNe,{match:/y x/},t=>fr(["isolate-override"],{browsers:t,feature:"css-unicode-bidi",props:["unicode-bidi"]}));let INe=x4e();_r(INe,{match:/a #1/},t=>fr(["overscroll-behavior"],{browsers:t,feature:"css-overscroll-behavior"}));let ONe=b4e();_r(ONe,t=>fr(["text-orientation"],{browsers:t,feature:"css-text-orientation"}));let kNe=C4e();_r(kNe,t=>fr(["print-color-adjust","color-adjust"],{browsers:t,feature:"css-print-color-adjust"}));let LNe=$k;function RNe(t){return t.slice(0,1).toUpperCase()+t.slice(1)}const zNe={and_chr:"Chrome for Android",and_ff:"Firefox for Android",and_qq:"QQ Browser",and_uc:"UC for Android",baidu:"Baidu Browser",ie:"IE",ie_mob:"IE Mobile",ios_saf:"iOS Safari",kaios:"KaiOS Browser",op_mini:"Opera Mini",op_mob:"Opera Mobile",samsung:"Samsung Internet"};function Bb(t,e,r){let o=`  ${t}`;return r&&(o+=" *"),o+=": ",o+=e.map(u=>u.replace(/^-(.*)-$/g,"$1")).join(", "),o+=`
`,o}var NNe=function(t){if(t.browsers.selected.length===0)return"No browsers selected";let e={};for(let I of t.browsers.selected){let P=I.split(" "),N=P[0],U=P[1];N=zNe[N]||RNe(N),e[N]?e[N].push(U):e[N]=[U]}let r=`Browsers:
`;for(let I in e){let P=e[I];P=P.sort((N,U)=>parseFloat(U)-parseFloat(N)),r+=`  ${I}: ${P.join(", ")}
`}let o=LNe.coverage(t.browsers.selected),u=Math.round(o*100)/100;r+=`
These browsers account for ${u}% of all users globally
`;let f=[];for(let I in t.add){let P=t.add[I];I[0]==="@"&&P.prefixes&&f.push(Bb(I,P.prefixes))}f.length>0&&(r+=`
At-Rules:
${f.sort().join("")}`);let p=[];for(let I of t.add.selectors)I.prefixes&&p.push(Bb(I.name,I.prefixes));p.length>0&&(r+=`
Selectors:
${p.sort().join("")}`);let x=[],s=[],w=!1;for(let I in t.add){let P=t.add[I];if(I[0]!=="@"&&P.prefixes){let N=I.indexOf("grid-")===0;N&&(w=!0),s.push(Bb(I,P.prefixes,N))}if(Array.isArray(P.values))for(let N of P.values){let U=N.name.includes("grid");U&&(w=!0);let X=Bb(N.name,N.prefixes,U);x.includes(X)||x.push(X)}}return s.length>0&&(r+=`
Properties:
${s.sort().join("")}`),x.length>0&&(r+=`
Values:
${x.sort().join("")}`),w&&(r+=`
* - Prefixes will be added only on grid: true option.
`),!f.length&&!p.length&&!s.length&&!x.length&&(r+=`
Awesome! Your browsers don't require any vendor prefixes.
Now you can remove Autoprefixer from build steps.`),r};let FNe=$k,{agents:jNe}=MS,wV=ZW,$Ne=tm,UNe=sze,VNe=S4e,GNe=NNe,eK={browsers:jNe,prefixes:VNe};const HNe=`
  Replace Autoprefixer \`browsers\` option to Browserslist config.
  Use \`browserslist\` key in \`package.json\` or \`.browserslistrc\` file.

  Using \`browsers\` option can cause errors. Browserslist config can
  be used for Babel, Autoprefixer, postcss-normalize and other tools.

  If you really need to use option, rename it to \`overrideBrowserslist\`.

  Learn more at:
  https://github.com/browserslist/browserslist#readme
  https://twitter.com/browserslist

`;function WNe(t){return Object.prototype.toString.apply(t)==="[object Object]"}let xP=new Map;function ZNe(t,e){e.browsers.selected.length!==0&&(e.add.selectors.length>0||Object.keys(e.add).length>2||t.warn(`Autoprefixer target browsers do not need any prefixes.You do not need Autoprefixer anymore.
Check your Browserslist config to be sure that your targets are set up correctly.

  Learn more at:
  https://github.com/postcss/autoprefixer#readme
  https://github.com/browserslist/browserslist#readme

`))}function pB(...t){let e;if(t.length===1&&WNe(t[0])?(e=t[0],t=void 0):t.length===0||t.length===1&&!t[0]?t=void 0:t.length<=2&&(Array.isArray(t[0])||!t[0])?(e=t[1],t=t[0]):typeof t[t.length-1]=="object"&&(e=t.pop()),e||(e={}),e.browser)throw new Error("Change `browser` option to `overrideBrowserslist` in Autoprefixer");if(e.browserslist)throw new Error("Change `browserslist` option to `overrideBrowserslist` in Autoprefixer");e.overrideBrowserslist?t=e.overrideBrowserslist:e.browsers&&(typeof console<"u"&&console.warn&&console.warn(wV.red(HNe.replace(/`[^`]+`/g,u=>wV.yellow(u.slice(1,-1))))),t=e.browsers);let r={env:e.env,ignoreUnknownVersions:e.ignoreUnknownVersions,stats:e.stats};function o(u){let f=eK,p=new $Ne(f.browsers,t,u,r),x=p.selected.join(", ")+JSON.stringify(e);return xP.has(x)||xP.set(x,new UNe(f.prefixes,p,e)),xP.get(x)}return{browsers:t,info(u){return u=u||{},u.from=u.from||process.cwd(),GNe(o(u))},options:e,postcssPlugin:"autoprefixer",prepare(u){let f=o({env:e.env,from:u.opts.from});return{OnceExit(p){ZNe(u,f),e.remove!==!1&&f.processor.remove(p,u),e.add!==!1&&f.processor.add(p,u)}}}}}pB.postcss=!0;pB.data=eK;pB.defaults=FNe.defaults;pB.info=()=>pB().info();function qNe({item:t,handleActiveSegmentedItem:e}){return Ie.jsx("div",{className:`blog-segmented-item row al-ctr jc-ctr ${t.active?"active":""}`,onClick:()=>e(t.id),children:Ie.jsx("p",{className:"title-small",children:t.title})})}function KNe({item:t}){return Ie.jsxs("div",{className:"grid-item col",children:[Ie.jsx("div",{className:"blog-img-container",children:Ie.jsx("img",{src:t.thumbnail,alt:""})}),Ie.jsxs("div",{className:"blog-article-content col gp-8",children:[Ie.jsxs("div",{className:"author-info row gp-8",children:[Ie.jsx("p",{className:"title-small",children:t.author}),Ie.jsx("p",{className:"title-small",children:t.date})]}),Ie.jsxs("div",{className:"article-info col gp-8",children:[Ie.jsx("p",{className:"title-large",children:t.title}),Ie.jsx("p",{className:"body-large description",children:t.description})]})]})]})}function XNe(){const[t,e]=Te.useState([{id:0,title:"Featured",active:!0},{id:1,title:"Just In",active:!1},{id:2,title:"Roadmap",active:!1},{id:3,title:"Guides",active:!1}]);function r(f){let p=t.map((x,s)=>s===f?{...x,active:!0}:{...x,active:!1});e(p)}const[o,u]=Te.useState([{title:"How to use the website?",author:"Naman R",date:"23 July 2003",description:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Fugit doloremque labore earum quod quae saepe, quibusdam aspernatur totam voluptates repellat esse atque quis provident? Suscipit iure facilis ullam corporis atque? Lorem ipsum dolor sit amet consectetur adipisicing elit. Quos ea praesentium repudiandae ullam, voluptatum nostrum molestiae molestias possimus ducimus ratione et numquam. Soluta magni dignissimos cumque magnam harum voluptatem delectus?",thumbnail:"https://images.unsplash.com/photo-1707149414369-5989e250c788?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwxfDB8MXxyYW5kb218MHx8fHx8fHx8MTcxNTE2ODI5MA&ixlib=rb-4.0.3&q=80&w=1080"},{title:"Introduction to React",author:"John Doe",date:"15 September 2023",description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus auctor, nisi vel accumsan ultricies, justo nisi volutpat magna, vitae placerat mi enim et libero. Phasellus vehicula nisi a justo sagittis congue. Integer lacinia, dui quis vestibulum placerat, eros sapien tristique mi, nec tincidunt lorem purus at nulla. Nullam condimentum, purus eu tempus vulputate, elit ex sollicitudin libero, eget laoreet ipsum nulla eu sapien.",thumbnail:"https://images.unsplash.com/photo-1707391453717-ce4103d0e8c4?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwxfDB8MXxyYW5kb218MHx8fHx8fHx8MTcxNTE2ODM5MQ&ixlib=rb-4.0.3&q=80&w=1080"},{title:"JavaScript Best Practices",author:"Jane Smith",date:"10 March 2024",description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam ultricies mauris vitae ex cursus, sit amet euismod elit fermentum. Quisque eget ex vel urna viverra consequat. Proin congue, eros nec bibendum dapibus, nisi est pharetra leo, sit amet pharetra risus justo nec orci. Fusce vitae dui eget felis viverra gravida. Sed consequat, libero ut posuere tempus, purus lacus tristique mauris, eu gravida mi libero eu justo. Donec volutpat commodo vehicula.",thumbnail:"https://images.unsplash.com/photo-1709770554994-f11ff89b0246?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwxfDB8MXxyYW5kb218MHx8fHx8fHx8MTcxNTE2ODM5OA&ixlib=rb-4.0.3&q=80&w=1080"},{title:"React Hooks",author:"John Doe",date:"15 September 2023",description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus auctor, nisi vel accumsan ultricies, justo nisi volutpat magna, vitae placerat mi enim et libero. Phasellus vehicula nisi a justo sagittis congue. Integer lacinia, dui quis vestibulum placerat, eros sapien tristique mi, nec tincidunt lorem purus at nulla. Nullam condimentum, purus eu tempus vulputate, elit ex sollicitudin libero, eget laoreet ipsum nulla eu sapien.",thumbnail:"https://images.unsplash.com/photo-1707391453717-ce4103d0e8c4?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwxfDB8MXxyYW5kb218MHx8fHx8fHx8MTcxNTE2ODM5MQ&ixlib=rb-4.0.3&q=80&w=1080"}]);return Ie.jsx("div",{className:"body-container blog-container-main col",children:Ie.jsxs("div",{className:"blogs-wrapper col gp-24",children:[Ie.jsx("div",{className:"blog-header row al-ctr jc-sb",children:Ie.jsxs("div",{className:"col",children:[Ie.jsx("p",{className:"vw-headline",children:"Documentation"}),Ie.jsx("p",{className:"title-medium subtext",children:"This section contains all the documents you will ever need to guide you through the website."})]})}),Ie.jsxs("div",{className:"blog-segmented-container row gp-16 flx-wrp jc-sb",children:[Ie.jsx("div",{className:"blog-segmented-items row flx-wrp jc-sa",children:t.map(f=>Ie.jsx(qNe,{item:f,handleActiveSegmentedItem:r},f.id))}),Ie.jsx(vG,{placeholder:"Search for an article.",minWidth:"200px"})]}),Ie.jsx("div",{className:"blogs-container",children:o.map((f,p)=>Ie.jsx(KNe,{item:f},p))})]})})}function YNe(){const[t,e]=Te.useState(),[r,o]=Te.useState({latitude:"",longitude:""}),[u,f]=Te.useState({fullAddress:null,latitude:null,longitude:null}),[p,x]=Te.useState([]);return Ie.jsx(v3.Provider,{value:[t,e],children:Ie.jsx(y3.Provider,{value:[p,x],children:Ie.jsx(_3.Provider,{value:[r,o],children:Ie.jsx(wB.Provider,{value:[u,f],children:Ie.jsx(cie,{children:Ie.jsx(CDe,{children:Ie.jsxs("div",{className:"main-wrapper col",children:[Ie.jsx(wie,{}),Ie.jsxs(Vte,{children:[Ie.jsx(P0,{path:"/",element:Ie.jsx(Cne,{})}),Ie.jsx(P0,{path:"/map",element:Ie.jsx(bie,{})}),Ie.jsx(P0,{path:"/metrics/:well_code?",element:Ie.jsx($Me,{})}),Ie.jsx(P0,{path:"/read",element:Ie.jsx(XNe,{})})]})]})})})})})})})}bP.createRoot(document.getElementById("root")).render(Ie.jsx(Ue.StrictMode,{children:Ie.jsx(Yte,{children:Ie.jsx(YNe,{})})}));
